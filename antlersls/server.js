#!/usr/bin/env node
"use strict";var mM=Object.create;var gf=Object.defineProperty;var gM=Object.getOwnPropertyDescriptor;var _M=Object.getOwnPropertyNames;var yM=Object.getPrototypeOf,TM=Object.prototype.hasOwnProperty;var A=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),bM=(t,e)=>{for(var i in e)gf(t,i,{get:e[i],enumerable:!0})},kT=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _M(e))!TM.call(t,n)&&n!==i&&gf(t,n,{get:()=>e[n],enumerable:!(r=gM(e,n))||r.enumerable});return t};var Y=(t,e,i)=>(i=t!=null?mM(yM(t)):{},kT(e||!t||!t.__esModule?gf(i,"default",{value:t,enumerable:!0}):i,t)),IM=t=>kT(gf({},"__esModule",{value:!0}),t);var Jh=A((K9,DT)=>{"use strict";var _f=require("path");function vM(t){if(typeof t!="string"||t.length<=7||t.substring(0,7)!=="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");let e=decodeURI(t.substring(7)),i=e.indexOf("/"),r=e.substring(0,i),n=e.substring(i+1);return r==="localhost"&&(r=""),r&&(r=_f.sep+_f.sep+r),n=n.replace(/^(.+)\|/,"$1:"),_f.sep==="\\"&&(n=n.replace(/\//g,"\\")),/^.+:/.test(n)||(n=_f.sep+n),r+n}DT.exports=vM});var LT=A((FT,yf)=>{(function(t){if(typeof yf=="object"&&typeof yf.exports=="object"){var e=t(require,FT);e!==void 0&&(yf.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function l(u,c,f,d){this._uri=u,this._languageId=c,this._version=f,this._content=d,this._lineOffsets=void 0}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),l.prototype.getText=function(u){if(u){var c=this.offsetAt(u.start),f=this.offsetAt(u.end);return this._content.substring(c,f)}return this._content},l.prototype.update=function(u,c){for(var f=0,d=u;f<d.length;f++){var h=d[f];if(l.isIncremental(h)){var p=o(h.range),y=this.offsetAt(p.start),v=this.offsetAt(p.end);this._content=this._content.substring(0,y)+h.text+this._content.substring(v,this._content.length);var b=Math.max(p.start.line,0),I=Math.max(p.end.line,0),C=this._lineOffsets,q=s(h.text,!1,y);if(I-b===q.length)for(var K=0,J=q.length;K<J;K++)C[K+b+1]=q[K];else q.length<1e4?C.splice.apply(C,[b+1,I-b].concat(q)):this._lineOffsets=C=C.slice(0,b+1).concat(q,C.slice(I+1));var ve=h.text.length-(v-y);if(ve!==0)for(var K=b+1+q.length,J=C.length;K<J;K++)C[K]=C[K]+ve}else if(l.isFull(h))this._content=h.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=c},l.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=s(this._content,!0)),this._lineOffsets},l.prototype.positionAt=function(u){u=Math.max(Math.min(u,this._content.length),0);var c=this.getLineOffsets(),f=0,d=c.length;if(d===0)return{line:0,character:u};for(;f<d;){var h=Math.floor((f+d)/2);c[h]>u?d=h:f=h+1}var p=f-1;return{line:p,character:u-c[p]}},l.prototype.offsetAt=function(u){var c=this.getLineOffsets();if(u.line>=c.length)return this._content.length;if(u.line<0)return 0;var f=c[u.line],d=u.line+1<c.length?c[u.line+1]:this._content.length;return Math.max(Math.min(f+u.character,d),f)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),l.isIncremental=function(u){var c=u;return c!=null&&typeof c.text=="string"&&c.range!==void 0&&(c.rangeLength===void 0||typeof c.rangeLength=="number")},l.isFull=function(u){var c=u;return c!=null&&typeof c.text=="string"&&c.range===void 0&&c.rangeLength===void 0},l}(),r;(function(l){function u(d,h,p,y){return new i(d,h,p,y)}l.create=u;function c(d,h,p){if(d instanceof i)return d.update(h,p),d;throw new Error("TextDocument.update: document must be created by TextDocument.create")}l.update=c;function f(d,h){for(var p=d.getText(),y=n(h.map(a),function(J,ve){var tt=J.range.start.line-ve.range.start.line;return tt===0?J.range.start.character-ve.range.start.character:tt}),v=0,b=[],I=0,C=y;I<C.length;I++){var q=C[I],K=d.offsetAt(q.range.start);if(K<v)throw new Error("Overlapping edit");K>v&&b.push(p.substring(v,K)),q.newText.length&&b.push(q.newText),v=d.offsetAt(q.range.end)}return b.push(p.substr(v)),b.join("")}l.applyEdits=f})(r=e.TextDocument||(e.TextDocument={}));function n(l,u){if(l.length<=1)return l;var c=l.length/2|0,f=l.slice(0,c),d=l.slice(c);n(f,u),n(d,u);for(var h=0,p=0,y=0;h<f.length&&p<d.length;){var v=u(f[h],d[p]);v<=0?l[y++]=f[h++]:l[y++]=d[p++]}for(;h<f.length;)l[y++]=f[h++];for(;p<d.length;)l[y++]=d[p++];return l}function s(l,u,c){c===void 0&&(c=0);for(var f=u?[c]:[],d=0;d<l.length;d++){var h=l.charCodeAt(d);(h===13||h===10)&&(h===13&&d+1<l.length&&l.charCodeAt(d+1)===10&&d++,f.push(c+d+1))}return f}function o(l){var u=l.start,c=l.end;return u.line>c.line||u.line===c.line&&u.character>c.character?{start:c,end:u}:l}function a(l){var u=o(l.range);return u!==l.range?{newText:l.newText,range:u}:l}})});var Tf=A(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.thenable=Ot.typedArray=Ot.stringArray=Ot.array=Ot.func=Ot.error=Ot.number=Ot.string=Ot.boolean=void 0;function NM(t){return t===!0||t===!1}Ot.boolean=NM;function OT(t){return typeof t=="string"||t instanceof String}Ot.string=OT;function SM(t){return typeof t=="number"||t instanceof Number}Ot.number=SM;function PM(t){return t instanceof Error}Ot.error=PM;function MT(t){return typeof t=="function"}Ot.func=MT;function qT(t){return Array.isArray(t)}Ot.array=qT;function AM(t){return qT(t)&&t.every(e=>OT(e))}Ot.stringArray=AM;function EM(t,e){return Array.isArray(t)&&t.every(e)}Ot.typedArray=EM;function CM(t){return t&&MT(t.then)}Ot.thenable=CM});var Kn=A(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});var Zh;function em(){if(Zh===void 0)throw new Error("No runtime abstraction layer installed");return Zh}(function(t){function e(i){if(i===void 0)throw new Error("No runtime abstraction layer provided");Zh=i}t.install=e})(em||(em={}));tm.default=em});var im=A(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.Disposable=void 0;var RM;(function(t){function e(i){return{dispose:i}}t.create=e})(RM=du.Disposable||(du.Disposable={}))});var BT=A(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.AbstractMessageBuffer=void 0;var xM=13,wM=10,kM=`\r
`,rm=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let i=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(i),this._totalLength+=i.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,i=0,r=0,n=0;e:for(;i<this._chunks.length;){let l=this._chunks[i];r=0;t:for(;r<l.length;){switch(l[r]){case xM:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case wM:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}n+=l.byteLength,i++}if(e!==4)return;let s=this._read(n+r),o=new Map,a=this.toString(s,"ascii").split(kM);if(a.length<2)return o;for(let l=0;l<a.length-2;l++){let u=a[l],c=u.indexOf(":");if(c===-1)throw new Error("Message header must separate key and value using :");let f=u.substr(0,c),d=u.substr(c+1).trim();o.set(f,d)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let i=this.allocNative(e),r=0,n=0;for(;e>0;){let s=this._chunks[n];if(s.byteLength>e){let o=s.slice(0,e);i.set(o,r),r+=e,this._chunks[n]=s.slice(e),this._totalLength-=e,e-=e}else i.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return i}};bf.AbstractMessageBuffer=rm});var jT=A(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});var DM=Kn(),VT=require("util"),Ao=im(),FM=BT(),Da=class extends FM.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Da.emptyBuffer}fromString(e,i){return Buffer.from(e,i)}toString(e,i){return e instanceof Buffer?e.toString(i):new VT.TextDecoder(i).decode(e)}asNative(e,i){return i===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,i):Buffer.from(e,0,i)}allocNative(e){return Buffer.allocUnsafe(e)}};Da.emptyBuffer=Buffer.allocUnsafe(0);var nm=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ao.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ao.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ao.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ao.Disposable.create(()=>this.stream.off("data",e))}},sm=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ao.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ao.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ao.Disposable.create(()=>this.stream.off("end",e))}write(e,i){return new Promise((r,n)=>{let s=o=>{o==null?r():n(o)};typeof e=="string"?this.stream.write(e,i,s):this.stream.write(e,s)})}end(){this.stream.end()}},UT=Object.freeze({messageBuffer:Object.freeze({create:t=>new Da(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(i){return Promise.reject(i)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new VT.TextDecoder(e.charset).decode(t)))}catch(i){return Promise.reject(i)}}})}),stream:Object.freeze({asReadableStream:t=>new nm(t),asWritableStream:t=>new sm(t)}),console,timer:Object.freeze({setTimeout(t,e,...i){return setTimeout(t,e,...i)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function om(){return UT}(function(t){function e(){DM.default.install(UT)}t.install=e})(om||(om={}));am.default=om});var Fa=A(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.stringArray=gi.array=gi.func=gi.error=gi.number=gi.string=gi.boolean=void 0;function LM(t){return t===!0||t===!1}gi.boolean=LM;function GT(t){return typeof t=="string"||t instanceof String}gi.string=GT;function OM(t){return typeof t=="number"||t instanceof Number}gi.number=OM;function MM(t){return t instanceof Error}gi.error=MM;function qM(t){return typeof t=="function"}gi.func=qM;function HT(t){return Array.isArray(t)}gi.array=HT;function BM(t){return HT(t)&&t.every(e=>GT(e))}gi.stringArray=BM});var xm=A(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.isResponseMessage=ne.isNotificationMessage=ne.isRequestMessage=ne.NotificationType9=ne.NotificationType8=ne.NotificationType7=ne.NotificationType6=ne.NotificationType5=ne.NotificationType4=ne.NotificationType3=ne.NotificationType2=ne.NotificationType1=ne.NotificationType0=ne.NotificationType=ne.RequestType9=ne.RequestType8=ne.RequestType7=ne.RequestType6=ne.RequestType5=ne.RequestType4=ne.RequestType3=ne.RequestType2=ne.RequestType1=ne.RequestType=ne.RequestType0=ne.AbstractMessageSignature=ne.ParameterStructures=ne.ResponseError=ne.ErrorCodes=void 0;var Eo=Fa(),WT;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(WT=ne.ErrorCodes||(ne.ErrorCodes={}));var pu=class extends Error{constructor(e,i,r){super(i),this.code=Eo.number(e)?e:WT.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,pu.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};ne.ResponseError=pu;var ei=class{constructor(e){this.kind=e}static is(e){return e===ei.auto||e===ei.byName||e===ei.byPosition}toString(){return this.kind}};ne.ParameterStructures=ei;ei.auto=new ei("auto");ei.byPosition=new ei("byPosition");ei.byName=new ei("byName");var pt=class{constructor(e,i){this.method=e,this.numberOfParams=i}get parameterStructures(){return ei.auto}};ne.AbstractMessageSignature=pt;var lm=class extends pt{constructor(e){super(e,0)}};ne.RequestType0=lm;var um=class extends pt{constructor(e,i=ei.auto){super(e,1),this._parameterStructures=i}get parameterStructures(){return this._parameterStructures}};ne.RequestType=um;var cm=class extends pt{constructor(e,i=ei.auto){super(e,1),this._parameterStructures=i}get parameterStructures(){return this._parameterStructures}};ne.RequestType1=cm;var fm=class extends pt{constructor(e){super(e,2)}};ne.RequestType2=fm;var dm=class extends pt{constructor(e){super(e,3)}};ne.RequestType3=dm;var pm=class extends pt{constructor(e){super(e,4)}};ne.RequestType4=pm;var hm=class extends pt{constructor(e){super(e,5)}};ne.RequestType5=hm;var mm=class extends pt{constructor(e){super(e,6)}};ne.RequestType6=mm;var gm=class extends pt{constructor(e){super(e,7)}};ne.RequestType7=gm;var _m=class extends pt{constructor(e){super(e,8)}};ne.RequestType8=_m;var ym=class extends pt{constructor(e){super(e,9)}};ne.RequestType9=ym;var Tm=class extends pt{constructor(e,i=ei.auto){super(e,1),this._parameterStructures=i}get parameterStructures(){return this._parameterStructures}};ne.NotificationType=Tm;var bm=class extends pt{constructor(e){super(e,0)}};ne.NotificationType0=bm;var Im=class extends pt{constructor(e,i=ei.auto){super(e,1),this._parameterStructures=i}get parameterStructures(){return this._parameterStructures}};ne.NotificationType1=Im;var vm=class extends pt{constructor(e){super(e,2)}};ne.NotificationType2=vm;var Nm=class extends pt{constructor(e){super(e,3)}};ne.NotificationType3=Nm;var Sm=class extends pt{constructor(e){super(e,4)}};ne.NotificationType4=Sm;var Pm=class extends pt{constructor(e){super(e,5)}};ne.NotificationType5=Pm;var Am=class extends pt{constructor(e){super(e,6)}};ne.NotificationType6=Am;var Em=class extends pt{constructor(e){super(e,7)}};ne.NotificationType7=Em;var Cm=class extends pt{constructor(e){super(e,8)}};ne.NotificationType8=Cm;var Rm=class extends pt{constructor(e){super(e,9)}};ne.NotificationType9=Rm;function VM(t){let e=t;return e&&Eo.string(e.method)&&(Eo.string(e.id)||Eo.number(e.id))}ne.isRequestMessage=VM;function UM(t){let e=t;return e&&Eo.string(e.method)&&t.id===void 0}ne.isNotificationMessage=UM;function jM(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Eo.string(e.id)||Eo.number(e.id)||e.id===null)}ne.isResponseMessage=jM});var Oa=A(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.Emitter=Co.Event=void 0;var GM=Kn(),HM;(function(t){let e={dispose(){}};t.None=function(){return e}})(HM=Co.Event||(Co.Event={}));var wm=class{add(e,i=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(i),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,i)})}remove(e,i=null){if(!this._callbacks)return;let r=!1;for(let n=0,s=this._callbacks.length;n<s;n++)if(this._callbacks[n]===e)if(this._contexts[n]===i){this._callbacks.splice(n,1),this._contexts.splice(n,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let i=[],r=this._callbacks.slice(0),n=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{i.push(r[s].apply(n[s],e))}catch(a){GM.default().console.error(a)}return i}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},La=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,i,r)=>{this._callbacks||(this._callbacks=new wm),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,i);let n={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,i),n.dispose=La._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Co.Emitter=La;La._noop=function(){}});var Lm=A(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.CancellationTokenSource=Ro.CancellationToken=void 0;var YT=Kn(),WM=Fa(),km=Oa(),Dm;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:km.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:km.Event.None});function e(i){let r=i;return r&&(r===t.None||r===t.Cancelled||WM.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Dm=Ro.CancellationToken||(Ro.CancellationToken={}));var YM=Object.freeze(function(t,e){let i=YT.default().timer.setTimeout(t.bind(e),0);return{dispose(){YT.default().timer.clearTimeout(i)}}}),If=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?YM:(this._emitter||(this._emitter=new km.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Fm=class{get token(){return this._token||(this._token=new If),this._token}cancel(){this._token?this._token.cancel():this._token=Dm.Cancelled}dispose(){this._token?this._token instanceof If&&this._token.dispose():this._token=Dm.None}};Ro.CancellationTokenSource=Fm});var KT=A($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ReadableStreamMessageReader=$n.AbstractMessageReader=$n.MessageReader=void 0;var vf=Kn(),Ma=Fa(),Om=Oa(),KM;(function(t){function e(i){let r=i;return r&&Ma.func(r.listen)&&Ma.func(r.dispose)&&Ma.func(r.onError)&&Ma.func(r.onClose)&&Ma.func(r.onPartialMessage)}t.is=e})(KM=$n.MessageReader||($n.MessageReader={}));var Nf=class{constructor(){this.errorEmitter=new Om.Emitter,this.closeEmitter=new Om.Emitter,this.partialMessageEmitter=new Om.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Ma.string(e.message)?e.message:"unknown"}`)}};$n.AbstractMessageReader=Nf;var Mm;(function(t){function e(i){var r;let n,s,o,a=new Map,l,u=new Map;if(i===void 0||typeof i=="string")n=i??"utf-8";else{if(n=(r=i.charset)!==null&&r!==void 0?r:"utf-8",i.contentDecoder!==void 0&&(o=i.contentDecoder,a.set(o.name,o)),i.contentDecoders!==void 0)for(let c of i.contentDecoders)a.set(c.name,c);if(i.contentTypeDecoder!==void 0&&(l=i.contentTypeDecoder,u.set(l.name,l)),i.contentTypeDecoders!==void 0)for(let c of i.contentTypeDecoders)u.set(c.name,c)}return l===void 0&&(l=vf.default().applicationJson.decoder,u.set(l.name,l)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:u}}t.fromOptions=e})(Mm||(Mm={}));var qm=class extends Nf{constructor(e,i){super(),this.readable=e,this.options=Mm.fromOptions(i),this.buffer=vf.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let i=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),i}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders();if(!n)return;let s=n.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let i=this.buffer.tryReadBody(this.nextMessageLength);if(i===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(i):r=Promise.resolve(i),r.then(n=>{this.options.contentTypeDecoder.decode(n,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},n=>{this.fireError(n)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(vf.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=vf.default().timer.setTimeout((e,i)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:i}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};$n.ReadableStreamMessageReader=qm});var $T=A(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.Semaphore=void 0;var $M=Kn(),Bm=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((i,r)=>{this._waiting.push({thunk:e,resolve:i,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||$M.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let i=e.thunk();i instanceof Promise?i.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(i),this.runNext())}catch(i){this._active--,e.reject(i),this.runNext()}}};Sf.Semaphore=Bm});var JT=A(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.WriteableStreamMessageWriter=zn.AbstractMessageWriter=zn.MessageWriter=void 0;var zT=Kn(),hu=Fa(),zM=$T(),QT=Oa(),QM="Content-Length: ",XT=`\r
`,XM;(function(t){function e(i){let r=i;return r&&hu.func(r.dispose)&&hu.func(r.onClose)&&hu.func(r.onError)&&hu.func(r.write)}t.is=e})(XM=zn.MessageWriter||(zn.MessageWriter={}));var Pf=class{constructor(){this.errorEmitter=new QT.Emitter,this.closeEmitter=new QT.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,i,r){this.errorEmitter.fire([this.asError(e),i,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${hu.string(e.message)?e.message:"unknown"}`)}};zn.AbstractMessageWriter=Pf;var Vm;(function(t){function e(i){var r,n;return i===void 0||typeof i=="string"?{charset:i??"utf-8",contentTypeEncoder:zT.default().applicationJson.encoder}:{charset:(r=i.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:i.contentEncoder,contentTypeEncoder:(n=i.contentTypeEncoder)!==null&&n!==void 0?n:zT.default().applicationJson.encoder}}t.fromOptions=e})(Vm||(Vm={}));var Um=class extends Pf{constructor(e,i){super(),this.writable=e,this.options=Vm.fromOptions(i),this.errorCount=0,this.writeSemaphore=new zM.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let n=[];return n.push(QM,r.byteLength.toString(),XT),n.push(XT),this.doWrite(e,n,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,i,r){try{return await this.writable.write(i.join(""),"ascii"),this.writable.write(r)}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,i){this.errorCount++,this.fireError(e,i,this.errorCount)}end(){this.writable.end()}};zn.WriteableStreamMessageWriter=Um});var ZT=A(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.LRUCache=Qn.LinkedMap=Qn.Touch=void 0;var Ri;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ri=Qn.Touch||(Qn.Touch={}));var Af=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,i=Ri.None){let r=this._map.get(e);if(!!r)return i!==Ri.None&&this.touch(r,i),r.value}set(e,i,r=Ri.None){let n=this._map.get(e);if(n)n.value=i,r!==Ri.None&&this.touch(n,r);else{switch(n={key:e,value:i,next:void 0,previous:void 0},r){case Ri.None:this.addItemLast(n);break;case Ri.First:this.addItemFirst(n);break;case Ri.Last:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let i=this._map.get(e);if(!!i)return this._map.delete(e),this.removeItem(i),this._size--,i.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,i){let r=this._state,n=this._head;for(;n;){if(i?e.bind(i)(n.value,n.key,this):e(n.value,n.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){let e=this,i=this._state,r=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return n}values(){let e=this,i=this._state,r=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return n}entries(){let e=this,i=this._state,r=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return n}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let i=this._head,r=this.size;for(;i&&r>e;)this._map.delete(i.key),i=i.next,r--;this._head=i,this._size=r,i&&(i.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let i=e.next,r=e.previous;if(!i||!r)throw new Error("Invalid list");i.previous=r,r.next=i}e.next=void 0,e.previous=void 0,this._state++}touch(e,i){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(i!==Ri.First&&i!==Ri.Last)){if(i===Ri.First){if(e===this._head)return;let r=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(r.previous=n,n.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(i===Ri.Last){if(e===this._tail)return;let r=e.next,n=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=n,n.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((i,r)=>{e.push([r,i])}),e}fromJSON(e){this.clear();for(let[i,r]of e)this.set(i,r)}};Qn.LinkedMap=Af;var jm=class extends Af{constructor(e,i=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,i),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,i=Ri.AsNew){return super.get(e,i)}peek(e){return super.get(e,Ri.None)}set(e,i){return super.set(e,i,Ri.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Qn.LRUCache=jm});var nb=A(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.createMessageConnection=Te.ConnectionOptions=Te.CancellationStrategy=Te.CancellationSenderStrategy=Te.CancellationReceiverStrategy=Te.ConnectionStrategy=Te.ConnectionError=Te.ConnectionErrors=Te.LogTraceNotification=Te.SetTraceNotification=Te.TraceFormat=Te.Trace=Te.NullLogger=Te.ProgressType=void 0;var eb=Kn(),ti=Fa(),me=xm(),tb=ZT(),mu=Oa(),Gm=Lm(),gu;(function(t){t.type=new me.NotificationType("$/cancelRequest")})(gu||(gu={}));var Cf;(function(t){t.type=new me.NotificationType("$/progress")})(Cf||(Cf={}));var Hm=class{constructor(){}};Te.ProgressType=Hm;var Wm;(function(t){function e(i){return ti.func(i)}t.is=e})(Wm||(Wm={}));Te.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Mt;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Mt=Te.Trace||(Te.Trace={}));(function(t){function e(r){if(!ti.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function i(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=i})(Mt=Te.Trace||(Te.Trace={}));var Zr;(function(t){t.Text="text",t.JSON="json"})(Zr=Te.TraceFormat||(Te.TraceFormat={}));(function(t){function e(i){return i=i.toLowerCase(),i==="json"?t.JSON:t.Text}t.fromString=e})(Zr=Te.TraceFormat||(Te.TraceFormat={}));var ib;(function(t){t.type=new me.NotificationType("$/setTrace")})(ib=Te.SetTraceNotification||(Te.SetTraceNotification={}));var Ym;(function(t){t.type=new me.NotificationType("$/logTrace")})(Ym=Te.LogTraceNotification||(Te.LogTraceNotification={}));var Ef;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ef=Te.ConnectionErrors||(Te.ConnectionErrors={}));var Ns=class extends Error{constructor(e,i){super(i),this.code=e,Object.setPrototypeOf(this,Ns.prototype)}};Te.ConnectionError=Ns;var rb;(function(t){function e(i){let r=i;return r&&ti.func(r.cancelUndispatched)}t.is=e})(rb=Te.ConnectionStrategy||(Te.ConnectionStrategy={}));var Km;(function(t){t.Message=Object.freeze({createCancellationTokenSource(i){return new Gm.CancellationTokenSource}});function e(i){let r=i;return r&&ti.func(r.createCancellationTokenSource)}t.is=e})(Km=Te.CancellationReceiverStrategy||(Te.CancellationReceiverStrategy={}));var $m;(function(t){t.Message=Object.freeze({sendCancellation(i,r){i.sendNotification(gu.type,{id:r})},cleanup(i){}});function e(i){let r=i;return r&&ti.func(r.sendCancellation)&&ti.func(r.cleanup)}t.is=e})($m=Te.CancellationSenderStrategy||(Te.CancellationSenderStrategy={}));var zm;(function(t){t.Message=Object.freeze({receiver:Km.Message,sender:$m.Message});function e(i){let r=i;return r&&Km.is(r.receiver)&&$m.is(r.sender)}t.is=e})(zm=Te.CancellationStrategy||(Te.CancellationStrategy={}));var JM;(function(t){function e(i){let r=i;return r&&(zm.is(r.cancellationStrategy)||rb.is(r.connectionStrategy))}t.is=e})(JM=Te.ConnectionOptions||(Te.ConnectionOptions={}));var en;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(en||(en={}));function ZM(t,e,i,r){let n=i!==void 0?i:Te.NullLogger,s=0,o=0,a=0,l="2.0",u,c=Object.create(null),f,d=Object.create(null),h=new Map,p,y=new tb.LinkedMap,v=Object.create(null),b=Object.create(null),I=Mt.Off,C=Zr.Text,q,K=en.New,J=new mu.Emitter,ve=new mu.Emitter,tt=new mu.Emitter,Lt=new mu.Emitter,dt=new mu.Emitter,ze=r&&r.cancellationStrategy?r.cancellationStrategy:zm.Message;function Ci(R){if(R===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+R.toString()}function Nr(R){return R===null?"res-unknown-"+(++a).toString():"res-"+R.toString()}function Sr(){return"not-"+(++o).toString()}function ys(R,P){me.isRequestMessage(P)?R.set(Ci(P.id),P):me.isResponseMessage(P)?R.set(Nr(P.id),P):R.set(Sr(),P)}function Ts(R){}function jn(){return K===en.Listening}function Io(){return K===en.Closed}function ir(){return K===en.Disposed}function vo(){(K===en.New||K===en.Listening)&&(K=en.Closed,ve.fire(void 0))}function va(R){J.fire([R,void 0,void 0])}function Gn(R){J.fire(R)}t.onClose(vo),t.onError(va),e.onClose(vo),e.onError(Gn);function rr(){p||y.size===0||(p=eb.default().timer.setImmediate(()=>{p=void 0,Na()}))}function Na(){if(y.size===0)return;let R=y.shift();try{me.isRequestMessage(R)?Pa(R):me.isNotificationMessage(R)?Hn(R):me.isResponseMessage(R)?Aa(R):Ea(R)}finally{rr()}}let Sa=R=>{try{if(me.isNotificationMessage(R)&&R.method===gu.type.method){let P=Ci(R.params.id),_=y.get(P);if(me.isRequestMessage(_)){let E=r?.connectionStrategy,w=E&&E.cancelUndispatched?E.cancelUndispatched(_,Ts):void 0;if(w&&(w.error!==void 0||w.result!==void 0)){y.delete(P),w.id=_.id,Wn(w,R.method,Date.now()),e.write(w);return}}}ys(y,R)}finally{rr()}};function Pa(R){if(ir())return;function P(M,Z,se){let ge={jsonrpc:l,id:R.id};M instanceof me.ResponseError?ge.error=M.toJson():ge.result=M===void 0?null:M,Wn(ge,Z,se),e.write(ge)}function _(M,Z,se){let ge={jsonrpc:l,id:R.id,error:M.toJson()};Wn(ge,Z,se),e.write(ge)}function E(M,Z,se){M===void 0&&(M=null);let ge={jsonrpc:l,id:R.id,result:M};Wn(ge,Z,se),e.write(ge)}xa(R);let w=c[R.method],N,g;w&&(N=w.type,g=w.handler);let k=Date.now();if(g||u){let M=String(R.id),Z=ze.receiver.createCancellationTokenSource(M);b[M]=Z;try{let se;if(g)if(R.params===void 0){if(N!==void 0&&N.numberOfParams!==0){_(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${R.method} defines ${N.numberOfParams} params but recevied none.`),R.method,k);return}se=g(Z.token)}else if(Array.isArray(R.params)){if(N!==void 0&&N.parameterStructures===me.ParameterStructures.byName){_(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by name but received parameters by position`),R.method,k);return}se=g(...R.params,Z.token)}else{if(N!==void 0&&N.parameterStructures===me.ParameterStructures.byPosition){_(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by position but received parameters by name`),R.method,k);return}se=g(R.params,Z.token)}else u&&(se=u(R.method,R.params,Z.token));let ge=se;se?ge.then?ge.then(Qe=>{delete b[M],P(Qe,R.method,k)},Qe=>{delete b[M],Qe instanceof me.ResponseError?_(Qe,R.method,k):Qe&&ti.string(Qe.message)?_(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${Qe.message}`),R.method,k):_(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,k)}):(delete b[M],P(se,R.method,k)):(delete b[M],E(se,R.method,k))}catch(se){delete b[M],se instanceof me.ResponseError?P(se,R.method,k):se&&ti.string(se.message)?_(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${se.message}`),R.method,k):_(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,k)}}else _(new me.ResponseError(me.ErrorCodes.MethodNotFound,`Unhandled method ${R.method}`),R.method,k)}function Aa(R){if(!ir())if(R.id===null)R.error?n.error(`Received response message without id: Error is: 
${JSON.stringify(R.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let P=String(R.id),_=v[P];if(wa(R,_),_){delete v[P];try{if(R.error){let E=R.error;_.reject(new me.ResponseError(E.code,E.message,E.data))}else if(R.result!==void 0)_.resolve(R.result);else throw new Error("Should never happen.")}catch(E){E.message?n.error(`Response handler '${_.method}' failed with message: ${E.message}`):n.error(`Response handler '${_.method}' failed unexpectedly.`)}}}}function Hn(R){if(ir())return;let P,_;if(R.method===gu.type.method)_=E=>{let w=E.id,N=b[String(w)];N&&N.cancel()};else{let E=d[R.method];E&&(_=E.handler,P=E.type)}if(_||f)try{bs(R),_?R.params===void 0?(P!==void 0&&P.numberOfParams!==0&&P.parameterStructures!==me.ParameterStructures.byName&&n.error(`Notification ${R.method} defines ${P.numberOfParams} params but recevied none.`),_()):Array.isArray(R.params)?(P!==void 0&&(P.parameterStructures===me.ParameterStructures.byName&&n.error(`Notification ${R.method} defines parameters by name but received parameters by position`),P.numberOfParams!==R.params.length&&n.error(`Notification ${R.method} defines ${P.numberOfParams} params but received ${R.params.length} argumennts`)),_(...R.params)):(P!==void 0&&P.parameterStructures===me.ParameterStructures.byPosition&&n.error(`Notification ${R.method} defines parameters by position but received parameters by name`),_(R.params)):f&&f(R.method,R.params)}catch(E){E.message?n.error(`Notification handler '${R.method}' failed with message: ${E.message}`):n.error(`Notification handler '${R.method}' failed unexpectedly.`)}else tt.fire(R)}function Ea(R){if(!R){n.error("Received empty message.");return}n.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(R,null,4)}`);let P=R;if(ti.string(P.id)||ti.number(P.id)){let _=String(P.id),E=v[_];E&&E.reject(new Error("The received response has neither a result nor an error property."))}}function Ca(R){if(!(I===Mt.Off||!q))if(C===Zr.Text){let P;I===Mt.Verbose&&R.params&&(P=`Params: ${JSON.stringify(R.params,null,4)}

`),q.log(`Sending request '${R.method} - (${R.id})'.`,P)}else zr("send-request",R)}function Ra(R){if(!(I===Mt.Off||!q))if(C===Zr.Text){let P;I===Mt.Verbose&&(R.params?P=`Params: ${JSON.stringify(R.params,null,4)}

`:P=`No parameters provided.

`),q.log(`Sending notification '${R.method}'.`,P)}else zr("send-notification",R)}function Wn(R,P,_){if(!(I===Mt.Off||!q))if(C===Zr.Text){let E;I===Mt.Verbose&&(R.error&&R.error.data?E=`Error data: ${JSON.stringify(R.error.data,null,4)}

`:R.result?E=`Result: ${JSON.stringify(R.result,null,4)}

`:R.error===void 0&&(E=`No result returned.

`)),q.log(`Sending response '${P} - (${R.id})'. Processing request took ${Date.now()-_}ms`,E)}else zr("send-response",R)}function xa(R){if(!(I===Mt.Off||!q))if(C===Zr.Text){let P;I===Mt.Verbose&&R.params&&(P=`Params: ${JSON.stringify(R.params,null,4)}

`),q.log(`Received request '${R.method} - (${R.id})'.`,P)}else zr("receive-request",R)}function bs(R){if(!(I===Mt.Off||!q||R.method===Ym.type.method))if(C===Zr.Text){let P;I===Mt.Verbose&&(R.params?P=`Params: ${JSON.stringify(R.params,null,4)}

`:P=`No parameters provided.

`),q.log(`Received notification '${R.method}'.`,P)}else zr("receive-notification",R)}function wa(R,P){if(!(I===Mt.Off||!q))if(C===Zr.Text){let _;if(I===Mt.Verbose&&(R.error&&R.error.data?_=`Error data: ${JSON.stringify(R.error.data,null,4)}

`:R.result?_=`Result: ${JSON.stringify(R.result,null,4)}

`:R.error===void 0&&(_=`No result returned.

`)),P){let E=R.error?` Request failed: ${R.error.message} (${R.error.code}).`:"";q.log(`Received response '${P.method} - (${R.id})' in ${Date.now()-P.timerStart}ms.${E}`,_)}else q.log(`Received response ${R.id} without active response promise.`,_)}else zr("receive-response",R)}function zr(R,P){if(!q||I===Mt.Off)return;let _={isLSPMessage:!0,type:R,message:P,timestamp:Date.now()};q.log(_)}function Qr(){if(Io())throw new Ns(Ef.Closed,"Connection is closed.");if(ir())throw new Ns(Ef.Disposed,"Connection is disposed.")}function Yn(){if(jn())throw new Ns(Ef.AlreadyListening,"Connection is already listening")}function No(){if(!jn())throw new Error("Call listen() first.")}function Xr(R){return R===void 0?null:R}function uu(R){if(R!==null)return R}function So(R){return R!=null&&!Array.isArray(R)&&typeof R=="object"}function Is(R,P){switch(R){case me.ParameterStructures.auto:return So(P)?uu(P):[Xr(P)];case me.ParameterStructures.byName:if(!So(P))throw new Error("Recevied parameters by name but param is not an object literal.");return uu(P);case me.ParameterStructures.byPosition:return[Xr(P)];default:throw new Error(`Unknown parameter structure ${R.toString()}`)}}function vs(R,P){let _,E=R.numberOfParams;switch(E){case 0:_=void 0;break;case 1:_=Is(R.parameterStructures,P[0]);break;default:_=[];for(let w=0;w<P.length&&w<E;w++)_.push(Xr(P[w]));if(P.length<E)for(let w=P.length;w<E;w++)_.push(null);break}return _}let Ui={sendNotification:(R,...P)=>{Qr();let _,E;if(ti.string(R)){_=R;let N=P[0],g=0,k=me.ParameterStructures.auto;me.ParameterStructures.is(N)&&(g=1,k=N);let M=P.length,Z=M-g;switch(Z){case 0:E=void 0;break;case 1:E=Is(k,P[g]);break;default:if(k===me.ParameterStructures.byName)throw new Error(`Recevied ${Z} parameters for 'by Name' notification parameter structure.`);E=P.slice(g,M).map(se=>Xr(se));break}}else{let N=P;_=R.method,E=vs(R,N)}let w={jsonrpc:l,method:_,params:E};Ra(w),e.write(w)},onNotification:(R,P)=>{Qr();let _;return ti.func(R)?f=R:P&&(ti.string(R)?(_=R,d[R]={type:void 0,handler:P}):(_=R.method,d[R.method]={type:R,handler:P})),{dispose:()=>{_!==void 0?delete d[_]:f=void 0}}},onProgress:(R,P,_)=>{if(h.has(P))throw new Error(`Progress handler for token ${P} already registered`);return h.set(P,_),{dispose:()=>{h.delete(P)}}},sendProgress:(R,P,_)=>{Ui.sendNotification(Cf.type,{token:P,value:_})},onUnhandledProgress:Lt.event,sendRequest:(R,...P)=>{Qr(),No();let _,E,w;if(ti.string(R)){_=R;let M=P[0],Z=P[P.length-1],se=0,ge=me.ParameterStructures.auto;me.ParameterStructures.is(M)&&(se=1,ge=M);let Qe=P.length;Gm.CancellationToken.is(Z)&&(Qe=Qe-1,w=Z);let Pt=Qe-se;switch(Pt){case 0:E=void 0;break;case 1:E=Is(ge,P[se]);break;default:if(ge===me.ParameterStructures.byName)throw new Error(`Recevied ${Pt} parameters for 'by Name' request parameter structure.`);E=P.slice(se,Qe).map(At=>Xr(At));break}}else{let M=P;_=R.method,E=vs(R,M);let Z=R.numberOfParams;w=Gm.CancellationToken.is(M[Z])?M[Z]:void 0}let N=s++,g;return w&&(g=w.onCancellationRequested(()=>{ze.sender.sendCancellation(Ui,N)})),new Promise((M,Z)=>{let se={jsonrpc:l,id:N,method:_,params:E},ge=At=>{M(At),ze.sender.cleanup(N),g?.dispose()},Qe=At=>{Z(At),ze.sender.cleanup(N),g?.dispose()},Pt={method:_,timerStart:Date.now(),resolve:ge,reject:Qe};Ca(se);try{e.write(se)}catch(At){Pt.reject(new me.ResponseError(me.ErrorCodes.MessageWriteError,At.message?At.message:"Unknown reason")),Pt=null}Pt&&(v[String(N)]=Pt)})},onRequest:(R,P)=>{Qr();let _=null;return Wm.is(R)?(_=void 0,u=R):ti.string(R)?(_=null,P!==void 0&&(_=R,c[R]={handler:P,type:void 0})):P!==void 0&&(_=R.method,c[R.method]={type:R,handler:P}),{dispose:()=>{_!==null&&(_!==void 0?delete c[_]:u=void 0)}}},trace:(R,P,_)=>{let E=!1,w=Zr.Text;_!==void 0&&(ti.boolean(_)?E=_:(E=_.sendNotification||!1,w=_.traceFormat||Zr.Text)),I=R,C=w,I===Mt.Off?q=void 0:q=P,E&&!Io()&&!ir()&&Ui.sendNotification(ib.type,{value:Mt.toString(R)})},onError:J.event,onClose:ve.event,onUnhandledNotification:tt.event,onDispose:dt.event,end:()=>{e.end()},dispose:()=>{if(ir())return;K=en.Disposed,dt.fire(void 0);let R=new Error("Connection got disposed.");Object.keys(v).forEach(P=>{v[P].reject(R)}),v=Object.create(null),b=Object.create(null),y=new tb.LinkedMap,ti.func(e.dispose)&&e.dispose(),ti.func(t.dispose)&&t.dispose()},listen:()=>{Qr(),Yn(),K=en.Listening,t.listen(Sa)},inspect:()=>{eb.default().console.log("inspect")}};return Ui.onNotification(Ym.type,R=>{I===Mt.Off||!q||q.log(R.message,I===Mt.Verbose?R.verbose:void 0)}),Ui.onNotification(Cf.type,R=>{let P=h.get(R.token);P?P(R.value):Lt.fire(R)}),Ui}Te.createMessageConnection=ZM});var Jm=A(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.CancellationSenderStrategy=G.CancellationReceiverStrategy=G.ConnectionError=G.ConnectionErrors=G.LogTraceNotification=G.SetTraceNotification=G.TraceFormat=G.Trace=G.ProgressType=G.createMessageConnection=G.NullLogger=G.ConnectionOptions=G.ConnectionStrategy=G.WriteableStreamMessageWriter=G.AbstractMessageWriter=G.MessageWriter=G.ReadableStreamMessageReader=G.AbstractMessageReader=G.MessageReader=G.CancellationToken=G.CancellationTokenSource=G.Emitter=G.Event=G.Disposable=G.ParameterStructures=G.NotificationType9=G.NotificationType8=G.NotificationType7=G.NotificationType6=G.NotificationType5=G.NotificationType4=G.NotificationType3=G.NotificationType2=G.NotificationType1=G.NotificationType0=G.NotificationType=G.ErrorCodes=G.ResponseError=G.RequestType9=G.RequestType8=G.RequestType7=G.RequestType6=G.RequestType5=G.RequestType4=G.RequestType3=G.RequestType2=G.RequestType1=G.RequestType0=G.RequestType=G.RAL=void 0;G.CancellationStrategy=void 0;var ht=xm();Object.defineProperty(G,"RequestType",{enumerable:!0,get:function(){return ht.RequestType}});Object.defineProperty(G,"RequestType0",{enumerable:!0,get:function(){return ht.RequestType0}});Object.defineProperty(G,"RequestType1",{enumerable:!0,get:function(){return ht.RequestType1}});Object.defineProperty(G,"RequestType2",{enumerable:!0,get:function(){return ht.RequestType2}});Object.defineProperty(G,"RequestType3",{enumerable:!0,get:function(){return ht.RequestType3}});Object.defineProperty(G,"RequestType4",{enumerable:!0,get:function(){return ht.RequestType4}});Object.defineProperty(G,"RequestType5",{enumerable:!0,get:function(){return ht.RequestType5}});Object.defineProperty(G,"RequestType6",{enumerable:!0,get:function(){return ht.RequestType6}});Object.defineProperty(G,"RequestType7",{enumerable:!0,get:function(){return ht.RequestType7}});Object.defineProperty(G,"RequestType8",{enumerable:!0,get:function(){return ht.RequestType8}});Object.defineProperty(G,"RequestType9",{enumerable:!0,get:function(){return ht.RequestType9}});Object.defineProperty(G,"ResponseError",{enumerable:!0,get:function(){return ht.ResponseError}});Object.defineProperty(G,"ErrorCodes",{enumerable:!0,get:function(){return ht.ErrorCodes}});Object.defineProperty(G,"NotificationType",{enumerable:!0,get:function(){return ht.NotificationType}});Object.defineProperty(G,"NotificationType0",{enumerable:!0,get:function(){return ht.NotificationType0}});Object.defineProperty(G,"NotificationType1",{enumerable:!0,get:function(){return ht.NotificationType1}});Object.defineProperty(G,"NotificationType2",{enumerable:!0,get:function(){return ht.NotificationType2}});Object.defineProperty(G,"NotificationType3",{enumerable:!0,get:function(){return ht.NotificationType3}});Object.defineProperty(G,"NotificationType4",{enumerable:!0,get:function(){return ht.NotificationType4}});Object.defineProperty(G,"NotificationType5",{enumerable:!0,get:function(){return ht.NotificationType5}});Object.defineProperty(G,"NotificationType6",{enumerable:!0,get:function(){return ht.NotificationType6}});Object.defineProperty(G,"NotificationType7",{enumerable:!0,get:function(){return ht.NotificationType7}});Object.defineProperty(G,"NotificationType8",{enumerable:!0,get:function(){return ht.NotificationType8}});Object.defineProperty(G,"NotificationType9",{enumerable:!0,get:function(){return ht.NotificationType9}});Object.defineProperty(G,"ParameterStructures",{enumerable:!0,get:function(){return ht.ParameterStructures}});var eq=im();Object.defineProperty(G,"Disposable",{enumerable:!0,get:function(){return eq.Disposable}});var sb=Oa();Object.defineProperty(G,"Event",{enumerable:!0,get:function(){return sb.Event}});Object.defineProperty(G,"Emitter",{enumerable:!0,get:function(){return sb.Emitter}});var ob=Lm();Object.defineProperty(G,"CancellationTokenSource",{enumerable:!0,get:function(){return ob.CancellationTokenSource}});Object.defineProperty(G,"CancellationToken",{enumerable:!0,get:function(){return ob.CancellationToken}});var Qm=KT();Object.defineProperty(G,"MessageReader",{enumerable:!0,get:function(){return Qm.MessageReader}});Object.defineProperty(G,"AbstractMessageReader",{enumerable:!0,get:function(){return Qm.AbstractMessageReader}});Object.defineProperty(G,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Qm.ReadableStreamMessageReader}});var Xm=JT();Object.defineProperty(G,"MessageWriter",{enumerable:!0,get:function(){return Xm.MessageWriter}});Object.defineProperty(G,"AbstractMessageWriter",{enumerable:!0,get:function(){return Xm.AbstractMessageWriter}});Object.defineProperty(G,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Xm.WriteableStreamMessageWriter}});var ji=nb();Object.defineProperty(G,"ConnectionStrategy",{enumerable:!0,get:function(){return ji.ConnectionStrategy}});Object.defineProperty(G,"ConnectionOptions",{enumerable:!0,get:function(){return ji.ConnectionOptions}});Object.defineProperty(G,"NullLogger",{enumerable:!0,get:function(){return ji.NullLogger}});Object.defineProperty(G,"createMessageConnection",{enumerable:!0,get:function(){return ji.createMessageConnection}});Object.defineProperty(G,"ProgressType",{enumerable:!0,get:function(){return ji.ProgressType}});Object.defineProperty(G,"Trace",{enumerable:!0,get:function(){return ji.Trace}});Object.defineProperty(G,"TraceFormat",{enumerable:!0,get:function(){return ji.TraceFormat}});Object.defineProperty(G,"SetTraceNotification",{enumerable:!0,get:function(){return ji.SetTraceNotification}});Object.defineProperty(G,"LogTraceNotification",{enumerable:!0,get:function(){return ji.LogTraceNotification}});Object.defineProperty(G,"ConnectionErrors",{enumerable:!0,get:function(){return ji.ConnectionErrors}});Object.defineProperty(G,"ConnectionError",{enumerable:!0,get:function(){return ji.ConnectionError}});Object.defineProperty(G,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ji.CancellationReceiverStrategy}});Object.defineProperty(G,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ji.CancellationSenderStrategy}});Object.defineProperty(G,"CancellationStrategy",{enumerable:!0,get:function(){return ji.CancellationStrategy}});var tq=Kn();G.RAL=tq.default});var Ba=A(Ke=>{"use strict";var iq=Ke&&Ke.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),rq=Ke&&Ke.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&iq(e,t,i)};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createMessageConnection=Ke.createServerSocketTransport=Ke.createClientSocketTransport=Ke.createServerPipeTransport=Ke.createClientPipeTransport=Ke.generateRandomPipeName=Ke.StreamMessageWriter=Ke.StreamMessageReader=Ke.SocketMessageWriter=Ke.SocketMessageReader=Ke.IPCMessageWriter=Ke.IPCMessageReader=void 0;var qa=jT();qa.default.install();var vn=Jm(),ab=require("path"),nq=require("os"),sq=require("crypto"),wf=require("net");rq(Jm(),Ke);var Zm=class extends vn.AbstractMessageReader{constructor(e){super(),this.process=e;let i=this.process;i.on("error",r=>this.fireError(r)),i.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),vn.Disposable.create(()=>this.process.off("message",e))}};Ke.IPCMessageReader=Zm;var eg=class extends vn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let i=this.process;i.on("error",r=>this.fireError(r)),i.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,i=>{i?(this.errorCount++,this.handleError(i,e)):this.errorCount=0}),Promise.resolve()}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,i){this.errorCount++,this.fireError(e,i,this.errorCount)}end(){}};Ke.IPCMessageWriter=eg;var xo=class extends vn.ReadableStreamMessageReader{constructor(e,i="utf-8"){super(qa.default().stream.asReadableStream(e),i)}};Ke.SocketMessageReader=xo;var wo=class extends vn.WriteableStreamMessageWriter{constructor(e,i){super(qa.default().stream.asWritableStream(e),i),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ke.SocketMessageWriter=wo;var Rf=class extends vn.ReadableStreamMessageReader{constructor(e,i){super(qa.default().stream.asReadableStream(e),i)}};Ke.StreamMessageReader=Rf;var xf=class extends vn.WriteableStreamMessageWriter{constructor(e,i){super(qa.default().stream.asWritableStream(e),i)}};Ke.StreamMessageWriter=xf;var lb=process.env.XDG_RUNTIME_DIR,oq=new Map([["linux",107],["darwin",103]]);function aq(){let t=sq.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;lb?e=ab.join(lb,`vscode-ipc-${t}.sock`):e=ab.join(nq.tmpdir(),`vscode-${t}.sock`);let i=oq.get(process.platform);return i!==void 0&&e.length>=i&&qa.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${i} characters.`),e}Ke.generateRandomPipeName=aq;function lq(t,e="utf-8"){let i,r=new Promise((n,s)=>{i=n});return new Promise((n,s)=>{let o=wf.createServer(a=>{o.close(),i([new xo(a,e),new wo(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),n({onConnected:()=>r})})})}Ke.createClientPipeTransport=lq;function uq(t,e="utf-8"){let i=wf.createConnection(t);return[new xo(i,e),new wo(i,e)]}Ke.createServerPipeTransport=uq;function cq(t,e="utf-8"){let i,r=new Promise((n,s)=>{i=n});return new Promise((n,s)=>{let o=wf.createServer(a=>{o.close(),i([new xo(a,e),new wo(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),n({onConnected:()=>r})})})}Ke.createClientSocketTransport=cq;function fq(t,e="utf-8"){let i=wf.createConnection(t,"127.0.0.1");return[new xo(i,e),new wo(i,e)]}Ke.createServerSocketTransport=fq;function dq(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function pq(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function hq(t,e,i,r){i||(i=vn.NullLogger);let n=dq(t)?new Rf(t):t,s=pq(e)?new xf(e):e;return vn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),vn.createMessageConnection(n,s,i,r)}Ke.createMessageConnection=hq});var tg=A((c8,ub)=>{"use strict";ub.exports=Ba()});var ot=A((cb,kf)=>{(function(t){if(typeof kf=="object"&&typeof kf.exports=="object"){var e=t(require,cb);e!==void 0&&(kf.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var i;(function(_){_.MIN_VALUE=-2147483648,_.MAX_VALUE=2147483647})(i=e.integer||(e.integer={}));var r;(function(_){_.MIN_VALUE=0,_.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var n;(function(_){function E(N,g){return N===Number.MAX_VALUE&&(N=r.MAX_VALUE),g===Number.MAX_VALUE&&(g=r.MAX_VALUE),{line:N,character:g}}_.create=E;function w(N){var g=N;return P.objectLiteral(g)&&P.uinteger(g.line)&&P.uinteger(g.character)}_.is=w})(n=e.Position||(e.Position={}));var s;(function(_){function E(N,g,k,M){if(P.uinteger(N)&&P.uinteger(g)&&P.uinteger(k)&&P.uinteger(M))return{start:n.create(N,g),end:n.create(k,M)};if(n.is(N)&&n.is(g))return{start:N,end:g};throw new Error("Range#create called with invalid arguments["+N+", "+g+", "+k+", "+M+"]")}_.create=E;function w(N){var g=N;return P.objectLiteral(g)&&n.is(g.start)&&n.is(g.end)}_.is=w})(s=e.Range||(e.Range={}));var o;(function(_){function E(N,g){return{uri:N,range:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&s.is(g.range)&&(P.string(g.uri)||P.undefined(g.uri))}_.is=w})(o=e.Location||(e.Location={}));var a;(function(_){function E(N,g,k,M){return{targetUri:N,targetRange:g,targetSelectionRange:k,originSelectionRange:M}}_.create=E;function w(N){var g=N;return P.defined(g)&&s.is(g.targetRange)&&P.string(g.targetUri)&&(s.is(g.targetSelectionRange)||P.undefined(g.targetSelectionRange))&&(s.is(g.originSelectionRange)||P.undefined(g.originSelectionRange))}_.is=w})(a=e.LocationLink||(e.LocationLink={}));var l;(function(_){function E(N,g,k,M){return{red:N,green:g,blue:k,alpha:M}}_.create=E;function w(N){var g=N;return P.numberRange(g.red,0,1)&&P.numberRange(g.green,0,1)&&P.numberRange(g.blue,0,1)&&P.numberRange(g.alpha,0,1)}_.is=w})(l=e.Color||(e.Color={}));var u;(function(_){function E(N,g){return{range:N,color:g}}_.create=E;function w(N){var g=N;return s.is(g.range)&&l.is(g.color)}_.is=w})(u=e.ColorInformation||(e.ColorInformation={}));var c;(function(_){function E(N,g,k){return{label:N,textEdit:g,additionalTextEdits:k}}_.create=E;function w(N){var g=N;return P.string(g.label)&&(P.undefined(g.textEdit)||C.is(g))&&(P.undefined(g.additionalTextEdits)||P.typedArray(g.additionalTextEdits,C.is))}_.is=w})(c=e.ColorPresentation||(e.ColorPresentation={}));var f;(function(_){_.Comment="comment",_.Imports="imports",_.Region="region"})(f=e.FoldingRangeKind||(e.FoldingRangeKind={}));var d;(function(_){function E(N,g,k,M,Z){var se={startLine:N,endLine:g};return P.defined(k)&&(se.startCharacter=k),P.defined(M)&&(se.endCharacter=M),P.defined(Z)&&(se.kind=Z),se}_.create=E;function w(N){var g=N;return P.uinteger(g.startLine)&&P.uinteger(g.startLine)&&(P.undefined(g.startCharacter)||P.uinteger(g.startCharacter))&&(P.undefined(g.endCharacter)||P.uinteger(g.endCharacter))&&(P.undefined(g.kind)||P.string(g.kind))}_.is=w})(d=e.FoldingRange||(e.FoldingRange={}));var h;(function(_){function E(N,g){return{location:N,message:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&o.is(g.location)&&P.string(g.message)}_.is=w})(h=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var p;(function(_){_.Error=1,_.Warning=2,_.Information=3,_.Hint=4})(p=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var y;(function(_){_.Unnecessary=1,_.Deprecated=2})(y=e.DiagnosticTag||(e.DiagnosticTag={}));var v;(function(_){function E(w){var N=w;return N!=null&&P.string(N.href)}_.is=E})(v=e.CodeDescription||(e.CodeDescription={}));var b;(function(_){function E(N,g,k,M,Z,se){var ge={range:N,message:g};return P.defined(k)&&(ge.severity=k),P.defined(M)&&(ge.code=M),P.defined(Z)&&(ge.source=Z),P.defined(se)&&(ge.relatedInformation=se),ge}_.create=E;function w(N){var g,k=N;return P.defined(k)&&s.is(k.range)&&P.string(k.message)&&(P.number(k.severity)||P.undefined(k.severity))&&(P.integer(k.code)||P.string(k.code)||P.undefined(k.code))&&(P.undefined(k.codeDescription)||P.string((g=k.codeDescription)===null||g===void 0?void 0:g.href))&&(P.string(k.source)||P.undefined(k.source))&&(P.undefined(k.relatedInformation)||P.typedArray(k.relatedInformation,h.is))}_.is=w})(b=e.Diagnostic||(e.Diagnostic={}));var I;(function(_){function E(N,g){for(var k=[],M=2;M<arguments.length;M++)k[M-2]=arguments[M];var Z={title:N,command:g};return P.defined(k)&&k.length>0&&(Z.arguments=k),Z}_.create=E;function w(N){var g=N;return P.defined(g)&&P.string(g.title)&&P.string(g.command)}_.is=w})(I=e.Command||(e.Command={}));var C;(function(_){function E(k,M){return{range:k,newText:M}}_.replace=E;function w(k,M){return{range:{start:k,end:k},newText:M}}_.insert=w;function N(k){return{range:k,newText:""}}_.del=N;function g(k){var M=k;return P.objectLiteral(M)&&P.string(M.newText)&&s.is(M.range)}_.is=g})(C=e.TextEdit||(e.TextEdit={}));var q;(function(_){function E(N,g,k){var M={label:N};return g!==void 0&&(M.needsConfirmation=g),k!==void 0&&(M.description=k),M}_.create=E;function w(N){var g=N;return g!==void 0&&P.objectLiteral(g)&&P.string(g.label)&&(P.boolean(g.needsConfirmation)||g.needsConfirmation===void 0)&&(P.string(g.description)||g.description===void 0)}_.is=w})(q=e.ChangeAnnotation||(e.ChangeAnnotation={}));var K;(function(_){function E(w){var N=w;return typeof N=="string"}_.is=E})(K=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var J;(function(_){function E(k,M,Z){return{range:k,newText:M,annotationId:Z}}_.replace=E;function w(k,M,Z){return{range:{start:k,end:k},newText:M,annotationId:Z}}_.insert=w;function N(k,M){return{range:k,newText:"",annotationId:M}}_.del=N;function g(k){var M=k;return C.is(M)&&(q.is(M.annotationId)||K.is(M.annotationId))}_.is=g})(J=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var ve;(function(_){function E(N,g){return{textDocument:N,edits:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&jn.is(g.textDocument)&&Array.isArray(g.edits)}_.is=w})(ve=e.TextDocumentEdit||(e.TextDocumentEdit={}));var tt;(function(_){function E(N,g,k){var M={kind:"create",uri:N};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(M.options=g),k!==void 0&&(M.annotationId=k),M}_.create=E;function w(N){var g=N;return g&&g.kind==="create"&&P.string(g.uri)&&(g.options===void 0||(g.options.overwrite===void 0||P.boolean(g.options.overwrite))&&(g.options.ignoreIfExists===void 0||P.boolean(g.options.ignoreIfExists)))&&(g.annotationId===void 0||K.is(g.annotationId))}_.is=w})(tt=e.CreateFile||(e.CreateFile={}));var Lt;(function(_){function E(N,g,k,M){var Z={kind:"rename",oldUri:N,newUri:g};return k!==void 0&&(k.overwrite!==void 0||k.ignoreIfExists!==void 0)&&(Z.options=k),M!==void 0&&(Z.annotationId=M),Z}_.create=E;function w(N){var g=N;return g&&g.kind==="rename"&&P.string(g.oldUri)&&P.string(g.newUri)&&(g.options===void 0||(g.options.overwrite===void 0||P.boolean(g.options.overwrite))&&(g.options.ignoreIfExists===void 0||P.boolean(g.options.ignoreIfExists)))&&(g.annotationId===void 0||K.is(g.annotationId))}_.is=w})(Lt=e.RenameFile||(e.RenameFile={}));var dt;(function(_){function E(N,g,k){var M={kind:"delete",uri:N};return g!==void 0&&(g.recursive!==void 0||g.ignoreIfNotExists!==void 0)&&(M.options=g),k!==void 0&&(M.annotationId=k),M}_.create=E;function w(N){var g=N;return g&&g.kind==="delete"&&P.string(g.uri)&&(g.options===void 0||(g.options.recursive===void 0||P.boolean(g.options.recursive))&&(g.options.ignoreIfNotExists===void 0||P.boolean(g.options.ignoreIfNotExists)))&&(g.annotationId===void 0||K.is(g.annotationId))}_.is=w})(dt=e.DeleteFile||(e.DeleteFile={}));var ze;(function(_){function E(w){var N=w;return N&&(N.changes!==void 0||N.documentChanges!==void 0)&&(N.documentChanges===void 0||N.documentChanges.every(function(g){return P.string(g.kind)?tt.is(g)||Lt.is(g)||dt.is(g):ve.is(g)}))}_.is=E})(ze=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ci=function(){function _(E,w){this.edits=E,this.changeAnnotations=w}return _.prototype.insert=function(E,w,N){var g,k;if(N===void 0?g=C.insert(E,w):K.is(N)?(k=N,g=J.insert(E,w,N)):(this.assertChangeAnnotations(this.changeAnnotations),k=this.changeAnnotations.manage(N),g=J.insert(E,w,k)),this.edits.push(g),k!==void 0)return k},_.prototype.replace=function(E,w,N){var g,k;if(N===void 0?g=C.replace(E,w):K.is(N)?(k=N,g=J.replace(E,w,N)):(this.assertChangeAnnotations(this.changeAnnotations),k=this.changeAnnotations.manage(N),g=J.replace(E,w,k)),this.edits.push(g),k!==void 0)return k},_.prototype.delete=function(E,w){var N,g;if(w===void 0?N=C.del(E):K.is(w)?(g=w,N=J.del(E,w)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(w),N=J.del(E,g)),this.edits.push(N),g!==void 0)return g},_.prototype.add=function(E){this.edits.push(E)},_.prototype.all=function(){return this.edits},_.prototype.clear=function(){this.edits.splice(0,this.edits.length)},_.prototype.assertChangeAnnotations=function(E){if(E===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},_}(),Nr=function(){function _(E){this._annotations=E===void 0?Object.create(null):E,this._counter=0,this._size=0}return _.prototype.all=function(){return this._annotations},Object.defineProperty(_.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),_.prototype.manage=function(E,w){var N;if(K.is(E)?N=E:(N=this.nextId(),w=E),this._annotations[N]!==void 0)throw new Error("Id "+N+" is already in use.");if(w===void 0)throw new Error("No annotation provided for id "+N);return this._annotations[N]=w,this._size++,N},_.prototype.nextId=function(){return this._counter++,this._counter.toString()},_}(),Sr=function(){function _(E){var w=this;this._textEditChanges=Object.create(null),E!==void 0?(this._workspaceEdit=E,E.documentChanges?(this._changeAnnotations=new Nr(E.changeAnnotations),E.changeAnnotations=this._changeAnnotations.all(),E.documentChanges.forEach(function(N){if(ve.is(N)){var g=new Ci(N.edits,w._changeAnnotations);w._textEditChanges[N.textDocument.uri]=g}})):E.changes&&Object.keys(E.changes).forEach(function(N){var g=new Ci(E.changes[N]);w._textEditChanges[N]=g})):this._workspaceEdit={}}return Object.defineProperty(_.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),_.prototype.getTextEditChange=function(E){if(jn.is(E)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w={uri:E.uri,version:E.version},N=this._textEditChanges[w.uri];if(!N){var g=[],k={textDocument:w,edits:g};this._workspaceEdit.documentChanges.push(k),N=new Ci(g,this._changeAnnotations),this._textEditChanges[w.uri]=N}return N}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var N=this._textEditChanges[E];if(!N){var g=[];this._workspaceEdit.changes[E]=g,N=new Ci(g),this._textEditChanges[E]=N}return N}},_.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Nr,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},_.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},_.prototype.createFile=function(E,w,N){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;q.is(w)||K.is(w)?g=w:N=w;var k,M;if(g===void 0?k=tt.create(E,N):(M=K.is(g)?g:this._changeAnnotations.manage(g),k=tt.create(E,N,M)),this._workspaceEdit.documentChanges.push(k),M!==void 0)return M},_.prototype.renameFile=function(E,w,N,g){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var k;q.is(N)||K.is(N)?k=N:g=N;var M,Z;if(k===void 0?M=Lt.create(E,w,g):(Z=K.is(k)?k:this._changeAnnotations.manage(k),M=Lt.create(E,w,g,Z)),this._workspaceEdit.documentChanges.push(M),Z!==void 0)return Z},_.prototype.deleteFile=function(E,w,N){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;q.is(w)||K.is(w)?g=w:N=w;var k,M;if(g===void 0?k=dt.create(E,N):(M=K.is(g)?g:this._changeAnnotations.manage(g),k=dt.create(E,N,M)),this._workspaceEdit.documentChanges.push(k),M!==void 0)return M},_}();e.WorkspaceChange=Sr;var ys;(function(_){function E(N){return{uri:N}}_.create=E;function w(N){var g=N;return P.defined(g)&&P.string(g.uri)}_.is=w})(ys=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Ts;(function(_){function E(N,g){return{uri:N,version:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&P.string(g.uri)&&P.integer(g.version)}_.is=w})(Ts=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var jn;(function(_){function E(N,g){return{uri:N,version:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&P.string(g.uri)&&(g.version===null||P.integer(g.version))}_.is=w})(jn=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Io;(function(_){function E(N,g,k,M){return{uri:N,languageId:g,version:k,text:M}}_.create=E;function w(N){var g=N;return P.defined(g)&&P.string(g.uri)&&P.string(g.languageId)&&P.integer(g.version)&&P.string(g.text)}_.is=w})(Io=e.TextDocumentItem||(e.TextDocumentItem={}));var ir;(function(_){_.PlainText="plaintext",_.Markdown="markdown"})(ir=e.MarkupKind||(e.MarkupKind={})),function(_){function E(w){var N=w;return N===_.PlainText||N===_.Markdown}_.is=E}(ir=e.MarkupKind||(e.MarkupKind={}));var vo;(function(_){function E(w){var N=w;return P.objectLiteral(w)&&ir.is(N.kind)&&P.string(N.value)}_.is=E})(vo=e.MarkupContent||(e.MarkupContent={}));var va;(function(_){_.Text=1,_.Method=2,_.Function=3,_.Constructor=4,_.Field=5,_.Variable=6,_.Class=7,_.Interface=8,_.Module=9,_.Property=10,_.Unit=11,_.Value=12,_.Enum=13,_.Keyword=14,_.Snippet=15,_.Color=16,_.File=17,_.Reference=18,_.Folder=19,_.EnumMember=20,_.Constant=21,_.Struct=22,_.Event=23,_.Operator=24,_.TypeParameter=25})(va=e.CompletionItemKind||(e.CompletionItemKind={}));var Gn;(function(_){_.PlainText=1,_.Snippet=2})(Gn=e.InsertTextFormat||(e.InsertTextFormat={}));var rr;(function(_){_.Deprecated=1})(rr=e.CompletionItemTag||(e.CompletionItemTag={}));var Na;(function(_){function E(N,g,k){return{newText:N,insert:g,replace:k}}_.create=E;function w(N){var g=N;return g&&P.string(g.newText)&&s.is(g.insert)&&s.is(g.replace)}_.is=w})(Na=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Sa;(function(_){_.asIs=1,_.adjustIndentation=2})(Sa=e.InsertTextMode||(e.InsertTextMode={}));var Pa;(function(_){function E(w){return{label:w}}_.create=E})(Pa=e.CompletionItem||(e.CompletionItem={}));var Aa;(function(_){function E(w,N){return{items:w||[],isIncomplete:!!N}}_.create=E})(Aa=e.CompletionList||(e.CompletionList={}));var Hn;(function(_){function E(N){return N.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}_.fromPlainText=E;function w(N){var g=N;return P.string(g)||P.objectLiteral(g)&&P.string(g.language)&&P.string(g.value)}_.is=w})(Hn=e.MarkedString||(e.MarkedString={}));var Ea;(function(_){function E(w){var N=w;return!!N&&P.objectLiteral(N)&&(vo.is(N.contents)||Hn.is(N.contents)||P.typedArray(N.contents,Hn.is))&&(w.range===void 0||s.is(w.range))}_.is=E})(Ea=e.Hover||(e.Hover={}));var Ca;(function(_){function E(w,N){return N?{label:w,documentation:N}:{label:w}}_.create=E})(Ca=e.ParameterInformation||(e.ParameterInformation={}));var Ra;(function(_){function E(w,N){for(var g=[],k=2;k<arguments.length;k++)g[k-2]=arguments[k];var M={label:w};return P.defined(N)&&(M.documentation=N),P.defined(g)?M.parameters=g:M.parameters=[],M}_.create=E})(Ra=e.SignatureInformation||(e.SignatureInformation={}));var Wn;(function(_){_.Text=1,_.Read=2,_.Write=3})(Wn=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var xa;(function(_){function E(w,N){var g={range:w};return P.number(N)&&(g.kind=N),g}_.create=E})(xa=e.DocumentHighlight||(e.DocumentHighlight={}));var bs;(function(_){_.File=1,_.Module=2,_.Namespace=3,_.Package=4,_.Class=5,_.Method=6,_.Property=7,_.Field=8,_.Constructor=9,_.Enum=10,_.Interface=11,_.Function=12,_.Variable=13,_.Constant=14,_.String=15,_.Number=16,_.Boolean=17,_.Array=18,_.Object=19,_.Key=20,_.Null=21,_.EnumMember=22,_.Struct=23,_.Event=24,_.Operator=25,_.TypeParameter=26})(bs=e.SymbolKind||(e.SymbolKind={}));var wa;(function(_){_.Deprecated=1})(wa=e.SymbolTag||(e.SymbolTag={}));var zr;(function(_){function E(w,N,g,k,M){var Z={name:w,kind:N,location:{uri:k,range:g}};return M&&(Z.containerName=M),Z}_.create=E})(zr=e.SymbolInformation||(e.SymbolInformation={}));var Qr;(function(_){function E(N,g,k,M,Z,se){var ge={name:N,detail:g,kind:k,range:M,selectionRange:Z};return se!==void 0&&(ge.children=se),ge}_.create=E;function w(N){var g=N;return g&&P.string(g.name)&&P.number(g.kind)&&s.is(g.range)&&s.is(g.selectionRange)&&(g.detail===void 0||P.string(g.detail))&&(g.deprecated===void 0||P.boolean(g.deprecated))&&(g.children===void 0||Array.isArray(g.children))&&(g.tags===void 0||Array.isArray(g.tags))}_.is=w})(Qr=e.DocumentSymbol||(e.DocumentSymbol={}));var Yn;(function(_){_.Empty="",_.QuickFix="quickfix",_.Refactor="refactor",_.RefactorExtract="refactor.extract",_.RefactorInline="refactor.inline",_.RefactorRewrite="refactor.rewrite",_.Source="source",_.SourceOrganizeImports="source.organizeImports",_.SourceFixAll="source.fixAll"})(Yn=e.CodeActionKind||(e.CodeActionKind={}));var No;(function(_){function E(N,g){var k={diagnostics:N};return g!=null&&(k.only=g),k}_.create=E;function w(N){var g=N;return P.defined(g)&&P.typedArray(g.diagnostics,b.is)&&(g.only===void 0||P.typedArray(g.only,P.string))}_.is=w})(No=e.CodeActionContext||(e.CodeActionContext={}));var Xr;(function(_){function E(N,g,k){var M={title:N},Z=!0;return typeof g=="string"?(Z=!1,M.kind=g):I.is(g)?M.command=g:M.edit=g,Z&&k!==void 0&&(M.kind=k),M}_.create=E;function w(N){var g=N;return g&&P.string(g.title)&&(g.diagnostics===void 0||P.typedArray(g.diagnostics,b.is))&&(g.kind===void 0||P.string(g.kind))&&(g.edit!==void 0||g.command!==void 0)&&(g.command===void 0||I.is(g.command))&&(g.isPreferred===void 0||P.boolean(g.isPreferred))&&(g.edit===void 0||ze.is(g.edit))}_.is=w})(Xr=e.CodeAction||(e.CodeAction={}));var uu;(function(_){function E(N,g){var k={range:N};return P.defined(g)&&(k.data=g),k}_.create=E;function w(N){var g=N;return P.defined(g)&&s.is(g.range)&&(P.undefined(g.command)||I.is(g.command))}_.is=w})(uu=e.CodeLens||(e.CodeLens={}));var So;(function(_){function E(N,g){return{tabSize:N,insertSpaces:g}}_.create=E;function w(N){var g=N;return P.defined(g)&&P.uinteger(g.tabSize)&&P.boolean(g.insertSpaces)}_.is=w})(So=e.FormattingOptions||(e.FormattingOptions={}));var Is;(function(_){function E(N,g,k){return{range:N,target:g,data:k}}_.create=E;function w(N){var g=N;return P.defined(g)&&s.is(g.range)&&(P.undefined(g.target)||P.string(g.target))}_.is=w})(Is=e.DocumentLink||(e.DocumentLink={}));var vs;(function(_){function E(N,g){return{range:N,parent:g}}_.create=E;function w(N){var g=N;return g!==void 0&&s.is(g.range)&&(g.parent===void 0||_.is(g.parent))}_.is=w})(vs=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var Ui;(function(_){function E(k,M,Z,se){return new R(k,M,Z,se)}_.create=E;function w(k){var M=k;return!!(P.defined(M)&&P.string(M.uri)&&(P.undefined(M.languageId)||P.string(M.languageId))&&P.uinteger(M.lineCount)&&P.func(M.getText)&&P.func(M.positionAt)&&P.func(M.offsetAt))}_.is=w;function N(k,M){for(var Z=k.getText(),se=g(M,function(In,Po){var cu=In.range.start.line-Po.range.start.line;return cu===0?In.range.start.character-Po.range.start.character:cu}),ge=Z.length,Qe=se.length-1;Qe>=0;Qe--){var Pt=se[Qe],At=k.offsetAt(Pt.range.start),ke=k.offsetAt(Pt.range.end);if(ke<=ge)Z=Z.substring(0,At)+Pt.newText+Z.substring(ke,Z.length);else throw new Error("Overlapping edit");ge=At}return Z}_.applyEdits=N;function g(k,M){if(k.length<=1)return k;var Z=k.length/2|0,se=k.slice(0,Z),ge=k.slice(Z);g(se,M),g(ge,M);for(var Qe=0,Pt=0,At=0;Qe<se.length&&Pt<ge.length;){var ke=M(se[Qe],ge[Pt]);ke<=0?k[At++]=se[Qe++]:k[At++]=ge[Pt++]}for(;Qe<se.length;)k[At++]=se[Qe++];for(;Pt<ge.length;)k[At++]=ge[Pt++];return k}})(Ui=e.TextDocument||(e.TextDocument={}));var R=function(){function _(E,w,N,g){this._uri=E,this._languageId=w,this._version=N,this._content=g,this._lineOffsets=void 0}return Object.defineProperty(_.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),_.prototype.getText=function(E){if(E){var w=this.offsetAt(E.start),N=this.offsetAt(E.end);return this._content.substring(w,N)}return this._content},_.prototype.update=function(E,w){this._content=E.text,this._version=w,this._lineOffsets=void 0},_.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var E=[],w=this._content,N=!0,g=0;g<w.length;g++){N&&(E.push(g),N=!1);var k=w.charAt(g);N=k==="\r"||k===`
`,k==="\r"&&g+1<w.length&&w.charAt(g+1)===`
`&&g++}N&&w.length>0&&E.push(w.length),this._lineOffsets=E}return this._lineOffsets},_.prototype.positionAt=function(E){E=Math.max(Math.min(E,this._content.length),0);var w=this.getLineOffsets(),N=0,g=w.length;if(g===0)return n.create(0,E);for(;N<g;){var k=Math.floor((N+g)/2);w[k]>E?g=k:N=k+1}var M=N-1;return n.create(M,E-w[M])},_.prototype.offsetAt=function(E){var w=this.getLineOffsets();if(E.line>=w.length)return this._content.length;if(E.line<0)return 0;var N=w[E.line],g=E.line+1<w.length?w[E.line+1]:this._content.length;return Math.max(Math.min(N+E.character,g),N)},Object.defineProperty(_.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),_}(),P;(function(_){var E=Object.prototype.toString;function w(ke){return typeof ke<"u"}_.defined=w;function N(ke){return typeof ke>"u"}_.undefined=N;function g(ke){return ke===!0||ke===!1}_.boolean=g;function k(ke){return E.call(ke)==="[object String]"}_.string=k;function M(ke){return E.call(ke)==="[object Number]"}_.number=M;function Z(ke,In,Po){return E.call(ke)==="[object Number]"&&In<=ke&&ke<=Po}_.numberRange=Z;function se(ke){return E.call(ke)==="[object Number]"&&-2147483648<=ke&&ke<=2147483647}_.integer=se;function ge(ke){return E.call(ke)==="[object Number]"&&0<=ke&&ke<=2147483647}_.uinteger=ge;function Qe(ke){return E.call(ke)==="[object Function]"}_.func=Qe;function Pt(ke){return ke!==null&&typeof ke=="object"}_.objectLiteral=Pt;function At(ke,In){return Array.isArray(ke)&&ke.every(In)}_.typedArray=At})(P||(P={}))})});var ii=A(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.ProtocolNotificationType=Pr.ProtocolNotificationType0=Pr.ProtocolRequestType=Pr.ProtocolRequestType0=Pr.RegistrationType=void 0;var Va=Ba(),ig=class{constructor(e){this.method=e}};Pr.RegistrationType=ig;var rg=class extends Va.RequestType0{constructor(e){super(e)}};Pr.ProtocolRequestType0=rg;var ng=class extends Va.RequestType{constructor(e){super(e,Va.ParameterStructures.byName)}};Pr.ProtocolRequestType=ng;var sg=class extends Va.NotificationType0{constructor(e){super(e)}};Pr.ProtocolNotificationType0=sg;var og=class extends Va.NotificationType{constructor(e){super(e,Va.ParameterStructures.byName)}};Pr.ProtocolNotificationType=og});var pb=A(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.objectLiteral=qt.typedArray=qt.stringArray=qt.array=qt.func=qt.error=qt.number=qt.string=qt.boolean=void 0;function mq(t){return t===!0||t===!1}qt.boolean=mq;function fb(t){return typeof t=="string"||t instanceof String}qt.string=fb;function gq(t){return typeof t=="number"||t instanceof Number}qt.number=gq;function _q(t){return t instanceof Error}qt.error=_q;function yq(t){return typeof t=="function"}qt.func=yq;function db(t){return Array.isArray(t)}qt.array=db;function Tq(t){return db(t)&&t.every(e=>fb(e))}qt.stringArray=Tq;function bq(t,e){return Array.isArray(t)&&t.every(e)}qt.typedArray=bq;function Iq(t){return t!==null&&typeof t=="object"}qt.objectLiteral=Iq});var hb=A(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.ImplementationRequest=void 0;var vq=ii(),Nq;(function(t){t.method="textDocument/implementation",t.type=new vq.ProtocolRequestType(t.method)})(Nq=_u.ImplementationRequest||(_u.ImplementationRequest={}))});var mb=A(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.TypeDefinitionRequest=void 0;var Sq=ii(),Pq;(function(t){t.method="textDocument/typeDefinition",t.type=new Sq.ProtocolRequestType(t.method)})(Pq=yu.TypeDefinitionRequest||(yu.TypeDefinitionRequest={}))});var _b=A(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.DidChangeWorkspaceFoldersNotification=Ss.WorkspaceFoldersRequest=void 0;var gb=ii(),Aq;(function(t){t.type=new gb.ProtocolRequestType0("workspace/workspaceFolders")})(Aq=Ss.WorkspaceFoldersRequest||(Ss.WorkspaceFoldersRequest={}));var Eq;(function(t){t.type=new gb.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(Eq=Ss.DidChangeWorkspaceFoldersNotification||(Ss.DidChangeWorkspaceFoldersNotification={}))});var yb=A(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ConfigurationRequest=void 0;var Cq=ii(),Rq;(function(t){t.type=new Cq.ProtocolRequestType("workspace/configuration")})(Rq=Tu.ConfigurationRequest||(Tu.ConfigurationRequest={}))});var bb=A(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.ColorPresentationRequest=Ps.DocumentColorRequest=void 0;var Tb=ii(),xq;(function(t){t.method="textDocument/documentColor",t.type=new Tb.ProtocolRequestType(t.method)})(xq=Ps.DocumentColorRequest||(Ps.DocumentColorRequest={}));var wq;(function(t){t.type=new Tb.ProtocolRequestType("textDocument/colorPresentation")})(wq=Ps.ColorPresentationRequest||(Ps.ColorPresentationRequest={}))});var ag=A(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.FoldingRangeRequest=As.FoldingRangeKind=void 0;var kq=ii(),Dq;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Dq=As.FoldingRangeKind||(As.FoldingRangeKind={}));var Fq;(function(t){t.method="textDocument/foldingRange",t.type=new kq.ProtocolRequestType(t.method)})(Fq=As.FoldingRangeRequest||(As.FoldingRangeRequest={}))});var Ib=A(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.DeclarationRequest=void 0;var Lq=ii(),Oq;(function(t){t.method="textDocument/declaration",t.type=new Lq.ProtocolRequestType(t.method)})(Oq=bu.DeclarationRequest||(bu.DeclarationRequest={}))});var vb=A(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.SelectionRangeRequest=void 0;var Mq=ii(),qq;(function(t){t.method="textDocument/selectionRange",t.type=new Mq.ProtocolRequestType(t.method)})(qq=Iu.SelectionRangeRequest||(Iu.SelectionRangeRequest={}))});var Sb=A(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.WorkDoneProgressCancelNotification=tn.WorkDoneProgressCreateRequest=tn.WorkDoneProgress=void 0;var Bq=Ba(),Nb=ii(),Vq;(function(t){t.type=new Bq.ProgressType;function e(i){return i===t.type}t.is=e})(Vq=tn.WorkDoneProgress||(tn.WorkDoneProgress={}));var Uq;(function(t){t.type=new Nb.ProtocolRequestType("window/workDoneProgress/create")})(Uq=tn.WorkDoneProgressCreateRequest||(tn.WorkDoneProgressCreateRequest={}));var jq;(function(t){t.type=new Nb.ProtocolNotificationType("window/workDoneProgress/cancel")})(jq=tn.WorkDoneProgressCancelNotification||(tn.WorkDoneProgressCancelNotification={}))});var Pb=A(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.CallHierarchyOutgoingCallsRequest=rn.CallHierarchyIncomingCallsRequest=rn.CallHierarchyPrepareRequest=void 0;var lg=ii(),Gq;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new lg.ProtocolRequestType(t.method)})(Gq=rn.CallHierarchyPrepareRequest||(rn.CallHierarchyPrepareRequest={}));var Hq;(function(t){t.method="callHierarchy/incomingCalls",t.type=new lg.ProtocolRequestType(t.method)})(Hq=rn.CallHierarchyIncomingCallsRequest||(rn.CallHierarchyIncomingCallsRequest={}));var Wq;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new lg.ProtocolRequestType(t.method)})(Wq=rn.CallHierarchyOutgoingCallsRequest||(rn.CallHierarchyOutgoingCallsRequest={}))});var Ab=A(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.SemanticTokensRefreshRequest=Ze.SemanticTokensRangeRequest=Ze.SemanticTokensDeltaRequest=Ze.SemanticTokensRequest=Ze.SemanticTokensRegistrationType=Ze.TokenFormat=Ze.SemanticTokens=Ze.SemanticTokenModifiers=Ze.SemanticTokenTypes=void 0;var vu=ii(),Yq;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Yq=Ze.SemanticTokenTypes||(Ze.SemanticTokenTypes={}));var Kq;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Kq=Ze.SemanticTokenModifiers||(Ze.SemanticTokenModifiers={}));var $q;(function(t){function e(i){let r=i;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})($q=Ze.SemanticTokens||(Ze.SemanticTokens={}));var zq;(function(t){t.Relative="relative"})(zq=Ze.TokenFormat||(Ze.TokenFormat={}));var Qq;(function(t){t.method="textDocument/semanticTokens",t.type=new vu.RegistrationType(t.method)})(Qq=Ze.SemanticTokensRegistrationType||(Ze.SemanticTokensRegistrationType={}));var Xq;(function(t){t.method="textDocument/semanticTokens/full",t.type=new vu.ProtocolRequestType(t.method)})(Xq=Ze.SemanticTokensRequest||(Ze.SemanticTokensRequest={}));var Jq;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new vu.ProtocolRequestType(t.method)})(Jq=Ze.SemanticTokensDeltaRequest||(Ze.SemanticTokensDeltaRequest={}));var Zq;(function(t){t.method="textDocument/semanticTokens/range",t.type=new vu.ProtocolRequestType(t.method)})(Zq=Ze.SemanticTokensRangeRequest||(Ze.SemanticTokensRangeRequest={}));var eB;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new vu.ProtocolRequestType0(t.method)})(eB=Ze.SemanticTokensRefreshRequest||(Ze.SemanticTokensRefreshRequest={}))});var Eb=A(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ShowDocumentRequest=void 0;var tB=ii(),iB;(function(t){t.method="window/showDocument",t.type=new tB.ProtocolRequestType(t.method)})(iB=Nu.ShowDocumentRequest||(Nu.ShowDocumentRequest={}))});var Cb=A(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.LinkedEditingRangeRequest=void 0;var rB=ii(),nB;(function(t){t.method="textDocument/linkedEditingRange",t.type=new rB.ProtocolRequestType(t.method)})(nB=Su.LinkedEditingRangeRequest||(Su.LinkedEditingRangeRequest={}))});var Rb=A(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.WillDeleteFilesRequest=It.DidDeleteFilesNotification=It.DidRenameFilesNotification=It.WillRenameFilesRequest=It.DidCreateFilesNotification=It.WillCreateFilesRequest=It.FileOperationPatternKind=void 0;var Ua=ii(),sB;(function(t){t.file="file",t.folder="folder"})(sB=It.FileOperationPatternKind||(It.FileOperationPatternKind={}));var oB;(function(t){t.method="workspace/willCreateFiles",t.type=new Ua.ProtocolRequestType(t.method)})(oB=It.WillCreateFilesRequest||(It.WillCreateFilesRequest={}));var aB;(function(t){t.method="workspace/didCreateFiles",t.type=new Ua.ProtocolNotificationType(t.method)})(aB=It.DidCreateFilesNotification||(It.DidCreateFilesNotification={}));var lB;(function(t){t.method="workspace/willRenameFiles",t.type=new Ua.ProtocolRequestType(t.method)})(lB=It.WillRenameFilesRequest||(It.WillRenameFilesRequest={}));var uB;(function(t){t.method="workspace/didRenameFiles",t.type=new Ua.ProtocolNotificationType(t.method)})(uB=It.DidRenameFilesNotification||(It.DidRenameFilesNotification={}));var cB;(function(t){t.method="workspace/didDeleteFiles",t.type=new Ua.ProtocolNotificationType(t.method)})(cB=It.DidDeleteFilesNotification||(It.DidDeleteFilesNotification={}));var fB;(function(t){t.method="workspace/willDeleteFiles",t.type=new Ua.ProtocolRequestType(t.method)})(fB=It.WillDeleteFilesRequest||(It.WillDeleteFilesRequest={}))});var xb=A(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.MonikerRequest=nn.MonikerKind=nn.UniquenessLevel=void 0;var dB=ii(),pB;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(pB=nn.UniquenessLevel||(nn.UniquenessLevel={}));var hB;(function(t){t.import="import",t.export="export",t.local="local"})(hB=nn.MonikerKind||(nn.MonikerKind={}));var mB;(function(t){t.method="textDocument/moniker",t.type=new dB.ProtocolRequestType(t.method)})(mB=nn.MonikerRequest||(nn.MonikerRequest={}))});var Lb=A(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.DocumentLinkRequest=S.CodeLensRefreshRequest=S.CodeLensResolveRequest=S.CodeLensRequest=S.WorkspaceSymbolRequest=S.CodeActionResolveRequest=S.CodeActionRequest=S.DocumentSymbolRequest=S.DocumentHighlightRequest=S.ReferencesRequest=S.DefinitionRequest=S.SignatureHelpRequest=S.SignatureHelpTriggerKind=S.HoverRequest=S.CompletionResolveRequest=S.CompletionRequest=S.CompletionTriggerKind=S.PublishDiagnosticsNotification=S.WatchKind=S.FileChangeType=S.DidChangeWatchedFilesNotification=S.WillSaveTextDocumentWaitUntilRequest=S.WillSaveTextDocumentNotification=S.TextDocumentSaveReason=S.DidSaveTextDocumentNotification=S.DidCloseTextDocumentNotification=S.DidChangeTextDocumentNotification=S.TextDocumentContentChangeEvent=S.DidOpenTextDocumentNotification=S.TextDocumentSyncKind=S.TelemetryEventNotification=S.LogMessageNotification=S.ShowMessageRequest=S.ShowMessageNotification=S.MessageType=S.DidChangeConfigurationNotification=S.ExitNotification=S.ShutdownRequest=S.InitializedNotification=S.InitializeError=S.InitializeRequest=S.WorkDoneProgressOptions=S.TextDocumentRegistrationOptions=S.StaticRegistrationOptions=S.FailureHandlingKind=S.ResourceOperationKind=S.UnregistrationRequest=S.RegistrationRequest=S.DocumentSelector=S.DocumentFilter=void 0;S.MonikerRequest=S.MonikerKind=S.UniquenessLevel=S.WillDeleteFilesRequest=S.DidDeleteFilesNotification=S.WillRenameFilesRequest=S.DidRenameFilesNotification=S.WillCreateFilesRequest=S.DidCreateFilesNotification=S.FileOperationPatternKind=S.LinkedEditingRangeRequest=S.ShowDocumentRequest=S.SemanticTokensRegistrationType=S.SemanticTokensRefreshRequest=S.SemanticTokensRangeRequest=S.SemanticTokensDeltaRequest=S.SemanticTokensRequest=S.TokenFormat=S.SemanticTokens=S.SemanticTokenModifiers=S.SemanticTokenTypes=S.CallHierarchyPrepareRequest=S.CallHierarchyOutgoingCallsRequest=S.CallHierarchyIncomingCallsRequest=S.WorkDoneProgressCancelNotification=S.WorkDoneProgressCreateRequest=S.WorkDoneProgress=S.SelectionRangeRequest=S.DeclarationRequest=S.FoldingRangeRequest=S.ColorPresentationRequest=S.DocumentColorRequest=S.ConfigurationRequest=S.DidChangeWorkspaceFoldersNotification=S.WorkspaceFoldersRequest=S.TypeDefinitionRequest=S.ImplementationRequest=S.ApplyWorkspaceEditRequest=S.ExecuteCommandRequest=S.PrepareRenameRequest=S.RenameRequest=S.PrepareSupportDefaultBehavior=S.DocumentOnTypeFormattingRequest=S.DocumentRangeFormattingRequest=S.DocumentFormattingRequest=S.DocumentLinkResolveRequest=void 0;var Es=pb(),Pe=ii(),gB=hb();Object.defineProperty(S,"ImplementationRequest",{enumerable:!0,get:function(){return gB.ImplementationRequest}});var _B=mb();Object.defineProperty(S,"TypeDefinitionRequest",{enumerable:!0,get:function(){return _B.TypeDefinitionRequest}});var wb=_b();Object.defineProperty(S,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return wb.WorkspaceFoldersRequest}});Object.defineProperty(S,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return wb.DidChangeWorkspaceFoldersNotification}});var yB=yb();Object.defineProperty(S,"ConfigurationRequest",{enumerable:!0,get:function(){return yB.ConfigurationRequest}});var kb=bb();Object.defineProperty(S,"DocumentColorRequest",{enumerable:!0,get:function(){return kb.DocumentColorRequest}});Object.defineProperty(S,"ColorPresentationRequest",{enumerable:!0,get:function(){return kb.ColorPresentationRequest}});var TB=ag();Object.defineProperty(S,"FoldingRangeRequest",{enumerable:!0,get:function(){return TB.FoldingRangeRequest}});var bB=Ib();Object.defineProperty(S,"DeclarationRequest",{enumerable:!0,get:function(){return bB.DeclarationRequest}});var IB=vb();Object.defineProperty(S,"SelectionRangeRequest",{enumerable:!0,get:function(){return IB.SelectionRangeRequest}});var ug=Sb();Object.defineProperty(S,"WorkDoneProgress",{enumerable:!0,get:function(){return ug.WorkDoneProgress}});Object.defineProperty(S,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ug.WorkDoneProgressCreateRequest}});Object.defineProperty(S,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ug.WorkDoneProgressCancelNotification}});var cg=Pb();Object.defineProperty(S,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return cg.CallHierarchyIncomingCallsRequest}});Object.defineProperty(S,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return cg.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(S,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return cg.CallHierarchyPrepareRequest}});var Xn=Ab();Object.defineProperty(S,"SemanticTokenTypes",{enumerable:!0,get:function(){return Xn.SemanticTokenTypes}});Object.defineProperty(S,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Xn.SemanticTokenModifiers}});Object.defineProperty(S,"SemanticTokens",{enumerable:!0,get:function(){return Xn.SemanticTokens}});Object.defineProperty(S,"TokenFormat",{enumerable:!0,get:function(){return Xn.TokenFormat}});Object.defineProperty(S,"SemanticTokensRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRequest}});Object.defineProperty(S,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensDeltaRequest}});Object.defineProperty(S,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRangeRequest}});Object.defineProperty(S,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRefreshRequest}});Object.defineProperty(S,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Xn.SemanticTokensRegistrationType}});var vB=Eb();Object.defineProperty(S,"ShowDocumentRequest",{enumerable:!0,get:function(){return vB.ShowDocumentRequest}});var NB=Cb();Object.defineProperty(S,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return NB.LinkedEditingRangeRequest}});var ko=Rb();Object.defineProperty(S,"FileOperationPatternKind",{enumerable:!0,get:function(){return ko.FileOperationPatternKind}});Object.defineProperty(S,"DidCreateFilesNotification",{enumerable:!0,get:function(){return ko.DidCreateFilesNotification}});Object.defineProperty(S,"WillCreateFilesRequest",{enumerable:!0,get:function(){return ko.WillCreateFilesRequest}});Object.defineProperty(S,"DidRenameFilesNotification",{enumerable:!0,get:function(){return ko.DidRenameFilesNotification}});Object.defineProperty(S,"WillRenameFilesRequest",{enumerable:!0,get:function(){return ko.WillRenameFilesRequest}});Object.defineProperty(S,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return ko.DidDeleteFilesNotification}});Object.defineProperty(S,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return ko.WillDeleteFilesRequest}});var fg=xb();Object.defineProperty(S,"UniquenessLevel",{enumerable:!0,get:function(){return fg.UniquenessLevel}});Object.defineProperty(S,"MonikerKind",{enumerable:!0,get:function(){return fg.MonikerKind}});Object.defineProperty(S,"MonikerRequest",{enumerable:!0,get:function(){return fg.MonikerRequest}});var Db;(function(t){function e(i){let r=i;return Es.string(r.language)||Es.string(r.scheme)||Es.string(r.pattern)}t.is=e})(Db=S.DocumentFilter||(S.DocumentFilter={}));var Fb;(function(t){function e(i){if(!Array.isArray(i))return!1;for(let r of i)if(!Es.string(r)&&!Db.is(r))return!1;return!0}t.is=e})(Fb=S.DocumentSelector||(S.DocumentSelector={}));var SB;(function(t){t.type=new Pe.ProtocolRequestType("client/registerCapability")})(SB=S.RegistrationRequest||(S.RegistrationRequest={}));var PB;(function(t){t.type=new Pe.ProtocolRequestType("client/unregisterCapability")})(PB=S.UnregistrationRequest||(S.UnregistrationRequest={}));var AB;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(AB=S.ResourceOperationKind||(S.ResourceOperationKind={}));var EB;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(EB=S.FailureHandlingKind||(S.FailureHandlingKind={}));var CB;(function(t){function e(i){let r=i;return r&&Es.string(r.id)&&r.id.length>0}t.hasId=e})(CB=S.StaticRegistrationOptions||(S.StaticRegistrationOptions={}));var RB;(function(t){function e(i){let r=i;return r&&(r.documentSelector===null||Fb.is(r.documentSelector))}t.is=e})(RB=S.TextDocumentRegistrationOptions||(S.TextDocumentRegistrationOptions={}));var xB;(function(t){function e(r){let n=r;return Es.objectLiteral(n)&&(n.workDoneProgress===void 0||Es.boolean(n.workDoneProgress))}t.is=e;function i(r){let n=r;return n&&Es.boolean(n.workDoneProgress)}t.hasWorkDoneProgress=i})(xB=S.WorkDoneProgressOptions||(S.WorkDoneProgressOptions={}));var wB;(function(t){t.type=new Pe.ProtocolRequestType("initialize")})(wB=S.InitializeRequest||(S.InitializeRequest={}));var kB;(function(t){t.unknownProtocolVersion=1})(kB=S.InitializeError||(S.InitializeError={}));var DB;(function(t){t.type=new Pe.ProtocolNotificationType("initialized")})(DB=S.InitializedNotification||(S.InitializedNotification={}));var FB;(function(t){t.type=new Pe.ProtocolRequestType0("shutdown")})(FB=S.ShutdownRequest||(S.ShutdownRequest={}));var LB;(function(t){t.type=new Pe.ProtocolNotificationType0("exit")})(LB=S.ExitNotification||(S.ExitNotification={}));var OB;(function(t){t.type=new Pe.ProtocolNotificationType("workspace/didChangeConfiguration")})(OB=S.DidChangeConfigurationNotification||(S.DidChangeConfigurationNotification={}));var MB;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(MB=S.MessageType||(S.MessageType={}));var qB;(function(t){t.type=new Pe.ProtocolNotificationType("window/showMessage")})(qB=S.ShowMessageNotification||(S.ShowMessageNotification={}));var BB;(function(t){t.type=new Pe.ProtocolRequestType("window/showMessageRequest")})(BB=S.ShowMessageRequest||(S.ShowMessageRequest={}));var VB;(function(t){t.type=new Pe.ProtocolNotificationType("window/logMessage")})(VB=S.LogMessageNotification||(S.LogMessageNotification={}));var UB;(function(t){t.type=new Pe.ProtocolNotificationType("telemetry/event")})(UB=S.TelemetryEventNotification||(S.TelemetryEventNotification={}));var jB;(function(t){t.None=0,t.Full=1,t.Incremental=2})(jB=S.TextDocumentSyncKind||(S.TextDocumentSyncKind={}));var GB;(function(t){t.method="textDocument/didOpen",t.type=new Pe.ProtocolNotificationType(t.method)})(GB=S.DidOpenTextDocumentNotification||(S.DidOpenTextDocumentNotification={}));var HB;(function(t){function e(r){let n=r;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}t.isIncremental=e;function i(r){let n=r;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}t.isFull=i})(HB=S.TextDocumentContentChangeEvent||(S.TextDocumentContentChangeEvent={}));var WB;(function(t){t.method="textDocument/didChange",t.type=new Pe.ProtocolNotificationType(t.method)})(WB=S.DidChangeTextDocumentNotification||(S.DidChangeTextDocumentNotification={}));var YB;(function(t){t.method="textDocument/didClose",t.type=new Pe.ProtocolNotificationType(t.method)})(YB=S.DidCloseTextDocumentNotification||(S.DidCloseTextDocumentNotification={}));var KB;(function(t){t.method="textDocument/didSave",t.type=new Pe.ProtocolNotificationType(t.method)})(KB=S.DidSaveTextDocumentNotification||(S.DidSaveTextDocumentNotification={}));var $B;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})($B=S.TextDocumentSaveReason||(S.TextDocumentSaveReason={}));var zB;(function(t){t.method="textDocument/willSave",t.type=new Pe.ProtocolNotificationType(t.method)})(zB=S.WillSaveTextDocumentNotification||(S.WillSaveTextDocumentNotification={}));var QB;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new Pe.ProtocolRequestType(t.method)})(QB=S.WillSaveTextDocumentWaitUntilRequest||(S.WillSaveTextDocumentWaitUntilRequest={}));var XB;(function(t){t.type=new Pe.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(XB=S.DidChangeWatchedFilesNotification||(S.DidChangeWatchedFilesNotification={}));var JB;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(JB=S.FileChangeType||(S.FileChangeType={}));var ZB;(function(t){t.Create=1,t.Change=2,t.Delete=4})(ZB=S.WatchKind||(S.WatchKind={}));var eV;(function(t){t.type=new Pe.ProtocolNotificationType("textDocument/publishDiagnostics")})(eV=S.PublishDiagnosticsNotification||(S.PublishDiagnosticsNotification={}));var tV;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(tV=S.CompletionTriggerKind||(S.CompletionTriggerKind={}));var iV;(function(t){t.method="textDocument/completion",t.type=new Pe.ProtocolRequestType(t.method)})(iV=S.CompletionRequest||(S.CompletionRequest={}));var rV;(function(t){t.method="completionItem/resolve",t.type=new Pe.ProtocolRequestType(t.method)})(rV=S.CompletionResolveRequest||(S.CompletionResolveRequest={}));var nV;(function(t){t.method="textDocument/hover",t.type=new Pe.ProtocolRequestType(t.method)})(nV=S.HoverRequest||(S.HoverRequest={}));var sV;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(sV=S.SignatureHelpTriggerKind||(S.SignatureHelpTriggerKind={}));var oV;(function(t){t.method="textDocument/signatureHelp",t.type=new Pe.ProtocolRequestType(t.method)})(oV=S.SignatureHelpRequest||(S.SignatureHelpRequest={}));var aV;(function(t){t.method="textDocument/definition",t.type=new Pe.ProtocolRequestType(t.method)})(aV=S.DefinitionRequest||(S.DefinitionRequest={}));var lV;(function(t){t.method="textDocument/references",t.type=new Pe.ProtocolRequestType(t.method)})(lV=S.ReferencesRequest||(S.ReferencesRequest={}));var uV;(function(t){t.method="textDocument/documentHighlight",t.type=new Pe.ProtocolRequestType(t.method)})(uV=S.DocumentHighlightRequest||(S.DocumentHighlightRequest={}));var cV;(function(t){t.method="textDocument/documentSymbol",t.type=new Pe.ProtocolRequestType(t.method)})(cV=S.DocumentSymbolRequest||(S.DocumentSymbolRequest={}));var fV;(function(t){t.method="textDocument/codeAction",t.type=new Pe.ProtocolRequestType(t.method)})(fV=S.CodeActionRequest||(S.CodeActionRequest={}));var dV;(function(t){t.method="codeAction/resolve",t.type=new Pe.ProtocolRequestType(t.method)})(dV=S.CodeActionResolveRequest||(S.CodeActionResolveRequest={}));var pV;(function(t){t.method="workspace/symbol",t.type=new Pe.ProtocolRequestType(t.method)})(pV=S.WorkspaceSymbolRequest||(S.WorkspaceSymbolRequest={}));var hV;(function(t){t.method="textDocument/codeLens",t.type=new Pe.ProtocolRequestType(t.method)})(hV=S.CodeLensRequest||(S.CodeLensRequest={}));var mV;(function(t){t.method="codeLens/resolve",t.type=new Pe.ProtocolRequestType(t.method)})(mV=S.CodeLensResolveRequest||(S.CodeLensResolveRequest={}));var gV;(function(t){t.method="workspace/codeLens/refresh",t.type=new Pe.ProtocolRequestType0(t.method)})(gV=S.CodeLensRefreshRequest||(S.CodeLensRefreshRequest={}));var _V;(function(t){t.method="textDocument/documentLink",t.type=new Pe.ProtocolRequestType(t.method)})(_V=S.DocumentLinkRequest||(S.DocumentLinkRequest={}));var yV;(function(t){t.method="documentLink/resolve",t.type=new Pe.ProtocolRequestType(t.method)})(yV=S.DocumentLinkResolveRequest||(S.DocumentLinkResolveRequest={}));var TV;(function(t){t.method="textDocument/formatting",t.type=new Pe.ProtocolRequestType(t.method)})(TV=S.DocumentFormattingRequest||(S.DocumentFormattingRequest={}));var bV;(function(t){t.method="textDocument/rangeFormatting",t.type=new Pe.ProtocolRequestType(t.method)})(bV=S.DocumentRangeFormattingRequest||(S.DocumentRangeFormattingRequest={}));var IV;(function(t){t.method="textDocument/onTypeFormatting",t.type=new Pe.ProtocolRequestType(t.method)})(IV=S.DocumentOnTypeFormattingRequest||(S.DocumentOnTypeFormattingRequest={}));var vV;(function(t){t.Identifier=1})(vV=S.PrepareSupportDefaultBehavior||(S.PrepareSupportDefaultBehavior={}));var NV;(function(t){t.method="textDocument/rename",t.type=new Pe.ProtocolRequestType(t.method)})(NV=S.RenameRequest||(S.RenameRequest={}));var SV;(function(t){t.method="textDocument/prepareRename",t.type=new Pe.ProtocolRequestType(t.method)})(SV=S.PrepareRenameRequest||(S.PrepareRenameRequest={}));var PV;(function(t){t.type=new Pe.ProtocolRequestType("workspace/executeCommand")})(PV=S.ExecuteCommandRequest||(S.ExecuteCommandRequest={}));var AV;(function(t){t.type=new Pe.ProtocolRequestType("workspace/applyEdit")})(AV=S.ApplyWorkspaceEditRequest||(S.ApplyWorkspaceEditRequest={}))});var Mb=A(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.createProtocolConnection=void 0;var Ob=Ba();function EV(t,e,i,r){return Ob.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ob.createMessageConnection(t,e,i,r)}Df.createProtocolConnection=EV});var qb=A(xi=>{"use strict";var CV=xi&&xi.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Ff=xi&&xi.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&CV(e,t,i)};Object.defineProperty(xi,"__esModule",{value:!0});xi.LSPErrorCodes=xi.createProtocolConnection=void 0;Ff(Ba(),xi);Ff(ot(),xi);Ff(ii(),xi);Ff(Lb(),xi);var RV=Mb();Object.defineProperty(xi,"createProtocolConnection",{enumerable:!0,get:function(){return RV.createProtocolConnection}});var xV;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(xV=xi.LSPErrorCodes||(xi.LSPErrorCodes={}))});var _i=A(Nn=>{"use strict";var wV=Nn&&Nn.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Bb=Nn&&Nn.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&wV(e,t,i)};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.createProtocolConnection=void 0;var kV=tg();Bb(tg(),Nn);Bb(qb(),Nn);function DV(t,e,i,r){return kV.createMessageConnection(t,e,i,r)}Nn.createProtocolConnection=DV});var dg=A(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.generateUuid=Ar.parse=Ar.isUUID=Ar.v4=Ar.empty=void 0;var Pu=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Re=class extends Pu{constructor(){super([Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),"-",Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),"-","4",Re._randomHex(),Re._randomHex(),Re._randomHex(),"-",Re._oneOf(Re._timeHighBits),Re._randomHex(),Re._randomHex(),Re._randomHex(),"-",Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex(),Re._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Re._oneOf(Re._chars)}};Re._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Re._timeHighBits=["8","9","a","b"];Ar.empty=new Pu("00000000-0000-0000-0000-000000000000");function Vb(){return new Re}Ar.v4=Vb;var FV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ub(t){return FV.test(t)}Ar.isUUID=Ub;function LV(t){if(!Ub(t))throw new Error("invalid uuid");return new Pu(t)}Ar.parse=LV;function OV(){return Vb().asHex()}Ar.generateUuid=OV});var jb=A(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.attachPartialResult=Rs.ProgressFeature=Rs.attachWorkDone=void 0;var Cs=_i(),MV=dg(),Sn=class{constructor(e,i){this._connection=e,this._token=i,Sn.Instances.set(this._token,this)}begin(e,i,r,n){let s={kind:"begin",title:e,percentage:i,message:r,cancellable:n};this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,s)}report(e,i){let r={kind:"report"};typeof e=="number"?(r.percentage=e,i!==void 0&&(r.message=i)):r.message=e,this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,r)}done(){Sn.Instances.delete(this._token),this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,{kind:"end"})}};Sn.Instances=new Map;var Lf=class extends Sn{constructor(e,i){super(e,i),this._source=new Cs.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Au=class{constructor(){}begin(){}report(){}done(){}},Of=class extends Au{constructor(){super(),this._source=new Cs.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function qV(t,e){if(e===void 0||e.workDoneToken===void 0)return new Au;let i=e.workDoneToken;return delete e.workDoneToken,new Sn(t,i)}Rs.attachWorkDone=qV;var BV=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){var i;((i=e?.window)===null||i===void 0?void 0:i.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(Cs.WorkDoneProgressCancelNotification.type,r=>{let n=Sn.Instances.get(r.token);(n instanceof Lf||n instanceof Of)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Au:new Sn(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=MV.generateUuid();return this.connection.sendRequest(Cs.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Lf(this.connection,e))}else return Promise.resolve(new Of)}};Rs.ProgressFeature=BV;var pg;(function(t){t.type=new Cs.ProgressType})(pg||(pg={}));var hg=class{constructor(e,i){this._connection=e,this._token=i}report(e){this._connection.sendProgress(pg.type,this._token,e)}};function VV(t,e){if(e===void 0||e.partialResultToken===void 0)return;let i=e.partialResultToken;return delete e.partialResultToken,new hg(t,i)}Rs.attachPartialResult=VV});var Gb=A(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.ConfigurationFeature=void 0;var UV=_i(),jV=Tf(),GV=t=>class extends t{getConfiguration(e){return e?jV.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let i={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(UV.ConfigurationRequest.type,i).then(r=>Array.isArray(e)?r:r[0])}};Mf.ConfigurationFeature=GV});var Hb=A(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.WorkspaceFoldersFeature=void 0;var qf=_i(),HV=t=>class extends t{initialize(e){let i=e.workspace;i&&i.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new qf.Emitter,this.connection.onNotification(qf.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(qf.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(qf.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Bf.WorkspaceFoldersFeature=HV});var Wb=A(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.CallHierarchyFeature=void 0;var mg=_i(),WV=t=>class extends t{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(mg.CallHierarchyPrepareRequest.type,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),void 0))},onIncomingCalls:e=>{let i=mg.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))},onOutgoingCalls:e=>{let i=mg.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))}}}};Vf.CallHierarchyFeature=WV});var yg=A(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.SemanticTokensBuilder=ja.SemanticTokensFeature=void 0;var gg=_i(),YV=t=>class extends t{get semanticTokens(){return{on:e=>{let i=gg.SemanticTokensRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))},onDelta:e=>{let i=gg.SemanticTokensDeltaRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))},onRange:e=>{let i=gg.SemanticTokensRangeRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))}}}};ja.SemanticTokensFeature=YV;var _g=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,i,r,n,s){let o=e,a=i;this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=n,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=i}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){if(this._prevData!==void 0){let e=this._prevData.length,i=this._data.length,r=0;for(;r<i&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<i&&r<e){let n=0;for(;n<i&&n<e&&this._prevData[e-1-n]===this._data[i-1-n];)n++;let s=this._data.slice(r,i-n);return{resultId:this.id,edits:[{start:r,deleteCount:e-n-r,data:s}]}}else return r<i?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}else return this.build()}};ja.SemanticTokensBuilder=_g});var Yb=A(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.ShowDocumentFeature=void 0;var KV=_i(),$V=t=>class extends t{showDocument(e){return this.connection.sendRequest(KV.ShowDocumentRequest.type,e)}};Uf.ShowDocumentFeature=$V});var Kb=A(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.FileOperationsFeature=void 0;var Ga=_i(),zV=t=>class extends t{onDidCreateFiles(e){this.connection.onNotification(Ga.DidCreateFilesNotification.type,i=>{e(i)})}onDidRenameFiles(e){this.connection.onNotification(Ga.DidRenameFilesNotification.type,i=>{e(i)})}onDidDeleteFiles(e){this.connection.onNotification(Ga.DidDeleteFilesNotification.type,i=>{e(i)})}onWillCreateFiles(e){return this.connection.onRequest(Ga.WillCreateFilesRequest.type,(i,r)=>e(i,r))}onWillRenameFiles(e){return this.connection.onRequest(Ga.WillRenameFilesRequest.type,(i,r)=>e(i,r))}onWillDeleteFiles(e){return this.connection.onRequest(Ga.WillDeleteFilesRequest.type,(i,r)=>e(i,r))}};jf.FileOperationsFeature=zV});var $b=A(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.LinkedEditingRangeFeature=void 0;var QV=_i(),XV=t=>class extends t{onLinkedEditingRange(e){this.connection.onRequest(QV.LinkedEditingRangeRequest.type,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),void 0))}};Gf.LinkedEditingRangeFeature=XV});var zb=A(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.MonikerFeature=void 0;var JV=_i(),ZV=t=>class extends t{get moniker(){return{on:e=>{let i=JV.MonikerRequest.type;this.connection.onRequest(i,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(i,r)))}}}};Hf.MonikerFeature=ZV});var Pg=A(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.createConnection=je.combineFeatures=je.combineLanguagesFeatures=je.combineWorkspaceFeatures=je.combineWindowFeatures=je.combineClientFeatures=je.combineTracerFeatures=je.combineTelemetryFeatures=je.combineConsoleFeatures=je._LanguagesImpl=je.BulkUnregistration=je.BulkRegistration=je.ErrorMessageTracker=je.TextDocuments=void 0;var $=_i(),Er=Tf(),bg=dg(),Ae=jb(),eU=Gb(),tU=Hb(),iU=Wb(),rU=yg(),nU=Yb(),sU=Kb(),oU=$b(),aU=zb();function Tg(t){if(t!==null)return t}var Ig=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new $.Emitter,this._onDidOpen=new $.Emitter,this._onDidClose=new $.Emitter,this._onDidSave=new $.Emitter,this._onWillSave=new $.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=$.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(i=>{let r=i.textDocument,n=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._documents[r.uri]=n;let s=Object.freeze({document:n});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)}),e.onDidChangeTextDocument(i=>{let r=i.textDocument,n=i.contentChanges;if(n.length===0)return;let s=this._documents[r.uri],{version:o}=r;if(o==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);s=this._configuration.update(s,n,o),this._documents[r.uri]=s,this._onDidChangeContent.fire(Object.freeze({document:s}))}),e.onDidCloseTextDocument(i=>{let r=this._documents[i.textDocument.uri];r&&(delete this._documents[i.textDocument.uri],this._onDidClose.fire(Object.freeze({document:r})))}),e.onWillSaveTextDocument(i=>{let r=this._documents[i.textDocument.uri];r&&this._onWillSave.fire(Object.freeze({document:r,reason:i.reason}))}),e.onWillSaveTextDocumentWaitUntil((i,r)=>{let n=this._documents[i.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:i.reason}),r):[]}),e.onDidSaveTextDocument(i=>{let r=this._documents[i.textDocument.uri];r&&this._onDidSave.fire(Object.freeze({document:r}))})}};je.TextDocuments=Ig;var vg=class{constructor(){this._messages=Object.create(null)}add(e){let i=this._messages[e];i||(i=0),i++,this._messages[e]=i}sendErrors(e){Object.keys(this._messages).forEach(i=>{e.window.showErrorMessage(i)})}};je.ErrorMessageTracker=vg;var Wf=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($.MessageType.Error,e)}warn(e){this.send($.MessageType.Warning,e)}info(e){this.send($.MessageType.Info,e)}log(e){this.send($.MessageType.Log,e)}send(e,i){this._rawConnection&&this._rawConnection.sendNotification($.LogMessageNotification.type,{type:e,message:i})}},Ng=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...i){let r={type:$.MessageType.Error,message:e,actions:i};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(Tg)}showWarningMessage(e,...i){let r={type:$.MessageType.Warning,message:e,actions:i};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(Tg)}showInformationMessage(e,...i){let r={type:$.MessageType.Info,message:e,actions:i};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(Tg)}},Qb=nU.ShowDocumentFeature(Ae.ProgressFeature(Ng)),lU;(function(t){function e(){return new Yf}t.create=e})(lU=je.BulkRegistration||(je.BulkRegistration={}));var Yf=class{constructor(){this._registrations=[],this._registered=new Set}add(e,i){let r=Er.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let n=bg.generateUuid();this._registrations.push({id:n,method:r,registerOptions:i||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},uU;(function(t){function e(){return new Eu(void 0,[])}t.create=e})(uU=je.BulkUnregistration||(je.BulkUnregistration={}));var Eu=class{constructor(e,i){this._connection=e,this._unregistrations=new Map,i.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let i={unregisterations:e};this._connection.sendRequest($.UnregistrationRequest.type,i).then(void 0,r=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let i=Er.string(e)?e:e.method,r=this._unregistrations.get(i);if(!r)return!1;let n={unregisterations:[r]};return this._connection.sendRequest($.UnregistrationRequest.type,n).then(()=>{this._unregistrations.delete(i)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Kf=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,i,r){return e instanceof Yf?this.registerMany(e):e instanceof Eu?this.registerSingle1(e,i,r):this.registerSingle2(e,i)}registerSingle1(e,i,r){let n=Er.string(i)?i:i.method,s=bg.generateUuid(),o={registrations:[{id:s,method:n,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($.RegistrationRequest.type,o).then(a=>(e.add({id:s,method:n}),e),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}registerSingle2(e,i){let r=Er.string(e)?e:e.method,n=bg.generateUuid(),s={registrations:[{id:n,method:r,registerOptions:i||{}}]};return this.connection.sendRequest($.RegistrationRequest.type,s).then(o=>$.Disposable.create(()=>{this.unregisterSingle(n,r)}),o=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(o)))}unregisterSingle(e,i){let r={unregisterations:[{id:e,method:i}]};return this.connection.sendRequest($.UnregistrationRequest.type,r).then(void 0,n=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let i=e.asRegistrationParams();return this.connection.sendRequest($.RegistrationRequest.type,i).then(()=>new Eu(this._connection,i.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Sg=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function i(n){return n&&!!n.edit}let r=i(e)?e:{edit:e};return this.connection.sendRequest($.ApplyWorkspaceEditRequest.type,r)}},Xb=sU.FileOperationsFeature(tU.WorkspaceFoldersFeature(eU.ConfigurationFeature(Sg))),$f=class{constructor(){this._trace=$.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,i){this._trace!==$.Trace.Off&&this.connection.sendNotification($.LogTraceNotification.type,{message:e,verbose:this._trace===$.Trace.Verbose?i:void 0})}},zf=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($.TelemetryEventNotification.type,e)}},Qf=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return Ae.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,i){return Ae.attachPartialResult(this.connection,i)}};je._LanguagesImpl=Qf;var Jb=aU.MonikerFeature(oU.LinkedEditingRangeFeature(rU.SemanticTokensFeature(iU.CallHierarchyFeature(Qf))));function Zb(t,e){return function(i){return e(t(i))}}je.combineConsoleFeatures=Zb;function eI(t,e){return function(i){return e(t(i))}}je.combineTelemetryFeatures=eI;function tI(t,e){return function(i){return e(t(i))}}je.combineTracerFeatures=tI;function iI(t,e){return function(i){return e(t(i))}}je.combineClientFeatures=iI;function rI(t,e){return function(i){return e(t(i))}}je.combineWindowFeatures=rI;function nI(t,e){return function(i){return e(t(i))}}je.combineWorkspaceFeatures=nI;function cU(t,e){return function(i){return e(t(i))}}je.combineLanguagesFeatures=cU;function fU(t,e){function i(n,s,o){return n&&s?o(n,s):n||s}return{__brand:"features",console:i(t.console,e.console,Zb),tracer:i(t.tracer,e.tracer,tI),telemetry:i(t.telemetry,e.telemetry,eI),client:i(t.client,e.client,iI),window:i(t.window,e.window,rI),workspace:i(t.workspace,e.workspace,nI)}}je.combineFeatures=fU;function dU(t,e,i){let r=i&&i.console?new(i.console(Wf)):new Wf,n=t(r);r.rawAttach(n);let s=i&&i.tracer?new(i.tracer($f)):new $f,o=i&&i.telemetry?new(i.telemetry(zf)):new zf,a=i&&i.client?new(i.client(Kf)):new Kf,l=i&&i.window?new(i.window(Qb)):new Qb,u=i&&i.workspace?new(i.workspace(Xb)):new Xb,c=i&&i.languages?new(i.languages(Jb)):new Jb,f=[r,s,o,a,l,u,c];function d(b){return b instanceof Promise?b:Er.thenable(b)?new Promise((I,C)=>{b.then(q=>I(q),q=>C(q))}):Promise.resolve(b)}let h,p,y,v={listen:()=>n.listen(),sendRequest:(b,...I)=>n.sendRequest(Er.string(b)?b:b.method,...I),onRequest:(b,I)=>n.onRequest(b,I),sendNotification:(b,I)=>{let C=Er.string(b)?b:b.method;arguments.length===1?n.sendNotification(C):n.sendNotification(C,I)},onNotification:(b,I)=>n.onNotification(b,I),onProgress:n.onProgress,sendProgress:n.sendProgress,onInitialize:b=>p=b,onInitialized:b=>n.onNotification($.InitializedNotification.type,b),onShutdown:b=>h=b,onExit:b=>y=b,get console(){return r},get telemetry(){return o},get tracer(){return s},get client(){return a},get window(){return l},get workspace(){return u},get languages(){return c},onDidChangeConfiguration:b=>n.onNotification($.DidChangeConfigurationNotification.type,b),onDidChangeWatchedFiles:b=>n.onNotification($.DidChangeWatchedFilesNotification.type,b),__textDocumentSync:void 0,onDidOpenTextDocument:b=>n.onNotification($.DidOpenTextDocumentNotification.type,b),onDidChangeTextDocument:b=>n.onNotification($.DidChangeTextDocumentNotification.type,b),onDidCloseTextDocument:b=>n.onNotification($.DidCloseTextDocumentNotification.type,b),onWillSaveTextDocument:b=>n.onNotification($.WillSaveTextDocumentNotification.type,b),onWillSaveTextDocumentWaitUntil:b=>n.onRequest($.WillSaveTextDocumentWaitUntilRequest.type,b),onDidSaveTextDocument:b=>n.onNotification($.DidSaveTextDocumentNotification.type,b),sendDiagnostics:b=>n.sendNotification($.PublishDiagnosticsNotification.type,b),onHover:b=>n.onRequest($.HoverRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),onCompletion:b=>n.onRequest($.CompletionRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onCompletionResolve:b=>n.onRequest($.CompletionResolveRequest.type,b),onSignatureHelp:b=>n.onRequest($.SignatureHelpRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),onDeclaration:b=>n.onRequest($.DeclarationRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onDefinition:b=>n.onRequest($.DefinitionRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onTypeDefinition:b=>n.onRequest($.TypeDefinitionRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onImplementation:b=>n.onRequest($.ImplementationRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onReferences:b=>n.onRequest($.ReferencesRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onDocumentHighlight:b=>n.onRequest($.DocumentHighlightRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onDocumentSymbol:b=>n.onRequest($.DocumentSymbolRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onWorkspaceSymbol:b=>n.onRequest($.WorkspaceSymbolRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onCodeAction:b=>n.onRequest($.CodeActionRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onCodeActionResolve:b=>n.onRequest($.CodeActionResolveRequest.type,(I,C)=>b(I,C)),onCodeLens:b=>n.onRequest($.CodeLensRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onCodeLensResolve:b=>n.onRequest($.CodeLensResolveRequest.type,(I,C)=>b(I,C)),onDocumentFormatting:b=>n.onRequest($.DocumentFormattingRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),onDocumentRangeFormatting:b=>n.onRequest($.DocumentRangeFormattingRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),onDocumentOnTypeFormatting:b=>n.onRequest($.DocumentOnTypeFormattingRequest.type,(I,C)=>b(I,C)),onRenameRequest:b=>n.onRequest($.RenameRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),onPrepareRename:b=>n.onRequest($.PrepareRenameRequest.type,(I,C)=>b(I,C)),onDocumentLinks:b=>n.onRequest($.DocumentLinkRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onDocumentLinkResolve:b=>n.onRequest($.DocumentLinkResolveRequest.type,(I,C)=>b(I,C)),onDocumentColor:b=>n.onRequest($.DocumentColorRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onColorPresentation:b=>n.onRequest($.ColorPresentationRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onFoldingRanges:b=>n.onRequest($.FoldingRangeRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onSelectionRanges:b=>n.onRequest($.SelectionRangeRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),Ae.attachPartialResult(n,I))),onExecuteCommand:b=>n.onRequest($.ExecuteCommandRequest.type,(I,C)=>b(I,C,Ae.attachWorkDone(n,I),void 0)),dispose:()=>n.dispose()};for(let b of f)b.attach(v);return n.onRequest($.InitializeRequest.type,b=>{e.initialize(b),Er.string(b.trace)&&(s.trace=$.Trace.fromString(b.trace));for(let I of f)I.initialize(b.capabilities);if(p){let I=p(b,new $.CancellationTokenSource().token,Ae.attachWorkDone(n,b),void 0);return d(I).then(C=>{if(C instanceof $.ResponseError)return C;let q=C;q||(q={capabilities:{}});let K=q.capabilities;K||(K={},q.capabilities=K),K.textDocumentSync===void 0||K.textDocumentSync===null?K.textDocumentSync=Er.number(v.__textDocumentSync)?v.__textDocumentSync:$.TextDocumentSyncKind.None:!Er.number(K.textDocumentSync)&&!Er.number(K.textDocumentSync.change)&&(K.textDocumentSync.change=Er.number(v.__textDocumentSync)?v.__textDocumentSync:$.TextDocumentSyncKind.None);for(let J of f)J.fillServerCapabilities(K);return q})}else{let I={capabilities:{textDocumentSync:$.TextDocumentSyncKind.None}};for(let C of f)C.fillServerCapabilities(I.capabilities);return I}}),n.onRequest($.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,h)return h(new $.CancellationTokenSource().token)}),n.onNotification($.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),n.onNotification($.SetTraceNotification.type,b=>{s.trace=$.Trace.fromString(b.value)}),v}je.createConnection=dU});var oI=A(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.resolveModulePath=wi.FileSystem=wi.resolveGlobalYarnPath=wi.resolveGlobalNodePath=wi.resolve=wi.uriToFilePath=void 0;var pU=require("url"),sn=require("path"),Ag=require("fs"),Rg=require("child_process");function hU(t){let e=pU.parse(t);if(e.protocol!=="file:"||!e.path)return;let i=e.path.split("/");for(var r=0,n=i.length;r<n;r++)i[r]=decodeURIComponent(i[r]);if(process.platform==="win32"&&i.length>1){let s=i[0],o=i[1];s.length===0&&o.length>1&&o[1]===":"&&i.shift()}return sn.normalize(i.join("/"))}wi.uriToFilePath=hU;function Eg(){return process.platform==="win32"}function Xf(t,e,i,r){let n="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((o,a)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(c=>u[c]=l[c]),e&&Ag.existsSync(e)&&(u[n]?u[n]=e+sn.delimiter+u[n]:u[n]=e,r&&r(`NODE_PATH value is: ${u[n]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let c=Rg.fork("",[],{cwd:i,env:u,execArgv:["-e",s]});if(c.pid===void 0){a(new Error(`Starting process to resolve node module  ${t} failed`));return}c.on("error",d=>{a(d)}),c.on("message",d=>{d.c==="r"&&(c.send({c:"e"}),d.s?o(d.r):a(new Error(`Failed to resolve module: ${t}`)))});let f={c:"rs",a:t};c.send(f)}catch(c){a(c)}})}wi.resolve=Xf;function Cg(t){let e="npm",i=Object.create(null);Object.keys(process.env).forEach(s=>i[s]=process.env[s]),i.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:i};Eg()&&(e="npm.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let s=Rg.spawnSync(e,["config","get","prefix"],r).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let o=s.trim();return t&&t(`'npm config get prefix' value is: ${o}`),o.length>0?Eg()?sn.join(o,"node_modules"):sn.join(o,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",n)}}wi.resolveGlobalNodePath=Cg;function mU(t){let e="yarn",i={encoding:"utf8"};Eg()&&(e="yarn.cmd",i.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let n=Rg.spawnSync(e,["global","dir","--json"],i),s=n.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),n.stderr&&t(n.stderr));return}let o=s.trim().split(/\r?\n/);for(let a of o)try{let l=JSON.parse(a);if(l.type==="log")return sn.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}wi.resolveGlobalYarnPath=mU;var sI;(function(t){let e;function i(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Ag.existsSync(__filename.toUpperCase())||!Ag.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=i;function r(n,s){return i()?sn.normalize(s).indexOf(sn.normalize(n))===0:sn.normalize(s).toLowerCase().indexOf(sn.normalize(n).toLowerCase())===0}t.isParent=r})(sI=wi.FileSystem||(wi.FileSystem={}));function gU(t,e,i,r){return i?(sn.isAbsolute(i)||(i=sn.join(t,i)),Xf(e,i,i,r).then(n=>sI.isParent(i,n)?n:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,n=>Xf(e,Cg(r),t,r))):Xf(e,Cg(r),t,r)}wi.resolveModulePath=gU});var xg=A((Z8,aI)=>{"use strict";aI.exports=_i()});var uI=A(nr=>{"use strict";var _U=nr&&nr.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),lI=nr&&nr.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&_U(e,t,i)};Object.defineProperty(nr,"__esModule",{value:!0});nr.ProposedFeatures=nr.SemanticTokensBuilder=void 0;var yU=yg();Object.defineProperty(nr,"SemanticTokensBuilder",{enumerable:!0,get:function(){return yU.SemanticTokensBuilder}});lI(_i(),nr);lI(Pg(),nr);var TU;(function(t){t.all={__brand:"features"}})(TU=nr.ProposedFeatures||(nr.ProposedFeatures={}))});var $t=A(sr=>{"use strict";var bU=sr&&sr.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),fI=sr&&sr.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&bU(e,t,i)};Object.defineProperty(sr,"__esModule",{value:!0});sr.createConnection=sr.Files=void 0;var wg=Tf(),IU=Pg(),Cu=oI(),Do=xg();fI(xg(),sr);fI(uI(),sr);var vU;(function(t){t.uriToFilePath=Cu.uriToFilePath,t.resolveGlobalNodePath=Cu.resolveGlobalNodePath,t.resolveGlobalYarnPath=Cu.resolveGlobalYarnPath,t.resolve=Cu.resolve,t.resolveModulePath=Cu.resolveModulePath})(vU=sr.Files||(sr.Files={}));var cI;function Jf(){if(cI!==void 0)try{cI.end()}catch{}}var Ha=!1,dI;function NU(){let t="--clientProcessId";function e(i){try{let r=parseInt(i);isNaN(r)||(dI=setInterval(()=>{try{process.kill(r,0)}catch{Jf(),process.exit(Ha?0:1)}},3e3))}catch{}}for(let i=2;i<process.argv.length;i++){let r=process.argv[i];if(r===t&&i+1<process.argv.length){e(process.argv[i+1]);return}else{let n=r.split("=");n[0]===t&&e(n[1])}}}NU();var SU={initialize:t=>{let e=t.processId;wg.number(e)&&dI===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Ha?0:1)}},3e3)},get shutdownReceived(){return Ha},set shutdownReceived(t){Ha=t},exit:t=>{Jf(),process.exit(t)}};function PU(t,e,i,r){let n,s,o,a;return t!==void 0&&t.__brand==="features"&&(n=t,t=e,e=i,i=r),Do.ConnectionStrategy.is(t)||Do.ConnectionOptions.is(t)?a=t:(s=t,o=e,a=i),AU(s,o,a,n)}sr.createConnection=PU;function AU(t,e,i,r){if(!t&&!e&&process.argv.length>2){let a,l,u=process.argv.slice(2);for(let c=0;c<u.length;c++){let f=u[c];if(f==="--node-ipc"){t=new Do.IPCMessageReader(process),e=new Do.IPCMessageWriter(process);break}else if(f==="--stdio"){t=process.stdin,e=process.stdout;break}else if(f==="--socket"){a=parseInt(u[c+1]);break}else if(f==="--pipe"){l=u[c+1];break}else{var n=f.split("=");if(n[0]==="--socket"){a=parseInt(n[1]);break}else if(n[0]==="--pipe"){l=n[1];break}}}if(a){let c=Do.createServerSocketTransport(a);t=c[0],e=c[1]}else if(l){let c=Do.createServerPipeTransport(l);t=c[0],e=c[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+s);if(!e)throw new Error("Connection output stream is not set. "+s);if(wg.func(t.read)&&wg.func(t.on)){let a=t;a.on("end",()=>{Jf(),process.exit(Ha?0:1)}),a.on("close",()=>{Jf(),process.exit(Ha?0:1)})}let o=a=>Do.createProtocolConnection(t,e,a,i);return IU.createConnection(o,SU,r)}});var hI=A((i4,pI)=>{"use strict";pI.exports=$t()});var id=A(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var qI=function(){function t(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(e,i){return i===void 0&&(i=!1),this.onePassHasher.start().appendStr(e).end(i)},t.hashAsciiStr=function(e,i){return i===void 0&&(i=!1),this.onePassHasher.start().appendAsciiStr(e).end(i)},t._hex=function(e){var i=t.hexChars,r=t.hexOut,n,s,o,a;for(a=0;a<4;a+=1)for(s=a*8,n=e[a],o=0;o<8;o+=2)r[s+1+o]=i.charAt(n&15),n>>>=4,r[s+0+o]=i.charAt(n&15),n>>>=4;return r.join("")},t._md5cycle=function(e,i){var r=e[0],n=e[1],s=e[2],o=e[3];r+=(n&s|~n&o)+i[0]-680876936|0,r=(r<<7|r>>>25)+n|0,o+=(r&n|~r&s)+i[1]-389564586|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&n)+i[2]+606105819|0,s=(s<<17|s>>>15)+o|0,n+=(s&o|~s&r)+i[3]-1044525330|0,n=(n<<22|n>>>10)+s|0,r+=(n&s|~n&o)+i[4]-176418897|0,r=(r<<7|r>>>25)+n|0,o+=(r&n|~r&s)+i[5]+1200080426|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&n)+i[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,n+=(s&o|~s&r)+i[7]-45705983|0,n=(n<<22|n>>>10)+s|0,r+=(n&s|~n&o)+i[8]+1770035416|0,r=(r<<7|r>>>25)+n|0,o+=(r&n|~r&s)+i[9]-1958414417|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&n)+i[10]-42063|0,s=(s<<17|s>>>15)+o|0,n+=(s&o|~s&r)+i[11]-1990404162|0,n=(n<<22|n>>>10)+s|0,r+=(n&s|~n&o)+i[12]+1804603682|0,r=(r<<7|r>>>25)+n|0,o+=(r&n|~r&s)+i[13]-40341101|0,o=(o<<12|o>>>20)+r|0,s+=(o&r|~o&n)+i[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,n+=(s&o|~s&r)+i[15]+1236535329|0,n=(n<<22|n>>>10)+s|0,r+=(n&o|s&~o)+i[1]-165796510|0,r=(r<<5|r>>>27)+n|0,o+=(r&s|n&~s)+i[6]-1069501632|0,o=(o<<9|o>>>23)+r|0,s+=(o&n|r&~n)+i[11]+643717713|0,s=(s<<14|s>>>18)+o|0,n+=(s&r|o&~r)+i[0]-373897302|0,n=(n<<20|n>>>12)+s|0,r+=(n&o|s&~o)+i[5]-701558691|0,r=(r<<5|r>>>27)+n|0,o+=(r&s|n&~s)+i[10]+38016083|0,o=(o<<9|o>>>23)+r|0,s+=(o&n|r&~n)+i[15]-660478335|0,s=(s<<14|s>>>18)+o|0,n+=(s&r|o&~r)+i[4]-405537848|0,n=(n<<20|n>>>12)+s|0,r+=(n&o|s&~o)+i[9]+568446438|0,r=(r<<5|r>>>27)+n|0,o+=(r&s|n&~s)+i[14]-1019803690|0,o=(o<<9|o>>>23)+r|0,s+=(o&n|r&~n)+i[3]-187363961|0,s=(s<<14|s>>>18)+o|0,n+=(s&r|o&~r)+i[8]+1163531501|0,n=(n<<20|n>>>12)+s|0,r+=(n&o|s&~o)+i[13]-1444681467|0,r=(r<<5|r>>>27)+n|0,o+=(r&s|n&~s)+i[2]-51403784|0,o=(o<<9|o>>>23)+r|0,s+=(o&n|r&~n)+i[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,n+=(s&r|o&~r)+i[12]-1926607734|0,n=(n<<20|n>>>12)+s|0,r+=(n^s^o)+i[5]-378558|0,r=(r<<4|r>>>28)+n|0,o+=(r^n^s)+i[8]-2022574463|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^n)+i[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,n+=(s^o^r)+i[14]-35309556|0,n=(n<<23|n>>>9)+s|0,r+=(n^s^o)+i[1]-1530992060|0,r=(r<<4|r>>>28)+n|0,o+=(r^n^s)+i[4]+1272893353|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^n)+i[7]-155497632|0,s=(s<<16|s>>>16)+o|0,n+=(s^o^r)+i[10]-1094730640|0,n=(n<<23|n>>>9)+s|0,r+=(n^s^o)+i[13]+681279174|0,r=(r<<4|r>>>28)+n|0,o+=(r^n^s)+i[0]-358537222|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^n)+i[3]-722521979|0,s=(s<<16|s>>>16)+o|0,n+=(s^o^r)+i[6]+76029189|0,n=(n<<23|n>>>9)+s|0,r+=(n^s^o)+i[9]-640364487|0,r=(r<<4|r>>>28)+n|0,o+=(r^n^s)+i[12]-421815835|0,o=(o<<11|o>>>21)+r|0,s+=(o^r^n)+i[15]+530742520|0,s=(s<<16|s>>>16)+o|0,n+=(s^o^r)+i[2]-995338651|0,n=(n<<23|n>>>9)+s|0,r+=(s^(n|~o))+i[0]-198630844|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~s))+i[7]+1126891415|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~n))+i[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,n+=(o^(s|~r))+i[5]-57434055|0,n=(n<<21|n>>>11)+s|0,r+=(s^(n|~o))+i[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~s))+i[3]-1894986606|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~n))+i[10]-1051523|0,s=(s<<15|s>>>17)+o|0,n+=(o^(s|~r))+i[1]-2054922799|0,n=(n<<21|n>>>11)+s|0,r+=(s^(n|~o))+i[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~s))+i[15]-30611744|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~n))+i[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,n+=(o^(s|~r))+i[13]+1309151649|0,n=(n<<21|n>>>11)+s|0,r+=(s^(n|~o))+i[4]-145523070|0,r=(r<<6|r>>>26)+n|0,o+=(n^(r|~s))+i[11]-1120210379|0,o=(o<<10|o>>>22)+r|0,s+=(r^(o|~n))+i[2]+718787259|0,s=(s<<15|s>>>17)+o|0,n+=(o^(s|~r))+i[9]-343485551|0,n=(n<<21|n>>>11)+s|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=s+e[2]|0,e[3]=o+e[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(e){var i=this._buffer8,r=this._buffer32,n=this._bufferLength,s,o;for(o=0;o<e.length;o+=1){if(s=e.charCodeAt(o),s<128)i[n++]=s;else if(s<2048)i[n++]=(s>>>6)+192,i[n++]=s&63|128;else if(s<55296||s>56319)i[n++]=(s>>>12)+224,i[n++]=s>>>6&63|128,i[n++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++o)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[n++]=(s>>>18)+240,i[n++]=s>>>12&63|128,i[n++]=s>>>6&63|128,i[n++]=s&63|128}n>=64&&(this._dataLength+=64,t._md5cycle(this._state,r),n-=64,r[0]=r[16])}return this._bufferLength=n,this},t.prototype.appendAsciiStr=function(e){for(var i=this._buffer8,r=this._buffer32,n=this._bufferLength,s,o=0;;){for(s=Math.min(e.length-o,64-n);s--;)i[n++]=e.charCodeAt(o++);if(n<64)break;this._dataLength+=64,t._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},t.prototype.appendByteArray=function(e){for(var i=this._buffer8,r=this._buffer32,n=this._bufferLength,s,o=0;;){for(s=Math.min(e.length-o,64-n);s--;)i[n++]=e[o++];if(n<64)break;this._dataLength+=64,t._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},t.prototype.getState=function(){var e=this,i=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[i[0],i[1],i[2],i[3]]}},t.prototype.setState=function(e){var i=e.buffer,r=e.state,n=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],s=0;s<i.length;s+=1)this._buffer8[s]=i.charCodeAt(s)},t.prototype.end=function(e){e===void 0&&(e=!1);var i=this._bufferLength,r=this._buffer8,n=this._buffer32,s=(i>>2)+1,o;if(this._dataLength+=i,r[i]=128,r[i+1]=r[i+2]=r[i+3]=0,n.set(t.buffer32Identity.subarray(s),s),i>55&&(t._md5cycle(this._state,n),n.set(t.buffer32Identity)),o=this._dataLength*8,o<=4294967295)n[14]=o;else{var a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;var l=parseInt(a[2],16),u=parseInt(a[1],16)||0;n[14]=l,n[15]=u}return t._md5cycle(this._state,n),e?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();Fg.Md5=qI;qI.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.")});var Zs=A(Qi=>{"use strict";var os={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},Vu={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},bG="tag:yaml.org,2002:",IG={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function FS(t){let e=[0],i=t.indexOf(`
`);for(;i!==-1;)i+=1,e.push(i),i=t.indexOf(`
`,i);return e}function LS(t){let e,i;return typeof t=="string"?(e=FS(t),i=t):(Array.isArray(t)&&(t=t[0]),t&&t.context&&(t.lineStarts||(t.lineStarts=FS(t.context.src)),e=t.lineStarts,i=t.context.src)),{lineStarts:e,src:i}}function P_(t,e){if(typeof t!="number"||t<0)return null;let{lineStarts:i,src:r}=LS(e);if(!i||!r||t>r.length)return null;for(let s=0;s<i.length;++s){let o=i[s];if(t<o)return{line:s,col:t-i[s-1]+1};if(t===o)return{line:s+1,col:1}}let n=i.length;return{line:n,col:t-i[n-1]+1}}function vG(t,e){let{lineStarts:i,src:r}=LS(e);if(!i||!(t>=1)||t>i.length)return null;let n=i[t-1],s=i[t];for(;s&&s>n&&r[s-1]===`
`;)--s;return r.slice(n,s)}function NG({start:t,end:e},i,r=80){let n=vG(t.line,i);if(!n)return null;let{col:s}=t;if(n.length>r)if(s<=r-10)n=n.substr(0,r-1)+"\u2026";else{let c=Math.round(r/2);n.length>s+c&&(n=n.substr(0,s+c-1)+"\u2026"),s-=n.length-r,n="\u2026"+n.substr(1-r)}let o=1,a="";e&&(e.line===t.line&&s+(e.col-t.col)<=r+1?o=e.col-t.col:(o=Math.min(n.length+1,r)-s,a="\u2026"));let l=s>1?" ".repeat(s-1):"",u="^".repeat(o);return`${n}
${l}${u}${a}`}var Js=class{static copy(e){return new Js(e.start,e.end)}constructor(e,i){this.start=e,this.end=i||e}isEmpty(){return typeof this.start!="number"||!this.end||this.end<=this.start}setOrigRange(e,i){let{start:r,end:n}=this;if(e.length===0||n<=e[0])return this.origStart=r,this.origEnd=n,i;let s=i;for(;s<e.length&&!(e[s]>r);)++s;this.origStart=r+s;let o=s;for(;s<e.length&&!(e[s]>=n);)++s;return this.origEnd=n+s,o}},si=class{static addStringTerminator(e,i,r){if(r[r.length-1]===`
`)return r;let n=si.endOfWhiteSpace(e,i);return n>=e.length||e[n]===`
`?r+`
`:r}static atDocumentBoundary(e,i,r){let n=e[i];if(!n)return!0;let s=e[i-1];if(s&&s!==`
`)return!1;if(r){if(n!==r)return!1}else if(n!==os.DIRECTIVES_END&&n!==os.DOCUMENT_END)return!1;let o=e[i+1],a=e[i+2];if(o!==n||a!==n)return!1;let l=e[i+3];return!l||l===`
`||l==="	"||l===" "}static endOfIdentifier(e,i){let r=e[i],n=r==="<",s=n?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];for(;r&&s.indexOf(r)===-1;)r=e[i+=1];return n&&r===">"&&(i+=1),i}static endOfIndent(e,i){let r=e[i];for(;r===" ";)r=e[i+=1];return i}static endOfLine(e,i){let r=e[i];for(;r&&r!==`
`;)r=e[i+=1];return i}static endOfWhiteSpace(e,i){let r=e[i];for(;r==="	"||r===" ";)r=e[i+=1];return i}static startOfLine(e,i){let r=e[i-1];if(r===`
`)return i;for(;r&&r!==`
`;)r=e[i-=1];return i+1}static endOfBlockIndent(e,i,r){let n=si.endOfIndent(e,r);if(n>r+i)return n;{let s=si.endOfWhiteSpace(e,n),o=e[s];if(!o||o===`
`)return s}return null}static atBlank(e,i,r){let n=e[i];return n===`
`||n==="	"||n===" "||r&&!n}static nextNodeIsIndented(e,i,r){return!e||i<0?!1:i>0?!0:r&&e==="-"}static normalizeOffset(e,i){let r=e[i];return r?r!==`
`&&e[i-1]===`
`?i-1:si.endOfWhiteSpace(e,i):i}static foldNewline(e,i,r){let n=0,s=!1,o="",a=e[i+1];for(;a===" "||a==="	"||a===`
`;){switch(a){case`
`:n=0,i+=1,o+=`
`;break;case"	":n<=r&&(s=!0),i=si.endOfWhiteSpace(e,i+2)-1;break;case" ":n+=1,i+=1;break}a=e[i+1]}return o||(o=" "),a&&n<=r&&(s=!0),{fold:o,offset:i,error:s}}constructor(e,i,r){Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=i||[],this.type=e,this.value=null}getPropValue(e,i,r){if(!this.context)return null;let{src:n}=this.context,s=this.props[e];return s&&n[s.start]===i?n.slice(s.start+(r?1:0),s.end):null}get anchor(){for(let e=0;e<this.props.length;++e){let i=this.getPropValue(e,os.ANCHOR,!0);if(i!=null)return i}return null}get comment(){let e=[];for(let i=0;i<this.props.length;++i){let r=this.getPropValue(i,os.COMMENT,!0);r!=null&&e.push(r)}return e.length>0?e.join(`
`):null}commentHasRequiredWhitespace(e){let{src:i}=this.context;if(this.header&&e===this.header.end||!this.valueRange)return!1;let{end:r}=this.valueRange;return e!==r||si.atBlank(i,r-1)}get hasComment(){if(this.context){let{src:e}=this.context;for(let i=0;i<this.props.length;++i)if(e[this.props[i].start]===os.COMMENT)return!0}return!1}get hasProps(){if(this.context){let{src:e}=this.context;for(let i=0;i<this.props.length;++i)if(e[this.props[i].start]!==os.COMMENT)return!0}return!1}get includesTrailingLines(){return!1}get jsonLike(){return[Vu.FLOW_MAP,Vu.FLOW_SEQ,Vu.QUOTE_DOUBLE,Vu.QUOTE_SINGLE].indexOf(this.type)!==-1}get rangeAsLinePos(){if(!this.range||!this.context)return;let e=P_(this.range.start,this.context.root);if(!e)return;let i=P_(this.range.end,this.context.root);return{start:e,end:i}}get rawValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:i}=this.valueRange;return this.context.src.slice(e,i)}get tag(){for(let e=0;e<this.props.length;++e){let i=this.getPropValue(e,os.TAG,!1);if(i!=null){if(i[1]==="<")return{verbatim:i.slice(2,-1)};{let[r,n,s]=i.match(/^(.*!)([^!]*)$/);return{handle:n,suffix:s}}}}return null}get valueRangeContainsNewline(){if(!this.valueRange||!this.context)return!1;let{start:e,end:i}=this.valueRange,{src:r}=this.context;for(let n=e;n<i;++n)if(r[n]===`
`)return!0;return!1}parseComment(e){let{src:i}=this.context;if(i[e]===os.COMMENT){let r=si.endOfLine(i,e+1),n=new Js(e,r);return this.props.push(n),r}return e}setOrigRanges(e,i){return this.range&&(i=this.range.setOrigRange(e,i)),this.valueRange&&this.valueRange.setOrigRange(e,i),this.props.forEach(r=>r.setOrigRange(e,i)),i}toString(){let{context:{src:e},range:i,value:r}=this;if(r!=null)return r;let n=e.slice(i.start,i.end);return si.addStringTerminator(e,i.end,n)}},zo=class extends Error{constructor(e,i,r){if(!r||!(i instanceof si))throw new Error(`Invalid arguments for new ${e}`);super(),this.name=e,this.message=r,this.source=i}makePretty(){if(!this.source)return;this.nodeType=this.source.type;let e=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new Js(this.offset,this.offset+1);let i=e&&P_(this.offset,e);if(i){let r={line:i.line,col:i.col+1};this.linePos={start:i,end:r}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){let{line:i,col:r}=this.linePos.start;this.message+=` at line ${i}, column ${r}`;let n=e&&NG(this.linePos,e);n&&(this.message+=`:

${n}
`)}delete this.source}},A_=class extends zo{constructor(e,i){super("YAMLReferenceError",e,i)}},Uu=class extends zo{constructor(e,i){super("YAMLSemanticError",e,i)}},E_=class extends zo{constructor(e,i){super("YAMLSyntaxError",e,i)}},C_=class extends zo{constructor(e,i){super("YAMLWarning",e,i)}};function SG(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ll=class extends si{static endOfLine(e,i,r){let n=e[i],s=i;for(;n&&n!==`
`&&!(r&&(n==="["||n==="]"||n==="{"||n==="}"||n===","));){let o=e[s+1];if(n===":"&&(!o||o===`
`||o==="	"||o===" "||r&&o===",")||(n===" "||n==="	")&&o==="#")break;s+=1,n=o}return s}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:i}=this.valueRange,{src:r}=this.context,n=r[i-1];for(;e<i&&(n===`
`||n==="	"||n===" ");)n=r[--i-1];let s="";for(let a=e;a<i;++a){let l=r[a];if(l===`
`){let{fold:u,offset:c}=si.foldNewline(r,a,-1);s+=u,a=c}else if(l===" "||l==="	"){let u=a,c=r[a+1];for(;a<i&&(c===" "||c==="	");)a+=1,c=r[a+1];c!==`
`&&(s+=a>u?r.slice(u,a+1):l)}else s+=l}let o=r[e];switch(o){case"	":{let a="Plain value cannot start with a tab character";return{errors:[new Uu(this,a)],str:s}}case"@":case"`":{let a=`Plain value cannot start with reserved character ${o}`;return{errors:[new Uu(this,a)],str:s}}default:return s}}parseBlockValue(e){let{indent:i,inFlow:r,src:n}=this.context,s=e,o=e;for(let a=n[s];a===`
`&&!si.atDocumentBoundary(n,s+1);a=n[s]){let l=si.endOfBlockIndent(n,i,s+1);if(l===null||n[l]==="#")break;n[l]===`
`?s=l:(o=Ll.endOfLine(n,l,r),s=o)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=o,o}parse(e,i){this.context=e;let{inFlow:r,src:n}=e,s=i,o=n[s];return o&&o!=="#"&&o!==`
`&&(s=Ll.endOfLine(n,i,r)),this.valueRange=new Js(i,s),s=si.endOfWhiteSpace(n,s),s=this.parseComment(s),(!this.hasComment||this.valueRange.isEmpty())&&(s=this.parseBlockValue(s)),s}};Qi.Char=os;Qi.Node=si;Qi.PlainValue=Ll;Qi.Range=Js;Qi.Type=Vu;Qi.YAMLError=zo;Qi.YAMLReferenceError=A_;Qi.YAMLSemanticError=Uu;Qi.YAMLSyntaxError=E_;Qi.YAMLWarning=C_;Qi._defineProperty=SG;Qi.defaultTagPrefix=bG;Qi.defaultTags=IG});var MS=A(OS=>{"use strict";var L=Zs(),Jo=class extends L.Node{constructor(){super(L.Type.BLANK_LINE)}get includesTrailingLines(){return!0}parse(e,i){return this.context=e,this.range=new L.Range(i,i+1),i+1}},ju=class extends L.Node{constructor(e,i){super(e,i),this.node=null}get includesTrailingLines(){return!!this.node&&this.node.includesTrailingLines}parse(e,i){this.context=e;let{parseNode:r,src:n}=e,{atLineStart:s,lineStart:o}=e;!s&&this.type===L.Type.SEQ_ITEM&&(this.error=new L.YAMLSemanticError(this,"Sequence items must not have preceding content on the same line"));let a=s?i-o:e.indent,l=L.Node.endOfWhiteSpace(n,i+1),u=n[l],c=u==="#",f=[],d=null;for(;u===`
`||u==="#";){if(u==="#"){let p=L.Node.endOfLine(n,l+1);f.push(new L.Range(l,p)),l=p}else{s=!0,o=l+1;let p=L.Node.endOfWhiteSpace(n,o);n[p]===`
`&&f.length===0&&(d=new Jo,o=d.parse({src:n},o)),l=L.Node.endOfIndent(n,o)}u=n[l]}if(L.Node.nextNodeIsIndented(u,l-(o+a),this.type!==L.Type.SEQ_ITEM)?this.node=r({atLineStart:s,inCollection:!1,indent:a,lineStart:o,parent:this},l):u&&o>i+1&&(l=o-1),this.node){if(d){let p=e.parent.items||e.parent.contents;p&&p.push(d)}f.length&&Array.prototype.push.apply(this.props,f),l=this.node.range.end}else if(c){let p=f[0];this.props.push(p),l=p.end}else l=L.Node.endOfLine(n,i+1);let h=this.node?this.node.valueRange.end:l;return this.valueRange=new L.Range(i,h),l}setOrigRanges(e,i){return i=super.setOrigRanges(e,i),this.node?this.node.setOrigRanges(e,i):i}toString(){let{context:{src:e},node:i,range:r,value:n}=this;if(n!=null)return n;let s=i?e.slice(r.start,i.range.start)+String(i):e.slice(r.start,r.end);return L.Node.addStringTerminator(e,r.end,s)}},Qo=class extends L.Node{constructor(){super(L.Type.COMMENT)}parse(e,i){this.context=e;let r=this.parseComment(i);return this.range=new L.Range(i,r),r}};function R_(t){let e=t;for(;e instanceof ju;)e=e.node;if(!(e instanceof Zo))return null;let i=e.items.length,r=-1;for(let o=i-1;o>=0;--o){let a=e.items[o];if(a.type===L.Type.COMMENT){let{indent:l,lineStart:u}=a.context;if(l>0&&a.range.start>=u+l)break;r=o}else if(a.type===L.Type.BLANK_LINE)r=o;else break}if(r===-1)return null;let n=e.items.splice(r,i-r),s=n[0].range.start;for(;e.range.end=s,e.valueRange&&e.valueRange.end>s&&(e.valueRange.end=s),e!==t;)e=e.context.parent;return n}var Zo=class extends L.Node{static nextContentHasIndent(e,i,r){let n=L.Node.endOfLine(e,i)+1;i=L.Node.endOfWhiteSpace(e,n);let s=e[i];return s?i>=n+r?!0:s!=="#"&&s!==`
`?!1:Zo.nextContentHasIndent(e,i,r):!1}constructor(e){super(e.type===L.Type.SEQ_ITEM?L.Type.SEQ:L.Type.MAP);for(let r=e.props.length-1;r>=0;--r)if(e.props[r].start<e.context.lineStart){this.props=e.props.slice(0,r+1),e.props=e.props.slice(r+1);let n=e.props[0]||e.valueRange;e.range.start=n.start;break}this.items=[e];let i=R_(e);i&&Array.prototype.push.apply(this.items,i)}get includesTrailingLines(){return this.items.length>0}parse(e,i){this.context=e;let{parseNode:r,src:n}=e,s=L.Node.startOfLine(n,i),o=this.items[0];o.context.parent=this,this.valueRange=L.Range.copy(o.valueRange);let a=o.range.start-o.context.lineStart,l=i;l=L.Node.normalizeOffset(n,l);let u=n[l],c=L.Node.endOfWhiteSpace(n,s)===l,f=!1;for(;u;){for(;u===`
`||u==="#";){if(c&&u===`
`&&!f){let p=new Jo;if(l=p.parse({src:n},l),this.valueRange.end=l,l>=n.length){u=null;break}this.items.push(p),l-=1}else if(u==="#"){if(l<s+a&&!Zo.nextContentHasIndent(n,l,a))return l;let p=new Qo;if(l=p.parse({indent:a,lineStart:s,src:n},l),this.items.push(p),this.valueRange.end=l,l>=n.length){u=null;break}}if(s=l+1,l=L.Node.endOfIndent(n,s),L.Node.atBlank(n,l)){let p=L.Node.endOfWhiteSpace(n,l),y=n[p];(!y||y===`
`||y==="#")&&(l=p)}u=n[l],c=!0}if(!u)break;if(l!==s+a&&(c||u!==":")){if(l<s+a){s>i&&(l=s);break}else if(!this.error){let p="All collection items must start at the same column";this.error=new L.YAMLSyntaxError(this,p)}}if(o.type===L.Type.SEQ_ITEM){if(u!=="-"){s>i&&(l=s);break}}else if(u==="-"&&!this.error){let p=n[l+1];if(!p||p===`
`||p==="	"||p===" "){let y="A collection cannot be both a mapping and a sequence";this.error=new L.YAMLSyntaxError(this,y)}}let d=r({atLineStart:c,inCollection:!0,indent:a,lineStart:s,parent:this},l);if(!d)return l;if(this.items.push(d),this.valueRange.end=d.valueRange.end,l=L.Node.normalizeOffset(n,d.range.end),u=n[l],c=!1,f=d.includesTrailingLines,u){let p=l-1,y=n[p];for(;y===" "||y==="	";)y=n[--p];y===`
`&&(s=p+1,c=!0)}let h=R_(d);h&&Array.prototype.push.apply(this.items,h)}return l}setOrigRanges(e,i){return i=super.setOrigRanges(e,i),this.items.forEach(r=>{i=r.setOrigRanges(e,i)}),i}toString(){let{context:{src:e},items:i,range:r,value:n}=this;if(n!=null)return n;let s=e.slice(r.start,i[0].range.start)+String(i[0]);for(let o=1;o<i.length;++o){let a=i[o],{atLineStart:l,indent:u}=a.context;if(l)for(let c=0;c<u;++c)s+=" ";s+=String(a)}return L.Node.addStringTerminator(e,r.end,s)}},x_=class extends L.Node{constructor(){super(L.Type.DIRECTIVE),this.name=null}get parameters(){let e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}parseName(e){let{src:i}=this.context,r=e,n=i[r];for(;n&&n!==`
`&&n!=="	"&&n!==" ";)n=i[r+=1];return this.name=i.slice(e,r),r}parseParameters(e){let{src:i}=this.context,r=e,n=i[r];for(;n&&n!==`
`&&n!=="#";)n=i[r+=1];return this.valueRange=new L.Range(e,r),r}parse(e,i){this.context=e;let r=this.parseName(i+1);return r=this.parseParameters(r),r=this.parseComment(r),this.range=new L.Range(i,r),r}},Ol=class extends L.Node{static startCommentOrEndBlankLine(e,i){let r=L.Node.endOfWhiteSpace(e,i),n=e[r];return n==="#"||n===`
`?r:i}constructor(){super(L.Type.DOCUMENT),this.directives=null,this.contents=null,this.directivesEndMarker=null,this.documentEndMarker=null}parseDirectives(e){let{src:i}=this.context;this.directives=[];let r=!0,n=!1,s=e;for(;!L.Node.atDocumentBoundary(i,s,L.Char.DIRECTIVES_END);)switch(s=Ol.startCommentOrEndBlankLine(i,s),i[s]){case`
`:if(r){let o=new Jo;s=o.parse({src:i},s),s<i.length&&this.directives.push(o)}else s+=1,r=!0;break;case"#":{let o=new Qo;s=o.parse({src:i},s),this.directives.push(o),r=!1}break;case"%":{let o=new x_;s=o.parse({parent:this,src:i},s),this.directives.push(o),n=!0,r=!1}break;default:return n?this.error=new L.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s}return i[s]?(this.directivesEndMarker=new L.Range(s,s+3),s+3):(n?this.error=new L.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s)}parseContents(e){let{parseNode:i,src:r}=this.context;this.contents||(this.contents=[]);let n=e;for(;r[n-1]==="-";)n-=1;let s=L.Node.endOfWhiteSpace(r,e),o=n===e;for(this.valueRange=new L.Range(s);!L.Node.atDocumentBoundary(r,s,L.Char.DOCUMENT_END);){switch(r[s]){case`
`:if(o){let a=new Jo;s=a.parse({src:r},s),s<r.length&&this.contents.push(a)}else s+=1,o=!0;n=s;break;case"#":{let a=new Qo;s=a.parse({src:r},s),this.contents.push(a),o=!1}break;default:{let a=L.Node.endOfIndent(r,s),u=i({atLineStart:o,indent:-1,inFlow:!1,inCollection:!1,lineStart:n,parent:this},a);if(!u)return this.valueRange.end=a;this.contents.push(u),s=u.range.end,o=!1;let c=R_(u);c&&Array.prototype.push.apply(this.contents,c)}}s=Ol.startCommentOrEndBlankLine(r,s)}if(this.valueRange.end=s,r[s]&&(this.documentEndMarker=new L.Range(s,s+3),s+=3,r[s])){if(s=L.Node.endOfWhiteSpace(r,s),r[s]==="#"){let a=new Qo;s=a.parse({src:r},s),this.contents.push(a)}switch(r[s]){case`
`:s+=1;break;case void 0:break;default:this.error=new L.YAMLSyntaxError(this,"Document end marker line cannot have a non-comment suffix")}}return s}parse(e,i){e.root=this,this.context=e;let{src:r}=e,n=r.charCodeAt(i)===65279?i+1:i;return n=this.parseDirectives(n),n=this.parseContents(n),n}setOrigRanges(e,i){return i=super.setOrigRanges(e,i),this.directives.forEach(r=>{i=r.setOrigRanges(e,i)}),this.directivesEndMarker&&(i=this.directivesEndMarker.setOrigRange(e,i)),this.contents.forEach(r=>{i=r.setOrigRanges(e,i)}),this.documentEndMarker&&(i=this.documentEndMarker.setOrigRange(e,i)),i}toString(){let{contents:e,directives:i,value:r}=this;if(r!=null)return r;let n=i.join("");return e.length>0&&((i.length>0||e[0].type===L.Type.COMMENT)&&(n+=`---
`),n+=e.join("")),n[n.length-1]!==`
`&&(n+=`
`),n}},w_=class extends L.Node{parse(e,i){this.context=e;let{src:r}=e,n=L.Node.endOfIdentifier(r,i+1);return this.valueRange=new L.Range(i+1,n),n=L.Node.endOfWhiteSpace(r,n),n=this.parseComment(n),n}},eo={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},k_=class extends L.Node{constructor(e,i){super(e,i),this.blockIndent=null,this.chomping=eo.CLIP,this.header=null}get includesTrailingLines(){return this.chomping===eo.KEEP}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:i}=this.valueRange,{indent:r,src:n}=this.context;if(this.valueRange.isEmpty())return"";let s=null,o=n[i-1];for(;o===`
`||o==="	"||o===" ";){if(i-=1,i<=e){if(this.chomping===eo.KEEP)break;return""}o===`
`&&(s=i),o=n[i-1]}let a=i+1;s&&(this.chomping===eo.KEEP?(a=s,i=this.valueRange.end):i=s);let l=r+this.blockIndent,u=this.type===L.Type.BLOCK_FOLDED,c=!0,f="",d="",h=!1;for(let p=e;p<i;++p){for(let v=0;v<l&&n[p]===" ";++v)p+=1;let y=n[p];if(y===`
`)d===`
`?f+=`
`:d=`
`;else{let v=L.Node.endOfLine(n,p),b=n.slice(p,v);p=v,u&&(y===" "||y==="	")&&p<a?(d===" "?d=`
`:!h&&!c&&d===`
`&&(d=`

`),f+=d+b,d=v<i&&n[v]||"",h=!0):(f+=d+b,d=u&&p<a?" ":`
`,h=!1),c&&b!==""&&(c=!1)}}return this.chomping===eo.STRIP?f:f+`
`}parseBlockHeader(e){let{src:i}=this.context,r=e+1,n="";for(;;){let s=i[r];switch(s){case"-":this.chomping=eo.STRIP;break;case"+":this.chomping=eo.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n+=s;break;default:return this.blockIndent=Number(n)||null,this.header=new L.Range(e,r),r}r+=1}}parseBlockValue(e){let{indent:i,src:r}=this.context,n=!!this.blockIndent,s=e,o=e,a=1;for(let l=r[s];l===`
`&&(s+=1,!L.Node.atDocumentBoundary(r,s));l=r[s]){let u=L.Node.endOfBlockIndent(r,i,s);if(u===null)break;let c=r[u],f=u-(s+i);if(this.blockIndent){if(c&&c!==`
`&&f<this.blockIndent){if(r[u]==="#")break;if(!this.error){let h=`Block scalars must not be less indented than their ${n?"explicit indentation indicator":"first line"}`;this.error=new L.YAMLSemanticError(this,h)}}}else if(r[u]!==`
`){if(f<a){let d="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new L.YAMLSemanticError(this,d)}this.blockIndent=f}else f>a&&(a=f);r[u]===`
`?s=u:s=o=L.Node.endOfLine(r,u)}return this.chomping!==eo.KEEP&&(s=r[o]?o+1:o),this.valueRange=new L.Range(e+1,s),s}parse(e,i){this.context=e;let{src:r}=e,n=this.parseBlockHeader(i);return n=L.Node.endOfWhiteSpace(r,n),n=this.parseComment(n),n=this.parseBlockValue(n),n}setOrigRanges(e,i){return i=super.setOrigRanges(e,i),this.header?this.header.setOrigRange(e,i):i}},D_=class extends L.Node{constructor(e,i){super(e,i),this.items=null}prevNodeIsJsonLike(e=this.items.length){let i=this.items[e-1];return!!i&&(i.jsonLike||i.type===L.Type.COMMENT&&this.prevNodeIsJsonLike(e-1))}parse(e,i){this.context=e;let{parseNode:r,src:n}=e,{indent:s,lineStart:o}=e,a=n[i];this.items=[{char:a,offset:i}];let l=L.Node.endOfWhiteSpace(n,i+1);for(a=n[l];a&&a!=="]"&&a!=="}";){switch(a){case`
`:{o=l+1;let u=L.Node.endOfWhiteSpace(n,o);if(n[u]===`
`){let c=new Jo;o=c.parse({src:n},o),this.items.push(c)}if(l=L.Node.endOfIndent(n,o),l<=o+s&&(a=n[l],l<o+s||a!=="]"&&a!=="}")){let c="Insufficient indentation in flow collection";this.error=new L.YAMLSemanticError(this,c)}}break;case",":this.items.push({char:a,offset:l}),l+=1;break;case"#":{let u=new Qo;l=u.parse({src:n},l),this.items.push(u)}break;case"?":case":":{let u=n[l+1];if(u===`
`||u==="	"||u===" "||u===","||a===":"&&this.prevNodeIsJsonLike()){this.items.push({char:a,offset:l}),l+=1;break}}default:{let u=r({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:o,parent:this},l);if(!u)return this.valueRange=new L.Range(i,l),l;this.items.push(u),l=L.Node.normalizeOffset(n,u.range.end)}}l=L.Node.endOfWhiteSpace(n,l),a=n[l]}return this.valueRange=new L.Range(i,l+1),a&&(this.items.push({char:a,offset:l}),l=L.Node.endOfWhiteSpace(n,l+1),l=this.parseComment(l)),l}setOrigRanges(e,i){return i=super.setOrigRanges(e,i),this.items.forEach(r=>{if(r instanceof L.Node)i=r.setOrigRanges(e,i);else if(e.length===0)r.origOffset=r.offset;else{let n=i;for(;n<e.length&&!(e[n]>r.offset);)++n;r.origOffset=r.offset+n,i=n}}),i}toString(){let{context:{src:e},items:i,range:r,value:n}=this;if(n!=null)return n;let s=i.filter(l=>l instanceof L.Node),o="",a=r.start;return s.forEach(l=>{let u=e.slice(a,l.range.start);a=l.range.end,o+=u+String(l),o[o.length-1]===`
`&&e[a-1]!==`
`&&e[a]===`
`&&(a+=1)}),o+=e.slice(a,r.end),L.Node.addStringTerminator(e,r.end,o)}},Gu=class extends L.Node{static endOfQuote(e,i){let r=e[i];for(;r&&r!=='"';)i+=r==="\\"?2:1,r=e[i];return i+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:i,end:r}=this.valueRange,{indent:n,src:s}=this.context;s[r-1]!=='"'&&e.push(new L.YAMLSyntaxError(this,'Missing closing "quote'));let o="";for(let a=i+1;a<r-1;++a){let l=s[a];if(l===`
`){L.Node.atDocumentBoundary(s,a+1)&&e.push(new L.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:u,offset:c,error:f}=L.Node.foldNewline(s,a,n);o+=u,a=c,f&&e.push(new L.YAMLSemanticError(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(l==="\\")switch(a+=1,s[a]){case"0":o+="\0";break;case"a":o+="\x07";break;case"b":o+="\b";break;case"e":o+="\x1B";break;case"f":o+="\f";break;case"n":o+=`
`;break;case"r":o+="\r";break;case"t":o+="	";break;case"v":o+="\v";break;case"N":o+="\x85";break;case"_":o+="\xA0";break;case"L":o+="\u2028";break;case"P":o+="\u2029";break;case" ":o+=" ";break;case'"':o+='"';break;case"/":o+="/";break;case"\\":o+="\\";break;case"	":o+="	";break;case"x":o+=this.parseCharCode(a+1,2,e),a+=2;break;case"u":o+=this.parseCharCode(a+1,4,e),a+=4;break;case"U":o+=this.parseCharCode(a+1,8,e),a+=8;break;case`
`:for(;s[a+1]===" "||s[a+1]==="	";)a+=1;break;default:e.push(new L.YAMLSyntaxError(this,`Invalid escape sequence ${s.substr(a-1,2)}`)),o+="\\"+s[a]}else if(l===" "||l==="	"){let u=a,c=s[a+1];for(;c===" "||c==="	";)a+=1,c=s[a+1];c!==`
`&&(o+=a>u?s.slice(u,a+1):l)}else o+=l}return e.length>0?{errors:e,str:o}:o}parseCharCode(e,i,r){let{src:n}=this.context,s=n.substr(e,i),a=s.length===i&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;return isNaN(a)?(r.push(new L.YAMLSyntaxError(this,`Invalid escape sequence ${n.substr(e-2,i+2)}`)),n.substr(e-2,i+2)):String.fromCodePoint(a)}parse(e,i){this.context=e;let{src:r}=e,n=Gu.endOfQuote(r,i+1);return this.valueRange=new L.Range(i,n),n=L.Node.endOfWhiteSpace(r,n),n=this.parseComment(n),n}},Hu=class extends L.Node{static endOfQuote(e,i){let r=e[i];for(;r;)if(r==="'"){if(e[i+1]!=="'")break;r=e[i+=2]}else r=e[i+=1];return i+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:i,end:r}=this.valueRange,{indent:n,src:s}=this.context;s[r-1]!=="'"&&e.push(new L.YAMLSyntaxError(this,"Missing closing 'quote"));let o="";for(let a=i+1;a<r-1;++a){let l=s[a];if(l===`
`){L.Node.atDocumentBoundary(s,a+1)&&e.push(new L.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:u,offset:c,error:f}=L.Node.foldNewline(s,a,n);o+=u,a=c,f&&e.push(new L.YAMLSemanticError(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(l==="'")o+=l,a+=1,s[a]!=="'"&&e.push(new L.YAMLSyntaxError(this,"Unescaped single quote? This should not happen."));else if(l===" "||l==="	"){let u=a,c=s[a+1];for(;c===" "||c==="	";)a+=1,c=s[a+1];c!==`
`&&(o+=a>u?s.slice(u,a+1):l)}else o+=l}return e.length>0?{errors:e,str:o}:o}parse(e,i){this.context=e;let{src:r}=e,n=Hu.endOfQuote(r,i+1);return this.valueRange=new L.Range(i,n),n=L.Node.endOfWhiteSpace(r,n),n=this.parseComment(n),n}};function PG(t,e){switch(t){case L.Type.ALIAS:return new w_(t,e);case L.Type.BLOCK_FOLDED:case L.Type.BLOCK_LITERAL:return new k_(t,e);case L.Type.FLOW_MAP:case L.Type.FLOW_SEQ:return new D_(t,e);case L.Type.MAP_KEY:case L.Type.MAP_VALUE:case L.Type.SEQ_ITEM:return new ju(t,e);case L.Type.COMMENT:case L.Type.PLAIN:return new L.PlainValue(t,e);case L.Type.QUOTE_DOUBLE:return new Gu(t,e);case L.Type.QUOTE_SINGLE:return new Hu(t,e);default:return null}}var Xo=class{static parseType(e,i,r){switch(e[i]){case"*":return L.Type.ALIAS;case">":return L.Type.BLOCK_FOLDED;case"|":return L.Type.BLOCK_LITERAL;case"{":return L.Type.FLOW_MAP;case"[":return L.Type.FLOW_SEQ;case"?":return!r&&L.Node.atBlank(e,i+1,!0)?L.Type.MAP_KEY:L.Type.PLAIN;case":":return!r&&L.Node.atBlank(e,i+1,!0)?L.Type.MAP_VALUE:L.Type.PLAIN;case"-":return!r&&L.Node.atBlank(e,i+1,!0)?L.Type.SEQ_ITEM:L.Type.PLAIN;case'"':return L.Type.QUOTE_DOUBLE;case"'":return L.Type.QUOTE_SINGLE;default:return L.Type.PLAIN}}constructor(e={},{atLineStart:i,inCollection:r,inFlow:n,indent:s,lineStart:o,parent:a}={}){L._defineProperty(this,"parseNode",(l,u)=>{if(L.Node.atDocumentBoundary(this.src,u))return null;let c=new Xo(this,l),{props:f,type:d,valueStart:h}=c.parseProps(u),p=PG(d,f),y=p.parse(c,h);if(p.range=new L.Range(u,y),y<=u&&(p.error=new Error("Node#parse consumed no characters"),p.error.parseEnd=y,p.error.source=p,p.range.end=u+1),c.nodeStartsCollection(p)){!p.error&&!c.atLineStart&&c.parent.type===L.Type.DOCUMENT&&(p.error=new L.YAMLSyntaxError(p,"Block collection must not have preceding content here (e.g. directives-end indicator)"));let v=new Zo(p);return y=v.parse(new Xo(c),y),v.range=new L.Range(u,y),v}return p}),this.atLineStart=i??(e.atLineStart||!1),this.inCollection=r??(e.inCollection||!1),this.inFlow=n??(e.inFlow||!1),this.indent=s??e.indent,this.lineStart=o??e.lineStart,this.parent=a??(e.parent||{}),this.root=e.root,this.src=e.src}nodeStartsCollection(e){let{inCollection:i,inFlow:r,src:n}=this;if(i||r)return!1;if(e instanceof ju)return!0;let s=e.range.end;return n[s]===`
`||n[s-1]===`
`?!1:(s=L.Node.endOfWhiteSpace(n,s),n[s]===":")}parseProps(e){let{inFlow:i,parent:r,src:n}=this,s=[],o=!1;e=this.atLineStart?L.Node.endOfIndent(n,e):L.Node.endOfWhiteSpace(n,e);let a=n[e];for(;a===L.Char.ANCHOR||a===L.Char.COMMENT||a===L.Char.TAG||a===`
`;){if(a===`
`){let u=e,c;do c=u+1,u=L.Node.endOfIndent(n,c);while(n[u]===`
`);let f=u-(c+this.indent),d=r.type===L.Type.SEQ_ITEM&&r.context.atLineStart;if(n[u]!=="#"&&!L.Node.nextNodeIsIndented(n[u],f,!d))break;this.atLineStart=!0,this.lineStart=c,o=!1,e=u}else if(a===L.Char.COMMENT){let u=L.Node.endOfLine(n,e+1);s.push(new L.Range(e,u)),e=u}else{let u=L.Node.endOfIdentifier(n,e+1);a===L.Char.TAG&&n[u]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(n.slice(e+1,u+13))&&(u=L.Node.endOfIdentifier(n,u+5)),s.push(new L.Range(e,u)),o=!0,e=L.Node.endOfWhiteSpace(n,u)}a=n[e]}o&&a===":"&&L.Node.atBlank(n,e+1,!0)&&(e-=1);let l=Xo.parseType(n,e,i);return{props:s,type:l,valueStart:e}}};function AG(t){let e=[];t.indexOf("\r")!==-1&&(t=t.replace(/\r\n?/g,(n,s)=>(n.length>1&&e.push(s),`
`)));let i=[],r=0;do{let n=new Ol,s=new Xo({src:t});r=n.parse(s,r),i.push(n)}while(r<t.length);return i.setOrigRanges=()=>{if(e.length===0)return!1;for(let s=1;s<e.length;++s)e[s]-=s;let n=0;for(let s=0;s<i.length;++s)n=i[s].setOrigRanges(e,n);return e.splice(0,e.length),!0},i.toString=()=>i.join(`...
`),i}OS.parse=AG});var ql=A(bt=>{"use strict";var U=Zs();function EG(t,e,i){return i?`#${i.replace(/[\s\S]^/gm,`$&${e}#`)}
${e}${t}`:t}function Ml(t,e,i){return i?i.indexOf(`
`)===-1?`${t} #${i}`:`${t}
`+i.replace(/^/gm,`${e||""}#`):t}var yr=class{};function to(t,e,i){if(Array.isArray(t))return t.map((r,n)=>to(r,String(n),i));if(t&&typeof t.toJSON=="function"){let r=i&&i.anchors&&i.anchors.get(t);r&&(i.onCreate=s=>{r.res=s,delete i.onCreate});let n=t.toJSON(e,i);return r&&i.onCreate&&i.onCreate(n),n}return(!i||!i.keep)&&typeof t=="bigint"?Number(t):t}var vi=class extends yr{constructor(e){super(),this.value=e}toJSON(e,i){return i&&i.keep?this.value:to(this.value,e,i)}toString(){return String(this.value)}};function qS(t,e,i){let r=i;for(let n=e.length-1;n>=0;--n){let s=e[n];if(Number.isInteger(s)&&s>=0){let o=[];o[s]=r,r=o}else{let o={};Object.defineProperty(o,s,{value:r,writable:!0,enumerable:!0,configurable:!0}),r=o}}return t.createNode(r,!1)}var US=t=>t==null||typeof t=="object"&&t[Symbol.iterator]().next().done,Wt=class extends yr{constructor(e){super(),U._defineProperty(this,"items",[]),this.schema=e}addIn(e,i){if(US(e))this.add(i);else{let[r,...n]=e,s=this.get(r,!0);if(s instanceof Wt)s.addIn(n,i);else if(s===void 0&&this.schema)this.set(r,qS(this.schema,n,i));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}}deleteIn([e,...i]){if(i.length===0)return this.delete(e);let r=this.get(e,!0);if(r instanceof Wt)return r.deleteIn(i);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${i}`)}getIn([e,...i],r){let n=this.get(e,!0);return i.length===0?!r&&n instanceof vi?n.value:n:n instanceof Wt?n.getIn(i,r):void 0}hasAllNullValues(){return this.items.every(e=>{if(!e||e.type!=="PAIR")return!1;let i=e.value;return i==null||i instanceof vi&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn([e,...i]){if(i.length===0)return this.has(e);let r=this.get(e,!0);return r instanceof Wt?r.hasIn(i):!1}setIn([e,...i],r){if(i.length===0)this.set(e,r);else{let n=this.get(e,!0);if(n instanceof Wt)n.setIn(i,r);else if(n===void 0&&this.schema)this.set(e,qS(this.schema,i,r));else throw new Error(`Expected YAML collection at ${e}. Remaining path: ${i}`)}}toJSON(){return null}toString(e,{blockItem:i,flowChars:r,isMap:n,itemIndent:s},o,a){let{indent:l,indentStep:u,stringify:c}=e,f=this.type===U.Type.FLOW_MAP||this.type===U.Type.FLOW_SEQ||e.inFlow;f&&(s+=u);let d=n&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:d,indent:s,inFlow:f,type:null});let h=!1,p=!1,y=this.items.reduce((b,I,C)=>{let q;I&&(!h&&I.spaceBefore&&b.push({type:"comment",str:""}),I.commentBefore&&I.commentBefore.match(/^.*$/gm).forEach(J=>{b.push({type:"comment",str:`#${J}`})}),I.comment&&(q=I.comment),f&&(!h&&I.spaceBefore||I.commentBefore||I.comment||I.key&&(I.key.commentBefore||I.key.comment)||I.value&&(I.value.commentBefore||I.value.comment))&&(p=!0)),h=!1;let K=c(I,e,()=>q=null,()=>h=!0);return f&&!p&&K.includes(`
`)&&(p=!0),f&&C<this.items.length-1&&(K+=","),K=Ml(K,s,q),h&&(q||f)&&(h=!1),b.push({type:"item",str:K}),b},[]),v;if(y.length===0)v=r.start+r.end;else if(f){let{start:b,end:I}=r,C=y.map(q=>q.str);if(p||C.reduce((q,K)=>q+K.length+2,2)>Wt.maxFlowStringSingleLineLength){v=b;for(let q of C)v+=q?`
${u}${l}${q}`:`
`;v+=`
${l}${I}`}else v=`${b} ${C.join(" ")} ${I}`}else{let b=y.map(i);v=b.shift();for(let I of b)v+=I?`
${l}${I}`:`
`}return this.comment?(v+=`
`+this.comment.replace(/^/gm,`${l}#`),o&&o()):h&&a&&a(),v}};U._defineProperty(Wt,"maxFlowStringSingleLineLength",60);function Rp(t){let e=t instanceof vi?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),Number.isInteger(e)&&e>=0?e:null}var io=class extends Wt{add(e){this.items.push(e)}delete(e){let i=Rp(e);return typeof i!="number"?!1:this.items.splice(i,1).length>0}get(e,i){let r=Rp(e);if(typeof r!="number")return;let n=this.items[r];return!i&&n instanceof vi?n.value:n}has(e){let i=Rp(e);return typeof i=="number"&&i<this.items.length}set(e,i){let r=Rp(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);this.items[r]=i}toJSON(e,i){let r=[];i&&i.onCreate&&i.onCreate(r);let n=0;for(let s of this.items)r.push(to(s,String(n++),i));return r}toString(e,i,r){return e?super.toString(e,{blockItem:n=>n.type==="comment"?n.str:`- ${n.str}`,flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},i,r):JSON.stringify(this)}},CG=(t,e,i)=>e===null?"":typeof e!="object"?String(e):t instanceof yr&&i&&i.doc?t.toString({anchors:Object.create(null),doc:i.doc,indent:"",indentStep:i.indentStep,inFlow:!0,inStringifyKey:!0,stringify:i.stringify}):JSON.stringify(e),rt=class extends yr{constructor(e,i=null){super(),this.key=e,this.value=i,this.type=rt.Type.PAIR}get commentBefore(){return this.key instanceof yr?this.key.commentBefore:void 0}set commentBefore(e){if(this.key==null&&(this.key=new vi(null)),this.key instanceof yr)this.key.commentBefore=e;else{let i="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(i)}}addToJSMap(e,i){let r=to(this.key,"",e);if(i instanceof Map){let n=to(this.value,r,e);i.set(r,n)}else if(i instanceof Set)i.add(r);else{let n=CG(this.key,r,e),s=to(this.value,n,e);n in i?Object.defineProperty(i,n,{value:s,writable:!0,enumerable:!0,configurable:!0}):i[n]=s}return i}toJSON(e,i){let r=i&&i.mapAsMap?new Map:{};return this.addToJSMap(i,r)}toString(e,i,r){if(!e||!e.doc)return JSON.stringify(this);let{indent:n,indentSeq:s,simpleKeys:o}=e.doc.options,{key:a,value:l}=this,u=a instanceof yr&&a.comment;if(o){if(u)throw new Error("With simple keys, key nodes cannot have comments");if(a instanceof Wt){let K="With simple keys, collection cannot be used as a key value";throw new Error(K)}}let c=!o&&(!a||u||(a instanceof yr?a instanceof Wt||a.type===U.Type.BLOCK_FOLDED||a.type===U.Type.BLOCK_LITERAL:typeof a=="object")),{doc:f,indent:d,indentStep:h,stringify:p}=e;e=Object.assign({},e,{implicitKey:!c,indent:d+h});let y=!1,v=p(a,e,()=>u=null,()=>y=!0);if(v=Ml(v,e.indent,u),!c&&v.length>1024){if(o)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");c=!0}if(e.allNullValues&&!o)return this.comment?(v=Ml(v,e.indent,this.comment),i&&i()):y&&!u&&r&&r(),e.inFlow&&!c?v:`? ${v}`;v=c?`? ${v}
${d}:`:`${v}:`,this.comment&&(v=Ml(v,e.indent,this.comment),i&&i());let b="",I=null;l instanceof yr?(l.spaceBefore&&(b=`
`),l.commentBefore&&(b+=`
${l.commentBefore.replace(/^/gm,`${e.indent}#`)}`),I=l.comment):l&&typeof l=="object"&&(l=f.schema.createNode(l,!0)),e.implicitKey=!1,!c&&!this.comment&&l instanceof vi&&(e.indentAtStart=v.length+1),y=!1,!s&&n>=2&&!e.inFlow&&!c&&l instanceof io&&l.type!==U.Type.FLOW_SEQ&&!l.tag&&!f.anchors.getName(l)&&(e.indent=e.indent.substr(2));let C=p(l,e,()=>I=null,()=>y=!0),q=" ";return b||this.comment?q=`${b}
${e.indent}`:!c&&l instanceof Wt?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(q=`
${e.indent}`):C[0]===`
`&&(q=""),y&&!I&&r&&r(),Ml(v+q+C,e.indent,I)}};U._defineProperty(rt,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var xp=(t,e)=>{if(t instanceof as){let i=e.get(t.source);return i.count*i.aliasCount}else if(t instanceof Wt){let i=0;for(let r of t.items){let n=xp(r,e);n>i&&(i=n)}return i}else if(t instanceof rt){let i=xp(t.key,e),r=xp(t.value,e);return Math.max(i,r)}return 1},as=class extends yr{static stringify({range:e,source:i},{anchors:r,doc:n,implicitKey:s,inStringifyKey:o}){let a=Object.keys(r).find(u=>r[u]===i);if(!a&&o&&(a=n.anchors.getName(i)||n.anchors.newName()),a)return`*${a}${s?" ":""}`;let l=n.anchors.getName(i)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${l} [${e}]`)}constructor(e){super(),this.source=e,this.type=U.Type.ALIAS}set tag(e){throw new Error("Alias nodes cannot have tags")}toJSON(e,i){if(!i)return to(this.source,e,i);let{anchors:r,maxAliasCount:n}=i,s=r.get(this.source);if(!s||s.res===void 0){let o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new U.YAMLReferenceError(this.cstNode,o):new ReferenceError(o)}if(n>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=xp(this.source,r)),s.count*s.aliasCount>n)){let o="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new U.YAMLReferenceError(this.cstNode,o):new ReferenceError(o)}return s.res}toString(e){return as.stringify(this,e)}};U._defineProperty(as,"default",!0);function Wu(t,e){let i=e instanceof vi?e.value:e;for(let r of t)if(r instanceof rt&&(r.key===e||r.key===i||r.key&&r.key.value===i))return r}var Yu=class extends Wt{add(e,i){e?e instanceof rt||(e=new rt(e.key||e,e.value)):e=new rt(e);let r=Wu(this.items,e.key),n=this.schema&&this.schema.sortMapEntries;if(r)if(i)r.value=e.value;else throw new Error(`Key ${e.key} already set`);else if(n){let s=this.items.findIndex(o=>n(e,o)<0);s===-1?this.items.push(e):this.items.splice(s,0,e)}else this.items.push(e)}delete(e){let i=Wu(this.items,e);return i?this.items.splice(this.items.indexOf(i),1).length>0:!1}get(e,i){let r=Wu(this.items,e),n=r&&r.value;return!i&&n instanceof vi?n.value:n}has(e){return!!Wu(this.items,e)}set(e,i){this.add(new rt(e,i),!0)}toJSON(e,i,r){let n=r?new r:i&&i.mapAsMap?new Map:{};i&&i.onCreate&&i.onCreate(n);for(let s of this.items)s.addToJSMap(i,n);return n}toString(e,i,r){if(!e)return JSON.stringify(this);for(let n of this.items)if(!(n instanceof rt))throw new Error(`Map items must all be pairs; found ${JSON.stringify(n)} instead`);return super.toString(e,{blockItem:n=>n.str,flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},i,r)}},jS="<<",Dp=class extends rt{constructor(e){if(e instanceof rt){let i=e.value;i instanceof io||(i=new io,i.items.push(e.value),i.range=e.value.range),super(e.key,i),this.range=e.range}else super(new vi(jS),new io);this.type=rt.Type.MERGE_PAIR}addToJSMap(e,i){for(let{source:r}of this.value.items){if(!(r instanceof Yu))throw new Error("Merge sources must be maps");let n=r.toJSON(null,e,Map);for(let[s,o]of n)i instanceof Map?i.has(s)||i.set(s,o):i instanceof Set?i.add(s):Object.prototype.hasOwnProperty.call(i,s)||Object.defineProperty(i,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}return i}toString(e,i){let r=this.value;if(r.items.length>1)return super.toString(e,i);this.value=r.items[0];let n=super.toString(e,i);return this.value=r,n}},RG={defaultType:U.Type.BLOCK_LITERAL,lineWidth:76},xG={trueStr:"true",falseStr:"false"},wG={asBigInt:!1},kG={nullStr:"null"},ta={defaultType:U.Type.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function L_(t,e,i){for(let{format:r,test:n,resolve:s}of e)if(n){let o=t.match(n);if(o){let a=s.apply(null,o);return a instanceof vi||(a=new vi(a)),r&&(a.format=r),a}}return i&&(t=i(t)),new vi(t)}var GS="flow",F_="block",wp="quoted",BS=(t,e)=>{let i=t[e+1];for(;i===" "||i==="	";){do i=t[e+=1];while(i&&i!==`
`);i=t[e+1]}return e};function Fp(t,e,i,{indentAtStart:r,lineWidth:n=80,minContentWidth:s=20,onFold:o,onOverflow:a}){if(!n||n<0)return t;let l=Math.max(1+s,1+n-e.length);if(t.length<=l)return t;let u=[],c={},f=n-e.length;typeof r=="number"&&(r>n-Math.max(2,s)?u.push(0):f=n-r);let d,h,p=!1,y=-1,v=-1,b=-1;i===F_&&(y=BS(t,y),y!==-1&&(f=y+l));for(let C;C=t[y+=1];){if(i===wp&&C==="\\"){switch(v=y,t[y+1]){case"x":y+=3;break;case"u":y+=5;break;case"U":y+=9;break;default:y+=1}b=y}if(C===`
`)i===F_&&(y=BS(t,y)),f=y+l,d=void 0;else{if(C===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){let q=t[y+1];q&&q!==" "&&q!==`
`&&q!=="	"&&(d=y)}if(y>=f)if(d)u.push(d),f=d+l,d=void 0;else if(i===wp){for(;h===" "||h==="	";)h=C,C=t[y+=1],p=!0;let q=y>b+1?y-2:v-1;if(c[q])return t;u.push(q),c[q]=!0,f=q+l,d=void 0}else p=!0}h=C}if(p&&a&&a(),u.length===0)return t;o&&o();let I=t.slice(0,u[0]);for(let C=0;C<u.length;++C){let q=u[C],K=u[C+1]||t.length;q===0?I=`
${e}${t.slice(0,K)}`:(i===wp&&c[q]&&(I+=`${t[q]}\\`),I+=`
${e}${t.slice(q+1,K)}`)}return I}var O_=({indentAtStart:t})=>t?Object.assign({indentAtStart:t},ta.fold):ta.fold,Lp=t=>/^(%|---|\.\.\.)/m.test(t);function DG(t,e,i){if(!e||e<0)return!1;let r=e-i,n=t.length;if(n<=r)return!1;for(let s=0,o=0;s<n;++s)if(t[s]===`
`){if(s-o>r)return!0;if(o=s+1,n-o<=r)return!1}return!0}function ea(t,e){let{implicitKey:i}=e,{jsonEncoding:r,minMultiLineLength:n}=ta.doubleQuoted,s=JSON.stringify(t);if(r)return s;let o=e.indent||(Lp(t)?"  ":""),a="",l=0;for(let u=0,c=s[u];c;c=s[++u])if(c===" "&&s[u+1]==="\\"&&s[u+2]==="n"&&(a+=s.slice(l,u)+"\\ ",u+=1,l=u,c="\\"),c==="\\")switch(s[u+1]){case"u":{a+=s.slice(l,u);let f=s.substr(u+2,4);switch(f){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:f.substr(0,2)==="00"?a+="\\x"+f.substr(2):a+=s.substr(u,6)}u+=5,l=u+1}break;case"n":if(i||s[u+2]==='"'||s.length<n)u+=1;else{for(a+=s.slice(l,u)+`

`;s[u+2]==="\\"&&s[u+3]==="n"&&s[u+4]!=='"';)a+=`
`,u+=2;a+=o,s[u+2]===" "&&(a+="\\"),u+=1,l=u+1}break;default:u+=1}return a=l?a+s.slice(l):s,i?a:Fp(a,o,wp,O_(e))}function HS(t,e){if(e.implicitKey){if(/\n/.test(t))return ea(t,e)}else if(/[ \t]\n|\n[ \t]/.test(t))return ea(t,e);let i=e.indent||(Lp(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${i}`)+"'";return e.implicitKey?r:Fp(r,i,GS,O_(e))}function kp({comment:t,type:e,value:i},r,n,s){if(/\n[\t ]+$/.test(i)||/^\s*$/.test(i))return ea(i,r);let o=r.indent||(r.forceBlockIndent||Lp(i)?"  ":""),a=o?"2":"1",l=e===U.Type.BLOCK_FOLDED?!1:e===U.Type.BLOCK_LITERAL?!0:!DG(i,ta.fold.lineWidth,o.length),u=l?"|":">";if(!i)return u+`
`;let c="",f="";if(i=i.replace(/[\n\t ]*$/,h=>{let p=h.indexOf(`
`);return p===-1?u+="-":(i===h||p!==h.length-1)&&(u+="+",s&&s()),f=h.replace(/\n$/,""),""}).replace(/^[\n ]*/,h=>{h.indexOf(" ")!==-1&&(u+=a);let p=h.match(/ +$/);return p?(c=h.slice(0,-p[0].length),p[0]):(c=h,"")}),f&&(f=f.replace(/\n+(?!\n|$)/g,`$&${o}`)),c&&(c=c.replace(/\n+/g,`$&${o}`)),t&&(u+=" #"+t.replace(/ ?[\r\n]+/g," "),n&&n()),!i)return`${u}${a}
${o}${f}`;if(l)return i=i.replace(/\n+/g,`$&${o}`),`${u}
${o}${c}${i}${f}`;i=i.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${o}`);let d=Fp(`${c}${i}${f}`,o,F_,ta.fold);return`${u}
${o}${d}`}function FG(t,e,i,r){let{comment:n,type:s,value:o}=t,{actualString:a,implicitKey:l,indent:u,inFlow:c}=e;if(l&&/[\n[\]{},]/.test(o)||c&&/[[\]{},]/.test(o))return ea(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return l||c||o.indexOf(`
`)===-1?o.indexOf('"')!==-1&&o.indexOf("'")===-1?HS(o,e):ea(o,e):kp(t,e,i,r);if(!l&&!c&&s!==U.Type.PLAIN&&o.indexOf(`
`)!==-1)return kp(t,e,i,r);if(u===""&&Lp(o))return e.forceBlockIndent=!0,kp(t,e,i,r);let f=o.replace(/\n+/g,`$&
${u}`);if(a){let{tags:h}=e.doc.schema;if(typeof L_(f,h,h.scalarFallback).value!="string")return ea(o,e)}let d=l?f:Fp(f,u,GS,O_(e));return n&&!c&&(d.indexOf(`
`)!==-1||n.indexOf(`
`)!==-1)?(i&&i(),EG(d,u,n)):d}function LG(t,e,i,r){let{defaultType:n}=ta,{implicitKey:s,inFlow:o}=e,{type:a,value:l}=t;typeof l!="string"&&(l=String(l),t=Object.assign({},t,{value:l}));let u=f=>{switch(f){case U.Type.BLOCK_FOLDED:case U.Type.BLOCK_LITERAL:return kp(t,e,i,r);case U.Type.QUOTE_DOUBLE:return ea(l,e);case U.Type.QUOTE_SINGLE:return HS(l,e);case U.Type.PLAIN:return FG(t,e,i,r);default:return null}};(a!==U.Type.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(l)||(s||o)&&(a===U.Type.BLOCK_FOLDED||a===U.Type.BLOCK_LITERAL))&&(a=U.Type.QUOTE_DOUBLE);let c=u(a);if(c===null&&(c=u(n),c===null))throw new Error(`Unsupported default string type ${n}`);return c}function OG({format:t,minFractionDigits:e,tag:i,value:r}){if(typeof r=="bigint")return String(r);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let n=JSON.stringify(r);if(!t&&e&&(!i||i==="tag:yaml.org,2002:float")&&/^\d/.test(n)){let s=n.indexOf(".");s<0&&(s=n.length,n+=".");let o=e-(n.length-s-1);for(;o-- >0;)n+="0"}return n}function WS(t,e){let i,r;switch(e.type){case U.Type.FLOW_MAP:i="}",r="flow map";break;case U.Type.FLOW_SEQ:i="]",r="flow sequence";break;default:t.push(new U.YAMLSemanticError(e,"Not a flow collection!?"));return}let n;for(let s=e.items.length-1;s>=0;--s){let o=e.items[s];if(!o||o.type!==U.Type.COMMENT){n=o;break}}if(n&&n.char!==i){let s=`Expected ${r} to end with ${i}`,o;typeof n.offset=="number"?(o=new U.YAMLSemanticError(e,s),o.offset=n.offset+1):(o=new U.YAMLSemanticError(n,s),n.range&&n.range.end&&(o.offset=n.range.end-n.range.start)),t.push(o)}}function YS(t,e){let i=e.context.src[e.range.start-1];if(i!==`
`&&i!=="	"&&i!==" "){let r="Comments must be separated from other tokens by white space characters";t.push(new U.YAMLSemanticError(e,r))}}function KS(t,e){let i=String(e),r=i.substr(0,8)+"..."+i.substr(-8);return new U.YAMLSemanticError(t,`The "${r}" key is too long`)}function $S(t,e){for(let{afterKey:i,before:r,comment:n}of e){let s=t.items[r];s?(i&&s.value&&(s=s.value),n===void 0?(i||!s.commentBefore)&&(s.spaceBefore=!0):s.commentBefore?s.commentBefore+=`
`+n:s.commentBefore=n):n!==void 0&&(t.comment?t.comment+=`
`+n:t.comment=n)}}function M_(t,e){let i=e.strValue;return i?typeof i=="string"?i:(i.errors.forEach(r=>{r.source||(r.source=e),t.errors.push(r)}),i.str):""}function MG(t,e){let{handle:i,suffix:r}=e.tag,n=t.tagPrefixes.find(s=>s.handle===i);if(!n){let s=t.getDefaults().tagPrefixes;if(s&&(n=s.find(o=>o.handle===i)),!n)throw new U.YAMLSemanticError(e,`The ${i} tag handle is non-default and was not declared.`)}if(!r)throw new U.YAMLSemanticError(e,`The ${i} tag has no suffix.`);if(i==="!"&&(t.version||t.options.version)==="1.0"){if(r[0]==="^")return t.warnings.push(new U.YAMLWarning(e,"YAML 1.0 ^ tag expansion is not supported")),r;if(/[:/]/.test(r)){let s=r.match(/^([a-z0-9-]+)\/(.*)/i);return s?`tag:${s[1]}.yaml.org,2002:${s[2]}`:`tag:${r}`}}return n.prefix+decodeURIComponent(r)}function qG(t,e){let{tag:i,type:r}=e,n=!1;if(i){let{handle:s,suffix:o,verbatim:a}=i;if(a){if(a!=="!"&&a!=="!!")return a;let l=`Verbatim tags aren't resolved, so ${a} is invalid.`;t.errors.push(new U.YAMLSemanticError(e,l))}else if(s==="!"&&!o)n=!0;else try{return MG(t,e)}catch(l){t.errors.push(l)}}switch(r){case U.Type.BLOCK_FOLDED:case U.Type.BLOCK_LITERAL:case U.Type.QUOTE_DOUBLE:case U.Type.QUOTE_SINGLE:return U.defaultTags.STR;case U.Type.FLOW_MAP:case U.Type.MAP:return U.defaultTags.MAP;case U.Type.FLOW_SEQ:case U.Type.SEQ:return U.defaultTags.SEQ;case U.Type.PLAIN:return n?U.defaultTags.STR:null;default:return null}}function VS(t,e,i){let{tags:r}=t.schema,n=[];for(let o of r)if(o.tag===i)if(o.test)n.push(o);else{let a=o.resolve(t,e);return a instanceof Wt?a:new vi(a)}let s=M_(t,e);return typeof s=="string"&&n.length>0?L_(s,n,r.scalarFallback):null}function BG({type:t}){switch(t){case U.Type.FLOW_MAP:case U.Type.MAP:return U.defaultTags.MAP;case U.Type.FLOW_SEQ:case U.Type.SEQ:return U.defaultTags.SEQ;default:return U.defaultTags.STR}}function VG(t,e,i){try{let r=VS(t,e,i);if(r)return i&&e.tag&&(r.tag=i),r}catch(r){return r.source||(r.source=e),t.errors.push(r),null}try{let r=BG(e);if(!r)throw new Error(`The tag ${i} is unavailable`);let n=`The tag ${i} is unavailable, falling back to ${r}`;t.warnings.push(new U.YAMLWarning(e,n));let s=VS(t,e,r);return s.tag=i,s}catch(r){let n=new U.YAMLReferenceError(e,r.message);return n.stack=r.stack,t.errors.push(n),null}}var UG=t=>{if(!t)return!1;let{type:e}=t;return e===U.Type.MAP_KEY||e===U.Type.MAP_VALUE||e===U.Type.SEQ_ITEM};function jG(t,e){let i={before:[],after:[]},r=!1,n=!1,s=UG(e.context.parent)?e.context.parent.props.concat(e.props):e.props;for(let{start:o,end:a}of s)switch(e.context.src[o]){case U.Char.COMMENT:{if(!e.commentHasRequiredWhitespace(o)){let f="Comments must be separated from other tokens by white space characters";t.push(new U.YAMLSemanticError(e,f))}let{header:l,valueRange:u}=e;(u&&(o>u.start||l&&o>l.start)?i.after:i.before).push(e.context.src.slice(o+1,a));break}case U.Char.ANCHOR:if(r){let l="A node can have at most one anchor";t.push(new U.YAMLSemanticError(e,l))}r=!0;break;case U.Char.TAG:if(n){let l="A node can have at most one tag";t.push(new U.YAMLSemanticError(e,l))}n=!0;break}return{comments:i,hasAnchor:r,hasTag:n}}function GG(t,e){let{anchors:i,errors:r,schema:n}=t;if(e.type===U.Type.ALIAS){let o=e.rawValue,a=i.getNode(o);if(!a){let u=`Aliased anchor not found: ${o}`;return r.push(new U.YAMLReferenceError(e,u)),null}let l=new as(a);return i._cstAliases.push(l),l}let s=qG(t,e);if(s)return VG(t,e,s);if(e.type!==U.Type.PLAIN){let o=`Failed to resolve ${e.type} node here`;return r.push(new U.YAMLSyntaxError(e,o)),null}try{let o=M_(t,e);return L_(o,n.tags,n.tags.scalarFallback)}catch(o){return o.source||(o.source=e),r.push(o),null}}function ro(t,e){if(!e)return null;e.error&&t.errors.push(e.error);let{comments:i,hasAnchor:r,hasTag:n}=jG(t.errors,e);if(r){let{anchors:o}=t,a=e.anchor,l=o.getNode(a);l&&(o.map[o.newName(a)]=l),o.map[a]=e}if(e.type===U.Type.ALIAS&&(r||n)){let o="An alias node must not specify any properties";t.errors.push(new U.YAMLSemanticError(e,o))}let s=GG(t,e);if(s){s.range=[e.range.start,e.range.end],t.options.keepCstNodes&&(s.cstNode=e),t.options.keepNodeTypes&&(s.type=e.type);let o=i.before.join(`
`);o&&(s.commentBefore=s.commentBefore?`${s.commentBefore}
${o}`:o);let a=i.after.join(`
`);a&&(s.comment=s.comment?`${s.comment}
${a}`:a)}return e.resolved=s}function HG(t,e){if(e.type!==U.Type.MAP&&e.type!==U.Type.FLOW_MAP){let o=`A ${e.type} node cannot be resolved as a mapping`;return t.errors.push(new U.YAMLSyntaxError(e,o)),null}let{comments:i,items:r}=e.type===U.Type.FLOW_MAP?$G(t,e):KG(t,e),n=new Yu;n.items=r,$S(n,i);let s=!1;for(let o=0;o<r.length;++o){let{key:a}=r[o];if(a instanceof Wt&&(s=!0),t.schema.merge&&a&&a.value===jS){r[o]=new Dp(r[o]);let l=r[o].value.items,u=null;l.some(c=>{if(c instanceof as){let{type:f}=c.source;return f===U.Type.MAP||f===U.Type.FLOW_MAP?!1:u="Merge nodes aliases can only point to maps"}return u="Merge nodes can only have Alias nodes as values"}),u&&t.errors.push(new U.YAMLSemanticError(e,u))}else for(let l=o+1;l<r.length;++l){let{key:u}=r[l];if(a===u||a&&u&&Object.prototype.hasOwnProperty.call(a,"value")&&a.value===u.value){let c=`Map keys must be unique; "${a}" is repeated`;t.errors.push(new U.YAMLSemanticError(e,c));break}}}if(s&&!t.options.mapAsMap){let o="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new U.YAMLWarning(e,o))}return e.resolved=n,n}var WG=({context:{lineStart:t,node:e,src:i},props:r})=>{if(r.length===0)return!1;let{start:n}=r[0];if(e&&n>e.valueRange.start||i[n]!==U.Char.COMMENT)return!1;for(let s=t;s<n;++s)if(i[s]===`
`)return!1;return!0};function YG(t,e){if(!WG(t))return;let i=t.getPropValue(0,U.Char.COMMENT,!0),r=!1,n=e.value.commentBefore;if(n&&n.startsWith(i))e.value.commentBefore=n.substr(i.length+1),r=!0;else{let s=e.value.comment;!t.node&&s&&s.startsWith(i)&&(e.value.comment=s.substr(i.length+1),r=!0)}r&&(e.comment=i)}function KG(t,e){let i=[],r=[],n,s=null;for(let o=0;o<e.items.length;++o){let a=e.items[o];switch(a.type){case U.Type.BLANK_LINE:i.push({afterKey:!!n,before:r.length});break;case U.Type.COMMENT:i.push({afterKey:!!n,before:r.length,comment:a.comment});break;case U.Type.MAP_KEY:n!==void 0&&r.push(new rt(n)),a.error&&t.errors.push(a.error),n=ro(t,a.node),s=null;break;case U.Type.MAP_VALUE:{if(n===void 0&&(n=null),a.error&&t.errors.push(a.error),!a.context.atLineStart&&a.node&&a.node.type===U.Type.MAP&&!a.node.context.atLineStart){let c="Nested mappings are not allowed in compact mappings";t.errors.push(new U.YAMLSemanticError(a.node,c))}let l=a.node;if(!l&&a.props.length>0){l=new U.PlainValue(U.Type.PLAIN,[]),l.context={parent:a,src:a.context.src};let c=a.range.start+1;if(l.range={start:c,end:c},l.valueRange={start:c,end:c},typeof a.range.origStart=="number"){let f=a.range.origStart+1;l.range.origStart=l.range.origEnd=f,l.valueRange.origStart=l.valueRange.origEnd=f}}let u=new rt(n,ro(t,l));YG(a,u),r.push(u),n&&typeof s=="number"&&a.range.start>s+1024&&t.errors.push(KS(e,n)),n=void 0,s=null}break;default:n!==void 0&&r.push(new rt(n)),n=ro(t,a),s=a.range.start,a.error&&t.errors.push(a.error);e:for(let l=o+1;;++l){let u=e.items[l];switch(u&&u.type){case U.Type.BLANK_LINE:case U.Type.COMMENT:continue e;case U.Type.MAP_VALUE:break e;default:{let c="Implicit map keys need to be followed by map values";t.errors.push(new U.YAMLSemanticError(a,c));break e}}}if(a.valueRangeContainsNewline){let l="Implicit map keys need to be on a single line";t.errors.push(new U.YAMLSemanticError(a,l))}}}return n!==void 0&&r.push(new rt(n)),{comments:i,items:r}}function $G(t,e){let i=[],r=[],n,s=!1,o="{";for(let a=0;a<e.items.length;++a){let l=e.items[a];if(typeof l.char=="string"){let{char:u,offset:c}=l;if(u==="?"&&n===void 0&&!s){s=!0,o=":";continue}if(u===":"){if(n===void 0&&(n=null),o===":"){o=",";continue}}else if(s&&(n===void 0&&u!==","&&(n=null),s=!1),n!==void 0&&(r.push(new rt(n)),n=void 0,u===",")){o=":";continue}if(u==="}"){if(a===e.items.length-1)continue}else if(u===o){o=":";continue}let f=`Flow map contains an unexpected ${u}`,d=new U.YAMLSyntaxError(e,f);d.offset=c,t.errors.push(d)}else l.type===U.Type.BLANK_LINE?i.push({afterKey:!!n,before:r.length}):l.type===U.Type.COMMENT?(YS(t.errors,l),i.push({afterKey:!!n,before:r.length,comment:l.comment})):n===void 0?(o===","&&t.errors.push(new U.YAMLSemanticError(l,"Separator , missing in flow map")),n=ro(t,l)):(o!==","&&t.errors.push(new U.YAMLSemanticError(l,"Indicator : missing in flow map entry")),r.push(new rt(n,ro(t,l))),n=void 0,s=!1)}return WS(t.errors,e),n!==void 0&&r.push(new rt(n)),{comments:i,items:r}}function zG(t,e){if(e.type!==U.Type.SEQ&&e.type!==U.Type.FLOW_SEQ){let s=`A ${e.type} node cannot be resolved as a sequence`;return t.errors.push(new U.YAMLSyntaxError(e,s)),null}let{comments:i,items:r}=e.type===U.Type.FLOW_SEQ?XG(t,e):QG(t,e),n=new io;if(n.items=r,$S(n,i),!t.options.mapAsMap&&r.some(s=>s instanceof rt&&s.key instanceof Wt)){let s="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new U.YAMLWarning(e,s))}return e.resolved=n,n}function QG(t,e){let i=[],r=[];for(let n=0;n<e.items.length;++n){let s=e.items[n];switch(s.type){case U.Type.BLANK_LINE:i.push({before:r.length});break;case U.Type.COMMENT:i.push({comment:s.comment,before:r.length});break;case U.Type.SEQ_ITEM:if(s.error&&t.errors.push(s.error),r.push(ro(t,s.node)),s.hasProps){let o="Sequence items cannot have tags or anchors before the - indicator";t.errors.push(new U.YAMLSemanticError(s,o))}break;default:s.error&&t.errors.push(s.error),t.errors.push(new U.YAMLSyntaxError(s,`Unexpected ${s.type} node in sequence`))}}return{comments:i,items:r}}function XG(t,e){let i=[],r=[],n=!1,s,o=null,a="[",l=null;for(let u=0;u<e.items.length;++u){let c=e.items[u];if(typeof c.char=="string"){let{char:f,offset:d}=c;if(f!==":"&&(n||s!==void 0)&&(n&&s===void 0&&(s=a?r.pop():null),r.push(new rt(s)),n=!1,s=void 0,o=null),f===a)a=null;else if(!a&&f==="?")n=!0;else if(a!=="["&&f===":"&&s===void 0){if(a===","){if(s=r.pop(),s instanceof rt){let h="Chaining flow sequence pairs is invalid",p=new U.YAMLSemanticError(e,h);p.offset=d,t.errors.push(p)}if(!n&&typeof o=="number"){let h=c.range?c.range.start:c.offset;h>o+1024&&t.errors.push(KS(e,s));let{src:p}=l.context;for(let y=o;y<h;++y)if(p[y]===`
`){let v="Implicit keys of flow sequence pairs need to be on a single line";t.errors.push(new U.YAMLSemanticError(l,v));break}}}else s=null;o=null,n=!1,a=null}else if(a==="["||f!=="]"||u<e.items.length-1){let h=`Flow sequence contains an unexpected ${f}`,p=new U.YAMLSyntaxError(e,h);p.offset=d,t.errors.push(p)}}else if(c.type===U.Type.BLANK_LINE)i.push({before:r.length});else if(c.type===U.Type.COMMENT)YS(t.errors,c),i.push({comment:c.comment,before:r.length});else{if(a){let d=`Expected a ${a} in flow sequence`;t.errors.push(new U.YAMLSemanticError(c,d))}let f=ro(t,c);s===void 0?(r.push(f),l=c):(r.push(new rt(s,f)),s=void 0),o=c.range.start,a=","}}return WS(t.errors,e),s!==void 0&&r.push(new rt(s)),{comments:i,items:r}}bt.Alias=as;bt.Collection=Wt;bt.Merge=Dp;bt.Node=yr;bt.Pair=rt;bt.Scalar=vi;bt.YAMLMap=Yu;bt.YAMLSeq=io;bt.addComment=Ml;bt.binaryOptions=RG;bt.boolOptions=xG;bt.findPair=Wu;bt.intOptions=wG;bt.isEmptyPath=US;bt.nullOptions=kG;bt.resolveMap=HG;bt.resolveNode=ro;bt.resolveSeq=zG;bt.resolveString=M_;bt.strOptions=ta;bt.stringifyNumber=OG;bt.stringifyString=LG;bt.toJSON=to});var Op=A(_n=>{"use strict";var Tr=Zs(),Be=ql(),JG={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve:(t,e)=>{let i=Be.resolveString(t,e);if(typeof Buffer=="function")return Buffer.from(i,"base64");if(typeof atob=="function"){let r=atob(i.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let s=0;s<r.length;++s)n[s]=r.charCodeAt(s);return n}else{let r="This environment does not support reading binary tags; either Buffer or atob is required";return t.errors.push(new Tr.YAMLReferenceError(e,r)),null}},options:Be.binaryOptions,stringify:({comment:t,type:e,value:i},r,n,s)=>{let o;if(typeof Buffer=="function")o=i instanceof Buffer?i.toString("base64"):Buffer.from(i.buffer).toString("base64");else if(typeof btoa=="function"){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);o=btoa(a)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=Be.binaryOptions.defaultType),e===Tr.Type.QUOTE_DOUBLE)i=o;else{let{lineWidth:a}=Be.binaryOptions,l=Math.ceil(o.length/a),u=new Array(l);for(let c=0,f=0;c<l;++c,f+=a)u[c]=o.substr(f,a);i=u.join(e===Tr.Type.BLOCK_LITERAL?`
`:" ")}return Be.stringifyString({comment:t,type:e,value:i},r,n,s)}};function QS(t,e){let i=Be.resolveSeq(t,e);for(let r=0;r<i.items.length;++r){let n=i.items[r];if(!(n instanceof Be.Pair)){if(n instanceof Be.YAMLMap){if(n.items.length>1){let o="Each pair must have its own sequence indicator";throw new Tr.YAMLSemanticError(e,o)}let s=n.items[0]||new Be.Pair;n.commentBefore&&(s.commentBefore=s.commentBefore?`${n.commentBefore}
${s.commentBefore}`:n.commentBefore),n.comment&&(s.comment=s.comment?`${n.comment}
${s.comment}`:n.comment),n=s}i.items[r]=n instanceof Be.Pair?n:new Be.Pair(n)}}return i}function XS(t,e,i){let r=new Be.YAMLSeq(t);r.tag="tag:yaml.org,2002:pairs";for(let n of e){let s,o;if(Array.isArray(n))if(n.length===2)s=n[0],o=n[1];else throw new TypeError(`Expected [key, value] tuple: ${n}`);else if(n&&n instanceof Object){let l=Object.keys(n);if(l.length===1)s=l[0],o=n[s];else throw new TypeError(`Expected { key: value } tuple: ${n}`)}else s=n;let a=t.createPair(s,o,i);r.items.push(a)}return r}var ZG={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:QS,createNode:XS},no=class extends Be.YAMLSeq{constructor(){super(),Tr._defineProperty(this,"add",Be.YAMLMap.prototype.add.bind(this)),Tr._defineProperty(this,"delete",Be.YAMLMap.prototype.delete.bind(this)),Tr._defineProperty(this,"get",Be.YAMLMap.prototype.get.bind(this)),Tr._defineProperty(this,"has",Be.YAMLMap.prototype.has.bind(this)),Tr._defineProperty(this,"set",Be.YAMLMap.prototype.set.bind(this)),this.tag=no.tag}toJSON(e,i){let r=new Map;i&&i.onCreate&&i.onCreate(r);for(let n of this.items){let s,o;if(n instanceof Be.Pair?(s=Be.toJSON(n.key,"",i),o=Be.toJSON(n.value,s,i)):s=Be.toJSON(n,"",i),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}};Tr._defineProperty(no,"tag","tag:yaml.org,2002:omap");function eH(t,e){let i=QS(t,e),r=[];for(let{key:n}of i.items)if(n instanceof Be.Scalar)if(r.includes(n.value)){let s="Ordered maps must not include duplicate keys";throw new Tr.YAMLSemanticError(e,s)}else r.push(n.value);return Object.assign(new no,i)}function tH(t,e,i){let r=XS(t,e,i),n=new no;return n.items=r.items,n}var iH={identify:t=>t instanceof Map,nodeClass:no,default:!1,tag:"tag:yaml.org,2002:omap",resolve:eH,createNode:tH},so=class extends Be.YAMLMap{constructor(){super(),this.tag=so.tag}add(e){let i=e instanceof Be.Pair?e:new Be.Pair(e);Be.findPair(this.items,i.key)||this.items.push(i)}get(e,i){let r=Be.findPair(this.items,e);return!i&&r instanceof Be.Pair?r.key instanceof Be.Scalar?r.key.value:r.key:r}set(e,i){if(typeof i!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof i}`);let r=Be.findPair(this.items,e);r&&!i?this.items.splice(this.items.indexOf(r),1):!r&&i&&this.items.push(new Be.Pair(e))}toJSON(e,i){return super.toJSON(e,i,Set)}toString(e,i,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return super.toString(e,i,r);throw new Error("Set items must all have null values")}};Tr._defineProperty(so,"tag","tag:yaml.org,2002:set");function rH(t,e){let i=Be.resolveMap(t,e);if(!i.hasAllNullValues())throw new Tr.YAMLSemanticError(e,"Set items must all have null values");return Object.assign(new so,i)}function nH(t,e,i){let r=new so;for(let n of e)r.items.push(t.createPair(n,null,i));return r}var sH={identify:t=>t instanceof Set,nodeClass:so,default:!1,tag:"tag:yaml.org,2002:set",resolve:rH,createNode:nH},q_=(t,e)=>{let i=e.split(":").reduce((r,n)=>r*60+Number(n),0);return t==="-"?-i:i},JS=({value:t})=>{if(isNaN(t)||!isFinite(t))return Be.stringifyNumber(t);let e="";t<0&&(e="-",t=Math.abs(t));let i=[t%60];return t<60?i.unshift(0):(t=Math.round((t-i[0])/60),i.unshift(t%60),t>=60&&(t=Math.round((t-i[0])/60),i.unshift(t))),e+i.map(r=>r<10?"0"+String(r):String(r)).join(":").replace(/000000\d*$/,"")},oH={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:(t,e,i)=>q_(e,i.replace(/_/g,"")),stringify:JS},aH={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:(t,e,i)=>q_(e,i.replace(/_/g,"")),stringify:JS},lH={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:(t,e,i,r,n,s,o,a,l)=>{a&&(a=(a+"00").substr(1,3));let u=Date.UTC(e,i-1,r,n||0,s||0,o||0,a||0);if(l&&l!=="Z"){let c=q_(l[0],l.slice(1));Math.abs(c)<30&&(c*=60),u-=6e4*c}return new Date(u)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};function B_(t){let e=typeof process<"u"&&process.env||{};return t?typeof YAML_SILENCE_DEPRECATION_WARNINGS<"u"?!YAML_SILENCE_DEPRECATION_WARNINGS:!e.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS<"u"?!YAML_SILENCE_WARNINGS:!e.YAML_SILENCE_WARNINGS}function V_(t,e){if(B_(!1)){let i=typeof process<"u"&&process.emitWarning;i?i(t,e):console.warn(e?`${e}: ${t}`:t)}}function uH(t){if(B_(!0)){let e=t.replace(/.*yaml[/\\]/i,"").replace(/\.js$/,"").replace(/\\/g,"/");V_(`The endpoint 'yaml/${e}' will be removed in a future release.`,"DeprecationWarning")}}var zS={};function cH(t,e){if(!zS[t]&&B_(!0)){zS[t]=!0;let i=`The option '${t}' will be removed in a future release`;i+=e?`, use '${e}' instead.`:".",V_(i,"DeprecationWarning")}}_n.binary=JG;_n.floatTime=aH;_n.intTime=oH;_n.omap=iH;_n.pairs=ZG;_n.set=sH;_n.timestamp=lH;_n.warn=V_;_n.warnFileDeprecation=uH;_n.warnOptionDeprecation=cH});var jp=A(fP=>{"use strict";var Bp=Zs(),ye=ql(),Di=Op();function fH(t,e,i){let r=new ye.YAMLMap(t);if(e instanceof Map)for(let[n,s]of e)r.items.push(t.createPair(n,s,i));else if(e&&typeof e=="object")for(let n of Object.keys(e))r.items.push(t.createPair(n,e[n],i));return typeof t.sortMapEntries=="function"&&r.items.sort(t.sortMapEntries),r}var $u={createNode:fH,default:!0,nodeClass:ye.YAMLMap,tag:"tag:yaml.org,2002:map",resolve:ye.resolveMap};function dH(t,e,i){let r=new ye.YAMLSeq(t);if(e&&e[Symbol.iterator])for(let n of e){let s=t.createNode(n,i.wrapScalars,null,i);r.items.push(s)}return r}var Vp={createNode:dH,default:!0,nodeClass:ye.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:ye.resolveSeq},pH={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:ye.resolveString,stringify(t,e,i,r){return e=Object.assign({actualString:!0},e),ye.stringifyString(t,e,i,r)},options:ye.strOptions},j_=[$u,Vp,pH],Up=t=>typeof t=="bigint"||Number.isInteger(t),G_=(t,e,i)=>ye.intOptions.asBigInt?BigInt(t):parseInt(e,i);function tP(t,e,i){let{value:r}=t;return Up(r)&&r>=0?i+r.toString(e):ye.stringifyNumber(t)}var iP={identify:t=>t==null,createNode:(t,e,i)=>i.wrapScalars?new ye.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:ye.nullOptions,stringify:()=>ye.nullOptions.nullStr},rP={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>t[0]==="t"||t[0]==="T",options:ye.boolOptions,stringify:({value:t})=>t?ye.boolOptions.trueStr:ye.boolOptions.falseStr},nP={identify:t=>Up(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:(t,e)=>G_(t,e,8),options:ye.intOptions,stringify:t=>tP(t,8,"0o")},sP={identify:Up,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:t=>G_(t,t,10),options:ye.intOptions,stringify:ye.stringifyNumber},oP={identify:t=>Up(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:(t,e)=>G_(t,e,16),options:ye.intOptions,stringify:t=>tP(t,16,"0x")},aP={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ye.stringifyNumber},lP={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},uP={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve(t,e,i){let r=e||i,n=new ye.Scalar(parseFloat(t));return r&&r[r.length-1]==="0"&&(n.minFractionDigits=r.length),n},stringify:ye.stringifyNumber},hH=j_.concat([iP,rP,nP,sP,oP,aP,lP,uP]),ZS=t=>typeof t=="bigint"||Number.isInteger(t),Mp=({value:t})=>JSON.stringify(t),cP=[$u,Vp,{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:ye.resolveString,stringify:Mp},{identify:t=>t==null,createNode:(t,e,i)=>i.wrapScalars?new ye.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Mp},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:Mp},{identify:ZS,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:t=>ye.intOptions.asBigInt?BigInt(t):parseInt(t,10),stringify:({value:t})=>ZS(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Mp}];cP.scalarFallback=t=>{throw new SyntaxError(`Unresolved plain scalar ${JSON.stringify(t)}`)};var eP=({value:t})=>t?ye.boolOptions.trueStr:ye.boolOptions.falseStr,Ku=t=>typeof t=="bigint"||Number.isInteger(t);function qp(t,e,i){let r=e.replace(/_/g,"");if(ye.intOptions.asBigInt){switch(i){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}let s=BigInt(r);return t==="-"?BigInt(-1)*s:s}let n=parseInt(r,i);return t==="-"?-1*n:n}function U_(t,e,i){let{value:r}=t;if(Ku(r)){let n=r.toString(e);return r<0?"-"+i+n.substr(1):i+n}return ye.stringifyNumber(t)}var mH=j_.concat([{identify:t=>t==null,createNode:(t,e,i)=>i.wrapScalars?new ye.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:ye.nullOptions,stringify:()=>ye.nullOptions.nullStr},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>!0,options:ye.boolOptions,stringify:eP},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>!1,options:ye.boolOptions,stringify:eP},{identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:(t,e,i)=>qp(e,i,2),stringify:t=>U_(t,2,"0b")},{identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:(t,e,i)=>qp(e,i,8),stringify:t=>U_(t,8,"0")},{identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:(t,e,i)=>qp(e,i,10),stringify:ye.stringifyNumber},{identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:(t,e,i)=>qp(e,i,16),stringify:t=>U_(t,16,"0x")},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ye.stringifyNumber},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve(t,e){let i=new ye.Scalar(parseFloat(t.replace(/_/g,"")));if(e){let r=e.replace(/_/g,"");r[r.length-1]==="0"&&(i.minFractionDigits=r.length)}return i},stringify:ye.stringifyNumber}],Di.binary,Di.omap,Di.pairs,Di.set,Di.intTime,Di.floatTime,Di.timestamp),gH={core:hH,failsafe:j_,json:cP,yaml11:mH},_H={binary:Di.binary,bool:rP,float:uP,floatExp:lP,floatNaN:aP,floatTime:Di.floatTime,int:sP,intHex:oP,intOct:nP,intTime:Di.intTime,map:$u,null:iP,omap:Di.omap,pairs:Di.pairs,seq:Vp,set:Di.set,timestamp:Di.timestamp};function yH(t,e,i){if(e){let r=i.filter(s=>s.tag===e),n=r.find(s=>!s.format)||r[0];if(!n)throw new Error(`Tag ${e} not found`);return n}return i.find(r=>(r.identify&&r.identify(t)||r.class&&t instanceof r.class)&&!r.format)}function TH(t,e,i){if(t instanceof ye.Node)return t;let{defaultPrefix:r,onTagObj:n,prevObjects:s,schema:o,wrapScalars:a}=i;e&&e.startsWith("!!")&&(e=r+e.slice(2));let l=yH(t,e,o.tags);if(!l){if(typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object")return a?new ye.Scalar(t):t;l=t instanceof Map?$u:t[Symbol.iterator]?Vp:$u}n&&(n(l),delete i.onTagObj);let u={value:void 0,node:void 0};if(t&&typeof t=="object"&&s){let c=s.get(t);if(c){let f=new ye.Alias(c);return i.aliasNodes.push(f),f}u.value=t,s.set(t,u)}return u.node=l.createNode?l.createNode(i.schema,t,i):a?new ye.Scalar(t):t,e&&u.node instanceof ye.Node&&(u.node.tag=e),u.node}function bH(t,e,i,r){let n=t[r.replace(/\W/g,"")];if(!n){let s=Object.keys(t).map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${r}"; use one of ${s}`)}if(Array.isArray(i))for(let s of i)n=n.concat(s);else typeof i=="function"&&(n=i(n.slice()));for(let s=0;s<n.length;++s){let o=n[s];if(typeof o=="string"){let a=e[o];if(!a){let l=Object.keys(e).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag "${o}"; use one of ${l}`)}n[s]=a}}return n}var IH=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,ia=class{constructor({customTags:e,merge:i,schema:r,sortMapEntries:n,tags:s}){this.merge=!!i,this.name=r,this.sortMapEntries=n===!0?IH:n||null,!e&&s&&Di.warnOptionDeprecation("tags","customTags"),this.tags=bH(gH,_H,e||s,r)}createNode(e,i,r,n){let s={defaultPrefix:ia.defaultPrefix,schema:this,wrapScalars:i},o=n?Object.assign(n,s):s;return TH(e,r,o)}createPair(e,i,r){r||(r={wrapScalars:!0});let n=this.createNode(e,r.wrapScalars,null,r),s=this.createNode(i,r.wrapScalars,null,r);return new ye.Pair(n,s)}};Bp._defineProperty(ia,"defaultPrefix",Bp.defaultTagPrefix);Bp._defineProperty(ia,"defaultTags",Bp.defaultTags);fP.Schema=ia});var mP=A(Wp=>{"use strict";var Fi=Zs(),Ie=ql(),dP=jp(),vH={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},NH={get binary(){return Ie.binaryOptions},set binary(t){Object.assign(Ie.binaryOptions,t)},get bool(){return Ie.boolOptions},set bool(t){Object.assign(Ie.boolOptions,t)},get int(){return Ie.intOptions},set int(t){Object.assign(Ie.intOptions,t)},get null(){return Ie.nullOptions},set null(t){Object.assign(Ie.nullOptions,t)},get str(){return Ie.strOptions},set str(t){Object.assign(Ie.strOptions,t)}},hP={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:Fi.defaultTagPrefix},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Fi.defaultTagPrefix}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Fi.defaultTagPrefix}]}};function pP(t,e){if((t.version||t.options.version)==="1.0"){let n=e.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(n)return"!"+n[1];let s=e.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return s?`!${s[1]}/${s[2]}`:`!${e.replace(/^tag:/,"")}`}let i=t.tagPrefixes.find(n=>e.indexOf(n.prefix)===0);if(!i){let n=t.getDefaults().tagPrefixes;i=n&&n.find(s=>e.indexOf(s.prefix)===0)}if(!i)return e[0]==="!"?e:`!<${e}>`;let r=e.substr(i.prefix.length).replace(/[!,[\]{}]/g,n=>({"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"})[n]);return i.handle+r}function SH(t,e){if(e instanceof Ie.Alias)return Ie.Alias;if(e.tag){let n=t.filter(s=>s.tag===e.tag);if(n.length>0)return n.find(s=>s.format===e.format)||n[0]}let i,r;if(e instanceof Ie.Scalar){r=e.value;let n=t.filter(s=>s.identify&&s.identify(r)||s.class&&r instanceof s.class);i=n.find(s=>s.format===e.format)||n.find(s=>!s.format)}else r=e,i=t.find(n=>n.nodeClass&&r instanceof n.nodeClass);if(!i){let n=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${n} value`)}return i}function PH(t,e,{anchors:i,doc:r}){let n=[],s=r.anchors.getName(t);return s&&(i[s]=t,n.push(`&${s}`)),t.tag?n.push(pP(r,t.tag)):e.default||n.push(pP(r,e.tag)),n.join(" ")}function Gp(t,e,i,r){let{anchors:n,schema:s}=e.doc,o;if(!(t instanceof Ie.Node)){let u={aliasNodes:[],onTagObj:c=>o=c,prevObjects:new Map};t=s.createNode(t,!0,null,u);for(let c of u.aliasNodes){c.source=c.source.node;let f=n.getName(c.source);f||(f=n.newName(),n.map[f]=c.source)}}if(t instanceof Ie.Pair)return t.toString(e,i,r);o||(o=SH(s.tags,t));let a=PH(t,o,e);a.length>0&&(e.indentAtStart=(e.indentAtStart||0)+a.length+1);let l=typeof o.stringify=="function"?o.stringify(t,e,i,r):t instanceof Ie.Scalar?Ie.stringifyString(t,e,i,r):t.toString(e,i,r);return a?t instanceof Ie.Scalar||l[0]==="{"||l[0]==="["?`${a} ${l}`:`${a}
${e.indent}${l}`:l}var zu=class{static validAnchorNode(e){return e instanceof Ie.Scalar||e instanceof Ie.YAMLSeq||e instanceof Ie.YAMLMap}constructor(e){Fi._defineProperty(this,"map",Object.create(null)),this.prefix=e}createAlias(e,i){return this.setAnchor(e,i),new Ie.Alias(e)}createMergePair(...e){let i=new Ie.Merge;return i.value.items=e.map(r=>{if(r instanceof Ie.Alias){if(r.source instanceof Ie.YAMLMap)return r}else if(r instanceof Ie.YAMLMap)return this.createAlias(r);throw new Error("Merge sources must be Map nodes or their Aliases")}),i}getName(e){let{map:i}=this;return Object.keys(i).find(r=>i[r]===e)}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);let i=Object.keys(this.map);for(let r=1;;++r){let n=`${e}${r}`;if(!i.includes(n))return n}}resolveNodes(){let{map:e,_cstAliases:i}=this;Object.keys(e).forEach(r=>{e[r]=e[r].resolved}),i.forEach(r=>{r.source=r.source.resolved}),delete this._cstAliases}setAnchor(e,i){if(e!=null&&!zu.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(i&&/[\x00-\x19\s,[\]{}]/.test(i))throw new Error("Anchor names must not contain whitespace or control characters");let{map:r}=this,n=e&&Object.keys(r).find(s=>r[s]===e);if(n)if(i)n!==i&&(delete r[n],r[i]=e);else return n;else{if(!i){if(!e)return null;i=this.newName()}r[i]=e}return i}},Hp=(t,e)=>{if(t&&typeof t=="object"){let{tag:i}=t;t instanceof Ie.Collection?(i&&(e[i]=!0),t.items.forEach(r=>Hp(r,e))):t instanceof Ie.Pair?(Hp(t.key,e),Hp(t.value,e)):t instanceof Ie.Scalar&&i&&(e[i]=!0)}return e},AH=t=>Object.keys(Hp(t,{}));function EH(t,e){let i={before:[],after:[]},r,n=!1;for(let s of e)if(s.valueRange){if(r!==void 0){let a="Document contains trailing content not separated by a ... or --- line";t.errors.push(new Fi.YAMLSyntaxError(s,a));break}let o=Ie.resolveNode(t,s);n&&(o.spaceBefore=!0,n=!1),r=o}else s.comment!==null?(r===void 0?i.before:i.after).push(s.comment):s.type===Fi.Type.BLANK_LINE&&(n=!0,r===void 0&&i.before.length>0&&!t.commentBefore&&(t.commentBefore=i.before.join(`
`),i.before=[]));if(t.contents=r||null,!r)t.comment=i.before.concat(i.after).join(`
`)||null;else{let s=i.before.join(`
`);if(s){let o=r instanceof Ie.Collection&&r.items[0]?r.items[0]:r;o.commentBefore=o.commentBefore?`${s}
${o.commentBefore}`:s}t.comment=i.after.join(`
`)||null}}function CH({tagPrefixes:t},e){let[i,r]=e.parameters;if(!i||!r){let n="Insufficient parameters given for %TAG directive";throw new Fi.YAMLSemanticError(e,n)}if(t.some(n=>n.handle===i)){let n="The %TAG directive must only be given at most once per handle in the same document.";throw new Fi.YAMLSemanticError(e,n)}return{handle:i,prefix:r}}function RH(t,e){let[i]=e.parameters;if(e.name==="YAML:1.0"&&(i="1.0"),!i){let r="Insufficient parameters given for %YAML directive";throw new Fi.YAMLSemanticError(e,r)}if(!hP[i]){let n=`Document will be parsed as YAML ${t.version||t.options.version} rather than YAML ${i}`;t.warnings.push(new Fi.YAMLWarning(e,n))}return i}function xH(t,e,i){let r=[],n=!1;for(let s of e){let{comment:o,name:a}=s;switch(a){case"TAG":try{t.tagPrefixes.push(CH(t,s))}catch(l){t.errors.push(l)}n=!0;break;case"YAML":case"YAML:1.0":if(t.version){let l="The %YAML directive must only be given at most once per document.";t.errors.push(new Fi.YAMLSemanticError(s,l))}try{t.version=RH(t,s)}catch(l){t.errors.push(l)}n=!0;break;default:if(a){let l=`YAML only supports %TAG and %YAML directives, and not %${a}`;t.warnings.push(new Fi.YAMLWarning(s,l))}}o&&r.push(o)}if(i&&!n&&(t.version||i.version||t.options.version)==="1.1"){let s=({handle:o,prefix:a})=>({handle:o,prefix:a});t.tagPrefixes=i.tagPrefixes.map(s),t.version=i.version}t.commentBefore=r.join(`
`)||null}function Bl(t){if(t instanceof Ie.Collection)return!0;throw new Error("Expected a YAML collection as document contents")}var ra=class{constructor(e){this.anchors=new zu(e.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=e,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}add(e){return Bl(this.contents),this.contents.add(e)}addIn(e,i){Bl(this.contents),this.contents.addIn(e,i)}delete(e){return Bl(this.contents),this.contents.delete(e)}deleteIn(e){return Ie.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):(Bl(this.contents),this.contents.deleteIn(e))}getDefaults(){return ra.defaults[this.version]||ra.defaults[this.options.version]||{}}get(e,i){return this.contents instanceof Ie.Collection?this.contents.get(e,i):void 0}getIn(e,i){return Ie.isEmptyPath(e)?!i&&this.contents instanceof Ie.Scalar?this.contents.value:this.contents:this.contents instanceof Ie.Collection?this.contents.getIn(e,i):void 0}has(e){return this.contents instanceof Ie.Collection?this.contents.has(e):!1}hasIn(e){return Ie.isEmptyPath(e)?this.contents!==void 0:this.contents instanceof Ie.Collection?this.contents.hasIn(e):!1}set(e,i){Bl(this.contents),this.contents.set(e,i)}setIn(e,i){Ie.isEmptyPath(e)?this.contents=i:(Bl(this.contents),this.contents.setIn(e,i))}setSchema(e,i){if(!e&&!i&&this.schema)return;typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(i)&&(this.options.customTags=i);let r=Object.assign({},this.getDefaults(),this.options);this.schema=new dP.Schema(r)}parse(e,i){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");let{directives:r=[],contents:n=[],directivesEndMarker:s,error:o,valueRange:a}=e;if(o&&(o.source||(o.source=this),this.errors.push(o)),xH(this,r,i),s&&(this.directivesEndMarker=!0),this.range=a?[a.start,a.end]:null,this.setSchema(),this.anchors._cstAliases=[],EH(this,n),this.anchors.resolveNodes(),this.options.prettyErrors){for(let l of this.errors)l instanceof Fi.YAMLError&&l.makePretty();for(let l of this.warnings)l instanceof Fi.YAMLError&&l.makePretty()}return this}listNonDefaultTags(){return AH(this.contents).filter(e=>e.indexOf(dP.Schema.defaultPrefix)!==0)}setTagPrefix(e,i){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(i){let r=this.tagPrefixes.find(n=>n.handle===e);r?r.prefix=i:this.tagPrefixes.push({handle:e,prefix:i})}else this.tagPrefixes=this.tagPrefixes.filter(r=>r.handle!==e)}toJSON(e,i){let{keepBlobsInJSON:r,mapAsMap:n,maxAliasCount:s}=this.options,o=r&&(typeof e!="string"||!(this.contents instanceof Ie.Scalar)),a={doc:this,indentStep:"  ",keep:o,mapAsMap:o&&!!n,maxAliasCount:s,stringify:Gp},l=Object.keys(this.anchors.map);l.length>0&&(a.anchors=new Map(l.map(c=>[this.anchors.map[c],{alias:[],aliasCount:0,count:1}])));let u=Ie.toJSON(this.contents,e,a);if(typeof i=="function"&&a.anchors)for(let{count:c,res:f}of a.anchors.values())i(f,c);return u}toString(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");let e=this.options.indent;if(!Number.isInteger(e)||e<=0){let l=JSON.stringify(e);throw new Error(`"indent" option must be a positive integer, not ${l}`)}this.setSchema();let i=[],r=!1;if(this.version){let l="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?l="%YAML:1.0":this.version==="1.1"&&(l="%YAML 1.1")),i.push(l),r=!0}let n=this.listNonDefaultTags();this.tagPrefixes.forEach(({handle:l,prefix:u})=>{n.some(c=>c.indexOf(u)===0)&&(i.push(`%TAG ${l} ${u}`),r=!0)}),(r||this.directivesEndMarker)&&i.push("---"),this.commentBefore&&((r||!this.directivesEndMarker)&&i.unshift(""),i.unshift(this.commentBefore.replace(/^/gm,"#")));let s={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:Gp},o=!1,a=null;if(this.contents){this.contents instanceof Ie.Node&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&i.push(""),this.contents.commentBefore&&i.push(this.contents.commentBefore.replace(/^/gm,"#")),s.forceBlockIndent=!!this.comment,a=this.contents.comment);let l=a?null:()=>o=!0,u=Gp(this.contents,s,()=>a=null,l);i.push(Ie.addComment(u,"",a))}else this.contents!==void 0&&i.push(Gp(this.contents,s));return this.comment&&((!o||a)&&i[i.length-1]!==""&&i.push(""),i.push(this.comment.replace(/^/gm,"#"))),i.join(`
`)+`
`}};Fi._defineProperty(ra,"defaults",hP);Wp.Document=ra;Wp.defaultOptions=vH;Wp.scalarOptions=NH});var yP=A(_P=>{"use strict";var H_=MS(),na=mP(),wH=jp(),kH=Zs(),DH=Op();ql();function FH(t,e=!0,i){i===void 0&&typeof e=="string"&&(i=e,e=!0);let r=Object.assign({},na.Document.defaults[na.defaultOptions.version],na.defaultOptions);return new wH.Schema(r).createNode(t,e,i)}var Vl=class extends na.Document{constructor(e){super(Object.assign({},na.defaultOptions,e))}};function LH(t,e){let i=[],r;for(let n of H_.parse(t)){let s=new Vl(e);s.parse(n,r),i.push(s),r=s}return i}function gP(t,e){let i=H_.parse(t),r=new Vl(e).parse(i[0]);if(i.length>1){let n="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.unshift(new kH.YAMLSemanticError(i[1],n))}return r}function OH(t,e){let i=gP(t,e);if(i.warnings.forEach(r=>DH.warn(r)),i.errors.length>0)throw i.errors[0];return i.toJSON()}function MH(t,e){let i=new Vl(e);return i.contents=t,String(i)}var qH={createNode:FH,defaultOptions:na.defaultOptions,Document:Vl,parse:OH,parseAllDocuments:LH,parseCST:H_.parse,parseDocument:gP,scalarOptions:na.scalarOptions,stringify:MH};_P.YAML=qH});var yn=A((ype,TP)=>{TP.exports=yP().YAML});var bP=A(Li=>{"use strict";var br=ql(),BH=jp();Zs();Op();Li.Alias=br.Alias;Li.Collection=br.Collection;Li.Merge=br.Merge;Li.Node=br.Node;Li.Pair=br.Pair;Li.Scalar=br.Scalar;Li.YAMLMap=br.YAMLMap;Li.YAMLSeq=br.YAMLSeq;Li.binaryOptions=br.binaryOptions;Li.boolOptions=br.boolOptions;Li.intOptions=br.intOptions;Li.nullOptions=br.nullOptions;Li.strOptions=br.strOptions;Li.Schema=BH.Schema});var Py=A((Se,sE)=>{Se=sE.exports=Me;var et;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?et=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:et=function(){};Se.SEMVER_SPEC_VERSION="2.0.0";var uy=256,oh=Number.MAX_SAFE_INTEGER||9007199254740991,ly=16,st=Se.re=[],W=Se.src=[],Oe=0,zl=Oe++;W[zl]="0|[1-9]\\d*";var Ql=Oe++;W[Ql]="[0-9]+";var py=Oe++;W[py]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var WA=Oe++;W[WA]="("+W[zl]+")\\.("+W[zl]+")\\.("+W[zl]+")";var YA=Oe++;W[YA]="("+W[Ql]+")\\.("+W[Ql]+")\\.("+W[Ql]+")";var cy=Oe++;W[cy]="(?:"+W[zl]+"|"+W[py]+")";var fy=Oe++;W[fy]="(?:"+W[Ql]+"|"+W[py]+")";var hy=Oe++;W[hy]="(?:-("+W[cy]+"(?:\\."+W[cy]+")*))";var my=Oe++;W[my]="(?:-?("+W[fy]+"(?:\\."+W[fy]+")*))";var dy=Oe++;W[dy]="[0-9A-Za-z-]+";var uc=Oe++;W[uc]="(?:\\+("+W[dy]+"(?:\\."+W[dy]+")*))";var gy=Oe++,KA="v?"+W[WA]+W[hy]+"?"+W[uc]+"?";W[gy]="^"+KA+"$";var _y="[v=\\s]*"+W[YA]+W[my]+"?"+W[uc]+"?",yy=Oe++;W[yy]="^"+_y+"$";var Zl=Oe++;W[Zl]="((?:<|>)?=?)";var ah=Oe++;W[ah]=W[Ql]+"|x|X|\\*";var lh=Oe++;W[lh]=W[zl]+"|x|X|\\*";var da=Oe++;W[da]="[v=\\s]*("+W[lh]+")(?:\\.("+W[lh]+")(?:\\.("+W[lh]+")(?:"+W[hy]+")?"+W[uc]+"?)?)?";var Jl=Oe++;W[Jl]="[v=\\s]*("+W[ah]+")(?:\\.("+W[ah]+")(?:\\.("+W[ah]+")(?:"+W[my]+")?"+W[uc]+"?)?)?";var $A=Oe++;W[$A]="^"+W[Zl]+"\\s*"+W[da]+"$";var zA=Oe++;W[zA]="^"+W[Zl]+"\\s*"+W[Jl]+"$";var QA=Oe++;W[QA]="(?:^|[^\\d])(\\d{1,"+ly+"})(?:\\.(\\d{1,"+ly+"}))?(?:\\.(\\d{1,"+ly+"}))?(?:$|[^\\d])";var hh=Oe++;W[hh]="(?:~>?)";var uh=Oe++;W[uh]="(\\s*)"+W[hh]+"\\s+";st[uh]=new RegExp(W[uh],"g");var DK="$1~",XA=Oe++;W[XA]="^"+W[hh]+W[da]+"$";var JA=Oe++;W[JA]="^"+W[hh]+W[Jl]+"$";var mh=Oe++;W[mh]="(?:\\^)";var ch=Oe++;W[ch]="(\\s*)"+W[mh]+"\\s+";st[ch]=new RegExp(W[ch],"g");var FK="$1^",ZA=Oe++;W[ZA]="^"+W[mh]+W[da]+"$";var eE=Oe++;W[eE]="^"+W[mh]+W[Jl]+"$";var Ty=Oe++;W[Ty]="^"+W[Zl]+"\\s*("+_y+")$|^$";var by=Oe++;W[by]="^"+W[Zl]+"\\s*("+KA+")$|^$";var ac=Oe++;W[ac]="(\\s*)"+W[Zl]+"\\s*("+_y+"|"+W[da]+")";st[ac]=new RegExp(W[ac],"g");var LK="$1$2$3",tE=Oe++;W[tE]="^\\s*("+W[da]+")\\s+-\\s+("+W[da]+")\\s*$";var iE=Oe++;W[iE]="^\\s*("+W[Jl]+")\\s+-\\s+("+W[Jl]+")\\s*$";var rE=Oe++;W[rE]="(<|>)?=?\\s*\\*";for(uo=0;uo<Oe;uo++)et(uo,W[uo]),st[uo]||(st[uo]=new RegExp(W[uo]));var uo;Se.parse=pa;function pa(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Me)return t;if(typeof t!="string"||t.length>uy)return null;var i=e.loose?st[yy]:st[gy];if(!i.test(t))return null;try{return new Me(t,e)}catch{return null}}Se.valid=OK;function OK(t,e){var i=pa(t,e);return i?i.version:null}Se.clean=MK;function MK(t,e){var i=pa(t.trim().replace(/^[=v]+/,""),e);return i?i.version:null}Se.SemVer=Me;function Me(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Me){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>uy)throw new TypeError("version is longer than "+uy+" characters");if(!(this instanceof Me))return new Me(t,e);et("SemVer",t,e),this.options=e,this.loose=!!e.loose;var i=t.trim().match(e.loose?st[yy]:st[gy]);if(!i)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>oh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>oh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>oh||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(function(r){if(/^[0-9]+$/.test(r)){var n=+r;if(n>=0&&n<oh)return n}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}Me.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Me.prototype.toString=function(){return this.version};Me.prototype.compare=function(t){return et("SemVer.compare",this.version,this.options,t),t instanceof Me||(t=new Me(t,this.options)),this.compareMain(t)||this.comparePre(t)};Me.prototype.compareMain=function(t){return t instanceof Me||(t=new Me(t,this.options)),Xl(this.major,t.major)||Xl(this.minor,t.minor)||Xl(this.patch,t.patch)};Me.prototype.comparePre=function(t){if(t instanceof Me||(t=new Me(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var i=this.prerelease[e],r=t.prerelease[e];if(et("prerelease compare",e,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Xl(i,r)}while(++e)};Me.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Se.inc=qK;function qK(t,e,i,r){typeof i=="string"&&(r=i,i=void 0);try{return new Me(t,i).inc(e,r).version}catch{return null}}Se.diff=BK;function BK(t,e){if(Iy(t,e))return null;var i=pa(t),r=pa(e),n="";if(i.prerelease.length||r.prerelease.length){n="pre";var s="prerelease"}for(var o in i)if((o==="major"||o==="minor"||o==="patch")&&i[o]!==r[o])return n+o;return s}Se.compareIdentifiers=Xl;var HA=/^[0-9]+$/;function Xl(t,e){var i=HA.test(t),r=HA.test(e);return i&&r&&(t=+t,e=+e),t===e?0:i&&!r?-1:r&&!i?1:t<e?-1:1}Se.rcompareIdentifiers=VK;function VK(t,e){return Xl(e,t)}Se.major=UK;function UK(t,e){return new Me(t,e).major}Se.minor=jK;function jK(t,e){return new Me(t,e).minor}Se.patch=GK;function GK(t,e){return new Me(t,e).patch}Se.compare=us;function us(t,e,i){return new Me(t,i).compare(new Me(e,i))}Se.compareLoose=HK;function HK(t,e){return us(t,e,!0)}Se.rcompare=WK;function WK(t,e,i){return us(e,t,i)}Se.sort=YK;function YK(t,e){return t.sort(function(i,r){return Se.compare(i,r,e)})}Se.rsort=KK;function KK(t,e){return t.sort(function(i,r){return Se.rcompare(i,r,e)})}Se.gt=lc;function lc(t,e,i){return us(t,e,i)>0}Se.lt=fh;function fh(t,e,i){return us(t,e,i)<0}Se.eq=Iy;function Iy(t,e,i){return us(t,e,i)===0}Se.neq=nE;function nE(t,e,i){return us(t,e,i)!==0}Se.gte=vy;function vy(t,e,i){return us(t,e,i)>=0}Se.lte=Ny;function Ny(t,e,i){return us(t,e,i)<=0}Se.cmp=dh;function dh(t,e,i,r){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t===i;case"!==":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t!==i;case"":case"=":case"==":return Iy(t,i,r);case"!=":return nE(t,i,r);case">":return lc(t,i,r);case">=":return vy(t,i,r);case"<":return fh(t,i,r);case"<=":return Ny(t,i,r);default:throw new TypeError("Invalid operator: "+e)}}Se.Comparator=Hr;function Hr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Hr){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Hr))return new Hr(t,e);et("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===cc?this.value="":this.value=this.operator+this.semver.version,et("comp",this)}var cc={};Hr.prototype.parse=function(t){var e=this.options.loose?st[Ty]:st[by],i=t.match(e);if(!i)throw new TypeError("Invalid comparator: "+t);this.operator=i[1],this.operator==="="&&(this.operator=""),i[2]?this.semver=new Me(i[2],this.options.loose):this.semver=cc};Hr.prototype.toString=function(){return this.value};Hr.prototype.test=function(t){return et("Comparator.test",t,this.options.loose),this.semver===cc?!0:(typeof t=="string"&&(t=new Me(t,this.options)),dh(t,this.operator,this.semver,this.options))};Hr.prototype.intersects=function(t,e){if(!(t instanceof Hr))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var i;if(this.operator==="")return i=new Nt(t.value,e),ph(this.value,i,e);if(t.operator==="")return i=new Nt(this.value,e),ph(t.semver,i,e);var r=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),n=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=dh(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=dh(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return r||n||s&&o||a||l};Se.Range=Nt;function Nt(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Nt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Nt(t.raw,e);if(t instanceof Hr)return new Nt(t.value,e);if(!(this instanceof Nt))return new Nt(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(i){return this.parseRange(i.trim())},this).filter(function(i){return i.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}Nt.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Nt.prototype.toString=function(){return this.range};Nt.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var i=e?st[iE]:st[tE];t=t.replace(i,r3),et("hyphen replace",t),t=t.replace(st[ac],LK),et("comparator trim",t,st[ac]),t=t.replace(st[uh],DK),t=t.replace(st[ch],FK),t=t.split(/\s+/).join(" ");var r=e?st[Ty]:st[by],n=t.split(" ").map(function(s){return zK(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(n=n.filter(function(s){return!!s.match(r)})),n=n.map(function(s){return new Hr(s,this.options)},this),n};Nt.prototype.intersects=function(t,e){if(!(t instanceof Nt))throw new TypeError("a Range is required");return this.set.some(function(i){return i.every(function(r){return t.set.some(function(n){return n.every(function(s){return r.intersects(s,e)})})})})};Se.toComparators=$K;function $K(t,e){return new Nt(t,e).set.map(function(i){return i.map(function(r){return r.value}).join(" ").trim().split(" ")})}function zK(t,e){return et("comp",t,e),t=JK(t,e),et("caret",t),t=QK(t,e),et("tildes",t),t=e3(t,e),et("xrange",t),t=i3(t,e),et("stars",t),t}function Bi(t){return!t||t.toLowerCase()==="x"||t==="*"}function QK(t,e){return t.trim().split(/\s+/).map(function(i){return XK(i,e)}).join(" ")}function XK(t,e){var i=e.loose?st[JA]:st[XA];return t.replace(i,function(r,n,s,o,a){et("tilde",t,r,n,s,o,a);var l;return Bi(n)?l="":Bi(s)?l=">="+n+".0.0 <"+(+n+1)+".0.0":Bi(o)?l=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":a?(et("replaceTilde pr",a),l=">="+n+"."+s+"."+o+"-"+a+" <"+n+"."+(+s+1)+".0"):l=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0",et("tilde return",l),l})}function JK(t,e){return t.trim().split(/\s+/).map(function(i){return ZK(i,e)}).join(" ")}function ZK(t,e){et("caret",t,e);var i=e.loose?st[eE]:st[ZA];return t.replace(i,function(r,n,s,o,a){et("caret",t,r,n,s,o,a);var l;return Bi(n)?l="":Bi(s)?l=">="+n+".0.0 <"+(+n+1)+".0.0":Bi(o)?n==="0"?l=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+".0 <"+(+n+1)+".0.0":a?(et("replaceCaret pr",a),n==="0"?s==="0"?l=">="+n+"."+s+"."+o+"-"+a+" <"+n+"."+s+"."+(+o+1):l=">="+n+"."+s+"."+o+"-"+a+" <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(et("no pr"),n==="0"?s==="0"?l=">="+n+"."+s+"."+o+" <"+n+"."+s+"."+(+o+1):l=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+"."+o+" <"+(+n+1)+".0.0"),et("caret return",l),l})}function e3(t,e){return et("replaceXRanges",t,e),t.split(/\s+/).map(function(i){return t3(i,e)}).join(" ")}function t3(t,e){t=t.trim();var i=e.loose?st[zA]:st[$A];return t.replace(i,function(r,n,s,o,a,l){et("xRange",t,r,n,s,o,a,l);var u=Bi(s),c=u||Bi(o),f=c||Bi(a),d=f;return n==="="&&d&&(n=""),u?n===">"||n==="<"?r="<0.0.0":r="*":n&&d?(c&&(o=0),a=0,n===">"?(n=">=",c?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",c?s=+s+1:o=+o+1),r=n+s+"."+o+"."+a):c?r=">="+s+".0.0 <"+(+s+1)+".0.0":f&&(r=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),et("xRange return",r),r})}function i3(t,e){return et("replaceStars",t,e),t.trim().replace(st[rE],"")}function r3(t,e,i,r,n,s,o,a,l,u,c,f,d){return Bi(i)?e="":Bi(r)?e=">="+i+".0.0":Bi(n)?e=">="+i+"."+r+".0":e=">="+e,Bi(l)?a="":Bi(u)?a="<"+(+l+1)+".0.0":Bi(c)?a="<"+l+"."+(+u+1)+".0":f?a="<="+l+"."+u+"."+c+"-"+f:a="<="+a,(e+" "+a).trim()}Nt.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new Me(t,this.options));for(var e=0;e<this.set.length;e++)if(n3(this.set[e],t,this.options))return!0;return!1};function n3(t,e,i){for(var r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!i.includePrerelease){for(r=0;r<t.length;r++)if(et(t[r].semver),t[r].semver!==cc&&t[r].semver.prerelease.length>0){var n=t[r].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}Se.satisfies=ph;function ph(t,e,i){try{e=new Nt(e,i)}catch{return!1}return e.test(t)}Se.maxSatisfying=s3;function s3(t,e,i){var r=null,n=null;try{var s=new Nt(e,i)}catch{return null}return t.forEach(function(o){s.test(o)&&(!r||n.compare(o)===-1)&&(r=o,n=new Me(r,i))}),r}Se.minSatisfying=o3;function o3(t,e,i){var r=null,n=null;try{var s=new Nt(e,i)}catch{return null}return t.forEach(function(o){s.test(o)&&(!r||n.compare(o)===1)&&(r=o,n=new Me(r,i))}),r}Se.minVersion=a3;function a3(t,e){t=new Nt(t,e);var i=new Me("0.0.0");if(t.test(i)||(i=new Me("0.0.0-0"),t.test(i)))return i;i=null;for(var r=0;r<t.set.length;++r){var n=t.set[r];n.forEach(function(s){var o=new Me(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||lc(i,o))&&(i=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return i&&t.test(i)?i:null}Se.validRange=l3;function l3(t,e){try{return new Nt(t,e).range||"*"}catch{return null}}Se.ltr=u3;function u3(t,e,i){return Sy(t,e,"<",i)}Se.gtr=c3;function c3(t,e,i){return Sy(t,e,">",i)}Se.outside=Sy;function Sy(t,e,i,r){t=new Me(t,r),e=new Nt(e,r);var n,s,o,a,l;switch(i){case">":n=lc,s=Ny,o=fh,a=">",l=">=";break;case"<":n=fh,s=vy,o=lc,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ph(t,e,r))return!1;for(var u=0;u<e.set.length;++u){var c=e.set[u],f=null,d=null;if(c.forEach(function(h){h.semver===cc&&(h=new Hr(">=0.0.0")),f=f||h,d=d||h,n(h.semver,f.semver,r)?f=h:o(h.semver,d.semver,r)&&(d=h)}),f.operator===a||f.operator===l||(!d.operator||d.operator===a)&&s(t,d.semver))return!1;if(d.operator===l&&o(t,d.semver))return!1}return!0}Se.prerelease=f3;function f3(t,e){var i=pa(t,e);return i&&i.prerelease.length?i.prerelease:null}Se.intersects=d3;function d3(t,e,i){return t=new Nt(t,i),e=new Nt(e,i),t.intersects(e)}Se.coerce=p3;function p3(t){if(t instanceof Me)return t;if(typeof t!="string")return null;var e=t.match(st[QA]);return e==null?null:pa(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var yh=A((Iye,vE)=>{"use strict";function oi(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}oi.prototype.clone_empty=function(){var t=new oi(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t};oi.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]};oi.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1};oi.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};oi.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};oi.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};oi.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,t.__items[0]===" "&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1};oi.prototype.is_empty=function(){return this.__items.length===0};oi.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};oi.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf(`
`);e!==-1?this.__character_count=t.length-e:this.__character_count+=t.length};oi.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t};oi.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};oi.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};oi.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};oi.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t};function mc(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}mc.prototype.get_indent_size=function(t,e){var i=this.__base_string_length;return e=e||0,t<0&&(i=0),i+=t*this.__indent_size,i+=e,i};mc.prototype.get_indent_string=function(t,e){var i=this.__base_string;return e=e||0,t<0&&(t=0,i=""),e+=t*this.__indent_size,this.__ensure_cache(e),i+=this.__cache[e],i};mc.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()};mc.prototype.__add_column=function(){var t=this.__cache.length,e=0,i="";this.__indent_size&&t>=this.__indent_size&&(e=Math.floor(t/this.__indent_size),t-=e*this.__indent_size,i=new Array(e+1).join(this.__indent_string)),t&&(i+=new Array(t+1).join(" ")),this.__cache.push(i)};function ai(t,e){this.__indent_cache=new mc(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new oi(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ai.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};ai.prototype.get_line_number=function(){return this.__lines.length};ai.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)};ai.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)};ai.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};ai.prototype.add_new_line=function(t){return this.is_empty()||!t&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};ai.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&(e[e.length-1]===`
`&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var i=this.__lines.join(`
`);return t!==`
`&&(i=i.replace(/[\n]/g,t)),i};ai.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};ai.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)};ai.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};ai.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};ai.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};ai.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()};ai.prototype.trim=function(t){for(t=t===void 0?!1:t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};ai.prototype.just_added_newline=function(){return this.current_line.is_empty()};ai.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};ai.prototype.ensure_empty_line_above=function(t,e){for(var i=this.__lines.length-2;i>=0;){var r=this.__lines[i];if(r.is_empty())break;if(r.item(0).indexOf(t)!==0&&r.item(-1)!==e){this.__lines.splice(i+1,0,new oi(this)),this.previous_line=this.__lines[this.__lines.length-2];break}i--}};vE.exports.Output=ai});var Fy=A((vye,NE)=>{"use strict";function y3(t,e,i,r){this.type=t,this.text=e,this.comments_before=null,this.newlines=i||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}NE.exports.Token=y3});var Oy=A(ds=>{"use strict";var T3="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",SE="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",Ly="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",PE="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",AE="(?:\\\\u[0-9a-fA-F]{4}|["+T3+Ly+"])",b3="(?:\\\\u[0-9a-fA-F]{4}|["+SE+Ly+PE+"])*";ds.identifier=new RegExp(AE+b3,"g");ds.identifierStart=new RegExp(AE);ds.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+SE+Ly+PE+"])+");ds.newline=/[\n\r\u2028\u2029]/;ds.lineBreak=new RegExp(`\r
|`+ds.newline.source);ds.allLineBreaks=new RegExp(ds.lineBreak.source,"g")});var bh=A((Sye,Th)=>{"use strict";function co(t,e){this.raw_options=EE(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}co.prototype._get_array=function(t,e){var i=this.raw_options[t],r=e||[];return typeof i=="object"?i!==null&&typeof i.concat=="function"&&(r=i.concat()):typeof i=="string"&&(r=i.split(/[^a-zA-Z0-9_\/\-]+/)),r};co.prototype._get_boolean=function(t,e){var i=this.raw_options[t],r=i===void 0?!!e:!!i;return r};co.prototype._get_characters=function(t,e){var i=this.raw_options[t],r=e||"";return typeof i=="string"&&(r=i.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),r};co.prototype._get_number=function(t,e){var i=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var r=parseInt(i,10);return isNaN(r)&&(r=e),r};co.prototype._get_selection=function(t,e,i){var r=this._get_selection_list(t,e,i);if(r.length!==1)throw new Error("Invalid Option Value: The option '"+t+`' can only be one of the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return r[0]};co.prototype._get_selection_list=function(t,e,i){if(!e||e.length===0)throw new Error("Selection list cannot be empty.");if(i=i||[e[0]],!this._is_valid_selection(i,e))throw new Error("Invalid Default Value!");var r=this._get_array(t,i);if(!this._is_valid_selection(r,e))throw new Error("Invalid Option Value: The option '"+t+`' can contain only the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return r};co.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(i){return e.indexOf(i)===-1})};function EE(t,e){var i={};t=CE(t);var r;for(r in t)r!==e&&(i[r]=t[r]);if(e&&t[e])for(r in t[e])i[r]=t[e][r];return i}function CE(t){var e={},i;for(i in t){var r=i.replace(/-/g,"_");e[r]=t[i]}return e}Th.exports.Options=co;Th.exports.normalizeOpts=CE;Th.exports.mergeOpts=EE});var My=A((Pye,wE)=>{"use strict";var RE=bh().Options,I3=["before-newline","after-newline","preserve-newline"];function xE(t){RE.call(this,t,"js");var e=this.raw_options.brace_style||null;e==="expand-strict"?this.raw_options.brace_style="expand":e==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var i=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var r=0;r<i.length;r++)i[r]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=i[r];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",I3),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}xE.prototype=new RE;wE.exports.Options=xE});var Ih=A((Aye,DE)=>{"use strict";var kE=RegExp.prototype.hasOwnProperty("sticky");function di(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}di.prototype.restart=function(){this.__position=0};di.prototype.back=function(){this.__position>0&&(this.__position-=1)};di.prototype.hasNext=function(){return this.__position<this.__input_length};di.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t};di.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e};di.prototype.__match=function(t,e){t.lastIndex=e;var i=t.exec(this.__input);return i&&!(kE&&t.sticky)&&i.index!==e&&(i=null),i};di.prototype.test=function(t,e){return e=e||0,e+=this.__position,e>=0&&e<this.__input_length?!!this.__match(t,e):!1};di.prototype.testChar=function(t,e){var i=this.peek(e);return t.lastIndex=0,i!==null&&t.test(i)};di.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e};di.prototype.read=function(t,e,i){var r="",n;return t&&(n=this.match(t),n&&(r+=n[0])),e&&(n||!t)&&(r+=this.readUntil(e,i)),r};di.prototype.readUntil=function(t,e){var i="",r=this.__position;t.lastIndex=this.__position;var n=t.exec(this.__input);return n?(r=n.index,e&&(r+=n[0].length)):r=this.__input_length,i=this.__input.substring(this.__position,r),this.__position=r,i};di.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)};di.prototype.get_regexp=function(t,e){var i=null,r="g";return e&&kE&&(r="y"),typeof t=="string"&&t!==""?i=new RegExp(t,r):t&&(i=new RegExp(t.source,r)),i};di.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))};di.prototype.peekUntilAfter=function(t){var e=this.__position,i=this.readUntilAfter(t);return this.__position=e,i};di.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t};DE.exports.InputScanner=di});var LE=A((Eye,FE)=>{"use strict";function ha(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}ha.prototype.restart=function(){this.__position=0};ha.prototype.isEmpty=function(){return this.__tokens_length===0};ha.prototype.hasNext=function(){return this.__position<this.__tokens_length};ha.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t};ha.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e};ha.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1};FE.exports.TokenStream=ha});var gc=A((Cye,OE)=>{"use strict";function Mn(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}Mn.prototype.read=function(){var t=this._input.read(this._starting_pattern);return(!this._starting_pattern||t)&&(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t};Mn.prototype.read_match=function(){return this._input.match(this._match_pattern)};Mn.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e};Mn.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e};Mn.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e};Mn.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e};Mn.prototype._create=function(){return new Mn(this._input,this)};Mn.prototype._update=function(){};OE.exports.Pattern=Mn});var BE=A((Rye,qE)=>{"use strict";var ME=gc().Pattern;function fo(t,e){ME.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}fo.prototype=new ME;fo.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")};fo.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(t===" ")this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t};fo.prototype.matching=function(t,e){var i=this._create();return i.__set_whitespace_patterns(t,e),i._update(),i};fo.prototype._create=function(){return new fo(this._input,this)};fo.prototype.__split=function(t,e){t.lastIndex=0;for(var i=0,r=[],n=t.exec(e);n;)r.push(e.substring(i,n.index)),i=n.index+n[0].length,n=t.exec(e);return i<e.length?r.push(e.substring(i,e.length)):r.push(""),r};qE.exports.WhitespacePattern=fo});var yc=A((xye,By)=>{"use strict";var v3=Ih().InputScanner,VE=Fy().Token,qy=LE().TokenStream,N3=BE().WhitespacePattern,_c={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},qn=function(t,e){this._input=new v3(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new N3(this._input)};qn.prototype.tokenize=function(){this._input.restart(),this.__tokens=new qy,this._reset();for(var t,e=new VE(_c.START,""),i=null,r=[],n=new qy;e.type!==_c.EOF;){for(t=this._get_next_token(e,i);this._is_comment(t);)n.add(t),t=this._get_next_token(e,i);n.isEmpty()||(t.comments_before=n,n=new qy),t.parent=i,this._is_opening(t)?(r.push(i),i=t):i&&this._is_closing(t,i)&&(t.opened=i,i.closed=t,i=r.pop(),t.parent=i),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens};qn.prototype._is_first_token=function(){return this.__tokens.isEmpty()};qn.prototype._reset=function(){};qn.prototype._get_next_token=function(t,e){this._readWhitespace();var i=this._input.read(/.+/g);return i?this._create_token(_c.RAW,i):this._create_token(_c.EOF,"")};qn.prototype._is_comment=function(t){return!1};qn.prototype._is_opening=function(t){return!1};qn.prototype._is_closing=function(t,e){return!1};qn.prototype._create_token=function(t,e){var i=new VE(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return i};qn.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};By.exports.Tokenizer=qn;By.exports.TOKEN=_c});var vh=A((wye,UE)=>{"use strict";function Vy(t,e){t=typeof t=="string"?t:t.source,e=typeof e=="string"?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}Vy.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var i=this.__directive_pattern.exec(t);i;)e[i[1]]=i[2],i=this.__directive_pattern.exec(t);return e};Vy.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)};UE.exports.Directives=Vy});var Gy=A((kye,jE)=>{"use strict";var Uy=gc().Pattern,jy={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function bn(t,e){Uy.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},jy),this._excluded=Object.assign({},jy),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var i=new Uy(t);this.__patterns={handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:i.starting_with(/{{{/).until_after(/}}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),php:i.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:i.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:i.starting_with(/{%/).until_after(/%}/),django_value:i.starting_with(/{{/).until_after(/}}/),django_comment:i.starting_with(/{#/).until_after(/#}/),smarty:i.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:i.starting_with(/{\*/).until_after(/\*}/),smarty_literal:i.starting_with(/{literal}/).until_after(/{\/literal}/)}}bn.prototype=new Uy;bn.prototype._create=function(){return new bn(this._input,this)};bn.prototype._update=function(){this.__set_templated_pattern()};bn.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e};bn.prototype.read_options=function(t){var e=this._create();for(var i in jy)e._disabled[i]=t.templating.indexOf(i)===-1;return e._update(),e};bn.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e};bn.prototype.read=function(){var t="";this._match_pattern?t=this._input.read(this._starting_pattern):t=this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t};bn.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")};bn.prototype._read_template=function(){var t="",e=this._input.peek();if(e==="<"){var i=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&i==="?"&&(t=t||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&i==="%"&&(t=t||this.__patterns.erb.read())}else e==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(t=t||this.__patterns.handlebars_comment.read(),t=t||this.__patterns.handlebars_unescaped.read(),t=t||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=t||this.__patterns.django_comment.read(),t=t||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=t||this.__patterns.smarty_comment.read(),t=t||this.__patterns.smarty_literal.read(),t=t||this.__patterns.smarty.read()));return t};jE.exports.TemplatablePattern=bn});var bc=A((Dye,Tc)=>{"use strict";var S3=Ih().InputScanner,HE=yc().Tokenizer,Hy=yc().TOKEN,P3=vh().Directives,Wr=Oy(),A3=gc().Pattern,E3=Gy().TemplatablePattern;function Wy(t,e){return e.indexOf(t)!==-1}var de={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:Hy.START,RAW:Hy.RAW,EOF:Hy.EOF},GE=new P3(/\/\*/,/\*\//),C3=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,R3=/[0-9]/,x3=/[^\d\.]/,w3=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),ma=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";ma=ma.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");ma="\\?\\.(?!\\d) "+ma;ma=ma.replace(/ /g,"|");var k3=new RegExp(ma),WE="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),D3=WE.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),F3=new RegExp("^(?:"+D3.join("|")+")$"),Nh,pi=function(t,e){HE.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var i=new A3(this._input),r=new E3(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(Wr.identifier).matching(Wr.identifierMatch),number:i.matching(C3),punct:i.matching(k3),comment:i.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:i.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:i.matching(/<!--/),html_comment_end:i.matching(/-->/),include:i.starting_with(/#include/).until_after(Wr.lineBreak),shebang:i.starting_with(/#!/).until_after(Wr.lineBreak),xml:i.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};pi.prototype=new HE;pi.prototype._is_comment=function(t){return t.type===de.COMMENT||t.type===de.BLOCK_COMMENT||t.type===de.UNKNOWN};pi.prototype._is_opening=function(t){return t.type===de.START_BLOCK||t.type===de.START_EXPR};pi.prototype._is_closing=function(t,e){return(t.type===de.END_BLOCK||t.type===de.END_EXPR)&&e&&(t.text==="]"&&e.text==="["||t.text===")"&&e.text==="("||t.text==="}"&&e.text==="{")};pi.prototype._reset=function(){Nh=!1};pi.prototype._get_next_token=function(t,e){var i=null;this._readWhitespace();var r=this._input.peek();return r===null?this._create_token(de.EOF,""):(i=i||this._read_non_javascript(r),i=i||this._read_string(r),i=i||this._read_word(t),i=i||this._read_singles(r),i=i||this._read_comment(r),i=i||this._read_regexp(r,t),i=i||this._read_xml(r,t),i=i||this._read_punctuation(),i=i||this._create_token(de.UNKNOWN,this._input.next()),i)};pi.prototype._read_word=function(t){var e;if(e=this.__patterns.identifier.read(),e!=="")return e=e.replace(Wr.allLineBreaks,`
`),!(t.type===de.DOT||t.type===de.RESERVED&&(t.text==="set"||t.text==="get"))&&F3.test(e)?e==="in"||e==="of"?this._create_token(de.OPERATOR,e):this._create_token(de.RESERVED,e):this._create_token(de.WORD,e);if(e=this.__patterns.number.read(),e!=="")return this._create_token(de.WORD,e)};pi.prototype._read_singles=function(t){var e=null;return t==="("||t==="["?e=this._create_token(de.START_EXPR,t):t===")"||t==="]"?e=this._create_token(de.END_EXPR,t):t==="{"?e=this._create_token(de.START_BLOCK,t):t==="}"?e=this._create_token(de.END_BLOCK,t):t===";"?e=this._create_token(de.SEMICOLON,t):t==="."&&x3.test(this._input.peek(1))?e=this._create_token(de.DOT,t):t===","&&(e=this._create_token(de.COMMA,t)),e&&this._input.next(),e};pi.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(t!=="")return t==="="?this._create_token(de.EQUALS,t):t==="?."?this._create_token(de.DOT,t):this._create_token(de.OPERATOR,t)};pi.prototype._read_non_javascript=function(t){var e="";if(t==="#"){if(this._is_first_token()&&(e=this.__patterns.shebang.read(),e))return this._create_token(de.UNKNOWN,e.trim()+`
`);if(e=this.__patterns.include.read(),e)return this._create_token(de.UNKNOWN,e.trim()+`
`);t=this._input.next();var i="#";if(this._input.hasNext()&&this._input.testChar(R3)){do t=this._input.next(),i+=t;while(this._input.hasNext()&&t!=="#"&&t!=="=");return t==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(i+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(i+="{}",this._input.next(),this._input.next())),this._create_token(de.WORD,i)}this._input.back()}else if(t==="<"&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read(),e){for(;this._input.hasNext()&&!this._input.testChar(Wr.newline);)e+=this._input.next();return Nh=!0,this._create_token(de.COMMENT,e)}}else if(Nh&&t==="-"&&(e=this.__patterns.html_comment_end.read(),e))return Nh=!1,this._create_token(de.COMMENT,e);return null};pi.prototype._read_comment=function(t){var e=null;if(t==="/"){var i="";if(this._input.peek(1)==="*"){i=this.__patterns.block_comment.read();var r=GE.get_directives(i);r&&r.ignore==="start"&&(i+=GE.readIgnored(this._input)),i=i.replace(Wr.allLineBreaks,`
`),e=this._create_token(de.BLOCK_COMMENT,i),e.directives=r}else this._input.peek(1)==="/"&&(i=this.__patterns.comment.read(),e=this._create_token(de.COMMENT,i))}return e};pi.prototype._read_string=function(t){if(t==="`"||t==="'"||t==='"'){var e=this._input.next();return this.has_char_escapes=!1,t==="`"?e+=this._read_string_recursive("`",!0,"${"):e+=this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=L3(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(Wr.allLineBreaks,`
`),this._create_token(de.STRING,e)}return null};pi.prototype._allow_regexp_or_xml=function(t){return t.type===de.RESERVED&&Wy(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===de.END_EXPR&&t.text===")"&&t.opened.previous.type===de.RESERVED&&Wy(t.opened.previous.text,["if","while","for"])||Wy(t.type,[de.COMMENT,de.START_EXPR,de.START_BLOCK,de.START,de.END_BLOCK,de.OPERATOR,de.EQUALS,de.EOF,de.SEMICOLON,de.COMMA])};pi.prototype._read_regexp=function(t,e){if(t==="/"&&this._allow_regexp_or_xml(e)){for(var i=this._input.next(),r=!1,n=!1;this._input.hasNext()&&(r||n||this._input.peek()!==t)&&!this._input.testChar(Wr.newline);)i+=this._input.peek(),r?r=!1:(r=this._input.peek()==="\\",this._input.peek()==="["?n=!0:this._input.peek()==="]"&&(n=!1)),this._input.next();return this._input.peek()===t&&(i+=this._input.next(),i+=this._input.read(Wr.identifier)),this._create_token(de.STRING,i)}return null};pi.prototype._read_xml=function(t,e){if(this._options.e4x&&t==="<"&&this._allow_regexp_or_xml(e)){var i="",r=this.__patterns.xml.read_match();if(r){for(var n=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=n.indexOf("{")===0,o=0;r;){var a=!!r[1],l=r[2],u=!!r[r.length-1]||l.slice(0,8)==="![CDATA[";if(!u&&(l===n||s&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(a?--o:++o),i+=r[0],o<=0)break;r=this.__patterns.xml.read_match()}return r||(i+=this._input.match(/[\s\S]*/g)[0]),i=i.replace(Wr.allLineBreaks,`
`),this._create_token(de.STRING,i)}}return null};function L3(t){for(var e="",i=0,r=new S3(t),n=null;r.hasNext();)if(n=r.match(/([\s]|[^\\]|\\\\)+/g),n&&(e+=n[0]),r.peek()==="\\"){if(r.next(),r.peek()==="x")n=r.match(/x([0-9A-Fa-f]{2})/g);else if(r.peek()==="u")n=r.match(/u([0-9A-Fa-f]{4})/g);else{e+="\\",r.hasNext()&&(e+=r.next());continue}if(!n||(i=parseInt(n[1],16),i>126&&i<=255&&n[0].indexOf("x")===0))return t;if(i>=0&&i<32){e+="\\"+n[0];continue}else i===34||i===39||i===92?e+="\\"+String.fromCharCode(i):e+=String.fromCharCode(i)}return e}pi.prototype._read_string_recursive=function(t,e,i){var r,n;t==="'"?n=this.__patterns.single_quote:t==='"'?n=this.__patterns.double_quote:t==="`"?n=this.__patterns.template_text:t==="}"&&(n=this.__patterns.template_expression);for(var s=n.read(),o="";this._input.hasNext();){if(o=this._input.next(),o===t||!e&&Wr.newline.test(o)){this._input.back();break}else o==="\\"&&this._input.hasNext()?(r=this._input.peek(),r==="x"||r==="u"?this.has_char_escapes=!0:r==="\r"&&this._input.peek(1)===`
`&&this._input.next(),o+=this._input.next()):i&&(i==="${"&&o==="$"&&this._input.peek()==="{"&&(o+=this._input.next()),i===o&&(t==="`"?o+=this._read_string_recursive("}",e,"`"):o+=this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(o+=this._input.next())));o+=n.read(),s+=o}return s};Tc.exports.Tokenizer=pi;Tc.exports.TOKEN=de;Tc.exports.positionable_operators=w3.slice();Tc.exports.line_starters=WE.slice()});var zE=A((Fye,$E)=>{"use strict";var O3=yh().Output,M3=Fy().Token,Sh=Oy(),q3=My().Options,B3=bc().Tokenizer,Sc=bc().line_starters,Ic=bc().positionable_operators,V=bc().TOKEN;function De(t,e){return e.indexOf(t)!==-1}function V3(t){return t.replace(/^\s+/g,"")}function U3(t){for(var e={},i=0;i<t.length;i++)e[t[i].replace(/-/g,"_")]=t[i];return e}function Yr(t,e){return t&&t.type===V.RESERVED&&t.text===e}function ft(t,e){return t&&t.type===V.RESERVED&&De(t.text,e)}var Ph=["case","return","do","if","throw","else","await","break","continue","async"],j3=["before-newline","after-newline","preserve-newline"],vc=U3(j3),YE=[vc.before_newline,vc.preserve_newline],pe={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function KE(t,e){e.multiline_frame||e.mode===pe.ForInitializer||e.mode===pe.Conditional||t.remove_indent(e.start_line_index)}function G3(t){t=t.replace(Sh.allLineBreaks,`
`);for(var e=[],i=t.indexOf(`
`);i!==-1;)e.push(t.substring(0,i)),t=t.substring(i+1),i=t.indexOf(`
`);return t.length&&e.push(t),e}function po(t){return t===pe.ArrayLiteral}function Nc(t){return De(t,[pe.Expression,pe.ForInitializer,pe.Conditional])}function H3(t,e){for(var i=0;i<t.length;i++){var r=t[i].trim();if(r.charAt(0)!==e)return!1}return!0}function W3(t,e){for(var i=0,r=t.length,n;i<r;i++)if(n=t[i],n&&n.indexOf(e)!==0)return!1;return!0}function We(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new q3(e)}We.prototype.create_flags=function(t,e){var i=0;t&&(i=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>i&&(i=t.line_indent_level));var r={mode:e,parent:t,last_token:t?t.last_token:new M3(V.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,alignment:0,line_indent_level:t?t.line_indent_level:i,start_line_index:this._output.get_line_number(),ternary_depth:0};return r};We.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new O3(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(pe.BlockStatement);var i=new B3(t,this._options);return this._tokens=i.tokenize(),t};We.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t,e=this._reset(this._source_text),i=this._options.eol;this._options.eol==="auto"&&(i=`
`,e&&Sh.lineBreak.test(e||"")&&(i=e.match(Sh.lineBreak)[0]));for(var r=this._tokens.next();r;)this.handle_token(r),this._last_last_text=this._flags.last_token.text,this._flags.last_token=r,r=this._tokens.next();return t=this._output.get_code(i),t};We.prototype.handle_token=function(t,e){t.type===V.START_EXPR?this.handle_start_expr(t):t.type===V.END_EXPR?this.handle_end_expr(t):t.type===V.START_BLOCK?this.handle_start_block(t):t.type===V.END_BLOCK?this.handle_end_block(t):t.type===V.WORD?this.handle_word(t):t.type===V.RESERVED?this.handle_word(t):t.type===V.SEMICOLON?this.handle_semicolon(t):t.type===V.STRING?this.handle_string(t):t.type===V.EQUALS?this.handle_equals(t):t.type===V.OPERATOR?this.handle_operator(t):t.type===V.COMMA?this.handle_comma(t):t.type===V.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===V.COMMENT?this.handle_comment(t,e):t.type===V.DOT?this.handle_dot(t):t.type===V.EOF?this.handle_eof(t):t.type===V.UNKNOWN?this.handle_unknown(t,e):this.handle_unknown(t,e)};We.prototype.handle_whitespace_and_comments=function(t,e){var i=t.newlines,r=this._options.keep_array_indentation&&po(this._flags.mode);if(t.comments_before)for(var n=t.comments_before.next();n;)this.handle_whitespace_and_comments(n,e),this.handle_token(n,e),n=t.comments_before.next();if(r)for(var s=0;s<i;s+=1)this.print_newline(s>0,e);else if(this._options.max_preserve_newlines&&i>this._options.max_preserve_newlines&&(i=this._options.max_preserve_newlines),this._options.preserve_newlines&&i>1){this.print_newline(!1,e);for(var o=1;o<i;o+=1)this.print_newline(!0,e)}};var Yy=["async","break","continue","return","throw","yield"];We.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=e===void 0?!1:e,!this._output.just_added_newline()){var i=this._options.preserve_newlines&&t.newlines||e,r=De(this._flags.last_token.text,Ic)||De(t.text,Ic);if(r){var n=De(this._flags.last_token.text,Ic)&&De(this._options.operator_position,YE)||De(t.text,Ic);i=i&&n}if(i)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(ft(this._flags.last_token,Yy))return;this._output.set_wrap_point()}}};We.prototype.print_newline=function(t,e){if(!e&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==V.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var i=this._tokens.peek();this._flags.mode===pe.Statement&&!(this._flags.if_block&&Yr(i,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)};We.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&(t.text==="["||po(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};We.prototype.print_token=function(t){if(this._output.raw){this._output.add_raw_token(t);return}if(this._options.comma_first&&t.previous&&t.previous.type===V.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};We.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};We.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};We.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};We.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===pe.Statement&&KE(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};We.prototype.start_of_object_property=function(){return this._flags.parent.mode===pe.ObjectLiteral&&this._flags.mode===pe.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ft(this._flags.last_token,["get","set"]))};We.prototype.start_of_statement=function(t){var e=!1;return e=e||ft(this._flags.last_token,["var","let","const"])&&t.type===V.WORD,e=e||Yr(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===pe.ObjectLiteral&&this._flags.mode===pe.Statement)&&ft(this._flags.last_token,Yy)&&!t.newlines,e=e||Yr(this._flags.last_token,"else")&&!(Yr(t,"if")&&!t.comments_before),e=e||this._flags.last_token.type===V.END_EXPR&&(this._previous_flags.mode===pe.ForInitializer||this._previous_flags.mode===pe.Conditional),e=e||this._flags.last_token.type===V.WORD&&this._flags.mode===pe.BlockStatement&&!this._flags.in_case&&!(t.text==="--"||t.text==="++")&&this._last_last_text!=="function"&&t.type!==V.WORD&&t.type!==V.RESERVED,e=e||this._flags.mode===pe.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ft(this._flags.last_token,["get","set"])),e?(this.set_mode(pe.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,ft(t,["do","for","if","while"])),!0):!1};We.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=pe.Expression;if(t.text==="["){if(this._flags.last_token.type===V.WORD||this._flags.last_token.text===")"){ft(this._flags.last_token,Sc)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}e=pe.ArrayLiteral,po(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),De(this._flags.last_token.type,[V.START_EXPR,V.END_EXPR,V.WORD,V.OPERATOR,V.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===V.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,e=pe.ForInitializer):De(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=pe.Conditional):De(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&t.whitespace_before===""?this._output.space_before_token=!1:(De(this._flags.last_token.text,Sc)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===V.EQUALS||this._flags.last_token.type===V.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===V.WORD){this._output.space_before_token=!1;var i=this._tokens.peek(-3);if(this._options.space_after_named_function&&i){var r=this._tokens.peek(-4);ft(i,["async","function"])||i.text==="*"&&ft(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===pe.ObjectLiteral&&(i.text==="{"||i.text===","||i.text==="*"&&(r.text==="{"||r.text===","))&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===V.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(De(this._last_last_text,["function","yield"])||this._flags.mode===pe.ObjectLiteral&&De(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===V.START_BLOCK?this.print_newline():(this._flags.last_token.type===V.END_EXPR||this._flags.last_token.type===V.START_EXPR||this._flags.last_token.type===V.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===V.COMMA)&&this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};We.prototype.handle_end_expr=function(t){for(;this._flags.mode===pe.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,t.text==="]"&&po(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===V.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(t),this.restore_mode(),KE(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===pe.Conditional&&(this._previous_flags.mode=pe.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};We.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),i=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===V.END_EXPR?(this.set_mode(pe.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(pe.BlockStatement):i&&(De(i.text,[":",","])&&De(e.type,[V.STRING,V.WORD,V.RESERVED])||De(e.text,["get","set","..."])&&De(i.type,[V.WORD,V.RESERVED]))?De(this._last_last_text,["class","interface"])?this.set_mode(pe.BlockStatement):this.set_mode(pe.ObjectLiteral):this._flags.last_token.type===V.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(pe.BlockStatement):De(this._flags.last_token.type,[V.EQUALS,V.START_EXPR,V.COMMA,V.OPERATOR])||ft(this._flags.last_token,["return","throw","import","default"])?this.set_mode(pe.ObjectLiteral):this.set_mode(pe.BlockStatement);var r=!e.comments_before&&e.text==="}",n=r&&this._flags.last_word==="function"&&this._flags.last_token.type===V.END_EXPR;if(this._options.brace_preserve_inline){var s=0,o=null;this._flags.inline_frame=!0;do if(s+=1,o=this._tokens.peek(s-1),o.newlines){this._flags.inline_frame=!1;break}while(o.type!==V.EOF&&!(o.type===V.END_BLOCK&&o.opened===t))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==V.OPERATOR&&(n||this._flags.last_token.type===V.EQUALS||ft(this._flags.last_token,Ph)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(po(this._previous_flags.mode)&&(this._flags.last_token.type===V.START_EXPR||this._flags.last_token.type===V.COMMA)&&((this._flags.last_token.type===V.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===V.COMMA||this._flags.last_token.type===V.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==V.OPERATOR&&this._flags.last_token.type!==V.START_EXPR&&(this._flags.last_token.type===V.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),!r&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};We.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===pe.Statement;)this.restore_mode();var e=this._flags.last_token.type===V.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:this._options.brace_style==="expand"?e||this.print_newline():e||(po(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)};We.prototype.handle_word=function(t){if(t.type===V.RESERVED){if(De(t.text,["set","get"])&&this._flags.mode!==pe.ObjectLiteral)t.type=V.WORD;else if(t.text==="import"&&this._tokens.peek().text==="(")t.type=V.WORD;else if(De(t.text,["as","from"])&&!this._flags.import_block)t.type=V.WORD;else if(this._flags.mode===pe.ObjectLiteral){var e=this._tokens.peek();e.text===":"&&(t.type=V.WORD)}}if(this.start_of_statement(t)?ft(this._flags.last_token,["var","let","const"])&&t.type===V.WORD&&(this._flags.declaration_statement=!0):t.newlines&&!Nc(this._flags.mode)&&(this._flags.last_token.type!==V.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==V.EQUALS&&(this._options.preserve_newlines||!ft(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(t),this.print_newline()):this.handle_whitespace_and_comments(t),this._flags.do_block&&!this._flags.do_while)if(Yr(t,"while")){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&Yr(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===pe.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&ft(t,["case","default"])){this.print_newline(),this._flags.last_token.type!==V.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(t),this._flags.in_case=!0;return}if((this._flags.last_token.type===V.COMMA||this._flags.last_token.type===V.START_EXPR||this._flags.last_token.type===V.EQUALS||this._flags.last_token.type===V.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t)),Yr(t,"function")){(De(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(De(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===V.OPERATOR))&&!this._output.just_added_blankline()&&!t.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===V.RESERVED||this._flags.last_token.type===V.WORD?ft(this._flags.last_token,["get","set","new","export"])||ft(this._flags.last_token,Yy)?this._output.space_before_token=!0:Yr(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===V.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(Nc(this._flags.mode)||po(this._flags.mode))||this.print_newline(),this.print_token(t),this._flags.last_word=t.text;return}var i="NONE";if(this._flags.last_token.type===V.END_BLOCK?this._previous_flags.inline_frame?i="SPACE":ft(t,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines?i="NEWLINE":(i="SPACE",this._output.space_before_token=!0):i="NEWLINE":this._flags.last_token.type===V.SEMICOLON&&this._flags.mode===pe.BlockStatement?i="NEWLINE":this._flags.last_token.type===V.SEMICOLON&&Nc(this._flags.mode)?i="SPACE":this._flags.last_token.type===V.STRING?i="NEWLINE":this._flags.last_token.type===V.RESERVED||this._flags.last_token.type===V.WORD||this._flags.last_token.text==="*"&&(De(this._last_last_text,["function","yield"])||this._flags.mode===pe.ObjectLiteral&&De(this._last_last_text,["{",","]))?i="SPACE":this._flags.last_token.type===V.START_BLOCK?this._flags.inline_frame?i="SPACE":i="NEWLINE":this._flags.last_token.type===V.END_EXPR&&(this._output.space_before_token=!0,i="NEWLINE"),ft(t,Sc)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?i="SPACE":i="NEWLINE"),ft(t,["else","catch","finally"]))if((!(this._flags.last_token.type===V.END_BLOCK&&this._previous_flags.mode===pe.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var r=this._output.current_line;r.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else i==="NEWLINE"?ft(this._flags.last_token,Ph)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&ft(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==V.END_EXPR?(this._flags.last_token.type!==V.START_EXPR||!ft(t,["var","let","const"]))&&this._flags.last_token.text!==":"&&(Yr(t,"if")&&Yr(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):ft(t,Sc)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&po(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():i==="SPACE"&&(this._output.space_before_token=!0);t.previous&&(t.previous.type===V.WORD||t.previous.type===V.RESERVED)&&(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===V.RESERVED&&(t.text==="do"?this._flags.do_block=!0:t.text==="if"?this._flags.if_block=!0:t.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Yr(t,"from")&&(this._flags.import_block=!1))};We.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();this._flags.mode===pe.Statement&&!(this._flags.if_block&&Yr(e,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)};We.prototype.handle_string=function(t){t.text.startsWith("`")&&t.newlines===0&&t.whitespace_before===""&&(t.previous.text===")"||this._flags.last_token.type===V.WORD)||(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===V.RESERVED||this._flags.last_token.type===V.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===V.COMMA||this._flags.last_token.type===V.START_EXPR||this._flags.last_token.type===V.EQUALS||this._flags.last_token.type===V.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):t.text.startsWith("`")&&this._flags.last_token.type===V.END_EXPR&&(t.previous.text==="]"||t.previous.text===")")&&t.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(t)};We.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0};We.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(Nc(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===pe.ObjectLiteral||this._flags.mode===pe.Statement&&this._flags.parent.mode===pe.ObjectLiteral?(this._flags.mode===pe.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)};We.prototype.handle_operator=function(t){var e=t.text==="*"&&(ft(this._flags.last_token,["function","yield"])||De(this._flags.last_token.type,[V.START_BLOCK,V.COMMA,V.END_BLOCK,V.SEMICOLON])),i=De(t.text,["-","+"])&&(De(this._flags.last_token.type,[V.START_BLOCK,V.START_EXPR,V.EQUALS,V.OPERATOR])||De(this._flags.last_token.text,Sc)||this._flags.last_token.text===",");if(!this.start_of_statement(t)){var r=!e;this.handle_whitespace_and_comments(t,r)}if(ft(this._flags.last_token,Ph)){this._output.space_before_token=!0,this.print_token(t);return}if(t.text==="*"&&this._flags.last_token.type===V.DOT){this.print_token(t);return}if(t.text==="::"){this.print_token(t);return}if(this._flags.last_token.type===V.OPERATOR&&De(this._options.operator_position,YE)&&this.allow_wrap_or_preserved_newline(t),t.text===":"&&this._flags.in_case){this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==V.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0;return}var n=!0,s=!0,o=!1;if(t.text===":"?this._flags.ternary_depth===0?n=!1:(this._flags.ternary_depth-=1,o=!0):t.text==="?"&&(this._flags.ternary_depth+=1),!i&&!e&&this._options.preserve_newlines&&De(t.text,Ic)){var a=t.text===":",l=a&&o,u=a&&!o;switch(this._options.operator_position){case vc.before_newline:this._output.space_before_token=!u,this.print_token(t),(!a||l)&&this.allow_wrap_or_preserved_newline(t),this._output.space_before_token=!0;return;case vc.after_newline:this._output.space_before_token=!0,!a||l?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),this._output.space_before_token=!0;return;case vc.preserve_newline:u||this.allow_wrap_or_preserved_newline(t),n=!(this._output.just_added_newline()||u),this._output.space_before_token=n,this.print_token(t),this._output.space_before_token=!0;return}}if(e){this.allow_wrap_or_preserved_newline(t),n=!1;var c=this._tokens.peek();s=c&&De(c.type,[V.WORD,V.RESERVED])}else t.text==="..."?(this.allow_wrap_or_preserved_newline(t),n=this._flags.last_token.type===V.START_BLOCK,s=!1):(De(t.text,["--","++","!","~"])||i)&&((this._flags.last_token.type===V.COMMA||this._flags.last_token.type===V.START_EXPR)&&this.allow_wrap_or_preserved_newline(t),n=!1,s=!1,t.newlines&&(t.text==="--"||t.text==="++")&&this.print_newline(!1,!0),this._flags.last_token.text===";"&&Nc(this._flags.mode)&&(n=!0),this._flags.last_token.type===V.RESERVED?n=!0:this._flags.last_token.type===V.END_EXPR?n=!(this._flags.last_token.text==="]"&&(t.text==="--"||t.text==="++")):this._flags.last_token.type===V.OPERATOR&&(n=De(t.text,["--","-","++","+"])&&De(this._flags.last_token.text,["--","-","++","+"]),De(t.text,["+","-"])&&De(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode===pe.BlockStatement&&!this._flags.inline_frame||this._flags.mode===pe.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline());this._output.space_before_token=this._output.space_before_token||n,this.print_token(t),this._output.space_before_token=s};We.prototype.handle_block_comment=function(t,e){if(this._output.raw){this._output.add_raw_token(t),t.directives&&t.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(t.directives){this.print_newline(!1,e),this.print_token(t),t.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!Sh.newline.test(t.text)&&!t.newlines){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0;return}else this.print_block_commment(t,e)};We.prototype.print_block_commment=function(t,e){var i=G3(t.text),r,n=!1,s=!1,o=t.whitespace_before,a=o.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(i[0]),this.print_newline(!1,e),i.length>1){for(i=i.slice(1),n=H3(i,"*"),s=W3(i,o),n&&(this._flags.alignment=1),r=0;r<i.length;r++)n?(this.print_token_line_indentation(t),this._output.add_token(V3(i[r]))):s&&i[r]?(this.print_token_line_indentation(t),this._output.add_token(i[r].substring(a))):(this._output.current_line.set_indent(-1),this._output.add_token(i[r])),this.print_newline(!1,e);this._flags.alignment=0}};We.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)};We.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),ft(this._flags.last_token,Ph)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)};We.prototype.handle_unknown=function(t,e){this.print_token(t),t.text[t.text.length-1]===`
`&&this.print_newline(!1,e)};We.prototype.handle_eof=function(t){for(;this._flags.mode===pe.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)};$E.exports.Beautifier=We});var QE=A((Lye,Ky)=>{"use strict";var Y3=zE().Beautifier,K3=My().Options;function $3(t,e){var i=new Y3(t,e);return i.beautify()}Ky.exports=$3;Ky.exports.defaultOptions=function(){return new K3}});var $y=A((Oye,ZE)=>{"use strict";var XE=bh().Options;function JE(t){XE.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var i=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var r=0;r<i.length;r++)i[r]!=="expand"?this.brace_style="collapse":this.brace_style=i[r]}JE.prototype=new XE;ZE.exports.Options=JE});var rC=A((Mye,iC)=>{"use strict";var z3=$y().Options,Q3=yh().Output,X3=Ih().InputScanner,J3=vh().Directives,eC=new J3(/\/\*/,/\*\//),tC=/\r\n|[\r\n]/,Z3=/\r\n|[\r\n]/g,Ah=/\s/,e$=/(?:\s|\n)+/g,t$=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,i$=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function ps(t,e){this._source_text=t||"",this._options=new z3(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}ps.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,this._ch==="\\")e+=this._input.next();else if(t.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return e};ps.prototype.eatWhitespace=function(t){for(var e=Ah.test(this._input.peek()),i=0;Ah.test(this._input.peek());)this._ch=this._input.next(),t&&this._ch===`
`&&(i===0||i<this._options.max_preserve_newlines)&&(i++,this._output.add_new_line(!0));return e};ps.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,i=this._input.peek(e);i;){if(i==="{")return!0;if(i==="(")t+=1;else if(i===")"){if(t===0)return!1;t-=1}else if(i===";"||i==="}")return!1;e++,i=this._input.peek(e)}return!1};ps.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)};ps.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)};ps.prototype.indent=function(){this._indentLevel++};ps.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--};ps.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;e==="auto"&&(e=`
`,t&&tC.test(t||"")&&(e=t.match(tC)[0])),t=t.replace(Z3,`
`);var i=t.match(/^[\t ]*/)[0];this._output=new Q3(this._options,i),this._input=new X3(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var r=0,n=!1,s=!1,o=!1,a=!1,l=!1,u=this._ch,c,f,d;c=this._input.read(e$),f=c!=="",d=u,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),u=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var h=this._input.read(t$),p=eC.get_directives(h);p&&p.ignore==="start"&&(h+=eC.readIgnored(this._input)),this.print_string(h),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(i$)),this.eatWhitespace(!0);else if(this._ch==="@")if(this.preserveSingleSpace(f),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var y=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);y.match(/[ :]$/)&&(y=this.eatString(": ").replace(/\s$/,""),this.print_string(y),this._output.space_before_token=!0),y=y.replace(/\s$/,""),y==="extend"?a=!0:y==="import"&&(l=!0),y in this.NESTED_AT_RULE?(this._nestedLevel+=1,y in this.CONDITIONAL_GROUP_RULE&&(o=!0)):!n&&r===0&&y.indexOf(":")!==-1&&(s=!0,this.indent())}else this._ch==="#"&&this._input.peek()==="{"?(this.preserveSingleSpace(f),this.print_string(this._ch+this.eatString("}"))):this._ch==="{"?(s&&(s=!1,this.outdent()),o?(o=!1,n=this._indentLevel>=this._nestedLevel):n=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&n&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):this._ch==="}"?(this.outdent(),this._output.add_new_line(),d==="{"&&this._output.trim(!0),l=!1,a=!1,s&&(this.outdent(),s=!1),this.print_string(this._ch),n=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0)):this._ch===":"?(n||o)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!a&&r===0?(this.print_string(":"),s||(s=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):this._ch==='"'||this._ch==="'"?(this.preserveSingleSpace(f),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):this._ch===";"?r===0?(s&&(this.outdent(),s=!1),a=!1,l=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):this._ch==="("?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),r++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),r&&(r--,this.outdent()))):(this.preserveSingleSpace(f),this.print_string(this._ch),this.eatWhitespace(),r++,this.indent()):this._ch===")"?(r&&(r--,this.outdent()),this.print_string(this._ch)):this._ch===","?(this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&!s&&r===0&&!l?this._output.add_new_line():this._output.space_before_token=!0):(this._ch===">"||this._ch==="+"||this._ch==="~")&&!s&&r===0?this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Ah.test(this._ch)&&(this._ch="")):this._ch==="]"?this.print_string(this._ch):this._ch==="["?(this.preserveSingleSpace(f),this.print_string(this._ch)):this._ch==="="?(this.eatWhitespace(),this.print_string("="),Ah.test(this._ch)&&(this._ch="")):this._ch==="!"&&!this._input.lookBack("\\")?(this.print_string(" "),this.print_string(this._ch)):(this.preserveSingleSpace(f),this.print_string(this._ch));var v=this._output.get_code(e);return v};iC.exports.Beautifier=ps});var nC=A((qye,zy)=>{"use strict";var r$=rC().Beautifier,n$=$y().Options;function s$(t,e){var i=new r$(t,e);return i.beautify()}zy.exports=s$;zy.exports.defaultOptions=function(){return new n$}});var Qy=A((Bye,aC)=>{"use strict";var sC=bh().Options;function oC(t){sC.call(this,t,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}oC.prototype=new sC;aC.exports.Options=oC});var Zy=A((Vye,Jy)=>{"use strict";var uC=yc().Tokenizer,Xy=yc().TOKEN,o$=vh().Directives,a$=Gy().TemplatablePattern,l$=gc().Pattern,Ft={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Xy.START,RAW:Xy.RAW,EOF:Xy.EOF},lC=new o$(/<\!--/,/-->/),Pi=function(t,e){uC.call(this,t,e),this._current_tag_name="";var i=new a$(this._input).read_options(this._options),r=new l$(this._input);if(this.__patterns={word:i.until(/[\n\r\t <]/),single_quote:i.until_after(/'/),double_quote:i.until_after(/"/),attribute:i.until(/[\n\r\t =>]|\/>/),element_name:i.until(/[\n\r\t >\/]/),handlebars_comment:r.starting_with(/{{!--/).until_after(/--}}/),handlebars:r.starting_with(/{{/).until_after(/}}/),handlebars_open:r.until(/[\n\r\t }]/),handlebars_raw_close:r.until(/}}/),comment:r.starting_with(/<!--/).until_after(/-->/),cdata:r.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:r.starting_with(/<!\[/).until_after(/]>/),processing:r.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var n=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=r.matching(n).until_after(n)}};Pi.prototype=new uC;Pi.prototype._is_comment=function(t){return!1};Pi.prototype._is_opening=function(t){return t.type===Ft.TAG_OPEN};Pi.prototype._is_closing=function(t,e){return t.type===Ft.TAG_CLOSE&&e&&((t.text===">"||t.text==="/>")&&e.text[0]==="<"||t.text==="}}"&&e.text[0]==="{"&&e.text[1]==="{")};Pi.prototype._reset=function(){this._current_tag_name=""};Pi.prototype._get_next_token=function(t,e){var i=null;this._readWhitespace();var r=this._input.peek();return r===null?this._create_token(Ft.EOF,""):(i=i||this._read_open_handlebars(r,e),i=i||this._read_attribute(r,t,e),i=i||this._read_close(r,e),i=i||this._read_raw_content(r,t,e),i=i||this._read_content_word(r),i=i||this._read_comment_or_cdata(r),i=i||this._read_processing(r),i=i||this._read_open(r,e),i=i||this._create_token(Ft.UNKNOWN,this._input.next()),i)};Pi.prototype._read_comment_or_cdata=function(t){var e=null,i=null,r=null;if(t==="<"){var n=this._input.peek(1);n==="!"&&(i=this.__patterns.comment.read(),i?(r=lC.get_directives(i),r&&r.ignore==="start"&&(i+=lC.readIgnored(this._input))):i=this.__patterns.cdata.read()),i&&(e=this._create_token(Ft.COMMENT,i),e.directives=r)}return e};Pi.prototype._read_processing=function(t){var e=null,i=null,r=null;if(t==="<"){var n=this._input.peek(1);(n==="!"||n==="?")&&(i=this.__patterns.conditional_comment.read(),i=i||this.__patterns.processing.read()),i&&(e=this._create_token(Ft.COMMENT,i),e.directives=r)}return e};Pi.prototype._read_open=function(t,e){var i=null,r=null;return e||t==="<"&&(i=this._input.next(),this._input.peek()==="/"&&(i+=this._input.next()),i+=this.__patterns.element_name.read(),r=this._create_token(Ft.TAG_OPEN,i)),r};Pi.prototype._read_open_handlebars=function(t,e){var i=null,r=null;return e||this._options.indent_handlebars&&t==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(i=this.__patterns.handlebars_comment.read(),i=i||this.__patterns.handlebars.read(),r=this._create_token(Ft.COMMENT,i)):(i=this.__patterns.handlebars_open.read(),r=this._create_token(Ft.TAG_OPEN,i))),r};Pi.prototype._read_close=function(t,e){var i=null,r=null;return e&&(e.text[0]==="<"&&(t===">"||t==="/"&&this._input.peek(1)===">")?(i=this._input.next(),t==="/"&&(i+=this._input.next()),r=this._create_token(Ft.TAG_CLOSE,i)):e.text[0]==="{"&&t==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),r=this._create_token(Ft.TAG_CLOSE,"}}"))),r};Pi.prototype._read_attribute=function(t,e,i){var r=null,n="";if(i&&i.text[0]==="<")if(t==="=")r=this._create_token(Ft.EQUALS,this._input.next());else if(t==='"'||t==="'"){var s=this._input.next();t==='"'?s+=this.__patterns.double_quote.read():s+=this.__patterns.single_quote.read(),r=this._create_token(Ft.VALUE,s)}else n=this.__patterns.attribute.read(),n&&(e.type===Ft.EQUALS?r=this._create_token(Ft.VALUE,n):r=this._create_token(Ft.ATTRIBUTE,n));return r};Pi.prototype._is_content_unformatted=function(t){return this._options.void_elements.indexOf(t)===-1&&(this._options.content_unformatted.indexOf(t)!==-1||this._options.unformatted.indexOf(t)!==-1)};Pi.prototype._read_raw_content=function(t,e,i){var r="";if(i&&i.text[0]==="{")r=this.__patterns.handlebars_raw_close.read();else if(e.type===Ft.TAG_CLOSE&&e.opened.text[0]==="<"&&e.text[0]!=="/"){var n=e.opened.text.substr(1).toLowerCase();if(n==="script"||n==="style"){var s=this._read_comment_or_cdata(t);if(s)return s.type=Ft.TEXT,s;r=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(n)&&(r=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig")))}return r?this._create_token(Ft.TEXT,r):null};Pi.prototype._read_content_word=function(t){var e="";if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(Ft.TEXT,e)};Jy.exports.Tokenizer=Pi;Jy.exports.TOKEN=Ft});var pC=A((Uye,dC)=>{"use strict";var u$=Qy().Options,c$=yh().Output,f$=Zy().Tokenizer,nt=Zy().TOKEN,cC=/\r\n|[\r\n]/,d$=/\r\n|[\r\n]/g,$r=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new c$(t,e)};$r.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)};$r.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e};$r.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()};$r.prototype.add_raw_token=function(t){this._output.add_raw_token(t)};$r.prototype.print_preserved_newlines=function(t){var e=0;t.type!==nt.TEXT&&t.previous.type!==nt.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var i=0;i<e;i++)this.print_newline(i>0);return e!==0};$r.prototype.traverse_whitespace=function(t){return t.whitespace_before||t.newlines?(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0):!1};$r.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};$r.prototype.print_newline=function(t){this._output.add_new_line(t)};$r.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))};$r.prototype.indent=function(){this.indent_level++};$r.prototype.get_full_indent=function(t){return t=this.indent_level+(t||0),t<1?"":this._output.get_indent_string(t)};var p$=function(t){for(var e=null,i=t.next;i.type!==nt.EOF&&t.closed!==i;){if(i.type===nt.ATTRIBUTE&&i.text==="type"){i.next&&i.next.type===nt.EQUALS&&i.next.next&&i.next.next.type===nt.VALUE&&(e=i.next.next.text);break}i=i.next}return e},h$=function(t,e){var i=null,r=null;return e.closed?(t==="script"?i="text/javascript":t==="style"&&(i="text/css"),i=p$(e)||i,i.search("text/css")>-1?r="css":i.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?r="javascript":i.search(/(text|application|dojo)\/(x-)?(html)/)>-1?r="html":i.search(/test\/null/)>-1&&(r="null"),r):null};function Pc(t,e){return e.indexOf(t)!==-1}function m$(t,e,i){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=i||0,this.parser_token=e||null}function ga(t){this._printer=t,this._current_frame=null}ga.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};ga.prototype.record_tag=function(t){var e=new m$(this._current_frame,t,this._printer.indent_level);this._current_frame=e};ga.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e};ga.prototype._get_frame=function(t,e){for(var i=this._current_frame;i&&t.indexOf(i.tag)===-1;){if(e&&e.indexOf(i.tag)!==-1){i=null;break}i=i.parent}return i};ga.prototype.try_pop=function(t,e){var i=this._get_frame([t],e);return this._try_pop_frame(i)};ga.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)};function Kr(t,e,i,r){this._source_text=t||"",e=e||{},this._js_beautify=i,this._css_beautify=r,this._tag_stack=null;var n=new u$(e,"html");this._options=n,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Kr.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;this._options.eol==="auto"&&(e=`
`,t&&cC.test(t)&&(e=t.match(cC)[0])),t=t.replace(d$,`
`);var i=t.match(/^[\t ]*/)[0],r={text:"",type:""},n=new fC,s=new $r(this._options,i),o=new f$(t,this._options).tokenize();this._tag_stack=new ga(s);for(var a=null,l=o.next();l.type!==nt.EOF;)l.type===nt.TAG_OPEN||l.type===nt.COMMENT?(a=this._handle_tag_open(s,l,n,r),n=a):l.type===nt.ATTRIBUTE||l.type===nt.EQUALS||l.type===nt.VALUE||l.type===nt.TEXT&&!n.tag_complete?a=this._handle_inside_tag(s,l,n,o):l.type===nt.TAG_CLOSE?a=this._handle_tag_close(s,l,n):l.type===nt.TEXT?a=this._handle_text(s,l,n):s.add_raw_token(l),r=a,l=o.next();var u=s._output.get_code(e);return u};Kr.prototype._handle_tag_close=function(t,e,i){var r={text:e.text,type:e.type};return t.alignment_size=0,i.tag_complete=!0,t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),i.is_unformatted?t.add_raw_token(e):(i.tag_start_char==="<"&&(t.set_space_before_token(e.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&i.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),i.indent_content&&!(i.is_unformatted||i.is_content_unformatted)&&(t.indent(),i.indent_content=!1),!i.is_inline_element&&!(i.is_unformatted||i.is_content_unformatted)&&t.set_wrap_point(),r};Kr.prototype._handle_inside_tag=function(t,e,i,r){var n=i.has_wrapped_attrs,s={text:e.text,type:e.type};if(t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),i.is_unformatted)t.add_raw_token(e);else if(i.tag_start_char==="{"&&e.type===nt.TEXT)t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e);else{if(e.type===nt.ATTRIBUTE?(t.set_space_before_token(!0),i.attr_count+=1):(e.type===nt.EQUALS||e.type===nt.VALUE&&e.previous.type===nt.EQUALS)&&t.set_space_before_token(!1),e.type===nt.ATTRIBUTE&&i.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),n=n||e.newlines!==0),this._is_wrap_attributes_force)){var o=i.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&i.attr_count===1){var a=!0,l=0,u;do{if(u=r.peek(l),u.type===nt.ATTRIBUTE){a=!1;break}l+=1}while(l<4&&u.type!==nt.EOF&&u.type!==nt.TAG_CLOSE);o=!a}o&&(t.print_newline(!1),n=!0)}t.print_token(e),n=n||t.previous_token_wrapped(),i.has_wrapped_attrs=n}return s};Kr.prototype._handle_text=function(t,e,i){var r={text:e.text,type:"TK_CONTENT"};return i.custom_beautifier_name?this._print_custom_beatifier_text(t,e,i):i.is_unformatted||i.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),r};Kr.prototype._print_custom_beatifier_text=function(t,e,i){var r=this;if(e.text!==""){var n=e.text,s,o=1,a="",l="";i.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?s=this._js_beautify:i.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?s=this._css_beautify:i.custom_beautifier_name==="html"&&(s=function(p,y){var v=new Kr(p,y,r._js_beautify,r._css_beautify);return v.beautify()}),this._options.indent_scripts==="keep"?o=0:this._options.indent_scripts==="separate"&&(o=-t.indent_level);var u=t.get_full_indent(o);if(n=n.replace(/\n[ \t]*$/,""),i.custom_beautifier_name!=="html"&&n[0]==="<"&&n.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(n);if(!c){t.add_raw_token(e);return}a=u+c[1]+`
`,n=c[4],c[5]&&(l=u+c[5]),n=n.replace(/\n[ \t]*$/,""),(c[2]||c[3].indexOf(`
`)!==-1)&&(c=c[3].match(/[ \t]+$/),c&&(e.whitespace_before=c[0]))}if(n)if(s){var f=function(){this.eol=`
`};f.prototype=this._options.raw_options;var d=new f;n=s(u+n,d)}else{var h=e.whitespace_before;h&&(n=n.replace(new RegExp(`
(`+h+")?","g"),`
`)),n=u+n.replace(/\n/g,`
`+u)}a&&(n?n=a+n+`
`+l:n=a+l),t.print_newline(!1),n&&(e.text=n,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}};Kr.prototype._handle_tag_open=function(t,e,i,r){var n=this._get_tag_open_token(e);return(i.is_unformatted||i.is_content_unformatted)&&!i.is_empty_element&&e.type===nt.TAG_OPEN&&e.text.indexOf("</")===0?(t.add_raw_token(e),n.start_tag_token=this._tag_stack.try_pop(n.tag_name)):(t.traverse_whitespace(e),this._set_tag_position(t,e,n,i,r),n.is_inline_element||t.set_wrap_point(),t.print_token(e)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(n.alignment_size=e.text.length+1),!n.tag_complete&&!n.is_unformatted&&(t.alignment_size=n.alignment_size),n};var fC=function(t,e){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!e)this.tag_complete=!0;else{var i;this.tag_start_char=e.text[0],this.text=e.text,this.tag_start_char==="<"?(i=e.text.match(/^<([^\s>]*)/),this.tag_check=i?i[1]:""):(i=e.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=i?i[1]:"",e.text==="{{#>"&&this.tag_check===">"&&e.next!==null&&(this.tag_check=e.next.text)),this.tag_check=this.tag_check.toLowerCase(),e.type===nt.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&e.closed.text==="/>",this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))}};Kr.prototype._get_tag_open_token=function(t){var e=new fC(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||Pc(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&Pc(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&Pc(e.tag_check,this._options.content_unformatted),e.is_inline_element=Pc(e.tag_name,this._options.inline)||e.tag_start_char==="{",e};Kr.prototype._set_tag_position=function(t,e,i,r,n){if(i.is_empty_element||(i.is_end_tag?i.start_tag_token=this._tag_stack.try_pop(i.tag_name):(this._do_optional_end_element(i)&&(i.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(i),(i.tag_name==="script"||i.tag_name==="style")&&!(i.is_unformatted||i.is_content_unformatted)&&(i.custom_beautifier_name=h$(i.tag_check,e)))),Pc(i.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),i.is_empty_element){if(i.tag_start_char==="{"&&i.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),i.indent_content=!0;var s=t.current_line_has_match(/{{#if/);s||t.print_newline(!1)}i.tag_name==="!--"&&n.type===nt.TAG_CLOSE&&r.is_end_tag&&i.text.indexOf(`
`)===-1||(i.is_inline_element||i.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,i))}else if(i.is_end_tag){var o=!1;o=i.start_tag_token&&i.start_tag_token.multiline_content,o=o||!i.is_inline_element&&!(r.is_inline_element||r.is_unformatted)&&!(n.type===nt.TAG_CLOSE&&i.start_tag_token===r)&&n.type!=="TK_CONTENT",(i.is_content_unformatted||i.is_unformatted)&&(o=!1),o&&t.print_newline(!1)}else i.indent_content=!i.custom_beautifier_name,i.tag_start_char==="<"&&(i.tag_name==="html"?i.indent_content=this._options.indent_inner_html:i.tag_name==="head"?i.indent_content=this._options.indent_head_inner_html:i.tag_name==="body"&&(i.indent_content=this._options.indent_body_inner_html)),!(i.is_inline_element||i.is_unformatted)&&(n.type!=="TK_CONTENT"||i.is_content_unformatted)&&t.print_newline(!1),this._calcluate_parent_multiline(t,i)};Kr.prototype._calcluate_parent_multiline=function(t,e){e.parent&&t._output.just_added_newline()&&!((e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element)&&(e.parent.multiline_content=!0)};var g$=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],_$=["a","audio","del","ins","map","noscript","video"];Kr.prototype._do_optional_end_element=function(t){var e=null;if(!(t.is_empty_element||!t.is_start_tag||!t.parent)){if(t.tag_name==="body")e=e||this._tag_stack.try_pop("head");else if(t.tag_name==="li")e=e||this._tag_stack.try_pop("li",["ol","ul"]);else if(t.tag_name==="dd"||t.tag_name==="dt")e=e||this._tag_stack.try_pop("dt",["dl"]),e=e||this._tag_stack.try_pop("dd",["dl"]);else if(t.parent.tag_name==="p"&&g$.indexOf(t.tag_name)!==-1){var i=t.parent.parent;(!i||_$.indexOf(i.tag_name)===-1)&&(e=e||this._tag_stack.try_pop("p"))}else t.tag_name==="rp"||t.tag_name==="rt"?(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]),e=e||this._tag_stack.try_pop("rp",["ruby","rtc"])):t.tag_name==="optgroup"?e=e||this._tag_stack.try_pop("optgroup",["select"]):t.tag_name==="option"?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):t.tag_name==="colgroup"?e=e||this._tag_stack.try_pop("caption",["table"]):t.tag_name==="thead"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"])):t.tag_name==="tbody"||t.tag_name==="tfoot"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("thead",["table"]),e=e||this._tag_stack.try_pop("tbody",["table"])):t.tag_name==="tr"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(t.tag_name==="th"||t.tag_name==="td")&&(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),e=e||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return t.parent=this._tag_stack.get_parser_token(),e}};dC.exports.Beautifier=Kr});var hC=A((jye,eT)=>{"use strict";var y$=pC().Beautifier,T$=Qy().Options;function b$(t,e,i,r){var n=new y$(t,e,i,r);return n.beautify()}eT.exports=b$;eT.exports.defaultOptions=function(){return new T$}});var TC=A((Gye,Eh)=>{"use strict";var mC=QE(),gC=nC(),_C=hC();function yC(t,e,i,r){return i=i||mC,r=r||gC,_C(t,e,i,r)}yC.defaultOptions=_C.defaultOptions;Eh.exports.js=mC;Eh.exports.css=gC;Eh.exports.html=yC});var vC=A((Hye,IC)=>{"use strict";function bC(t,e,i){var r=function(n,s){return t.js_beautify(n,s)};return r.js=t.js_beautify,r.css=e.css_beautify,r.html=i.html_beautify,r.js_beautify=t.js_beautify,r.css_beautify=e.css_beautify,r.html_beautify=i.html_beautify,r}typeof define=="function"&&define.amd?define(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(t,e,i){return bC(t,e,i)}):function(t){var e=TC();e.js_beautify=e.js,e.css_beautify=e.css,e.html_beautify=e.html,t.exports=bC(e,e,e)}(IC)});var lR=A((bbe,aR)=>{"use strict";aR.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let t=this.input();if(this.is_WHITESPACE()){do t=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(t){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":case".":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||t==="\\"){for(;this.offset<this.size;){let e=this.input();if(!(this.is_LABEL()||e==="\\")){e&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${t}" at line ${this.yylineno} (offset ${this.offset})`)}}});var cR=A((Ibe,uR)=>{"use strict";uR.exports={T_COMMENT:function(){for(;this.offset<this.size;){let t=this.input();if(t===`
`||t==="\r")return this.tok.T_COMMENT;if(t==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(t==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let t=this.input(),e=this.tok.T_COMMENT;if(t==="*"){if(t=this.input(),this.is_WHITESPACE()&&(e=this.tok.T_DOC_COMMENT),t==="/")return e;this.unput(1)}for(;this.offset<this.size;)if(t=this.input(),t==="*"&&this._input[this.offset]==="/"){this.input();break}return e}}});var dR=A((vbe,fR)=>{"use strict";fR.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let t=this.input();if(t=="<"){if(t=this.ahead(1),t=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(t=this._input[this.offset+4],t===" "||t==="	"||t===`
`||t==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&t=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var mR=A((Nbe,hR)=>{"use strict";var Vh=10,pR="2147483648";process.arch=="x64"&&(Vh=19,pR="9223372036854775808");hR.exports={consume_NUM:function(){let t=this.yytext[0],e=t===".";if(t==="0")if(t=this.input(),t==="x"||t==="X"){if(t=this.input(),t!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(t?2:1)}else if(t==="b"||t==="B"){if(t=this.input(),t!=="_"&&t==="0"||t==="1")return this.consume_BNUM();this.unput(t?2:1)}else if(t==="o"||t==="O"){if(t=this.input(),t!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(t?2:1)}else this.is_NUM()||t&&this.unput(1);for(;this.offset<this.size;){let i=t;if(t=this.input(),t==="_"){if(i==="_"){this.unput(2);break}if(i==="."){this.unput(1);break}if(i==="e"||i==="E"){this.unput(2);break}}else if(t==="."){if(e){this.unput(1);break}if(i==="_"){this.unput(2);break}e=!0;continue}else if(t==="e"||t==="E"){if(i==="_"){this.unput(1);break}let r=2;if(t=this.input(),(t==="+"||t==="-")&&(r=3,t=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(t?r:r-1);break}if(!this.is_NUM()){t&&this.unput(1);break}}return e?this.tok.T_DNUMBER:this.yytext.length<Vh-1?this.tok.T_LNUMBER:this.yytext.length<Vh||this.yytext.length==Vh&&this.yytext<pR?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let t=this.input();if(!this.is_HEX()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let t=this.input();if(!this.is_NUM()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let t;for(;this.offset<this.size;)if(t=this.input(),t!=="0"&&t!=="1"&&t!=="_"){t&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){let t=this.input();if(!this.is_OCTAL()){t&&this.unput(1);break}}return this.tok.T_LNUMBER}}});var _R=A((Sbe,gR)=>{"use strict";gR.exports={matchST_LOOKING_FOR_PROPERTY:function(){let t=this.input();if(t==="-"){if(t=this.input(),t===">")return this.tok.T_OBJECT_OPERATOR;t&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),t&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let t=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),t=this.input(),t==="["||t==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else t&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let t=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(t==="]")return this.popState(),"]";if(t==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||t==="\\"||t==="'"||t==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(t==="["||t==="{"||t==="}"||t==='"'||t==="`"||this.is_TOKEN())return t;throw new Error("Unexpected terminal")}}}});var TR=A((Pbe,yR)=>{"use strict";yR.exports={matchST_IN_SCRIPTING:function(){let t=this.input();switch(t){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let e=this._input[this.offset];return(e===`
`||e==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),t=this._input[this.offset],(t===`
`||t==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(t==="."){if(t=this.input(),this.is_NUM_START())return this.consume_NUM();t&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+t+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let t=this.input();if(!(t===" "||t==="	"||t===`
`||t==="\r")){t&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var vR=A((Abe,IR)=>{"use strict";var ho=[`
`,"\r"],bR=[`
`,"\r",";"],A$=bR.concat(["	"," ",",","]",")","/","=","!"]);IR.exports={T_CONSTANT_ENCAPSED_STRING:function(){let t;for(;this.offset<this.size;)if(t=this.input(),t=="\\")this.input();else if(t=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let t=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let e=this._input[this.offset-1];if(e==="'"||e==='"'?this.offset++:e=null,this.is_LABEL_START()){let i=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let r=this._input.substring(i,this.offset-1);if((!e||e===this._input[this.offset-1])&&(e&&this.offset++,ho.includes(this._input[this.offset-1])))return this.heredoc_label.label=r,this.heredoc_label.length=r.length,this.heredoc_label.finished=!1,i=this.offset-t,this.offset=t,this.consume(i),e==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=t,!1},ST_DOUBLE_QUOTES:function(){let t;for(;this.offset<this.size;)if(t=this.input(),t=="\\")this.input();else{if(t=='"')break;if(t=="$"){if(t=this.input(),t=="{"||this.is_LABEL_START()){this.unput(2);break}t&&this.unput(1)}else if(t=="{"){if(t=this.input(),t=="$"){this.unput(2);break}t&&this.unput(1)}}if(t=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let e=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(e=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-e),this.unput(this.yytext.length-e),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(t,e){let i=this._input[t-2];if(!ho.includes(i))return!1;let r=!1,n=!1,s=0,o=this._input[t-1];if(this.version>=703){for(;o==="	"||o===" ";)o===" "?r=!0:o==="	"&&(n=!0),o=this._input[t+s],s++;if(t=t+s,ho.includes(this._input[t-1]))return!1}if(this._input.substring(t-1,t-1+this.heredoc_label.length)===this.heredoc_label.label){let a=this._input[t-1+this.heredoc_label.length];if((this.version>=703?A$:bR).includes(a)){if(e){if(this.consume(s),r&&n)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=s,this.heredoc_label.indentation_uses_spaces=r,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let t=this.offset+1;for(;t<this._input.length;){if(this.isDOC_MATCH(t,!1))return;if(!ho.includes(this._input[t-1]))for(;!ho.includes(this._input[t++])&&t<this._input.length;);t++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let t=this._input[this.offset-1];for(;this.offset<this.size;)if(ho.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let t=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(t==="\\"&&(t=this.input(),ho.includes(t)||(t=this.input())),ho.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(t==="$"){if(t=this.input(),t==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}}else if(t==="{"){if(t=this.input(),t==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let t=this.input();if(t=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(t==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else t&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let t=this.input();if(t==="$"){if(t=this.input(),t==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(t==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(t==="`")return this.popState(),"`";for(;this.offset<this.size;){if(t==="\\")this.input();else if(t==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(t==="$"){if(t=this.input(),t==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}continue}else if(t==="{"){if(t=this.input(),t==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let t=this.input();if(t==="$"){if(t=this.input(),t==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(t==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(t==='"')return this.popState(),'"';for(;this.offset<this.size;){if(t==="\\")this.input();else if(t==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(t==="$"){if(t=this.input(),t==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}t&&this.unput(1)}else if(t==="{"){if(t=this.input(),t==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);t&&this.unput(1)}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var SR=A((Ebe,NR)=>{"use strict";NR.exports={T_STRING:function(){let t=this.yytext.toLowerCase(),e=this.keywords[t];if(typeof e!="number"){if(t==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),e=this.tok.T_YIELD_FROM):e=this.tok.T_YIELD;else if(e=this.tok.T_STRING,t==="b"||t==="B"){let i=this.input();if(i==='"')return this.ST_DOUBLE_QUOTES();if(i==="'")return this.T_CONSTANT_ENCAPSED_STRING();i&&this.unput(1)}}if(e===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let i=this.offset,r=this.input();for(;r==" ";)r=this.input();let n=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)r+=this.input();let s=r.slice(0,-1).toLowerCase();n=s!=="extends"&&s!=="implements"}return this.unput(this.offset-i),n?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&e!==this.tok.T_YIELD_FROM){let i=this.input();if(i==="\\"){e=t==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\")}i&&this.unput(1)}return e},consume_TOKEN:function(){let t=this._input[this.offset-1],e=this.tokenTerminals[t];return e?e.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let t=this._input[this.offset];return t===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):t==="-"?(this.input(),this.tok.T_DEC):t==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let t;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),t=this.input()}while(t==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let t=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let e=this.yytext.length;this.consume_LABEL();let i=this.yytext.substring(e-1).toLowerCase(),r=this.castKeywords[i];if(typeof r=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return r}return this.unput(this.offset-t),"("},"=":function(){let t=this._input[this.offset];return t===">"?(this.input(),this.tok.T_DOUBLE_ARROW):t==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let t=this._input[this.offset];return t==="+"?(this.input(),this.tok.T_INC):t==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let t=this._input[this.offset];return t==="<"?(t=this._input[this.offset+1],t==="="?(this.consume(2),this.tok.T_SL_EQUAL):t==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):t==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):t===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):t===">"?(t=this._input[this.offset+1],t==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_MUL_EQUAL):t==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_CONCAT_EQUAL):t==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_AND_EQUAL):t==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_OR_EQUAL):t==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var AR=A((Cbe,PR)=>{"use strict";var E$=";:,.\\[]()|^&+-/*=%!~$<>?@";PR.exports={is_NUM:function(){let t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||t===95},is_NUM_START:function(){let t=this._input.charCodeAt(this.offset-1);return t>47&&t<58},is_LABEL:function(){let t=this._input.charCodeAt(this.offset-1);return t>96&&t<123||t>64&&t<91||t===95||t>47&&t<58||t>126},is_LABEL_START:function(){let t=this._input.charCodeAt(this.offset-1);return t>64&&t<91||t>96&&t<123||t===95||t>126},consume_LABEL:function(){for(;this.offset<this.size;){let t=this.input();if(!this.is_LABEL()){t&&this.unput(1);break}}return this},is_TOKEN:function(){let t=this._input[this.offset-1];return E$.indexOf(t)!==-1},is_WHITESPACE:function(){let t=this._input[this.offset-1];return t===" "||t==="	"||t===`
`||t==="\r"},is_TABSPACE:function(){let t=this._input[this.offset-1];return t===" "||t==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let t=this.input();if(!this.is_TABSPACE()){t&&this.unput(1);break}}return this},is_HEX:function(){let t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||t>64&&t<71||t>96&&t<103||t===95},is_OCTAL:function(){let t=this._input.charCodeAt(this.offset-1);return t>47&&t<56||t===95}}});var CR=A((Rbe,ER)=>{"use strict";var Ai=function(t){this.engine=t,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};Ai.prototype.setInput=function(t){return this._input=t,this.size=t.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};Ai.prototype.input=function(){let t=this._input[this.offset];return t?(this.yytext+=t,this.offset++,t==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),t===`
`||t==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,t):""};Ai.prototype.unput=function(t){if(t===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,t++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-t);else if(t>0)if(this.offset-=t,t<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-t),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let e=0;e<this.yytext.length;e++){let i=this.yytext[e];i==="\r"?(i=this.yytext[++e],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,i!==`
`&&(i==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):i===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};Ai.prototype.tryMatch=function(t){return t===this.ahead(t.length)};Ai.prototype.tryMatchCaseless=function(t){return t===this.ahead(t.length).toLowerCase()};Ai.prototype.ahead=function(t){let e=this._input.substring(this.offset,this.offset+t);return e[e.length-1]==="\r"&&this._input[this.offset+t+1]===`
`&&(e+=`
`),e};Ai.prototype.consume=function(t){for(let e=0;e<t;e++){let i=this._input[this.offset];if(!i)break;this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,e++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};Ai.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};Ai.prototype.setState=function(t){return this.yytext=t.yytext,this.offset=t.offset,this.yylineno=t.yylineno,this.yyprevcol=t.yyprevcol,this.yylloc=t.yylloc,t.heredoc_label&&(this.heredoc_label=t.heredoc_label),this};Ai.prototype.appendToken=function(t,e){return this.tokens.push([t,e]),this};Ai.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let t=this.next()||this.lex();if(!this.all_tokens){for(;t===this.tok.T_WHITESPACE||!this.comment_tokens&&(t===this.tok.T_COMMENT||t===this.tok.T_DOC_COMMENT)||t===this.tok.T_OPEN_TAG;)t=this.next()||this.lex();if(t==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(t===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),t};Ai.prototype.begin=function(t){if(this.conditionStack.push(t),this.curCondition=t,this.stateCb=this["match"+t],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+t+'"');return this};Ai.prototype.popState=function(){let e=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return e};Ai.prototype.next=function(){let t;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(t=this.tokens.shift(),typeof t[1]=="object"?this.setState(t[1]):this.consume(t[1]),t=t[0]):t=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let e=t;typeof e=="number"?e=this.engine.tokens.values[e]:e='"'+e+'"';let i=new Error(e+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(i.stack)}return t};[lR(),cR(),dR(),mR(),_R(),TR(),vR(),SR(),AR()].forEach(function(t){for(let e in t)Ai.prototype[e]=t[e]});ER.exports=Ai});var oT=A((xbe,RR)=>{"use strict";var C$=function(t,e,i){this.line=t,this.column=e,this.offset=i};RR.exports=C$});var wR=A((wbe,xR)=>{"use strict";xR.exports={read_array:function(){let t=null,e=!1,i=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),t=")"):(e=!0,t="]");let r=[];return this.next().token!==t&&(r=this.read_array_pair_list(e)),this.expect(t),this.next(),i(e,r)},read_array_pair_list:function(t){let e=this;return this.read_list(function(){return e.read_array_pair(t)},",",!0)},read_array_pair:function(t){if(!t&&this.token===")"||t&&this.token==="]")return;if(this.token===",")return this.node("noop")();let e=this.node("entry"),i=null,r=null,n=!1,s=!1;if(this.token==="&")this.next(),n=!0,r=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),s=!0,r=this.read_expr();else{let o=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),i=o,this.token==="&"?(this.next(),n=!0,r=this.read_variable(!0,!1)):r=this.read_expr()):r=o}return e(i,r,n,s)}}});var DR=A((kbe,kR)=>{"use strict";kR.exports={read_class_declaration_statement:function(t){let e=this.node("class"),i=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let r=this.node("identifier"),n=this.text();this.next(),r=r(n);let s=this.read_extends_from(),o=this.read_implements_list();this.expect("{");let a=this.next().read_class_body(!0,!1),l=e(r,s,o,a,i);return t&&(l.attrGroups=t),l},read_class_modifiers:function(){let t=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,t.final_or_abstract,t.readonly]},read_class_modifier:function(t){return this.token===this.tok.T_READ_ONLY?(this.next(),t.readonly=1,t=this.read_class_modifier(t)):t.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),t.final_or_abstract=1,t=this.read_class_modifier(t)):t.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),t.final_or_abstract=2,t=this.read_class_modifier(t)),t},read_class_body:function(t,e){let i=[],r=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){i=i.concat(this.read_trait_use_statement());continue}if(e&&this.token===this.tok.T_CASE){let o=this.read_enum_case();this.expect(";")&&this.next(),i=i.concat(o);continue}this.token===this.tok.T_ATTRIBUTE&&(r=this.read_attr_list());let n=this.position(),s=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let o=this.read_constant_list(s,r);this.expect(";")&&this.next(),i=i.concat(o);continue}if(t&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),s[0]=null,s[1]=0),this.token===this.tok.T_FUNCTION)i.push(this.read_function(!1,s,r,n)),r=[];else if(t&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){let o=this.read_variable_list(s,r);r=[],this.expect(";"),this.next(),i=i.concat(o)}else this.error([this.tok.T_CONST,...t?[this.tok.T_VARIABLE]:[],...e?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),i},read_variable_list:function(t,e){let i=this.node("propertystatement"),r=this.read_list(function(){let s=this.node("property"),o=!1;this.token===this.tok.T_READ_ONLY&&(o=!0,this.next());let[a,l]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let u=this.node("identifier"),c=this.text().substring(1);return this.next(),u=u(c),this.token===";"||this.token===","?s(u,null,o,a,l,e||[]):this.token==="="?s(u,this.next().read_expr(),o,a,l,e||[]):(this.expect([",",";","="]),s(u,null,a,l,e||[]))},",");return i(null,r,t)},read_constant_list:function(t,e){this.expect(this.tok.T_CONST)&&this.next();let i=this.node("classconstant"),r=this.read_list(function(){let s=this.node("constant"),o=null,a=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){o=this.node("identifier");let l=this.text();this.next(),o=o(l)}else this.expect("IDENTIFIER");return this.expect("=")&&(a=this.next().read_expr()),s(o,a)},",");return i(null,r,t,e||[])},read_member_flags:function(t){let e=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let i=0,r=0;do{switch(this.token){case this.tok.T_PUBLIC:i=0,r=0;break;case this.tok.T_PROTECTED:i=0,r=1;break;case this.tok.T_PRIVATE:i=0,r=2;break;case this.tok.T_STATIC:i=1,r=1;break;case this.tok.T_ABSTRACT:i=2,r=1;break;case this.tok.T_FINAL:i=2,r=2;break}t&&(i==0&&r==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),r=-1):i==2&&r==1&&(this.error(),r=-1)),e[i]!==-1?this.error():r!==-1&&(e[i]=r)}while(this.next().is("T_MEMBER_FLAGS"))}return e[1]==-1&&(e[1]=0),e[2]==-1&&(e[2]=0),e},read_optional_type:function(){let t=!1;this.token==="?"&&(t=!0,this.next());let e=this.read_types();if(t&&!e&&this.raiseError("Expecting a type definition combined with nullable operator"),!t&&!e)return[!1,null];if(this.token==="|"){e=[e];do{this.next();let i=this.read_type();if(!i){this.raiseError("Expecting a type definition");break}e.push(i)}while(this.token==="|")}return[t,e]},read_interface_declaration_statement:function(t){let e=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let i=this.node("identifier"),r=this.text();this.next(),i=i(r);let n=this.read_interface_extends_list();this.expect("{");let s=this.next().read_interface_body();return e(i,n,s,t||[])},read_interface_body:function(){let t=[],e=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){t.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){t.push(this.read_doc_comment());continue}let i=this.position();e=this.read_attr_list();let r=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let n=this.read_constant_list(r,e);this.expect(";")&&this.next(),t=t.concat(n),e=[]}else if(this.token===this.tok.T_FUNCTION){let n=this.read_function_declaration(2,r,e,i);n.parseFlags(r),t.push(n),this.expect(";")&&this.next(),e=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),t},read_trait_declaration_statement:function(){let t=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),i=this.text();this.next(),e=e(i),this.expect("{");let r=this.next().read_class_body(!0,!1);return t(e,r)},read_trait_use_statement:function(){let t=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let e=[this.read_namespace_name()],i=null;for(;this.token===",";)e.push(this.next().read_namespace_name());if(this.token==="{"){for(i=[];this.next().token!==this.EOF&&this.token!=="}";)i.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return t(e,i)},read_trait_use_alias:function(){let t=this.node(),e=null,i;if(this.is("IDENTIFIER")){i=this.node("identifier");let r=this.text();this.next(),i=i(r)}else if(i=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){e=i,i=this.node("identifier");let r=this.text();this.next(),i=i(r)}else this.expect(this.tok.T_STRING);else i=i.name;if(this.token===this.tok.T_INSTEADOF)return t("traitprecedence",e,i,this.next().read_name_list());if(this.token===this.tok.T_AS){let r=null,n=null;if(this.next().is("T_MEMBER_FLAGS")&&(r=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){n=this.node("identifier");let s=this.text();this.next(),n=n(s)}else r===!1&&this.expect(this.tok.T_STRING);return t("traitalias",e,i,n,r)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),t("traitalias",e,i,null,null)}}});var LR=A((Dbe,FR)=>{"use strict";FR.exports={read_comment:function(){let t=this.text(),e=this.ast.prepare(t.substring(0,2)==="/*"?"commentblock":"commentline",null,this),i=this.lexer.yylloc.first_offset,r=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),e=e(t),e.offset=i,this.prev=r,e},read_doc_comment:function(){let t=this.ast.prepare("commentblock",null,this),e=this.lexer.yylloc.first_offset,i=this.text(),r=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=r,t}}});var MR=A((Fbe,OR)=>{"use strict";OR.exports={read_expr:function(t){let e=this.node();if(this.token==="@")return t||(t=this.next().read_expr()),e("silent",t);if(t||(t=this.read_expr_item()),this.token==="|")return e("bin","|",t,this.next().read_expr());if(this.token==="&")return e("bin","&",t,this.next().read_expr());if(this.token==="^")return e("bin","^",t,this.next().read_expr());if(this.token===".")return e("bin",".",t,this.next().read_expr());if(this.token==="+")return e("bin","+",t,this.next().read_expr());if(this.token==="-")return e("bin","-",t,this.next().read_expr());if(this.token==="*")return e("bin","*",t,this.next().read_expr());if(this.token==="/")return e("bin","/",t,this.next().read_expr());if(this.token==="%")return e("bin","%",t,this.next().read_expr());if(this.token===this.tok.T_POW)return e("bin","**",t,this.next().read_expr());if(this.token===this.tok.T_SL)return e("bin","<<",t,this.next().read_expr());if(this.token===this.tok.T_SR)return e("bin",">>",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return e("bin","||",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return e("bin","or",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return e("bin","&&",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return e("bin","and",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return e("bin","xor",t,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return e("bin","===",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return e("bin","!==",t,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return e("bin","==",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return e("bin","!=",t,this.next().read_expr());if(this.token==="<")return e("bin","<",t,this.next().read_expr());if(this.token===">")return e("bin",">",t,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return e("bin","<=",t,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return e("bin",">=",t,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return e("bin","<=>",t,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(t=e("bin","instanceof",t,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(t=this.read_expr(t))),this.token===this.tok.T_COALESCE)return e("bin","??",t,this.next().read_expr());if(this.token==="?"){let i=null;return this.next().token!==":"&&(i=this.read_expr()),this.expect(":")&&this.next(),e("retif",t,i,this.read_expr())}else e.destroy(t);return t},read_expr_cast:function(t){return this.node("cast")(t,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let t=null;switch(this.token){case this.tok.T_ISSET:{t=this.node("isset"),this.next().expect("(")&&this.next();let e=this.read_isset_variables();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_EMPTY:{t=this.node("empty"),this.next().expect("(")&&this.next();let e=this.read_expr();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_INCLUDE:t=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:t=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{t=this.node("eval"),this.next().expect("(")&&this.next();let e=this.read_expr();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_REQUIRE:t=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:t=this.node("include")(!0,!0,this.next().read_expr());break}return t},read_optional_expr:function(t){return this.token!==t?this.read_expr():null},read_exit_expr:function(){let t=null;return this.token==="("&&(this.next(),t=this.read_optional_expr(")"),this.expect(")")&&this.next()),t},read_expr_item:function(){let t,e,i=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return e=this.next().read_expr(),e.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(e);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let r=null,n=this.innerList;t=this.node("list"),n||(r=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let s=this.read_array_pair_list(!1);this.expect(")")&&this.next();let o=!1;for(let a=0;a<s.length;a++)if(s[a]!==null&&s[a].kind!=="noop"){o=!0;break}return o||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),n?t(s,!1):(this.innerList=!1,this.expect("=")?r(t(s,!1),this.next().read_expr(),"="):t(s,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let r=this.node("throw"),n=this.next().read_expr();return r(n)}case this.tok.T_EXIT:{let r=this.lexer.yytext.toLowerCase()==="die";t=this.node("exit"),this.next();let n=this.read_exit_expr();return t(n,r)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let r=null,n=null;return t=this.node("yield"),this.next().is("EXPR")&&(r=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(n=r,r=this.next().read_expr())),t(r,n)}case this.tok.T_YIELD_FROM:return t=this.node("yieldfrom"),e=this.next().read_expr(),t(e);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,i);case this.tok.T_STATIC:{let r=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],i);this.lexer.tokens.push(r),this.next()}}if(this.is("VARIABLE")){t=this.node(),e=this.read_variable(!1,!1);let r=e.kind==="identifier"||e.kind==="staticlookup"&&e.offset.kind==="identifier";switch(this.token){case"=":return r&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(t,e):t("assign",e,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return r&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"??=");case this.tok.T_INC:return r&&this.error("VARIABLE"),this.next(),t("post","+",e);case this.tok.T_DEC:return r&&this.error("VARIABLE"),this.next(),t("post","-",e);default:t.destroy(e)}}else if(this.is("SCALAR")){if(t=this.node(),e=this.read_scalar(),e.kind==="array"&&e.shortForm&&this.token==="="){let r=this.convertToList(e);e.loc&&(r.loc=e.loc);let n=this.next().read_expr();return t("assign",r,n,"=")}else t.destroy(e);return this.handleDereferencable(e)}else this.error("EXPR"),this.next();return e},convertToList:function(t){let e=t.items.map(r=>(r.value&&r.value.kind==="array"&&r.value.shortForm&&(r.value=this.convertToList(r.value)),r)),i=this.node("list")(e,!0);return t.loc&&(i.loc=t.loc),t.leadingComments&&(i.leadingComments=t.leadingComments),t.trailingComments&&(i.trailingComments=t.trailingComments),i},read_assignref:function(t,e){this.next();let i;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),i=this.read_new_expr()):i=this.read_variable(!1,!1),t("assignref",e,i)},read_inline_function:function(t,e){if(this.token===this.tok.T_FUNCTION){let u=this.read_function(!0,t,e);return u.attrGroups=e,u}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let i=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let r=this.is_reference();this.expect("(")&&this.next();let n=this.read_parameter_list();this.expect(")")&&this.next();let s=!1,o=null;this.token===":"&&(this.next().token==="?"&&(s=!0,this.next()),o=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let a=this.read_expr(),l=i(n,r,a,o,s,!!t);return l.attrGroups=e,l},read_match_expression:function(){let t=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let e=null,i=[];return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),i=this.read_match_arms(),this.expect("}")&&this.next(),t(e,i)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let t=[];if(this.token===this.tok.T_DEFAULT)t=null,this.next();else for(t.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),t;t.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),t},read_attribute(){let t=this.text(),e=[];return this.next(),this.token==="("&&(e=this.read_argument_list()),this.node("attribute")(t,e)},read_attr_list(){let t=[];if(this.token===this.tok.T_ATTRIBUTE)do{let e=this.node("attrgroup")([]);for(this.next(),e.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&e.attrs.push(this.read_attribute());t.push(e),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return t},read_new_expr:function(){let t=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let e=[];if(this.token==="("){this.next();let n=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(e=this.read_argument_list()),t(n,e)}let i=this.read_attr_list();if(this.token===this.tok.T_CLASS){let n=this.node("class");this.next().token==="("&&(e=this.read_argument_list());let s=this.read_extends_from(),o=this.read_implements_list(),a=null;this.expect("{")&&(a=this.next().read_class_body(!0,!1));let l=n(null,s,o,a,[0,0,0]);return l.attrGroups=i,t(l,e)}let r=this.read_new_class_name();for(;this.token==="[";){let n=this.node("offsetlookup"),s=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),r=n(r,s)}return this.token==="("&&(e=this.read_argument_list()),t(r,e)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let t=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(t=this.read_static_getter(t)),t}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(t){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)t=this.recursive_variable_chain_scan(t,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")t=this.read_dereferencable(t);else if(this.token==="(")t=this.node("call")(t,this.read_argument_list());else return t;return t}}});var BR=A((Lbe,qR)=>{"use strict";qR.exports={read_enum_declaration_statement:function(t){let e=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let i=this.node("identifier"),r=this.text();this.next(),i=i(r);let n=this.read_enum_value_type(),s=this.read_implements_list();this.expect("{");let o=this.next().read_class_body(!1,!0),a=e(i,n,s,o);return t&&(a.attrGroups=t),a},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let t=this.node("enumcase"),e=this.node("identifier"),i=this.next().text();this.next(),e=e(i);let r=this.token==="="?this.next().read_expr():null;return this.expect(";"),t(e,r)}}});var UR=A((Obe,VR)=>{"use strict";VR.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(t,e,i,r){let n=this.read_function_declaration(t?1:e?2:0,e&&e[1]===1,i||[],r);return e&&e[2]==1?(n.parseFlags(e),this.expect(";")&&this.next()):(this.expect("{")&&(n.body=this.read_code_block(!1),n.loc&&n.body.loc&&(n.loc.end=n.body.loc.end)),!t&&e&&n.parseFlags(e)),n},read_function_declaration:function(t,e,i,r){let n="function";t===1?n="closure":t===2&&(n="method");let s=this.node(n);this.expect(this.tok.T_FUNCTION)&&this.next();let o=this.is_reference(),a=!1,l=[],u=null,c=!1;if(t!==1){let h=this.node("identifier");t===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(a=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(a=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(a=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(a=this.text()),this.next()),a=h(a)}this.expect("(")&&this.next();let f=this.read_parameter_list(a.name==="__construct");this.expect(")")&&this.next(),t===1&&(l=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(c=!0,this.next()),u=this.read_types());let d=h=>(h.attrGroups=i||[],r&&h.loc&&(h.loc.start=r,h.loc.source&&(h.loc.source=this.lexer._input.substr(h.loc.start.offset,h.loc.end.offset-h.loc.start.offset))),h);return d(t===1?s(f,o,l,u,c,e):s(a,f,o,u,c))},read_lexical_vars:function(){let t=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),t=this.read_lexical_var_list(),this.expect(")")&&this.next()),t},read_list_with_dangling_comma:function(t){let e=[];for(;this.token!=this.EOF;)if(e.push(t()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return e}else{if(this.token==")")break;this.error([",",")"]);break}return e},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let t=this.node("variable");this.expect(this.tok.T_VARIABLE);let e=this.text().substring(1);return this.next(),t(e,!1)},read_parameter_list:function(t){if(this.token!==")"){let e=!1;return this.read_list_with_dangling_comma(function(){let i=this.read_parameter(t);return i&&(e&&this.raiseError("Unexpected parameter after a variadic parameter"),i.variadic&&(e=!0)),i}.bind(this),",")}return[]},read_parameter:function(t){let e=this.node("parameter"),i=null,r=null,n=null,s=!1,o=!1,a=[];this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(t?(this.next(),o=!0):this.raiseError("readonly properties can be used only on class constructor"));let l=this.read_promoted();!o&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(t?(this.next(),o=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),s=!0),n=this.read_types(),s&&!n&&this.raiseError("Expecting a type definition combined with nullable operator");let u=this.is_reference(),c=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){i=this.node("identifier");let d=this.text().substring(1);this.next(),i=i(d)}this.token=="="&&(r=this.next().read_expr());let f=e(i,n,r,u,c,o,s,l);return a&&(f.attrGroups=a),f},read_types(){let t="unset",e="union",i="intersection",r=[],n=t,s=this.read_type();if(!s)return null;for(r.push(s);this.token==="|"||this.version>=801&&this.token==="&";){let o=this.peek();if(o===this.tok.T_ELLIPSIS||o===this.tok.T_VARIABLE)break;n===t?n=this.token==="|"?e:i:(n===e&&this.token!=="|"||n===i&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),r.push(this.read_type())}return r.length===1?r[0]:n===i?this.node("intersectiontype")(r):this.node("uniontype")(r)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let t=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(t.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(t=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),t},read_non_empty_argument_list:function(){let t=!1;return this.read_function_list(function(){let e=this.read_argument();if(e){let i=e.kind==="variadic";t&&!i&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),i&&(t=!0)}return e}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let t=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let e=this.text();return this.next(),t("typereference",e.toLowerCase(),e)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let e=this.text(),i=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(e.toLowerCase())>-1?t("typereference",e.toLowerCase(),e):(this.lexer.tokens.push(i),this.next(),t.destroy(),this.read_namespace_name())}return t.destroy(),null}}});var GR=A((Mbe,jR)=>{"use strict";jR.exports={read_if:function(){let t=this.node("if"),e=this.next().read_if_expr(),i=null,r=null,n=!1;if(this.token===":"){n=!0,this.next(),i=this.node("block");let s=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){r=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){r=this.read_else_short();break}s.push(this.read_inner_statement())}i=i(null,s),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else i=this.read_statement(),this.token===this.tok.T_ELSEIF?r=this.read_if():this.token===this.tok.T_ELSE&&(r=this.next().read_statement());return t(e,i,r,n)},read_if_expr:function(){this.expect("(")&&this.next();let t=this.read_expr();return this.expect(")")&&this.next(),t},read_elseif_short:function(){let t=null,e=this.node("if"),i=this.next().read_if_expr();this.expect(":")&&this.next();let r=this.node("block"),n=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){t=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){t=this.read_else_short();break}n.push(this.read_inner_statement())}return e(i,r(null,n),t,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let t=this.node("block"),e=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)e.push(this.read_inner_statement());return t(null,e)}}});var WR=A((qbe,HR)=>{"use strict";HR.exports={read_while:function(){let t=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let e=null,i=null,r=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(r=!0,i=this.read_short_form(this.tok.T_ENDWHILE)):i=this.read_statement(),t(e,i,r)},read_do:function(){let t=this.node("do");this.expect(this.tok.T_DO)&&this.next();let e=null,i=null;return i=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),t(e,i)},read_for:function(){let t=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let e=[],i=[],r=[],n=null,s=!1;return this.expect("(")&&this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(i=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(r=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(s=!0,n=this.read_short_form(this.tok.T_ENDFOR)):n=this.read_statement(),t(e,i,r,n,s)},read_foreach:function(){let t=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let e=null,i=null,r=null,n=null,s=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),r=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(i=r,r=this.next().read_foreach_variable())),i&&i.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(s=!0,n=this.read_short_form(this.tok.T_ENDFOREACH)):n=this.read_statement(),t(e,i,r,n,s)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let t=this.token==="[",e=this.node("list");this.next(),!t&&this.expect("(")&&this.next();let i=this.read_array_pair_list(t);return this.expect(t?"]":")")&&this.next(),e(i,t)}else return this.read_variable(!1,!1)}}});var KR=A((Bbe,YR)=>{"use strict";YR.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var zR=A((Vbe,$R)=>{"use strict";$R.exports={read_namespace:function(){let t=this.node("namespace"),e;this.expect(this.tok.T_NAMESPACE)&&this.next();let i;return this.token==="{"?i={name:[""]}:i=this.read_namespace_name(),this.currentNamespace=i,this.token===";"?(this.currentNamespace=i,e=this.next().read_top_statements(),this.expect(this.EOF),t(i.name,e,!1)):this.token==="{"?(this.currentNamespace=i,e=this.next().read_top_statements(),this.expect("}")&&this.next(),e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),t(i.name,e,!0)):(this.error(["{",";"]),this.currentNamespace=i,e=this.read_top_statements(),this.expect(this.EOF),t(i,e,!1))},read_namespace_name:function(t){let e=this.node(),i,r=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:i=this.ast.name.RELATIVE_NAME,r=r.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:i=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:i=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(i=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return e("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),t||this.token!=="("){if(r.toLowerCase()==="parent")return e("parentreference",r);if(r.toLowerCase()==="self")return e("selfreference",r)}return e("name",r,i)},read_use_statement:function(){let t=this.node("usegroup"),e=[],i=null;this.expect(this.tok.T_USE)&&this.next();let r=this.read_use_type();return e.push(this.read_use_declaration(!1)),this.token===","?e=e.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(i=e[0].name,e=this.next().read_use_declarations(r===null),this.expect("}")&&this.next()),t=t(i,r,e),this.expect(";")&&this.next(),t},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(t){let e=this.node("useitem"),i=null;t&&(i=this.read_use_type());let r=this.read_namespace_name(),n=this.read_use_alias();return e(r.name,n,i)},read_use_declarations:function(t){let e=[this.read_use_declaration(t)];for(;this.token===",";){if(this.next(),t){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;e.push(this.read_use_declaration(t))}return e},read_use_alias:function(){let t=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let e=this.node("identifier"),i=this.text();this.next(),t=e(i)}return t},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var JR=A((Ube,XR)=>{"use strict";var QR={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};XR.exports={resolve_special_chars:function(t,e){return e?t.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(i,r,n)=>QR[r]?QR[r]:r[0]==="x"||r[0]==="X"?String.fromCodePoint(parseInt(r.substr(1),16)):r[0]==="u"?String.fromCodePoint(parseInt(n,16)):String.fromCodePoint(parseInt(r,8))):t.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(t,e,i,r){if(e===0)return t;this.check_heredoc_indentation_level(t,e,i,r);let n=i?" ":"	",s=new RegExp(`\\n${n}{${e}}`,"g"),o=new RegExp(`^${n}{${e}}`);return r&&(t=t.replace(o,"")),t.replace(s,`
`)},check_heredoc_indentation_level:function(t,e,i,r){let n=t.length,s=0,o=0,a=!0,l=i?" ":"	",u=!1;if(!r){if(s=t.indexOf(`
`),s===-1)return;s++}for(;s<n;)a?t[s]===l?o++:u=!0:a=!1,t[s]!==`
`&&u&&o<e?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${e})`):u=!1,t[s]===`
`&&(a=!0,o=0),s++},read_dereferencable_scalar:function(){let t=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let e=this.node("string"),i=this.text(),r=0;(i[0]==="b"||i[0]==="B")&&(r=1);let n=i[r]==='"';this.next();let s=this.resolve_special_chars(i.substring(r+1,i.length-1),n);e=e(n,s,r===1,i),this.token===this.tok.T_DOUBLE_COLON?t=this.read_static_getter(e):t=e}break;case this.tok.T_ARRAY:t=this.read_array();break;case"[":t=this.read_array();break}return t},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let t,e;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let i=this.node("number");return t=this.text(),this.next(),i(t,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let i=this.lexer.yylloc.first_offset;e=this.node("nowdoc"),t=this.next().text(),this.lexer.heredoc_label.indentation>0&&(t=t.substring(0,t.length-this.lexer.heredoc_label.indentation));let r=t[t.length-1];r===`
`?t[t.length-2]==="\r"?t=t.substring(0,t.length-2):t=t.substring(0,t.length-1):r==="\r"&&(t=t.substring(0,t.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let n=this.lexer._input.substring(i,this.lexer.yylloc.first_offset);return e=e(this.remove_heredoc_leading_whitespace_chars(t,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),n,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,e}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let i=this.error("SCALAR");return this.next(),i}}}},read_dereferencable:function(t){let e,i,r=this.node("offsetlookup");return this.token==="["?(i=this.next().read_expr(),this.expect("]")&&this.next(),e=r(t,i)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(i=this.read_encapsed_string_item(!1),e=r(t,i)),e},read_encapsed_string_item:function(t){let e=this.node("encapsedpart"),i=null,r=!1,n=this.node(),s,o,a;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let l=this.text();this.next(),n=n("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(l,t),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):l,!1,l)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(i="simple",r=!0,a=null,this.next().token===this.tok.T_STRING_VARNAME){a=this.node("variable");let l=this.text();this.next(),n.destroy(),this.token==="["?(a=a(l,!1),o=this.node("offsetlookup"),s=this.next().read_expr(),this.expect("]")&&this.next(),n=o(a,s)):n=a(l,!1)}else n=n("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)i="complex",n.destroy(),n=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(i="simple",n.destroy(),n=this.read_simple_variable(),this.token==="["&&(o=this.node("offsetlookup"),s=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),n=o(n,s)),this.token===this.tok.T_OBJECT_OPERATOR){o=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let l=this.node("identifier");a=this.text(),this.next(),n=o(n,l(a))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let l=this.text();this.next(),n.destroy(),n=n("string",!1,l,!1,l)}return this.lexer.heredoc_label.first_encaps_node=!1,e(n,i,r)},read_encapsed_string:function(t,e=!1){let i=this.lexer.yylloc.first_offset,r=this.node("encapsed");this.next();let n=this.lexer.yylloc.prev_offset-(e?1:0),s=[],o=null;for(t==="`"?o=this.ast.encapsed.TYPE_SHELL:t==='"'?o=this.ast.encapsed.TYPE_STRING:o=this.ast.encapsed.TYPE_HEREDOC;this.token!==t&&this.token!==this.EOF;)s.push(this.read_encapsed_string_item(!0));if(s.length>0&&s[s.length-1].kind==="encapsedpart"&&s[s.length-1].expression.kind==="string"){let l=s[s.length-1].expression,u=l.value[l.value.length-1];u===`
`?l.value[l.value.length-2]==="\r"?l.value=l.value.substring(0,l.value.length-2):l.value=l.value.substring(0,l.value.length-1):u==="\r"&&(l.value=l.value.substring(0,l.value.length-1))}this.expect(t)&&this.next();let a=this.lexer._input.substring(o==="heredoc"?i:n-1,this.lexer.yylloc.first_offset);return r=r(s,a,o),t===this.tok.T_END_HEREDOC&&(r.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),r},get_magic_constant:function(){let t=this.node("magic"),e=this.text();return this.next(),t(e.toUpperCase(),e)}}});var ex=A((jbe,ZR)=>{"use strict";ZR.exports={read_top_statements:function(){let t=[];for(;this.token!==this.EOF&&this.token!=="}";){let e=this.read_top_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_top_statement:function(){let t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,t);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(t);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(t);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(t);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let e=this.node("constantstatement"),i=this.next().read_const_list();return this.expectEndOfStatement(),e(null,i)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let e=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,e(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let t=[];for(;this.token!=this.EOF&&this.token!=="}";){let e=this.read_inner_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let t=this.node("constant"),e=this.node("identifier"),i=this.text();return this.next(),e=e(i),this.expect("=")?t(e,this.next().read_expr()):t(e,null)},",",!1)},read_declare_list:function(){let t=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let e=this.node("declaredirective"),i=this.node("identifier"),r=this.text();this.next(),i=i(r);let n=null;if(this.expect("=")&&(n=this.next().read_expr()),t.push(e(i,n)),this.token!==",")break;this.next()}return t},read_inner_statement:function(){let t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let e=this.read_function(!1,!1);return e.attrGroups=t,e}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let e=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),e=e(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),e}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let t=this.node("return");this.next();let e=this.read_optional_expr(";");return this.expectEndOfStatement(),t(e)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let t=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let e=this.read_optional_expr(";");return this.expectEndOfStatement(),t(e)}case this.tok.T_GLOBAL:{let t=this.node("global"),e=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),t(e)}case this.tok.T_STATIC:{let t=[this.token,this.lexer.getState()],e=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(t);let r=this.next().read_expr();return this.expectEndOfStatement(r),e("expressionstatement",r)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let i=this.read_variable_declarations();return this.expectEndOfStatement(),e("static",i)}case this.tok.T_ECHO:{let t=this.node("echo"),e=this.text(),i=e==="<?="||e==="<%=",r=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),t(r,i)}case this.tok.T_INLINE_HTML:{let t=this.text(),e=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,i=e==="\r"||e===`
`;i&&e===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(e=`\r
`);let r=this.node("inline");return this.next(),r(t,i?e+t:t)}case this.tok.T_UNSET:{let t=this.node("unset");this.next().expect("(")&&this.next();let e=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),t(e)}case this.tok.T_DECLARE:{let t=this.node("declare"),e=[],i;this.next().expect("(")&&this.next();let r=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)e.push(this.read_top_statement());e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),i=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)e.push(this.read_top_statement());e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),i=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),i=this.ast.declare.MODE_NONE;return t(r,e,i)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let t=this.node("throw"),e=this.next().read_expr();return this.expectEndOfStatement(),t(e)}case";":return this.next(),null;case this.tok.T_STRING:{let t=this.node(),e=[this.token,this.lexer.getState()],i=this.text(),r=this.node("identifier");if(this.next().token===":")return r=r(i),this.next(),t("label",r);r.destroy(),t.destroy(),this.lexer.tokens.push(e);let n=this.node("expressionstatement"),s=this.next().read_expr();return this.expectEndOfStatement(s),n(s)}case this.tok.T_GOTO:{let t=this.node("goto"),e=null;if(this.next().expect(this.tok.T_STRING)){e=this.node("identifier");let i=this.text();this.next(),e=e(i),this.expectEndOfStatement()}return t(e)}default:{let t=this.node("expressionstatement"),e=this.read_expr();return this.expectEndOfStatement(e),t(e)}}},read_code_block:function(t){let e=this.node("block");this.expect("{")&&this.next();let i=t?this.read_top_statements():this.read_inner_statements();return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect("}")&&this.next(),e(null,i)}}});var ix=A((Gbe,tx)=>{"use strict";tx.exports={read_switch:function(){let t=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let e=this.read_expr();this.expect(")")&&this.next();let i=this.token===":",r=this.read_switch_case_list();return t(e,r,i)},read_switch_case_list:function(){let t=null,e=this.node("block"),i=[];for(this.token==="{"?t="}":this.token===":"?t=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==t;)i.push(this.read_case_list(t));return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),t===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),e(null,i)},read_case_list:function(t){let e=this.node("case"),i=null;this.token===this.tok.T_CASE?i=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let r=this.node("block"),n=[];for(;this.token!==this.EOF&&this.token!==t&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)n.push(this.read_inner_statement());return e(i,r(null,n))}}});var nx=A((Hbe,rx)=>{"use strict";rx.exports={read_try:function(){this.expect(this.tok.T_TRY);let t=this.node("try"),e=null,i=[],r=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let n=this.node("catch");this.next().expect("(")&&this.next();let s=this.read_list(this.read_namespace_name,"|",!1),o=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(o=this.read_variable(!0,!1)),this.expect(")"),i.push(n(this.next().read_statement(),s,o))}return this.token===this.tok.T_FINALLY&&(e=this.next().read_statement()),t(r,i,e)}}});var ox=A((Wbe,sx)=>{"use strict";sx.exports={read_short_form:function(t){let e=this.node("block"),i=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==t;)i.push(this.read_inner_statement());return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),this.expectEndOfStatement(),e(null,i)},read_function_list:function(t,e){let i=[];do{if(this.token==e&&this.version>=703&&i.length>0){i.push(this.node("noop")());break}if(i.push(t.apply(this,[])),this.token!=e||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return i},read_list:function(t,e,i){let r=[];if(this.token==e&&(i&&r.push(typeof t=="function"?this.node("noop")():null),this.next()),typeof t=="function")do{let n=t.apply(this,[]);if(n&&r.push(n),this.token!=e)break}while(this.next().token!=this.EOF);else{if(this.expect(t))r.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=e||this.next().token!=t);)r.push(this.text())}return r},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(t){let e=this.node("byref");this.next(),e=e(null);let i=t();return i&&(this.ast.swapLocations(i,e,i,this),i.byref=!0),i},read_variable_declarations:function(){return this.read_list(function(){let t=this.node("staticvariable"),e=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let i=this.text().substring(1);this.next(),e=e(i,!1)}else e=e("#ERR",!1);return this.token==="="?t(e,this.next().read_expr()):e},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var lx=A((Ybe,ax)=>{"use strict";ax.exports={read_variable:function(t,e){let i;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,t,e));if(this.is([this.tok.T_VARIABLE,"$"]))i=this.read_reference_variable(e);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){i=this.node();let r=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(r.kind)===-1){let n=r.name.toLowerCase();n==="true"?i=r.destroy(i("boolean",!0,r.name)):n==="false"?i=r.destroy(i("boolean",!1,r.name)):n==="null"?i=r.destroy(i("nullkeyword",r.name)):(i.destroy(r),i=r)}else i.destroy(r),i=r}else if(this.token===this.tok.T_STATIC){i=this.node("staticreference");let r=this.text();this.next(),i=i(r)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i,e)),this.recursive_variable_chain_scan(i,t,e)},read_static_getter:function(t,e){let i=this.node("staticlookup"),r,n;return this.next().is([this.tok.T_VARIABLE,"$"])?r=this.read_reference_variable(e):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(r=this.node("identifier"),n=this.text(),this.next(),r=r(n)):this.token==="{"?(r=this.node("literal"),n=this.next().read_expr(),this.expect("}")&&this.next(),r=r("literal",n,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),r=this.node("identifier"),n=this.text(),this.next(),r=r(n)),i(t,r)},read_what:function(t=!1){let e=null,i=null;switch(this.next().token){case this.tok.T_STRING:e=this.node("identifier"),i=this.text(),this.next(),e=e(i),t&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:e=this.node("variable"),i=this.text().substring(1),this.next(),e=e(i,!1);break;case"$":e=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(i=this.next().read_expr(),this.expect("}")&&this.next(),e=e("variable",i,!0)):(i=this.read_expr(),e=e("variable",i,!1));break;case"{":e=this.node("encapsedpart"),i=this.next().read_expr(),this.expect("}")&&this.next(),e=e(i,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),e=this.node("identifier"),i=this.text(),this.next(),e=e(i);break}return e},recursive_variable_chain_scan:function(t,e,i){let r,n;e:for(;this.token!=this.EOF;)switch(this.token){case"(":if(e)return t;t=this.node("call")(t,this.read_argument_list());break;case"[":case"{":{let o=this.token==="[";r=this.node("offsetlookup"),this.next(),n=!1,i?(n=this.read_encaps_var_offset(),this.expect(o?"]":"}")&&this.next()):(o?this.token!=="]":this.token!=="}")?(n=this.read_expr(),this.expect(o?"]":"}")&&this.next()):this.next(),t=r(t,n);break}case this.tok.T_DOUBLE_COLON:t.kind==="staticlookup"&&t.offset.kind==="identifier"&&this.error(),r=this.node("staticlookup"),t=r(t,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{r=this.node("propertylookup"),t=r(t,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{r=this.node("nullsafepropertylookup"),t=r(t,this.read_what());break}default:break e}return t},read_encaps_var_offset:function(){let t=this.node();if(this.token===this.tok.T_STRING){let e=this.text();this.next(),t=t("identifier",e)}else if(this.token===this.tok.T_NUM_STRING){let e=this.text();this.next(),t=t("number",e,null)}else if(this.token==="-"){this.next();let e=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),t=t("number",e,null)}else if(this.token===this.tok.T_VARIABLE){let e=this.text().substring(1);this.next(),t=t("variable",e,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let e=this.text();this.next(),t=t("identifier",e)}return t},read_reference_variable:function(t){let e=this.read_simple_variable(),i;for(;this.token!=this.EOF;){let r=this.node();if(this.token=="{"&&!t)i=this.next().read_expr(),this.expect("}")&&this.next(),e=r("offsetlookup",e,i);else{r.destroy();break}}return e},read_simple_variable:function(){let t=this.node("variable"),e;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)e=this.text().substring(1),this.next(),t=t(e,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let i=this.next().read_expr();this.expect("}")&&this.next(),t=t(i,!0);break}case"$":t=t(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{e=this.text().substring(1);let i=this.node("variable");this.next(),t=t(i(e,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),e=this.text(),this.next(),t=t(e,!1)}return t}}});var cx=A((Kbe,ux)=>{"use strict";var R$=oT();function lT(t){return t!="."&&t!=","&&!isNaN(parseFloat(t))&&isFinite(t)}var hi=function(t,e){this.lexer=t,this.ast=e,this.tok=t.tok,this.EOF=t.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let i=function(r){return[r,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(i)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(i)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(i)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(i)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(i)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i))}};hi.prototype.getTokenName=function(t){return lT(t)?t==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[t]:"'"+t+"'"};hi.prototype.parse=function(t,e){this._errors=[],this.filename=e||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(t),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let i=this.node("program"),r=[];for(this.next();this.token!=this.EOF;)r.push(this.read_start());r.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&r.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let n=i(r,this._errors,this._docs,this._tokens);if(this.debug){let s=this.ast.checkNodes();if(s.length>0)throw s.forEach(function(o){o.position&&console.log("Node at line "+o.position.line+", column "+o.position.column),console.log(o.stack.join(`
`))}),new Error("Some nodes are not closed")}return n};hi.prototype.raiseError=function(t,e,i,r){if(t+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let s=new SyntaxError(t,this.filename,this.lexer.yylloc.first_line);throw s.lineNumber=this.lexer.yylloc.first_line,s.fileName=this.filename,s.columnNumber=this.lexer.yylloc.first_column,s}let n=this.ast.prepare("error",null,this)(t,r,this.lexer.yylloc.first_line,i);return this._errors.push(n),n};hi.prototype.error=function(t){let e="Parse Error : syntax error",i=this.getTokenName(this.token),r="";if(this.token!==this.EOF){if(lT(this.token)){let n=this.text();n.length>10&&(n=n.substring(0,7)+"..."),i="'"+n+"' ("+i+")"}e+=", unexpected "+i}return t&&!Array.isArray(t)&&((lT(t)||t.length===1)&&(r=", expecting "+this.getTokenName(t)),e+=r),this.raiseError(e,r,t,i)};hi.prototype.position=function(){return new R$(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};hi.prototype.node=function(t){if(this.extractDoc){let e=null;this._docIndex<this._docs.length&&(e=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+t)),console.log(e)));let i=this.ast.prepare(t,e,this);return i.postBuild=function(r){if(this._docIndex<this._docs.length)if(this._lastNode){let n=this.prev[2],s=this._docIndex;for(;s<this._docs.length&&!(this._docs[s].offset>n);s++);s>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,s)),this._docIndex=s)}else this.token===this.EOF&&(r.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=r}.bind(this),i}return this.ast.prepare(t,null,this)};hi.prototype.expectEndOfStatement=function(t){if(this.token===";")t&&this.lexer.yytext===";"&&t.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var aT=["parser.next","parser.node","parser.showlog"];hi.prototype.showlog=function(){let t=new Error().stack.split(`
`),e;for(let i=2;i<t.length;i++){e=t[i].trim();let r=!1;for(let n=0;n<aT.length;n++)if(e.substring(3,3+aT[n].length)===aT[n]){r=!0;break}if(!r)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+e),this};hi.prototype.expect=function(t){if(Array.isArray(t)){if(t.indexOf(this.token)===-1)return this.error(t),!1}else if(this.token!=t)return this.error(t),!1;return!0};hi.prototype.text=function(){return this.lexer.yytext};hi.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};hi.prototype.peek=function(){let t=this.lexer.getState(),e=this.lexer.lex();return this.lexer.setState(t),e};hi.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let t=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?t=[this.lexer.engine.tokens.values[this.token],t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:t=[null,t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(t),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};hi.prototype.is=function(t){return Array.isArray(t)?t.indexOf(this.token)!==-1:this.entries[t].has(this.token)};[wR(),DR(),LR(),MR(),BR(),UR(),GR(),WR(),KR(),zR(),JR(),ex(),ix(),nx(),ox(),lx()].forEach(function(t){for(let e in t){if(Object.prototype.hasOwnProperty.call(hi.prototype,e))throw new Error("Function "+e+" is already defined - collision");hi.prototype[e]=t[e]}});ux.exports=hi});var px=A(($be,dx)=>{"use strict";var fx={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},x$={values:Object.entries(fx).reduce((t,[e,i])=>({...t,[i]:e}),{}),names:fx};dx.exports=Object.freeze(x$)});var mx=A((zbe,hx)=>{"use strict";var w$=function(t,e,i){this.source=t,this.start=e,this.end=i};hx.exports=w$});var Kt=A((Qbe,gx)=>{"use strict";var Cc=function(e,i,r){this.kind=e,i&&(this.leadingComments=i),r&&(this.loc=r)};Cc.prototype.setTrailingComments=function(t){this.trailingComments=t};Cc.prototype.destroy=function(t){if(!t)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(t.leadingComments?t.leadingComments=Array.concat(this.leadingComments,t.leadingComments):t.leadingComments=this.leadingComments),this.trailingComments&&(t.trailingComments?t.trailingComments=Array.concat(this.trailingComments,t.trailingComments):t.trailingComments=this.trailingComments),t};Cc.prototype.includeToken=function(t){return this.loc&&(this.loc.end&&(this.loc.end.line=t.lexer.yylloc.last_line,this.loc.end.column=t.lexer.yylloc.last_column,this.loc.end.offset=t.lexer.offset),t.ast.withSource&&(this.loc.source=t.lexer._input.substring(this.loc.start.offset,t.lexer.offset))),this};Cc.extends=function(t,e){return e.prototype=Object.create(this.prototype),e.extends=this.extends,e.prototype.constructor=e,e.kind=t,e};gx.exports=Cc});var Ye=A((Xbe,Tx)=>{"use strict";var _x=Kt(),yx="expression";Tx.exports=_x.extends(yx,function(e,i,r){_x.apply(this,[e||yx,i,r])})});var Nx=A((Jbe,vx)=>{"use strict";var bx=Ye(),Ix="array";vx.exports=bx.extends(Ix,function(e,i,r,n){bx.apply(this,[Ix,r,n]),this.items=i,this.shortForm=e})});var Ex=A((Zbe,Ax)=>{"use strict";var Sx=Ye(),Px="arrowfunc";Ax.exports=Sx.extends(Px,function(e,i,r,n,s,o,a,l){Sx.apply(this,[Px,a,l]),this.arguments=e,this.byref=i,this.body=r,this.type=n,this.nullable=s,this.isStatic=o||!1})});var wx=A((eIe,xx)=>{"use strict";var Cx=Ye(),Rx="assign";xx.exports=Cx.extends(Rx,function(e,i,r,n,s){Cx.apply(this,[Rx,n,s]),this.left=e,this.right=i,this.operator=r})});var Lx=A((tIe,Fx)=>{"use strict";var kx=Ye(),Dx="assignref";Fx.exports=kx.extends(Dx,function(e,i,r,n){kx.apply(this,[Dx,r,n]),this.left=e,this.right=i})});var Bx=A((iIe,qx)=>{"use strict";var Ox=Kt(),Mx="attribute";qx.exports=Ox.extends(Mx,function(e,i,r,n){Ox.apply(this,[Mx,r,n]),this.name=e,this.args=i})});var Gx=A((rIe,jx)=>{"use strict";var Vx=Kt(),Ux="attrgroup";jx.exports=Vx.extends(Ux,function(e,i,r){Vx.apply(this,[Ux,i,r]),this.attrs=e||[]})});var Ta=A((nIe,Yx)=>{"use strict";var Hx=Ye(),Wx="operation";Yx.exports=Hx.extends(Wx,function(e,i,r){Hx.apply(this,[e||Wx,i,r])})});var Qx=A((sIe,zx)=>{"use strict";var Kx=Ta(),$x="bin";zx.exports=Kx.extends($x,function(e,i,r,n,s){Kx.apply(this,[$x,n,s]),this.type=e,this.left=i,this.right=r})});var Je=A((oIe,Zx)=>{"use strict";var Xx=Kt(),Jx="statement";Zx.exports=Xx.extends(Jx,function(e,i,r){Xx.apply(this,[e||Jx,i,r])})});var Rc=A((aIe,i0)=>{"use strict";var e0=Je(),t0="block";i0.exports=e0.extends(t0,function(e,i,r,n){e0.apply(this,[e||t0,r,n]),this.children=i.filter(Boolean)})});var hs=A((lIe,s0)=>{"use strict";var r0=Ye(),n0="literal";s0.exports=r0.extends(n0,function(e,i,r,n,s){r0.apply(this,[e||n0,n,s]),this.value=i,r&&(this.raw=r)})});var u0=A((uIe,l0)=>{"use strict";var o0=hs(),a0="boolean";l0.exports=o0.extends(a0,function(e,i,r,n){o0.apply(this,[a0,e,i,r,n])})});var p0=A((cIe,d0)=>{"use strict";var c0=Je(),f0="break";d0.exports=c0.extends(f0,function(e,i,r){c0.apply(this,[f0,i,r]),this.level=e})});var _0=A((fIe,g0)=>{"use strict";var h0=Ye(),m0="byref";g0.exports=h0.extends(m0,function(e,i,r){h0.apply(this,[m0,i,r]),this.what=e})});var I0=A((dIe,b0)=>{"use strict";var y0=Ye(),T0="call";b0.exports=y0.extends(T0,function(e,i,r,n){y0.apply(this,[T0,r,n]),this.what=e,this.arguments=i})});var P0=A((pIe,S0)=>{"use strict";var v0=Je(),N0="case";S0.exports=v0.extends(N0,function(e,i,r,n){v0.apply(this,[N0,r,n]),this.test=e,this.body=i})});var R0=A((hIe,C0)=>{"use strict";var A0=Ta(),E0="cast";C0.exports=A0.extends(E0,function(e,i,r,n,s){A0.apply(this,[E0,n,s]),this.type=e,this.raw=i,this.expr=r})});var D0=A((mIe,k0)=>{"use strict";var x0=Je(),w0="catch";k0.exports=x0.extends(w0,function(e,i,r,n,s){x0.apply(this,[w0,n,s]),this.body=e,this.what=i,this.variable=r})});var Vn=A((gIe,M0)=>{"use strict";var F0=Je(),L0="declaration",k$="",D$="public",F$="protected",L$="private",O0=F0.extends(L0,function(e,i,r,n){F0.apply(this,[e||L0,r,n]),this.name=i});O0.prototype.parseFlags=function(t){this.isAbstract=t[2]===1,this.isFinal=t[2]===2,this.isReadonly=t[3]===1,this.kind!=="class"&&(t[0]===-1?this.visibility=k$:t[0]===null?this.visibility=null:t[0]===0?this.visibility=D$:t[0]===1?this.visibility=F$:t[0]===2&&(this.visibility=L$),this.isStatic=t[1]===1)};M0.exports=O0});var U0=A((_Ie,V0)=>{"use strict";var q0=Vn(),B0="class";V0.exports=q0.extends(B0,function(e,i,r,n,s,o,a){q0.apply(this,[B0,e,o,a]),this.isAnonymous=!e,this.extends=i,this.implements=r,this.body=n,this.attrGroups=[],this.parseFlags(s)})});var uT=A((yIe,H0)=>{"use strict";var j0=Je(),G0="constantstatement";H0.exports=j0.extends(G0,function(e,i,r,n){j0.apply(this,[e||G0,r,n]),this.constants=i})});var z0=A((TIe,$0)=>{"use strict";var W0=uT(),Y0="classconstant",O$="",M$="public",q$="protected",B$="private",K0=W0.extends(Y0,function(e,i,r,n,s,o){W0.apply(this,[e||Y0,i,s,o]),this.parseFlags(r),this.attrGroups=n});K0.prototype.parseFlags=function(t){t[0]===-1?this.visibility=O$:t[0]===null?this.visibility=null:t[0]===0?this.visibility=M$:t[0]===1?this.visibility=q$:t[0]===2&&(this.visibility=B$),this.final=t[2]===2};$0.exports=K0});var Z0=A((bIe,J0)=>{"use strict";var Q0=Ye(),X0="clone";J0.exports=Q0.extends(X0,function(e,i,r){Q0.apply(this,[X0,i,r]),this.what=e})});var rw=A((IIe,iw)=>{"use strict";var ew=Ye(),tw="closure";iw.exports=ew.extends(tw,function(e,i,r,n,s,o,a,l){ew.apply(this,[tw,a,l]),this.uses=r,this.arguments=e,this.byref=i,this.type=n,this.nullable=s,this.isStatic=o||!1,this.body=null,this.attrGroups=[]})});var Uh=A((vIe,sw)=>{"use strict";var nw=Kt();sw.exports=nw.extends("comment",function(e,i,r,n){nw.apply(this,[e,r,n]),this.value=i})});var uw=A((NIe,lw)=>{"use strict";var ow=Uh(),aw="commentblock";lw.exports=ow.extends(aw,function(e,i,r){ow.apply(this,[aw,e,i,r])})});var pw=A((SIe,dw)=>{"use strict";var cw=Uh(),fw="commentline";dw.exports=cw.extends(fw,function(e,i,r){cw.apply(this,[fw,e,i,r])})});var _w=A((PIe,gw)=>{"use strict";var hw=Kt(),mw="constant";gw.exports=hw.extends(mw,function(e,i,r,n){hw.apply(this,[mw,r,n]),this.name=e,this.value=i})});var Iw=A((AIe,bw)=>{"use strict";var yw=Je(),Tw="continue";bw.exports=yw.extends(Tw,function(e,i,r){yw.apply(this,[Tw,i,r]),this.level=e})});var Pw=A((EIe,Sw)=>{"use strict";var vw=Rc(),Nw="declare",jh=vw.extends(Nw,function(e,i,r,n,s){vw.apply(this,[Nw,i,n,s]),this.directives=e,this.mode=r});jh.MODE_SHORT="short";jh.MODE_BLOCK="block";jh.MODE_NONE="none";Sw.exports=jh});var Rw=A((CIe,Cw)=>{"use strict";var Aw=Kt(),Ew="declaredirective";Cw.exports=Aw.extends(Ew,function(e,i,r,n){Aw.apply(this,[Ew,r,n]),this.key=e,this.value=i})});var Dw=A((RIe,kw)=>{"use strict";var xw=Je(),ww="do";kw.exports=xw.extends(ww,function(e,i,r,n){xw.apply(this,[ww,r,n]),this.test=e,this.body=i})});var Mw=A((xIe,Ow)=>{"use strict";var Fw=Je(),Lw="echo";Ow.exports=Fw.extends(Lw,function(e,i,r,n){Fw.apply(this,[Lw,r,n]),this.shortForm=i,this.expressions=e})});var Uw=A((wIe,Vw)=>{"use strict";var qw=Ye(),Bw="empty";Vw.exports=qw.extends(Bw,function(e,i,r){qw.apply(this,[Bw,i,r]),this.expression=e})});var Ww=A((kIe,Hw)=>{"use strict";var jw=hs(),Gw="encapsed",xc=jw.extends(Gw,function(e,i,r,n,s){jw.apply(this,[Gw,e,i,n,s]),this.type=r});xc.TYPE_STRING="string";xc.TYPE_SHELL="shell";xc.TYPE_HEREDOC="heredoc";xc.TYPE_OFFSET="offset";Hw.exports=xc});var zw=A((DIe,$w)=>{"use strict";var Yw=Ye(),Kw="encapsedpart";$w.exports=Yw.extends(Kw,function(e,i,r,n,s){Yw.apply(this,[Kw,n,s]),this.expression=e,this.syntax=i,this.curly=r})});var Zw=A((FIe,Jw)=>{"use strict";var Qw=Ye(),Xw="entry";Jw.exports=Qw.extends(Xw,function(e,i,r,n,s,o){Qw.apply(this,[Xw,s,o]),this.key=e,this.value=i,this.byRef=r,this.unpack=n})});var rk=A((LIe,ik)=>{"use strict";var ek=Vn(),tk="enum";ik.exports=ek.extends(tk,function(e,i,r,n,s,o){ek.apply(this,[tk,e,s,o]),this.valueType=i,this.implements=r,this.body=n,this.attrGroups=[]})});var ak=A((OIe,ok)=>{"use strict";var nk=Kt(),sk="enumcase";ok.exports=nk.extends(sk,function(e,i,r,n){nk.apply(this,[sk,r,n]),this.name=e,this.value=i})});var fk=A((MIe,ck)=>{"use strict";var lk=Kt(),uk="error";ck.exports=lk.extends(uk,function(e,i,r,n,s,o){lk.apply(this,[uk,s,o]),this.message=e,this.token=i,this.line=r,this.expected=n})});var mk=A((qIe,hk)=>{"use strict";var dk=Ye(),pk="eval";hk.exports=dk.extends(pk,function(e,i,r){dk.apply(this,[pk,i,r]),this.source=e})});var Tk=A((BIe,yk)=>{"use strict";var gk=Ye(),_k="exit";yk.exports=gk.extends(_k,function(e,i,r,n){gk.apply(this,[_k,r,n]),this.expression=e,this.useDie=i})});var Nk=A((VIe,vk)=>{"use strict";var bk=Je(),Ik="expressionstatement";vk.exports=bk.extends(Ik,function(e,i,r){bk.apply(this,[Ik,i,r]),this.expression=e})});var Ek=A((UIe,Ak)=>{"use strict";var Sk=Je(),Pk="for";Ak.exports=Sk.extends(Pk,function(e,i,r,n,s,o,a){Sk.apply(this,[Pk,o,a]),this.init=e,this.test=i,this.increment=r,this.shortForm=s,this.body=n})});var wk=A((jIe,xk)=>{"use strict";var Ck=Je(),Rk="foreach";xk.exports=Ck.extends(Rk,function(e,i,r,n,s,o,a){Ck.apply(this,[Rk,o,a]),this.source=e,this.key=i,this.value=r,this.shortForm=s,this.body=n})});var cT=A((GIe,Fk)=>{"use strict";var kk=Vn(),Dk="function";Fk.exports=kk.extends(Dk,function(e,i,r,n,s,o,a){kk.apply(this,[Dk,e,o,a]),this.arguments=i,this.byref=r,this.type=n,this.nullable=s,this.body=null,this.attrGroups=[]})});var qk=A((HIe,Mk)=>{"use strict";var Lk=Je(),Ok="global";Mk.exports=Lk.extends(Ok,function(e,i,r){Lk.apply(this,[Ok,i,r]),this.items=e})});var jk=A((WIe,Uk)=>{"use strict";var Bk=Je(),Vk="goto";Uk.exports=Bk.extends(Vk,function(e,i,r){Bk.apply(this,[Vk,i,r]),this.label=e})});var Yk=A((YIe,Wk)=>{"use strict";var Gk=Je(),Hk="halt";Wk.exports=Gk.extends(Hk,function(e,i,r){Gk.apply(this,[Hk,i,r]),this.after=e})});var Qk=A((KIe,zk)=>{"use strict";var Kk=Kt(),$k="identifier",V$=Kk.extends($k,function(e,i,r){Kk.apply(this,[$k,i,r]),this.name=e});zk.exports=V$});var eD=A(($Ie,Zk)=>{"use strict";var Xk=Je(),Jk="if";Zk.exports=Xk.extends(Jk,function(e,i,r,n,s,o){Xk.apply(this,[Jk,s,o]),this.test=e,this.body=i,this.alternate=r,this.shortForm=n})});var nD=A((zIe,rD)=>{"use strict";var tD=Ye(),iD="include";rD.exports=tD.extends(iD,function(e,i,r,n,s){tD.apply(this,[iD,n,s]),this.once=e,this.require=i,this.target=r})});var lD=A((QIe,aD)=>{"use strict";var sD=hs(),oD="inline";aD.exports=sD.extends(oD,function(e,i,r,n){sD.apply(this,[oD,e,i,r,n])})});var dD=A((XIe,fD)=>{"use strict";var uD=Vn(),cD="interface";fD.exports=uD.extends(cD,function(e,i,r,n,s,o){uD.apply(this,[cD,e,s,o]),this.extends=i,this.body=r,this.attrGroups=n})});var gD=A((JIe,mD)=>{"use strict";var pD=Vn(),hD="intersectiontype";mD.exports=pD.extends(hD,function(e,i,r){pD.apply(this,[hD,null,i,r]),this.types=e})});var bD=A((ZIe,TD)=>{"use strict";var _D=Ye(),yD="isset";TD.exports=_D.extends(yD,function(e,i,r){_D.apply(this,[yD,i,r]),this.variables=e})});var SD=A((eve,ND)=>{"use strict";var ID=Je(),vD="label";ND.exports=ID.extends(vD,function(e,i,r){ID.apply(this,[vD,i,r]),this.name=e})});var CD=A((tve,ED)=>{"use strict";var PD=Ye(),AD="list";ED.exports=PD.extends(AD,function(e,i,r,n){PD.apply(this,[AD,r,n]),this.items=e,this.shortForm=i})});var ru=A((ive,wD)=>{"use strict";var RD=Ye(),xD="lookup";wD.exports=RD.extends(xD,function(e,i,r,n,s){RD.apply(this,[e||xD,n,s]),this.what=i,this.offset=r})});var LD=A((rve,FD)=>{"use strict";var kD=hs(),DD="magic";FD.exports=kD.extends(DD,function(e,i,r,n){kD.apply(this,[DD,e,i,r,n])})});var BD=A((nve,qD)=>{"use strict";var OD=Ye(),MD="match";qD.exports=OD.extends(MD,function(e,i,r,n){OD.apply(this,[MD,r,n]),this.cond=e,this.arms=i})});var GD=A((sve,jD)=>{"use strict";var VD=Ye(),UD="matcharm";jD.exports=VD.extends(UD,function(e,i,r,n){VD.apply(this,[UD,r,n]),this.conds=e,this.body=i})});var KD=A((ove,YD)=>{"use strict";var HD=cT(),WD="method";YD.exports=HD.extends(WD,function(){HD.apply(this,arguments),this.kind=WD})});var ba=A((ave,QD)=>{"use strict";var $D=Kt(),zD="reference",U$=$D.extends(zD,function(e,i,r){$D.apply(this,[e||zD,i,r])});QD.exports=U$});var eF=A((lve,ZD)=>{"use strict";var XD=ba(),JD="name",wc=XD.extends(JD,function(e,i,r,n){XD.apply(this,[JD,r,n]),this.name=e.replace(/\\$/,""),this.resolution=i});wc.UNQUALIFIED_NAME="uqn";wc.QUALIFIED_NAME="qn";wc.FULL_QUALIFIED_NAME="fqn";wc.RELATIVE_NAME="rn";ZD.exports=wc});var nF=A((uve,rF)=>{"use strict";var tF=Rc(),iF="namespace";rF.exports=tF.extends(iF,function(e,i,r,n,s){tF.apply(this,[iF,i,n,s]),this.name=e,this.withBrackets=r||!1})});var lF=A((cve,aF)=>{"use strict";var sF=Ye(),oF="namedargument";aF.exports=sF.extends(oF,function(e,i,r,n){sF.apply(this,[oF,r,n]),this.name=e,this.value=i})});var dF=A((fve,fF)=>{"use strict";var uF=Ye(),cF="new";fF.exports=uF.extends(cF,function(e,i,r,n){uF.apply(this,[cF,r,n]),this.what=e,this.arguments=i})});var gF=A((dve,mF)=>{"use strict";var pF=Kt(),hF="noop";mF.exports=pF.extends(hF,function(e,i){pF.apply(this,[hF,e,i])})});var bF=A((pve,TF)=>{"use strict";var _F=hs(),yF="nowdoc";TF.exports=_F.extends(yF,function(e,i,r,n,s){_F.apply(this,[yF,e,i,n,s]),this.label=r})});var SF=A((hve,NF)=>{"use strict";var IF=Kt(),vF="nullkeyword";NF.exports=IF.extends(vF,function(e,i,r){IF.apply(this,[vF,i,r]),this.raw=e})});var CF=A((mve,EF)=>{"use strict";var PF=ru(),AF="nullsafepropertylookup";EF.exports=PF.extends(AF,function(e,i,r,n){PF.apply(this,[AF,e,i,r,n])})});var kF=A((gve,wF)=>{"use strict";var RF=hs(),xF="number";wF.exports=RF.extends(xF,function(e,i,r,n){RF.apply(this,[xF,e,i,r,n])})});var OF=A((_ve,LF)=>{"use strict";var DF=ru(),FF="offsetlookup";LF.exports=DF.extends(FF,function(e,i,r,n){DF.apply(this,[FF,e,i,r,n])})});var VF=A((yve,BF)=>{"use strict";var MF=Vn(),qF="parameter";BF.exports=MF.extends(qF,function(e,i,r,n,s,o,a,l,u,c){MF.apply(this,[qF,e,u,c]),this.value=r,this.type=i,this.byref=n,this.variadic=s,this.readonly=o,this.nullable=a,this.flags=l||0,this.attrGroups=[]})});var HF=A((Tve,GF)=>{"use strict";var UF=ba(),jF="parentreference",j$=UF.extends(jF,function(e,i,r){UF.apply(this,[jF,i,r]),this.raw=e});GF.exports=j$});var $F=A((bve,KF)=>{"use strict";var WF=Ta(),YF="post";KF.exports=WF.extends(YF,function(e,i,r,n){WF.apply(this,[YF,r,n]),this.type=e,this.what=i})});var JF=A((Ive,XF)=>{"use strict";var zF=Ta(),QF="pre";XF.exports=zF.extends(QF,function(e,i,r,n){zF.apply(this,[QF,r,n]),this.type=e,this.what=i})});var iL=A((vve,tL)=>{"use strict";var ZF=Ye(),eL="print";tL.exports=ZF.extends(eL,function(e,i,r){ZF.apply(this,[eL,i,r]),this.expression=e})});var oL=A((Nve,sL)=>{"use strict";var rL=Rc(),nL="program";sL.exports=rL.extends(nL,function(e,i,r,n,s,o){rL.apply(this,[nL,e,s,o]),this.errors=i,r&&(this.comments=r),n&&(this.tokens=n)})});var cL=A((Sve,uL)=>{"use strict";var aL=Je(),lL="property";uL.exports=aL.extends(lL,function(e,i,r,n,s,o,a,l){aL.apply(this,[lL,a,l]),this.name=e,this.value=i,this.readonly=r,this.nullable=n,this.type=s,this.attrGroups=o})});var hL=A((Pve,pL)=>{"use strict";var fL=ru(),dL="propertylookup";pL.exports=fL.extends(dL,function(e,i,r,n){fL.apply(this,[dL,e,i,r,n])})});var TL=A((Ave,yL)=>{"use strict";var mL=Je(),gL="propertystatement",G$="",H$="public",W$="protected",Y$="private",_L=mL.extends(gL,function(e,i,r,n,s){mL.apply(this,[gL,n,s]),this.properties=i,this.parseFlags(r)});_L.prototype.parseFlags=function(t){t[0]===-1?this.visibility=G$:t[0]===null?this.visibility=null:t[0]===0?this.visibility=H$:t[0]===1?this.visibility=W$:t[0]===2&&(this.visibility=Y$),this.isStatic=t[1]===1};yL.exports=_L});var NL=A((Eve,vL)=>{"use strict";var bL=Ye(),IL="retif";vL.exports=bL.extends(IL,function(e,i,r,n,s){bL.apply(this,[IL,n,s]),this.test=e,this.trueExpr=i,this.falseExpr=r})});var EL=A((Cve,AL)=>{"use strict";var SL=Je(),PL="return";AL.exports=SL.extends(PL,function(e,i,r){SL.apply(this,[PL,i,r]),this.expr=e})});var wL=A((Rve,xL)=>{"use strict";var CL=ba(),RL="selfreference",K$=CL.extends(RL,function(e,i,r){CL.apply(this,[RL,i,r]),this.raw=e});xL.exports=K$});var LL=A((xve,FL)=>{"use strict";var kL=Ye(),DL="silent";FL.exports=kL.extends(DL,function(e,i,r){kL.apply(this,[DL,i,r]),this.expr=e})});var BL=A((wve,qL)=>{"use strict";var OL=Je(),ML="static";qL.exports=OL.extends(ML,function(e,i,r){OL.apply(this,[ML,i,r]),this.variables=e})});var GL=A((kve,jL)=>{"use strict";var VL=Kt(),UL="staticvariable";jL.exports=VL.extends(UL,function(e,i,r,n){VL.apply(this,[UL,r,n]),this.variable=e,this.defaultValue=i})});var KL=A((Dve,YL)=>{"use strict";var HL=ru(),WL="staticlookup";YL.exports=HL.extends(WL,function(e,i,r,n){HL.apply(this,[WL,e,i,r,n])})});var XL=A((Fve,QL)=>{"use strict";var $L=ba(),zL="staticreference",$$=$L.extends(zL,function(e,i,r){$L.apply(this,[zL,i,r]),this.raw=e});QL.exports=$$});var tO=A((Lve,eO)=>{"use strict";var JL=hs(),ZL="string";eO.exports=JL.extends(ZL,function(e,i,r,n,s,o){JL.apply(this,[ZL,i,n,s,o]),this.unicode=r,this.isDoubleQuote=e})});var sO=A((Ove,nO)=>{"use strict";var iO=Je(),rO="switch";nO.exports=iO.extends(rO,function(e,i,r,n,s){iO.apply(this,[rO,n,s]),this.test=e,this.body=i,this.shortForm=r})});var uO=A((Mve,lO)=>{"use strict";var oO=Je(),aO="throw";lO.exports=oO.extends(aO,function(e,i,r){oO.apply(this,[aO,i,r]),this.what=e})});var pO=A((qve,dO)=>{"use strict";var cO=Vn(),fO="trait";dO.exports=cO.extends(fO,function(e,i,r,n){cO.apply(this,[fO,e,r,n]),this.body=i})});var _O=A((Bve,gO)=>{"use strict";var hO=Kt(),mO="traitalias",z$="",Q$="public",X$="protected",J$="private";gO.exports=hO.extends(mO,function(e,i,r,n,s,o){hO.apply(this,[mO,s,o]),this.trait=e,this.method=i,this.as=r,this.visibility=z$,n&&(n[0]===0?this.visibility=Q$:n[0]===1?this.visibility=X$:n[0]===2&&(this.visibility=J$))})});var IO=A((Vve,bO)=>{"use strict";var yO=Kt(),TO="traitprecedence";bO.exports=yO.extends(TO,function(e,i,r,n,s){yO.apply(this,[TO,n,s]),this.trait=e,this.method=i,this.instead=r})});var PO=A((Uve,SO)=>{"use strict";var vO=Kt(),NO="traituse";SO.exports=vO.extends(NO,function(e,i,r,n){vO.apply(this,[NO,r,n]),this.traits=e,this.adaptations=i})});var RO=A((jve,CO)=>{"use strict";var AO=Je(),EO="try";CO.exports=AO.extends(EO,function(e,i,r,n,s){AO.apply(this,[EO,n,s]),this.body=e,this.catches=i,this.always=r})});var FO=A((Gve,DO)=>{"use strict";var xO=ba(),wO="typereference",kO=xO.extends(wO,function(e,i,r,n){xO.apply(this,[wO,r,n]),this.name=e,this.raw=i});kO.types=["int","float","string","bool","object","array","callable","iterable","void","static"];DO.exports=kO});var qO=A((Hve,MO)=>{"use strict";var LO=Ta(),OO="unary";MO.exports=LO.extends(OO,function(e,i,r,n){LO.apply(this,[OO,r,n]),this.type=e,this.what=i})});var jO=A((Wve,UO)=>{"use strict";var BO=Vn(),VO="uniontype";UO.exports=BO.extends(VO,function(e,i,r){BO.apply(this,[VO,null,i,r]),this.types=e})});var YO=A((Yve,WO)=>{"use strict";var GO=Je(),HO="unset";WO.exports=GO.extends(HO,function(e,i,r){GO.apply(this,[HO,i,r]),this.variables=e})});var QO=A((Kve,zO)=>{"use strict";var KO=Je(),$O="usegroup";zO.exports=KO.extends($O,function(e,i,r,n,s){KO.apply(this,[$O,n,s]),this.name=e,this.type=i,this.items=r})});var e1=A(($ve,ZO)=>{"use strict";var XO=Je(),JO="useitem",fT=XO.extends(JO,function(e,i,r,n,s){XO.apply(this,[JO,n,s]),this.name=e,this.alias=i,this.type=r});fT.TYPE_CONST="const";fT.TYPE_FUNCTION="function";ZO.exports=fT});var n1=A((zve,r1)=>{"use strict";var t1=Ye(),i1="variable";r1.exports=t1.extends(i1,function(e,i,r,n){t1.apply(this,[i1,r,n]),this.name=e,this.curly=i||!1})});var l1=A((Qve,a1)=>{"use strict";var s1=Ye(),o1="variadic";a1.exports=s1.extends(o1,function(e,i,r){s1.apply(this,[o1,i,r]),this.what=e})});var d1=A((Xve,f1)=>{"use strict";var u1=Kt(),c1="variadicplaceholder";f1.exports=u1.extends(c1,function(e,i){u1.apply(this,[c1,e,i])})});var g1=A((Jve,m1)=>{"use strict";var p1=Je(),h1="while";m1.exports=p1.extends(h1,function(e,i,r,n,s){p1.apply(this,[h1,n,s]),this.test=e,this.body=i,this.shortForm=r})});var b1=A((Zve,T1)=>{"use strict";var _1=Ye(),y1="yield";T1.exports=_1.extends(y1,function(e,i,r,n){_1.apply(this,[y1,r,n]),this.value=e,this.key=i})});var S1=A((eNe,N1)=>{"use strict";var I1=Ye(),v1="yieldfrom";N1.exports=I1.extends(v1,function(e,i,r){I1.apply(this,[v1,i,r]),this.value=e})});var A1=A((tNe,P1)=>{"use strict";var Z$=mx(),e9=oT(),Ei=function(t,e){this.withPositions=t,this.withSource=e};Ei.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(t,e){t.forEach(function(i){Ei.precedence[i]=e+1})});Ei.prototype.isRightAssociative=function(t){return t==="**"||t==="??"};Ei.prototype.swapLocations=function(t,e,i,r){this.withPositions&&(t.loc.start=e.loc.start,t.loc.end=i.loc.end,this.withSource&&(t.loc.source=r.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))};Ei.prototype.resolveLocations=function(t,e,i,r){this.withPositions&&(t.loc.start.offset>e.loc.start.offset&&(t.loc.start=e.loc.start),t.loc.end.offset<i.loc.end.offset&&(t.loc.end=i.loc.end),this.withSource&&(t.loc.source=r.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))};Ei.prototype.resolvePrecedence=function(t,e){let i,r,n;return t.kind==="call"?this.resolveLocations(t,t.what,t,e):t.kind==="propertylookup"||t.kind==="staticlookup"||t.kind==="offsetlookup"&&t.offset?this.resolveLocations(t,t.what,t.offset,e):t.kind==="bin"?t.right&&!t.right.parenthesizedExpression&&(t.right.kind==="bin"?(r=Ei.precedence[t.type],n=Ei.precedence[t.right.type],r&&n&&n<=r&&(t.type!==t.right.type||!this.isRightAssociative(t.type))&&(i=t.right,t.right=t.right.left,this.swapLocations(t,t.left,t.right,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i)):t.right.kind==="retif"&&(r=Ei.precedence[t.type],n=Ei.precedence["?"],r&&n&&n<=r&&(i=t.right,t.right=t.right.test,this.swapLocations(t,t.left,t.right,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i))):(t.kind==="silent"||t.kind==="cast")&&t.expr&&!t.expr.parenthesizedExpression?t.expr.kind==="bin"?(i=t.expr,t.expr=t.expr.left,this.swapLocations(t,t,t.expr,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):t.expr.kind==="retif"&&(i=t.expr,t.expr=t.expr.test,this.swapLocations(t,t,t.expr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i):t.kind==="unary"?t.what&&!t.what.parenthesizedExpression&&(t.what.kind==="bin"?(i=t.what,t.what=t.what.left,this.swapLocations(t,t,t.what,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):t.what.kind==="retif"&&(i=t.what,t.what=t.what.test,this.swapLocations(t,t,t.what,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i)):t.kind==="retif"?t.falseExpr&&t.falseExpr.kind==="retif"&&!t.falseExpr.parenthesizedExpression&&(i=t.falseExpr,t.falseExpr=i.test,this.swapLocations(t,t.test,t.falseExpr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i):t.kind==="assign"?t.right&&t.right.kind==="bin"&&!t.right.parenthesizedExpression&&(r=Ei.precedence["="],n=Ei.precedence[t.right.type],r&&n&&n<r&&(i=t.right,t.right=t.right.left,i.left=t,this.swapLocations(i,i.left,t.right,e),t=i)):t.kind==="expressionstatement"&&this.swapLocations(t,t.expression,t,e),t};Ei.prototype.prepare=function(t,e,i){let r=null;(this.withPositions||this.withSource)&&(r=i.position());let n=this,s=function(){let o=null,a=Array.prototype.slice.call(arguments);if(a.push(e),n.withPositions||n.withSource){let c=null;n.withSource&&(c=i.lexer._input.substring(r.offset,i.prev[2])),o=new Z$(c,r,new e9(i.prev[0],i.prev[1],i.prev[2])),a.push(o)}t||(t=a.shift());let l=n[t];if(typeof l!="function")throw new Error('Undefined node "'+t+'"');let u=Object.create(l.prototype);return l.apply(u,a),s.instance=u,s.trailingComments&&(u.trailingComments=s.trailingComments),typeof s.postBuild=="function"&&s.postBuild(u),i.debug&&delete n.stack[s.stackUid],n.resolvePrecedence(u,i)};return i.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:r,stack:new Error().stack.split(`
`).slice(3,5)},s.stackUid=this.stackUid),s.setTrailingComments=function(o){s.instance?s.instance.setTrailingComments(o):s.trailingComments=o},s.destroy=function(o){e&&(o?o.leadingComments?o.leadingComments=e.concat(o.leadingComments):o.leadingComments=e:i._docIndex=i._docs.length-e.length),i.debug&&delete n.stack[s.stackUid]},s};Ei.prototype.checkNodes=function(){let t=[];for(let e in this.stack)Object.prototype.hasOwnProperty.call(this.stack,e)&&(this.stack[e].key=e,t.push(this.stack[e]));return this.stack={},t};[Nx(),Ex(),wx(),Lx(),Bx(),Gx(),Qx(),Rc(),u0(),p0(),_0(),I0(),P0(),R0(),D0(),U0(),z0(),Z0(),rw(),Uh(),uw(),pw(),_w(),uT(),Iw(),Vn(),Pw(),Rw(),Dw(),Mw(),Uw(),Ww(),zw(),Zw(),rk(),ak(),fk(),mk(),Tk(),Ye(),Nk(),Ek(),wk(),cT(),qk(),jk(),Yk(),Qk(),eD(),nD(),lD(),dD(),gD(),bD(),SD(),CD(),hs(),ru(),LD(),BD(),GD(),KD(),eF(),nF(),lF(),dF(),Kt(),gF(),bF(),SF(),CF(),kF(),OF(),Ta(),VF(),HF(),$F(),JF(),iL(),oL(),cL(),hL(),TL(),ba(),NL(),EL(),wL(),LL(),Je(),BL(),GL(),KL(),XL(),tO(),sO(),uO(),pO(),_O(),IO(),PO(),RO(),FO(),qO(),jO(),YO(),QO(),e1(),n1(),l1(),d1(),g1(),b1(),S1()].forEach(function(t){Ei.prototype[t.kind]=t});P1.exports=Ei});var w1=A((iNe,ms)=>{"use strict";var E1=CR(),C1=cx(),R1=px(),x1=A1();function dT(t,e){let i=Object.keys(t),r=i.length;for(;r--;){let n=i[r],s=t[n];s===null?delete e[n]:typeof s=="function"?e[n]=s.bind(e):Array.isArray(s)?e[n]=Array.isArray(e[n])?e[n].concat(s):s:typeof s=="object"?e[n]=typeof e[n]=="object"?dT(s,e[n]):s:e[n]=s}return e}var tr=function(t){if(typeof this=="function")return new this(t);if(this.tokens=R1,this.lexer=new E1(this),this.ast=new x1,this.parser=new C1(this.lexer,this.ast),t&&typeof t=="object"){if(t.parser&&(t.lexer||(t.lexer={}),t.parser.version)){if(typeof t.parser.version=="string"){let e=t.parser.version.split(".");if(e=parseInt(e[0])*100+parseInt(e[1]),isNaN(e))throw new Error("Bad version number : "+t.parser.version);t.parser.version=e}else if(typeof t.parser.version!="number")throw new Error("Expecting a number for version");if(t.parser.version<500||t.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}dT(t,this),this.lexer.version=this.parser.version}},pT=function(t){return typeof t.write=="function"?t.toString():t};tr.create=function(t){return new tr(t)};tr.parseEval=function(t,e){return new tr(e).parseEval(t)};tr.prototype.parseEval=function(t){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,t=pT(t),this.parser.parse(t,"eval")};tr.parseCode=function(t,e,i){return typeof e=="object"&&!i&&(i=e,e="unknown"),new tr(i).parseCode(t,e)};tr.prototype.parseCode=function(t,e){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,t=pT(t),this.parser.parse(t,e)};tr.tokenGetAll=function(t,e){return new tr(e).tokenGetAll(t)};tr.prototype.tokenGetAll=function(t){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,t=pT(t);let e=this.lexer.EOF,i=this.tokens.values;this.lexer.setInput(t);let r=this.lexer.lex()||e,n=[];for(;r!=e;){let s=this.lexer.yytext;Object.prototype.hasOwnProperty.call(i,r)&&(s=[i[r],s,this.lexer.yylloc.first_line]),n.push(s),r=this.lexer.lex()||e}return n};ms.exports=tr;ms.exports.tokens=R1;ms.exports.lexer=E1;ms.exports.AST=x1;ms.exports.parser=C1;ms.exports.combine=dT;ms.exports.Engine=tr;ms.exports.default=tr});var iM=A(tM=>{tM.debounce=function(t,e,i){var r,n,s;e===void 0&&(e=50),i===void 0&&(i={});var o=(r=i.isImmediate)!=null&&r,a=(n=i.callback)!=null&&n,l=i.maxWait,u=Date.now(),c=[];function f(){if(l!==void 0){var h=Date.now()-u;if(h+e>=l)return l-h}return e}var d=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(y,v){var b=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,u=Date.now(),!o){var C=t.apply(p,h);a&&a(C),c.forEach(function(q){return(0,q.resolve)(C)}),c=[]}},f()),b){var I=t.apply(p,h);return a&&a(I),y(I)}c.push({resolve:y,reject:v})})};return d.cancel=function(h){s!==void 0&&clearTimeout(s),c.forEach(function(p){return(0,p.reject)(h)}),c=[]},d}});var W9={};bM(W9,{getAntlersSettings:()=>Ir,globalSettings:()=>aa,requestEdits:()=>Ey,sendProjectDetails:()=>X1});module.exports=IM(W9);var lM=Y(Jh(),1),uM=Y(require("fs"),1),cM=Y(LT(),1),Zt=Y(hI(),1);var xs=class{constructor(){this.currentStructure=null;this.isReloading=!1;this.isDirtyState=!0;this.structuredProject=null}setStructuredProject(e){this.structuredProject=e}hasStructuredBlueprints(){return this.structuredProject!=null}getAllStructuredBlueprints(){return this.structuredProject==null?[]:this.structuredProject.assets.concat(this.structuredProject.collections).concat(this.structuredProject.forms).concat(this.structuredProject.general).concat(this.structuredProject.navigations).concat(this.structuredProject.taxonomies)}getStructuredProject(){return this.structuredProject}setActiveProject(e){this.currentStructure=e}getStructure(){return this.currentStructure}hasStructure(){return this.currentStructure!=null}setDirtyState(e){this.isDirtyState=e}reloadDetails(){this.isReloading||this.isDirtyState!=!1&&this.currentStructure!=null&&(this.isReloading=!0,this.currentStructure=this.currentStructure.reloadDetails(),this.isReloading=!1,this.isDirtyState=!1)}};xs.instance=null;(typeof xs.instance>"u"||xs.instance==null)&&(xs.instance=new xs);var ee=xs;var on=class{static registerDetails(e,i){this.documentDetails.set(e,i)}static hasDetails(e){return this.documentDetails.has(e)}};on.documentDetails=new Map;var EU={documentDescription:"",documentName:"",collectionInjections:[],blueprints:[],variableHelper:null,injectsParameters:[],varReferenceNames:new Map,formatterEnabled:!0},mI="@name",gI="@description",_I="@desc",yI="@entry",TI="@collection",bI="@blueprint",II="@var",vI="@set",NI="@param",SI="@param*",CU="@front",PI="@format";function Ru(t,e){if(e==null||e.isComment==!1)return EU;let i=e.content.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`).map(p=>p.trim()),r=[],n=new Map,s="",o="",a=[],l=[],u="",c=null,f=!1,d=!0;for(let p=0;p<i.length;p++){let y=i[p];if(y.startsWith(yI))a=a.concat(y.slice(yI.length).split(",").map(v=>v.trim())),f=!1;else if(y.startsWith(TI))a=a.concat(y.slice(TI.length).split(",").map(v=>v.trim())),f=!1;else if(y.startsWith(bI))l=l.concat(y.slice(bI.length).split(",").map(v=>v.trim())),f=!1;else if(y.startsWith(mI))s=y.slice(mI.length).trim(),f=!1;else if(y.startsWith(gI))o=y.slice(gI.length).trim(),f=!0;else if(y.startsWith(_I))o=y.slice(_I.length).trim(),f=!0;else if(y.startsWith(II))u=y.slice(II.length).trim(),f=!1;else if(y.startsWith(vI))u="@page "+y.slice(vI.length).trim(),f=!1;else if(y.startsWith(NI)){let v=NI.length,b=!1;y.startsWith(SI)&&(v=SI.length,b=!0);let C=y.slice(v).trim().split(" ");if(C.length>0)if(C[0]==CU&&C.length>=4){C.shift();let q=C.shift(),K=C.shift(),J=C.join(" ");r.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:J,expectsTypes:["*"],isDynamic:!0,isRequired:b,name:K}),n.set(K,q)}else{let q=C.shift(),K=C.join(" ");r.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:K,expectsTypes:["*"],isDynamic:!0,isRequired:b,name:q})}}else y.startsWith(PI)?y.slice(PI.length).trim().toLowerCase()=="true"?d=!0:d=!1:f&&(o+=`
`+y.trim())}if(u.length>0){let p=u.split(" ");if(p.length==2){let y=p[0],v=p[1];if(v.includes(".")){let b=v.split(".");if(b.length==2){let I=b[0],C=b[1];c={variableName:y,collectionName:I,fieldHandle:C,setHandle:""}}else if(b.length==3){let I=b[0],C=b[1],q=b[2];c={variableName:y,collectionName:I,fieldHandle:C,setHandle:q}}}else c={variableName:y,setHandle:"",collectionName:"",fieldHandle:v}}}if(t.trim().length>0&&ee.instance!=null&&ee.instance.hasStructure()){let p=ee.instance.getStructure().findView(t);p!=null&&(p.injectsParameters=r,p.varReferenceNames=n)}let h={documentName:s,documentDescription:o,collectionInjections:a,blueprints:l,variableHelper:c,injectsParameters:r,varReferenceNames:n,formatterEnabled:d};return t.trim().length>0&&e.startPosition!=null&&(e.startPosition.line<=1||e.index<=1)&&on.registerDetails(t,h),h}var RU=["markdown","text","textarea","slug","button_group","code","color","date","form","link","structures","select","taxonomies","terms","template","time","video","users","user_groups","user_roles"],xU=["array","assets","bard","blueprints","collections","entries","list","grid","replicator","structures_multiple","sites","select_multiple","form_multiple","table","tags","terms_multiple","taxonomies_multiple","users_multiple","checkboxes","select_multiple","yaml","user_groups_multiple","user_roles_multiple"],wU=["integer","range"],kU=["toggle"];function Zf(t){return RU.includes(t)?"string":xU.includes(t)?"array":wU.includes(t)?"number":kU.includes(t)?"boolean":t}var ws=class{constructor(){this.partialReferences=new Map;this.cacheReferences=new Map;this.removesPageScope=new Map}clearAllReferences(e){this.clearPartialReferences(e),this.clearCacheReferences(e)}registerPartialReferences(e,i){this.partialReferences.has(e)==!1&&this.partialReferences.set(e,[]),this.partialReferences.set(e,i)}registerCacheReferences(e,i){this.cacheReferences.has(e)==!1&&this.cacheReferences.set(e,[]),this.cacheReferences.set(e,i)}clearPartialReferences(e){this.partialReferences.has(e)&&this.partialReferences.set(e,[])}clearRemovesPageScope(e){this.removesPageScope.has(e)&&this.removesPageScope.delete(e)}pageScopeDisabled(e){return this.removesPageScope.has(e)}clearCacheReferences(e){this.cacheReferences.has(e)&&this.cacheReferences.set(e,[])}setRemovesPageScope(e,i){this.removesPageScope.set(e,i)}getPartialReferences(e){return this.partialReferences.has(e)==!1?[]:this.partialReferences.get(e)}getCacheReferencnes(e){return this.cacheReferences.has(e)==!1?[]:this.cacheReferences.get(e)}hasPartialReferences(e){return this.partialReferences.has(e)}hasCacheReferences(e){return this.cacheReferences.has(e)}};ws.instance=null;(typeof ws.instance>"u"||ws.instance==null)&&(ws.instance=new ws);var an=ws;var Bt=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(e){let i=new Bt;return i.offset=this.offset+e,i.index=this.index+e,i.line=this.line,i.char=this.char+e,i}isBefore(e){return e==null?!1:e.line>this.line||e.line==this.line&&this.offset<e.offset}isWithin(e,i,r=0){return e==null||i==null?!1:this.index>=e.index&&this.index<=i.index+r}isWithinRange(e){return e==null?!1:e.start!=null&&e.end!=null?this.isWithin(e.start,e.end):!1}};var kg=class{constructor(){this.start=null;this.end=null}},Wa=kg;Wa.Empty=new kg;function AI(t,e){let i=e.copy(),r=e.copy();return r.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"group",introducedBy:t}),r.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"key",introducedBy:t}),r.addScopeList("items",i),e.addScopeList("groups",r),e}function EI(t,e){let i=e.copy();return e.addScopeList("items",i),e}var CI=[{name:"key_by",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Re-keys the array or collection using the provided field name.",docLink:null,parameters:[{name:"field",description:"The field to re-key the array or collection by."}],canBeParameter:!0,isDeprecated:!1},{name:"as",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Alias the array variable with a key.",docLink:"https://statamic.dev/modifiers/as",parameters:[{name:"alias",description:"The alias name."}],canBeParameter:!0,isDeprecated:!1},{name:"ampersand_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts the array into a comma delimited string, with an ampersand before the last item.",docLink:"https://statamic.dev/modifiers/ampersand_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Collapses an array of arrays into a single, flat, array.",docLink:"https://statamic.dev/modifiers/collapse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"contains",acceptsType:["array","string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the value contains another value.",docLink:"https://statamic.dev/modifiers/contains",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"count",acceptsType:["array"],returnsType:["number"],forFieldType:[],description:"Returns the number of items in the array.",docLink:"https://statamic.dev/modifiers/count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dl",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an associative array into an HTML definition list.",docLink:"https://statamic.dev/modifiers/dl",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Breaks a string into an array on a given delimiter.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The delimiter to break the string apart on."}],canBeParameter:!0,isDeprecated:!1},{name:"flatten",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Flattens a multi-dimensional array.",docLink:"https://statamic.dev/modifiers/flatten",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"flip",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Swaps the array keys with their values.",docLink:"https://statamic.dev/modifiers/flip",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"group_by",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Groups the array items by the given key.",docLink:"https://statamic.dev/modifiers/group_by",parameters:[{name:"key",description:"The key to group by."}],canBeParameter:!0,augmentScope:AI,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_empty",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if the array is empty.",docLink:"https://statamic.dev/modifiers/is_empty",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"join",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turn an array into a string by gluing together all the data.",docLink:"https://statamic.dev/modifiers/join",parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"joinplode",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turn an array into a string by gluing together all the data.",docLink:null,parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"limit",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Limits the number of items returned in the array",docLink:"https://statamic.dev/modifiers/limit",parameters:[{name:"count",description:"The maximum number of items to return."}],canBeParameter:!0,isDeprecated:!1},{name:"list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts the array into a comma-separated string.",docLink:"https://statamic.dev/modifiers/list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"offset",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Offsets the items returned in the array.",docLink:"https://statamic.dev/modifiers/offset",parameters:[{name:"offset",description:"The one-based index to start retrieving items."}],canBeParameter:!0,isDeprecated:!1},{name:"ol",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns the array into an HTML ordered list.",docLink:"https://statamic.dev/modifiers/ol",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"option_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/option_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"pluck",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Plucks a value from a collection of items.",parameters:[{name:"value",description:"The value to pluck from the array or collection."}],canBeParameter:!0,docLink:null,isDeprecated:!1},{name:"pad",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Pads the array to a specified length with the given value.",docLink:"https://statamic.dev/modifiers/pad",parameters:[{name:"length",description:"The desired length of the array."},{name:"value",description:"The value to pad the array with."}],canBeParameter:!0,isDeprecated:!1},{name:"piped",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/piped",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sentence_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:'Turns the array into a comma-delimited list, with the word "and" before the last item.',docLink:"https://statamic.dev/modifiers/sentence_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"shuffle",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Randomizes the order of array elements.",docLink:"https://statamic.dev/modifiers/shuffle",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sort",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Sorts the array by a key in ascending or descending order.",docLink:"https://statamic.dev/modifiers/sort",parameters:[{name:"key",description:"The key to sort by."},{name:"order",description:"The sort direction. `asc` or `desc`."}],canBeParameter:!0,isDeprecated:!1},{name:"sum",acceptsType:["array"],returnsType:["number"],forFieldType:[],description:"Returns the sum of all items in the array.",docLink:"https://statamic.dev/modifiers/sum",parameters:[{name:"key",description:"The value to sum."}],canBeParameter:!1,isDeprecated:!1},{name:"ul",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns the array into an HTML unordered list.",docLink:"https://statamic.dev/modifiers/ul",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"unique",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Returns all unique items in the array.",docLink:"https://statamic.dev/modifiers/unique",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"where",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Filters the array by a given key and value.",docLink:"https://statamic.dev/modifiers/where",parameters:[{name:"key",description:"The property to filter by."},{name:"value",description:"The value to compare to."}],canBeParameter:!0,isDeprecated:!1},{name:"split",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Splits an array into smaller arrays with the provided size.",canBeParameter:!0,docLink:"",parameters:[{name:"size",description:"The size of each new array"}],augmentScope:EI,isDeprecated:!1},{name:"compact",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Accepts a comma-delimited list of variable names and return an array with their values.",canBeParameter:!0,docLink:"",parameters:[{name:"variables",description:"A comma-delimited list of variable names."}],isDeprecated:!1},{name:"classes",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts an array of conditional class names to a CSS class list.",canBeParameter:!0,docLink:"",parameters:[],isDeprecated:!1}];var RI=[{name:"background_position",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Converts an asset focal point into a background-position CSS property.",docLink:"https://statamic.dev/modifiers/background_position",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"image",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Generates an HTML image element with the variable's value as the src.",docLink:"https://statamic.dev/modifiers/image",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"output",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Returns the string output of an Asset file's contents.",docLink:"https://statamic.dev/modifiers/output",parameters:[],canBeParameter:!1,isDeprecated:!1}];var xI=[{name:"contains_all",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_all",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"contains_any",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_any",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"ends_with",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string ends with another string.",docLink:"https://statamic.dev/modifiers/ends_with",parameters:[{name:"value",description:"The value to check against."}],canBeParameter:!1,isDeprecated:!1},{name:"has_lower_case",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains any lowercase characters.",docLink:"https://statamic.dev/modifiers/has_lower_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"has_upper_case",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains any uppercase characters.",docLink:"https://statamic.dev/modifiers/has_upper_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_after",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is after another date.",docLink:"https://statamic.dev/modifiers/is_after",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_alphanumeric",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only alphanumeric characters.",docLink:"https://statamic.dev/modifiers/is_alphanumeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_before",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if a date is before another date.",docLink:"https://statamic.dev/modifiers/is_before",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_between",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if a date is between two other dates.",docLink:"https://statamic.dev/modifiers/is_between",parameters:[{name:"start_date",description:"The start date to compare."},{name:"end_date",description:"The end date to compare."}],canBeParameter:!1,isDeprecated:!1},{name:"is_blank",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only whitespace characters.",docLink:"https://statamic.dev/modifiers/is_blank",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],forFieldType:["text","textarea"],description:"Tests if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_future",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is in the future.",docLink:"https://statamic.dev/modifiers/is_future",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_json",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string is valid JSON.",docLink:"https://statamic.dev/modifiers/is_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_leap_year",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a leap year.",docLink:"https://statamic.dev/modifiers/is_leap_year",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_numeric",acceptsType:["string","number"],returnsType:["boolean"],forFieldType:[],description:"Tests if the value is a number or numeric string.",docLink:"https://statamic.dev/modifiers/is_numeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_past",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is in the past.",docLink:"https://statamic.dev/modifiers/is_past",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_today",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is today.",docLink:"https://statamic.dev/modifiers/is_today",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_uppercase",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only uppercase characters.",docLink:"https://statamic.dev/modifiers/is_uppercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekday",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a week day.",docLink:"https://statamic.dev/modifiers/is_weekday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekend",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a weekend day.",docLink:"https://statamic.dev/modifiers/is_weekend",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_yesterday",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is yesterday.",docLink:"https://statamic.dev/modifiers/is_yesterday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_tomorrow",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is tomorrow.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"starts_with",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a value starts with the provided value.",docLink:"https://statamic.dev/modifiers/starts_with",parameters:[{name:"value",description:"The value to test for."}],canBeParameter:!1,isDeprecated:!1}];var wI=[{name:"days_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of days since a given date.",docLink:"https://statamic.dev/modifiers/days_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"format_translated",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Returns a formatted Carbon datetime/string.",docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using the provided format using PHP's [date variables](https://www.php.net/date).",hoverDescription:`Formats the date using the provided format using PHP's [date variables](https://www.php.net/date).

## Formatting Options

See [PHP: DateTimeInterface::format](https://www.php.net/manual/en/datetime.format.php) for all available options.

| Format Character | Description | Example |
|:----|----|---|
| Day | --- | --- |
| d | Day of the month, 2 digits with leading zeros | 01 to 31 |
| D |A textual representation of a day | Mon - Sun |
| j | Day of the month, without leading zeros | 1 - 31 |
| l | The day of the week | Sunday - Saturday |
| N | ISO 8601 representation of the day of the week | 1 (Monday) - 7 (Sunday) |
| S | English ordinal suffix for the day | st, nd, rt, or th |
| w | Numeric day of the week | 0 (Sunday) - 6 (Saturday) |
| z | Day of the year, starting at 0 | 0 - 365 |
| Week | --- | --- |
| W | ISO 8601 week number of the year, starting on Monday | 42 |
| Month | --- | --- |
| F | Text representation of the month | January - December |
| m | Numeric representation of the month, with leading zeros | 01 - 12 |
| M | A short text representation of the month | Jan - Dec |
| n | Numeric representation of the month | 1 - 12 |
| t | Number of days in the month | 28 - 31 |
| Year | --- | --- |
| L | Indicates if it's a leap year | 1 if true, 0 otherwise |
| Y | Four digit representation of the year | 2022 |
| y | Two digit representation of the year | 22 |
| Time | --- | --- |
| a | Lowercase Anti meridiem and Post meridiem | am or pm |
| A | Uppercase Anti meridiem and Post meridiem | AM or PM |
| g | 12-hour hour format without leading zeros | 1 - 12 |
| G | 24-hour hour format without leading zeros | 0 - 23 |
| h | 12-hour hour format with leading zeros | 01 - 12 |
| H | 24-hour hour format with leading zeros | 00 - 23 |
| i | Minutes with leading zeros | 00 - 59 |
| s | Seconds with leading zeros | 00 - 59 |
| Timezone | --- | --- |
| e | Timezone identifier | UTC, GMT |
| I | Indicates if date is in daylight saving time | 1 if true, 0 otherwise |
| T | Timezone appreviation | EST, MDT, +05 |
`,docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format_localized",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using server's locale, using PHP's [strftime format variables](https://www.php.net/strftime).",docLink:"https://statamic.dev/modifiers/format_localized",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!0,getDeprecatedMessage(){return"The format_localized modifier is deprecated. Alternatives, such as the iso_format modifier, should be used instead."}},{name:"hours_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of hours since the date.",docLink:"https://statamic.dev/modifiers/hours_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"iso_format",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using an ISO format.",docLink:"https://statamic.dev/modifiers/iso_format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!1,isDeprecated:!1},{name:"minutes_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of minutes since the date.",docLink:"https://statamic.dev/modifiers/minutes_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"modify_date",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Alters the date by incrementing or decrementing it in a format accepted by PHP's [strtotime](https://www.php.net/strtotime) function.",docLink:"https://statamic.dev/modifiers/modify_date",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"months_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of months since the date.",docLink:"https://statamic.dev/modifiers/months_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"relative",acceptsType:["string","date"],returnsType:["string"],forFieldType:["date"],description:"Returns a human readable date difference.",docLink:"https://statamic.dev/modifiers/relative",parameters:[{name:"add_ago",description:"Whether to add the relative suffix words at the end of the string."}],canBeParameter:!1,isDeprecated:!1},{name:"seconds_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of seconds since the date.",docLink:"https://statamic.dev/modifiers/seconds_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"timezone",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Applies a timezone to the date.",docLink:"https://statamic.dev/modifiers/timezone",parameters:[{name:"timezone",description:"The timezone to apply."}],canBeParameter:!1,isDeprecated:!1},{name:"weeks_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of weeks since the date.",docLink:"https://statamic.dev/modifiers/weeks_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"years_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of years since the date.",docLink:"https://statamic.dev/modifiers/years_ago",parameters:[],canBeParameter:!1,isDeprecated:!1}];var kI=[{name:"chunk",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Breaks the array or collection into smaller arrays of a given size.",docLink:"https://statamic.dev/modifiers/chunk",parameters:[{name:"chunk_size",description:"The maximum length of each new chunk."}],canBeParameter:!0,isDeprecated:!1},{name:"favicon",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates a favicon HTML meta tag for the given value.",docLink:"https://statamic.dev/modifiers/favicon",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"first",acceptsType:["string","array"],returnsType:["*"],forFieldType:[],description:"Returns the specified number of characters/items from the beginning of the string/array.",docLink:"https://statamic.dev/modifiers/first",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"last",acceptsType:["string","array"],returnsType:["*"],forFieldType:[],description:"Returns the specified number of characters/items from the end of the string/array.",docLink:"https://statamic.dev/modifiers/last",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"link",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates an HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/link",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"mailto",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates a mailto HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/mailto",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"markdown",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses the value as Markdown and returns the HTML.",docLink:"https://statamic.dev/modifiers/markdown",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"nl2br",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces line breaks with HTML `<br>` tags.",docLink:"https://statamic.dev/modifiers/nl2br",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Modifies the input string by replacing it with special characters, making it harder for bots but remains readable to site visitors.",docLink:"https://statamic.dev/modifiers/obfuscate",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate_email",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Obfuscates an email address with special HTML characters.",docLink:"https://statamic.dev/modifiers/obfuscate_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"strip_tags",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes HTML tags from the string.",docLink:"https://statamic.dev/modifiers/strip_tags",parameters:[{name:"tags",description:"The HTML tag(s) to remove from the string."}],canBeParameter:!1,isDeprecated:!1},{name:"table",acceptsType:["array"],returnsType:["string"],forFieldType:["table"],description:"Turns a [Table FieldType](https://statamic.dev/fieldtypes/table) array into an HTML table.",docLink:"https://statamic.dev/modifiers/table",parameters:[{name:"content_markdown",description:"Whether to parse cell contents as Markdown."}],canBeParameter:!1,isDeprecated:!1},{name:"textile",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses a string with [Textile](http://demo.textilewiki.com/theme-default/) and returns the HTML.",docLink:"https://statamic.dev/modifiers/textile",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"wrap",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps a string with a given HTML tag.",docLink:"https://statamic.dev/modifiers/wrap",parameters:[{name:"expression",description:"The HTML tag or Emmet-style expression to wrap the value in."}],canBeParameter:!1,isDeprecated:!1}];var DI=[{name:"add",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!0,isDeprecated:!1},{name:"+",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!1,isDeprecated:!1},{name:"ceil",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds the value to the next whole number.",docLink:"https://statamic.dev/modifiers/ceil",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"divide",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Divides two values.",docLink:"https://statamic.dev/modifiers/divide",parameters:[{name:"value",description:"The value to divide."}],canBeParameter:!0,isDeprecated:!1},{name:"floor",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds a number down to the next whole number.",docLink:"https://statamic.dev/modifiers/floor",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"format_number",acceptsType:["number"],returnsType:["string"],forFieldType:[],description:"Formats a number.",docLink:"https://statamic.dev/modifiers/format_number",parameters:[{name:"precision",description:"Number of decimal places before rounding."},{name:"decimal_separator",description:"The decimal separator (defaults to `.`)."},{name:"thousands_separator",description:"The thousands separator (default `,`)."}],canBeParameter:!0,isDeprecated:!1},{name:"mode",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"",docLink:"",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"multiply",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!0,isDeprecated:!1},{name:"*",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!1,isDeprecated:!1},{name:"round",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds a number to a specified precision.",docLink:"https://statamic.dev/modifiers/round",parameters:[{name:"precision",description:"The number of digits after the decimal point."}],canBeParameter:!0,isDeprecated:!1},{name:"subtract",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!0,isDeprecated:!1},{name:"-",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!1,isDeprecated:!1}];var FI=[{name:"partial",acceptsType:["*"],returnsType:["*view*"],forFieldType:[],description:"Injects data into a partial and renders it.",docLink:"https://statamic.dev/modifiers/partial",parameters:[{name:"partial",description:"The name of the partial."}],canBeParameter:!1,isDeprecated:!1},{name:"macro",acceptsType:["*"],returnsType:["*"],forFieldType:[],description:"Runs a pre-configured macro on the data.",docLink:"https://statamic.dev/modifiers/macro",parameters:[{name:"macro",description:"The macro name."}],canBeParameter:!1,isDeprecated:!1},{name:"url",acceptsType:["string","*"],returnsType:["string"],forFieldType:[],description:"Locates the URL of an asset, page, entry, or taxonomy term based on the variable contents.",docLink:"https://statamic.dev/modifiers/url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"bool_string",acceptsType:["boolean","*"],returnsType:["string"],canBeParameter:!1,description:'Converts the provided value to a "true" or "false" string',docLink:null,forFieldType:["toggle"],isDeprecated:!1,parameters:[{name:"value",description:"The truthy value to convert to a string."}]}];var LI=[{name:"ascii",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all non-ASCII characters with their closest ASCII counterparts.",docLink:"https://statamic.dev/modifiers/ascii",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"at",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns the character at a given zero-based position.",docLink:"https://statamic.dev/modifiers/at",parameters:[{name:"position",description:"The zero-based position to retrieve a character from."}],canBeParameter:!0,isDeprecated:!1},{name:"backspace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes a specified number of characters from the end of a string.",docLink:"https://statamic.dev/modifiers/backspace",parameters:[{name:"character_count",description:"The number of characters to remove from the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"camelize",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the string into camelCase.",docLink:"https://statamic.dev/modifiers/camelize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"cdata",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps the string in CDATA XML tags.",docLink:"https://statamic.dev/modifiers/cdata",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse_whitespace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Trims a string and replaces consecutive whitespace characters with a single space.",docLink:"https://statamic.dev/modifiers/collapse_whitespace",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"count_substring",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Counts the number of occurrences of a term within the string.",docLink:"https://statamic.dev/modifiers/count_substring",parameters:[{name:"term",description:"The sub-string to search for."}],canBeParameter:!0,isDeprecated:!1},{name:"dashify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a lower-cased and trimmed string, separated by dashes.",docLink:"https://statamic.dev/modifiers/dashify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"deslugify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all hyphens and underscores with spaces.",docLink:"https://statamic.dev/modifiers/deslugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"embed_url",acceptsType:["string"],returnsType:["string"],forFieldType:["video"],description:"Converts a YouTube or Viemo link into their embed URLs.",docLink:"https://statamic.dev/modifiers/embed_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trackable_embed_url",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Get the embed URL when given a YouTube or Vimeo link that's direct to the page.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"ensure_left",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string begins with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_left",parameters:[{name:"start_string",description:"The value that should be at the start of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"ensure_right",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string ends with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_right",parameters:[{name:"end_string",description:"The value that should be at the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"entities",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Encode a string with HTML entities.",docLink:"https://statamic.dev/modifiers/entities",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"excerpt",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Breaks a string at a given marker.",docLink:"https://statamic.dev/modifiers/excerpt",parameters:[{name:"marker",description:"The substring to break on."}],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Breaks a string into an array of strings.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The string to split the larger string by."}],canBeParameter:!0,isDeprecated:!1},{name:"gravatar",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts an email string to a Gravatar image URL.",docLink:"https://statamic.dev/modifiers/gravatar",parameters:[{name:"image size",description:"The desired image size."}],canBeParameter:!0,isDeprecated:!1},{name:"insert",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Inserts a string at the position provided.",docLink:"https://statamic.dev/modifiers/insert",parameters:[{name:"value",description:"The value to insert."},{name:"position",description:"The zero based position to insert the text at."}],canBeParameter:!0,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_embeddable",acceptsType:["string"],returnsType:["boolean"],forFieldType:["video"],description:"Checks to see if a video URL is embeddable.",docLink:"https://statamic.dev/modifiers/is_embeddable",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_lowercase",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if the string contains only lowercase characters.",docLink:"https://statamic.dev/modifiers/is_lowercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if a string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lcfirst",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the first character of the value to lower case.",docLink:"https://statamic.dev/modifiers/lcfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"length",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Returns the number of items in an array or number of characters in a string.",docLink:"https://statamic.dev/modifiers/length",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lower",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all characters to lowercase.",docLink:"https://statamic.dev/modifiers/lower",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"md5",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Creates an MD5 hash of the variable.",docLink:"https://statamic.dev/modifiers/md5",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"rawurlencode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-encode a variable according to RFC-3986.",docLink:"https://statamic.dev/modifiers/rawurlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"read_time",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns an estimated read time, in minutes.",docLink:"https://statamic.dev/modifiers/read_time",parameters:[{name:"words per minute",description:"The words per minute to use as an estimate."}],canBeParameter:!0,isDeprecated:!1},{name:"regex_replace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all regex matches within a string.",docLink:"https://statamic.dev/modifiers/regex_replace",parameters:[{name:"pattern",description:"The regex pattern."},{name:"replace",description:"The replacement value."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_left",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string never begins with a specified string.",docLink:"https://statamic.dev/modifiers/remove_left/",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_right",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that a string never ends with a specified string.",docLink:"https://statamic.dev/modifiers/remove_right",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"replace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all occurrences of a string with a different value.",docLink:"https://statamic.dev/modifiers/replace",parameters:[{name:"needle",description:"The string to search for."},{name:"value",description:"The value to replace all occurrences with."}],canBeParameter:!0,isDeprecated:!1},{name:"reverse",acceptsType:["string","array"],returnsType:["string","array"],forFieldType:[],description:"Reverses all characters in a string, or all items in an array.",docLink:"https://statamic.dev/modifiers/reverse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"safe_truncate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/safe_truncate",parameters:[{name:"length",description:"The desired string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"sanitize",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts special characters to HTML entities.",docLink:"https://statamic.dev/modifiers/sanitize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"segment",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a segment by number from any valid URL or URI.",docLink:"https://statamic.dev/modifiers/segment",parameters:[{name:"segment",description:"The one-based segment to return."}],canBeParameter:!0,isDeprecated:!1},{name:"singular",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns the singular form of an English word.",docLink:"https://statamic.dev/modifiers/singular",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"slugify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the string into an URL slug.",docLink:"https://statamic.dev/modifiers/slugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"smartypants",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Translates plain ASCII punctuation characters into typographic punctuation HTML entities.",docLink:"https://statamic.dev/modifiers/smartypants",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"spaceless",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes excess whitespace and line breaks from a string.",docLink:"https://statamic.dev/modifiers/spaceless",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"substr",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a portion of a string based on provided a start index, and optional length.",docLink:"https://statamic.dev/modifiers/substr",parameters:[{name:"start",description:"The 0-based index to start searching."},{name:"length",description:"An optional length for the string to find."}],canBeParameter:!1,isDeprecated:!1},{name:"surround",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Surrounds a string with another string.",docLink:"https://statamic.dev/modifiers/surround",parameters:[{name:"value",description:"The value to surround the string with."}],canBeParameter:!1,isDeprecated:!1},{name:"swap_case",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a case swapped version of the string.",docLink:"https://statamic.dev/modifiers/swap_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"tidy",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a string with smart quotes, ellipsis characters, and dashes from Windows-1252 replaced by ASCII equivalents.",docLink:"https://statamic.dev/modifiers/tidy",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"title",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a Title Cased version of the string.",docLink:"https://statamic.dev/modifiers/title",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trim",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes whitespace from the start and end of the string.",docLink:"https://statamic.dev/modifiers/trim",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"truncate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/truncate",parameters:[{name:"length",description:"The maximum string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"ucfirst",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Upper cases the first character in the string.",docLink:"https://statamic.dev/modifiers/ucfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"underscored",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a lower-cased and trimmed version of the string, separated by underscores.",docLink:"https://statamic.dev/modifiers/underscored",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"upper",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Transforms the string to uppercase.",docLink:"https://statamic.dev/modifiers/upper",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urldecode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-decodes the string.",docLink:"https://statamic.dev/modifiers/urldecode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urlencode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-encodes the string.",docLink:"https://statamic.dev/modifiers/urlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"widont",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Attempts to prevent lines with single words.",docLink:"https://statamic.dev/modifiers/widont",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"word_count",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Returns the number of words in the string.",docLink:"https://statamic.dev/modifiers/word_count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"add_slashes",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Adds slashes before characters that need to be escaped.",docLink:"https://statamic.dev/modifiers/add_slashes",canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"antlers",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses the provided value as Antlers, and returns the result.",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_items",acceptsType:["string"],returnsType:["array"],forFieldType:["bard"],description:"Converts a Bard value to a flat array of nodes and marks.",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_text",acceptsType:["array","string"],returnsType:["string"],forFieldType:["bard"],description:"Converts a Bard value to plain text (excluding sets).",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_html",acceptsType:["array","string"],returnsType:["string"],forFieldType:["bard"],description:"Converts a Bard value to HTML (excluding sets).",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"mark",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps matched words and phrases in <mark> tags.",docLink:null,canBeParameter:!1,parameters:[{name:"search",description:"The search word or phrase to wrap in <mark> tags."}],isDeprecated:!1},{name:"regex_mark",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps matched words and phrases in <mark> tags using regular expressions.",docLink:null,canBeParameter:!1,parameters:[{name:"pattern",description:"The search pattern used to wrap content in <mark> tags."}],isDeprecated:!1}];var OI=[{name:"console_log",acceptsType:["*"],returnsType:["null"],forFieldType:[],description:"Displays variable data in the browser's JavaScript console.",docLink:"https://statamic.dev/modifiers/console_log",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"decode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all HTML entities to their character codes.",docLink:"https://statamic.dev/modifiers/decode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dump",acceptsType:["*"],returnsType:["null"],forFieldType:[],description:"Displays variable data in the browser.",docLink:"https://statamic.dev/modifiers/dump",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"full_urls",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces root-relative URLs with absolute URLs.",docLink:"https://statamic.dev/modifiers/full_urls",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"repeat",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Repeats a value a given number of times.",docLink:"https://statamic.dev/modifiers/repeat",parameters:[{name:"times",description:"The number of times to repeat the value."}],canBeParameter:!0,isDeprecated:!1},{name:"to_spaces",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all tabs to spaces.",docLink:"https://statamic.dev/modifiers/to_spaces",parameters:[{name:"space_count",description:"The number of spaces to replace tabs with."}],canBeParameter:!1,isDeprecated:!1},{name:"to_tabs",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts spaces to tabs.",docLink:"https://statamic.dev/modifiers/to_tabs",parameters:[{name:"space_count",description:"The number of spaces to convert to tabs."}],canBeParameter:!1,isDeprecated:!1},{name:"to_json",acceptsType:["*"],returnsType:["string"],forFieldType:[],description:"Converts the data to JSON",docLink:"https://statamic.dev/modifiers/to_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"to_bool",acceptsType:["*"],returnsType:["boolean"],forFieldType:[],description:"Converts the data to a boolean/truthy value.",parameters:[],canBeParameter:!1,docLink:null,isDeprecated:!1}];var Jn=class{constructor(){this.registeredModifiers=new Map;this.acceptTypedModifierReference=new Map;this.returnTypeModifierReference=new Map;this.macros=new Map;this.modifierNameCache=[]}reset(){this.modifierNameCache=[],this.registeredModifiers.clear(),this.acceptTypedModifierReference.clear(),this.returnTypeModifierReference.clear()}getRegisteredModifiers(){return this.registeredModifiers}resetMacros(){this.macros.clear()}loadCoreModifiers(){this.registerModifiers(CI),this.registerModifiers(RI),this.registerModifiers(xI),this.registerModifiers(wI),this.registerModifiers(kI),this.registerModifiers(DI),this.registerModifiers(OI),this.registerModifiers(LI),this.registerModifiers(FI)}getModifierNames(){return this.modifierNameCache}registerMacro(e){this.macros.set(e.name,e)}registerMacros(e){for(let i=0;i<e.length;i++)this.registerMacro(e[i])}hasMacro(e){if(this.macros.has(e)){let i=this.macros.get(e);return!(typeof i>"u"||i===null)}return!1}getMacro(e){if(this.macros.has(e)){let i=this.macros.get(e);return typeof i>"u"||i===null?null:i}return null}getMacroManifestingType(e){let i=this.getMacro(e);return i==null?"":i.manifestsType}getRegisteredModifier(e){return this.registeredModifiers.has(e)?this.registeredModifiers.get(e):null}getModifiersForType(e){let i=Zf(e);return this.acceptTypedModifierReference.has(i)?this.acceptTypedModifierReference.get(i):[]}getProbableReturnType(e,i){return e==null||e.returnsType.length==0?"":i&&e.returnsType.includes("array")?"array":e.returnsType[0]}registerModifiers(e){for(let i=0;i<e.length;i++){let r=e[i];this.modifierNameCache.push(r.name);for(let n=0;n<r.acceptsType.length;n++){let s=r.acceptsType[n];this.acceptTypedModifierReference.has(s)==!1&&this.acceptTypedModifierReference.set(s,[]),this.acceptTypedModifierReference.get(s)?.push(r)}for(let n=0;n<r.returnsType.length;n++){let s=r.returnsType[n];this.returnTypeModifierReference.has(s)==!1&&this.returnTypeModifierReference.set(s,[]),this.returnTypeModifierReference.get(s)?.push(r)}this.registeredModifiers.set(e[i].name,e[i])}}registerModifier(e){let i=[];i.push(e),this.registerModifiers(i)}getModifier(e){if(this.registeredModifiers.has(e)==!1)return null;let i=this.registeredModifiers.get(e);return typeof i>"u"||i==null?null:i}hasModifier(e){if(!this.registeredModifiers.has(e))return!1;let i=this.registeredModifiers.get(e);return!(typeof i>"u"||i==null)}};Jn.instance=null;(typeof Jn.instance>"u"||Jn.instance==null)&&(Jn.instance=new Jn,Jn.instance.loadCoreModifiers());var Ce=Jn;var ed=class{constructor(e){this.parameterModifiers=[];this.hasMixedModifierStyles=!1;this.modifierNames=[];this.node=e}isPaired(){return this.node instanceof B?this.node.isPaired():!1}getModifierValue(e){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let i=0;i<this.node.modifierChain.modifierChain.length;i++){let r=this.node.modifierChain.modifierChain[i];if(r.nameNode?.name==e)return r.valueNodes.length>0?r.valueNodes[0].content:""}if(this.hasParameterModifiers())for(let i=0;i<this.parameterModifiers.length;i++){let r=this.parameterModifiers[i];if(r.name==e)return r.value}return null}getModifierRange(e){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let i=0;i<this.node.modifierChain.modifierChain.length;i++){let r=this.node.modifierChain.modifierChain[i];if(r.nameNode?.name==e)return r.valueNodes.length>0?{start:r.startPosition,end:r.endPosition}:null}if(this.hasParameterModifiers())for(let i=0;i<this.parameterModifiers.length;i++){let r=this.parameterModifiers[i];if(r.name==e&&r.namePosition!=null&&r.valuePosition!=null)return{start:r.namePosition.start,end:r.valuePosition.end}}return null}getLastManifestedModifierRuntimeType(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null){if(this.node.modifierChain.lastManifestedModifier.parameters.length>0&&this.node.modifierChain.lastManifestedModifier.modifier!=null&&Ce.instance!=null){let e=this.node.modifierChain.lastManifestedModifier.modifier;return Ce.instance.getProbableReturnType(e,this.isPaired())}return"*"}if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let i=0;i<e.length;i++)if(e[i].modifier!=null&&Ce.instance!=null){let r=e[i].modifier;return Ce.instance.getProbableReturnType(r,this.isPaired())}}return"*"}getLastManifestedModifierValue(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null)return this.node.modifierChain.lastManifestedModifier.parameters.length>0?this.node.modifierChain.lastManifestedModifier.parameters[0].value:"";if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let i=0;i<e.length;i++)if(e[i].modifier!=null)return e[i].value}return""}getLastManifestedModifier(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastModifier!=null)return this.node.modifierChain.lastModifier;if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let i=0;i<e.length;i++)if(e[i].modifier!=null)return e[i].modifier}return null}hasModifiers(){return this.node.modifierChain==null||this.node.modifierChain.modifierChain.length==0?this.parameterModifiers.length>0:!0}hasParameterModifiers(){return this.parameterModifiers.length>0}hasShorthandModifiers(){return this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0}hasModifier(e){return this.modifierNames.includes(e)}};function Dg(t){let e=[];return t.forEach(i=>{i instanceof B?e.push(i):i instanceof Ve&&i.logicBranches.length>0&&i.logicBranches.forEach(r=>{if(r.head!=null){let n=r.head;n.originalNode!=null?e.push(n.originalNode):e.push(n)}})}),e}var DU=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("");function MI(t){return(typeof t=="number"||typeof t=="string"&&DU.indexOf(t.slice(-1))===-1)&&t!==""&&!isNaN(t)}var j=class{static boolLabel(e){return e?"true":"false"}static normalizeLineEndings(e,i=`
`){return e.replace(/\r?\n/g,i)}static breakByNewLine(e){return e.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static split(e){return e.split("")}static substring(e,i,r){return e.substr(i,r)}static ctypeSpace(e){return e?.search(/^[\f\n\r\t\v ]+$/g)!==-1}static ctypeAlpha(e){return e?.search(/^[A-Za-z]+$/g)!==-1}static ctypeDigit(e){return e?.search(/^[\d]+$/g)!==-1}static ctypePunct(e){return e?.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g)!==-1}static trimLeft(e,i="\\s"){return e.replace(new RegExp("^["+i+"]+"),"")}static trimRight(e,i="\\s"){return e.replace(new RegExp("["+i+"]+$"),"")}static isNumeric(e){return MI(e)}static substringCount(e,i){let r=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(e.match(new RegExp(r,"gi"))||[]).length}static getLastLine(e){let i=j.breakByNewLine(e);return i.length==0?"":i[i.length-1]}static getFirstLine(e){let i=j.breakByNewLine(e);return i.length==0?"":i[0]}static snakeCase(e){return e.replace(/([A-Z])/g,i=>`_${i.toLowerCase()}`).replace(/^_/,"")}static makeSlug(e){e<=2&&(e=7);let i="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let o=0;o<e-1;o++)i+=r.charAt(Math.floor(Math.random()*n));return("A"+i+"A").toLowerCase()}};var td=class{constructor(e){this.node=e}findParentWithName(e){let i=this.node.getParser();return i==null?null:i.structure.findParentWithName(e,this.node)}};var BI=Y(id(),1);var D=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null;this.actions=[];this.lsRange=null;this.data=null}hash(){let e="";return this.node!=null&&(e=(this.node.endPosition?.offset??0).toString()+"|"+(this.node.startPosition?.offset??0).toString()+"|"),BI.Md5.hashStr(e+"|"+this.errorCode)}static makeSyntaxError(e,i,r,n){n==null&&(n=0);let s=new D;return s.errorCode=e,s.node=i,s.message=r,s.level=n,s}};var T=class{};T.TYPE_EXPECTING_OPERAND="ANTLR_001",T.TYPE_UNEXPECTED_END_OF_INPUT="ANTLR_002",T.TYPE_RUNTIME_TYPE_MISMATCH="ANTLR_003",T.TYPE_RUNTIME_DIVIDE_BY_ZERO="ANTLR_004",T.TYPE_RUNTIME_UNKNOWN_LANG_OPERATOR="ANTLR_005",T.TYPE_RUNTIME_UNEXPECTED_STACK_CONDITION="ANTLR_006",T.TYPE_RUNTIME_PARSE_VALUE_VIOLATION="ANTLR_007",T.TYPE_PARSE_UNCLOSED_CONDITIONAL="ANTLR_008",T.TYPE_PARSE_EMPTY_CONDITIONAL="ANTLR_009",T.TYPE_PARSE_UNPAIRED_CONDITIONAL="ANTLR_008",T.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE="ANTLR_009",T.TYPE_INCOMPLETE_ANTLERS_REGION="ANTLR_010",T.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION="ANTLR_011",T.TYPE_ILLEGAL_VARPATH_RIGHT="ANTLR_012",T.TYPE_ILLEGAL_DOTVARPATH_RIGHT="ANTLR_013",T.TYPE_ILLEGAL_VARPATH_SUBPATH_START="ANTLR_014",T.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT="ANTLR_015",T.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR="ANTLR_016",T.TYPE_ILLEGAL_VARIABLE_NAME="ANTLR_017",T.TYPE_UNSET_MODIFIER_DETAILS="ANTLR_018",T.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS="ANTLR_019",T.TYPE_MODIFIER_UNEXPECTED_VALUE="ANTLR_020",T.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST="ANTLR_021",T.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR="ANTLR_022",T.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH="ANTLR_023",T.TYPE_RECURSIVE_UNPAIRED_NODE="ANTLR_024",T.TYPE_RECURSIVE_NODE_INVALID_POSITION="ANTLR_025",T.TYPE_NO_PARSE_UNASSOCIATED="ANTLR_026",T.TYPE_RECURSIVE_NODE_UNASSOCIATED_PARENT="ANTLR_027",T.TYPE_LOGIC_GROUP_NO_END="ANTLR_028",T.TYPE_LOGIC_GROUP_NO_START="ANTLR_029",T.TYPE_UNEXPECTED_BRANCH_SEPARATOR="ANTLR_030",T.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE="ANTLR_031",T.TYPE_UNEXPECTED_MODIFIER_SEPARATOR="ANTLR_032",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS="ANTLR_033",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE="ANTLR_034",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER="ANTLR_035",T.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE="ANTLR_036",T.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS="ANTLR_037",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SEMANTIC_GROUP="ANTLR_038",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP="ANTLR_039",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP="ANTLR_040",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH="ANTLR_041",T.TYPE_UNEXPECTED_EOI_WHILE_EXITING_TERNARY_GROUP="ANTLR_042",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET="ANTLR_043",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION="ANTLR_044",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END="ANTLR_045",T.TYPE_RUNTIME_UNKNOWN_LIBRARY="ANTLR_046",T.TYPE_RUNTIME_LIBRARY_BAD_METHOD_CALL="ANTLR_047",T.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS="ANTLR_048",T.TYPE_UNEXPECTED_FACTORIAL_OPERAND="ANTLR_049",T.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR="ANTLR_050",T.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED="ANTLR_051",T.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT="ANTLR_052",T.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP="ANTLR_053",T.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT="ANTLR_054",T.TYPE_LIBRARY_CALL_NO_ARGS_PROVIDED="ANTLR_055",T.TYPE_LIBRARY_CALL_MISSING_REQUIRED_FORMAL_ARG="ANTLR_056",T.TYPE_LIBRARY_CALL_RUNTIME_TYPE_MISMATCH="ANTLR_057",T.TYPE_LIBRARY_CALL_UNEXPECTED_ARG_RESOLVE_FAULT="ANTLR_058",T.TYPE_LIBRARY_CALL_TOO_MANY_ARGUMENTS="ANTLR_059",T.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD="ANTLR_060",T.TYPE_INVALID_NAMED_ARG_IDENTIFIER="ANTLR_061",T.TYPE_LIBRARY_CALL_INVALID_ARGUMENT_NAME="ANTLR_062",T.TYPE_RUNTIME_ATTEMPT_TO_OVERWRITE_LOADED_LIBRARY="ANTLR_063",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP="ANTLR_064",T.TYPE_EXPECTING_ARGUMENT_GROUP="ANTLR_065",T.TYPE_RUNTIME_PROTECTED_LIBRARY_ACCESS_VIOLATION="ANTLR_066",T.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END="ANTLR_067",T.TYPE_UNEXPECTED_OPERATOR="ANTLR_068",T.TYPE_OPERATOR_INVALID_ON_RIGHT="ANTLR_069",T.TYPE_INVALID_ASSIGNMENT_LOOP_PAIR="ANTLR_070",T.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP="ANTLR_071",T.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND="ANTLR_072",T.TYPE_QUERY_UNSUPPORTED_VALUE_TYPE="ANTLR_073",T.TYPE_UNEXPECTED_RUNTIME_RESULT_FOR_ORDER_BY_CLAUSE="ANTLR_074",T.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP="ANTLR_075",T.TYPE_INVALID_ORDER_BY_NAME_VALUE="ANTLR_076",T.TYPE_INVALID_ORDER_BY_SORT_VALUE="ANTLR_077",T.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY="ANTLR_78",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY="ANTLR_079",T.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE="ANTLR_080",T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP="ANTLR_081",T.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP="ANTLR_082",T.TYPE_UNEXPECTED_SWITCH_START_VALUE="ANTLR_083",T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE="ANTLR_084",T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_SEMANTIC_VALUE="ANTLR_085",T.TYPE_SWITCH_DEFAULT_MUST_BE_LAST="ANTLR_086",T.TYPE_PARSER_INVALID_SWITCH_TOKEN="ANTLR_087",T.TYPE_ORDER_BY_INVALID_RETURN_TYPE="ANTLR_088",T.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED="ANTLR_089",T.TYPE_PLUCK_INTO_MISSING_VARIABLE_TARGET="ANTLR_090",T.TYPE_PLUCK_INTO_INVALID_VARIABLE_TARGET="ANTLR_091",T.TYPE_PLUCK_INTO_NO_PREDICATE="ANTLR_092",T.TYPE_PLUCK_INTO_INVALID_PREDICATE_VALUE="ANTLR_093",T.TYPE_PLUCK_INTO_EMPTY_LOGIC_GROUP="ANTLR_094",T.TYPE_PLUCK_INTO_INVALID_NUMBER_OF_TUPLE_VARIABLES="ANTLR_095",T.TYPE_PLUCK_INTO_UNKNOWN_ALIAS_VARNAME="ANTLR_096",T.TYPE_PLUCK_INTO_UNEXPECTED_EMPTY_T_LOGIC_GROUP="ANTLR_097",T.TYPE_PLUCK_INTO_REFERENCE_TYPE_DYNAMIC="ANTLR_098",T.TYPE_PLUCK_INTO_REFERENCE_AMBIGUOUS="ANTLR_099",T.TYPE_RUNTIME_ASSIGNMENT_TO_NON_VAR="ANTLR_100",T.TYPE_ARR_MAKE_MISSING_TARGET="ANTLR_101",T.TYPE_ARR_MAKE_UNEXPECTED_TYPE="ANTLR_102",T.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE="ANTLR_103",T.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE="ANTLR_104",T.TYPE_ARR_UNEXPECT_ARG_SEPARATOR="ANTLR_105",T.TYPE_ARR_KEY_PAIR_MISSING_KEY="ANTLR_106",T.RUNTIME_PROTECTED_VAR_ACCESS="ANTLR_107",T.RUNTIME_PROTECTED_TAG_ACCESS="ANTLR_108",T.RUNTIME_PROTECTED_MODIFIER_ACCESS="ANTLR_109",T.TYPE_INCOMPLETE_PHP_EVALUATION_REGION="ANTLR_110",T.RUNTIME_PHP_NODE_WHEN_PHP_DISABLED="ANTLR_111",T.RUNTIME_PHP_NODE_USER_CONTENT_TAG="ANTLR_112",T.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST="ANTLR_113",T.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST="ANTLR_114",T.TYPE_MISSING_BODY_TUPLE_LIST="ANTLR_115",T.TYPE_MISSING_NAMES_TUPLE_LIST="ANTLR_116",T.TYPE_VALUE_NAME_LENGTH_MISMATCH_TUPLE_LIST="ANTLR_117",T.TYPE_INVALID_TUPLE_LIST_NAME_TYPE="ANTLR_118",T.TYPE_INVALID_MANIFESTED_NAME_GROUP="ANTLR_119",T.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP="ANTLR_120",T.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE="ANTLR_121",T.TYPE_RUNTIME_BAD_METHOD_CALL="ANTLR_122",T.TYPE_METHOD_CALL_MISSING_ARG_GROUP="ANTLR_123",T.TYPE_INVALID_METHOD_CALL_ARG_GROUP="ANTLR_124",T.TYPE_METHOD_CALL_MISSING_METHOD="ANTLR_125",T.TYPE_MODIFIER_NOT_FOUND="ANTLR_126",T.TYPE_RUNTIME_GENERAL_FAULT="ANTLR_127",T.TYPE_MODIFIER_INCORRECT_VALUE_POSITION="ANTLR_128",T.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX="ANTLR_129",T.TYPE_RUNTIME_ATTEMPTING_TO_RENDER_OBJECT_AS_STRING="ANTLR_130",T.TYPE_UNPAIRED_CLOSING_TAG="ANTLR_131",T.PARSER_CANNOT_PARSE_PATH_RECURSIVE="ANTLR_200",T.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR="ANTLR_201",T.LINT_UNKNOWN_PARAMETER="ANTLR_500",T.LINT_GENERAL_INVALID_PARAMETER_CONTENTS="ANTLR_501",T.LINT_PARAMETER_CONTENT_INVALID_INTEGER="ANTLR_502",T.LINT_PARAMETER_CONTENT_INVALID_BOOLEAN="ANT LR_503",T.LINT_PAGINATE_INVALID_VALUE="ANTLR_504",T.LINT_DEBUG_DATA_EXPOSED="ANTLR_505",T.LINT_DOUBLE_COLON_IN_TAG_IDENTIFIER="ANTLR_506",T.LINT_MIXED_MODIFIERS="ANTLR_507",T.LINT_MODIFIER_UNEXPECTED_TYPE="ANTLR_508",T.LINT_REMOVE_RELATE_TAG="ANTLR_509",T.LINT_SET_PRODUCES_RUNTIME_ERROR="ANTLR_510",T.LINT_FRONT_MATTER_EMPTY_DOCUMENT="ANTLR_511",T.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH="ANTLR_512",T.LINT_INVALID_FRONT_MATTER="ANTLR_513",T.LINT_DUPLICATE_CODE="ANTLR_514",T.LINT_VERSION_NOT_COMPATIBLE="ANTLR_515",T.LINT_INTERLEAVED_TAG_PAIRS="ANTLR_516",T.LINT_MISSING_REQUIRED_PARAMETER="ANTLR_517",T.LINT_POSSIBLE_PARTIAL_RECURSION="ANTLR_518",T.LINT_URL_VARIABLE_WITHOUT_SANITIZE="ANTLR_519",T.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE="ANTLER_520",T.LINT_DEPRECATED_MODIFIER="ANTLER_521",T.LINT_INVALID_VARIABLE_ACCESS="ANTLR_522",T.LINT_SELECT_FIELD_JOIN_RAW="ANTLR_523",T.LINT_INVALID_PARAMETER_VALUE_DELIMITER="ANTLR_524",T.LINT_MODIFIERS_ON_QUERY_BUILDERS_REQUIRE_AS="ANTLR_525";var at=class{static distance(e,i){return e.endPosition==null||i.startPosition==null?this.DistMax:i.startPosition.index-e.endPosition.index}static getTrueName(e){return e.originalNode!=null?e.originalNode.name?.name??"":e.name?.name??""}static getSimpleVarName(e){return e.variableReference!=null&&e.variableReference.pathParts.length==1&&e.variableReference.pathParts[0]instanceof zt?e.variableReference.pathParts[0].name:""}static isVariableMatching(e,i){return e instanceof ie?e.name==i:!1}static mergeVarContentLeft(e,i,r){return r.mergeRefName=r.name,r.endPosition=i.endPosition,r.name=r.name+e,r}static mergeVarContentRight(e,i,r){return r.mergeRefName=r.name,r.startPosition=i.startPosition,r.name=e+r.name,r}static mergeVarRight(e,i){return i.mergeRefName=i.name,i.startPosition=e.startPosition,i.name=e.name+i.name,i}static getUnrefName(e){return j.trimLeft(e,":.")}};at.DistMax=65e3;var Cr=class{static isConditionalStructure(e){if(e.isComment)return!1;let i=e.name?.name??"";return i=="if"||i=="elseif"||i=="else"}static requiresClose(e){let i=e.name?.name??"";return i=="elseif"||i=="else"?e.isClosedBy==null:!(e.isClosingTag||e.isClosedBy!=null)}static getValidClosingPairs(e){return e=="if"||e=="elseif"?Cr.conditionClosingPairs:[]}static findClosestStructurePair(e,i,r){let n=[],s=e.length,o=new Map,a=null;n.push({node:i,index:r});for(let u=0;u<s;u+=1){let c=e[u];if(c instanceof B){let f=c.name?.name??"";if(c.isClosingTag&&f=="if"){o.set(u,u);continue}else if(f=="elseif"||f=="else"){o.set(u,u);continue}}}let l=o.size;for(;n.length>0;){let u=n.pop();if(u==null)continue;if(u.node._conditionParserAbandonPairing)break;let c=u.node,f=Cr.getValidClosingPairs(c.name?.name??""),d=u.index,h=!1;if(l>50&&a!=null){for(let[p,y]of o)if(p>d){d=p;break}}for(let p=d;p<s;p++){let y=e[p];if(y instanceof B&&Cr.isConditionalStructure(y)){if(Cr.requiresClose(y)){n.push(u),n.push({node:y,index:p+1}),h=!0;break}if(c.isClosedBy!=null)continue;let v=y.name?.name??"",b=!1;if(y.ref==0&&(y.isClosingTag&&v=="if"||f.includes(v))&&(b=!0),y.refId==c.refId&&(b=!1),b){a=p,o.delete(p),c.isClosedBy=y,y.isOpenedBy=c,y.ref+=1,h=!0;break}}}if(!h&&c instanceof B){let p=c.name?.name??"";if((p=="elseif"||p=="else")&&c.isOpenedBy==null){let y='Unpaired "'+at.getTrueName(c)+'" control structure.';c.isInterpolationNode&&(y+=" Tag pairs are not supported within Antlers tags."),c.pushError(D.makeSyntaxError(T.TYPE_PARSE_UNPAIRED_CONDITIONAL,c,y)),c._conditionParserAbandonPairing=!0}if(c.isClosedBy==null&&Cr.requiresClose(c)){let y='Unclosed "'+at.getTrueName(c)+'" control structure.';c.isInterpolationNode&&(y+=" Tag pairs are not supported within Antlers tags."),c.pushError(D.makeSyntaxError(T.TYPE_PARSE_UNCLOSED_CONDITIONAL,c,y)),c._conditionParserAbandonPairing=!0}}}}static pairConditionals(e){for(let i=0;i<e.length;i+=1){let r=e[i];r instanceof B&&Cr.isConditionalStructure(r)&&Cr.requiresClose(r)&&Cr.findClosestStructurePair(e,r,i+1)}return e.forEach(i=>{if(i instanceof B&&Cr.isConditionalStructure(i)){let r=i.name?.name??"";if((r=="elseif"||r=="else")&&i.isOpenedBy==null){i.pushError(D.makeSyntaxError(T.TYPE_PARSE_UNPAIRED_CONDITIONAL,i,'Unpaired "'+at.getTrueName(i)+'" control structure.'));return}if(i.isClosedBy==null&&Cr.requiresClose(i)){i.pushError(D.makeSyntaxError(T.TYPE_PARSE_UNCLOSED_CONDITIONAL,i,"Unclosed "+at.getTrueName(i)+" control structure."));return}}}),e}},Vt=Cr;Vt.conditionClosingPairs=["elseif","else"];function Rr(t,e){return e==null&&(e="s"),t.replace(new RegExp("^["+e+"]+"),"")}function mt(t,e,i){return t.replace(new RegExp(e,"g"),i)}function ln(t,e){return e==null&&(e="s"),t.replace(new RegExp("["+e+"]+$"),"")}function Ya(){return(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,"")}function VI(){return mt(Ya(),"-","_")}var xu=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=VI()}},rd=class{constructor(){this.startPosition=null;this.endPosition=null;this.content="";this.name=""}};function FU(t){let e=[],i=[];for(let r=0;r<t.length;r++){let n=t[r],s=n.refId;if(i.includes(s))break;e.push(n),i.push(s)}return e}var Q=class{constructor(){this.refId=null;this.index=0;this.parent=null;this.content="";this.rawLexContent="";this.sourceContent="";this.startPosition=null;this.endPosition=null;this.modifierChain=null;this.originalAbstractNode=null;this.positionContexts=[];this.addedContexts=new Map;this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.isInScriptTag=!1;this.isInStyleTag=!1;this.isVirtual=!0;this.isPartOfMethodChain=!1;this.isVirtualGroupMember=!1;this.isVirtualGroupOperatorResolve=!1;this.isSwitchGroupMember=!1;this.isListGroupMember=!1;this.producesVirtualStatementTerminator=!1;this.convertedToOperator=!1;this.scopeVariable=null;this.currentScope=null;this.manifestType="";this.scopeName=null;this.sourceType="";this.runtimeType=null;this.modifiers=new ed(this);this.prev=null;this.next=null;this.methodTarget=null;this.libraryTarget=null;this.antlersErrors=[];this.parser=null;this.refId=VI()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getContexts(){return this.positionContexts}addContext(e){this.addedContexts.has(e.refId)==!1&&(this.addedContexts.set(e.refId,!0),this.positionContexts.push(e))}getRange(){if(this.originalAbstractNode!=null)return this.originalAbstractNode.getRange();if(this.startPosition==null||this.endPosition==null)return Wa.Empty;let e=new Wa;return e.start=this.startPosition,e.end=this.endPosition,e}withParser(e){this.parser=e}getParser(){return this.parser}pushError(e){this.parent!=null&&this.parent.pushError(e),this.antlersErrors.push(e),this.parent==null&&this.parser!=null&&this.parser.pushError(e)}mergeErrors(e){e.forEach(i=>{i.node==null&&(i.node=this),this.antlersErrors.push(i)})}getErrors(){return this.antlersErrors}innerContent(){return this.content}rawContent(){return this.content}},nd=class extends Q{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.documentText="";this.childDocument=null}getImmediateChildren(){return this.head==null?[]:this.head.getImmediateChildren()}},Ve=class extends Q{constructor(){super(...arguments);this.logicBranches=[];this.chain=[];this.nodeContent="";this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1}},B=class extends Q{constructor(){super(...arguments);this.isNodeAbanonded=!1;this.isComment=!1;this.isTagNode=!1;this.isConditionNode=!1;this.runtimeContent="";this.name=null;this.pathReference=null;this.isClosingTag=!1;this.isInterpolationNode=!1;this.isOpenedBy=null;this.isClosedBy=null;this.isSelfClosing=!1;this.children=[];this.runtimeNodes=[];this.parsedRuntimeNodes=[];this.hasParsedRuntimeNodes=!1;this.parameters=[];this.hasParameters=!1;this.contentOffset=null;this.cachedContent=null;this.cachedInnerContent=null;this.hasRecursiveNode=!1;this.recursiveReference=null;this.rawStart="";this.rawEnd="";this.originalNode=null;this.interpolationRegions=new Map;this.processedInterpolationRegions=new Map;this.hasProcessedInterpolationRegions=!1;this.ref=0;this.contentStartRelativeIndex=null;this.antlersNodeIndex=0;this.nameStartsOn=null;this.nameEndsOn=null;this.nameMethodPartStartsOn=null;this.documentText="";this.nodeContent="";this.childDocument=null;this.structure=new td(this);this.isInlineAntlers=!1;this.mustClose=!1;this.reference=null;this._conditionParserAbandonPairing=!1;this._isEndVirtual=!1}getOriginalContent(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.isClosedBy!=null?this.isClosedBy.startPosition==null||this.isClosedBy.endPosition==null?"":this.parser.getText(this.startPosition.index,this.isClosedBy.endPosition.index+1):this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getNodeDocumentText(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getImmediateChildren(){let i=[];for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n.parent==this){if(n==this.isClosedBy)break;i.push(n)}}return FU(i)}getChildren(){if(this.isClosedBy==null)return[];let i=[];for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n instanceof B&&n.refId==this.isClosedBy.refId)break;i.push(n)}return i}getInnerDocumentText(){if(this.startPosition==null||this.endPosition==null||this.parser==null)return"";if(this.isClosedBy==null)return this.getNodeDocumentText();let i=this.isClosedBy.startPosition;return i==null?"":this.parser.getText(this.endPosition.index+1,i.index)}nodeAtIndex(i){if(this.runtimeNodes.length==0)return null;for(let r=0;r<this.runtimeNodes.length;r++)if(this.runtimeNodes[r].index==i)return this.runtimeNodes[r];return null}getDepthCount(){if(this.parent==null)return 1;let i=this.parent,r=1;for(;i!=null;){if(r+=1,i.parent===i){i=null;break}i=i.parent}return r}isEmpty(){return this.content.trim().length==0}nameMatches(i){return this.name==null?!1:this.name.content==i}copyBasicDetails(){return this.copyBasicDetailsTo(new B)}copyBasicDetailsTo(i){return i.refId=this.refId,i.isComment=this.isComment,i.isTagNode=this.isTagNode,i.children=this.children,i.parent=this.parent,i.parameters=this.parameters,i.isClosingTag=this.isClosingTag,i.rawStart=this.rawStart,i.rawEnd=this.rawEnd,i.startPosition=this.startPosition,i.endPosition=this.endPosition,i.originalAbstractNode=this,i.containsAnyFragments=this.containsAnyFragments,i.containsChildStructures=this.containsChildStructures,i.isInScriptTag=this.isInScriptTag,i.isInStyleTag=this.isInStyleTag,i}id(){return this.refId}innerContent(){return this.cachedInnerContent==null&&(this.cachedInnerContent=this.content.replace('"','\\"')),this.cachedInnerContent}resetContentCache(){this.cachedContent=null,this.cachedInnerContent=null}hasMethodPart(){return this.name==null?!1:this.name.getMethodName()!=null}runtimeName(){return this.name==null?"":this.name.getCompoundTagName()}getTagName(){return this.name==null?"":this.name.name}getNameContent(){return this.name==null?"":this.name.content}getMethodNameValue(){if(this.name==null)return"";let i=this.name.getMethodName();return i??""}methodIsEmptyOrMatches(i){return this.getMethodNameValue()==i}hasParameter(i){return this.findParameter(i)!=null}hasParameterWithValue(i,r){let n=this.findParameter(i);return n==null?!1:n.value==r}findParameterValue(i,r){let n=this.findParameter(i);return n==null?r:n.value}findParameterValueOrNull(i){let r=this.findParameter(i);return r==null?null:r.value}findParameter(i){if(this.parameters.length==0)return null;for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name==i)return this.parameters[r];return null}findAnyParameter(i){for(let r=0;r<i.length;r++){let n=this.findParameter(i[r]);if(n!=null)return n}return null}getContentRelativeStartIndex(){if(this.contentStartRelativeIndex==null){let i=this.content.split("");for(let r=0;r<i.length;r++)if(!j.ctypeSpace(i[r])){this.contentStartRelativeIndex=r;break}this.contentStartRelativeIndex==null&&(this.contentStartRelativeIndex=i.length),this.contentStartRelativeIndex+=this.rawStart.length}return this.contentStartRelativeIndex}getContentAfterName(){let i=0;return this.nameEndsOn!=null&&(i=this.nameEndsOn.char-this.rawStart.length-1),this.content.substring(i)}getContent(){if(this.cachedContent==null)if(this.isComment)this.cachedContent=this.content,this.contentOffset=this.startPosition;else if(this.isTagNode){let i=this.content;i=j.trimLeft(i);let r=0;if(this.name!=null&&(r=this.name.compound.length),this.parameters.length>0){let a=0,l=this.parameters[0];l.startPosition!=null&&(a=l.startPosition.index-1);let u=i,c=u.trimLeft(),f=u.length-c.length,d=r;i=i.substr(0,a)}let n=i.trimLeft(),s=i.length-n.length,o=r+s+2;if(this.parser!=null){let a=0;this.startPosition!=null&&(a=this.startPosition.offset),this.contentOffset==this.parser.positionFromOffset(a+o,0)}this.name!=null?this.name.name=="if"||this.name.name=="elseif"||this.name.name=="unless"||this.name.name=="elseunless"?(i=" "+i.trimLeft(),this.cachedContent=i.substr(this.name.compound.length+1)):this.cachedContent=i:this.cachedContent=i}else if(this.parameters.length>0){let i=this.parameters[0],r=0;i.startPosition!=null&&(r=i.startPosition.index-1),this.contentOffset=this.startPosition,this.cachedContent=this.content.substr(0,r)}else this.contentOffset=this.startPosition,this.cachedContent=this.content;return this.cachedContent}relativePositionFromOffset(i,r){return this.parser==null?null:this.parser.positionFromOffset((this.contentOffset?.offset??0)+i,r)}getInterpolationNode(i){if(this.processedInterpolationRegions.has(i)){let r=this.processedInterpolationRegions.get(i);if(r.length>0&&r[0]instanceof B)return r[0]}return null}_lexerRelativeOffset(i,r=null){let n=i;if(r!=null&&(n=r),this.parser==null){let a=new Bt;return a.index=i,a.offset=i,a}let s=i+this.rawStart.length+(this.startPosition?.index??0);return this.isTagNode&&this.nameStartsOn!=null&&(s=this.nameStartsOn.index+i,Vt.isConditionalStructure(this)||(s-=this.rawStart.length),this.name?.name=="unless"&&(s+=6)),this.parser.positionFromOffset(s,s,!0)}relativeOffset(i,r=null){let n=i;if(r!=null&&(n=r),this.parser==null){let a=new Bt;return a.index=i,a.offset=i,a}let s=i+this.rawStart.length+(this.startPosition?.index??0);return this.parser.positionFromOffset(s,s,!0)}isPaired(){return this.isClosingTag&&this.isSelfClosing==!1&&this.isOpenedBy!=null?!0:!(this.isClosedBy==null||this.isSelfClosing)}getFinalClosingTag(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingTag()}rawContent(){return this.rawStart+this.content+this.rawEnd}getTrueRuntimeNodes(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRuntimeNodes():this.runtimeNodes}getTrueRawContent(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRawContent():this.rawContent()}getTrueNode(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueNode():this}getStructuralChildren(){return this.isClosedBy!=null?Dg(this.children.slice(0,-1)):Dg(this.children)}findParentOfType(i){return this.parent==null?null:this.parent instanceof B?this.parent.name!=null&&i.includes(this.parent.getTagName())?this.parent:this.parent.findParentOfType(i):null}},Gi=class extends B{static makeWithStartPosition(e){let i=new Gi;return i.startPosition=e,i.endPosition=e,i}},lt=class extends Gi{},or=class extends B{constructor(){super(...arguments);this.recursiveParent=null;this.isNestedRecursive=!1}},ks=class extends B{constructor(){super(...arguments);this.isEchoNode=!1}},Ka=class extends Gi{},sd=class extends Gi{},Qt=class extends B{constructor(){super(...arguments);this.isNoParseRegion=!1}},Ds=class extends Q{constructor(){super(...arguments);this.modifier=null;this.isModifierParameter=!1;this.nameDelimiter='"';this.isVariableReference=!1;this.name="";this.value="";this.containsEscapedContent=!1;this.interpolations=[];this.parent=null;this.blockPosition=null;this.namePosition=null;this.valuePosition=null;this.hasValidValueDelimiter=!0}containsSimpleValue(){return this.hasInterpolations()==!1&&this.isVariableReference==!1}hasInterpolations(){return this.interpolations.length>0}getArrayValue(){return this.value.split("|")}getValue(){return this.value}},$a=class{constructor(){this.modifierTarget=null;this.modifierChain=[];this.startPosition=null;this.endPosition=null;this.lastManifestedModifier=null;this.lastModifier=null}updateValues(){if(this.modifierChain.length==0)this.startPosition=null,this.endPosition=null;else{let e=this.modifierChain[0],i=this.modifierChain[this.modifierChain.length-1];this.startPosition=e.startPosition,this.endPosition=i.endPosition}}},Fo=class extends Q{constructor(){super(...arguments);this.modifier=null;this.methodStyleArguments=null;this.nameNode=null;this.name="";this.valueNodes=[];this.parameters=[]}getParameterValues(){let i=[];return this.parameters.forEach(r=>{i.push(r.value)}),i}},za=class extends Q{constructor(){super(...arguments);this.order=0;this.name=null;this.directionNode=null}},od=class extends Q{constructor(){super(...arguments);this.value=""}},xr=class extends Q{},ar=class extends Q{},wr=class extends Q{},Hi=class extends Q{},Wi=class extends Q{},un=class extends Q{},Zn=class extends Q{constructor(){super(...arguments);this.repeat=1}},lr=class extends Q{},Yi=class extends Q{},yi=class extends Q{},kr=class extends Q{},Dr=class extends Q{},Ki=class extends Q{},Fr=class extends Q{},Lr=class extends Q{},cn=class extends Q{},Ti=class extends Q{},ur=class extends Q{},Pn=class extends Q{},Or=class extends Q{},Mr=class extends Q{},qr=class extends Q{},Br=class extends Q{},Vr=class extends Q{},Ur=class extends Q{},An=class extends Q{},jr=class extends Q{},ri=class extends Q{},Fs=class extends Q{constructor(){super(...arguments);this.orderClauses=[]}},vt=class extends Q{},ci=class extends Q{},Qa=class extends Q{constructor(){super(...arguments);this.left=null;this.right=null}},bi=class extends Q{constructor(){super(...arguments);this.isTenaryBranchSeparator=!1}},$i=class extends Q{},cr=class extends Q{},ni=class extends Q{},fr=class extends Q{},fn=class extends Q{},dr=class extends Q{},fi=class extends Q{},dn=class extends Q{},Ut=class extends Q{},jt=class extends Q{},Lo=class extends Q{constructor(){super(...arguments);this.values=[];this.isNamedNode=!1;this.parsedName=null}},xe=class extends Q{constructor(){super(...arguments);this.start=null;this.end=null;this.nodes=[];this.scopeOperator=null}},Oo=class extends Q{constructor(){super(...arguments);this.condition=null;this.expression=null}},Ls=class extends Q{constructor(){super(...arguments);this.cases=[]}},ad=class extends Q{constructor(){super(...arguments);this.left=null;this.right=null}},En=class extends Q{constructor(){super(...arguments);this.nodes=[]}},Xa=class extends Q{constructor(){super(...arguments);this.head=null;this.truthBranch=null;this.falseBranch=null}},Et=class extends Q{},xt=class extends Q{constructor(){super(...arguments);this.nodes=[];this.separatorToken=null}},pr=class extends xe{constructor(){super(...arguments);this.scope=null}extract(){let i=null;this.scope!=null&&(i=this.scope.name);let r=this.nodes[0];return[i,r.nodes]}},Cn=class extends pr{constructor(){super(...arguments);this.alias=null}},Mo=class extends Q{constructor(){super(...arguments);this.args=[];this.hasNamedArguments=!1;this.numberOfNamedArguments=0}},hr=class extends Q{},ld=class extends Q{};var es=class extends Q{constructor(){super(...arguments);this.libraryName="";this.methodName="";this.arguments=null}},Le=class extends Q{constructor(){super(...arguments);this.sourceContent=""}},wt=class extends Q{constructor(){super(...arguments);this.method=null;this.args=null}},Ct=class extends Q{constructor(){super(...arguments);this.name=""}},Gt=class extends Q{constructor(){super(...arguments);this.value="";this.name=""}},wu=class extends Q{constructor(){super(...arguments);this.name=null;this.value=null}},Ja=class extends Q{constructor(){super(...arguments);this.name=null;this.value=null}},kt=class extends Q{constructor(){super(...arguments);this.value=null}},Tt=class extends Q{constructor(){super(...arguments);this.value="";this.sourceTerminator="";this.sourceContent=""}},ie=class extends Q{constructor(){super(...arguments);this.name="";this.mergeRefName="";this.variableReference=null;this.interpolationNodes=[];this.isInterpolationReference=!1}},ud=class extends Q{constructor(){super(...arguments);this.name=""}},zt=class extends Q{constructor(){super(...arguments);this.delimiter="";this.name="";this.isStringVar=!1;this.isFinal=!1}},pn=class{constructor(){this.originalContent="";this.normalizedReference="";this.isStrictTagReference=!1;this.isStrictVariableReference=!1;this.isExplicitVariableReference=!1;this.isVariableVariable=!1;this.pathParts=[];this.isFinal=!1;this._isFromEmptyFailState=!1}clone(){let e=new pn;return e.originalContent=this.originalContent,e.normalizedReference=this.normalizedReference,e.isStrictVariableReference=this.isStrictVariableReference,e.isExplicitVariableReference=this.isExplicitVariableReference,e.pathParts=this.pathParts,e.isFinal=this.isFinal,e}implodePaths(){let e=[];return this.pathParts.forEach(i=>{i instanceof zt?e.push(i.name):i instanceof pn&&e.push(i.implodePaths())}),e.join(".")}},cd=class{constructor(e,i,r){this.target=e,this.value=i,this.operator=r}};var g_=Y($t(),1);var Za=Y(ot(),1);function Lg(t,e){let i=[];if(t.currentNode==null)return i;let r={start:{line:t.position.line,character:t.position.character-0},end:t.position};for(let n=0;n<e.length;n++){let s=e[n];if(!t.currentNode.hasParameter(s.name)){let o=s.name;t.leftWord!=null&&o.startsWith(t.leftWord)&&(o=o.substring(t.leftWord.length));let a=o+'="$1"';i.push({label:s.name,kind:Za.CompletionItemKind.Value,insertTextFormat:Za.InsertTextFormat.Snippet,textEdit:Za.TextEdit.replace(r,a),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return i}var el=Y(ot(),1);function Os(t,e,i){return{label:t,insertText:t,kind:el.CompletionItemKind.Field,detail:i+": "+e}}function LU(t,e){let i="";return e.length>0&&(i=e.join(", ")),"**"+t+"** `"+i+"`  \n"}function fd(t){let e=LU(t.name,t.acceptsType),i="";if(t.parameters.length>0){let s=[];t.parameters.forEach(o=>{s.push("$"+o.name)}),i=s.join(", ")}let r="";if(t.returnsType.length==1)r=t.returnsType[0];else{let s=[];t.returnsType.forEach(o=>{s.push(o)}),r=s.join(", ")}return e+=t.description+`
`,e+="```js\n",e+="function "+t.name+"("+i+"):"+r,e+="\n```",t.docLink!=null&&t.docLink.trim().length>0&&(e+=`  

`,e+="[Documentation Reference]("+t.docLink+")"),{label:t.name,insertText:t.name,documentation:{kind:el.MarkupKind.Markdown,value:e},kind:el.CompletionItemKind.Function}}function dd(t){let e=[];for(let i=0;i<t.length;i++)typeof t[i].name>"u"||e.push(Og(t[i]));return e}function Og(t){let e="",i=t.name;return t.instructionText!=null&&(e=t.instructionText),t.displayName!=null&&(i=t.displayName+" ("+t.name+")"),t.blueprintName!=null&&(e.trim().length>0&&(e+=`
`),e+="Blueprint: "+t.blueprintName),t.type!=null&&(i+=": "+t.type),{label:t.name,insertText:t.name,kind:el.CompletionItemKind.Field,documentation:e,detail:i}}function be(t,e,i,r){let n="**"+t+"**  ";return n+=`
`,n+=e+"  ",n+="\n```antlers\n",n+=i,n+="\n```",r!=null&&(n+=`

`,n+="[Documentation Reference]("+r+")"),n}function F(t,e,i){let r="**"+t+"**  ";return r+=`
`,r+=e+"  ",i!=null&&(r+=`

`,r+="[Documentation Reference]("+i+")"),r}function tl(t){let e=[];return t=="order"&&e.push("sort"),e}var UI=["replicator","bard"];function OU(t){return{blueprintName:t.sourceName,displayName:t.name,instructionText:"",maxItems:-1,name:t.name,refFieldSetField:null,type:t.dataType,sets:null,import:null}}function pd(t){let e=[];for(let i=0;i<t.length;i++)e.push(OU(t[i]));return e}function Mg(t,e=""){return{blueprintName:"fieldset",displayName:e+t.name,instructionText:t.instructionText,maxItems:t.maxItems,name:e+t.handle,type:t.type,refFieldSetField:t,sets:t.sets,import:t.import}}function jI(t,e,i){return t=="select"&&typeof e.field.multiple<"u"&&e.field.multiple===!0&&(t="select_multiple"),(typeof e.field.multiple>"u"||i>1)&&(t=="form"?t="form_multiple":t=="sites"?t="sites_multiple":t=="taxonomies"?t="taxonomies_multiple":t=="user_groups"?t="user_groups_multiple":t=="user_roles"?t="user_roles_multiple":t=="terms"?t="terms_multiple":t=="users"?t="users_multiple":t=="structures"&&(t="structures_multiple")),t}function GI(t){let e=[];for(let i=0;i<t.length;i++)e.push(Mg(t[i]));return e}function Ge(t){return[{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"order",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t}]}function HI(t,e,i){if(typeof i>"u"||i===null)return;let r=t.findParameter("as"),n=t.findParameter("scope");i=i.concat(pd(Ge(t))),r!=null&&n!=null?e.introduceScopedAliasScope(t,n.value,r.value,i):r!=null?e.introduceAliasScope(t,r.value,i):n!=null?e.introduceDynamicScopeList(t,n.value,i):e.addBlueprintFields(t,i)}function WI(t){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.collection.context",introducedBy:t},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.collection.context",introducedBy:t}]}var hn=Y(ot(),1);var Ms=[{isRequired:!1,name:"from",description:"The collection name to retrieve entries from",aliases:["folder","use"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"not_from",aliases:["not_folder","dont_use"],description:"The collections to exclude when retrieving entries",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"show_unpublished",aliases:null,description:"Controls whether unpbulished entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_published",aliases:null,description:"Controls whether published entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_past",aliases:null,description:"Controls whether to display entries with a past date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"since",aliases:null,description:"Sets the minimum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"until",aliases:null,description:"Sets the maximum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the entry sort order",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",aliases:null,description:"Sets the maximum number of entries to return",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["integer"],isDynamic:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope",expectsTypes:["string"],isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets the amount that entry results should be offset by",expectsTypes:["integer"],isRequired:!1,name:"offset",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether not to paginate entry results",expectsTypes:["boolean","number"],isRequired:!1,name:"paginate",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies a name to give to a new entries array variable",expectsTypes:["string"],isRequired:!1,name:"as",isDynamic:!1},{name:"scope",aliases:null,acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Sets a prefix on all entry variables",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"locale",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the locale in which to retrieve entry content",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"redirects",aliases:["links"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Controls whether entries with redirects are returned",expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"page_name",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"Allows you to customise the name of the URL query parameter used for pagination.",expectsTypes:["string"],isRequired:!1,isDynamic:!1}],YI=["from","folder","use"],KI=["not_from","not_folder","dont_use"],$I=["draft","scheduled","expired","published"];function zI(t){let e=[];if(t.project!=null){let i={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position},r=t.project.getUniqueTaxonomyNames();for(let n=0;n<r.length;n++){let s=r[n],o=t.originalLeftWord+s+'="$1"';e.push({label:t.originalLeftWord+s,insertTextFormat:hn.InsertTextFormat.Snippet,kind:hn.CompletionItemKind.Field,textEdit:hn.TextEdit.replace(i,o),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return e}function il(t,e){let i=[];if(t.reference!=null){let r=t.reference,n=e.statamicProject.getBlueprintFields(r.collectionNames);typeof n<"u"&&n!=null&&(i=n)}return i}function QI(t){let e=[],i=$I.filter(r=>!t.includes(r));for(let r=0;r<i.length;r++)e.push({label:i[r],kind:hn.CompletionItemKind.Variable});return e}function XI(t,e,i){let r=[],n=i.getTaxonomyTerms(e),s=n.filter(o=>!t.includes(o));for(let o=0;o<s.length;o++)r.push({label:s[o],kind:hn.CompletionItemKind.Variable});return r}function JI(t){let e=[],i=t.getCollectionNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:hn.CompletionItemKind.Variable});return e}function rl(t,e){let i=[],r=e.getCollectionNames().filter(n=>!t.includes(n));for(let n=0;n<r.length;n++)i.push({label:r[n],kind:hn.CompletionItemKind.Variable});return i}function hd(t){let e=[],i=t.getCollectionQueryScopes();for(let r=0;r<i.length;r++)e.push({label:`${i[r].handle} (${i[r].name})`,detail:i[r].description,insertText:i[r].handle,kind:hn.CompletionItemKind.EnumMember});return e}function nl(t,e){if(t.isClosingTag)return e;if(t.hasMethodPart()&&t.getMethodNameValue()!="count"&&e.addVariables(WI(t)),t.reference!=null){let i=il(t,e),r=t.reference;i.length==0&&r.collectionNames.length>0&&(i.push({blueprintName:r.collectionNames[0],displayName:"Title",import:null,instructionText:"",maxItems:null,name:"title",type:"string",refFieldSetField:null,sets:[]}),i.push({blueprintName:r.collectionNames[0],displayName:"Slug",import:null,instructionText:"",maxItems:null,name:"slug",type:"string",refFieldSetField:null,sets:[]}),i.push({blueprintName:r.collectionNames[0],displayName:"Date",import:null,instructionText:"",maxItems:null,name:"date",type:"string",refFieldSetField:null,sets:[]})),HI(t,e,i)}return e}var ku=Y($t(),1);var md=Y(ot(),1);var qg=[{name:"is",description:"Tests if a field is equal to a value"},{name:"equals",description:"Tests if a field is equal to a value"},{name:"not",description:"Tests if a field is not equal to a value"},{name:"isnt",description:"Tests if a field is not equal to a value"},{name:"exists",description:"Tests if a field exists"},{name:"isset",description:"Tests if a field exists"},{name:"doesnt_exist",description:"Tests if a field does not exist"},{name:"is_empty",description:"Tests if a field does not exist"},{name:"null",description:"Tests if a field does not exist"},{name:"contains",description:"Tests if a field contains a value"},{name:"doesnt_contain",description:"Tests if a field does not contain a value"},{name:"in",description:"Tests if a value is in an array"},{name:"not_in",description:"Tests if an array does not contain a value"},{name:"starts_with",description:"Tests if a field starts with a value"},{name:"doesnt_start_with",description:"Tests if a field does not start with a value"},{name:"ends_with",description:"Tests if a field ends with a value"},{name:"doesnt_end_with",description:"Tests if a field does not end with a value"},{name:"gt",description:"Tests if a field is greater than a value"},{name:"lt",description:"Tests if a field is less than a value"},{name:"gte",description:"Tests if a field is greater than or equal to a value"},{name:"lte",description:"Tests if a field is less than or equal to a value"},{name:"matches",description:"Tests if a field matches a case insensitive regex"},{name:"regex",description:"Tests if a field matches a case insensitive regex"},{name:"doesnt_match",description:"Tests if a field does not match a case insensitive regex"},{name:"is_alpha",description:"Tests if a field contains only alphabetical characters"},{name:"is_numeric",description:"Tests if a field contains only numeric characters"},{name:"is_alpha_numeric",description:"Tests if a field contains only alpha-numeric characters"},{name:"is_url",description:"Tests if a field is a valid URL"},{name:"is_embeddable",description:"Tests if a field is an embeddable video URL"},{name:"is_email",description:"Tests if a field is a valid email address"},{name:"is_after",description:"Tests if a field is after a given date"},{name:"is_before",description:"Tests if a field is before a given date"}];function qs(t){let e=[],i={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position};for(let r=0;r<qg.length;r++){let n=qg[r],s=t.originalLeftWord+n.name+'="$1"';e.push({label:n.name,insertTextFormat:md.InsertTextFormat.PlainText,kind:md.CompletionItemKind.Field})}return e}var Dt=Y(_i(),1);var Bs=class{static clear(e){this.unclosedNodes.delete(e)}static registerNodes(e,i){this.unclosedNodes.set(e,i)}static getUnclosedTags(e,i){let r=[];if(this.unclosedNodes.has(e)==!1)return r;let n=this.unclosedNodes.get(e);if(n.length==0)return r;let s=i.line+1;for(let o=0;o<n.length;o++){let a=n[o];(a.endPosition?.line==s&&i.character>a.endPosition.char||s>(a.endPosition?.line??0))&&r.push(a)}return r}static hasUnclosedTags(e,i){return this.unclosedNodes.has(e)==!1?!1:this.getUnclosedTags(e,i).length>0}};Bs.unclosedNodes=new Map;var ZI=["edit_url","id","last_modified","permalink","published","slug","template","url"];function Vs(t){return[{name:"edit_url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"id",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"last_modified",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"permalink",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"published",dataType:"boolean",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"slug",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"template",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t}]}var mr=Y($t(),1),ev=[{label:"name",kind:mr.CompletionItemKind.Property},{label:"description",kind:mr.CompletionItemKind.Property},{label:"desc",kind:mr.CompletionItemKind.Property},{label:"entry",kind:mr.CompletionItemKind.Property},{label:"collection",kind:mr.CompletionItemKind.Property},{label:"blueprint",kind:mr.CompletionItemKind.Property},{label:"var",kind:mr.CompletionItemKind.Property},{label:"set",kind:mr.CompletionItemKind.Property},{label:"param",kind:mr.CompletionItemKind.Property},{label:"param*",kind:mr.CompletionItemKind.Property},{label:"front",kind:mr.CompletionItemKind.Property},{label:"format",kind:mr.CompletionItemKind.Property}];var gd=Y(ot(),1),MU=[{label:"if",kind:gd.CompletionItemKind.Keyword},{label:"elseif",kind:gd.CompletionItemKind.Keyword},{label:"else",kind:gd.CompletionItemKind.Keyword}],tv=MU;var sl=Y($t(),1),iv=Y(ot(),1);var _d=class{static getCompletions(e,i){let r=[],n=0;e.leftWord!=e.leftMeaningfulWord&&(n=e.leftWord.length);let s={start:{line:e.position.line,character:e.position.character-n},end:e.position};return Ce.instance?.getModifiersForType(i.dataType).filter(o=>o.canBeParameter).forEach(o=>{r.push({label:o.name,documentation:{kind:iv.MarkupKind.Markdown,value:o.description},insertTextFormat:sl.InsertTextFormat.Snippet,kind:sl.CompletionItemKind.Value,textEdit:sl.TextEdit.replace(s,o.name+'="$1" '),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}),r}};var Bg=Y(ot(),1),ol=[];ol.push({label:"true",kind:Bg.CompletionItemKind.Keyword});ol.push({label:"false",kind:Bg.CompletionItemKind.Keyword});function rv(t){let e=[];for(let i=0;i<t.expectsTypes.length;i++)t.expectsTypes[i]=="boolean"&&(e=e.concat(ol));return e}function Ue(t){return[{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"value",introducedBy:t},{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"key",introducedBy:t}]}var qU={name:"array",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},nv=qU;function al(t){return[{name:"id",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"title",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"path",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"filename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"basename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"extension",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_asset",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_audio",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_previewable",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_image",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_svg",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_video",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"edit_url",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"url",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"permalink",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_bytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_megabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_b",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_kb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_mb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_gb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"focus",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"focus_css",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"height",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"width",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"orientation",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"ratio",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"mime_type",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"duration",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"duration_seconds",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"duration_sec",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"playtime",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t}]}var BU={name:"assets",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(al(t))}},sv=BU;var VU={name:"bard",augmentScope:(t,e)=>{e.addVariable({name:"type",dataType:"string",sourceField:null,sourceName:"*internal.bard",introducedBy:t})},injectCompletions:(t,e,i)=>[]},ov=VU;var UU={name:"form_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},av=UU;var jU={name:"list",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},lv=jU;function uv(t){return[{name:"type",dataType:"string",sourceName:"*internal.replicator",sourceField:null,introducedBy:t}]}var GU={name:"replicator",augmentScope:(t,e)=>{e.addVariables(uv(t)),e.addVariables(Ge(t))},injectCompletions:(t,e,i)=>[]},cv=GU;var HU={name:"select_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},fv=HU;var WU={name:"sites_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},dv=WU;var YU={name:"structures_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},pv=YU;var KU={name:"table",augmentScope:(t,e)=>{e.addVariable({name:"cells",dataType:"array",sourceName:"*internal.fieldtype.table",sourceField:null,introducedBy:t})}},hv=KU;var $U={name:"tags",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},mv=$U;function yd(t){return Vs(t).concat([{name:"entries_count",dataType:"number",sourceName:"*internal.term",sourceField:null,introducedBy:t},{name:"is_term",dataType:"boolean",sourceName:"*internal.term",sourceField:null,introducedBy:t},{name:"taxonomy",dataType:"string",sourceName:"*internal.term",sourceField:null,introducedBy:t}])}var zU={name:"taxonomies_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t)),e.addVariables(yd(t))}},gv=zU;var QU={name:"terms_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t)),e.addVariables(yd(t))}},_v=QU;var XU={name:"user_groups_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},yv=XU;var JU={name:"user_roles_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},Tv=JU;var ZU={name:"users_multiple",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t)),e.injectBlueprint(t,"user")}},bv=ZU;var ej={name:"yaml",augmentScope:(t,e)=>{e.addVariables(Ue(t)),e.addVariables(Ge(t))}},Iv=ej;var tj=[nv,sv,ov,av,lv,cv,fv,dv,pv,Iv,hv,gv,mv,_v,bv,yv,Tv],vv=tj;var ts=class{constructor(){this.fieldTypes=new Map}getFieldTypes(){return this.fieldTypes}getFieldType(e){return this.fieldTypes.get(e)}registerFieldtypes(e){for(let i=0;i<e.length;i++)this.fieldTypes.set(e[i].name,e[i])}loadCoreFieldtypes(){this.registerFieldtypes(vv)}hasFieldtype(e){return this.fieldTypes.has(e)}};ts.instance=null;(typeof ts.instance>"u"||ts.instance==null)&&(ts.instance=new ts,ts.instance.loadCoreFieldtypes());var Us=ts;var Td=class{static getVariableSuggestions(e,i){let r=[];if(i.scopeVariable!=null&&i.scopeVariable.sourceField!=null&&Us.instance?.hasFieldtype(i.scopeVariable.sourceField.type)){let n=Us.instance?.getFieldType(i.scopeVariable.sourceField.type);n.injectCompletions!=null&&(r=n.injectCompletions(e,i.scopeVariable.sourceField,i))}return r}};var ij=["if","elseif","unless","elseunless"],rj=["else","/if"];function Nv(t,e){let i=t.startPosition?.line??-1,r=t.endPosition?.line??1,n=t.startPosition?.char??-1,s=t.endPosition?.char??-1,o=e.line+1,a=e.character+1;return i==r&&o==i+1&&a>n&&a<=s||o==i&&a>n&&a<=s||o==r&&a<s||o>i&&o<r}function Id(t){let e="";return t.currentNode!=null&&(e=t.currentNode.getMethodNameValue()),e}function is(t){if(t.includes(":")==!1)return t;let e=t.split(":");return e.length>1?e[e.length-1]:e[0].trim()}function vd(t){return t.includes(":")==!1?t:t.split(":")[0]}function Sv(t){if(t.nodesInScope.length==0)return[];let e=t.nodesInScope[t.nodesInScope.length-1];return t.context?.node!=null&&(e=t.context.node),e.currentScope==null?[]:qo(t,e.currentScope)}function qo(t,e){let i=[];return e.values.forEach(r=>{if(r.sourceField!=null?i.push({label:r.name,detail:r.sourceField.blueprintName,documentation:r.sourceField.instructionText??"",kind:Dt.CompletionItemKind.Field}):i.push(Os(r.name,"","")),r.dataType.trim().length>0&&r.dataType=="array"){let n=r.name+` }}
    $1
{{ /`+r.name+" ",s={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position};i.push({label:r.name+" loop",insertTextFormat:Dt.InsertTextFormat.Snippet,kind:Dt.CompletionItemKind.Snippet,textEdit:Dt.TextEdit.replace(s,n),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}),e.lists.forEach((r,n)=>{i.push(Os(n,"",""))}),i}function Vg(t){ee.instance?.getStructure().getCustomModifierNames().forEach(e=>{t.push({kind:Dt.CompletionItemKind.Function,label:e,insertText:e})})}function nj(){let t=[];return Ce.instance?.getRegisteredModifiers().forEach(e=>{e.isDeprecated||t.push(fd(e))}),Vg(t),t}var bd=class{static getSuggestions(e){if(e==null)return[];if(e.context!=null&&e.context.node!=null&&e.context.node.isComment)return e.context.node.antlersNodeIndex==1?ev:[];if(e.nodesInScope.length==0)return[];if(e.leftMeaningfulWord==null&&e.leftChar=="/"){let s=Bs.getUnclosedTags(e.document,e.position);if(s.length>0){let o=[],a="";e.rightChar=="}"&&(a=" ");for(let l=0;l<s.length;l++)o.push({label:s[l].runtimeName()+a,kind:Dt.CompletionItemKind.Text});return o}}let i=e.nodesInScope[e.nodesInScope.length-1];if(i instanceof ks)return[];let r=[],n=!0;if(i.currentScope!=null&&e.context?.variableContext!=null&&e.context.variableContext.varPathText.length>0){if(i.currentScope.hasListInHistory(e.context.variableContext.varPathText)){let s=i.currentScope.getList(e.context.variableContext.varPathText);s!=null&&qo(e,s).forEach(o=>{r.push({...o,sortText:"00"})})}else if(i.currentScope.containsPath(e.context.variableContext.varPathText)){let s=i.currentScope.findNestedScope(e.context.variableContext.varPathText);s!=null&&qo(e,s).forEach(o=>{r.push({...o,sortText:"00"})})}}if(e.context?.modifierContext!=null&&(e.context.modifierContext.inModifierName||e.context.modifierContext.inModifierName==!1&&e.context.modifierContext.inModifierParameter==!1||e.context.feature==null||e.leftChar=="|"&&e.context.char==" ")&&(r=r.concat(nj())),e.nodesInScope.length>=2){let s=e.nodesInScope.length-2,o=[];for(let a=s;a>=0;a--){let l=e.nodesInScope[a];o=o.concat(Td.getVariableSuggestions(e,l))}o.length>0&&(r=r.concat(o))}if((e.currentNode?.isEmpty()||e.context?.isCursorInIdentifier&&e.leftChar!=":"&&e.leftChar!=" ")&&e.context?.modifierContext==null){let s=Ne.instance?.getVisibleTagsWithDocumentation()??[],o=[],a=[];for(let l=0;l<s.length;l++){let u="000";if(e.leftWord!=null&&s[l].label.startsWith(e.leftWord)==!1&&(u="001"),e.context?.node!=null&&e.context?.node.parent!=null&&(u=void 0),s[l].label.includes(":")==!1)o.includes(s[l].label)==!1&&(a.push({label:s[l].label,kind:Dt.CompletionItemKind.Text,documentation:{kind:"markdown",value:s[l].documentation},sortText:u}),o.push(s[l].label));else{let c=s[l].label.split(":")[0];o.includes(c)==!1&&(a.push({label:c,kind:Dt.CompletionItemKind.Text,documentation:{kind:"markdown",value:s[l].documentation},sortText:u}),o.push(c))}}r=r.concat(a)}if(i!=null&&i.currentScope!=null){if(rj.includes(i.getTagName()))return[];if(e.context?.node==null)return[];if(e.antlersDocument!=null){let s=e.antlersDocument.cursor.getAssignmentsBefore(e.position.line,e.position.character);s.length>0&&s.forEach(o=>{o.target instanceof ie&&r.push({label:o.target.name,kind:Dt.CompletionItemKind.Variable})})}if(ij.includes(i.getTagName())&&e.context.feature!=null&&e.context.feature instanceof Tt&&e.context.feature.prev instanceof Ti&&e.context.feature.prev.prev instanceof ie){let s=i.getParser();if(s!=null&&e.project!=null&&s.getLanguageParser().isMergedVariableComponent(e.context.feature.prev.prev)){let a=s.getLanguageParser().getMergedVariable(e.context.feature.prev.prev),l=[];return a.name=="collection:handle"?l=e.project.getUniqueCollectionNames():a.name=="site:handle"?l=e.project.getSiteNames():a.name=="blueprint:handle"&&(l=e.project.getBlueprintNames()),l.forEach(u=>{r.push({label:u,sortText:u,kind:Dt.CompletionItemKind.EnumMember})}),r}if(["collection","current_template","status","blueprint","response_code"].includes(e.context.feature.prev.prev.name)){if(e.project!=null){let a=e.context.feature.prev.prev.name,l=[];return a=="collection"?l=e.project.getUniqueCollectionNames():a=="current_template"?l=e.project.getTemplateNames():a=="status"?l=["draft","scheduled","expired","published"]:a=="blueprint"?l=e.project.getBlueprintNames():a=="response_code"&&(l=["404","200"]),l.forEach(u=>{r.push({label:u,sortText:u,kind:Dt.CompletionItemKind.EnumMember})}),r}}else if(e.context.feature.prev.prev.scopeVariable!=null){let a=e.context.feature.prev.prev.scopeVariable.dataType;if(a=="replicator"||a=="bard"){let l=e.context.feature.prev.prev.scopeVariable.sourceField;return l.sets?.forEach(u=>{let c="**"+u.displayName+"** `"+u.handle+"`  ";c+=`

 Blueprint: \``+l.blueprintName+"`  \n",u.fields.forEach(f=>{c+=`
 * `+f.displayName+" `"+f.name+":"+f.type+"`  "}),a=="replicator"?c+=`

 [Replicator Templating Documentation](https://statamic.dev/fieldtypes/replicator#templating)`:c+=`

 [Bard Templating Documentation](https://statamic.dev/fieldtypes/bard#with-sets)`,r.push({label:u.displayName,insertText:u.handle,sortText:"000",documentation:{kind:"markdown",value:c},kind:Dt.CompletionItemKind.EnumMember})}),r}}}if(i.isTagNode==!1){r=r.concat(tv);let s={start:{line:e.position.line,character:e.position.character-e.originalLeftWord.length},end:e.position},o=`if $1 }}
    $2
{{ else }}

{{ /if `;r.push({label:"ifelse",insertTextFormat:Dt.InsertTextFormat.Snippet,kind:Dt.CompletionItemKind.Snippet,textEdit:Dt.TextEdit.replace(s,o),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}),i.scopeVariable!=null&&(r=r.concat(_d.getCompletions(e,i.scopeVariable)))}if(i.currentScope.hasListInHistory(i.runtimeName())==!1&&i.currentScope.hasPristineReference(i.runtimeName())==!1?n=Ne.instance?.injectParentScope(i.runtimeName())??!1:n=!1,e.context?.parameterContext!=null&&e.context.parameterContext.parameter!=null&&(e.context.parameterContext.parameter.isVariableReference==!1?n=!1:n=!0),e.currentNode!=null&&(e.currentNode.isEmpty()||e.currentNode.parent!=null)&&(n=!0),i.runtimeName().includes(":")&&i.currentScope.containsPath(ln(i.runtimeName(),":"))){let s=ln(i.runtimeName(),":"),o=Rr(ln(e.leftWord,":"),"{");if(s==o){let a=i.currentScope.findNestedScope(s);if(a!=null)return a.lists.forEach((l,u)=>{r.push(Os(u,"",""))}),a.values.forEach(l=>{l.sourceField!=null?r.push({label:l.name,detail:l.sourceField.blueprintName,documentation:l.sourceField.instructionText??"",kind:Dt.CompletionItemKind.Field}):r.push(Os(l.name,"",""))}),r}}if(i.isTagNode){if(e.isInVariableInterpolation&&e.currentNode==null)r=r.concat(qo(e,i.currentScope.ancestor()));else if(e.context?.parameterContext!=null&&e.context.parameterContext.parameter!=null){let s=e.context.parameterContext.parameter;if(s.isVariableReference&&e.position.character<=(s.valuePosition?.end?.char??-1)){if(r=r.concat(qo(e,i.currentScope.ancestor())),Ne.instance!=null){let o=Ne.instance.getCompletionItems(e);r=r.concat(o.items)}}else if(e.position.character<=(s.valuePosition?.end?.char??-1)){let o=null,a=!1;if(Ne.instance?.canResolveDynamicParameter(i.runtimeName())){let l=Ne.instance.findTag(i.runtimeName());typeof l<"u"&&typeof l.resolveDynamicParameter<"u"&&l.resolveDynamicParameter!=null&&(o=l.resolveDynamicParameter(i,s.name),a=!0)}else o=Ne.instance?.getParameter(i.runtimeName(),s.name)??null;if(o==null&&a&&(o=Ne.instance?.getParameter(i.runtimeName(),s.name)??null),typeof o<"u"&&o!==null){let l=Ne.instance?.resolveParameterCompletions(i.runtimeName(),o,e)??null;l!==null&&l.items.length>0?l.items.forEach(u=>{u.sortText="000",r.push(u)}):rv(o).forEach(u=>{u.sortText="000",r.push(u)})}if(s.hasInterpolations()&&e.isInVariableInterpolation&&i.isTagNode){let l=Ne.instance?.findTag(i.runtimeName());if(l.resolveCompletionItems!=null){let u=l.resolveCompletionItems(e);u.items.length>0&&(r=u.items)}}}}else if(e.isInVariableInterpolation==!1||e.currentNode==i){let s=Nv(i,e.position);if(e.isCaretInTag=s,e.currentNode=i,Ne.instance!=null){let o=Ne.instance.getCompletionItems(e);o.isExclusive?r=o.items:r=r.concat(o.items)}}}else e.isInVariableInterpolation&&e.currentNode==null&&(r=r.concat(qo(e,i.currentScope.ancestor())));if(n){e.context.node!=null&&e.context.node.currentScope!=null&&(e.context.modifierContext==null||e.context.modifierContext.activeModifier==null)&&(r=r.concat(qo(e,e.context.node.currentScope)));let s=decodeURIComponent(e.document);if(e.project.hasViewCollectionInjections(s)){let o=e.project.getCollectionNamesForView(s);for(let a=0;a<o.length;a++){let l=e.project.getBlueprintFields(o);if(l.length>0)for(let u=0;u<l.length;u++){let c=l[u];r.push({label:c.name,detail:c.blueprintName,documentation:c.instructionText??"",kind:Dt.CompletionItemKind.Field})}}ZI.forEach(a=>{r.push({label:a,kind:Dt.CompletionItemKind.Field})})}}return e.context.node!=null&&(e.context.node.manifestType=="array"&&e.context.node.isClosedBy!=null?e.context.modifierContext!=null&&((Ce.instance?.getModifiersForType("array")??[]).forEach(o=>{if(o.isDeprecated)return;let a=fd(o);a.sortText="000",r.push(a)}),Vg(r)):e.context.modifierContext!=null&&((Ce.instance?.getModifiersForType(e.context.node.manifestType)??[]).forEach(o=>{if(o.isDeprecated)return;let a=fd(o);a.sortText="000",r.push(a)}),Vg(r))),r}for(let s=0;s<e.nodesInScope.length;s++){let o=e.nodesInScope[s],a=!0;if(e.isInVariableInterpolation&&e.currentNode!==null&&o.currentScope!=null&&e.currentNode.currentScope!=null&&o.currentScope.generation>e.currentNode.currentScope.generation&&(a=!1),o.isTagNode&&a){let l=Nv(o,e.position);if(e.isCaretInTag=l,e.currentNode=o,Ne.instance!=null){let u=Ne.instance.getCompletionItems(e);if(u.isExclusive){r=u.items;break}r=r.concat(u.items)}continue}}return r}};var Pv=Y($t(),1);function ae(t){let e="";typeof t<"u"&&typeof t.resolveDocumentation<"u"&&t.resolveDocumentation!=null&&(e=t.resolveDocumentation());let i=t.tagName;if(i.includes(":")){let r=i.split(":");i=r[r.length-1]}return{label:i,kind:Pv.CompletionItemKind.Text,sortText:"1",documentation:{kind:"markdown",value:e}}}var Ug=Y(ot(),1);function Av(t,e,i){return{name:t,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:e,expectsTypes:["string"],isDynamic:!0,isRequired:!1,documentationLink:i,docLinkName:"MDN Reference"}}var Ev=Av("class","A space-separated list of the classes of the element.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class"),Cv=Av("style","Contains CSS styling declarations to be applied to the element. Note that it is recommended for styles to be defined in a separate file or files.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/style");function Nd(t){return t=="class"?Ev:t=="style"?Cv:{name:t,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"",expectsTypes:["string","number","array"],isRequired:!1,isDynamic:!0}}function Rv(t){let e=[];for(let i=0;i<t.length;i++)e.push({label:t[i],kind:Ug.CompletionItemKind.Field});return z(e)}function gt(t){let e=[];for(let i=0;i<t.length;i++)e.push({label:t[i],kind:Ug.CompletionItemKind.Field});return z(e)}function z(t){return{items:t,isExclusiveResult:!0,analyzeDefaults:!1}}function Ii(t){return{items:t,isExclusiveResult:!1,analyzeDefaults:!0}}var ue={items:[],isExclusiveResult:!1,analyzeDefaults:!0};function it(t,e){let i=sj(t);return i.tagName=e,i}function sj(t){return{allowsArbitraryParameters:t.allowsArbitraryParameters,allowsContentClose:t.allowsContentClose,injectParentScope:t.injectParentScope,parameters:t.parameters,requiresClose:t.requiresClose,tagName:t.tagName,introducedIn:t.introducedIn,hideFromCompletions:t.hideFromCompletions,augmentScope:t.augmentScope,requiresCloseResolver:t.requiresCloseResolver,resolveCompletionItems:t.resolveCompletionItems,resolveDynamicParameter:t.resolveDynamicParameter,resolveSpecialType:t.resolveSpecialType,resovleParameterCompletionItems:t.resovleParameterCompletionItems,suggestAlternativeParams:t.suggestAlternativeParams,resolveDocumentation:t.resolveDocumentation}}function xv(t){return t.findParameterValueOrNull("scope")}function wv(t){t.getAllNodes().forEach(i=>{i instanceof B&&i.manifestType==="array"&&(i.mustClose=!0)})}function oj(t){return t.findParameterValueOrNull("as")}var aj=["count","next","previous"];function lj(t,e){let i=[];if(t.hasMethodPart()){let a=t.getMethodNameValue();if(aj.includes(a)==!1)return i.push(a),i}let r=t.findAnyParameter(YI),n=t.findAnyParameter(KI),s=[],o=[];return typeof r<"u"&&r!==null&&(r.value.trim()==="*"?(s=e.getUniqueCollectionNames(),typeof n<"u"&&n!==null&&n.isVariableReference==!1&&n.hasInterpolations()==!1&&(o=n.getArrayValue())):r.isVariableReference==!1&&r.hasInterpolations()==!1&&(s=r.getArrayValue())),o.length>0?i=s.filter(function(a){return o.includes(a)==!1}):i=s,i}function js(t,e){let i=lj(t,e),r=!1,n=!1,s=!1,o=null,a="";if(t.isClosingTag==!1){let u=oj(t),c=xv(t);u!=null&&(r=!0,a=u),c!=null&&(s=!0,o=c),n=t.hasParameter("paginate")}return{context:{collectionNames:i??[],endPosition:t.endPosition?.char??0,aliasName:a,isAliased:r,isScoped:s,scopeName:o,isStartOfScope:!t.isClosingTag,line:t.startPosition?.line??0,startPosition:t.startPosition?.char??0,isPaginated:n,excludeCollections:[],includeCollections:[]},issues:[]}}function ll(t,e){if(t==null)return null;let i=Rr(e,":");return i.includes(":")&&(i=i.split(":")[0]),i=="status"||i=="taxonomy"||t.currentScope!=null&&t.currentScope.containsReference(i)?Nd(e):null}var uj=["from","folder","use","not_from","not_folder"],cj=["previous","next"],fj=["in","collection"];function Gs(t,e){if(t.isDynamic){let i=vd(t.name);if(e.nodesInScope.length>0){let r=e.nodesInScope[e.nodesInScope.length-1];if(r!=null&&r.currentScope!=null){let n=il(r,r.currentScope),s=n.map(a=>a.name),o=is(e.leftWord);if(s.includes(o))return z(qs(e))}}if(i=="status"&&e.context?.parameterContext!=null)return z(QI(e.context.parameterContext.parameter?.getArrayValue()??[]));if(i=="taxonomy"){let r=is(t.name);if(e.project.hasTaxonomy(r)&&e.context?.parameterContext!=null)return z(XI(e.context.parameterContext.parameter?.getArrayValue()??[],r,e.project))}}if(t.name=="filter"||t.name=="query_scope")return z(hd(e.project));if(e.nodesInScope.length>0){let i=e.nodesInScope[e.nodesInScope.length-1];if(i.hasMethodPart()&&cj.includes(i.getMethodNameValue())&&fj.includes(t.name))return z(JI(e.project))}return uj.includes(t.name)&&e.context?.parameterContext!=null?z(rl(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null}var dj={tagName:"collection:previous",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ms,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:nl,resolveDynamicParameter:ll,resolveSpecialType:js,suggestAlternativeParams:tl,resovleParameterCompletionItems:Gs,resolveCompletionItems:ul,resolveDocumentation:t=>be("collection:previous Tag","The `collection:previous` tag is used to show the entries that appear before the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the previous two entries, based on dates in ascending order. #}}
{{ collection:previous in="articles" limit="2" sort="date:asc" }}

{{ /collection:previous }}`,"https://statamic.dev/tags/collection-previous")},Bo=dj;var Sd=it(Bo,"collection:older"),Pd=it(Bo,"collection:newer");var pj={tagName:"collection:count",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ms,{isRequired:!0,name:"in",aliases:["from"],description:"The collection from which to count entries",acceptsVariableInterpolation:!0,allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:js,resovleParameterCompletionItems:Gs,resolveDocumentation:t=>be("collection:count Tag","The `collection:count` tag returns the total number of entries in the specified collection(s). The collection count tag accepts the same parameters as the collection tag, allowing developers to count entries that meet specific conditions.",`Total entry count: {{ collection:count in="collection-name" }}
Draft count: {{ collection:count in="collection-name" status:in="draft" }}`,"https://statamic.dev/tags/collection-count")},Ad=pj;var hj={tagName:"collection:next",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ms,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:nl,resolveDynamicParameter:ll,resolveSpecialType:js,suggestAlternativeParams:tl,resovleParameterCompletionItems:Gs,resolveCompletionItems:ul,resolveDocumentation:t=>be("collection:next Tag","The `collection:next` tag is used to show the entries that will appear after the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the next two entries, based on dates in ascending order. #}}
{{ collection:next in="articles" limit="2" sort="date:asc" }}

{{ /collection:next }}`,"https://statamic.dev/tags/collection-next")},Ed=hj;function ul(t){let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="collection"||t.leftWord=="/collection")&&t.leftChar==":"){let i=t.project.getCollectionNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:ku.CompletionItemKind.Field,sortText:"0"});return e.push(ae(Ad)),e.push(ae(Ed)),e.push(ae(Bo)),e.push(ae(Sd)),e.push(ae(Pd)),{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}if(t.currentNode!=null&&t.currentNode.currentScope!=null){let i=il(t.currentNode,t.currentNode.currentScope),r=i.map(s=>s.name),n=is(t.leftWord);if(n==="taxonomy")return z(zI(t));if(r.includes(n))return e=qs(t),z(e);if(t.isCaretInTag&&!t.context?.isInParameter&&["collection","/collection"].includes(t.leftWord)==!1&&t.leftChar!=" "){let s=[];for(let o=0;o<i.length;o++){let a=i[o];s.includes(a.name)==!1&&(e.push({label:a.name,detail:a.blueprintName,documentation:a.instructionText??"",kind:ku.CompletionItemKind.Field}),s.push(a.name))}if(e.push({label:"taxonomy",insertText:"taxonomy:",kind:ku.CompletionItemKind.Field}),e.push({label:"status",insertText:"status:",kind:ku.CompletionItemKind.Field}),e.length>0)return Ii(e)}}return ue}var mj={tagName:"collection",hideFromCompletions:!1,introducedIn:null,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Ms,augmentScope:nl,resolveDynamicParameter:ll,resolveSpecialType:js,suggestAlternativeParams:tl,resovleParameterCompletionItems:Gs,resolveCompletionItems:ul,resolveDocumentation:t=>be("collection Tag","The `collection` tag provides access to entry data such as blog posts, products, etc.",`{{ collection:articles as="posts" }}

	{{ posts }}
		{{ title }}
	{{ /posts }}

{{ /collection:articles }}`,"https://statamic.dev/tags/collection")},kv=mj;var gj={tagName:"cache",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,allowsContentClose:!1,allowsArbitraryParameters:!1,resovleParameterCompletionItems:(t,e)=>t.name=="scope"?gt(["page","site","user"]):null,parameters:[{isRequired:!1,name:"for",description:"The duration the cache is valid for.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"key",description:"An arbitrary name the cache entry may be referenced by.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"scope",description:" The scope of the cached value. Either site or page.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:(t,e)=>{let i=t.findParameter("key"),r=null;if(i!=null){let n=i.value;n.trim().length>0&&(r={key:n,reference:t})}return{context:r,issues:[]}},resolveDocumentation:t=>be("cache Tag","The `cache` tag can be used to save the results of an expensive template operation. The duration of the cache can be configured.",`{{ cache for="10 minutes" }}
    {{# Template code that won't be re-rendered for at least 10 minutes. #}}
{{ /cache }}`,"https://statamic.dev/tags/cache")},Dv=gj;var _j={tagName:"dump",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.leftWord=="dump"&&t.leftChar==":"?z(Sv(t)):ue,resolveDocumentation:t=>be("dump Tag","The `dump` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered.",`{{ collection:articles }}
	{{# View all data available, for each entry. #}}
    {{ dump }}
{{ /collection:articles }}`,"https://statamic.dev/tags/dump")},Fv=_j;var yj={tagName:"404",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>be("404 (Not Found) Tag","The `404` (Not Found) tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ 404 }}
{{ /unless }}`,"https://statamic.dev/tags/404")},Lv=yj;var Tj={tagName:"link",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The relative path",expectsTypes:["string"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!0,isDynamic:!1},{name:"absolute",description:"Whether to generate absolute URLs. Default false",expectsTypes:["boolean"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1},{name:"id",description:"The ID of the entry to link to",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1},{name:"in",description:"The handle of the site to link to.",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>F("link Tag","The `link` tag accepts relative URLs or entry IDs and generates fully-qualified URLs to the desired content.","https://statamic.dev/tags/link")},Ov=Tj;var Mv={tagName:"loop",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(t,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:t}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:t=>F("loop Tag","The `loop` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")},qv={tagName:"range",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(t,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:t}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:t=>F("range Tag","The `range` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")};var gr=Y($t(),1);function qe(t,e){return e.trim().length>0?Nd(e):null}var cl=[{isRequired:!1,name:"src",description:"The name of the partial view.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"when",description:"A condition to control whether the partial renders. The partial will not render unless it receives a truthy value.",allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["*"],isDynamic:!1},{isRequired:!1,name:"unless",description:"A condition to control whether the partial renders. The partial will not render unless it receives a falsey value.",allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["*"],isDynamic:!1}];var Du=Y($t(),1);function fl(t,e){if(t.isDynamic&&e.currentNode!=null&&e.currentNode.getTagName()=="partial"&&e.currentNode.hasMethodPart()){let i=e.currentNode.getMethodNameValue();if(i.trim().length>0&&ee.instance?.hasStructure()){let r=ee.instance.getStructure().findRelativeView(i);if(r!=null&&r.varReferenceNames.has(t.name)){let n=r.varReferenceNames.get(t.name);if(r.document!=null&&r.document.hasFrontMatter()){let s=r.document.getFrontMatterScope();if(s!=null){let o=s.getList(n);if(o!=null)return Rv(o.getVariableNames())}}}}}if(t.name=="src"){let i=e.project.getViews(),r=[];return i.forEach(n=>{if(on.hasDetails(n.documentUri)){let s=on.documentDetails.get(n.documentUri);r.push({label:s.documentName+"("+n.relativeDisplayName+")",insertText:n.relativeDisplayName,detail:s.documentName,documentation:{kind:Du.MarkupKind.Markdown,value:s.documentDescription},kind:Du.CompletionItemKind.File})}else r.push({label:n.relativeDisplayName,kind:Du.CompletionItemKind.File})}),z(r)}return null}var bj={tagName:"partial:exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:cl,introducedIn:"3.2.7",resovleParameterCompletionItems:fl,resolveDocumentation:t=>F("partial:exists Tag","The `partial:exists` can be used within conditional statements to test if a partial exists.","https://statamic.dev/tags/partial-exists")},Cd=bj;var Ij={tagName:"partial:if_exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:cl,introducedIn:"3.2.7",resovleParameterCompletionItems:fl,resolveDocumentation:t=>F("partial:if_exists Tag","The `partial:if_exists` can be used to output the contents of a partial if it exists.","https://statamic.dev/tags/partial-if-exists")},Rd=Ij;function dl(t){if(t.getTagName()!="partial")return null;let e="";if(t.hasMethodPart())e=t.getMethodNameValue();else{let i=t.findParameter("src");i!=null&&(e=i.value)}return e}var vj=[ae(Cd),ae(Rd)],Nj={tagName:"partial",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!0,parameters:cl,requiresClose:!1,allowsContentClose:!0,introducedIn:null,resolveDocumentation:t=>`**Partial Tag**  
Includes another view into the current template.  

[Documentation Reference](https://statamic.dev/tags/partial)
`,resolveDynamicParameter:qe,resovleParameterCompletionItems:fl,resolveCompletionItems:t=>{let e=[];if(t.leftChar=='"'&&t.leftWord==':src="')return{items:[],analyzeDefaults:!0,isExclusiveResult:!1};if((t.leftWord=="partial"||t.leftWord=="/partial")&&t.leftChar==":"||t.leftWord=='src="'&&t.leftChar=='"')return t.project.getViews().forEach(r=>{let n=decodeURIComponent(r.documentUri);if(on.hasDetails(n)){let s=on.documentDetails.get(n);e.push({label:s.documentName+"("+r.relativeDisplayName+")",insertText:r.relativeDisplayName,detail:s.documentName,documentation:{kind:gr.MarkupKind.Markdown,value:s.documentDescription},kind:gr.CompletionItemKind.File})}else e.push({label:r.relativeDisplayName,kind:gr.CompletionItemKind.File})}),t.leftWord!='src="'&&(e=e.concat(vj)),{analyzeDefaults:!1,isExclusiveResult:!0,items:e};if(t.currentNode!=null&&t.project!=null){let i=dl(t.currentNode);if(i!=null&&i.trim().length>0){let r=t.project.findRelativeView(i);if(r!=null&&_e.hasDocument(r.documentUri)){let n=_e.getDocument(r.documentUri);if(n!=null){let s=n.getAllAntlersNodes(),o=Sj(s),a=[];r.varReferenceNames!=null&&r.varReferenceNames.forEach((u,c)=>{o.push(c)});let l=[];if(r.injectsParameters.length>0){let u={start:{line:t.position.line,character:t.position.character-0},end:t.position};r.injectsParameters.forEach(c=>{let f=c.name+'="$1"';a.includes(c.name)||(a.push(c.name),l.push({label:c.name,kind:gr.CompletionItemKind.Value,detail:c.description,insertTextFormat:gr.InsertTextFormat.Snippet,textEdit:gr.TextEdit.replace(u,f),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}if(o.length>0){let u={start:{line:t.position.line,character:t.position.character-0},end:t.position};o.forEach(c=>{let f=c+'="$1"';a.includes(c)||(a.push(c),l.push({label:c,kind:gr.CompletionItemKind.Value,insertTextFormat:gr.InsertTextFormat.Snippet,textEdit:gr.TextEdit.replace(u,f),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}return Ii(l)}}}}return{analyzeDefaults:!0,isExclusiveResult:!1,items:[]}}};function Sj(t){let e=[];return t.forEach(i=>{if(i.isTagNode||i.isClosingTag||i.isComment||i.hasMethodPart()&&i.getMethodNameValue().length>0||i.name!=null&&i.name.content.includes("["))return;let r=i.getTagName();!e.includes(r)&&r!="#"&&r!="slot"&&e.push(r)}),e}var Bv=Nj;var Pj={tagName:"increment:reset",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:"3.2.28",parameters:[{isRequired:!0,name:"counter",aliases:[],description:"The incrementing counter to reset",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"to",aliases:[],description:"An optional value to reset the counter to before incrementing starts again",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveDocumentation:t=>be("increment:reset Tag","The `increment:reset` tag can be used to reset the value of an incrementing counter.",`{{ array_variable }}
    {{ increment:counter_name }}
{{ /array_variable }}

{{ increment:reset counter="counter_name" }}
`,null)},xd=Pj;var Aj=[ae(xd)],Ej={tagName:"increment",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!1,name:"from",aliases:[],description:"The number to start incrementing by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"by",aliases:[],description:"The number to increment by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveCompletionItems:t=>t.leftWord=="increment"||t.leftWord=="/increment"&&t.leftChar==":"?z(Aj):ue,resolveDocumentation:t=>F("increment Tag","The `increment` tag can be used to increment a value each time the tag is encountered.","https://statamic.dev/tags/increment")},Vv=Ej;var pl=class{constructor(e){this.node=e}},Uv={tagName:"yields",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(t,e)=>({context:new pl(t),issues:[]})},jv={tagName:"yield",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(t,e)=>({context:new pl(t),issues:[]}),resolveDocumentation:t=>F("yield Tag","The `yield` tag may be used to push rendered content to named regions within a template's structure.","https://statamic.dev/tags/yield")};var wd=Y(ot(),1);var Gv=[{handle:"access cp"},{handle:"configure collections"},{handle:"[view edit create delete publish reorder] {collection} entries"},{handle:"configure structures"},{handle:"[view edit] {structure} structure"},{handle:"edit {global} globals"},{handle:"[view upload edit move rename delete] {container} assets"},{handle:"[view perform] updates"},{handle:"[view edit create delete] users"},{handle:"change passwords"},{handle:"edit roles"},{handle:"configure forms"},{handle:"[view delete] {form} submissions"}];var rs=class{constructor(){this.contextItems=new Map;this.triggerNames=[];this.collectionTriggers=[];this.collectionTriggerCaps=[];this.globalTriggers=[];this.globalTriggerCaps=[];this.formTriggers=[];this.formTriggerCaps=[];this.structureTriggers=[];this.structureTriggerCaps=[];this.assetTriggers=[];this.assetTriggerCaps=[]}getCollectionTriggerCaps(){return this.collectionTriggerCaps}getGlobalTriggerCaps(){return this.globalTriggerCaps}getFormTriggerCaps(){return this.formTriggerCaps}getStructureTriggerCaps(){return this.structureTriggerCaps}getAssetTriggerCaps(){return this.assetTriggerCaps}loadCorePermissions(){this.registerPermissions(Gv)}getTriggerNames(){return this.triggerNames}isCollectionTrigger(e){return this.collectionTriggers.includes(e)}isGlobalTrigger(e){return this.globalTriggers.includes(e)}isFormTrigger(e){return this.formTriggers.includes(e)}isStructureTrigger(e){return this.structureTriggers.includes(e)}isAssetTrigger(e){return this.assetTriggers.includes(e)}getTriggerContextItems(e){return this.contextItems.has(e)?this.contextItems.get(e):[]}registerSpecialTrigger(e,i,r){i=="{collection}"?(this.collectionTriggerCaps.includes(r)==!1&&this.collectionTriggerCaps.push(r),this.collectionTriggers.includes(e)==!1&&this.collectionTriggers.push(e)):i=="{structure}"?(this.structureTriggerCaps.includes(r)==!1&&this.structureTriggerCaps.push(r),this.structureTriggers.includes(e)==!1&&this.structureTriggers.push(e)):i=="{container}"?(this.assetTriggerCaps.includes(r)==!1&&this.assetTriggerCaps.push(r),this.assetTriggers.includes(e)==!1&&this.assetTriggers.push(e)):i=="{global}"?(this.globalTriggerCaps.includes(r)==!1&&this.globalTriggerCaps.push(r),this.globalTriggers.includes(e)==!1&&this.globalTriggers.push(e)):i=="{form}"&&(this.formTriggerCaps.includes(r)==!1&&this.formTriggerCaps.push(r),this.formTriggers.includes(e)==!1&&this.formTriggers.push(e))}addContextToTrigger(e,i){this.triggerNames.includes(e)==!1&&this.triggerNames.push(e),this.contextItems.has(e)==!1?this.contextItems.set(e,[i]):this.contextItems.get(e)?.push(i)}registerPermissions(e){for(let i=0;i<e.length;i++){let r=e[i],n=[],s="",o="";if(r.handle.includes("[")&&r.handle.includes("]")){let a=r.handle.indexOf("["),l=r.handle.indexOf("]"),u=l-a,c=r.handle.substr(a+1,u-1).split(" ").filter(d=>d.trim().length>0),f=r.handle.substr(l+1).split(" ").filter(d=>d.trim().length>0);n=c,f.length==2?(s=f[0],o=f[1]):f.length==1&&(s="",o=f[0])}else{let a=r.handle.split(" ").filter(l=>l.trim().length>0);a.length==2&&(n=[a[0]],o=a[1])}for(let a=0;a<n.length;a++){let l=n[a];s.trim().length>0?this.registerSpecialTrigger(l,s,o):this.addContextToTrigger(l,o)}}}};rs.instance=null;(typeof rs.instance>"u"||rs.instance==null)&&(rs.instance=new rs,rs.instance.loadCorePermissions());var _r=rs;function Hv(t,e){let i=[];if(t.trim().length==0){let r=_r.instance?.getTriggerNames()??[];for(let n=0;n<r.length;n++)i.push({label:r[n],kind:wd.CompletionItemKind.Value})}else{let r=t.split(" ").filter(d=>d.trim().length>0),n=r[0],s=_r.instance?.getTriggerContextItems(n)??[],o=_r.instance?.isCollectionTrigger(n),a=_r.instance?.isGlobalTrigger(n),l=_r.instance?.isFormTrigger(n),u=_r.instance?.isStructureTrigger(n),c=_r.instance?.isAssetTrigger(n),f=[];if(r.length<=2){o?f=f.concat(e.project.getUniqueCollectionNames()):a?f=f.concat(e.project.getUniqueGlobalsNames()):l?f=f.concat(e.project.getUniqueFormNames()):u?f=f.concat(e.project.getUniqueNavigationMenuNames()):c&&(f=f.concat(e.project.getUniqueAssetNames())),s.length>0&&(f=f.concat(s)),f=[...new Set(f)];for(let d=0;d<f.length;d++)i.push({label:f[d],kind:wd.CompletionItemKind.Value})}else{let d=[];o?d=d.concat(_r.instance?.getCollectionTriggerCaps()??[]):a?d=d.concat(_r.instance?.getGlobalTriggerCaps()??[]):l?d=d.concat(_r.instance?.getFormTriggerCaps()??[]):u?d=d.concat(_r.instance?.getStructureTriggerCaps()??[]):c&&(d=d.concat(_r.instance?.getAssetTriggerCaps()??[])),d=[...new Set(d)];for(let h=0;h<d.length;h++)i.push({label:d[h],kind:wd.CompletionItemKind.Value})}}return i}function kd(t,e){let i=vd(t.name);return e.context?.parameterContext!=null&&["do","permission"].includes(i)?z(Hv(e.context?.parameterContext.parameter?.value??"",e)):null}var Cj={tagName:"user:can",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:kd,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:t=>F("user:can Tag","The `user:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can")},hl=Cj;var Rj={tagName:"user:logout",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>F("user:logout Tag","The `user:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout")},ml=Rj;var xj={tagName:"user:logout_url",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>be("user:logout_url","The `user:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ user:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url")},gl=xj;var Wv={tagName:"switch",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>F("switch Tag","The `switch` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")},Yv={tagName:"rotate",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,introducedIn:null,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>F("rotate Tag","The `rotate` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")};var wj={tagName:"oauth",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"provider",description:"The OAuth provider to be used.",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]},{name:"redirect",description:"The URL to be redirected to after authenticating.",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resovleParameterCompletionItems:(t,e)=>t.name=="provider"?gt(e.project.getOAuthProviders()):null,resolveDocumentation:t=>be("oauth Tag","The `oauth` tag can be used to generate login URls for various third-party services.",'<a href="{{ oauth provider="github" }}">Sign In with Github</a>',"https://statamic.dev/tags/oauth")},Kv=wj;var kj={tagName:"session:dump",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>F("session:dump Tag","The `session:dump` tag will display the contents of the user's session to the browser. This tag behaves similarly to the `dd` helper functions, but returns just the session data.","https://statamic.dev/tags/session-dump")},Dd=kj;var Hs=class{constructor(e){this.node=e}};var Dj={tagName:"session:set",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:null,resolveDynamicParameter:qe,resolveSpecialType:(t,e)=>({context:new Hs(t),issues:[]}),resolveDocumentation:t=>F("session:set Tag","The `session:set` tag is used to add new data to the user's session.","https://statamic.dev/tags/session-set")},Fd=Dj;var Ws=class{constructor(){this.knownVariables=new Map}registerDocumentSessionVariables(e,i){this.knownVariables.has(e)||this.knownVariables.set(e,new Map);let r=this.knownVariables.get(e);r.clear();for(let n=0;n<i.length;n++){let s=i[n].node;if(s.hasParameters)for(let o=0;o<s.parameters.length;o++){let a=s.parameters[o];r.set(a.name,i[n])}}}getKnownSessionVariableNames(){let e=[];return this.knownVariables.forEach(i=>{i.forEach((r,n)=>{e.includes(n)==!1&&e.push(n)})}),e}};Ws.instance=null;(typeof Ws.instance>"u"||Ws.instance==null)&&(Ws.instance=new Ws);var Vo=Ws;var $v=Y(ot(),1);function zv(t,e){let i=[],r=t.getArrayValue(),n=e.filter(s=>!r.includes(s));for(let s=0;s<n.length;s++)i.push({label:n[s],kind:$v.CompletionItemKind.Variable});return z(i)}var Fj={tagName:"session:forget",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"keys",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The session keys to clear",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{if(t.name=="keys"&&e.context?.parameterContext!=null){let i=Vo.instance?.getKnownSessionVariableNames()??[];if(e.context.parameterContext.parameter!=null)return zv(e.context.parameterContext.parameter,i)}return null},resolveDocumentation:t=>F("session:forget Tag","The `session:forget` tag is used to remove variables from the user's session.","https://statamic.dev/tags/session-forget")},Ld=Fj;var Lj={tagName:"session:flush",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>F("session:flush Tag","The `session:flush` tag will clear all values from the visitor's session. If the visitor is currently signed in they will also be signed out.","https://statamic.dev/tags/session-flush")},Od=Lj;var Oj={tagName:"session:flash",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:qe,resolveSpecialType:(t,e)=>({context:new Hs(t),issues:[]}),resolveDocumentation:t=>F("session:flash Tag","The `session:flash` tag can be used to add a value to the user's session. Flashed values only persist for a single request, and are then removed.","https://statamic.dev/tags/session-flash")},Md=Oj;var Mj={tagName:"markdown:indent",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>F("markdown:indent Tag","The `markdown:indent` tag is similar to the markdown tag, but will ignore leading whitepsace while rendering the tag's content as markdown.","https://statamic.dev/tags/markdown-indent")},qd=Mj;var qj=[ae(qd)],Bj={tagName:"markdown",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="markdown"||t.leftWord=="/markdown")&&t.leftChar==":"?z(qj):ue,resolveDocumentation:t=>F("markdown Tag","The `markdown` tag can be used to render the tags contents as markdown.","https://statamic.dev/tags/markdown")},Qv=Bj;var Xv=Y($t(),1);function Bd(t,e){let i=[],r=e;if(t.trim().length>0&&t.includes(".")&&t.endsWith(".")){let n=t.substr(0,t.length-1);r=r.filter(s=>s.startsWith(n))}for(let n=0;n<r.length;n++){let s=r[n],o=!0;t.includes(".")&&(s.startsWith(t)==!1?o=!1:s=s.substr(t.length)),o&&i.push({label:s,insertText:s,kind:Xv.CompletionItemKind.Text})}return i}function Jv(t,e){return Bd(t,e.getRouteNames())}var Vj={tagName:"route",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:qe,resolveCompletionItems:t=>{if(t.leftMeaningfulWord=="route"){let e=Id(t);return z(Jv(e,t.project))}return ue},resolveDocumentation:t=>F("route Tag","The `route` tag can be used to generate a full URL [to a named route](https://laravel.com/docs/8.x/routing#named-routes), including any defined route parameters.","https://statamic.dev/tags/route")},Zv=Vj;var Vd=Y(ot(),1),eN=[{label:"301 Permanent",insertText:"301",kind:Vd.CompletionItemKind.EnumMember},{label:"302 Temporary",insertText:"302",kind:Vd.CompletionItemKind.EnumMember},{label:"404 Not Found",insertText:"404",kind:Vd.CompletionItemKind.EnumMember}];var Uj={tagName:"redirect",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The destination URL.",aliases:["url"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!0},{name:"response",description:"The HTTP response code to use.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:t=>t.name=="response"?z(eN):ue,resolveDocumentation:t=>F("redirect Tag","The `redirect` tag can be used to redirect the site visitor to a URL or named route. An optional HTTP status code can also be specified on the response using the `response` parameter.","https://statamic.dev/tags/redirect")},tN=Uj;var iN=Y(ot(),1);var Ys=class{constructor(){this.knownSections=new Map}registerDocumentSections(e,i){this.knownSections.has(e)||this.knownSections.set(e,new Map);let r=this.knownSections.get(e);r.clear();for(let n=0;n<i.length;n++){let s=i[n];s.node.hasMethodPart()&&r.set(s.node.getMethodNameValue(),s)}}getKnownSectionNames(){let e=[];return this.knownSections.forEach(i=>{i.forEach((r,n)=>{e.includes(n)==!1&&e.push(n)})}),e}};Ys.instance=null;(typeof Ys.instance>"u"||Ys.instance==null)&&(Ys.instance=new Ys);var Ud=Ys;var jj={tagName:"section",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>{if((t.leftWord=="section"||t.leftWord=="/section")&&t.leftChar==":"){let e=[],i=Ud.instance?.getKnownSectionNames()??[];for(let r=0;r<i.length;r++)e.push({label:i[r],kind:iN.CompletionItemKind.Field});return Ii(e)}return ue},resolveDocumentation:t=>F("section Tag","The `section` tag is used to push content to a named region defined by the `yield` tag.","https://statamic.dev/tags/section")},rN=jj;var Gj={tagName:"obfuscate",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>F("obfuscate Tag","The `obfuscate` tag converts the tags's content into a format that is difficult for bots to read, but can easily be viewed by users within their browser.","https://statamic.dev/tags/obfuscate")},nN=Gj;var Hj={tagName:"parent",hideFromCompletions:!1,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:t=>F("parent Tag","The `parent` tag provides access to data from the current page's parent (the URL one level above the current page).","https://statamic.dev/tags/parent")},sN=Hj;function jg(t,e){return Bd(t,e.getTranslationKeys())}var Wj=["translate","trans","trans_choice"],jd={tagName:"translate",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!0,parameters:[{isRequired:!1,name:"key",description:"The key of the translation string to find.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"locale",description:"The locale to be used when translating.",acceptsVariableInterpolation:!1,aliases:["site"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"count",description:"The number of items to use for pluralization.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{if(t.name=="key"){let i="";return e.context?.parameterContext!=null&&e.context.parameterContext.parameter!=null&&(i=e.context.parameterContext.parameter.value),z(jg(i,e.project))}return ue},resolveDynamicParameter:qe,resolveCompletionItems:t=>{if(t.leftMeaningfulWord!=null&&Wj.includes(t.leftMeaningfulWord)){let e=Id(t);return z(jg(e,t.project))}return ue},resolveDocumentation:t=>F("trans Tag","The `trans` tag can be used to retrieve a string for the current locale's language file.","https://statamic.dev/tags/trans")},oN=it(jd,"trans"),Gg=it(jd,"trans_choice");Gg.resolveDocumentation=t=>F("trans_choice Tag","The `trans_choice` tag can be used to retrieve a pluralized string for the current locale's language file.","https://statamic.dev/tags/trans#pluralization");var Yj={tagName:"svg",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The SVG filename relative to the project root",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"title",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"desc",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"sanitize",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"Determines whether the rendered SVG will be sanitized.",expectsTypes:["bool"],isDynamic:!1},{isRequired:!1,name:"allow_attrs",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"A list of allowed attributes when sanitizing.",expectsTypes:["array","string"],isDynamic:!1},{isRequired:!1,name:"allow_tags",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"A list of allowed tags when sanitizing.",expectsTypes:["array","string"],isDynamic:!1}],resolveDynamicParameter:qe,resolveDocumentation:t=>F("svg Tag","The `svg` tag can be used to render inline SVGs, as well as set attributes on the rendered `<svg>` element.","https://statamic.dev/tags/svg")},aN=Yj;var Kj={tagName:"asset",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The path to the file",expectsTypes:["string"],isDynamic:!1,name:"url"}],augmentScope:(t,e)=>(e.addVariables(al(t)),e),resolveDocumentation:t=>be("asset Tag","The `asset` tag can be used to retrive Assets by supplying a URL.",`{{ asset url="/url/for/asset.png" }}
    <img src="{{ url }}" alt="{{ alt }}" />
{{ /asset }}`,"https://statamic.dev/tags/asset")},lN=Kj;var uN=Y(ot(),1);function Hg(t){let e=[],i=t.getUniqueAssetNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:uN.CompletionItemKind.Field});return e}var cN=["container","id","handle"],$j={tagName:"assets",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"container",aliases:["id","handle"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The handle of the asset container.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"folder",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Filters the resulting assets by specific folder.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"recursive",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Returns all assets in all subdirectories.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"limit",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Limits the total results",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sort entries by any asset variable.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>cN.includes(t.name)?z(Hg(e.project)):ue,augmentScope:(t,e)=>{e.addVariables(al(t));let i="";if(t.name!=null&&t.name.getMethodName()!=null)i=t.name.getMethodName();else{let r=t.findAnyParameter(cN);r!=null&&r.containsSimpleValue()&&(i=r.value)}return i.length>0&&e.injectAssetContainer(t,i),e},resolveCompletionItems:t=>(t.leftWord=="assets"||t.leftWord=="/assets")&&t.leftChar==":"?z(Hg(t.project)):ue,resolveDocumentation:t=>be("assets Tag","The `assets` tag can be used to retrieve multiple Assets from an Asset container.",`{{ assets container="container-name" }}
    {{# Loop over all assets in the container. #}}
	<img src="{{ url }}" alt="{{ alt }}" />
{{ /assets }}`,"https://statamic.dev/tags/assets")},fN=$j;var zj={tagName:"get_content",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!1,parameters:[{isRequired:!1,name:"from",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"The ID to retrieve data for.",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"locale",aliases:["site"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The locale to show the content in.",expectsTypes:["string"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>t.name=="locale"||t.name=="site"?gt(e.project.getSiteNames()):null,resolveDocumentation:t=>be("get_content Tag","The `get_content` tag can be used to retrieve content from other entries. This tag accepts the ID of another entry, and will return access to all data for that entry.",`{{ get_content from="the-entry-id" }}
{{ /get_content }}`,"https://statamic.dev/tags/get_content")},dN=zj;function pN(t){return[{name:"basename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"extension",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"filename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"is_image",dataType:"boolean",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"file",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"file",dataType:"last_modified",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_bytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_b",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_gb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_kb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_megabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_mb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t}]}var Qj={tagName:"get_files",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"in",aliases:["from"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The directory to find files in relative to the public directory",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"depth",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The depth of the subdirectories",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"not_in",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"The subdirectories or pattern to exclude",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_size",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],description:"The file size filter to use",isDynamic:!1},{isRequired:!1,name:"ext",aliases:["extension"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The extension(s) to filter by",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"include",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:["match"],description:"Filter files by a regular expression",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"exclude",description:"Excludes files by a regular expression",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_date",description:"Filters files by last modified date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",description:"Limits the total number of results",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"offset",description:"The number of entries the results should be offset by",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sorts the listing by extension, size, last_modified, or random",expectsTypes:["string"],isDynamic:!1}],augmentScope:(t,e)=>(e.addVariables(pN(t)),e),resolveDocumentation:t=>F("get_files Tag","The `get_files` tag can be used to display information about files on the site's local filesystem.","https://statamic.dev/tags/get_files")},hN=Qj;function Gd(t){return[{name:"width",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:t},{name:"height",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:t},{name:"url",dataType:"string",sourceName:"*internal.glide",sourceField:null,introducedBy:t}]}var mN=Y(ot(),1);function mn(t,e,i){return{endLine:i.valuePosition?.end?.line??0,startLine:i.namePosition?.start?.line??0,endPos:i.valuePosition?.end?.char??0,startPos:i.namePosition?.start?.char??0,message:t,severity:mN.DiagnosticSeverity.Error}}var Wg=["greyscale","sepia"],Yg=["jpg","pjpg","png","gif","webp","avif","tif","bmp","psd"],gN=["auto","0","90","180","270"],_l=[{isRequired:!1,name:"src",aliases:["path","id"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The URL of the image when not using shorthand syntax.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"tag",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Outputs an image tag when set to true.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"alt",description:"The alt attribute value to use when generating tags.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"absolute",description:"Whether to output full URLs.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{name:"width",expectsTypes:["number"],isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The width of the image, in pixels.",isDynamic:!1},{name:"height",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],description:"The height of the image, in pixels.",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"square",expectsTypes:["number"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets both then height and width of the image.",isDynamic:!1,isRequired:!1},{name:"fit",expectsTypes:["string"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"How the image is fitted to its target dimensions.",isDynamic:!1,isRequired:!1},{name:"crop",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Crops the image to the specific dimensions.",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"orient",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Rotates the image.",expectsTypes:["*"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!gN.includes(e.value)&&i.push(mn("Invalid orient value",t,e)),i}},{name:"quality",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Defines the quality of the image",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"dpr",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"Defines the device pixel ratio.",expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<1||i>8)&&r.push(mn("dpr must be an integer between 1 and 8.",t,e)),r}},{name:"format",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Encodes the image to a specific format.",expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Yg.includes(e.value)&&i.push(mn("Format must be one of: "+Yg.join(","),t,e)),i}},{name:"bg",description:"Sets the background color for transparent images.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"blur",description:"Adds a blur effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<0||i>100)&&r.push(mn("blur must be a value between 0 and 100.",t,e)),r}},{name:"brightness",description:"Adjusts the image brightness.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<-100||i>100)&&r.push(mn("brightness must be a value between -100 and 100.",t,e)),r}},{name:"contrast",description:"Adjusts the image contrast.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<-100||i>100)&&r.push(mn("contrast must be a value between -100 and 100.",t,e)),r}},{name:"gamma",description:"Adjusts the image gamma.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseFloat(e.value),r=[];return e.containsSimpleValue()&&(i<.1||i>9.99)&&r.push(mn("gamma must be a value between 0.1 and 9.99.",t,e)),r}},{name:"sharpen",description:"Sharpens the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<0||i>100)&&r.push(mn("sharpen must be a value between 0 and 100.",t,e)),r}},{name:"pixelate",description:"Applies a pixelation effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=parseInt(e.value),r=[];return e.containsSimpleValue()&&(i<0||i>100)&&r.push(mn("pixelate must be a value between 0 and 100.",t,e)),r}},{name:"filter",description:"Applies a filter effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let i=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Wg.includes(e.value)&&i.push(mn("Filter must be one of: "+Wg.join(","),t,e)),i}},{name:"preset",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],description:"A collection of pre-configured image manipulation parameters.",isDynamic:!1,isRequired:!1}];function yl(t,e){return t.name=="orient"?gt(gN):t.name=="format"?gt(Yg):t.name=="filter"?gt(Wg):t.name=="preset"?gt(e.project.getAssetPresets()):ue}var Xj={tagName:"glide:batch",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:_l,introducedIn:null,augmentScope:(t,e)=>(e.addVariables(Gd(t)),e),resovleParameterCompletionItems:yl,resolveDocumentation:t=>F("glide:batch Tag","The `glide:batch` tag is similar to the glide tag, but can be used to apply image manipulations to multiple images within a piece of content.","https://statamic.dev/tags/glide-batch")},Hd=Xj;var Jj={tagName:"glide:data_url",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:_l,introducedIn:null,resovleParameterCompletionItems:yl,resolveDocumentation:t=>F("glide:data_url Tag","The `glide:data_url` tag returns manipulated image datas as a data URI.",null)},Wd=Jj;var Zj=[ae(Hd),ae(Wd)],e2={tagName:"glide",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!1,parameters:_l,introducedIn:null,augmentScope:(t,e)=>(e.addVariables(Gd(t)),e),resovleParameterCompletionItems:yl,resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="glide"||t.leftWord=="/glide")&&t.leftChar==":"?z(Zj):ue,resolveDocumentation:t=>F("glide Tag","The `glide` tag is used to manipulate images on the fly. Image manipulations may include resizing, cropping, or adjusting sharpness and constrast, amongst many others.","https://statamic.dev/tags/glide")},_N=e2;var yN={tagName:"iterate",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>F("iterate Tag","The `iterate` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")},TN={tagName:"foreach",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>F("foreach Tag","The `foreach` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")};function bN(t){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t},{name:"name",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}]}var Yd=[{isRequired:!1,name:"id",description:"The ID of the content to localize.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"sort",description:"Sort by a site's key.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"current_first",description:"When true, ensures that the current locale is first.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"all",description:"When true, all locale data will be returned.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!0,name:"self",description:"When true, the current locale will be included.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"collection_term_workaround",description:"Disables the behavior introduced in https://github.com/statamic/cms/pull/6466.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1}];var t2={tagName:"locales:count",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:Yd,introducedIn:"3.0.36",resolveDocumentation:t=>F("locales:count Tag","The `locales:count` tag can be used to count the number of locales the current content is available in.","https://statamic.dev/tags/locales-count")},Kd=t2;var i2=[ae(Kd)],r2={tagName:"locales",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:Yd,introducedIn:null,augmentScope:(t,e)=>(e.addVariableArray("locale",bN(t)),e.addVariable({name:"current",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"exists",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"permalink",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e),resolveDocumentation:t=>F("locales Tag","The `locales` tag can be used to access all the locales the current content is available in.","https://statamic.dev/tags/locales"),resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="locale"||t.leftWord=="/locale")&&t.leftChar==":"?z(i2):ue},IN=r2;var n2={tagName:"mix",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",description:"The path to the versioned file, relative to the public directory",acceptsVariableInterpolation:!1,aliases:["path"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"in",description:"The location of the mix manifest file",acceptsVariableInterpolation:!1,aliases:["from"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:t=>F("mix Tag","The `mix` tag is used to return the path of CSS and JavaScript files versioned with [Laravel Mix](https://laravel.com/docs/8.x/mix).","https://statamic.dev/tags/mix")},vN=n2;var Fu=Y(ot(),1);function NN(t){let e=[],i=t.getUniqueUserGroupNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:Fu.CompletionItemKind.Field});return e}function SN(t){let e=[],i=t.getUniqueUserRoleNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:Fu.CompletionItemKind.Field});return e}function Tl(t,e){let i=[],r=e.getUniqueUserGroupNames(),n=r.filter(s=>!t.includes(s));for(let s=0;s<n.length;s++)i.push({label:n[s],kind:Fu.CompletionItemKind.Field});return i}function bl(t,e){let i=[],r=e.getUniqueUserRoleNames(),n=r.filter(s=>!t.includes(s));for(let s=0;s<n.length;s++)i.push({label:n[s],kind:Fu.CompletionItemKind.Field});return i}var s2={tagName:"user:in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="groups"||t.name=="group")&&e.context?.parameterContext!=null?z(Tl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:t=>F("user:in Tag","The `user:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in")},$d=s2;var o2={tagName:"user:not_in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="groups"||t.name=="group")&&e.context?.parameterContext!=null?z(Tl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:t=>F("user:not_in Tag","The `user:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in")},Il=o2;var a2={tagName:"user:is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="roles"||t.name=="role")&&e.context?.parameterContext!=null?z(bl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:t=>F("user:is Tag","The `user:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is")},vl=a2;var l2={tagName:"user:isnt",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="roles"||t.name=="role")&&e.context?.parameterContext!=null?z(bl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:t=>F("user:isnt Tag","The `user:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt")},Nl=l2;var u2={tagName:"in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="groups"||t.name=="group")&&e.context?.parameterContext!=null?z(Tl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:t=>(t.leftWord=="in"||t.leftWord=="/in")&&t.leftChar==":"?z(NN(t.project)):ue,resolveDocumentation:t=>F("in Tag","The `in` tag can be used to check if the authenticated user belongs to one or more groups. This tag operates similarly to the `user:in` tag.","https://statamic.dev/tags/user-in")},PN=u2;var c2={tagName:"not_found",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>be("404 (Not Found) Tag","The `not_found` tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ not_found }}
{{ /unless }}`,"https://statamic.dev/tags/404")},AN=c2;var f2={tagName:"is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>(t.name=="roles"||t.name=="role")&&e.context?.parameterContext!=null?z(bl(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:t=>(t.leftWord=="is"||t.leftWord=="/is")&&t.leftChar==":"?z(SN(t.project)):ue,resolveDocumentation:t=>F("is Tag","The `is` tag can be used to check whether the currently authenticated user has one or more roles. This tag behaves the same as the `user:is` tag.","https://statamic.dev/tags/user-is")},EN=f2;var d2={tagName:"widont",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>be("widont Tag","The `widont` tag is similar to the [widont modifier](https://statamic.dev/modifiers/widont), and will attempt to prevent lines with a single word from appearing within the tags rendered output.",`{{ widont }}
    {{ content }}
{{ /widont }}`,null)},CN=d2;var zd=[{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"id",description:"The user ID to fetch.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"email",description:"The email address to find the user by.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"field",description:"The field to fetch the user by",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"value",description:"The value to search for.",expectsTypes:["string"],isDynamic:!1}];var p2={tagName:"user:profile",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:zd,introducedIn:null,augmentScope:(t,e)=>(e.injectBlueprint(t,"user"),e),resovleParameterCompletionItems:(t,e)=>t.name=="field"?z(dd(e.project.getUserFields())):ue,resolveDocumentation:t=>F("user:profile Tag","The `user:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter.",null)},Sl=p2;var RN={tagName:"dd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>be("dd Tag","The `dd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the dd tag.
	#}}
    {{ dd }}
{{ /collection:articles }}`,null)},xN={tagName:"ddd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>be("ddd Tag","The `ddd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the ddd tag.
	#}}
    {{ ddd }}
{{ /collection:articles }}`,null)};var h2={tagName:"path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["src"],allowsVariableReference:!0,description:"The path source",name:"to",isDynamic:!1,expectsTypes:["string"]},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],description:"Whether to generate absolute paths",expectsTypes:["boolean"],isDynamic:!1,name:"absolute"}],resolveDocumentation:t=>F("path Tag","The `path` tag can be used to generate URLs from relative URLs, or an entry ID.",null)},wN=h2;var m2={tagName:"user:cant",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:kd,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:t=>F("user:cant Tag","The `user:cant` tag is used to check if the currently authenticated user does not have a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user does not have the specified permissions.","https://statamic.dev/tags/user-can#cant")},Qd=m2;var g2={tagName:"query",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,parameters:[{name:"builder",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The query to evaluate",expectsTypes:["string"],isRequired:!0,isDynamic:!1}]},kN=g2;var Uo=Y(ot(),1);var Rn=[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"src",description:"The relative path to the file.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"cache_bust",description:"Whether to output the last modified date.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"version",description:"Whether to check a versioning manifest to produce the final URL.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"absolute",description:"Generate absolute URLs or not.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"locale",description:"The locale the path should be generated in.",expectsTypes:["string"],isDynamic:!1}];var _2=[{label:"asset",kind:Uo.CompletionItemKind.Text},{label:"css",kind:Uo.CompletionItemKind.Text},{label:"img",kind:Uo.CompletionItemKind.Text},{label:"js",kind:Uo.CompletionItemKind.Text},{label:"output",kind:Uo.CompletionItemKind.Text},{label:"path",kind:Uo.CompletionItemKind.Text}],y2={tagName:"theme",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,introducedIn:null,injectParentScope:!1,parameters:Rn,resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="theme"||t.leftWord=="/theme")&&t.leftChar==":"?z(_2):ue},DN=y2;var Kg={tagName:"theme:path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:Rn,resolveDocumentation:t=>F("theme:path Tag","The `theme:path` tag may be used to generate URLs for public assets. This tag may also optionally add the current locale, generate relative URLs, or add cache busting URL parameters to the end of the generated URL.",null)},FN=it(Kg,"theme:asset");var T2={tagName:"theme:css",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...Rn,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:t=>F("theme:css Tag","The `theme:css` tag may be used to generate a CSS path relative to a public `css/` directory for any arbitrary file path. This tag may also optionally create the HTML `link` tag.",null)},LN=T2;var b2={tagName:"theme:img",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...Rn,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]},{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"alt",description:"The alt text to use when generating the HTML tag",expectsTypes:["string"]}],resolveDocumentation:t=>F("theme:img Tag","The `theme:img` tag may be used to generate an image path relative to a public `img/` directory for any arbitrary file path. This tag may also optionally create the HTML `img` tag.",null)},ON=b2;var I2={tagName:"theme:js",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...Rn,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:t=>F("theme:js Tag","The `theme:js` tag may be used to generate a JavaScript path relative to a public `js/` directory for any arbitrary file path. This tag may also optionally create the HTML `script` tag.",null)},MN=I2;var v2={tagName:"theme:output",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"src",description:"The path to the file",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"as",description:"An optional alias for the contents variable",expectsTypes:["string"],isDynamic:!1}],augmentScope:(t,e)=>{if(t.isClosedBy!=null){let i=t.findParameter("as");i!=null?e.addVariable({name:i.value,dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:t}):e.addVariable({name:"output_contents",dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:t})}return e},resolveDocumentation:t=>F("theme:output Tag","The `theme:output` tag may be used to output the contents of any arbitrary file, relative to the site's `resources/` directory.",null)},qN=v2;var N2={tagName:"scope",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>be("scope Tag","The `scope` tag creates a copy of all available variables, and saves them to a new  *array* variable defined by the tag's method part.",`{{ scope:scope_name }}
    {{ scope_name:title }}
{{ /scope:scope_name }}
`,null)},BN=N2;var S2={tagName:"if",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:qe,resolveDocumentation:t=>F("if Conditional Control Structure","The contents of the `if` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},VN=S2;var P2={tagName:"elseif",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:qe,resolveDocumentation:t=>F("elseif Conditional Control Structure","The contents of the `elseif` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},UN=P2;var A2={tagName:"else",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:t=>F("else Conditional Control Structure","The contents of the `else` control structure will be evaluated when all previous conditional branch conditions were not met.","https://statamic.dev/antlers#conditions")},jN=A2;var GN=Y(ot(),1);var E2={tagName:"session:has",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:"3.1.28",resolveDynamicParameter:qe,resolveDocumentation:t=>F("session:has Tag","The `session:has` tag can be used to determine of the user's session contains a specific variable.","https://statamic.dev/tags/session-has")},Xd=E2;var C2=[ae(Fd),ae(Md),ae(Ld),ae(Od),ae(Xd),ae(Dd)],R2={tagName:"session",requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",description:"An optional alias for the session data",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveCompletionItems:t=>{if(t.isPastTagPart==!1&&(t.leftWord=="session"||t.leftWord=="/session")&&t.leftChar==":"){let e=Vo.instance?.getKnownSessionVariableNames()??[],i=[];i=i.concat(C2);for(let r=0;r<e.length;r++)i.push({label:e[r],kind:GN.CompletionItemKind.Variable});return z(i)}return ue},augmentScope:(t,e)=>{let i=t.findParameter("as"),r=Vo.instance?.getKnownSessionVariableNames()??[],n=[];for(let s=0;s<r.length;s++)n.push({dataType:"*",name:r[s],sourceField:null,sourceName:"project.session",introducedBy:t});return i==null?e.addVariables(n):e.addVariableArray(i.value,n),e}},HN=R2;var Lu={tagName:"user:forgot_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:qe,augmentScope:(t,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t}]),e),resolveDocumentation:t=>F("user:forgot_password_form Tag",'The `user:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form")},$g=it(Lu,"member:forgot_password_form");$g.resolveDocumentation=t=>F("member:forgot_password_form Tag",'The `member:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form");function Ks(t){return[{name:"handle",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"display",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"type",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"field",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"error",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"instructions",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"old",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t}]}function Pl(t){return[{name:"success",dataType:"string",sourceField:null,sourceName:"*internal.forms",introducedBy:t},{name:"submission_created",dataType:"boolean",sourceField:null,sourceName:"*internal.forms",introducedBy:t}]}function x2(t){return[{name:"current_password",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:t},{name:"password",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:t},{name:"password_confirmation",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:t}]}var w2={tagName:"user:password_form",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!0,parameters:[{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],introducedIn:"3.3.61",allowsArbitraryParameters:!0,augmentScope:(t,e)=>{e.addVariables(Pl(t)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:t}),e.addVariableArray("fields",Ks(t));let i=x2(t);return e.addVariableArray("old",i),e.addVariableArray("error",i),e}},Jd=w2;var Ou={tagName:"user:reset_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:qe,augmentScope:(t,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t}]),e),resolveDocumentation:t=>F("user:reset_password_form Tag","The `user:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form")},zg=it(Ou,"member:reset_password_form");zg.resolveDocumentation=t=>F("member:reset_password_form Tag","The `member:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form");function Qg(t,e){return{sourceName:e.blueprintName,dataType:e.type,name:e.name,sourceField:e,introducedBy:t}}function WN(t){let e=new Map;for(let i=0;i<t.length;i++)e.set(t[i].name,t[i]);return e}function $s(t,e){let i=[];for(let r=0;r<e.length;r++){let n=e[r];i.push({sourceName:n.blueprintName,dataType:n.type,name:n.name,sourceField:n,introducedBy:t})}return i}var k2={tagName:"user:profile_form",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!0,parameters:[{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],introducedIn:"3.3.61",allowsArbitraryParameters:!0,augmentScope:(t,e)=>{e.addVariables(Pl(t)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:t}),e.addVariableArray("fields",Ks(t));let i=e.statamicProject.getUserFields(),r=$s(t,i);return e.addVariableArray("old",r),e.addVariableArray("error",r),e}},Zd=k2;var Mu={tagName:"user:register_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after registering",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed registration attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:qe,augmentScope:(t,e)=>{e.addVariableArray("fields",Ks(t)),e.addVariable({name:"errors",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"old",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"error",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"success",dataType:"string",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t});let i=e.statamicProject.getUserFields();if(i.length>0){let r=$s(t,i);e.addVariableArray("old",r),e.addVariableArray("error",r)}return e},resolveDocumentation:t=>F("user:register_form  Form Tag","The `user:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form")},Xg=it(Mu,"member:register_form");Xg.resolveDocumentation=t=>F("member:register_form Tag","The `member:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form");var D2=[ae(vl),ae(Il),ae(Nl),ae(Sl),ae(hl),ae(Qd),ae(Lu),ae(ml),ae(gl),ae(Mu),ae(Ou),ae(Zd),ae(Jd)],F2={tagName:"user",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:zd,introducedIn:null,resovleParameterCompletionItems:(t,e)=>e.isPastTagPart==!1&&e.currentNode!=null&&e.currentNode.methodIsEmptyOrMatches("profile")&&t.name=="field"?z(dd(e.project.getUserFields())):ue,augmentScope:(t,e)=>(t.methodIsEmptyOrMatches("profile")&&e.injectUserFields(t),e),resolveCompletionItems:t=>(t.leftWord=="user"||t.leftWord=="/user"||t.leftWord=="member"||t.leftWord=="/member")&&t.leftChar==":"?z(D2):ue,resolveDocumentation:t=>F("user Tag","The `user` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter.",null)},ep=F2;var tp=it(ep,"member"),Jg=it(vl,"member:is"),Zg=it(Nl,"member:isnt"),e_=it(Sl,"member:profile"),t_=it(hl,"member:can"),i_=it(ml,"member:logout"),r_=it(gl,"member:logout_url"),n_=it($d,"member:in"),s_=it(Il,"member:not_in");tp.hideFromCompletions=!0;tp.resolveDocumentation=t=>F("member Tag","The `member` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);Jg.resolveDocumentation=t=>F("member:is Tag","The `member:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is");Zg.resolveDocumentation=t=>F("member:isnt Tag","The `member:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt");e_.resolveDocumentation=t=>F("member:profile Tag","The `member:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);t_.resolveDocumentation=t=>F("member:can Tag","The `member:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can");i_.resolveDocumentation=t=>F("member:logout Tag","The `member:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout");r_.resolveDocumentation=t=>be("member:logout_url","The `member:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ member:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url");n_.resolveDocumentation=t=>F("member:in Tag","The `member:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in");s_.resolveDocumentation=t=>F("member:not_in Tag","The `member:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in");function zs(t){return[{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:t},{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:t}]}var $N=Y(ot(),1);var a_=["from","taxonomy","is","use","folder"],l_=["not_from","not_in","dont_use","not_taxonomy"];var o_=a_;o_=o_.concat(l_);function YN(t,e){if(e.nodesInScope.length>0){let i=e.nodesInScope[e.nodesInScope.length-1];if(i!=null&&i.currentScope!=null){let r=Al(i,e.project),n=e.project.getTaxonomyBlueprintFields(r),s=n.map(a=>a.name),o=is(e.leftWord);if(s.includes(o))return z(qs(e))}}return t.name=="collection"&&e.context?.parameterContext!=null?z(rl(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):t.name=="filter"||t.name=="query_scope"?z(hd(e.project)):o_.includes(t.name)&&e.context?.parameterContext!=null?z(KN(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null}function Al(t,e){let i=[];if(t.hasMethodPart())return i.push(t.getMethodNameValue()),i;let r=t.findAnyParameter(a_),n=t.findAnyParameter(l_),s=[],o=[];return typeof r<"u"&&r!==null&&(r.value.trim()==="*"?(s=e.getUniqueTaxonomyNames(),typeof n<"u"&&n!==null&&n.isVariableReference==!1&&n.hasInterpolations()==!1&&(o=n.getArrayValue())):r.isVariableReference==!1&&r.hasInterpolations()==!1&&(s=r.getArrayValue())),o.length>0?i=s.filter(function(a){return o.includes(a)==!1}):i=s,i}function KN(t,e){let i=[],r=e.getUniqueTaxonomyNames().filter(n=>!t.includes(n));for(let n=0;n<r.length;n++)i.push({label:r[n],kind:$N.CompletionItemKind.Variable});return i}function zN(t,e){let i=Al(t,e.statamicProject),r=e.statamicProject.getTaxonomyBlueprintFields(i),n=t.findParameter("collection");if(e.addBlueprintFields(t,r),e.addVariables([{name:"first",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"last",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"index",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"total_results",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"entries_count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t}]),e.addVariables(zs(t)),typeof n<"u"&&n!==null){let s=n.getArrayValue();if(s.length>0){let o=e.statamicProject.getBlueprintFields(s);e.introduceScopedAliasScope(t,"entries","entries",o).addVariables(Vs(t))}else e.addVariableArray("entries",zs(t).concat(Vs(t)))}else e.addVariableArray("entries",zs(t).concat(Vs(t)));return e}var L2=[{name:"from",description:"The taxonomy to use.",aliases:["taxonomy","is","use","folder"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"not_from",description:"Taxonomies to exclude.",aliases:["not_in","not_folder","dont_use","not_taxonomy"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string","array"],isRequired:!1,isDynamic:!1},{name:"min_count",description:"The minimum number of entries a taxonomy term must have to be returned.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"collection",description:"Filter the terms to those that appear in the specified collections.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"sort",description:"The field to sort the terms by.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope.",expectsTypes:["string"],isDynamic:!1}],QN=L2;var u_=Y(ot(),1);function XN(t){let e=[];if(t.currentNode!=null&&t.currentNode.currentScope!=null){let i=Al(t.currentNode,t.project),r=t.project.getTaxonomyBlueprintFields(i),n=r.map(o=>o.name),s=is(t.leftWord);if(n.includes(s))return z(qs(t));if(t.isCaretInTag&&!t.context?.interpolatedContext&&["taxonomy","/taxonomy"].includes(t.leftWord)==!1){let o=[];for(let a=0;a<r.length;a++){let l=r[a];o.includes(l.name)==!1&&(e.push({label:l.name,detail:l.blueprintName,documentation:l.instructionText??"",kind:u_.CompletionItemKind.Field}),o.push(l.name))}if(e.length>0)return Ii(e)}}if((t.leftWord=="taxonomy"||t.leftWord=="/taxonomy")&&t.leftChar==":"){let i=t.project.getUniqueTaxonomyNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:u_.CompletionItemKind.Field});return Ii(e)}return ue}var O2={tagName:"taxonomy",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:QN,resolveDynamicParameter:qe,resolveCompletionItems:XN,resovleParameterCompletionItems:YN,augmentScope:zN,resolveDocumentation:t=>F("taxonomy Tag","The `taxonomy` tag may be used to retrieve taxonomy entries. The taxonomy tag can also be used to access entries associated with any given taxonomy term.","https://statamic.dev/tags/taxonomy")},JN=O2;var c_=Y(ot(),1);function ZN(t,e){e.addVariables([{name:"is_published",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_page",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"has_entries",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_parent",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_external",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"depth",dataType:"number",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"children",dataType:"array",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:t}]);let i=e.statamicProject.getUniqueCollectionNames(),r=[],n=!1;if(t.hasMethodPart()){let s=t.getMethodNameValue().trim().toLowerCase();if(s.startsWith("collection:")){let o=s.split(":").pop();n=!0,r.push(o)}else s=="pages"?(n=!0,r.push("pages")):(n=!1,r.push(s))}else{let s=t.findParameter("handle");s!=null&&(i.includes(s.value)?n=!0:n=!1,r.push(s.value))}if(n){let s=e.statamicProject.getBlueprintFields(r);e.addBlueprintFields(t,s),e.expandScopedAliasScope(t,"page","page",s)}else{let s=pd(zs(t));e.addBlueprintFields(t,s),e.expandScopedAliasScope(t,"page","page",s)}return e}var M2={tagName:"nav:breadcrumbs",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:[{name:"include_home",description:"Whether to include the home page in the first level",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"reverse",description:"Whether to reverse the order of links",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"trim",description:"Whether to trim the whitespace after each iteration of the loop",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],augmentScope:(t,e)=>(e.addVariables([{name:"is_current",dataType:"boolean",sourceName:"*internal.nav.breadcrumbs",sourceField:null,introducedBy:t}]),e.addVariables(zs(t)),e),resolveDocumentation:t=>F("nav:breadcrumbs Tag","The `nav:breadcrumbs` tag can be used to retrieve the URLs of all pages that make up the current URL back to the site's home page.","https://statamic.dev/tags/nav-breadcrumbs")},ip=M2;function eS(t,e){if(t.name=="handle"){let i=e.project.getUniqueCollectionNames(),r=e.project.getUniqueNavigationMenuNames(),n=[];return n=i,n=n.concat(r),n=[...new Set(n)],gt(n)}return null}var q2=[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["handle"],allowsVariableReference:!1,name:"for",description:"The navigation or collection to use.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],name:"from",description:"The starting point for the navigation.",allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"show_unpublished",description:"Whether to include unpublished content.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"include_home",description:"Whether to include the home page in the tree.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"max_depth",description:"The maximum depth of the navigation or structure.",expectsTypes:["number"],isDynamic:!1}],tS=q2;var f_={tagName:"structure",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,injectParentScope:!1,parameters:tS,augmentScope:ZN,resovleParameterCompletionItems:eS,resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="nav"||t.leftWord=="/nav"||t.leftWord=="structure"||t.leftWord=="/structure")&&t.leftChar==":"){let i=t.project.getUniqueNavigationMenuNames();for(let r=0;r<i.length;r++)e.push(Os(i[r],"",""));return(t.leftWord=="nav"||t.leftWord=="/nav")&&e.push(ae(ip)),e.push(Os("collection","","")),e.push({label:"collection",kind:c_.CompletionItemKind.Text}),Ii(e)}if((t.leftWord=="nav:collection"||t.leftWord=="/nav:collection"||t.leftWord=="collection"||t.leftWord=="/collection"||t.leftWord=="structure:collection"||t.leftWord=="/structure:collection")&&t.leftChar==":"){let i=t.project.getUniqueCollectionNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:c_.CompletionItemKind.Field});return Ii(e)}return ue},resolveDocumentation:t=>F("nav Tag","The `nav` tag can be used to iterate structured collections or navigation menus.","https://statamic.dev/tags/nav")},iS=it(f_,"nav");var nS=Y(ot(),1);var B2={name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},xn=B2;var d_=Y(ot(),1),V2=[{label:"GET",kind:d_.CompletionItemKind.EnumMember},{label:"POST",kind:d_.CompletionItemKind.EnumMember}],rS=V2;var gn=["in","handle","is","form","formset"];function El(t,e){return gn.includes(t.name)?gt(e.project.getUniqueFormNames()):t.name=="method"?z(rS):t.name=="files"?z(ol):null}function wn(t,e){let i=t.structure.findParentWithName("form:set");return i!=null?{context:i,issues:[]}:{context:null,issues:[]}}var U2=["set","create","errors","success","submissions","submission"];function jo(t){if(t.reference!=null&&"tagPart"in t.reference){let r=t.reference;if(r.nameMatches("form:set"))return jo(r)}let e=t.findAnyParameter(gn),i=t.getMethodNameValue();return i!=null&&U2.includes(i)==!1?i:typeof e<"u"&&e!==null&&e.containsSimpleValue()?e.value:""}var j2={tagName:"form:create",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[xn,{name:"method",description:"The HTTP method to use",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"files",description:"Indicates if the form sends file data",aliases:[],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveSpecialType:wn,resovleParameterCompletionItems:El,resolveDynamicParameter:qe,augmentScope:(t,e)=>{e.addVariables(Pl(t)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:t}),e.addVariableArray("fields",Ks(t));let i=jo(t);if(i.length>0){let r=e.statamicProject.getFormBlueprintFields(i),n=$s(t,r);e.addVariableArray("old",n),e.addVariableArray("error",n)}return e},resolveDocumentation:t=>F("form:create Tag","The `form:create` tag can be used to access form data, generate field HTML markup, and handle form validation errors.","https://statamic.dev/tags/form-create")},rp=j2;var G2={tagName:"form:errors",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[xn],resolveSpecialType:wn,resovleParameterCompletionItems:(t,e)=>gn.includes(t.name)?gt(e.project.getUniqueFormNames()):null,resolveDocumentation:t=>F("form:errors Tag","The `form:errors` tag can be used to retrieve validation errors after a user has submitted a form.","https://statamic.dev/tags/form-errors")},np=G2;var H2={tagName:"form:set",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!0}],resovleParameterCompletionItems:El,resolveDocumentation:t=>F("form:set Tag","The `form:set` tag can be used to set the form handle on all nested form tags.","https://statamic.dev/tags/form-set")},sp=H2;var W2={tagName:"form:submission",requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[xn],resolveSpecialType:wn,resovleParameterCompletionItems:(t,e)=>gn.includes(t.name)?gt(e.project.getUniqueFormNames()):null,augmentScope:(t,e)=>{let i=jo(t);if(i.length>0){let r=e.statamicProject.getFormBlueprintFields(i);e.addBlueprintFields(t,r)}return e},resolveDocumentation:t=>F("form:submission Tag","The `form:submission` tag can be used to access the form submission submitted by the current user.","https://statamic.dev/tags/form-submission")},op=W2;var Y2={tagName:"form:submissions",allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[xn],resolveSpecialType:wn,resovleParameterCompletionItems:(t,e)=>gn.includes(t.name)?gt(e.project.getUniqueFormNames()):null,augmentScope:(t,e)=>{if(t.isClosingTag)return e;let i=jo(t);if(i.length>0){let r=e.statamicProject.getFormBlueprintFields(i);e.addBlueprintFields(t,r)}return e.addVariable({name:"date",dataType:"date",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e.addVariable({name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e.addVariable({name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e},resolveDocumentation:t=>F("form:submissions Tag","The `form:submissions` tag can be used to fetch previously saved submissions for a form.","https://statamic.dev/tags/form-submissions")},ap=Y2;var K2={tagName:"form:success",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[xn],resolveSpecialType:wn,resovleParameterCompletionItems:(t,e)=>gn.includes(t.name)?gt(e.project.getUniqueFormNames()):null,resolveDocumentation:t=>F("form:success Tag","The `form:success` tag can be used to check if a form submission was successful or not.","https://statamic.dev/tags/form-success")},lp=K2;var $2=[ae(sp),ae(rp),ae(np),ae(lp),ae(ap),ae(op)],z2={tagName:"form",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resovleParameterCompletionItems:El,resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="form"||t.leftWord=="/form")&&t.leftChar==":"){let i=t.project.getUniqueFormNames();e=e.concat($2);for(let r=0;r<i.length;r++)e.push({label:i[r],kind:nS.CompletionItemKind.Field});return Ii(e)}return ue}},sS=z2;var p_={tagName:"search:results",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"index",description:"The index to search in.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"query",description:"The query string parameter to use.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"limit",description:"The maximum number of search results to return.",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{name:"offset",description:"The number of results to skip.",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether or not to paginate entry results.",expectsTypes:["boolean"],isRequired:!1,name:"paginate",isDynamic:!1},{name:"as",description:"Specifies an alias for search results.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"supplement_data",description:"Controls whether non-indexed fields are returned.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:(t,e)=>t.name=="index"?gt(e.project.getSearchIndexes()):null,augmentScope:(t,e)=>{e.addVariables([{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t}]);let i=t.findParameter("as");return i!=null&&i.value.trim().length>0?e.addVariableArray(i.value,oS(t)):e.addVariables(oS(t)),e},resolveDocumentation:t=>F("search:results Tag","The `search:results` tag provides access to all data that was returned as a result of a user's search.","https://statamic.dev/tags/search")},Q2=[ae(p_)];function oS(t){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"content",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"is_term",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"count",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"index",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"search_score",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"_highlightResult",dataType:"array",sourceField:null,sourceName:"*internal.search.results",introducedBy:t}]}var aS={tagName:"search",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="search"||t.leftWord=="/search")&&t.leftChar==":"?Ii(Q2):ue};function h_(t){return[{name:"email",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t},{name:"password",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t}]}var m_={tagName:"user:login_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after logging in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed login attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:qe,augmentScope:(t,e)=>(e.addVariables([{name:"errors",dataType:"array",sourceName:"*internal.user.login",sourceField:null,introducedBy:t},{name:"success",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t}]),e.addVariables(h_(t)),e.addVariableArray("old",h_(t)),e.addVariableArray("error",h_(t)),e),resolveDocumentation:t=>F("user:login_form Tag","The `user:login_form` tag can be used to quickly create a form that users can use to authenticate with the site.","https://statamic.dev/tags/user-login_form")},lS=it(m_,"member:login_form");var X2={tagName:"noparse",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>F("noparse Tag","The `noparse` tag is used prevent blocks of Antlers code from being parsed, removing the need to escape individual Antlers code regions.","https://statamic.dev/antlers#the-noparse-tag")},uS=X2;var J2={tagName:"unless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:qe,resolveDocumentation:t=>F("unless Conditional Control Structure","The `unless` control structure operates the same as an `if` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},cS=J2;var Z2={tagName:"elseunless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:qe,resolveDocumentation:t=>F("elseunless Conditional Control Structure","The `elseunless` control structure operates the same as an `elseif` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},fS=Z2;var dS=Y($t(),1);var pS={tagName:"installed",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!0,introducedIn:"3.1.19",parameters:[],resolveCompletionItems:t=>{if(t.project!=null){let e=t.project.getComposerPackages(),i=[];return e.forEach((r,n)=>{i.push({label:r.name,kind:dS.CompletionItemKind.Text})}),z(i)}return ue},resolveDocumentation:t=>be("installed Tag","The `installed` tag is used to check if the site has a specific Composer package available.",`{{ if {installed:composer/package-name} }}
    {{# Package is availabl.e #}}
{{ else }}
    {{# Something else. #}}
{{ /if }}`,"https://statamic.dev/tags/installed")};var eG={tagName:"relate",hideFromCompletions:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[]},hS=eG;var Cl=[{name:"bag",description:"The error message bag to retrieve errors from.",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}];var tG={tagName:"get_errors",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Cl,introducedIn:"3.2.23",augmentScope:(t,e)=>{if(t.isClosingTag)return e;if(t.name?.methodPart==null){let i=e.copy();i.addVariable({dataType:"string",introducedBy:t,name:"field",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"field",refFieldSetField:null,sets:null,type:"string"}});let r=i.copy();r.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),i.addScopeList("messages",r),e.addScopeList("fields",i)}else{let i=e.copy();i.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",i)}return e},resolveDocumentation:t=>F("get_errors Tag","The `get_errors` tag can be used to retrieve form validation errors.","https://statamic.dev/tags/get_errors")},mS=tG;var iG={tagName:"get_errors:all",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Cl,introducedIn:null,augmentScope:(t,e)=>{if(t.isClosingTag)return e;let i=e.copy();return i.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors.all",sourceField:{blueprintName:"*internal.tag.get_errors.all",displayName:"get_errors:all",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",i),e},resolveDocumentation:t=>F("get_errors:all Tag","The `get_errors:all` tag can be used to retrieve all form validation errors.","https://statamic.dev/tags/get_errors#list-all-validation-errors")},gS=iG;var rG={tagName:"get_error",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Cl,introducedIn:null,augmentScope:(t,e)=>(t.isClosingTag||e.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_error",sourceField:{blueprintName:"*internal.tag.get_error",displayName:"get_error",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e),resolveDocumentation:t=>F("get_error Tag","The `get_error` tag can be used to retrieve the first error message for a specific field.","https://statamic.dev/tags/get_errors#get-the-first-error-for-a-specific-field")},_S=rG;var nG={tagName:"set",hideFromCompletions:!0,allowsArbitraryParameters:!0,requiresClose:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[]},yS=nG;var TS=Y($t(),1);var sG={tagName:"mount_url",hideFromCompletions:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:"3.3.15",parameters:[{isRequired:!1,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The collection handle.",name:"handle",isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>F("mount Tag","The `mount` tag can be used to retrieve the mount URL for a given collection.",null),resovleParameterCompletionItems:(t,e)=>t.name=="handle"&&e.context?.parameterContext!=null?z(rl(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="mount_url"||t.leftWord=="/mount_url")&&t.leftChar==":"){let i=t.project.getCollectionNames();for(let r=0;r<i.length;r++)e.push({label:i[r],kind:TS.CompletionItemKind.Field,sortText:"0"})}return{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}},bS=sG;var oG={tagName:"vite:asset",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:"3.4.4",parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"src",description:"The asset's path",expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:t=>be("vite Tag","Generates Vite asset URL for the provided resource.",'<img src="{{ vite:asset src="resources/images/logo.svg" /}}" />',null)},up=oG;var aG=[ae(up)],lG={tagName:"vite",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"src",description:"The entry point",expectsTypes:["string"],isDynamic:!1}],resolveCompletionItems:t=>(t.leftWord=="vite"||t.leftWord=="/vite")&&t.leftChar==":"?z(aG):ue,resolveDocumentation:t=>be("vite Tag","Generates Vite tags for an entrypoint.",'{{ vite src="entry/point" }}',null)},IS=lG;var uG={tagName:"nocache",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>be("nocache Tag","The `nocache` tag is used to mark regions of a template. These regions will continue to update even when using caching strategies such as the full or half-measure cache.",`{{ nocache }} 
    <!-- This content will remain dynamic. -->
{{ /nocache }}`,"https://statamic.dev/tags/nocache")},vS=uG;function cp(t){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t},{name:"handle",dataType:"string",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t}]}var cG={tagName:"user_roles",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of role handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(t,e)=>(t.isClosingTag||e.addVariables(cp(t)),e),resolveDocumentation:t=>F("user_roles Tag","The `user_roles` tag can be used to return information about a site's user roles.",null)},NS=cG;var fG={tagName:"user_groups",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of group handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(t,e)=>(t.isClosingTag||e.addVariables(cp(t)),e),resolveDocumentation:t=>F("user_groups Tag","The `user_groups` tag can be used to return information about a site's user groups.",null)},SS=fG;var dG={tagName:"cookie:forget",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"keys",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The keys to forget",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},fp=dG;var pG={tagName:"cookie:has",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to check for existence",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},dp=pG;var hG={tagName:"cookie:set",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"minutes",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The lifetime of the cookie, in minutes",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},pp=hG;var mG={tagName:"cookie:value",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to retrieve the value for",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},hp=mG;var gG=[ae(fp),ae(hp),ae(pp),ae(dp)],_G={tagName:"cookie",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[],resolveCompletionItems:t=>(t.leftWord=="cookie"||t.leftWord=="/cookie")&&t.leftChar==":"?z(gG):ue},PS=_G;var AS=[VN,UN,jN,cS,fS,lN,fN,kv,Ad,Bo,Ed,Pd,Sd,PS,fp,dp,pp,hp,hS,sS,rp,op,ap,sp,lp,np,yS,mS,_S,gS,aS,p_,Bv,Cd,Rd,Lv,AN,Fv,xN,RN,Dv,dN,hN,_N,Hd,Wd,Ov,Mv,qv,yN,TN,Vv,xd,IN,Kd,vN,bS,iS,f_,ip,jv,Uv,$d,PN,Il,vl,EN,pS,NS,SS,ep,Nl,hl,Qd,ml,gl,Sl,m_,Ou,Lu,Zd,Jd,Mu,tp,Jg,Zg,e_,t_,i_,r_,n_,s_,lS,zg,$g,Xg,uS,vS,Wv,Yv,Kv,nN,sN,wN,tN,Zv,BN,rN,HN,Md,Od,Ld,Fd,Xd,Dd,aN,JN,DN,Kg,FN,LN,ON,MN,qN,jd,oN,Gg,kN,Qv,qd,CN,IS,up];var ns=class{constructor(){this.tags=new Map;this.parameters=new Map}reset(){this.tags.clear(),this.parameters.clear(),this.loadCoreTags()}getVisibleTagsWithDocumentation(){let e=[];return this.tags.forEach((i,r)=>{if(i.hideFromCompletions==!1){let n="";i.resolveDocumentation!=null&&(n=i.resolveDocumentation()),e.push({label:r,documentation:n})}}),ee.instance?.getStructure()?.getCustomAntlersTags().forEach(i=>{e.push({label:i.tagName,documentation:""})}),e}getCustomTagMethodsForTag(e){let i=[],r=e.length+1;return ee.instance?.getStructure()?.getCustomAntlersTags().forEach(n=>{if(n.tagName.startsWith(`${e}:`)){let s=n.tagName.substr(r).trim();s.length>0&&i.push(s)}}),i}getVisibleTagNames(){let e=[];return this.tags.forEach((i,r)=>{i.hideFromCompletions==!1&&e.push(r)}),ee.instance?.getStructure()?.getCustomAntlersTags().forEach(i=>{e.push(i.tagName)}),[...new Set(e)]}getPossibleTagMethods(e){let i=[],r=e.length+1;return this.tags.forEach((n,s)=>{if(s.startsWith(e)){let o=s.substr(r).trim();o.length>0&&i.push(o)}}),ee.instance?.getStructure()?.getCustomAntlersTags().forEach(n=>{if(n.tagName.startsWith(`${e}:`)){let s=e.substr(r).trim();s.length>0&&i.push(s)}}),[...new Set(i)]}getTagNames(){let e=[];return this.tags.forEach((i,r)=>{e.push(r)}),ee.instance?.getStructure()?.getCustomAntlersTags().forEach(i=>{e.push(i.tagName)}),[...new Set(e)]}loadCoreTags(){this.registerTags(AS)}cleanTagName(e){return Rr(e,"/")}findTag(e){return this.tags.get(this.resolveTagName(e))}findCustomTag(e){let i=ee.instance?.getStructure()?.getCustomAntlersTags()??[];for(let r=0;r<i.length;r++)if(i[r].tagName==e)return i[r]}isKnownTag(e){return this.tags.has(this.resolveTagName(e))||this.isCustomTag(e)}isSymbolKnownTag(e){return this.isKnownTag(e.runtimeName())}resolveTagName(e){return e=this.cleanTagName(e.trim()),this.tags.has(e)||e.includes(":")&&(e=e.split(":")[0]),e}canResolveSpecialTypes(e){e=this.resolveTagName(e);let i=this.tags.get(e);return!(typeof i>"u"||i==null||i.resolveSpecialType==null)}resolveSpecialType(e,i,r){e=this.resolveTagName(e);let n=this.findTag(e);if(n.resolveSpecialType==null)throw new Error(e+" does not support special types.");return n.resolveSpecialType(i,r)}isCustomTag(e){let i=ee.instance?.getStructure()?.getCustomAntlersTags()??[];for(var r=0;r<i.length;r++)if(i[r].tagName==e)return!0;return!1}getCompletionItems(e){let i=null,r=[],n=!0;if(e.context!=null&&e.context.node!=null&&(e.currentNode=e.context.node),e.nodesInScope.length>0&&(i=e.nodesInScope[e.nodesInScope.length-1]),e.currentNode!=null&&(this.isKnownTag(e.currentNode.runtimeName())||this.isCustomTag(e.currentNode.getTagName()))){let s=this.findTag(e.currentNode.runtimeName());if(typeof s>"u"&&(s=this.findCustomTag(e.currentNode.getTagName()),typeof s>"u"))return{isExclusive:!1,items:[]};let o=[];if(s.resolveCompletionItems!=null){let a=s.resolveCompletionItems(e),l=this.getCustomTagMethodsForTag(s.tagName);if(l.length>0&&l.forEach(u=>{a.items.push({label:u,kind:g_.CompletionItemKind.Text,insertText:u})}),a.isExclusiveResult)return{isExclusive:!0,items:a.items};n=a.analyzeDefaults,r=r.concat(a.items)}if(e.isPastTagPart==!1){let a=this.getPossibleTagMethods(s.tagName);for(let l=0;l<a.length;l++)r.push({label:a[l],kind:g_.CompletionItemKind.Text})}if(n){if(e.isCaretInTag==!0&&s.parameters.length>0&&(r=r.concat(Lg(e,s.parameters)),s.tagName=="partial"&&i?.hasMethodPart())){let a=i.getMethodNameValue();if(a.trim().length>0&&ee.instance?.hasStructure()){let l=ee.instance.getStructure().findPartial(a);l!=null&&l.injectsParameters.length>0&&(r=r.concat(Lg(e,l.injectsParameters)))}}for(let a=0;a<e.nodesInScope.length;a++)if(e.nodesInScope[a].runtimeType!==null){let l=e.nodesInScope[a].runtimeType;if(l!=null&&l.assumedType=="structure_ref"&&l.supplementedFields!=null)for(let u=0;u<l.supplementedFields.length;u++)r.push(Og(l.supplementedFields[u]))}}return{items:r,isExclusive:!1}}return{items:r,isExclusive:!1}}injectParentScope(e){let i=this.findTag(e);return typeof i>"u"||i==null?!0:i.injectParentScope}resolveParameterCompletions(e,i,r){let n=this.findTag(e);return typeof n<"u"&&n!==null&&typeof n.resovleParameterCompletionItems<"u"&&n.resovleParameterCompletionItems!==null?n.resovleParameterCompletionItems(i,r):null}canResolveDynamicParameter(e){let i=this.resolveTagName(e);if(this.isKnownTag(i)){let r=this.tags.get(i);if(typeof r>"u")return!1;if(typeof r.resolveDynamicParameter<"u"&&r.resolveDynamicParameter!=null)return!0}return!1}getParameter(e,i){let r=this.resolveTagName(e);if(this.parameters.has(r)==!1)return null;let n=this.parameters.get(r);if(n==null)return null;if(n.has(i)==!1){let o=this.findTag(e);if(o!=null&&typeof o.resolveDynamicParameter<"u"&&o.resolveDynamicParameter!=null){let a=o.resolveDynamicParameter(null,i);if(a!==null)return a}return null}let s=n.get(i);return typeof s>"u"||n==null?null:s}registerTags(e){for(let i=0;i<e.length;i++)this.registerTag(e[i])}registerTag(e){if(this.tags.set(e.tagName,e),this.parameters.has(e.tagName)==!1&&this.parameters.set(e.tagName,new Map),e.parameters.length>0){let i=this.parameters.get(e.tagName);for(let r=0;r<e.parameters.length;r++){let n=e.parameters[r];i?.set(n.name,n)}}}requiresClose(e){let i=e.getTagName();if(this.tags.has(i)){let r=this.findTag(i);if(r!=null)return r.requiresCloseResolver!=null?r.requiresCloseResolver(e):r.requiresClose}return!1}};ns.instance=null;(typeof ns.instance>"u"||ns.instance==null)&&(ns.instance=new ns,ns.instance.loadCoreTags());var Ne=ns;var Gr=class{constructor(e){this.generation=0;this.id="";this.name="";this.values=new Map;this.lists=new Map;this.pristine=new Map;this.parentScope=null;this.statamicProject=e,Gr.generationCounter+=1,this.generation=Gr.generationCounter,this.id=Ya()}makeNew(){return new Gr(this.statamicProject)}ancestor(){return this.parentScope!=null?this.parentScope:this}canShiftScope(e){return!!this.pristine.has(e)}shiftScope(e,i,r){if(this.pristine.has(i)){let n=this.pristine.get(i),s=n.parentCopy.copy();return s.introduceAliasScope(e,r,n.introducedFields),s}return this}containsPath(e){if(e.includes(":")){let i=e.split(":"),r=i.shift(),n=i.join(":");if(typeof r>"u")return!1;let s=this.lists.get(r);return typeof s>"u"?!1:s.containsPath(n)}return!!this.lists.has(e)}findReference(e){if(e.includes(":")){let i=e.split(":"),r=i.pop(),n=i.join(":"),s=this.findNestedScope(n);if(s!=null)return s.findReference(r)}return this.values.has(e)?this.values.get(e):null}findReferenceWithField(e){if(e.includes(":")){let i=e.split(":"),r=i.pop(),n=i.join(":"),s=this.findNestedScope(n);if(s!=null)return s.findReference(r)}if(this.values.has(e)){let i=this.values.get(e);if(i.sourceField==null){if(i.introducedBy!=null&&i.introducedBy.currentScope!=null&&i.introducedBy.currentScope!=this)return i.introducedBy.currentScope.findReferenceWithField(i.introducedBy.getTagName());if(this.parentScope!=null&&this.parentScope!=this)return this.parentScope.findReferenceWithField(e)}return i}return null}containsReference(e){return this.findReference(e)!=null}findNestedScope(e){if(e.includes(":")){let i=e.split(":"),r=i.shift(),n=i.join(":");if(typeof r>"u")return null;let s=this.lists.get(r);return typeof s>"u"?null:s.findNestedScope(n)}return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this&&this.parentScope.hasList(e)?this.parentScope.lists.get(e):null}liftList(e){if(this.lists.has(e)){let i=this.lists.get(e);return typeof i>"u"||i===null?null:(this.lists.delete(e),i)}return null}hasPristineReference(e){return!!this.pristine.has(e)}hasListInHistory(e){return this.hasList(e)?!0:this.parentScope!=null?this.name=="*root*"?!1:this.parentScope.hasList(e):!1}hasList(e){if(this.lists.has(e)){let i=this.lists.get(e);return!(typeof i>"u"||i===null)}return!1}bringListIntoMainScope(e){if(e.includes(":")){let r=e.split(":"),n=r.shift(),s=r.join(":");if(typeof n>"u")return this;let o=this.lists.get(n);return typeof o>"u"?this:o.bringListIntoMainScope(s)}let i=this.lists.get(e);return this.lists.delete(e),this.mergeScope(i)}getListNames(){let e=[];return this.lists.forEach((i,r)=>{e.push(r)}),e}getVariableNames(){let e=[];return this.values.forEach(i=>{e.push(i.name)}),e}getList(e){return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this?this.parentScope.getList(e):null}hasValue(e){return this.values.has(e)}findAncestorWithList(e){return this.hasList(e)?this:this.parentScope!=null&&this.parentScope!=this?this.parentScope.findAncestorWithList(e):null}findReferenceNotIntroducedBy(e,i){if(this.hasValue(e)){let r=this.values.get(e);if(r.introducedBy!=null&&r.introducedBy!=i)return r}return this.parentScope!=null&&this.parentScope!=this?this.parentScope.findReferenceNotIntroducedBy(e,i):null}removeThroughIntroduction(e,i){if(this.values.delete(e),this.parentScope!=null){let r=this.findReferenceNotIntroducedBy(e,i);r!=null&&this.addVariable(r)}}wasIntroducedBySymbol(e,i){if(this.values.has(e)==!1)return!1;let r=this.values.get(e);return r.introducedBy!=null?r.introducedBy==i:!1}referencesArray(e){return this.values.has(e)==!1?!1:this.values.get(e).dataType=="array"}addScopeList(e,i){return this.lists.set(e,i),this}mergeAndList(e,i){let r=new Gr(this.statamicProject);return r.values=WN(i),this.lists.set(e,r),this.mergeVariableScope(i),this}mergeScope(e){return e==this||e==null?this:(typeof e.values<"u"&&e.values!==null&&e.values.forEach((i,r)=>{this.values.set(r,i)}),typeof e.lists<"u"&&e.lists!==null&&e.lists.forEach((i,r)=>{this.lists.set(r,i)}),this)}mergeVariableScope(e){for(let i=0;i<e.length;i++)this.values.set(e[i].name,e[i]);return this}addVariable(e){this.values.set(e.name,e)}addVariables(e){for(let i=0;i<e.length;i++)this.addVariable(e[i])}addVariableArray(e,i){this.values.has(e)&&this.values.delete(e);let r=new Gr(this.statamicProject);r.addVariables(i),this.addScopeList(e,r)}injectAssetContainer(e,i){this.addBlueprintFields(e,this.statamicProject.getAssetBlueprintFields(i))}injectUserFields(e){this.addBlueprintFields(e,this.statamicProject.getUserFields())}addBlueprintField(e,i){this.addVariable({dataType:i.type,name:i.name,sourceField:i,sourceName:i.blueprintName,introducedBy:e})}introduceScopedAliasScope(e,i,r,n){this.pristine.set(r,{introducedFields:n,introducedScope:r,parentCopy:this.copy()});let s=new Gr(this.statamicProject),o=new Gr(this.statamicProject);return o.addBlueprintFields(e,n),s.name=r,s.addScopeList(i,o),this.addScopeList(r,s),s}expandScopedAliasScope(e,i,r,n){this.lists.has(r)==!1?this.introduceScopedAliasScope(e,i,r,n):this.lists.get(r).addBlueprintFields(e,n)}introduceAliasScope(e,i,r){this.pristine.set(i,{introducedFields:r,introducedScope:i,parentCopy:this.copy()});let n=new Gr(this.statamicProject);n.addBlueprintFields(e,r),n.name=i,this.addScopeList(i,n)}introduceDynamicScopeList(e,i,r){this.pristine.set(i,{introducedFields:r,introducedScope:i,parentCopy:this.copy()});let n=new Gr(this.statamicProject);n.name=i,n.addBlueprintFields(e,r),this.addScopeList(i,n)}addBlueprintFields(e,i){for(let r=0;r<i.length;r++)this.addBlueprintField(e,i[r])}injectBlueprint(e,i){let r=this.statamicProject.getBlueprintDetails(i);r.length>0&&this.addBlueprintFields(e,r)}copy(){let e=new Gr(this.statamicProject);return e.pristine=new Map(this.pristine),e.values=new Map(this.values),e.lists=new Map(this.lists),e.parentScope=this,e}},zi=Gr;zi.generationCounter=0;function __(t){let e=new zi(t);return e.addVariable({dataType:"string",name:"handle",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"name",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"short_locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e}function ES(){let t=[];return t.push({dataType:"number",name:"response_code",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"csrf_field",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"csrf_token",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"environment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"xml_header",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"last_segment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_uri",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"amp_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"api_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_full_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"template_content",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_layout",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"logged_in",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"logged_out",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"is_homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"now",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"today",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"current_date",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"get",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"get_post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"old",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t}function CS(t,e){let i=t.findParameter("paginate");if(i!=null&&(i.value.toLowerCase()=="true"||parseInt(i.value).toString()==i.value)){let r=e.makeNew(),n=e.makeNew(),s=e.makeNew(),o=e.makeNew();r.addVariable({name:"next_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),r.addVariable({name:"prev_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),r.addVariable({name:"total_items",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),r.addVariable({name:"total_pages",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),r.addVariable({name:"current_page",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),r.addVariable({name:"auto_links",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),s.addVariable({name:"url",dataType:"string",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:t}),s.addVariable({name:"page",dataType:"integer",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:t}),o.addVariable({name:"first",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),o.addVariable({name:"last",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),o.addVariable({name:"slider",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),n.addScopeList("all",s),n.addScopeList("segments",o),r.addScopeList("links",n),e.addScopeList("paginate",r)}}var Qs=class{constructor(){this.fileInjections=new Map;this.project=null}updateProject(e){this.project=e}registerInjections(e,i){if(i.length==0)return;let r=[];for(let n=0;n<i.length;n++){let s=i[n];s.hasParameters&&r.push(s)}if(r.length>0){let n=r[0].getMethodNameValue();if(n!=null&&this.project!=null){let s=this.project.findPartial(n);s!=null&&(this.fileInjections.has(s.documentUri)||this.fileInjections.set(s.documentUri,new Map),this.fileInjections.get(s.documentUri).set(e,r))}}}hasAvailableInjections(e){return this.fileInjections.has(e)}getScopeInjection(e,i){let r=new zi(i);return r.name="*injection*",this.fileInjections.get(e).forEach((s,o)=>{for(let a=0;a<s.length;a++){let l=s[a];if(l.hasParameters)for(let u=0;u<l.parameters.length;u++){let c=l.parameters[u];if(c.containsSimpleValue())r.addVariable({dataType:"string",name:c.name,sourceField:null,sourceName:"scope.injection",introducedBy:l});else if(c.isVariableReference&&l.currentScope!=null&&l.currentScope.hasListInHistory(c.value)){let f=l.currentScope.findNestedScope(c.value);if(f!=null){let d=Rr(c.name,":"),h=f.copy();h.name=d,r.addScopeList(d,f)}}}}}),r}};Qs.instance=null;(typeof Qs.instance>"u"||Qs.instance==null)&&(Qs.instance=new Qs);var Go=Qs;var yG=["collection"],TG=["if","elseif","unless","elseunless"],mp=class{constructor(e,i,r){this.pageVars=[];this.viewDataVars=null;this.documentUri="";this.lastSymbolId="";this.ideHelperMap=new Map;this.statamicProject=e,this.documentUri=i,this.document=r,this.makePageScope(),this.makeViewDataScope()}makeViewDataScope(){this.document.hasFrontMatter()&&(this.viewDataVars=this.document.getFrontMatterScope())}makePageScope(){let e=[],i=this.statamicProject.getFields();if(i.has("pages")){let r=i.get("pages");for(let n=0;n<r.length;n++){let s=r[n];e.push({name:s.name,dataType:s.type,sourceField:s,sourceName:s.blueprintName,introducedBy:null})}}this.pageVars=e}analyzeScope(e){let i=new zi(this.statamicProject);i.name="*root*",i.parentScope=i,i.addScopeList("site",__(this.statamicProject)),i.addScopeList("sites",__(this.statamicProject)),i.addVariables(ES());let r=new zi(this.statamicProject);r.name="*root_user*",r.parentScope=i,this.statamicProject.getUserFields().forEach(c=>{r.addBlueprintField(null,c)}),i.addScopeList("current_user",r),an.instance?.pageScopeDisabled(this.documentUri)?this.viewDataVars!=null&&i.addScopeList("view",this.viewDataVars):this.viewDataVars!=null?i.mergeAndList("page",this.pageVars).addScopeList("view",this.viewDataVars):i.mergeAndList("page",this.pageVars);let n=null;e.length>0&&e[0].isComment&&(n=Ru(this.documentUri,e[0]));for(let c=0;c<e.length;c++)if(e[c].isComment){let f=Ru(this.documentUri,e[c]);f.variableHelper!=null&&this.ideHelperMap.set(e[c].id(),f.variableHelper)}let s=this.statamicProject.getCollectionNamesForView(this.documentUri);if(n!=null&&(n.collectionInjections.length>0&&(s=s.concat(n.collectionInjections)),n.blueprints.length>0&&(s=s.concat(n.blueprints)),n.variableHelper!=null&&n.variableHelper.variableName=="@page")){let c=this.statamicProject.getBlueprintField(n.variableHelper.collectionName,n.variableHelper.fieldHandle);if(c!=null)if(n.variableHelper.setHandle.length>0){if(c.sets!=null){for(let f=0;f<c.sets.length;f++)if(c.sets[f].handle==n.variableHelper.setHandle){i.addVariables($s(e[0],c.sets[f].fields));break}}}else i.addBlueprintField(e[0],c)}if(s.length>0){for(let c=0;c<s.length;c++)i.injectBlueprint(e[0],s[c]);i.addVariables(Vs(e[0]))}Go.instance?.hasAvailableInjections(this.documentUri)&&i.mergeScope(Go.instance?.getScopeInjection(this.documentUri,this.statamicProject));let o=[],a=[],l=[],u=[];u.push(i);for(let c=0;c<e.length;c++){let f=e[c];this.lastSymbolId.length>0&&a.includes(f.id())&&(o.pop(),u.pop(),u.length==0&&u.push(i));let d=u[u.length-1];if(f.hasParameters){for(let p=0;p<f.parameters.length;p++)if(f.parameters[p].interpolations.length>0)for(let y=0;y<f.parameters[p].interpolations.length;y++){let v=f.parameters[p].interpolations[y];f.processedInterpolationRegions.has(v)&&f.processedInterpolationRegions.get(v).forEach(I=>{I instanceof B&&(I.currentScope=d)})}}if(Ne.instance?.isKnownTag(f.getTagName())==!1){if(f.scopeVariable=d.findReference(f.runtimeName()),c>0){let p=e[c-1];if(p.isComment&&this.ideHelperMap.has(p.id())&&!p.isClosingTag&&!f.isClosingTag){let y=this.ideHelperMap.get(p.id());if(y.variableName==f.getTagName()){let v=this.statamicProject.getBlueprintField(y.collectionName,y.fieldHandle);v!=null&&(f.scopeVariable=Qg(f,v))}}}if(f.scopeVariable==null){let p=f.runtimeName().trim();if(d.hasList(p)||f.currentScope?.hasListInHistory(p)){f.sourceType="array";let b=d.getList(p);if(b!=null&&b.values.size>0){let I=b.values.entries().next().value[1];f.scopeVariable={dataType:"array",introducedBy:I.introducedBy,name:p,sourceField:null,sourceName:I.sourceName}}}let y=f.name?.name??"";y.includes(".")?y=y.split(".")[0]:y.includes(":")&&(y=y.split(":")[0]);let v=this.statamicProject.findAnyBlueprintField(y);if(v!=null){let b=Qg(f,v);f.scopeVariable=b,f.scopeVariable.sourceField!=null&&Us.instance?.hasFieldtype(f.scopeVariable.sourceField.type)&&(Us.instance?.getFieldType(f.scopeVariable.sourceField.type)).augmentScope(f,d)}}else f.sourceType=Zf(f.scopeVariable.dataType),f.scopeVariable.sourceField!=null&&Us.instance?.hasFieldtype(f.scopeVariable.sourceField.type)&&(Us.instance?.getFieldType(f.scopeVariable.sourceField.type)).augmentScope(f,d)}if(f.hasParameters&&CS(f,d),f.modifiers!=null&&f.modifiers.hasModifiers()?f.manifestType=f.modifiers.getLastManifestedModifierRuntimeType():f.manifestType=f.sourceType,f.isClosedBy!=null&&(o.push(f.id()),a.push(f.isClosedBy.id()),d=d.copy(),u.push(d)),f.getTagName()=="scope"&&f.hasMethodPart()&&u.length>2){let p=u[u.length-2].copy();d.addScopeList(f.getMethodNameValue(),p)}if(d.containsPath(f.runtimeName())&&(o.push(f.id()),f.isClosedBy!=null&&a.push(f.isClosedBy.id()),d=d.copy().bringListIntoMainScope(f.runtimeName()),u.push(d)),f.currentScope=d,f.getTagName()!="cache"){let p=f.findParameter("scope");p!=null&&d.canShiftScope(f.runtimeName())&&(d=d.shiftScope(f,f.runtimeName(),p.value),f.currentScope=d,u.pop(),u.push(d))}if(Ne.instance?.isKnownTag(f.runtimeName())){let p=Ne.instance?.findTag(f.runtimeName());typeof p<"u"&&p.augmentScope!=null&&p.augmentScope(f,d)}if(f.modifierChain!=null&&f.modifierChain.modifierChain.length>0&&f.modifierChain.modifierChain.forEach(p=>{p.modifier!=null&&typeof p.modifier.augmentScope<"u"&&p.modifier.augmentScope!=null&&p.modifier.augmentScope(f,d)}),f.modifiers.hasParameterModifiers()&&f.modifiers.parameterModifiers.forEach(p=>{p.modifier!=null&&typeof p.modifier.augmentScope<"u"&&p.modifier.augmentScope!=null&&p.modifier.augmentScope(f,d)}),f.sourceType=="array"){let p=f.findParameter("chunk"),y=!0;if(f.parent!=null&&f.parent instanceof B&&yG.includes(f.parent.runtimeName())&&(y=!1),typeof p<"u"&&p!==null)if(f.currentScope.parentScope!=null&&(f.currentScope.parentScope.hasList(f.runtimeName())||d.referencesArray(f.runtimeName()))){let v=f.currentScope.parentScope.copy(),b=v.liftList(f.runtimeName());if(b==null&&d.referencesArray(f.runtimeName())){if(b=new zi(d.statamicProject),y){let I=Ue(f);for(let C=0;C<I.length;C++){let q=I[C];v.wasIntroducedBySymbol(q.name,f)&&v.removeThroughIntroduction(q.name,f)}b.addVariables(I)}}else y&&v.addVariables(Ue(f));v.addScopeList("chunk",b),d=v,u.pop(),u.push(d),f.currentScope=v}else{let v=f.findParameter("scope");if(typeof v<"u"&&v!==null&&f.currentScope!=null&&f.currentScope.hasList(v.value)&&f.scopeName!=null){let b=f.currentScope.copy(),I=b.ancestor().copy(),C=b.liftList(f.scopeName);y&&b.addVariables(Ue(f)),I.liftList(f.scopeName),b.addScopeList(f.scopeName,C),I.addScopeList("chunk",b),d=I,u.pop(),u.push(d),f.currentScope=I}}else f.scopeVariable!=null&&f.scopeVariable.sourceField==null&&y&&(d.addVariables(Ue(f)),d.addVariables(Ge(f)))}if(a.includes(f.id())&&f.parent!=null&&f.parent instanceof B){let p=f.currentScope.findAncestorWithList(f.getTagName());p!=null?(f.currentScope=p,d=p.copy(),u.pop(),u.length==0&&u.push(i),u.push(d)):f.parent.parent!=null?f.currentScope=f.parent.parent.currentScope:f.currentScope=f.parent.currentScope}if(f.currentScope!=null&&f.runtimeNodes.length>0&&f.runtimeNodes.forEach(p=>{if(p instanceof ie&&f.currentScope?.hasValue(p.name)){let y=f.currentScope.findReferenceWithField(p.name);p.currentScope=f.currentScope,p.scopeName=f.scopeName,p.scopeVariable=y}}),TG.includes(f.runtimeName())&&f.runtimeNodes.length==3&&f.runtimeNodes[0]instanceof ie&&f.runtimeNodes[1]instanceof Ti&&f.runtimeNodes[2]instanceof Tt&&f.runtimeNodes[0].scopeVariable!=null&&f.runtimeNodes[0].scopeVariable.sourceField!=null){let p=f.runtimeNodes[0].scopeVariable,y=f.runtimeNodes[2].value,v=p.sourceField;if(v.sets!=null)for(let b=0;b<v.sets.length;b++){let I=v.sets[b];if(I.handle==y&&I.fields!=null){d=d.copy(),d.addBlueprintFields(f,I.fields),f.isClosedBy!=null&&!f.isSelfClosing&&(o.push(f.id()),a.push(f.isClosedBy.id()),u.push(d));break}}}this.lastSymbolId=f.id();let h=o.join("/");l.push(h)}}};var ss=class{};ss.globalTagEnterStack=[],ss.interpolatedVariables=[];var DS=Y(id(),1);var ki=class{constructor(){this.name="";this.compound="";this.methodPart="";this.content="";this.cachedCompoundTagName=null}tagPartIs(e){return e=e.toLowerCase().trim(),this.name.toLowerCase().trim()==e}isCompound(){return this.methodPart==null?!1:this.methodPart.length>0}getMethodName(){return this.methodPart==""?"index":this.methodPart=="null"?"":this.methodPart}getRuntimeMethodName(){}getCompoundTagName(){if(this.cachedCompoundTagName==null){let e=this.getMethodName();this.cachedCompoundTagName=this.name,e!=null&&e!=""&&(this.cachedCompoundTagName=this.cachedCompoundTagName+":"+e)}return this.cachedCompoundTagName}};var y_=class{constructor(){this.tagNames=[];this.modifierNames=[]}getModifierNames(){return this.modifierNames.concat(Ce.instance?.getModifierNames()??[])}getTagNames(){return this.tagNames.concat(Ne.instance?.getTagNames()??[])}setTagNames(e){this.tagNames=e}setModifierNames(e){this.modifierNames=e}isTag(e){return y_.alwaysLikeTag.includes(e)||Ne.instance?.isKnownTag(e)?!0:this.tagNames.includes(e)}isModifier(e){return Ce.instance?.hasModifier(e)?!0:this.modifierNames.includes(e)}},Ho=y_;Ho.alwaysLikeTag=["if","endif","elseif","else","unless","elseunless"];var Rl=class{static analyze(e,i){e.forEach(r=>{if(r instanceof B){if(r.pathReference!=null&&r.pathReference.isStrictVariableReference){r.isTagNode=!1;return}r.name!=null&&(r.isTagNode=i.isTag(r.name.name))}})}static analyzeNode(e){if(e.pathReference!=null&&e.pathReference.isStrictVariableReference){e.isTagNode=!1;return}Rl.environmentDetails!=null&&e.name!=null&&(e.isTagNode=Rl.environmentDetails.isTag(e.name.name)),e.name!=null&&(e.isConditionNode=Ho.alwaysLikeTag.includes(e.name.name))}static analyzeParametersForModifiers(e){e.parameters.forEach(i=>{Rl.environmentDetails!=null&&(i.isModifierParameter=Rl.environmentDetails.isModifier(i.name))})}},Wo=Rl;Wo.environmentDetails=null;(typeof Wo.environmentDetails>"u"||Wo.environmentDetails==null)&&(Wo.environmentDetails=new Ho);var T_=Wo;var gp=class{static getIdentifier(e){let i=new ki;i.content=e.trim();let r=e.split(":");if(r.length==1)i.name=r[0].trim(),i.methodPart=null,i.compound=i.name;else if(r.length>1){let n=r.shift()??"",s=r.join(":");i.name=n.trim(),i.methodPart=s.trim(),i.compound=i.name+":"+i.methodPart}else i.name=e.trim(),i.methodPart="";return i.name.startsWith("/")&&(i.name=i.name.substr(1),i.compound=i.compound.substr(1)),i}};var te=class{static getPrettyTypeName(e){return e instanceof jr?te.TOKEN_LANG_OPERATOR:e instanceof Hi?te.TOKEN_OP_A_ADD:e instanceof ie?te.TOKEN_VARIABLE:e instanceof Tt?te.TOKEN_STRING:e instanceof kt?te.TOKEN_NUMBER:e instanceof xr?te.TOKEN_CONSTANT_FALSE:e instanceof ar?te.TOKEN_CONSTANT_NULL:e instanceof wr?te.TOKEN_CONSTANT_TRUE:e instanceof Fo?te.TOKEN_MODIFIER_NODE:e instanceof $a?te.TOKEN_MODIFIER_CHAIN:e instanceof od?te.TOKEN_MODIFIER_PARAMETER:e instanceof Wi?te.TOKEN_OP_A_DIVIDE:e instanceof un?te.TOKEN_OP_A_EXPONENTIATION:e instanceof lr?te.TOKEN_OP_A_MODULUS:e instanceof Yi?te.TOKEN_OP_A_MULTIPLY:e instanceof yi?te.TOKEN_OP_A_SUBTRACT:e instanceof kr?te.TOKEN_ASG_ADD:e instanceof Dr?te.TOKEN_ASG_DIVIDE:e instanceof Fr?te.TOKEN_ASG_MODULUS:e instanceof Lr?te.TOKEN_ASG_MULTIPLY:e instanceof Ki?te.TOKEN_ASG_ASSIGN:e instanceof cn?te.TOKEN_ASG_SUBTRACT:e instanceof Ti?te.TOKEN_CMP_EQUAL:e instanceof Ur?te.TOKEN_CMP_SEQUAL:e instanceof ur?te.TOKEN_CMP_GT:e instanceof Pn?te.TOKEN_CMP_GTE:e instanceof Or?te.TOKEN_CMP_LT:e instanceof Mr?te.TOKEN_CMP_LTE:e instanceof qr?te.TOKEN_CMP_NEQ:e instanceof Br?te.TOKEN_CMP_SNEQ:e instanceof Vr?te.TOKEN_CMP_SPACESHIP:e instanceof An?te.TOKEN_OP_VARIABLE_FALLBACK:e instanceof ad?te.TOKEN_COND_FALLBACK_GROUP:e instanceof vt?te.TOKEN_BRANCH_SEPARATOR:e instanceof $i?te.TOKEN_TERNARY_SEPARATOR:e instanceof jt?te.TOKEN_GROUP_BEGIN:e instanceof Ut?te.TOKEN_GROUP_END:e instanceof ci?te.TOKEN_MODIFIER_SEPARATOR:e instanceof Ct?te.TOKEN_MODIFIER_NAME:e instanceof Gt?te.TOKEN_MODIFIER_VALUE:e instanceof bi?te.TOKEN_MODIFIER_VALUE_SEPARATOR:e instanceof Qa?te.TOKEN_NULL_COALESCE_GROUP:e instanceof xt?te.TOKEN_SEMANTIC_GROUP:e instanceof ri?te.TOKEN_STATEMENT_SEPARATOR:e instanceof Xa?te.TOKEN_TERNARY_CONDITION:e instanceof cr?te.TOKEN_OP_AND:e instanceof ni?te.TOKEN_OP_LOGIC_NEGATION:e instanceof fr?te.TOKEN_OP_OR:e instanceof fn?te.TOKEN_OP_XOR:e instanceof dr?te.TOKEN_OP_NULL_COALESCE:e instanceof Ds?te.TOKEN_PARAM:e instanceof zt?te.TOKEN_PATH_ACCESSOR:e instanceof Zn?te.TOKEN_OP_A_FACTORIAL:e instanceof or?te.TOKEN_RECURSIVE:e instanceof Mo?te.TOKEN_ARG_GROUP:e instanceof Et?te.TOKEN_ARG_SEPARATOR:e instanceof dn?te.TOKEN_OP_STRING_CONCAT:e instanceof fi?te.TOKEN_OP_SCOPE_REASSIGNMENT:e instanceof Oo?te.TOKEN_STRUCT_SWITCH_CASE:e instanceof Ls?te.TOKEN_STRUCT_SWITCH_GROUP:e instanceof Fs?te.TOKEN_STRUCT_DIRECTION_GROUP:e instanceof pr?te.TOKEN_STRUCT_SCOPED_LOGIC_GROUP:e instanceof xe?te.TOKEN_STRUCT_LOGIC_GROUP:e instanceof za?te.TOKEN_STRUCT_VALUE_DIRECTION:e instanceof En?te.TOKEN_STRUCT_ARRAY:e instanceof hr?te.TOKEN_STRUCT_T_LIST_START:e instanceof ld?te.TOKEN_STRUCT_TUPLE_LIST:e instanceof wt?te.TOKEN_STRUCT_METHOD_CALL:typeof e}},H=te;H.TOKEN_LANG_OPERATOR="T_LANG_OPERATOR",H.TOKEN_VARIABLE="T_VAR",H.TOKEN_NUMBER="T_NUMERIC",H.TOKEN_STRING="T_STRING",H.TOKEN_RECURSIVE="T_RECURSIVE",H.TOKEN_CONSTANT_FALSE="T_FALSE",H.TOKEN_CONSTANT_NULL="T_NULL",H.TOKEN_CONSTANT_TRUE="T_TRUE",H.TOKEN_MODIFIER_NODE="T_MODIFIER",H.TOKEN_MODIFIER_CHAIN="T_MODIFIER_CHAIN",H.TOKEN_MODIFIER_PARAMETER="T_MODIFIER_PARAM",H.TOKEN_OP_A_ADD="T_AOP_ADD",H.TOKEN_OP_A_DIVIDE="T_AOP_DIVIDE",H.TOKEN_OP_A_EXPONENTIATION="T_AOP_EXP",H.TOKEN_OP_A_MODULUS="T_AOP_MOD",H.TOKEN_OP_A_MULTIPLY="T_AOP_MULTIPLY",H.TOKEN_OP_A_SUBTRACT="T_AOP_SUBTRACT",H.TOKEN_OP_A_FACTORIAL="T_AOP_FACTORIAL",H.TOKEN_ASG_ADD="T_ASG_ADD",H.TOKEN_ASG_DIVIDE="T_ASG_DIVIDE",H.TOKEN_ASG_ASSIGN="T_ASG",H.TOKEN_ASG_MODULUS="T_ASG_MODULUS",H.TOKEN_ASG_MULTIPLY="T_ASG_MULTIPLY",H.TOKEN_ASG_SUBTRACT="T_ASG_SUBTRACT",H.TOKEN_CMP_EQUAL="T_CMP_EQ",H.TOKEN_CMP_SEQUAL="T_CMP_SEQ",H.TOKEN_CMP_GT="T_CMP_GT",H.TOKEN_CMP_GTE="T_CMP_GTE",H.TOKEN_CMP_LT="T_CMP_LT",H.TOKEN_CMP_LTE="T_CMP_LTE",H.TOKEN_CMP_NEQ="T_CMP_NEQ",H.TOKEN_CMP_SNEQ="T_CMP_SNEQ",H.TOKEN_CMP_SPACESHIP="T_CMP_SPSHP",H.TOKEN_OP_VARIABLE_FALLBACK="T_VFBK",H.TOKEN_COND_FALLBACK_GROUP="T_VFBK_GROUP",H.TOKEN_BRANCH_SEPARATOR="T_BRANCH_SEPARATOR",H.TOKEN_TERNARY_SEPARATOR="T_TERNARY_SEPARATOR",H.TOKEN_GROUP_BEGIN="T_LOGIC_BEGIN",H.TOKEN_GROUP_END="T_LOGIC_END",H.TOKEN_MODIFIER_SEPARATOR="T_MODIFIER_SEPARATOR",H.TOKEN_MODIFIER_NAME="T_MODIFIER_NAME",H.TOKEN_MODIFIER_VALUE="T_MODIFIER_VALUE",H.TOKEN_MODIFIER_VALUE_SEPARATOR="T_MODIFIER_VALUE_SEPARATOR",H.TOKEN_NULL_COALESCE_GROUP="T_NULL_COALESCE_GROUP",H.TOKEN_SEMANTIC_GROUP="T_SEMANTIC_GROUP",H.TOKEN_STATEMENT_SEPARATOR="T_STATEMENT_SEPARATOR",H.TOKEN_TERNARY_CONDITION="T_TERNARY_CONDITION",H.TOKEN_OP_AND="T_AND",H.TOKEN_OP_LOGIC_NEGATION="T_LOGIC_INVERSE",H.TOKEN_OP_OR="T_OR",H.TOKEN_OP_XOR="T_XOR",H.TOKEN_OP_NULL_COALESCE="T_NULL_COALESCE",H.TOKEN_PARAM="T_PARAM",H.TOKEN_PATH_ACCESSOR="T_VAR_SEPARATOR",H.TOKEN_ARG_GROUP="T_ARG_GROUP",H.TOKEN_ARG_SEPARATOR="T_ARG_SEPARATOR",H.TOKEN_OP_STRING_CONCAT="T_STR_CONCAT",H.TOKEN_OP_SCOPE_REASSIGNMENT="T_SCOPE_ASSIGNMENT",H.TOKEN_STRUCT_SWITCH_CASE="T_SWITCH_CASE",H.TOKEN_STRUCT_SWITCH_GROUP="T_SWITCH_GROUP",H.TOKEN_STRUCT_DIRECTION_GROUP="T_DIRECTION_GROUP",H.TOKEN_STRUCT_VALUE_DIRECTION="T_ORDER_DIRECTION",H.TOKEN_STRUCT_SCOPED_LOGIC_GROUP="T_SCOPED_LOGIC_GROUP",H.TOKEN_STRUCT_LOGIC_GROUP="T_LOGIC_GROUP",H.TOKEN_STRUCT_ARRAY="T_ARRAY",H.TOKEN_STRUCT_T_LIST_START="T_LIST_START",H.TOKEN_STRUCT_TUPLE_LIST="T_LIST",H.TOKEN_STRUCT_METHOD_CALL="T_METHOD_CALL";var He=class{static isLanguageLogicalKeyword(e){return e==this.LogicalAnd||e==this.LogicalNot||e==this.LogicalOr||e==this.LogicalXor}};He.LogicalAnd="and",He.LogicalNot="not",He.LogicalOr="or",He.LogicalXor="xor",He.ConstTrue="true",He.ConstFalse="false",He.ConstNull="null",He.ArrList="list",He.ScopeAs="as";var _p=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.currentContent=[];this.rawContent=[];this.startIndex=0;this.cur=null;this.next=null;this.prev=null;this.isParsingString=!1;this.isParsingModifierName=!1;this.isInModifierParameterValue=!1;this.runtimeNodes=[];this.ignorePrevious=!1;this.lastNode=null;this.referenceParser=null;this.activeNode=null}reset(){this.ignorePrevious=!1,this.runtimeNodes=[],this.chars=[],this.inputLen=0,this.currentIndex=0,this.currentContent=[],this.rawContent=[],this.startIndex=0,this.cur=null,this.next=null,this.prev=null,this.isParsingString=!1,this.isParsingModifierName=!1,this.isInModifierParameterValue=!1,this.referenceParser=null,this.activeNode=null}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.ignorePrevious?(this.prev="",this.ignorePrevious=!1):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}isValidChar(e){return e==null||e==x.Punctuation_Semicolon?!1:this.isParsingString==!1&&e=="]"?!0:this.isParsingString==!1&&e==")"?!1:(e=="["||e=="]")&&e==this.cur||(e=="_"||e=="."||e=="["||e=="]")&&(!(this.currentContent.length>0)||j.ctypeAlpha(this.cur)||j.ctypeDigit(this.cur))?!0:j.ctypeSpace(e)?!1:this.isParsingModifierName&&(e==x.Punctuation_Minus||e==x.Punctuation_Underscore)?!0:!j.ctypePunct(e)}isRightOfInterpolationRegion(){if(this.activeNode==null||this.referenceParser==null)return!1;let e=this.activeNode._lexerRelativeOffset(this.currentIndex);return this.referenceParser.bordersInterpolationRegion(e)}scanForwardTo(e,i=0){let r=[];for(let n=this.currentIndex+1+i;n<this.inputLen;n++){let s=this.chars[n];if(s==e){r.push(s);break}else r.push(s)}return r}nextNonWhitespace(){for(let e=this.currentIndex+1;e<this.inputLen;e++){let i=this.chars[e];if(!j.ctypeSpace(i))return i}return null}pushError(e){this.referenceParser!=null&&this.referenceParser.addAntlersError(e)}guardAgainstNeighboringTypesInModifier(e){return this.lastNode instanceof Gt&&this.pushError(D.makeSyntaxError(T.TYPE_MODIFIER_INCORRECT_VALUE_POSITION,this.lastNode,"Incorrect type ["+H.getPrettyTypeName(e)+"] near ["+H.getPrettyTypeName(this.lastNode)+"]")),!1}appendContent(e){e!=null&&this.currentContent.push(e)}tokenize(e,i){this.reset(),this.referenceParser=e.getParser(),this.activeNode=e,this.chars=i.split(""),this.inputLen=this.chars.length,this.runtimeNodes=[],this.lastNode=null;let r=null;this.isParsingString=!1,this.isParsingModifierName=!1;let n=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){this.checkCurrentOffsets();let o=!0;if(this.cur!=null&&this.rawContent.push(this.cur),this.isParsingString==!1&&(this.cur==x.String_Terminator_DoubleQuote||this.cur==x.String_Terminator_SingleQuote)){if(this.prev==x.String_EscapeCharacter){this.pushError(D.makeSyntaxError(T.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE,e,"Illegal string escape sequence outside string parsing."));continue}this.rawContent=[],this.rawContent.push(this.cur),n=this.cur,this.isParsingString=!0,r=this.currentIndex;continue}if(this.isInModifierParameterValue&&!this.isParsingString){let a=!1;if(!this.isParsingString&&j.ctypeSpace(this.next)){let l=this.scanForwardTo(" ",1).join("").trim().toLowerCase();l.length>0&&He.isLanguageLogicalKeyword(l)&&(a=!0)}if(this.next==x.String_Terminator_SingleQuote||this.next==x.String_Terminator_DoubleQuote||this.next==null||a){this.appendContent(this.cur);let l=this.currentContent.join("");if(l.length>0){let u=l;if(this.currentContent=[],this.rawContent=[],u.trimRight().length==0){let f=this.nextNonWhitespace();if(f==x.String_Terminator_SingleQuote||f==x.String_Terminator_DoubleQuote){this.currentContent=[],this.rawContent=[];continue}}let c=new Gt;c.isVirtual=!1,c.name=u,c.value=u.trimRight(),c.startPosition=e._lexerRelativeOffset(this.currentIndex-u.length),c.endPosition=e._lexerRelativeOffset(this.currentIndex),c.parent=this.activeNode,this.guardAgainstNeighboringTypesInModifier(c),this.runtimeNodes.push(c),this.lastNode=c}if(l.length==0)continue;this.currentContent=[],this.rawContent=[],this.isInModifierParameterValue=!1;continue}if(this.next==x.Punctuation_Pipe||this.next==x.Punctuation_Colon||this.next==x.RightParent){this.isInModifierParameterValue=!1,this.appendContent(this.cur);let l=0,u=!1;if(this.currentContent[0]==x.String_Terminator_SingleQuote||this.currentContent[0]==x.String_Terminator_DoubleQuote){let d=this.scanForwardTo(this.currentContent[0]);d.length>0&&(this.currentContent=this.currentContent.concat(d),l=d.length,u=!0)}let c=this.currentContent.join("");u&&(c=c.substr(1),c=c.slice(0,-1)),this.currentContent=[],this.rawContent=[];let f=new Gt;f.isVirtual=!1,f.name=c,f.value=c,f.startPosition=e._lexerRelativeOffset(this.currentIndex-c.length),f.endPosition=e._lexerRelativeOffset(this.currentIndex),f.parent=this.activeNode,this.runtimeNodes.push(f),this.guardAgainstNeighboringTypesInModifier(f),this.lastNode=f,this.currentIndex+=l}else this.appendContent(this.cur);continue}if(this.isParsingString&&this.cur==n){if(this.prev==x.String_EscapeCharacter)this.appendContent(n);else{if(this.isInModifierParameterValue){let l=this.currentContent.join(""),u=new Gt;u.isVirtual=!1,u.name=l,u.value=l,u.startPosition=e._lexerRelativeOffset(r??0),u.endPosition=e._lexerRelativeOffset(this.currentIndex),u.parent=this.activeNode,this.runtimeNodes.push(u),this.guardAgainstNeighboringTypesInModifier(u),this.lastNode=u,this.currentContent=[],this.rawContent=[],this.isParsingString=!1,this.isInModifierParameterValue=!1;continue}let a=new Tt;a.isVirtual=!1,a.startPosition=e._lexerRelativeOffset(r??0),a.endPosition=e._lexerRelativeOffset(this.currentIndex),this.referenceParser!=null&&(a.sourceContent=this.referenceParser.getText(a.startPosition.index,a.endPosition.index+1)),a.parent=this.activeNode,n!=null&&(a.sourceTerminator=n),n=null,this.isParsingString=!1,a.value=this.currentContent.join(""),a.rawLexContent=this.rawContent.join("").trim(),this.currentContent=[],this.rawContent=[],this.guardAgainstNeighboringTypesInModifier(a),this.runtimeNodes.push(a),this.lastNode=a}continue}if(this.isParsingString&&this.cur==x.String_EscapeCharacter){if(this.next==x.String_EscapeCharacter){this.appendContent(x.String_EscapeCharacter),this.ignorePrevious=!0,this.currentIndex+=1;continue}else if(this.next==x.String_Terminator_SingleQuote){this.appendContent(x.String_Terminator_SingleQuote),this.rawContent.push(x.String_EscapeCharacter),this.rawContent.push(x.String_Terminator_SingleQuote),this.currentIndex+=1;continue}else if(this.next==x.String_Terminator_DoubleQuote){this.appendContent(x.String_Terminator_DoubleQuote),this.rawContent.push(x.String_EscapeCharacter),this.rawContent.push(x.String_Terminator_DoubleQuote),this.currentIndex+=1;continue}else if(this.next=="n"){this.appendContent(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){this.appendContent("	"),this.currentIndex+=1;continue}else if(this.next=="r"){this.appendContent("\r"),this.currentIndex+=1;continue}}if(this.isParsingString==!1){if(this.isValidChar(this.cur)&&this.isValidChar(this.next)==!1&&this.currentContent.length==0&&(this.appendContent(this.cur),o=!1),(this.next==null||this.isValidChar(this.next)==!1)&&this.currentContent.length>0){o&&this.appendContent(this.cur);let a=this.currentContent.join("").trim(),l=a.length,u=this.currentIndex-l,c=e._lexerRelativeOffset(u),f=e._lexerRelativeOffset(this.currentIndex);if(this.currentContent=[],this.rawContent=[],a==He.LogicalAnd){let h=new cr;h.isVirtual=!1,h.content=He.LogicalAnd,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.LogicalOr){let h=new fr;h.isVirtual=!1,h.content=He.LogicalOr,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.LogicalXor){let h=new fn;h.isVirtual=!1,h.content=He.LogicalXor,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.ConstNull){let h=new ar;h.isVirtual=!1,h.content=He.ConstNull,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.ConstTrue){let h=new wr;h.isVirtual=!1,h.content=He.ConstTrue,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.ConstFalse){let h=new xr;h.isVirtual=!1,h.content=He.ConstFalse,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.LogicalNot){let h=new ni;h.isVirtual=!1,h.content=He.LogicalNot,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}else if(a==He.ArrList&&this.next==x.LeftParen){let h=new hr;h.isVirtual=!1,h.content=He.ArrList,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,this.runtimeNodes.push(h),this.lastNode=h;continue}if(j.isNumeric(a)){let h=new kt;h.isVirtual=!1,h.startPosition=c,h.endPosition=f,h.parent=this.activeNode,a.includes(".")?h.value=parseFloat(a):h.value=parseInt(a),h.rawLexContent=a,this.guardAgainstNeighboringTypesInModifier(h),this.runtimeNodes.push(h),this.lastNode=h;continue}if(this.runtimeNodes.length>0){let h=this.runtimeNodes[this.runtimeNodes.length-1];if(h instanceof ci){let p=new Ct;p.isVirtual=!1,p.name=a,p.content=a,p.startPosition=c,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(h instanceof bi){let p=new Gt;p.isVirtual=!1,p.name=a,p.value=a,p.startPosition=c,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p,this.isParsingModifierName=!1;continue}}let d=new ie;d.isVirtual=!1,d.name=a,d.startPosition=c,d.endPosition=f,d.parent=this.activeNode,this.runtimeNodes.push(d),this.lastNode=d;continue}}else{this.appendContent(this.cur);continue}if(!j.ctypeSpace(this.cur)){if(this.isParsingString==!1){if(this.cur==x.Punctuation_Equals&&this.next==x.Punctuation_GreaterThan){let a=new fi;a.isVirtual=!1,a.content="=>",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.currentContent=[],this.rawContent=[],this.currentIndex+=1;continue}if(this.cur==x.Punctuation_Comma){let a=new Et;a.isVirtual=!1,a.content=x.Punctuation_Comma,a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Semicolon){let a=new ri;a.isVirtual=!1,a.content=x.Punctuation_Semicolon,a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Plus){if(this.next==x.Punctuation_Equals){let l=new kr;l.isVirtual=!1,l.content="+=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new Hi;a.isVirtual=!1,a.content="+",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.isParsingModifierName==!1&&this.cur==x.Punctuation_Minus){if(j.ctypeDigit(this.next)&&j.ctypeDigit(this.prev)==!1&&this.prev!=x.RightParent&&this.isRightOfInterpolationRegion()==!1){this.appendContent(this.cur);continue}if(this.next==x.Punctuation_Equals){let l=new cn;l.isVirtual=!1,l.content="-=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}else if(this.next==x.Punctuation_GreaterThan){let l=new wt;l.isVirtual=!1,l.content="->",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new yi;a.isVirtual=!1,a.content="-",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Asterisk){if(this.next==x.Punctuation_Asterisk){let l=new un;l.isVirtual=!1,l.content="**",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}else if(this.next==x.Punctuation_Equals){let l=new Lr;l.isVirtual=!1,l.content="*=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new Yi;a.isVirtual=!1,a.content="*",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_ForwardSlash){if(this.next==x.Punctuation_Equals){let l=new Dr;l.isVirtual=!1,l.content="/=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new Wi;a.isVirtual=!1,a.content="/",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Percent){if(this.next==x.Punctuation_Equals){let l=new Fr;l.isVirtual=!1,l.content="%=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new lr;a.isVirtual=!1,a.content="%",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_LessThan){if(this.next==x.Punctuation_Equals){let l=null;if(this.currentIndex+2<this.inputLen&&(l=this.chars[this.currentIndex+2]),l==x.Punctuation_GreaterThan){let c=new Vr;c.isVirtual=!1,c.content="<=>",c.startPosition=e._lexerRelativeOffset(this.currentIndex),c.endPosition=e._lexerRelativeOffset(this.currentIndex+3),c.parent=this.activeNode,this.runtimeNodes.push(c),this.lastNode=c,this.currentIndex+=2;continue}let u=new Mr;u.isVirtual=!1,u.content="<=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let a=new Or;a.isVirtual=!1,a.content="<",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_GreaterThan){if(this.next==x.Punctuation_Equals){let l=new ur;l.isVirtual=!1,l.content=">=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let a=new ur;a.isVirtual=!1,a.content=">",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Equals&&this.next!=x.Punctuation_Equals){let a=new Ki;a.isVirtual=!1,a.content="=",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Equals&&this.next==x.Punctuation_Equals){let a=null;if(this.currentIndex+2<this.inputLen&&(a=this.chars[this.currentIndex+2]),a==x.Punctuation_Equals){let l=new Ur;l.isVirtual=!1,l.content="===",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+3),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=2}else{let l=new Ti;l.isVirtual=!1,l.content="==",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1}continue}if(this.cur==x.Punctuation_Ampersand){if(this.next==x.Punctuation_Ampersand){let l=new cr;l.isVirtual=!1,l.content="&&",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.next==x.Punctuation_Equals){let l=new dn;l.isVirtual=!1,l.content="&=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}let a=new cr;a.isVirtual=!1,a.content="&",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Pipe&&this.next!=x.Punctuation_Pipe){let a=new ci;a.isVirtual=!1,a.content="|",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.isParsingModifierName=!0;continue}if(this.cur==x.Punctuation_Pipe&&this.next==x.Punctuation_Pipe){let a=new fr;a.isVirtual=!1,a.content="||",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+2),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.currentIndex+=1;continue}if(this.cur==x.Punctuation_Exclamation){if(this.next==x.Punctuation_Equals){let l=null;if(this.currentIndex+2<this.inputLen&&(l=this.chars[this.currentIndex+2]),l==x.Punctuation_Equals){let c=new Br;c.isVirtual=!1,c.content="!==",c.startPosition=e._lexerRelativeOffset(this.currentIndex),c.endPosition=e._lexerRelativeOffset(this.currentIndex+3),c.parent=this.activeNode,this.runtimeNodes.push(c),this.lastNode=c,this.currentIndex+=2;continue}let u=new qr;u.isVirtual=!1,u.content="!=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let a=new ni;a.isVirtual=!1,a.content="!",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Question&&this.next==x.Punctuation_Equals){let a=new An;a.isVirtual=!1,a.content="?=",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+2),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.currentIndex+=1;continue}if(this.cur==x.Punctuation_Question&&this.next==x.Punctuation_Question){let a=new dr;a.isVirtual=!1,a.content="??",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+2),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.currentIndex+=1;continue}if(this.cur==x.Punctuation_Question&&this.next==x.Punctuation_Colon){let a=new dr;a.isVirtual=!1,a.content="?:",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+2),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.currentIndex+=1;continue}if(this.cur==x.Punctuation_Question){let a=new $i;a.isVirtual=!1,a.content="?",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.LeftParen){let a=new jt;a.isVirtual=!1,a.content="(",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.RightParent){let a=new Ut;a.isVirtual=!1,a.content=")",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a;continue}if(this.cur==x.Punctuation_Colon){if(this.runtimeNodes.length>0&&this.runtimeNodes[this.runtimeNodes.length-1]instanceof Ct){let u=new bi;u.isVirtual=!1,u.content=":",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+1),u.parent=this.activeNode,this.runtimeNodes.push(u),this.isInModifierParameterValue==!1?this.isInModifierParameterValue=!0:this.isInModifierParameterValue=!1;continue}let a=new vt;a.isVirtual=!1,a.content=":",a.startPosition=e._lexerRelativeOffset(this.currentIndex),a.endPosition=e._lexerRelativeOffset(this.currentIndex+1),a.parent=this.activeNode,this.runtimeNodes.push(a),this.lastNode=a,this.isParsingModifierName=!1;continue}}o&&this.appendContent(this.cur)}}let s=this.runtimeNodes.length-1;for(let o=0;o<this.runtimeNodes.length;o++){let a=null,l=null;o>0&&(a=this.runtimeNodes[o-1]),o!=s&&(l=this.runtimeNodes[o+1]);let u=this.runtimeNodes[o];u.prev=a,u.next=l}return this.runtimeNodes}};var Ht=class{constructor(){this.chars=[];this.currentIndex=0;this.lastIndex=0;this.inputLength=0;this.prev=null;this.cur=null;this.next=null;this.isParsingString=!1;this.isStringKeyPath=!1;this.antlersErrors=[];this._recusriveEntryCheck=new Map}isValidChar(e){return!(this.isParsingString==!1&&j.ctypeSpace(e)||this.isParsingString==!1&&e==Ht.LeftBracket||this.isParsingString==!1&&e==Ht.RightBracket)}normalizePath(e){return e=e.replace(":","_"),e=e.replace(".","_"),e=e.replace("[","_"),e=e.replace("]","_"),e.replace("]","_")}getAntlersErrors(){return this.antlersErrors}mergeErrors(e){e.forEach(i=>{this.antlersErrors.push(i)})}parse(e){this.antlersErrors=[],this._recusriveEntryCheck.clear();let i=e,r=!1,n=!1,s=!1,o=!1;e.startsWith(x.AtChar)&&(s=!0,e=e.substr(1)),e.startsWith(x.Punctuation_Percent)?(o=!0,e=e.substr(1)):(e.startsWith(x.Punctuation_Dollar)&&(r=!0,e=e.substr(1)),e.startsWith(x.Punctuation_Dollar)&&(n=!0,e=e.substr(1))),this.chars=[],this.currentIndex=0,this.lastIndex=0,this.inputLength=0,this.cur=null,this.prev=null,this.next=null,this.chars=e.split(""),this.inputLength=this.chars.length,this.lastIndex=this.inputLength-1;let a=[],l=!1,u=[],c=Ht.ColonSeparator,f=!1,d=null,h=!1,p=!0;if(this.isParsingString=!1,this.inputLength==0){let b=new pn;return b._isFromEmptyFailState=!0,b}for(this.currentIndex;this.currentIndex<this.inputLength;this.currentIndex+=1){if(this.cur=this.chars[this.currentIndex],this.next=null,f?(f=!1,this.prev=""):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLength&&(this.next=this.chars[this.currentIndex+1]),this.isParsingString==!1&&this.cur==Ht.ColonSeparator&&(c=Ht.ColonSeparator),this.isParsingString==!1&&this.cur==Ht.DotPathSeparator&&(c=Ht.DotPathSeparator),this.isParsingString&&this.cur==x.String_EscapeCharacter&&this.next==d){d!=null&&a.push(d),this.currentIndex+=1;continue}if(this.cur==x.String_Terminator_SingleQuote||this.cur==x.String_Terminator_DoubleQuote)if(this.isParsingString)if(this.cur==d)if(this.prev==x.String_EscapeCharacter){a.push(this.cur);continue}else this.isParsingString=!1,p=!1;else{a.push(this.cur);continue}else{this.prev!=null&&this.prev!=x.LeftBracket&&(j.ctypeAlpha(this.prev)||j.ctypeDigit(this.prev))&&this.antlersErrors.push(D.makeSyntaxError(T.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR,null,"Unexpected string start while parsing variable path. String literals must be within array accessors.")),this.isParsingString=!0,h=!0,d=this.cur,this.isStringKeyPath=!0;continue}if(this.isParsingString){if(j.ctypeSpace(this.cur)){a.push(this.cur);continue}else if(this.cur==x.String_EscapeCharacter){if(this.next==x.String_EscapeCharacter){a.push(x.String_EscapeCharacter),this.currentIndex+=1,f=!0;continue}else if(this.next=="n"){a.push(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){a.push("	"),this.currentIndex+=1;continue}else if(this.next=="r"){a.push("\r"),this.currentIndex+=1;continue}}}if(this.isParsingString==!1&&this.cur==Ht.LeftBracket){if(a.length>0){let C=new zt;C.name=a.join(""),C.delimiter=c,u.push(C),a=[]}if(this.next==null||j.ctypeSpace(this.next)){this.antlersErrors.push(D.makeSyntaxError(T.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT,null,"Unexpected end of input or whitespace while parsing variable accessor path."));continue}let b=this.locateEndOfAccessor();this.currentIndex=b.foundOn;let I=new Ht;if(u.push(I.parse(b.nestedContent)),this.mergeErrors(I.getAntlersErrors()),l=!0,this.currentIndex==-1){this.antlersErrors.push(D.makeSyntaxError(T.PARSER_CANNOT_PARSE_PATH_RECURSIVE,null,"Cannot parse variable path.")),l=!1;break}continue}if(this.isParsingString==!1&&this.next==Ht.RightBracket&&l){p?a.push(this.cur):p=!0;let b=new ud;b.name=a.join(""),u.push(b),a=[],c=Ht.ColonSeparator,this.currentIndex+=1,l=!1;continue}if(this.isParsingString==!1&&(this.cur==Ht.LeftBracket||this.cur==Ht.ColonSeparator||this.cur==Ht.DotPathSeparator||this.currentIndex==this.lastIndex)){if(this.next==null||j.ctypeSpace(this.next)){if(this.cur==Ht.ColonSeparator){if(a.length==0){this.antlersErrors.push(D.makeSyntaxError(T.TYPE_UNEXPECTED_BRANCH_SEPARATOR,null,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}this.antlersErrors.push(D.makeSyntaxError(T.TYPE_ILLEGAL_VARPATH_RIGHT,null,'Variable paths cannot end with the ":" character.'));continue}if(this.cur==Ht.LeftBracket){this.antlersErrors.push(D.makeSyntaxError(T.TYPE_ILLEGAL_VARPATH_SUBPATH_START,null,"Illegal variable sub-path start."));continue}}this.currentIndex==this.lastIndex&&this.isValidChar(this.cur)&&(p?a.push(this.cur):p=!0);let b=new zt;b.delimiter=c,b.name=a.join(""),h&&(b.isStringVar=h,b.name=i.substr(1),b.name=b.name.slice(0,-1),h=!1),u.push(b),a=[];continue}else{a.push(this.cur);continue}}let y=u.length;if(y>0){let b=u[y-1];(b instanceof zt||b instanceof pn)&&(b.isFinal=!0)}let v=new pn;return v.isStrictTagReference=o,v.isStrictVariableReference=r,v.isExplicitVariableReference=n,v.pathParts=u,v.originalContent=e,v.isVariableVariable=s,v.normalizedReference=e.replace(":","."),v}locateEndOfAccessor(){let e=[],i=1,r=-1,n="",s=!1,o=null;if(this._recusriveEntryCheck.has(this.currentIndex+1)==!1)this._recusriveEntryCheck.set(this.currentIndex+1,!0);else return{foundOn:r,nestedContent:""};for(let a=this.currentIndex+1;a<this.inputLength;a++){let l=this.chars[a],u=null,c=null;if(a>0&&(c=this.chars[a-1]),a+1<this.inputLength&&(u=this.chars[a+1]),s==!1&&(l==x.String_Terminator_SingleQuote||l==x.String_Terminator_DoubleQuote)){s=!0,o=l,e.push(l);continue}if(s==!1&&l==Ht.LeftBracket){i+=1,e.push(l);continue}if(s&&l==o&&c!=x.String_EscapeCharacter){e.push(l),s=!1,o=null;continue}if(s==!1&&l==Ht.RightBracket)if(i-=1,i==0){r=a,n=e.join("");break}else{e.push(l);continue}else e.push(l);s==!1&&j.ctypeSpace(u)&&this.antlersErrors.push(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path.")),u==null&&this.antlersErrors.push(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path."))}return{foundOn:r,nestedContent:n}}},kn=Ht;kn.ColonSeparator=":",kn.LeftBracket="[",kn.RightBracket="]",kn.DotPathSeparator=".";var yp=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.cur=null;this.prev=null;this.pathParser=new kn;this.lexer=new _p;this.activeNode=null}reset(){this.chars=[],this.inputLen=0,this.currentIndex=0,this.cur=null,this.prev=null}canBeClosingTag(e){let i=e.name?.name;return i=="elseif"||i=="else"?!0:e.name==null?!1:e.name.content.startsWith("/")}parseNode(e){if(this.activeNode=e,this.reset(),e.content.startsWith("*subrecursive")){let c=e.content;c=c.trim(),c=j.trimRight(c,"*"),c=c.substr(13);let f=new or;return e.copyBasicDetailsTo(f),f.originalNode=e,f.name=new ki,f.name.name=c,f.isNestedRecursive=!0,c.trim().startsWith("[")||(f.pathReference=this.pathParser.parse(c)),f.mergeErrors(this.pathParser.getAntlersErrors()),f.content=c,f.runtimeContent=c,f}if(e.content.trim().startsWith("*recursive")){let c=e.content;c=c.trim(),c=j.trimRight(c,"*"),c=c.substr(10).trim();let f=new or;return e.copyBasicDetailsTo(f),f.originalNode=e,f.name=new ki,f.name.name=c,f.pathReference=this.pathParser.parse(c),f.mergeErrors(this.pathParser.getAntlersErrors()),f.content=c,f.runtimeContent=c,f}this.chars=e.content.split(""),this.inputLen=this.chars.length;let i=[],r=!1,n="",s=!1,o=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.cur=this.chars[this.currentIndex],this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),r==!1){if(s==!1&&(this.cur==x.String_Terminator_DoubleQuote||this.cur==x.String_Terminator_SingleQuote)){o=this.cur,s=!0,i.push(this.cur);continue}if(s&&j.ctypeSpace(this.cur)){i.push(this.cur);continue}if(s&&this.cur==o&&this.prev!=x.String_EscapeCharacter){o=null,s=!1,i.push(this.cur);continue}if(j.ctypeSpace(this.cur)||this.currentIndex==this.inputLen-1||this.cur==x.Punctuation_Pipe){if(i.length==0)continue;j.ctypeSpace(this.cur)||this.cur!=x.Punctuation_Pipe&&i.push(this.cur),n=i.join(""),r=!0;break}i.push(this.cur)}let a=e.getContentRelativeStartIndex();if(e.nameStartsOn=e.relativeOffset(a,a),e.nameStartsOn!=null&&(e.nameEndsOn=e.nameStartsOn.shiftRight(n.length-1),n.includes(x.Punctuation_Colon))){let c=n.indexOf(x.Punctuation_Colon);e.nameMethodPartStartsOn=e.nameStartsOn.shiftRight(c+1)}e.name=gp.getIdentifier(n),T_.analyzeNode(e),e.parameters=this.getParameters(e),e.hasParameters=e.parameters.length>0,e.hasParameters&&(T_.analyzeParametersForModifiers(e),e.resetContentCache()),n.startsWith("[")==!1&&(e.pathReference=this.pathParser.parse(n)),e.mergeErrors(this.pathParser.getAntlersErrors()),e.pathReference!=null&&e.pathReference.isStrictTagReference&&(e.name.name=e.name.name.substr(1),e.name.content=e.name.content.substr(1)),e.isClosingTag=this.canBeClosingTag(e);let l=[];e.isClosingTag==!1&&(l=this.lexer.tokenize(e,e.getContent())),e.runtimeNodes=l;let u=e.content.trim();if(Vt.isConditionalStructure(e)&&e.name.name!="else"&&l.length==0&&u!="/if"&&u!="/unless"&&u!="/endunless"&&u!="endif"&&u!="endunless"&&u!="/endif"&&e.getContent().trim().length==0&&this.pushConditionWithoutExpression(e),e.name.name=="endif"){let c=e.copyBasicDetails(),f=e.getParser();return f!=null&&c.withParser(f),c.name=new ki,c.name.name="if",c.name.compound="if",c.isClosingTag=!0,c.content=" /if ",c.originalNode=e,c}if(e.name.name=="unless"){let c=e.copyBasicDetails(),f=e.getParser();if(f!=null&&c.withParser(f),c.name=new ki,c.name.name="if",c.name.compound="if",e.isClosingTag==!1){let d=e.getContent()??"",h=" if !("+d+") ";c.content=h,c.originalNode=e,c.resetContentCache(),c.runtimeNodes=this.lexer.tokenize(c,c.getContent()??""),this.testUnlessContent(c)}else c.originalNode=e,c.content=" /if ";return c}else if(e.name.name=="elseunless"){let c=e.copyBasicDetails(),f=e.getParser();f!=null&&c.withParser(f),c.name=new ki,c.name.name="elseif",c.name.compound="elseif";let d=e.getContent()??"",h=" elseif !("+d+") ";return c.content=h,c.originalNode=e,c.resetContentCache(),c.runtimeNodes=this.lexer.tokenize(c,c.getContent()??""),this.testUnlessContent(c),c}else if(e.name.name=="endunless"){let c=e.copyBasicDetails(),f=e.getParser();return f!=null&&c.withParser(f),c.name=new ki,c.name.name="if",c.name.compound="if",c.isClosingTag=!0,c.content=" /if ",c.originalNode=e,c}return e}pushError(e){this.activeNode!=null&&this.activeNode.pushError(e)}testUnlessContent(e){let i=e.getContent()??"";if(i=i.replace("!",""),i=i.replace("(",""),i=i.replace(")","").trim(),i.length==0){this.pushConditionWithoutExpression(e);return}}pushConditionWithoutExpression(e){this.pushError(D.makeSyntaxError(T.TYPE_PARSE_EMPTY_CONDITIONAL,e,"Condition structure lacks comparison expression."))}getParameters(e){let i=e.getContent()??"",r=i.split(""),n=[],s=[],o=r.length,a=0;if(e.name!=null){let J=j.trimLeft(e.content," "),ve=e.content.length-J.length,tt=e.name.content.length;ve>0?a=ve+tt:a=tt}let l=!1,u=[],c="",f=0,d=0,h=!1,p=null,y=-1,v=-1,b=-1,I=-1,C=-1,q=-1,K=null;for(let J=0;J<o;J++){let ve=r[J],tt=null,Lt=null;if(J+1<o&&(Lt=r[J+1]),h?(tt="",h=!1):J>0&&(tt=r[J-1]),l==!1&&j.ctypeSpace(ve)){u=[],y=-1,v=-1,b=-1,I=-1,C=-1,q=-1;continue}if(l==!1&&ve==x.Punctuation_Equals){if(u.length>0&&(j.ctypeAlpha(u[0])||j.ctypeDigit(u[0])||u[0]==x.Punctuation_Colon||u[0]==x.AtChar||u[0]==x.String_EscapeCharacter)==!1){u=[];continue}if(J+1>=o){this.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_END_OF_INPUT,e,"Unexpected end of input"));continue}let dt=null;if(J+1<o&&(dt=r[J+1]),tt==x.Punctuation_Equals){u=[],y=-1,v=-1,b=-1,I=-1,C=-1,q=-1;continue}if(j.ctypeSpace(dt)||dt==x.Punctuation_Equals){u=[],y=-1,v=-1,b=-1,I=-1,C=-1,q=-1;continue}u.length>0&&(I=J,C=J,c=u.join(""),f=d,l=!0,u=[]),Lt==x.String_Terminator_DoubleQuote&&(p=x.String_Terminator_DoubleQuote,K=x.String_Terminator_DoubleQuote,J+=1),Lt==x.String_Terminator_SingleQuote&&(p=x.String_Terminator_SingleQuote,K=x.String_Terminator_SingleQuote,J+=1);continue}if(l&&ve==x.String_EscapeCharacter){let dt=null;if(J+1<o&&(dt=r[J+1]),dt==x.String_EscapeCharacter){u.push(x.String_EscapeCharacter),J+=1,h=!0;continue}if(dt==x.String_Terminator_DoubleQuote){u.push(x.String_Terminator_DoubleQuote),J+=1;continue}if(dt==x.String_Terminator_SingleQuote){u.push(x.String_Terminator_SingleQuote),J+=1;continue}if(dt=="n"){u.push(`
`),J+=1;continue}if(dt=="r"){u.push("\r"),J+=1;continue}}if(l==!1&&(p!=null&&ve==p||p==null&&j.ctypeSpace(ve))&&n.push(u.join("")),l&&(p!=null&&ve==p||p==null&&j.ctypeSpace(ve))){let dt=u.join("");q=J,v=J,l=!1,p=null,u=[];let ze=new Ds;if(c.startsWith(x.Punctuation_Colon)&&(ze.isVariableReference=!0,c=c.substr(1)),ze.nameDelimiter=K,ze.name=c,ze.value=dt,c.startsWith(x.String_EscapeCharacter)&&(ze.containsEscapedContent=!0),ze.nameDelimiter==null&&(ze.hasValidValueDelimiter=!1,ze.nameDelimiter='"'),ze.startPosition=e.relativePositionFromOffset(d,f)??null,J+1>o){this.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER,e,"Unexpected end of input while parsing parameter content.")),ze.parent=e,s.push(ze),c="";continue}ze.endPosition=e.relativePositionFromOffset(J+1,J+1)??null,ze.parent=e,ze.blockPosition={start:e.relativeOffset(y,y)??null,end:e.relativeOffset(v,v)??null},ze.namePosition={start:e.relativeOffset(b,b)??null,end:e.relativeOffset(I,I)??null},ze.valuePosition={start:e.relativeOffset(C+2,C+2)??null,end:e.relativeOffset(q,q)??null},s.push(ze),c="",y=-1,v=-1,b=-1,I=-1,C=-1,q=-1;continue}if(l==!1&&(ve==x.String_Terminator_DoubleQuote||ve==x.String_Terminator_SingleQuote)&&J>a)break;u.push(ve),y==-1&&(y=J),b==-1&&(b=J),u.length==1&&(d=J+1)}if(p!=null){let J=e;if(n.length>0){let ve=n[n.length-1],tt=e.content.indexOf(ve);if(tt>=0){let Lt=new Q;Lt.startPosition=e.relativeOffset(tt-2,tt-2),Lt.endPosition=e.relativeOffset(tt+ve.length,tt+ve.length),J=Lt}}this.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_END_OF_INPUT,J,"Unexpected string literal while parsing parameters."))}return s}};function qu(t){return t.length==0?null:t[0].startPosition}var RS=Y(id(),1),Bu=class{static regions(){return this.noParseRegions}static clear(){this.noParseRegions.clear()}static registerNoParseContent(e){let i=RS.Md5.hashStr(e);return this.noParseRegions.set(i,e),i}};Bu.noParseRegions=new Map;function b_(t,e){let i=new Set(t),r=new Set(e),n=new Set([...i].filter(s=>r.has(s)));return Array.from(n)}var I_=class{constructor(){this.closingTagIndex=new Map;this.closingTagIndexCount=new Map;this.openTagIndexCount=new Map;this.closingTagNames=new Map;this.parentNode=null;this.stackCount=0;this.createdExecutionBranches=[];this.document=null}getClosingCandidates(e){if((e instanceof B||e instanceof lt)&&e.isClosingTag==!1){let i=e.name?.compound??"";return i=="if"?["if","elseif","else"]:i=="elseif"?["elseif","else","if"]:i=="else"?["if"]:[i]}return[]}buildCloseIndex(e){e.forEach(i=>{if(!(i instanceof or)&&!((i instanceof B||i instanceof lt)&&i.isSelfClosing)&&(i instanceof B||i instanceof lt)&&i.isClosingTag){this.closingTagIndex.has(this.stackCount)==!1&&this.closingTagIndex.set(this.stackCount,new Map),this.closingTagIndexCount.has(this.stackCount)==!1&&this.closingTagIndexCount.set(this.stackCount,new Map);let r=i.name?.compound??"";this.closingTagIndex.get(this.stackCount)?.has(r)==!1&&(this.closingTagIndex.get(this.stackCount)?.set(r,[]),this.closingTagIndexCount.get(this.stackCount)?.set(r,0)),this.closingTagIndex.get(this.stackCount)?.get(r)?.push(i);let n=this.closingTagIndexCount.get(this.stackCount)?.get(r)??0;this.closingTagIndexCount.get(this.stackCount)?.set(r,n+1)}}),this.closingTagNames.has(this.stackCount)==!1&&this.closingTagNames.set(this.stackCount,[]),this.closingTagIndex.has(this.stackCount)&&(this.closingTagNames.set(this.stackCount,Array.from(this.closingTagIndex.get(this.stackCount)?.keys()??[])),this.closingTagIndex.get(this.stackCount)?.forEach((i,r)=>{let n=i.length;if(n==0)return;let s=i[n-1];for(let o=0;o<n;o++){let a=e[o];if(a instanceof B||a instanceof lt){if(a instanceof or)continue;if(a.index>=s.index)break;let l=a.name?.compound??"";if(a.isClosingTag==!1&&r==l&&!a.isSelfClosing){this.openTagIndexCount.has(this.stackCount)==!1&&this.openTagIndexCount.set(this.stackCount,new Map),this.openTagIndexCount.get(this.stackCount)?.has(r)==!1&&this.openTagIndexCount.get(this.stackCount)?.set(r,0);let u=this.openTagIndexCount.get(this.stackCount)?.get(r)??0;this.openTagIndexCount.get(this.stackCount)?.set(r,u+1)}}}}))}getScanForList(e){if(e instanceof B||e instanceof lt){let i=e.name?.compound;if(i=="else")return["if"];if(i=="elseif")return["elseif","else","if"];if(e.isClosingTag==!1){let r=this.getClosingCandidates(e),n=this.closingTagNames.get(this.stackCount);return b_(r,n)}}return[]}canPossiblyClose(e){if(e instanceof or)return!1;if(e instanceof lt||e instanceof B){if(e.isComment||e.isSelfClosing)return!1;let i=e.name?.compound??"";if(i=="else"||i=="elseif")return!0;if(e.isClosingTag==!1){let r=this.getClosingCandidates(e),n=this.closingTagNames.get(this.stackCount);return b_(r,n).length>0}}return!1}findClosingPair(e,i,r){let n=i.runtimeNodes.length,s=e.length,o=0;for(let a=0;a<s;a++){let l=e[a];if(l instanceof B||l instanceof lt)if(i.endPosition!=null&&l.startPosition!=null){if(i.endPosition.isBefore(l.startPosition)){if(l.isClosingTag&&l.isOpenedBy!=null||l.isSelfClosing)continue;let u=l.name?.compound??"";if(l.isClosingTag==!1){if(r.includes(u)){let c=this.openTagIndexCount.get(this.stackCount)?.get(u),f=this.closingTagIndexCount.get(this.stackCount)?.get(u);c!=f&&l.runtimeNodes.length>=n,o+=1}continue}if(r.includes(u)&&o>0){o-=1;continue}if(o==0&&r.includes(u)){l.isOpenedBy=i,i.isClosedBy=l;break}}}else continue}}associate(e,i){this.document=i;let r=[{documentNodes:e,parent:null}],n=[];for(;r.length>0;){let s=r.pop();if(s==null)continue;let o=s.documentNodes;this.parentNode=s.parent,this.stackCount+=1,this.buildCloseIndex(o),o=Vt.pairConditionals(o),o.forEach(c=>{if((c instanceof B||c instanceof lt)&&this.canPossiblyClose(c)){if(Vt.isConditionalStructure(c))return;let f=this.getScanForList(c);this.findClosingPair(o,c,f)}});let a=o.length;for(let c=0;c<a;c++){let f=o[c];if((f instanceof B||f instanceof lt)&&f.isClosedBy!=null)for(let d=c+1;d<a;d++){let h=o[d];if(h.index>f.isClosedBy.index)break;if(h.parent=f,f.children.push(h),h instanceof B&&h.index==f.index){h.parent=f;break}}}o.forEach(c=>{if((c instanceof B||c instanceof lt)&&c.children.length>0){let f=[];c.children.forEach(d=>{d.parent!=null&&d.parent.index==c.index&&(d.parent=c,f.push(d))}),r.push({documentNodes:f,parent:c})}});let l=[];o.forEach(c=>{this.parentNode==null?c.parent==null&&l.push(c):c.parent==this.parentNode&&l.push(c)}),l=this.reduceConditionals(l,i);let u=new Map;o.forEach(c=>{if((c instanceof B||c instanceof lt)&&c.isClosedBy!=null&&this.document!=null){let f=this.document.getText((c.endPosition?.index??0)+1,c.isClosedBy.startPosition?.index??0);c.runtimeContent=f}});for(let c=0;c<l.length;c++){let f=l[c],d=f.refId??"";if(u.set(d,1),(f instanceof B||f instanceof lt)&&f.isComment==!1&&f.name?.name=="noparse"&&!(f instanceof Qt)&&f.isClosingTag==!1){if(f.isClosedBy==null){f.pushError(D.makeSyntaxError(T.TYPE_NO_PARSE_UNASSOCIATED,f,"Encountered noparse region without a closing tag. All noparse regions must be closed."));continue}let h=f.content;this.document!=null&&(h=this.document.getText((f.endPosition?.index??0)+1,f.isClosedBy?.startPosition?.index??0));let p=new Qt,y=f.getParser();y!=null&&p.withParser(y),f.copyBasicDetailsTo(p),p.name=new ki,p.name.name="noparse",p.name.compound="noparse",p.content=Bu.registerNoParseContent(h),p.originalNode=f,p.isClosedBy=f.isClosedBy,p.parent=f.parent,l[c]=p}}if(this.parentNode!=null&&(this.parentNode instanceof lt||this.parentNode instanceof B)&&(this.parentNode.children=this.cleanNodes(l),this.parentNode.parent!=null&&this.parentNode.parent instanceof B)){let c=this.parentNode.parent.children,f=[];c.forEach(d=>{u.has(d.refId??"")==!1&&f.push(d)}),this.parentNode.parent.children=this.cleanNodes(f)}this.stackCount<=1&&(n=l)}return this.createdExecutionBranches.length>0&&this.createdExecutionBranches.forEach(s=>{s.head!=null&&(s.nodes=s.head.children)}),n}cleanNodes(e){let i=[],r=[];for(let n=0;n<e.length;n++){let s=e[n],o=s.refId;if(r.includes(o))break;i.push(s),r.push(o)}return i}findEndOfBranch(e,i,r){let n=[],s=r,o=null;for(let a=0;a<e.length;a++){let l=e[a];if((l instanceof B||l instanceof lt)&&l.isOpenedBy!=null&&l.isOpenedBy==i){o=l;break}else n.push(l)}return{children:n,tail:o,offset:s}}reduceConditionals(e,i){let r=[];for(let n=0;n<e.length;n++){let s=e[n];if((s instanceof B||s instanceof lt)&&s.isComment==!1&&s.isClosingTag==!1&&s.isClosedBy!=null)if((s.name?.compound??"")=="if"){let a=new Ve;a.index=s.index,a.chain.push(s.index),a.fragment=s.fragment,a.fragmentPosition=s.fragmentPosition,a.containsAnyFragments=s.containsAnyFragments,a.containsChildStructures=s.containsChildStructures;let l=s.startPosition?.offset??0,u=s.getFinalClosingTag(),c=(u.endPosition?.offset??0)+1;a.nodeContent=i.getText(l,c),this.parentNode!=null&&(a.parent=this.parentNode);let f=null,d=!0,h=0;for(;d;){if(h+=1,h>I_.ForceBreakLimit){d=!1;break}if(s instanceof B||s instanceof lt){let p=this.findEndOfBranch(e.slice(n+1),s,n),y=new nd,v=p.tail;y.head=s,y.tail=v,y.nodes=this.cleanNodes(s.children);let b=(s.endPosition?.offset??0)+1,I=s.isClosedBy?.startPosition?.offset??0,C=i.getText(b,I);if(y.documentText=C,i.shouldParseChildDocument()&&(y.childDocument=ut.childFromText(y.documentText,qu(y.nodes))),v==null&&(v=y.head.isClosedBy),v!=null&&v.startPosition!=null&&(y.startPosition=v.startPosition),v!=null&&(y.index=v.index),y.nodes.length>0){let q=y.nodes[y.nodes.length-1];q.endPosition!=null&&(y.endPosition=q.endPosition)}else v!=null&&v.endPosition!=null&&(y.endPosition=v.endPosition);if(this.createdExecutionBranches.push(y),a.logicBranches.push(y),v?.isClosingTag&&v.name?.compound=="if"){f=p.offset,d=!1;break}else v!=null&&a.chain.push(v.index),n=p.offset,v instanceof B&&(s=v)}else d=!1}if(a.logicBranches.length>0){let p=a.logicBranches[0],y=a.logicBranches[a.logicBranches.length-1];p.startPosition!=null&&(a.startPosition=p.startPosition),y.endPosition!=null&&(a.endPosition=y.endPosition)}if(r.push(a),f!=null&&f==e.length)break}else r.push(s);else r.push(s)}return r}},Yo=I_;Yo.ForceBreakLimit=1e5;var Tp=class{static associateRecursiveParent(e){for(let i=0;i<e.length;i++){let r=e[i];if(r instanceof or){let n="*recursive "+r.name?.name;if(i-1<0){r.pushError(D.makeSyntaxError(T.TYPE_RECURSIVE_NODE_INVALID_POSITION,r,"Unpaired recursive node. All recursive nodes must have a parent node introducing them."));continue}let s=null;for(let o=i-1;o>=0;o-=1){let a=e[o];if(!(a instanceof Le)&&a instanceof B&&a.isClosedBy!=null){if(r.isNestedRecursive){if(a.content.trim()==r.name?.name){s=a;break}}else if(a.runtimeContent.includes(n)&&j.substringCount(r.runtimeContent,"*recursive")==1){s=a;continue}else if(s!=null)break}}if(s==null)continue;r.isNestedRecursive?(s.hasRecursiveNode=!0,r.recursiveParent=s,s.recursiveReference=r):s.parent!=null?s.parent instanceof B&&(s.parent.hasRecursiveNode=!0,s.parent.recursiveReference=r,r.recursiveParent=s.parent):(s.hasRecursiveNode=!0,r.recursiveParent=s,s.recursiveReference=r)}}}};var Ko=class{static getNearText(e){if(e instanceof ie)return e.name;if(e instanceof kt)return e.value?.toString()??"";if(e instanceof Tt)return e.value;if(e instanceof Ct)return e.name;if(e instanceof Gt)return e.value;if(e instanceof hr||e instanceof fn||e instanceof ar||e instanceof wr||e instanceof xr||e instanceof ni||e instanceof jr||e instanceof Et||e instanceof ri||e instanceof kr||e instanceof Hi||e instanceof cn||e instanceof yi||e instanceof un||e instanceof Lr||e instanceof Yi||e instanceof Dr||e instanceof Wi||e instanceof Fr||e instanceof lr||e instanceof Vr||e instanceof Mr||e instanceof Or||e instanceof Pn||e instanceof ur||e instanceof Ki||e instanceof Ur||e instanceof Ti||e instanceof cr||e instanceof ci||e instanceof fr||e instanceof Br||e instanceof qr||e instanceof An||e instanceof dr||e instanceof $i||e instanceof jt||e instanceof Ut||e instanceof bi||e instanceof vt||e instanceof Zn||e instanceof fi||e instanceof dn||e instanceof wt)return e.content;let i="";return e instanceof B?e.originalNode!=null?i=e.originalNode.getContent():i=e.startPosition?.line.toString()??"":e.originalAbstractNode!=null?i=e.originalAbstractNode.rawContent():i=e.rawContent(),i.length>15&&(i=i.substr(0,-15)),i}};var $o=class{};$o.deferredCoreLibraries=["arr","array","str","string","method","math","sys","convert","scope","stopwatch","file","path","url","request","json","datetime"];var _t=class{};_t.ARR_PLUCK="pluck",_t.ARR_TAKE="take",_t.ARR_SKIP="skip",_t.ARR_MAKE="arr",_t.ARR_ORDERBY="orderby",_t.ARR_GROUPBY="groupby",_t.ARR_MERGE="merge",_t.QUERY_WHERE="where",_t.STRUCT_SWITCH="switch",_t.BITWISE_AND="bwa",_t.BITWISE_OR="bwo",_t.BITWISE_XOR="bxor",_t.BITWISE_NOT="bnot",_t.BITWISE_SHIFT_LEFT="bsl",_t.BITWISE_SHIFT_RIGHT="bsr",_t.operators=["pluck","take","arr","skip","orderby","groupby","merge","where","switch","bwa","bwo","bxor","bsl","bsr"];var Rt=class{constructor(){this.pathParser=new kn;this.tokens=[];this.createdVariables=[];this.createdModifierChains=[];this.createdLanguageOperators=[];this.createdArrays=[];this.tracedAssignments=[];this.mergedVariablePaths=[];this.mergedComponents=new Map;this.modifierNameMapping=new Map;this.isRealModifierSeparator=new Map;this.isRoot=!0;this.retriggerNonVirtualGroupMembers=[]}hasModifierConstruct(e){return this.modifierNameMapping.has(e)}getModifierConstruct(e){return this.modifierNameMapping.get(e)}isActualModifierSeparator(e){return this.isRealModifierSeparator.has(e)}isMergedVariableComponent(e){return this.mergedComponents.has(e)}getMergedVariable(e){return this.mergedComponents.get(e)}getMergedVariablePaths(){return this.mergedVariablePaths}getCreatedModifierChains(){return this.createdModifierChains}getCreatedLangaugeOperators(){return this.createdLanguageOperators}getCreatedArrays(){return this.createdArrays}getCreatedVariables(){return this.createdVariables}getRuntimeAssignments(){return this.tracedAssignments}getAssignedVariables(){let e=[],i=[];for(let r=0;r<this.tracedAssignments.length;r++){let n=this.tracedAssignments[r];n.target instanceof ie&&i.includes(n.target.name)==!1&&(i.push(n.target.name),e.push(n.target))}return e}getAssignedVariableNames(){let e=[];for(let i=0;i<this.tracedAssignments.length;i++){let r=this.tracedAssignments[i];r.target instanceof ie&&e.includes(r.target.name)==!1&&e.push(r.target.name)}return e}reset(){this.tokens=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.createdArrays=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.tracedAssignments=[],this.createdArrays=[],this.mergedVariablePaths=[],this.mergedComponents.clear(),this.modifierNameMapping.clear()}parse(e){return this.tokens=e,this.tokens=this.combineVariablePaths(this.tokens),this.tokens=this.createLanguageOperators(this.tokens),this.tokens=this.createLogicalGroups(this.tokens),this.tokens=this.associateMethodCalls(this.tokens),this.tokens=this.createTupleLists(this.tokens),this.tokens=this.createLibraryInvocations(this.tokens),this.tokens=this.associateModifiers(this.tokens),this.tokens=this.createNullCoalescenceGroups(this.tokens),this.tokens=this.correctTypes(this.tokens),this.tokens=this.createTernaryGroups(this.tokens),this.tokens=this.applyOperationOrder(this.tokens),this.validateNeighboringOperators(this.tokens),this.tokens=this.createLogicGroupsToRemoveMethodInvocationAmbiguity(this.tokens),this.tokens=this.createLogicGroupsToResolveOperatorAmbiguity(this.tokens),this.validateNoDanglingLogicGroupEnds(this.tokens),this.isRoot&&(this.tokens=this.insertAutomaticStatementSeparators(this.tokens),this.retriggerNonVirtualGroupMembers.length>0&&this.retriggerNonVirtualGroupMembers.forEach(i=>{this.markAllNonVirtualAsListGroupMember(i)})),this.createSemanticGroups(this.tokens)}setIsRoot(e){return this.isRoot=e,this}validateNeighboringOperators(e){let i=e.length;for(let r=0;r<i;r++){let n=e[r];if(Rt.isOperatorType(n)){if(r+1>=i){n.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_OPERATOR,n,"Unexpected operator while parsing input text."));return}let s=e[r+1];if(Rt.isOperatorType(s)){s.pushError(D.makeSyntaxError(T.TYPE_OPERATOR_INVALID_ON_RIGHT,s,"Unexpected operator while parsing input text."));continue}}}}static isAssignmentOperator(e){return e instanceof kr||e instanceof Dr||e instanceof Ki||e instanceof Fr||e instanceof Lr||e instanceof cn}static isOperatorType(e){return e instanceof kr||e instanceof Dr||e instanceof Ki||e instanceof Fr||e instanceof Lr||e instanceof cn||e instanceof An||e instanceof jr||e instanceof cr||e instanceof ni||e instanceof fr||e instanceof fn||e instanceof dr||e instanceof dn||e instanceof Hi||e instanceof Wi||e instanceof un||e instanceof lr||e instanceof Yi||e instanceof yi||e instanceof Ti||e instanceof ur||e instanceof Pn||e instanceof Or||e instanceof Mr||e instanceof qr||e instanceof Br||e instanceof Vr||e instanceof Ur}markAllNonVirtualAsListGroupMember(e){e.forEach(i=>{if(i instanceof xe||i instanceof pr||i instanceof Cn){i.start!=null&&i.start.isVirtual==!1&&(i.start.isListGroupMember=!0),i.end!=null&&i.end.isVirtual==!1&&(i.end.isListGroupMember=!0),i.scopeOperator!=null&&(i.scopeOperator.isListGroupMember=!0),i.nodes.forEach(r=>{this.markAllNonVirtualAsListGroupMember([r])});return}else i instanceof xt&&(i.separatorToken!=null&&i.separatorToken.isVirtual==!1&&(i.separatorToken.isListGroupMember=!0),this.markAllNonVirtualAsListGroupMember(i.nodes));i.isVirtual==!1&&(i.isListGroupMember=!0),i.originalAbstractNode!=null&&i.originalAbstractNode!=i&&this.markAllNonVirtualAsListGroupMember([i.originalAbstractNode])})}markAllNonVirtualAsSwitch(e){e.forEach(i=>{if(i instanceof xe||i instanceof pr||i instanceof Cn){i.start!=null&&i.start.isVirtual==!1&&(i.start.isSwitchGroupMember=!0),i.end!=null&&i.end.isVirtual==!1&&(i.end.isSwitchGroupMember=!0),i.scopeOperator!=null&&(i.scopeOperator.isSwitchGroupMember=!0),i.nodes.forEach(r=>{this.markAllNonVirtualAsSwitch([r])});return}else i instanceof xt&&(i.separatorToken!=null&&i.separatorToken.isVirtual==!1&&(i.separatorToken.isSwitchGroupMember=!0),this.markAllNonVirtualAsSwitch(i.nodes));i.isVirtual==!1&&(i.isSwitchGroupMember=!0),i.originalAbstractNode!=null&&i.originalAbstractNode!=i&&this.markAllNonVirtualAsSwitch([i.originalAbstractNode])})}validateNoDanglingLogicGroupEnds(e){e.forEach(i=>{i instanceof Ut&&i.pushError(D.makeSyntaxError(T.TYPE_LOGIC_GROUP_NO_START,i,"Unexpected [T_LOGIC_END] while parsing input text."))})}isValidModifierValue(e){return e instanceof Gt||e instanceof ie||e instanceof wr||e instanceof xr||e instanceof ar||e instanceof kt||e instanceof Tt}wrapNumberInVariable(e){let i=new ie;return i.startPosition=e.startPosition,i.endPosition=e.endPosition,i.name=e.value?.toString()??"",i.content=e.value?.toString()??"",i.originalAbstractNode=e,i.refId=e.refId,i.modifierChain=e.modifierChain,i.index=e.index,this.createdVariables.push(i),i}wrapArithmeticModifier(e,i){let r=new Ct;return r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.originalAbstractNode=e,r.content=i,r.name=i,r.index=e.index,r}combineVariablePaths(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n],o=i.length;if(s instanceof vt){if(o==0){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE,s,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}if(n+1>r){let u="";if(n>0){let c=e[n-1];u=Ko.getNearText(c)}s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP,s,'Unexpected end of input while parsing input text near "'+u+Ko.getNearText(s)+'".'));continue}let a=i[o-1],l=e[n+1];if(l instanceof kt&&at.distance(a,l)==1&&(l=this.wrapNumberInVariable(l)),a instanceof ie&&l instanceof ie&&at.distance(a,l)==1){i.pop(),at.mergeVarContentRight(":",s,l),at.mergeVarRight(a,l),i.push(l),this.createdVariables.push(l),this.mergedVariablePaths.push(l),this.mergedComponents.set(s,l),this.mergedComponents.set(a,l),this.mergedComponents.set(l,l),n+=1;continue}else{i.push(s);continue}}else if(s instanceof Tt&&o>0){if(n+1>=r){i.push(s);continue}let a=i[o-1],l=e[n+1];if(a instanceof ie&&l instanceof ie&&at.distance(a,s)<=1&&at.distance(s,l)<=1){i.pop(),n+=1;continue}else i.push(s)}else if(s instanceof yi&&o>0){let a=i[o-1],l=e[n+1];if(a instanceof ie&&(l instanceof ie||l instanceof fr)){let u=at.distance(a,s),c=at.distance(s,l);u<=1&&c<=1?(a.endPosition=l.endPosition,this.mergedComponents.set(s,a),this.mergedComponents.set(a,a),this.mergedComponents.set(l,a),n+=1):i.push(s)}else i.push(s)}else i.push(s)}return i.forEach(n=>{n instanceof ie&&!n.name.trim().startsWith("[")&&(n.variableReference=this.pathParser.parse(n.name),n.mergeErrors(this.pathParser.getAntlersErrors()))}),i}convertVarNodeToOperator(e){let i=new jr;return i.content=e.name,i.startPosition=e.startPosition,i.endPosition=e.endPosition,i.originalAbstractNode=e,e.convertedToOperator=!0,this.createdLanguageOperators.push(i),i}convertOperatorToVarNode(e){let i=new ie;return i.startPosition=e.startPosition,i.endPosition=e.endPosition,i.content=e.content,i.name=e.content,i.originalAbstractNode=e,this.createdVariables.push(i),i}createLanguageOperators(e){let i=e.length;for(let r=0;r<i;r++){let n=e[r];if(n instanceof ie){if(n.name.includes(x.Punctuation_FullStop)){let s=n.name.split(x.Punctuation_FullStop);if(_t.operators.includes(s[0])||$o.deferredCoreLibraries.includes(s[0])){e[r]=this.convertVarNodeToOperator(n);continue}}if(_t.operators.includes(n.name)){e[r]=this.convertVarNodeToOperator(n);continue}}if(n instanceof jr){if(r+1>=i){e[r]=this.convertOperatorToVarNode(n);continue}if(e[r+1]instanceof ri){e[r]=this.convertOperatorToVarNode(n);continue}}}return e}createLogicalGroups(e){let i=[],r=e.length,n=[];for(let o=0;o<r;o++){let a=e[o];if(a instanceof ni){let l=this.countTypeRight(e,o,ni);if(n.length==0&&e.length==l){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR,a,"Unexpected [T_LOGIC_INVERSE] while parsing input text."));continue}if(o>0&&n.length>0){let f=n[n.length-1];if(f instanceof kt||f instanceof Ut||f instanceof xe){if(f instanceof xe&&f.start instanceof ni){f.start.pushError(D.makeSyntaxError(T.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED,f.start,"[T_AOP_FACTORIAL] operand will always materialize boolean type."));continue}let d=new Zn;d.startPosition=a.startPosition,d.endPosition=a.endPosition,d.content="!".repeat(l),d.originalAbstractNode=a,d.repeat=l,n.push(d),l>0&&(o+=l-1);continue}}if(l%2==0){o+=l-1;continue}let u=e[o+l];if(u instanceof jt){let f=o+l+1;if(f>=r){u.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET,u,"Unexpected end of input while parsing input text."));continue}let d=this.findLogicalGroupEnd(e[o+l],e.slice(f));if(d.found){let h=d.logicalGroup,p=new xe;p.start=a,p.end=h,p.nodes.push(a),p.nodes.push(h),p.startPosition=a.startPosition,p.endPosition=h.endPosition,n.push(p),o+=d.skipCount+l}continue}let c=this.resolveValueRight(e,o);c.value!=null&&n.push(c.value),o+=c.negationCount}else n.push(a)}let s=n.length;for(let o=0;o<s;o++){let a=n[o];if(a instanceof jt){if(o+1>=s){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION,a,"Unexpected end of input while parsing input text."));continue}let l=this.findLogicalGroupEnd(a,n.slice(o+1));l.found&&l.logicalGroup!=null&&i.push(l.logicalGroup),o+=l.skipCount}else if(a instanceof Zn){if(i.length==0){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS,a,"Unexpected [T_AOP_FACTORIAL] while parsing input text."));continue}let l=i[i.length-1];if(!(l instanceof xe)&&!(l instanceof kt)){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_FACTORIAL_OPERAND,a,"Unexpected left operand encountered for [T_AOP_FACTORIAL] while parsing input text."));continue}l=i.pop();let u=new xe;u.startPosition=l.startPosition,u.endPosition=a.endPosition,u.originalAbstractNode=a,u.nodes.push(l),u.nodes.push(a),i.push(u)}else i.push(a)}return i}makeArgGroup(e){let i=new Mo,r=e.length;for(let s=0;s<r;s++){let o=e[s];if(this.isOperand(o)==!1){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing argument group."));continue}let a=null;if(s+1<r&&(a=e[s+1]),a==null||a instanceof Et){i.args.push(e[s]),s+=1;continue}else if(a instanceof vt){if(s+2>=r){o.pushError(D.makeSyntaxError(T.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT,o,"Unexpected end of input while parsing named argument."));continue}let l=e[s+2],u=new wu;u.startPosition=o.startPosition,u.endPosition=l.endPosition,u.content=o.content+l.content,u.name=o,u.value=l,o instanceof ie||o.pushError(D.makeSyntaxError(T.TYPE_INVALID_NAMED_ARG_IDENTIFIER,o,"Invalid type ["+H.getPrettyTypeName(o)+"] supplied for named argument name.")),i.hasNamedArguments=!0,i.numberOfNamedArguments+=1,i.args.push(u),s+3<r&&e[s+3]instanceof Et?s+=3:s+=2;continue}}let n=!1;return i.args.forEach(s=>{s instanceof wu?n=!0:n&&s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT,s,"Unnamed arguments are not allowed to appear after a named argument."))}),i.args.length>0&&(i.startPosition=i.args[0].startPosition,i.endPosition=i.args[i.args.length-1].endPosition),i}cleanVariableForMethodInvocation(e){(e.name.startsWith(":")||e.name.startsWith("."))&&(e.name=e.name.substr(1),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(1),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(1)),e.startPosition!=null&&(e.startPosition.offset+=1,e.startPosition.char+=1))}reduceVariableReferenceForObjectAccessor(e){let i=e.variableReference?.pathParts.pop(),r=i.name,n=r.length+1;return e.name=e.name.substr(0,-n),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(0,-n),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(0,-n),e.variableReference.pathParts[e.variableReference.pathParts.length-1].isFinal=!0),e.endPosition!=null&&(e.endPosition.offset-=n,e.endPosition.char-=n),{accessor:r,accessorLen:n}}associateMethodCalls(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n],o=null,a=null;if(i.length>0&&(o=i[i.length-1]),n+1<r&&(a=e[n+1]),s instanceof ie&&a instanceof xe&&o!=null&&(this.isProperMethodChainTargetStrict(o)||o instanceof vt)){let l=a,u=[];l.nodes.length>0&&(l.nodes[0]instanceof xt?u=l.nodes[0].nodes:u=l.nodes);let c=new wt;if(c.startPosition=s.startPosition,o instanceof vt){let f=i.pop();c.startPosition=f.startPosition}this.cleanVariableForMethodInvocation(s),c.endPosition=l.endPosition,c.args=this.makeArgGroup(u),c.method=s,o.methodTarget=c,o instanceof ie&&o.mergeRefName.length>0&&(o.name=at.getUnrefName(o.mergeRefName)),i.push(c),n+=1;continue}else if(s instanceof xe&&o instanceof ie&&o.variableReference!=null&&o.variableReference.pathParts.length>=2){let l=[];if(s.nodes.length>0&&(s.nodes[0]instanceof xt?l=s.nodes[0].nodes:l=s.nodes),o.variableReference.pathParts[0]instanceof zt&&$o.deferredCoreLibraries.includes(o.variableReference.pathParts[0].name)){let h=i.pop(),p=new es;p.startPosition=h.startPosition,p.endPosition=s.endPosition,p.content=h.content,p.originalAbstractNode=s;let v=(h.variableReference?.pathParts.shift()).name,b=h.variableReference?.implodePaths();p.libraryName=v,p.methodName=b,p.arguments=this.makeArgGroup(l),i.push(p),n+=1;continue}let u=this.reduceVariableReferenceForObjectAccessor(o),c=new wt;c.startPosition=s.startPosition,c.endPosition=s.endPosition,o.methodTarget=c,o instanceof ie&&o.mergeRefName.length>0&&(o.name=at.getUnrefName(o.mergeRefName)),s.start!=null&&(s.start.isPartOfMethodChain=!0),s.end!=null&&(s.end.isPartOfMethodChain=!0);let f=new ie;f.name=u.accessor,f.isPartOfMethodChain=!0;let d=this.makeArgGroup(l);if(c.startPosition!=null&&(c.startPosition.offset-=u.accessorLen,c.startPosition.char-=u.accessorLen),c.method=f,c.args=d,j.isNumeric(o.name)){let h=i.pop();i.push(this.convertOperatorToVarNode(h))}i.push(c);continue}else if(s instanceof ie&&o instanceof wt){if(this.cleanVariableForMethodInvocation(s),n+1>r){s.pushError(D.makeSyntaxError(T.TYPE_METHOD_CALL_MISSING_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let l=e[n+1];if(!(l instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+H.getPrettyTypeName(l)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let u=l,c=[];u.nodes.length>0&&(u.nodes[0]instanceof xt?c=u.nodes[0].nodes:c=u.nodes);let f=new wt;f.startPosition=s.startPosition,f.endPosition=u.endPosition,f.args=this.makeArgGroup(c),f.method=s,o.methodTarget=f,i.push(f),n+=1;continue}else if(s instanceof vt&&o instanceof wt){if(n+1>r){s.pushError(D.makeSyntaxError(T.TYPE_METHOD_CALL_MISSING_METHOD,s,"Unexpected end of input while parsing method call."));continue}let l=e[n+1];if(n+2>r){s.pushError(D.makeSyntaxError(T.TYPE_METHOD_CALL_MISSING_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let u=e[n+2];if(!(u instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+H.getPrettyTypeName(u)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let c=u,f=[];c.nodes.length>0&&(c.nodes[0]instanceof xt?f=c.nodes[0].nodes:f=c.nodes);let d=new wt;d.startPosition=s.startPosition,d.endPosition=u.endPosition,d.args=this.makeArgGroup(f),d.method=l,o.methodTarget=d,i.push(d),n+=2;continue}else if(s instanceof wt){if(n+1>r){s.pushError(D.makeSyntaxError(T.TYPE_METHOD_CALL_MISSING_METHOD,s,"Unexpected end of input while parsing method call."));continue}let l=e[n+1];if(n+2>r){s.pushError(D.makeSyntaxError(T.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let u=e[n+2];if(!(u instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+H.getPrettyTypeName(u)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let c=u,f=[];c.nodes.length>0&&(c.nodes[0]instanceof xt?f=c.nodes[0].nodes:f=c.nodes);let d=this.makeArgGroup(f);if(o instanceof ie&&$o.deferredCoreLibraries.includes(o.name)){let h=i.pop(),p=new es;p.startPosition=h.startPosition,p.endPosition=c.endPosition,p.libraryName=h.name,p.methodName=l.name,p.content=p.libraryName+"->"+p.methodName,p.arguments=d,o.libraryTarget=p,i.push(p),n+=2;continue}s.method=l,s.args=d,i.length>0&&(i[i.length-1].methodTarget=s),n+=2,i.push(s);continue}else i.push(s)}return i}convertVariableToStringNode(e){let i=new Tt;return i.content=e.name,i.value=e.name,i.originalAbstractNode=e,i.startPosition=e.startPosition,i.endPosition=e.endPosition,i.index=e.index,i}createTupleLists(e){let i=e.length,r=[];for(let n=0;n<i;n++){let s=e[n];if(s instanceof hr){if(s.isListGroupMember=!0,n+1>=i){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST,s,"Unexpected end of input while parsing tuple list."));continue}let o=e[n+1];if(!(o instanceof xe)){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing tuple list."));continue}let a=o;if(this.markAllNonVirtualAsListGroupMember([a]),this.retriggerNonVirtualGroupMembers.push([a]),a.nodes.length==0){a.pushError(D.makeSyntaxError(T.TYPE_MISSING_BODY_TUPLE_LIST,a,"Missing tuple list body while parsing tuple list."));continue}let u=a.nodes.shift(),c=u.nodes.length,f=[];for(let p=0;p<c;p++){let y=u.nodes[p];if(!(y instanceof Et)){let v=!1;if(y instanceof ie&&(y.variableReference==null&&(v=!0),y.variableReference!=null&&y.variableReference.pathParts.length>1&&(v=!0),y.name.trim().length==0&&(v=!0)),v||!(y instanceof ie)){a.pushError(D.makeSyntaxError(T.TYPE_INVALID_TUPLE_LIST_NAME_TYPE,a,"Invalid ["+H.getPrettyTypeName(y)+"] name type found while parsing tuple list."));continue}let b=y;f.push(this.convertVariableToStringNode(b))}}let d=f.length;if(d==0){a.pushError(D.makeSyntaxError(T.TYPE_INVALID_MANIFESTED_NAME_GROUP,a,"Invalid Name expression produced an invalid name group while parsing tuple list."));continue}let h=new En;this.createdArrays.push(h),h.startPosition=s.startPosition,h.endPosition=s.endPosition,a.nodes.forEach(p=>{if(!(p instanceof xt)){p.pushError(D.makeSyntaxError(T.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP,p,"Invalid ["+H.getPrettyTypeName(p)+"] name type found while parsing tuple list value expression."));return}let y=p,v=new En;this.createdArrays.push(v),v.startPosition=y.startPosition;let b=[];for(let I=0;I<c;I++){let C=y.nodes[I];if(typeof C>"u"||C==null)break;if(!(C instanceof Et)){if(this.isOperand(C)==!1){C.pushError(D.makeSyntaxError(T.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE,C,"Unexpected ["+H.getPrettyTypeName(C)+"]  while parsing tuple list value."));continue}b.push(C)}}for(let I=0;I<d&&!(I>b.length);I++){let C=b[I],q=new Ja;q.startPosition=C.startPosition,q.endPosition=C.endPosition,q.name=f[I],q.value=C,v.nodes.push(q),h.endPosition=C.endPosition,v.endPosition=C.endPosition}h.nodes.push(v)}),r.push(h),n+=1;continue}else r.push(s)}return e}makeOrderGroup(e){let i=[],r=e.length,n=0;for(let s=0;s<r;s++){let o=e[s],a=null;if(s+1<r&&(a=e[s+1]),s>0&&(a==null||a instanceof Et)){n+=1;let l=new za;l.order=n,l.name=e[s-1],l.directionNode=o,this.isOperand(l.name)==!1&&l.name.pushError(D.makeSyntaxError(T.TYPE_INVALID_ORDER_BY_NAME_VALUE,l.name,"Invalid value or expression supplied for order by name.")),this.isOperand(l.directionNode)==!1&&l.directionNode.pushError(D.makeSyntaxError(T.TYPE_INVALID_ORDER_BY_SORT_VALUE,l.directionNode,"Invalid value or expression supplied for order by direction.")),l.startPosition=l.name.startPosition,l.endPosition=l.directionNode.endPosition,i.push(l),s+=1;continue}}return i}getValues(e){let i=new Lo,r=e.length,n=[];for(let s=0;s<r;s++){let o=e[s],a=null;if(s+1<r&&(a=e[s+1]),a==null||a instanceof Et){n.push(o),s+=1;continue}}return i.values=n,i}createLibraryInvocations(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n];if(s instanceof jr)if(s.content.includes(".")){let o=s.content.split("."),a=o.shift(),l=o.join("."),u=new es;if(u.startPosition=s.startPosition,u.endPosition=s.endPosition,u.content=s.content,u.libraryName=a,u.methodName=l,u.originalAbstractNode=s,n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP,s,"Unexpected end of input while parsing argument group."));continue}if(!(e[n+1]instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_EXPECTING_ARGUMENT_GROUP,s,"Unexpected token while parsing method call. Expecting [T_ARG_SEPARATOR] got ["+H.getPrettyTypeName(s)+"]."));continue}let c=e[n+1],f=null;if(c.nodes.length>0){let d=c.nodes[0];f=this.makeArgGroup(d.nodes)}f==null&&(f=new Mo,f.startPosition=c.startPosition,f.endPosition=c.endPosition,f.originalAbstractNode=c),u.arguments=f,i.push(u),n+=1;continue}else if(s.content==_t.ARR_ORDERBY){if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP,s,"Unexpected end of input while parsing order group."));continue}let o=e[n+1];if(!(o instanceof xe)){o.pushError(D.makeSyntaxError(T.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing order group."));continue}let l=o.nodes;l[0]instanceof xt&&(l=l[0].nodes);let u=this.makeOrderGroup(l);u.length==0&&s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP,s,"Unexpected empty [T_DIRECTION_GROUP]. Must have at least one order clause, and each property must have a direction specified."));let c=new Fs;if(c.orderClauses=u,u.length>0){u[0].directionNode!=null&&(c.startPosition=u[0].directionNode.startPosition);let f=u[u.length-1].directionNode;f!=null&&(c.endPosition=f.endPosition)}i.push(s),i.push(c),n+=1;continue}else if(s.content==_t.ARR_GROUPBY){if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY,s,"Unexpected end of input while parsing group by clause."));continue}let o=e[n+1];if(o instanceof Cn||o instanceof pr){o.pushError(D.makeSyntaxError(T.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED,o,"Type ["+H.getPrettyTypeName(o)+"] must be enclosed with parenthesis to be used with groupby."));continue}if(!(o instanceof xe)){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing group by."));continue}let l=o.nodes;l[0]instanceof xt&&(l=l[0].nodes);let u=this.getValues(l);if(i.push(s),i.push(u),n+2<r&&n+3<r){let c=e[n+2],f=e[n+3];if(at.isVariableMatching(c,He.ScopeAs))if(f instanceof Tt){u.isNamedNode=!0,u.parsedName=f,n+=3;continue}else f.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE,f,"Expecting [T_STRING] for group by collection alias; got ["+H.getPrettyTypeName(f)+"]."))}n+=1;continue}else if(s.content==_t.STRUCT_SWITCH){if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP,s,"Unexpected end of input while parsing [T_SWITCH_GROUP]."));continue}let o=e[n+1];if(!(o instanceof pr)){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing [T_SWITCH_GROUP]."));continue}let a=o;if(this.markAllNonVirtualAsSwitch([o]),a.scope==null||!(a.scope instanceof xe)){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_SWITCH_START_VALUE,a,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let l=a.scope;if(l.nodes.length==0||!(l.nodes[0]instanceof xt)){a.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,a,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let u=l.nodes[0];if(this.markAllNonVirtualAsSwitch([l]),u.nodes.length==0||!(u.nodes[0]instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}this.markAllNonVirtualAsSwitch([s]),this.markAllNonVirtualAsSwitch(u.nodes);let c=u.nodes;if(a.nodes.length==0&&s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP].")),!(l.nodes[0]instanceof xt)){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let d=l.nodes[0];this.markAllNonVirtualAsSwitch(d.nodes);let h=d.nodes,p=new Ls,y=new xe;y.nodes=c,y.startPosition=y.nodes[0].startPosition,y.endPosition=y.nodes[y.nodes.length-1].endPosition;let v=new Oo;v.condition=y;let b=new xe;b.nodes.push(h.shift()),b.startPosition=b.nodes[0].startPosition,b.endPosition=b.nodes[b.nodes.length-1].endPosition,v.expression=b,v.startPosition=v.condition.startPosition,v.endPosition=v.expression.nodes[v.expression.nodes.length-1].endPosition,h.shift(),p.cases.push(v);let I=h.length;if(I>0){if(!(h[0]instanceof xe)){s.pushError(D.makeSyntaxError(T.TYPE_PARSER_INVALID_SWITCH_TOKEN,s,"Invalid ["+H.getPrettyTypeName(h[0])+"] while parsing case statement."));continue}for(let C=0;C<I;C++){let q=h[C],K=null;if(q instanceof Et){q.isSwitchGroupMember=!0;continue}if(C+1<I&&(K=h[C+1]),K instanceof fi){K.isSwitchGroupMember=!0;let J=new Oo;J.condition=q,this.markAllNonVirtualAsSwitch([J.condition]);let ve=new xe;if(ve.nodes.push(h[C+2]),ve.startPosition=ve.nodes[0].startPosition,ve.endPosition=ve.nodes[ve.nodes.length-1].endPosition,J.expression=ve,this.markAllNonVirtualAsSwitch([ve]),J.startPosition=J.condition.startPosition,J.endPosition=J.expression.nodes[J.expression.nodes.length-1].endPosition,p.cases.push(J),C+3<I&&!(h[C+3]instanceof Et)){h[C+3].pushError(D.makeSyntaxError(T.TYPE_PARSER_INVALID_SWITCH_TOKEN,h[C+3],"Invalid ["+H.getPrettyTypeName(h[C+3])+"] while parsing case statement; expecting [T_ARG_SEPARATOR]."));continue}h[C+3].isSwitchGroupMember=!0,C+=2;continue}}}i.push(new ar),i.push(s),i.push(p),n+=1;continue}else if(s.content==_t.ARR_MAKE){if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_ARR_MAKE_MISSING_TARGET,s,"Missing target variable for arr operator."));continue}let o=e[n+1];if(!(o instanceof xe)){o.pushError(D.makeSyntaxError(T.TYPE_ARR_MAKE_UNEXPECTED_TYPE,o,"Unexpected ["+H.getPrettyTypeName(o)+"] while parsing array."));continue}let a=o instanceof pr,l=o,u=l.nodes;if(u[0]instanceof xt&&(u=u[0].nodes),a){let h=o;u.unshift(new fi),u.unshift(h.scope)}let c=this.getArrayValues(u),f=new En;f.startPosition=s.startPosition;let d=c.values.length;d>0?f.endPosition=c.values[d-1].endPosition:f.endPosition=s.endPosition,l.end!=null&&(f.endPosition=l.end.endPosition),f.nodes=c.values,this.createdArrays.push(f),i.push(f),n+=1}else i.push(s);else i.push(s)}return i}getArrayValues(e){let i=new Lo,r=e.length,n=[];for(let s=0;s<r;s++){let o=e[s];if(o instanceof Et){o.pushError(D.makeSyntaxError(T.TYPE_ARR_UNEXPECT_ARG_SEPARATOR,o,"Unexpected [T_ARG_SEPARATOR] while parsing array."));continue}if(o instanceof fi){if(s==0){o.pushError(D.makeSyntaxError(T.TYPE_ARR_KEY_PAIR_MISSING_KEY,o,"Missing key for key/value pair while parsing array."));continue}else if(e[s-1]instanceof Et){o.pushError(D.makeSyntaxError(T.TYPE_ARR_KEY_PAIR_MISSING_KEY,o,"Missing key for key/value pair while parsing array."));continue}}let a=null;if(s+1<r&&(a=e[s+1]),a instanceof fi){if(s+2>=r){a.pushError(D.makeSyntaxError(T.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE,a,"Missing key/pair value while parsing array."));continue}let l=e[s+2],u=new Ja;if(this.isValidArrayKeyNode(o)==!1){o.pushError(D.makeSyntaxError(T.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE,o,"Invalid ["+H.getPrettyTypeName(o)+"] type for key/value key."));continue}u.name=o,u.value=l,u.startPosition=o.startPosition,u.endPosition=l.endPosition,n.push(u),s+=3;continue}if(a==null||a instanceof Et){let l=new Ja;l.value=o,l.startPosition=o.startPosition,l.endPosition=o.endPosition,n.push(l),s+=1;continue}}return i.values=n,i}isValidArrayKeyNode(e){return e instanceof kt||e instanceof Tt}associateModifiers(e){let i=[],r=e.length,n=null;for(let s=0;s<r;s++){let o=e[s];if(o instanceof ci){let a=i.length;if(a==0){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_MODIFIER_SEPARATOR,o,"Unexpected [T_MODIFIER_SEPARATOR] while parsing input text."));continue}if(this.isRealModifierSeparator.set(o,!0),n=i[a-1],n.modifierChain==null&&(n.modifierChain=new $a,n.modifierChain.modifierTarget=n,this.createdModifierChains.push(n.modifierChain)),s+1>=r){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS,o,"Unexpected end of input while preparing to gather modifier details."));continue}let l=this.scanToEndOfModifier(e.slice(s+1)),u=l.length;if(u>1&&l[1]instanceof vt){this.isRealModifierSeparator.set(l[1],!0);let f=l[0];f instanceof Hi?l[0]=this.wrapArithmeticModifier(f,"add"):f instanceof yi?l[0]=this.wrapArithmeticModifier(f,"subtract"):f instanceof Wi?l[0]=this.wrapArithmeticModifier(f,"divide"):f instanceof Yi?l[0]=this.wrapArithmeticModifier(f,"multiply"):f instanceof lr&&(l[0]=this.wrapArithmeticModifier(f,"mod"))}if(u==0){o.pushError(D.makeSyntaxError(T.TYPE_UNSET_MODIFIER_DETAILS,o,"Invalid or missing modifier details."));continue}if(!(l[0]instanceof Ct)){o.pushError(D.makeSyntaxError(T.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS,o,"Invalid ["+H.getPrettyTypeName(l[0])+"]; expecting [T_MODIFIER_NAME]"));continue}let c=this.createModifier(l);c.nameNode!=null&&this.modifierNameMapping.set(c.nameNode,c),s+=u,n.modifierChain.modifierChain.push(c),n.modifierChain.updateValues();continue}else i.push(o)}return i}createNullCoalescenceGroups(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n];if(s instanceof dr){let o=i.pop();if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP,s,"Unexpected end of input while parsing input text."));continue}let a=e[n+1],l=new Qa;l.left=o,l.right=a,i.push(l),n+=1;continue}else i.push(s)}return i}isOperand(e){return e instanceof ie||e instanceof xe||e instanceof Tt||e instanceof kt||e instanceof xr||e instanceof ar||e instanceof wr||e instanceof es||e instanceof Fs||e instanceof Lo||e instanceof Ls||e instanceof En||e instanceof hr||e instanceof fi}isProperMethodChainTargetStrict(e){return e instanceof xe||e instanceof Tt||e instanceof kt||e instanceof xr||e instanceof ar||e instanceof wr||e instanceof es||e instanceof Fs||e instanceof Lo||e instanceof Ls||e instanceof En}assertOperandRight(e,i){if(i+1>e.length-1)return e[i].pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_END_OF_INPUT,e[i],"Unexpected end of input; expecting operand for operator "+H.getPrettyTypeName(e[i])+' near "'+Ko.getNearText(e[i])+'".')),!1;let r=e[i+1];return this.isOperand(r)?!0:(r.pushError(D.makeSyntaxError(T.TYPE_EXPECTING_OPERAND,e[i],"Expecting operand, found "+H.getPrettyTypeName(r)+' near "'+Ko.getNearText(e[i])+'".')),!1)}resolveValueRight(e,i){let r=null,n=0,s=null;if(e.length>0){let o=!0;for(;o;){let a=e[i];if(a instanceof ni){s=a,n+=1,i+=1,o=!1;continue}else if(this.isOperand(a)){r=a,o=!1;break}else{o=!1;break}}}if(n%2!=0){let o=new xe;return o.nodes=[],s!=null&&r!=null&&(o.nodes.push(s),o.nodes.push(r)),{value:o,negationCount:n}}return{value:r,negationCount:n}}correctTypes(e){let i=[];return e.forEach(r=>{if(r instanceof bi){let n=new vt;n.startPosition=r.startPosition,n.endPosition=r.endPosition,n.originalAbstractNode=r,i.push(n)}else if(r instanceof Gt){let n=new ie;n.name=r.value,n.startPosition=r.startPosition,n.endPosition=r.endPosition,n.modifierChain=r.modifierChain,n.originalAbstractNode=r,this.createdVariables.push(n),i.push(n)}else i.push(r)}),i}createTernaryGroups(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n];if(s instanceof $i){let o=this.seek(vt,n+1);if(o.node?.originalAbstractNode!=null&&o.node.originalAbstractNode instanceof bi&&(o.node.originalAbstractNode.isTenaryBranchSeparator=!0),o.found==!1){s.pushError(D.makeSyntaxError(T.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR,s,"Unexpected end of input; expecting [T_BRANCH_SEPARATOR]."));continue}let a=this.collectUntil(i);i=a.tokens;let l=a.collectedTokens[0],u=o.foundAt??0;if(u>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP,s,"Unexpected end of input while parsing ternary group."));continue}let c=e.slice(n+1,u);if(c.length>1||c.length==0){s.pushError(D.makeSyntaxError(T.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH,s,"Unexpected number of operations within ternary truth branch."));continue}let f=c[0],d=(o.foundAt??0)+1;if(d>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH,s,"Unexpected end of input while parsing ternary false execution branch."));continue}let h=e[d],p=new Xa;p.head=l,p.truthBranch=f,p.falseBranch=h,i.push(p),n=(o.foundAt??0)+1;continue}else i.push(s)}return i}groupNodesByType(e,i){let r=[],n=e.length;for(let s=0;s<n;s++){let o=e[s];if(s>0&&o instanceof i){let a=[],l=r.pop();if(a.push(l),!this.assertOperandRight(e,s))continue;if(s+1>=n){o.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,o,"Unexpected end of input while parsing input text."));continue}let u=e[s+1];typeof u<"u"&&(u.isVirtualGroupMember=!0),typeof l<"u"&&(l.isVirtualGroupMember=!0),o.isVirtualGroupMember=!0;let c=new xe;c.nodes=a,c.nodes.push(o),c.nodes.push(u),s+=1,r.push(c);continue}else r.push(o)}return r}flagNodeAsOperatorResolve(e){if(e instanceof xe){if(e.nodes.length==0)return;this.flagNodeAsOperatorResolve(e.nodes[e.nodes.length-1])}e.isVirtualGroupOperatorResolve=!0,e.next instanceof ri||(e.producesVirtualStatementTerminator=!0)}groupNodesByOperatorType(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n];if(n>0&&Rt.isOperatorType(s)){let o=[],a=i.pop();if(o.push(a),!this.assertOperandRight(e,n))continue;if(n+1>=r){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,s,"Unexpected end of input while parsing input text."));continue}let l=e[n+1];this.flagNodeAsOperatorResolve(l),Rt.isAssignmentOperator(s)&&this.tracedAssignments.push(new cd(a,l,s)),typeof a<"u"&&(a.isVirtualGroupMember=!0),typeof l<"u"&&(l.isVirtualGroupMember=!0),s.isVirtualGroupMember=!0;let u=new xe;u.nodes=o,u.nodes.push(s),u.nodes.push(l),n+=1,i.push(u);continue}else i.push(s)}return i}applyOperationOrder(e){return e=this.groupNodesByType(e,un),e=this.groupNodesByType(e,Yi),e=this.groupNodesByType(e,Wi),e=this.groupNodesByType(e,Hi),e=this.groupNodesByType(e,yi),e}createLogicGroupsToRemoveMethodInvocationAmbiguity(e){let i=[],r=e.length,n=r-1;for(let s=0;s<r;s++){let o=e[s];if(o instanceof wt){let a=i.pop(),l=new xe;if(l.startPosition=a.startPosition,typeof a<"u"&&(a.isVirtualGroupMember=!0),typeof o<"u"&&(o.isVirtualGroupMember=!0),l.nodes.push(a),l.nodes.push(o),s!=n)for(let u=s+1;u<r;u++)if(e[u]instanceof wt){if(typeof e[u]>"u")continue;if(e[u].isVirtualGroupMember=!0,l.nodes.push(e[u]),u==n){u+=1;break}}else{if(u==n){u+=1;break}s=u-1;break}l.endPosition=l.nodes[l.nodes.length-1].endPosition,i.push(l)}else i.push(o)}return i}countTypeRight(e,i,r){let n=0;for(let s=i;s<e.length&&e[s]instanceof r;s++)n+=1;return n}createLogicGroupsToResolveOperatorAmbiguity(e){return e=this.groupNodesByType(e,Pn),e=this.groupNodesByType(e,ur),e=this.groupNodesByType(e,Mr),e=this.groupNodesByType(e,Or),e=this.groupNodesByType(e,Ur),e=this.groupNodesByType(e,Ti),e=this.groupNodesByType(e,Br),e=this.groupNodesByType(e,qr),e=this.groupNodesByType(e,Vr),e=this.groupNodesByOperatorType(e),e}createModifier(e){let i=e.shift(),r=[],n=e.length;if(e.length>0&&e[0]instanceof xe){let o=this.unpack(e[0].nodes),a=this.makeArgGroup(o);a.endPosition=e[0].endPosition;let l=new Fo;if(l.nameNode=i,l.methodStyleArguments=a,e.length>1)for(let u=1;u<n;u++)e[u].pushError(D.makeSyntaxError(T.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX,e[u],"Unexpected ["+H.getPrettyTypeName(e[u])+"] while parsing modifier argument group. Expecting [T_MODIFIER_SEPARATOR] or end of current expression."));return l.startPosition=i.startPosition,l.endPosition=a.endPosition,l}for(let o=0;o<n;o++)if(e[o]instanceof bi||e[o]instanceof vt){if(o+1>=n)return e[o].pushError(D.makeSyntaxError(T.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST,e[o],"Unexpected end of modifier value list while parsing modifier.")),e;let a=e[o+1];if(this.isValidModifierValue(a)){if(a instanceof ie)if(a.variableReference!=null&&a.variableReference.pathParts.length>0)a.variableReference.pathParts.forEach(l=>{if(l instanceof zt){let u=new Gt;u.startPosition=l.startPosition,u.endPosition=l.endPosition,u.value=l.name,u.name=l.name,u.originalAbstractNode=l,u.endPosition==null&&u.startPosition==null&&(u.startPosition=a.startPosition,u.endPosition=a.endPosition),r.push(u)}});else{let l=new Gt;l.startPosition=a.startPosition,l.endPosition=a.endPosition,l.value=a.name,l.name=a.name,l.originalAbstractNode=a,r.push(l)}else r.push(a);o+=1;continue}else return a.pushError(D.makeSyntaxError(T.TYPE_MODIFIER_UNEXPECTED_VALUE,a,"Unexpected ["+H.getPrettyTypeName(a)+"] while parsing modifier value.")),e}let s=new Fo;return s.nameNode=i,s.valueNodes=r,s.startPosition=s.nameNode.startPosition,s.valueNodes.length>0?s.endPosition=s.valueNodes[s.valueNodes.length-1].endPosition:s.endPosition=s.nameNode.endPosition,s}scanToEndOfModifier(e){let i=[],r=e.length;for(let n=0;n<r;n++){let s=e[n];if(s instanceof bi){let o=i.length;if(o==0){s.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE,s,"Unexpected end of input while parsing modifier value."));continue}this.isRealModifierSeparator.set(s,!0);let a=i[o-1];if(at.distance(a,s)>1)break}if(s instanceof Tt||s instanceof ie||s instanceof kt){let o=i.length;if(o>0&&i[o-1]instanceof xe)break}if(s instanceof ci||s instanceof Ut||s instanceof jt||s instanceof Ti||s instanceof ur||s instanceof Pn||s instanceof Or||s instanceof Mr||s instanceof qr||s instanceof Br||s instanceof Vr||s instanceof Ur||s instanceof cr||s instanceof fr||s instanceof fn||s instanceof dr||s instanceof dn||s instanceof jr||s instanceof es||s instanceof wt||s instanceof ni)break;i.push(s)}return i}static isAssignmentOperatorNode(e){return e instanceof kr||e instanceof Dr||e instanceof Ki||e instanceof Fr||e instanceof Lr||e instanceof yi}insertAutomaticStatementSeparators(e){let i=e.length,r=[];for(let n=0;n<i;n++){let s=e[n];if(Rt.isAssignmentOperatorNode(s))if(n+2<i)if(e[n+2]instanceof ri){r.push(s),r.push(e[n+1]),r.push(e[n+2]),n+=2;continue}else{r.push(s),r.push(e[n+1]),r.push(new ri),n+=1;continue}else{r.push(s),r.push(e[n+1]),r.push(new ri);break}else r.push(s)}return e}createSemanticGroups(e){let i=[],r=e.length,n=[];for(let s=0;s<r;s++)if(e[s]instanceof ri){let o=new xt;o.nodes=n,o.separatorToken=e[s],i.push(o),n=[];continue}else if(n.push(e[s]),s+1>=r){let o=new xt;o.nodes=n,i.push(o);break}return i}findLogicalGroupEnd(e,i){let r=[],n=i.length,s=null,o=0,a=0;for(a;a<n;a++){let c=i[a];if(o+=1,c instanceof Ut){s=c;break}else if(c instanceof jt){if(a+1>=n)return c.pushError(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END,c,"Unexpected end of input while parsing input text.")),{found:!1,logicalGroup:null,skipCount:o};let f=this.findLogicalGroupEnd(c,i.slice(a+1));if(f.found){f.logicalGroup!=null&&r.push(f.logicalGroup),o+=f.skipCount,a+=f.skipCount;continue}else continue}else r.push(c)}if(s==null)return e.pushError(D.makeSyntaxError(T.TYPE_LOGIC_GROUP_NO_END,e,"Unexpected end of input while parsing logic group.")),{found:!1,logicalGroup:null,skipCount:o};let l=new Rt;l.setIsRoot(!1);let u=new xe;if(r.length>=2&&r[1]instanceof fi){if(u=new pr,u.scopeOperator=r[1],a+2<n&&i[a+1]instanceof ie&&i[a+2]instanceof Tt&&i[a+1].name==He.ScopeAs){let d=i[a+2];u=new Cn,u instanceof Cn&&(u.alias=d),o+=2}let c=r.splice(0,2);(u instanceof pr||u instanceof Cn)&&(u.scope=c[0])}return u.nodes=l.parse(r),u.start=e,u.end=s,u.startPosition=e.startPosition,u.endPosition=s.endPosition,u instanceof Cn&&u.alias!=null&&(u.endPosition=u.alias.endPosition),{found:!0,logicalGroup:u,skipCount:o}}unpack(e){if(e.length==0)return[];if(e[0]instanceof xt){let i=e[0];return this.unpack(i.nodes)}return e}collectUntil(e){let i=e.length,r=[];for(let n=i-1;n>=0&&!Rt.isAssignmentOperator(e[n]);n--){let s=e.pop();r.push(s)}if(r=r.reverse(),r.length>=3){let n=new Rt;return n.setIsRoot(!1),{collectedTokens:this.unpack(n.parse(r)),tokens:e}}return{collectedTokens:r,tokens:e}}seek(e,i){for(let r=i;r<this.tokens.length;r++)if(this.tokens[r]instanceof e)return{found:!0,foundAt:r,node:this.tokens[r]};return{found:!1,foundAt:null,node:null}}};var Dn=class{static findRightBeighboringNextPunctuation(e,i,r=4){i=i.replace("	"," ".repeat(r));let n=!1;for(let s=e+1;s<i.length;s++){let o=i[s];if(j.ctypeSpace(o)&&(n=!0),n&&(j.ctypeAlpha(o)||j.ctypeDigit(o)))return null;if(j.ctypePunct(o)||o==x.String_Terminator_SingleQuote||o==x.String_Terminator_DoubleQuote)return o}return null}static findRightNeighboringNextAlphaNumeric(e,i,r=4){i=i.replace("	"," ".repeat(r));let n=!1;for(let s=e+1;s<i.length;s++){let o=i[s];if((j.ctypeSpace(o)||j.ctypePunct(o)&&o!=x.Punctuation_Underscore)&&(n=!0),n&&(j.ctypeAlpha(o)||j.ctypeDigit(o)))return s+1}return null}static findLeftNeighboringNextPunctuation(e,i,r=4){i=i.replace("	"," ".repeat(r));let n=!1;for(let s=e-2;s>=0;s--){let o=i[s];if(j.ctypeSpace(o)&&(n=!0),n&&(j.ctypeAlpha(o)||j.ctypeDigit(o)))return null;if(j.ctypePunct(o))return o}return null}static findLeftNeighboringNextAlphaNumeric(e,i,r=4){i=i.replace("	"," ".repeat(r));let n=!1;for(let s=e-1;s>=0;s--){let o=i[s];if((j.ctypeSpace(o)||j.ctypePunct(o)&&o!=x.Punctuation_Underscore)&&(n=!0),n&&(j.ctypeAlpha(o)||j.ctypeDigit(o)))return s+1}return null}static scanWordAt(e,i,r=4){if(i=i.replace("	"," ".repeat(r)),e<0||e>i.length)return null;let n=[],s=[];for(let o=e-1;o>=0;o--){let a=i[o];if(j.ctypePunct(a)&&a!=x.Punctuation_Underscore||j.ctypeSpace(a))break;n.push(a)}for(let o=e;o<i.length;o++){let a=i[o];if(j.ctypePunct(a)&&a!=x.Punctuation_Underscore||j.ctypeSpace(a))break;s.push(a)}return n.reverse().join("")+s.join("")}};var bp=class{constructor(e){this.parser=e}findParentWithName(e,i){let r=i.parent;for(;r!=null;){if(r instanceof B&&r.nameMatches(e))return r;if(r.parent==r)break;r=r.parent}return null}};var Ip=class{static analyzeModifierNodeParameters(e){if(e.parameters.forEach(r=>{r.isModifierParameter=Ce.instance?.hasModifier(r.name)??!1,r.isModifierParameter&&(e.modifiers.parameterModifiers.push(r),r.modifier=Ce.instance?.getModifier(r.name)??null,e.modifiers.modifierNames.includes(r.name)==!1&&e.modifiers.modifierNames.push(r.name))}),e.modifierChain!=null&&e.modifierChain.modifierChain.length>0){let r=null;e.modifierChain.modifierChain.forEach(n=>{n.nameNode!=null&&(n.modifier=Ce.instance?.getModifier(n.nameNode.content)??null,e.modifiers.modifierNames.includes(n.nameNode.content)==!1&&e.modifiers.modifierNames.push(n.nameNode.content),n.modifier!=null&&(r=n.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=n)))}),e.modifierChain.lastModifier=r,e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}e.runtimeNodes.length>0&&e.runtimeNodes.forEach(r=>{if(r.modifierChain!=null&&r.modifierChain.modifierChain.length>0){let n=null;r.modifierChain.modifierChain.forEach(s=>{s.nameNode!=null&&(s.modifier=Ce.instance?.getModifier(s.nameNode.content)??null,e.modifiers.modifierNames.includes(s.nameNode.content)==!1&&e.modifiers.modifierNames.push(s.nameNode.content),s.modifier!=null&&(n=s.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=s)))}),e.modifierChain!=null&&(e.modifierChain.lastModifier=n),e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}});let i=e.modifiers.getLastManifestedModifier();if(i!=null)if(i.name=="macro"){let r=e.modifiers.getLastManifestedModifierValue();e.manifestType=Ce.instance?.getMacroManifestingType(r)??""}else e.manifestType=Ce.instance?.getProbableReturnType(i,e.isPaired())??""}};function v_(t){return t==null?!1:t=='"'||t=="'"}function xS(t,e){for(t.getCurrentIndex();t.getCurrentIndex()<t.inputLength()&&(t.checkCurrentOffsets(),e&&t.pushChar(t.getCurrent()),t.getCurrent()!=x.NewLine);t.incrementIndex());}function wS(t,e){for(t.getCurrentIndex();t.getCurrentIndex()<t.inputLength();t.incrementIndex())if(t.checkCurrentOffsets(),e&&t.pushChar(t.getCurrent()),t.getCurrent()==x.Punctuation_Asterisk&&t.getNext()==x.Punctuation_ForwardSlash){e&&t.pushChar(x.Punctuation_ForwardSlash),t.incrementIndex(),t.checkCurrentOffsets();break}}function N_(t){let e=t.getCurrent();for(t.incrementIndex(),t.getCurrentIndex();t.getCurrentIndex()<t.inputLength()&&(t.checkCurrentOffsets(),!(t.getCurrent()==e&&t.getPrev()!=x.String_EscapeCharacter));t.incrementIndex());}var vp=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(e){this.currentIndex=e}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(e){}getChar(e){return this.chars[e]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(e,i){return this.documentOffsets=e,this.lastDocumentOffsetKey=i,this}getClosingFragmentAfter(e){if(typeof e>"u")return null;let i=e.name.toLowerCase();for(let r=0;r<this.fragments.length;r++){let n=this.fragments[r];if(n.isClosingFragment&&!n.isSelfClosing&&n.name.toLowerCase()==i&&n.index>e.index)return n}return null}getContentSubstring(e,i){return this.content.substr(e,i)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(e,i,r=!1){let n=0,s=0;if(this.documentOffsets.has(e)){let a=this.documentOffsets.get(e);n=a.line,s=a.char}else if(this.documentOffsets.size==0)n=1,s=e+1;else{let a=null,l=null,u=null,c=null;for(let f of this.documentOffsets.keys()){if(f>=e){c!=null&&e>c?(a=u,l=c):(a=this.documentOffsets.get(f),l=f);break}u=this.documentOffsets.get(f),c=f}a==null&&(a=u,l=c),a!=null?(s=e-(l??0),n=a.line,e<=(l??0)?(n=a.line,s=e+1):n=a.line+1):this.lastDocumentOffsetKey!=null&&(n=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let o=new Bt;return o.index=i,o.offset=e,o.line=n+this.shiftLine,o.char=s,o}getFragments(){return this.fragments}getFragmentsBetween(e,i){let r=[];return this.fragments.forEach(n=>{let s=n.startPosition?.index??0,o=n.endPosition?.index??0;s>e&&o<i&&r.push(n)}),r}getFragmentContaining(e){for(let i=0;i<this.fragments.length;i++){let r=this.fragments[i];if((r.startPosition?.index??0)<e.index&&(r.endPosition?.index??0)>e.index)return r}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let i=j.split(j.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),i.forEach(r=>{this.chars.push(r),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(e){this.content=e,this.inputLen=this.content.length;let i=[...this.content.matchAll(/(<(?!\?[php|?=]))/gm)],r=[];i.forEach(n=>{let s=n.index??0;for(let o=0;o<this.nodeIndex.length;o++){let a=this.nodeIndex[o];if(s>=a.start&&s<=a.end)return}r.push(s)}),this.fragmentStartIndex=r}setIndexRanges(e){return this.nodeIndex=e,this}fetchAt(e,i){return this.content.substr(e,i)}getFragmentsContainingStructures(){let e=[],i=!1;return this.fragments.forEach(r=>{r.containsStructures&&(i=!0)}),this.fragments.forEach(r=>{let n=r.name.toLowerCase();if(!(n!="script"&&n!="style")&&!r.isClosingFragment&&!r.isSelfClosing&&(i||r.containsStructures)){let s=this.getClosingFragmentAfter(r);if(s!=null){let o=this.content.substring((r.endPosition?.offset??0)+1,s?.startPosition?.offset??0),a=this.content.substring(r.startPosition?.offset??0,(s?.endPosition?.offset??0)+1);e.push({start:r,end:s,content:o,outerContent:a})}}}),e}parse(e){if(this.resetState().processInputText(e),this.fragmentStartIndex.length==0)return[];for(let s=0;s<this.fragmentStartIndex.length;s++){let o=this.fragmentStartIndex[s];if(this.resetIntermediateState(),this.seedOffset=o,this.currentChunkOffset=o,this.parseIntermediateText(),this.isScript){let a=!1;for(let l=s+1;l<this.fragmentStartIndex.length;l++){let u=this.fragmentStartIndex[l];if(this.fetchAt(u,8).toLowerCase()=="<\/script"){s=l-1,this.isScript=!1,a=!0;break}}if(!a)break}}let r=0,n=0;return this.fragments.forEach(s=>{let o=s.name.toLowerCase();(o=="script"||o=="style")&&(s.embeddedIndex=n,this.embeddedIndexedFragments.set(n,s),n+=1),s.index=r,this.indexedFragments.set(r,s),r+=1}),this.fragments}getFragment(e){return this.indexedFragments.get(e)}getEmbeddedFragment(e){return this.embeddedIndexedFragments.has(e)?this.embeddedIndexedFragments.get(e):null}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),v_(this.cur)&&N_(this),this.cur==x.Punctuation_ForwardSlash&&this.next==x.Punctuation_ForwardSlash){xS(this,!0);continue}if(this.cur==x.Punctuation_ForwardSlash&&this.next==x.Punctuation_Asterisk){wS(this,!0);continue}if(this.cur==x.Punctuation_Question&&this.next==x.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let e=this.currentIndex,i=[],r=[],n=!1,s=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),j.ctypeSpace(this.cur)&&(n=!0),this.next==x.Punctuation_LessThan){let o=1;this.cur==x.Punctuation_ForwardSlash&&(o=2);let a=this.fetchAt(this.currentChunkOffset+o,5);if(a.toLowerCase()=="<?php"||a.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==x.Punctuation_LessThan||this.next==null&&this.cur!=x.Punctuation_GreaterThan)break;if(!n&&this.cur==x.Punctuation_LessThan&&this.next==x.Punctuation_ForwardSlash&&(s=!0),!n&&this.cur!=x.Punctuation_LessThan&&this.cur!=x.Punctuation_ForwardSlash&&this.cur!=x.Punctuation_GreaterThan&&r.push(this.cur),v_(this.cur)){let o=this.currentIndex;N_(this);let a=new rd;a.startPosition=this.positionFromOffset(o+this.seedOffset,o+this.seedOffset),a.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let l=o+this.seedOffset,u=this.currentIndex+this.seedOffset+1;a.content=this.content.substr(l,u-l);let c=[];for(let f=o-2;f>=0;f--){let d=this.chars[f];if(j.ctypeSpace(d))break;c.push(d)}a.name=c.reverse().join(""),i.push(a);continue}if(this.cur==x.Punctuation_ForwardSlash&&this.next==x.Punctuation_GreaterThan){let o=new xu;o.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),o.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),o.parameters=i,o.isSelfClosing=!0,o.name=r.join(""),o.isClosingFragment=s,this.fragments.push(o),s?this.fragmentOpeningIndex.set(o.startPosition.index+1,1):this.fragmentOpeningIndex.set(o.startPosition.index,1);break}if(this.cur==x.Punctuation_GreaterThan){let o=new xu;o.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),o.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),o.parameters=i,o.name=r.join(""),o.isClosingFragment=s,this.fragments.push(o),s?this.fragmentOpeningIndex.set(o.startPosition.index+1,1):this.fragmentOpeningIndex.set(o.startPosition.index,1),o.name.toLowerCase()=="script"&&o.isClosingFragment==!1&&(this.isScript=!0);break}}}};var Np=class{constructor(e,i){this.documentParser=e,this.fragmentsParser=i}doesContainFragments(e){let i=e.endPosition?.index??0,r=e.isClosedBy?.startPosition?.index??0;return this.fragmentsParser.getFragmentsBetween(i,r).length>0}analyze(){let e=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(i=>{let r=i.name.toLowerCase();if(i.isClosingFragment==!1&&i.isSelfClosing==!1&&(r=="script"||r=="style")){let n=this.fragmentsParser.getClosingFragmentAfter(i);if(n==null)return;i.endPosition!=null&&n.startPosition!=null&&this.documentParser.getNodesBetween(i.endPosition,n.startPosition).forEach(o=>{(o instanceof Ve||o instanceof B&&o.isClosedBy!=null)&&(i.containsStructures=!0),r=="style"?o.isInStyleTag=!0:o.isInScriptTag=!0})}}),e.forEach(i=>{if(i instanceof Le||i.startPosition==null)return;i instanceof B&&(Vt.isConditionalStructure(i)||!i.isClosingTag)&&i.isClosedBy!=null&&(i.containsAnyFragments=this.doesContainFragments(i));let r=this.fragmentsParser.getFragmentContaining(i.startPosition);if(r==null){i.fragmentPosition=3;return}if(i.fragment=r,i.startPosition.index-(r.startPosition?.index??0)<=3){i.fragmentPosition=0;return}if(r.parameters.length==0){i.fragmentPosition=2;return}let s=!1;for(let o=0;o<r.parameters.length;o++){let a=r.parameters[o];if((a.startPosition?.index??0)<i.startPosition.index&&(a.endPosition?.index??0)>i.startPosition.index){i.fragmentPosition=1,i.fragmentParameter=a,s=!0;break}}s||(i.fragmentPosition=2)}))}};var Sp=class{static analyze(e){e.forEach(i=>{if(i instanceof B){if(i.prev instanceof B&&i.isPaired()&&i.prev.isInlineAntlers==!0){i.isInlineAntlers=!1,i.isClosedBy!=null&&(i.isClosedBy.isInlineAntlers=!1);return}let r=!1,n=!1;if(i.next==null)r=!0;else if(i.next instanceof Le){let s=j.getFirstLine(i.next.content);(i.next.next==null&&s.trim().length==0||j.trimLeft(s," 	").startsWith(`
`)==!1&&s.trim().length>0||i.next.next instanceof Qt||i.next.next instanceof B&&(i.next.next.isPaired()==!1||(i.next.next.startPosition?.line??0)!=(i.startPosition?.line??0)))&&(r=!0)}else i.next instanceof B&&i.next.isPaired()&&(r=!0);if(i.prev==null)n=!0;else if(i.prev instanceof Le){let s=j.getLastLine(i.prev.content);j.trimRight(s," 	").endsWith(`
`)==!1&&s.trim().length>0||i.prev.prev instanceof Qt?n=!0:i.prev.prev instanceof B&&(i.prev.prev.isInlineAntlers&&i.prev.prev.endPosition?.line==i.startPosition?.line?n=!0:i.prev.prev.isClosingTag&&i.prev.prev.isOpenedBy!=null&&(i.prev.prev.isOpenedBy instanceof Qt||i.prev.prev.runtimeName()=="noparse")&&(i.prev.prev.isInlineAntlers=!0,n=!0))}else i.prev instanceof B&&i.prev.isPaired()&&(n=!0);i.isInlineAntlers=r&&n}})}};var fe=class{constructor(){this.interpolationRegions=new Map;this.nodeParser=new yp;this.chars=[];this.charLen=0;this.lastAntlersNode=null;this.content="";this.originalContent="";this.currentIndex=0;this.currentContent=[];this.sourceContent=[];this.startIndex=0;this._recoveryStartIndex=0;this.cur=null;this.next=null;this.prev=null;this.nodes=[];this.renderNodes=[];this.isInterpolatedParser=!1;this.inputLen=0;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.isDoubleBrace=!1;this.interpolationEndOffsets=new Map;this.isScanningInterpolations=!1;this.seedStartLine=1;this.seedStartchar=1;this.frontMatterEndLine=-1;this.lastAntlersEndIndex=-1;this.seedOffset=0;this.antlersStartIndex=[];this.antlersStartPositionIndex=new Map;this.chunkSize=5;this.maxLine=1;this.currentChunkOffset=0;this.isNoParse=!1;this.antlersErrors=[];this.structureErrors=[];this.languageParser=new Rt;this.documentPath=null;this.pushedErrors=new Map;this.frontMatter="";this.shiftLine=0;this.doesHaveUncloseIfStructures=!1;this.doesHaveUnclosedStructures=!1;this.parseChildDocuments=!1;this.mayBeStartingEscapedContent=!1;this.isParsingEscapedContent=!1;this.escapedContentEndSymbol=null;this.escapedContentSymbolEncountered=0;this.structuralErrorCodes=[T.TYPE_PARSE_UNCLOSED_CONDITIONAL,T.TYPE_PARSE_UNPAIRED_CONDITIONAL,T.TYPE_RECURSIVE_UNPAIRED_NODE,T.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END,T.TYPE_UNPAIRED_CLOSING_TAG];this.structure=new bp(this);this.fragmentsParser=new vp,this.fragmentsAnalyzer=new Np(this,this.fragmentsParser)}withChildDocuments(e){return this.parseChildDocuments=e,this}shouldParseChildDocument(){return this.parseChildDocuments}hasUnclosedIfStructures(){return this.doesHaveUncloseIfStructures}hasUnclosedStructures(){return this.doesHaveUnclosedStructures}getFrontMatter(){return this.frontMatter}setDocumentPath(e){this.documentPath=e}getFrontMatterEndLine(){return this.frontMatterEndLine}pushError(e){(e.errorCode==T.TYPE_PARSE_UNCLOSED_CONDITIONAL||e.errorCode==T.TYPE_PARSE_UNPAIRED_CONDITIONAL)&&(this.doesHaveUncloseIfStructures=!0);let i=e.hash();this.pushedErrors.has(i)||(this.pushedErrors.set(i,e),this.antlersErrors.push(e),this.structuralErrorCodes.includes(e.errorCode)&&this.structureErrors.push(e))}getInterpolationRegions(){return this.interpolationRegions}getDocumentPath(){return this.documentPath}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let i=j.split(j.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),i.forEach(r=>{this.chars.push(r),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}charLeftAt(e){return e==null||e.char<=1?null:this.charAt(this.positionFromCursor(e.line,e.char-1))}charLeftAtCursor(e,i){return this.charLeftAt(this.positionFromCursor(e,i))}charRightAt(e){return e==null?null:this.charAt(this.positionFromCursor(e.line,e.char+1))}charRightAtCursor(e,i){return this.charRightAt(this.positionFromCursor(e,i))}punctuationLeftAt(e,i=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:Dn.findLeftNeighboringNextPunctuation(e.char,r,i)}punctuationLeftAtCursor(e,i,r=4){return this.punctuationLeftAt(this.positionFromCursor(e,i),r)}punctuationRightAt(e,i=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:Dn.findRightBeighboringNextPunctuation(e.char,r,i)}punctuationRightAtCursor(e,i,r=4){return this.punctuationRightAt(this.positionFromCursor(e,i),r)}wordRightAt(e,i=4){if(e==null)return null;let r=this.getLineText(e.line);if(r==null)return null;let n=Dn.findRightNeighboringNextAlphaNumeric(e.char,r,i);return n==null?null:Dn.scanWordAt(n,r,i)}wordRightAtCursor(e,i,r=4){return this.wordRightAt(this.positionFromCursor(e,i),r)}wordLeftAt(e,i=4){if(e==null)return null;let r=this.getLineText(e.line);if(r==null)return null;let n=Dn.findLeftNeighboringNextAlphaNumeric(e.char,r,i);return n==null?null:Dn.scanWordAt(n,r,i)}wordLeftAtCursor(e,i,r=4){return this.wordLeftAt(this.positionFromCursor(e,i),r)}wordAt(e,i=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:Dn.scanWordAt(e.char,r,i)}getLineText(e){let i=this.getLineIndex(e);return i!=null?j.trimRight(this.getContent().substring(i.start,i.end+1)):null}wordAtCursor(e,i,r=4){return this.wordAt(this.positionFromCursor(e,i),r)}charAt(e){return e==null?null:this.content.substr(e.offset,1)}getLinesAround(e){let i=new Map,r=e-3,n=e+3;r<1&&(r=1),n>this.maxLine&&(n=this.maxLine);for(let s=r;s<=n;s++)i.set(s,this.getLineText(s)??"");return i}charAtCursor(e,i){return this.charAt(this.positionFromCursor(e,i))}getLineIndex(e){if(e==this.maxLine){let r=this.lineIndex.get(e-1);if(r!=null){let n=r.endIndex+1;return{end:this.inputLen-1,start:n}}return null}let i=this.lineIndex.get(e);return i!=null?{start:i.startIndex,end:i.endIndex}:null}positionFromCursor(e,i){if(e==this.maxLine){let n=this.lineIndex.get(e-1);if(n!=null){let s=n.endIndex+1,o=s+(i-1),a=new Bt;return a.offset=o,a.line=e,a.char=i,a.index=o,a}return null}let r=this.lineIndex.get(e);if(r!=null){let n=new Bt;return n.offset=r.startIndex+(i-1),n.line=r.line,n.char=i,n.index=r.startIndex+(i-1),n}return null}parse(e){if(this.resetState(),!this.processInputText(e))return[];let i=this.antlersStartIndex.length,r=i-1;if(i==0&&!this.isNoParse){let u=new Le;u.withParser(this),u.content=this.prepareLiteralContent(this.content),u.startPosition=this.positionFromOffset(0,0),u.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),u.sourceContent=this.content,this.nodes.push(u)}else for(let u=0;u<i;u+=1){let c=this.antlersStartIndex[u];if(this.seedOffset=c,u==0&&c>0&&!this.isNoParse){let d=new Le;if(d.withParser(this),d.content=this.prepareLiteralContent(this.content.substr(0,c)),d.content.length>0){d.startPosition=this.positionFromOffset(0,0),d.endPosition=this.positionFromOffset(c,c-1);let h=d.startPosition.index??0,p=d.endPosition.index+1;d.sourceContent=this.content.substr(h,p-h),this.nodes.push(d)}}if(c<this.lastAntlersEndIndex)continue;if(this.currentChunkOffset=c,this.resetIntermediateState(),this.parseIntermediateText(),this.lastAntlersNode!=null&&!(this.lastAntlersNode instanceof ks)&&this.lastAntlersNode.isComment&&!(this.lastAntlersNode instanceof Ka)&&u+1<i){let d=this.antlersStartIndex[u+1];if(this.lastAntlersNode.endPosition!=null&&d<this.lastAntlersNode.endPosition.offset){let h=null;for(let p=u+1;p<i;p++)if(this.antlersStartIndex[p]>this.lastAntlersNode.endPosition.offset){h=p;break}if(h==null){let p=this.prepareLiteralContent(this.content.substr(this.lastAntlersNode.endPosition.offset+1));if(p.length>0&&!this.isNoParse){let y=new Le;y.withParser(this),y.content=p;let v=this.lastAntlersNode.endPosition.offset+1;y.startPosition=this.positionFromOffset(v,v),y.endPosition=this.positionFromOffset(this.inputLen,this.inputLen);let b=y.startPosition.index??0,I=y.endPosition.index+1;y.sourceContent=this.content.substr(b,I-b),this.nodes.push(y)}break}else{let p=this.antlersStartIndex[h],y=p-this.lastAntlersNode.endPosition.offset-1;if(y>0){let v=this.lastAntlersNode.endPosition.offset,b=p-1;v+=1,b-=1;let I=this.content.substr(v,y);if(I.length>0&&!this.isNoParse){let C=new Le;C.withParser(this),C.content=I,C.startPosition=this.positionFromOffset(v,v),C.endPosition=this.positionFromOffset(b,b);let q=C.startPosition.index??0,K=C.endPosition.index+1;C.sourceContent=this.content.substr(q,K-q+1),this.nodes.push(C)}continue}u=h-1;continue}}}let f=!1;if(this.antlersStartPositionIndex.has(this.currentChunkOffset)?this.lastAntlersEndIndex<this.currentChunkOffset&&(f=!0):f=!0,f){if(u+1<i){let d=this.antlersStartIndex[u+1],h=this.lastAntlersEndIndex+1;if(d<h)if(this.lastAntlersEndIndex>d)u+2<i&&(d=this.antlersStartIndex[u+2]);else continue;if(u+1==r&&d<=this.lastAntlersEndIndex){if(this.isNoParse)break;let p=this.currentChunkOffset,y=this.content.substr(h),v=new Le;if(v.withParser(this),v.content=this.prepareLiteralContent(y),v.content.length>0){v.startPosition=this.positionFromOffset(h,p),v.endPosition=this.positionFromOffset(d,d-1);let b=v.startPosition.index??0,I=v.endPosition.index+1;v.sourceContent=this.content.substr(h,this.inputLen-b+2),this.nodes.push(v)}break}else{let p=d-this.lastAntlersEndIndex-1;if(p==0||this.isNoParse)continue;let v=this.currentChunkOffset;this.lastAntlersNode instanceof Ka&&(h=(this.lastAntlersNode.endPosition?.offset??0)+1,p-=(this.lastAntlersNode.endPosition?.offset??0)+1,v=h),this.lastAntlersNode instanceof ks&&(h-=1,p+=1);let b=this.content.substr(h,p),I=new Le;if(I.withParser(this),I.content=this.prepareLiteralContent(b),I.content.length>0){I.startPosition=this.positionFromOffset(h,h),I.endPosition=this.positionFromOffset(d,d-1);let C=I.startPosition.index??0,q=I.endPosition.index+1;I.sourceContent=this.content.substr(C,q-C),this.nodes.push(I)}}continue}if(u!==r&&this.lastAntlersNode!=null&&this.lastAntlersNode.endPosition!=null&&this.positionFromOffset(c,c).isBefore(this.lastAntlersNode.endPosition)){if(u+1<i){if(this.antlersStartIndex[u+1]<this.lastAntlersNode.endPosition.offset)continue}else if(u+1!=r)continue}if(u==r){let d=this.currentIndex+c;if(d<this.inputLen&&!this.isNoParse){let h=new Le;if(h.withParser(this),h.content=this.prepareLiteralContent(this.content.substr(d)),h.content.length>0){h.startPosition=this.positionFromOffset(d,d),h.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1);let p=h.startPosition.index??0,y=h.endPosition.index+1;h.sourceContent=this.content.substr(p,y-p),this.nodes.push(h)}break}}}}let n=0;this.nodes.forEach(u=>{u.index=n,n+=1}),this.nodes.length>500&&(this.parseChildDocuments=!1),this.nodes.forEach(u=>{u instanceof B&&u.isComment||u instanceof B&&u.interpolationRegions.size>0&&(u.interpolationRegions.forEach((c,f)=>{let d=new fe;d.withChildDocuments(this.parseChildDocuments),d.setIsInterpolatedParser(!0);let h=d.parse(c.parseContent);h.length>1&&h[1]instanceof B&&(h=[h[1]]),d.hasUnclosedIfStructures()&&(this.doesHaveUncloseIfStructures=!0),d.hasUnclosedStructures()&&(this.doesHaveUnclosedStructures=!0),u.processedInterpolationRegions.set(f,h),this.mergeErrors(d.getAntlersErrors())}),u.hasProcessedInterpolationRegions=!0)}),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content);let s=new Yo;this.renderNodes=s.associate(this.nodes,this),this.createChildDocuments(this.renderNodes);let o=null,a=null;for(let u=0;u<this.nodes.length;u++){let c=this.nodes[u];u+1<this.nodes.length?a=this.nodes[u+1]:a=null,c.next=a,c.prev=o,o=c}this.fragmentsAnalyzer.analyze(),Sp.analyze(this.nodes),this.nodes.forEach(u=>{if(u instanceof B&&u.isClosedBy!=null){let c=u.getImmediateChildren();for(let f=0;f<c.length;f++){let d=c[f];if(d instanceof B&&d.isClosedBy!=null){u.containsChildStructures=!0;break}else if(d instanceof Ve){u.containsChildStructures=!0;break}}}}),this.nodes.forEach(u=>{if(u instanceof B&&u.isClosingTag&&u.isOpenedBy==null){let c="Unpaired closing tag.";u.isInterpolationNode&&(c+=" Tag pairs are not supported within Antlers tags."),u.pushError(D.makeSyntaxError(T.TYPE_UNPAIRED_CLOSING_TAG,u,c))}}),Tp.associateRecursiveParent(this.nodes),this.nodes.forEach(u=>{if(!(u instanceof B&&u.isComment)&&((u instanceof B||u instanceof lt)&&(u.isInterpolationNode=this.isInterpolatedParser),(u instanceof B||u instanceof lt)&&u.interpolationRegions.size>0&&u.runtimeNodes.forEach(c=>{c instanceof ie&&u.interpolationRegions.has(c.name)&&(c.isInterpolationReference=!0,c.interpolationNodes=u.processedInterpolationRegions.get(c.name))}),(u instanceof B||u instanceof lt)&&u.hasParameters&&u.interpolationRegions.size>0&&u.parameters.forEach(c=>{u.interpolationRegions.forEach((f,d)=>{c.value.includes(d)&&c.interpolations.push(d)})}),u instanceof B&&u.runtimeNodes.length>0&&u.isClosingTag==!1&&!u.isComment&&(u.parsedRuntimeNodes=this.languageParser.parse(u.runtimeNodes),u.hasParsedRuntimeNodes=!0,!u.isTagNode&&u.parsedRuntimeNodes.length>0))){let c=u.nodeAtIndex(0);c!=null&&c instanceof ie&&c.name==u.name?.name&&(u.modifierChain=c.modifierChain)}}),this.languageParser.getCreatedModifierChains().forEach(u=>{u.modifierChain.length>0&&u.modifierChain.forEach(c=>{c.nameNode!=null&&Ce.instance!=null&&Ce.instance.hasModifier(c.nameNode?.name)&&(c.modifier=Ce.instance?.getModifier(c.nameNode.name))})});let l=1;return this.nodes.forEach(u=>{if(u instanceof B){if(u.isComment)return;u.isTagNode=Ne.instance?.isKnownTag(u.getTagName())??!1,u.scopeName=u.findParameterValue("scope",""),u.antlersNodeIndex=l,l+=1,Ip.analyzeModifierNodeParameters(u)}}),this.nodes.forEach(u=>{if(u instanceof B&&u.isClosedBy!=null){let c=(u.endPosition?.offset??0)+1,f=u.isClosedBy.startPosition?.offset??0,d=u.startPosition?.offset??0,h=(u.isClosedBy.endPosition?.offset??0)+1;u.documentText=this.content.substr(c,f-c),u.nodeContent=this.content.substr(d,h-d),this.parseChildDocuments&&(u.childDocument=ut.childFromText(u.documentText,qu(u.children)))}}),this.renderNodes}createChildDocuments(e){e.forEach(i=>{if(i instanceof B&&i.isClosedBy!=null){let r=i.isClosedBy,n=(i.startPosition?.index??0)-1,s=(r.endPosition?.index??0)-n;if(i.documentText=this.content.substr(n,s),this.parseChildDocuments){let o=i.endPosition?.index??0,a=(r.startPosition?.index??0)-1-o,l=this.content.substr(o,a);i.childDocument=ut.childFromText(l,qu(i.getChildren()))}}})}getNodeIndexRanges(){let e=[];return this.nodes.forEach(i=>{i instanceof Le||e.push({start:i.startPosition?.index??0,end:i.endPosition?.index??0})}),e}positionFromOffset(e,i,r=!1){let n=0,s=0;if(this.documentOffsets.has(e)){let a=this.documentOffsets.get(e);n=a.line,s=a.char}else if(this.documentOffsets.size==0)n=1,s=e+1;else{let a=null,l=null,u=null,c=null;for(let f of this.documentOffsets.keys()){if(f>=e){c!=null&&e>c?(a=u,l=c):(a=this.documentOffsets.get(f),l=f);break}u=this.documentOffsets.get(f),c=f}if(a==null&&(a=u,l=c),a!=null)if(r){let f=this.content.split(""),d=e-(l??0),h=a.char-(l??0)+e;s=d,n=a.line,e<=(l??0)?(n=a.line,s=e+1):n=a.line+1}else{let f=this.content.split(""),d=e-(l??0),h=a.char-(l??0)+e;s=d,n=a.line,e<=(l??0)?(n=a.line,s=e+1):n=a.line+1}else this.lastDocumentOffsetKey!=null&&(n=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let o=new Bt;return o.index=i,o.offset=e,o.line=n+this.shiftLine,o.char=s,o}getLanguageParser(){return this.languageParser}getText(e,i){return this.content.substr(e,i-e)}getOriginalContent(){return this.originalContent}getContent(){return this.content}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}setIsInterpolatedParser(e){return this.isInterpolatedParser=e,this}setStartLineSeed(e){return this.seedStartLine=e,this}setSeedStartChar(e){return this.seedStartchar=e,this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.sourceContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(e){return e==null?this.shiftLine=0:this.shiftLine=e.line,this}resetState(){if(this.languageParser.reset(),this.charLen=0,this.antlersStartIndex=[],this.antlersErrors=[],this.pushedErrors.clear(),this.antlersStartPositionIndex.clear(),this.lastAntlersEndIndex=-1,this.renderNodes=[],this.nodes=[],ss.globalTagEnterStack.length>0){let e=ss.globalTagEnterStack[ss.length-1];e!=null&&e.endPosition!=null&&this.setStartLineSeed(e.endPosition.line)}this.seedOffset=0,this.isScanningInterpolations=!1,this.content="",this.chars=[],this.currentIndex=0,this.startIndex=0,this._recoveryStartIndex=0,this.cur=null,this.next=null,this.prev=null,this.inputLen=0,this.documentOffsets.clear(),this.isDoubleBrace=!1,this.interpolationRegions.clear(),this.interpolationEndOffsets.clear()}fetch(e){let i=this.currentChunkOffset+this.chunkSize-this.chars.length;return j.substring(this.content,i,e)}getParsedContent(){return this.content}peek(e){if(e==this.charLen){let i=j.split(j.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,i.forEach(r=>{this.chars.push(r),this.charLen+=1})}return this.chars[e]}parseIntermediateText(){for(this.currentContent=[],this.sourceContent=[],this.startIndex=0,this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==fe.LeftBrace&&this.next==fe.LeftBrace&&this.prev==fe.AtChar){this.dumpLiteralNode(this.currentIndex);let e=new Qt;e.withParser(this),e.name=new ki,e.name.name="noparse",e.content="{{",e.startPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),this.nodes.push(e),this.currentContent=[],this.sourceContent=[],this.currentIndex+=1;continue}if((this.prev==null||this.prev!=null&&this.prev!=fe.AtChar)&&this.next!=null&&this.cur==fe.LeftBrace&&this.next==fe.LeftBrace){this.dumpLiteralNode(this.currentIndex);let e=null;if(this.currentIndex+2<this.inputLen&&(e=this.peek(this.currentIndex+2)),e==fe.Punctuation_Question&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(fe.Punctuation_Question),this.isDoubleBrace=!1;break}if(e==fe.Punctuation_Dollar&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(fe.Punctuation_Dollar),this.isDoubleBrace=!1;break}if(e==fe.Punctuation_Octothorp&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersCommentRegion(),this.isDoubleBrace=!1;break}if(!this.isNoParse)this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1;else if(this.fetch(11).replace(" ","").toLocaleLowerCase().startsWith("{{/noparse")){this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1,this.isNoParse=!1;break}else{this.currentContent.push(this.cur);continue}break}if(this.cur==fe.AtChar&&this.next!=null&&this.next==fe.LeftBrace){if(this.currentIndex+2>=this.inputLen){this.appendContent(this.next),this.dumpLiteralNode(this.currentIndex+1);break}let e=0;for(let i=this.currentIndex+1;i<this.inputLen&&this.chars[i]==fe.LeftBrace;i+=1)e+=1;this.currentContent=this.currentContent.concat(fe.LeftBrace.repeat(e).split("")),this.sourceContent=this.currentContent.concat(fe.LeftBrace.repeat(e).split("")),this.currentIndex+=e}this.appendContent(this.cur),this.next==null&&this.currentContent.length>0&&this.dumpLiteralNode(this.currentIndex)}}getRenderNodes(){return this.renderNodes}processInputText(e){if(this.originalContent=e,this.content=j.normalizeLineEndings(e),this.inputLen=this.content.length,this.content.startsWith("---")){let f=this.content.split(`
`),d=[],h=[];h.push("");for(let p=1;p<f.length;p++){let y=f[p];if(y.startsWith("---")){h.push(""),h=h.concat(f.slice(p+1)),this.content=h.join(`
`),this.frontMatter=d.join(`
`),this.frontMatterEndLine=p+1;break}else d.push(y),h.push("")}}let i=[...this.content.matchAll(/(\n)/gm)],r=i.length,n=this.seedStartLine,s=null,o=0,a=0;for(let f=0;f<r;f++){let d=i[f],h=d.index??0,p=h;s!=null?p=h-s:p=p+1,this.documentOffsets.set(h,{char:p,line:n});let y=0,v=0;f==0?(v=p-1,y=0):(y=a+1,v=h),this.lineIndex.set(n,{char:p,line:n,startIndex:y,endIndex:v}),this.lastDocumentOffsetKey=h,this.maxLine=n,n+=1,s=h,a=v,o=y}this.maxLine+=1;let l=[...this.content.matchAll(/@?{{/gm)],u=0,c=!1;return l.forEach(f=>{let d=f[0];if(d.startsWith(fe.AtChar)){u=this.content.indexOf(d,u)+2,c=!0;return}let h=this.content.indexOf(d,u);if(c&&u==h){u=h;return}this.antlersStartIndex.push(h),this.antlersStartPositionIndex.set(h,1),u=h+2,c=!1}),!0}prepareLiteralContent(e){return e.replace("@{{","{{")}scanToEndOfPhpRegion(e){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==e&&this.next!=null&&this.next==fe.RightBrace&&this.peek(this.currentIndex+2)==fe.RightBrace){let r=this.makeAntlersPhpNode(this.currentIndex,e==fe.Punctuation_Dollar);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.startIndex=this.currentIndex,this._recoveryStartIndex=this.startIndex,this.nodes.push(r),this.lastAntlersNode=r;break}if(this.appendContent(this.cur),this.next==null){let i=this.makeAntlersPhpFailedNode(this.currentIndex);this.nodes.push(i),this.lastAntlersNode=i,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(D.makeSyntaxError(T.TYPE_INCOMPLETE_PHP_EVALUATION_REGION,i,"Unexpected end of input while parsing Antlers PHP region."));break}}}appendContent(e){e!=null&&(this.currentContent.push(e),this.sourceContent.push(e))}scanToEndOfAntlersCommentRegion(){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==fe.Punctuation_Octothorp&&this.next!=null&&this.next==fe.RightBrace&&this.peek(this.currentIndex+2)==fe.RightBrace){let i=this.makeAntlersTagNode(this.currentIndex,!0);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.nodes.push(i),this.lastAntlersNode=i;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersCommentFailedNode(this.currentIndex);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(D.makeSyntaxError(T.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION,e,"Unexpected end of input while parsing Antlers comment region."));break}}}scanToEndOfInterpolatedRegion(){this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0);let e=[];this.isScanningInterpolations=!0;let i=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),this.cur==fe.LeftBrace){if(this.prev==fe.AtChar){e.push(this.cur);continue}i+=1,e.push(this.cur)}else if(this.cur==fe.RightBrace){if(this.prev==fe.AtChar){e.push(this.cur);continue}if(i-=1,e.push(this.cur),i==0){this.interpolationEndOffsets.set(this.currentIndex,1);break}}else this.cur!=null&&e.push(this.cur);let r=e.join(""),s=("int_"+DS.Md5.hashStr(r)).substr(0,r.length),o=s.length,a=r.length;if(o<a){let l=a-o;s+="x".repeat(l)}return this.isScanningInterpolations=!1,{content:r,varContent:s}}bordersInterpolationRegion(e){if(this.interpolationEndOffsets.size==0)return!1;let i=e.offset-1;return i<=0?!1:this.interpolationEndOffsets.has(i)}getParseableContent(e){let i="";for(let r=0;r<=e;r++)this.content[r]==fe.LeftBrace||this.content[r]==fe.RightBrace?i+="~":i+=this.content[r];return i}resetEscapedContentState(){this.mayBeStartingEscapedContent=!1,this.isParsingEscapedContent=!1,this.escapedContentEndSymbol=null,this.escapedContentSymbolEncountered=0}scanToEndOfAntlersRegion(){for(this.resetEscapedContentState(),this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==fe.LeftBrace&&this.prev==fe.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.isInterpolatedParser&&this.cur==fe.RightBrace&&this.prev==fe.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.isParsingEscapedContent&&this.cur==this.escapedContentEndSymbol&&this.prev!=fe.String_EscapeCharacter&&(this.escapedContentSymbolEncountered+=1,this.escapedContentSymbolEncountered>=2&&this.resetEscapedContentState()),this.mayBeStartingEscapedContent&&(this.cur!=null&&j.ctypeSpace(this.cur)||this.next==null?this.resetEscapedContentState():this.cur==fe.Punctuation_Equals&&(this.next==fe.String_Terminator_SingleQuote||this.next==fe.String_Terminator_DoubleQuote)&&(this.mayBeStartingEscapedContent=!1,this.isParsingEscapedContent=!0,this.escapedContentEndSymbol=this.next,this.escapedContentSymbolEncountered=0)),this.cur==fe.String_EscapeCharacter&&this.prev!=null&&j.ctypeSpace(this.prev)&&this.next!=null&&(j.ctypeAlpha(this.next)||this.next==fe.Punctuation_Underscore||this.next==fe.AtChar)&&(this.mayBeStartingEscapedContent=!0),!this.isParsingEscapedContent&&this.cur==fe.LeftBrace){let e=this.scanToEndOfInterpolatedRegion(),i=this.currentIndex+this.seedOffset,r=i-e.content.length,n=this.getParseableContent(r-1);ss.interpolatedVariables.push(e.varContent),this.currentContent=this.currentContent.concat(e.varContent.split("")),this.sourceContent=this.sourceContent.concat(e.content.split(""));let s=n+"{"+e.content+"}";this.interpolationRegions.set(e.varContent,{content:e.content,parseContent:s,varContent:e.varContent,startOffset:r,endOffset:i});continue}if(!this.isParsingEscapedContent&&this.cur==fe.RightBrace&&this.next!=null&&this.next==fe.RightBrace){let e=this.makeAntlersTagNode(this.currentIndex,!1);e.name!=null&&e.name.name=="noparse"&&(this.isNoParse=!0),this.currentIndex+=2,this.nodes.push(e),this.lastAntlersNode=e;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersFailedNode(this.currentIndex,!1);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0;let i="Unexpected end of input while parsing Antlers region.";this.isScanningInterpolations&&(i="Unexpected end of input wihle parsing interpolated Antlers region."),this.antlersErrors.push(D.makeSyntaxError(T.TYPE_INCOMPLETE_ANTLERS_REGION,e,i));break}}}makeAntlersPhpNode(e,i){let r=new ks;return i?(r.rawStart="{{$",r.rawEnd="$}}"):(r.rawStart="{{?",r.rawEnd="?}}"),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+3>this.inputLen?(r.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,r,"Unexpected end of input while locating end of Antlers region.")),r):(this.lastAntlersEndIndex=e+3+this.seedOffset,r.endPosition=this.positionFromOffset(e+this.seedOffset,e+3+this.seedOffset),r)}makeAntlersPhpFailedNode(e){let i=new sd;i.rawStart="{{$",i.rawEnd="$}}",i._isEndVirtual=!0,i.content=this.currentContent.join(""),i.sourceContent=this.sourceContent.join(""),i.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let r=this.getLineText(i.startPosition.line),n=this.getLineIndex(i.startPosition.line);if(r!=null){let o=r.substr(this._recoveryStartIndex);i.content=o,i.sourceContent=o}let s=e+this.seedOffset;return n!=null&&(this.currentIndex=n.end,s=n.end),i.endPosition=this.positionFromOffset(s,s),i}makeAntlersCommentFailedNode(e){let i=new Ka;this.isDoubleBrace?(i.rawStart="{{",i.rawEnd="}}"):(i.rawStart="{",i.rawEnd="}"),i._isEndVirtual=!0;let r=!1,n=this.currentContent.length;n>0&&this.currentContent[n-1]==fe.Punctuation_ForwardSlash&&(this.currentContent.pop(),r=!0),i.isComment=!0,i.isSelfClosing=r,i.withParser(this),i.content=this.currentContent.join(""),i.sourceContent=this.sourceContent.join(""),i.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let s=this.getLineText(i.startPosition.line),o=this.getLineIndex(i.startPosition.line);if(s!=null){let l=s.substr(this._recoveryStartIndex);i.content=l,i.sourceContent=l}let a=e+this.seedOffset;return o!=null&&(this.currentIndex=o.end,a=o.end),i.endPosition=this.positionFromOffset(a,a),i.interpolationRegions=new Map,this.interpolationRegions.forEach((l,u)=>{i.content.includes(u)&&i.interpolationRegions.set(u,l)}),i}makeAntlersFailedNode(e,i){let r=new lt;this.isDoubleBrace?(r.rawStart="{{",r.rawEnd="}}"):(r.rawStart="{",r.rawEnd="}"),r._isEndVirtual=!0;let n=!1,s=this.currentContent.length;s>0&&this.currentContent[s-1]==fe.Punctuation_ForwardSlash&&(this.currentContent.pop(),n=!0),r.isComment=i,r.isSelfClosing=n,r.withParser(this),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let o=this.getLineText(r.startPosition.line),a=this.getLineIndex(r.startPosition.line);if(o!=null){let c=j.trimLeft(this.content.substring(r.startPosition.offset+r.rawStart.length-1,a?.end),"{");r.content=c,r.sourceContent=c}let l=e+this.seedOffset;a!=null&&(this.currentIndex=a.end,l=a.end),r.endPosition=this.positionFromOffset(l,l),r.interpolationRegions=new Map,this.interpolationRegions.forEach((c,f)=>{r.content.includes(f)&&r.interpolationRegions.set(f,c)});let u=this.nodeParser.parseNode(r);return this.mergeErrors(u.getErrors()),u}makeAntlersTagNode(e,i){let r=new B;this.isDoubleBrace?(r.rawStart="{{",r.rawEnd="}}"):(r.rawStart="{",r.rawEnd="}");let n=!1,s=this.currentContent.length;if(s>0&&this.currentContent[s-1]==fe.Punctuation_ForwardSlash&&(this.currentContent.pop(),n=!0),r.isInterpolationNode=this.isInterpolatedParser,r.isComment=i,r.isSelfClosing=n,r.withParser(this),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+2>this.inputLen)return r.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(D.makeSyntaxError(T.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,r,"Unexpected end of input while locating end of Antlers region.")),r;if(i?this.lastAntlersEndIndex=e+2+this.seedOffset:this.lastAntlersEndIndex=e+1+this.seedOffset,r.endPosition=this.positionFromOffset(this.lastAntlersEndIndex,this.lastAntlersEndIndex),r.interpolationRegions=new Map,this.interpolationRegions.forEach((a,l)=>{r.content.includes(l)&&r.interpolationRegions.set(l,a)}),r.isComment)return r;let o=this.nodeParser.parseNode(r);return this.mergeErrors(o.getErrors()),o}mergeErrors(e){e.forEach(i=>{this.antlersErrors.push(i)})}getNodes(){return this.nodes}getNodesBetween(e,i){let r=[];return this.nodes.forEach(n=>{(n.startPosition?.offset??0)>e.offset&&(n.endPosition?.offset??0)<i.offset&&r.push(n)}),r}antlersNodes(){return this.nodes.filter(function(e){return e instanceof B})}dumpLiteralNode(e){this.isNoParse||(this.currentContent.length>0&&this.nodes.push(this.makeLiteralNode(this.currentContent,this.startIndex,e)),this.currentContent=[],this.sourceContent=[])}makeLiteralNode(e,i,r){let n=new Le;return n.content=e.join(""),n.sourceContent=this.sourceContent.join(""),n.startPosition=this.positionFromOffset(i,i),n.endPosition=this.positionFromOffset(r,r),n.sourceContent=this.content.substr(i,r),n.withParser(this),n}addAntlersError(e){this.antlersErrors.push(e)}getAntlersErrors(){return this.antlersErrors}getStructureErrors(){return this.structureErrors}},x=fe;x.K_CHAR="char",x.K_LINE="line",x.NewLine=`
`,x.AtChar="@",x.LeftBrace="{",x.RightBrace="}",x.LeftBracket="[",x.RightBracket="]",x.String_EscapeCharacter="\\",x.String_Terminator_DoubleQuote='"',x.String_Terminator_SingleQuote="'",x.Punctuation_Question="?",x.Punctuation_Equals="=",x.Punctuation_Comma=",",x.Punctuation_Colon=":",x.Punctuation_Semicolon=";",x.Punctuation_Exclamation="!",x.Punctuation_Pipe="|",x.Punctuation_Ampersand="&",x.Punctuation_LessThan="<",x.Punctuation_GreaterThan=">",x.Punctuation_Octothorp="#",x.Punctuation_Tilde="~",x.Punctuation_FullStop=".",x.Punctuation_Dollar="$",x.Punctuation_Asterisk="*",x.Punctuation_Percent="%",x.Punctuation_Plus="+",x.Punctuation_Minus="-",x.Punctuation_Underscore="_",x.Punctuation_ForwardSlash="/",x.Punctuation_Caret="^",x.LeftParen="(",x.RightParent=")";var yt=class{static findAssignmentNodes(e){let i=[];for(let r=0;r<e.length;r++)Rt.isAssignmentOperatorNode(e[r])&&i.push(e[r]);return i}static findAbstractNodesBefore(e,i){return this.findAbstractNodesBeforePosition(e.startPosition,i)}static findAbstractNodesBeforePosition(e,i){if(e==null)return[];let r=[];for(let n=0;n<i.length;n++){let s=i[n];if(s.startPosition!=null){if(s.startPosition.index>e.index)break;r.push(s)}}return r}static isBefore(e,i){return e.startPosition==null?!1:e.startPosition.index<i.index}static isAfter(e,i){return e.startPosition==null?!1:e.startPosition.index>i.index}static findNodesBeforePosition(e,i){let r=[];if(e==null)return r;for(let n=0;n<i.length;n++){let s=i[n];if(!yt.isLiteralType(s)&&s.startPosition!=null&&s.endPosition!=null){if(s.startPosition.index>e.index)break;r.push(s)}}return r}static findNodesAfterPosition(e,i){let r=[];if(e==null)return r;for(let n=0;n<i.length;n++){let s=i[n];yt.isLiteralType(s)||s.startPosition!=null&&s.startPosition.index>e.index&&r.push(s)}return r}static findNodeBeforePosition(e,i){if(e==null)return null;let r=null;for(let n=0;n<i.length;n++){let s=i[n];if(!yt.isLiteralType(s)&&s.startPosition!=null){if(s.startPosition.index>e.index)break;r=s}}return r}static findNodeAfterPosition(e,i){if(e==null)return null;for(let r=0;r<i.length;r++){let n=i[r];if(!yt.isLiteralType(n)&&n.startPosition!=null&&n.startPosition.index>e.index)return n}return null}static findNodeAtPosition(e,i){if(e==null)return null;for(let r=0;r<i.length;r++){let n=i[r];if(!yt.isLiteralType(n)&&n.startPosition!=null&&n.endPosition!=null&&e.index>=n.startPosition.index&&e.index<=n.endPosition.index)return n}return null}static isLiteralType(e){return e instanceof Qt||e instanceof Le}};var xl=class{static isModifierLeftOf(e,i){return xl.isModifierLeftOfPosition(e.startPosition,i)}static isModifierLeftOfPosition(e,i){let r=yt.findAbstractNodesBeforePosition(e,i);for(let n=r.length-1;n>=0;n--){let s=r[n];if(s instanceof jt&&n-1>0&&r[n-1]instanceof Ct)return!0;if(s instanceof Ut){if(n==r.length-1)continue;return!1}if(s instanceof jt)return!1;if(s instanceof ci)return!0}return!1}};var wl=class{constructor(){this.isRightOfOperator=!1;this.isLeftOfOperator=!1}static resolveContext(e,i,r){let n=new wl;return r!=null&&(r.prev!=null&&Rt.isOperatorType(r.prev)&&(n.isRightOfOperator=!0),r.next!=null&&Rt.isOperatorType(r.next)&&(n.isLeftOfOperator=!0)),n}};var Pp=class{constructor(){this.inTagPart=!1;this.inMethodPart=!1}};var kl=class{constructor(){this.modifierChain=null;this.activeModifier=null;this.name="";this.inModifierName=!1;this.inModifierParameter=!1;this.valueCount=0;this.activeValueIndex=-1;this.activeValue=null}static resolveContext(e,i,r,n){let s=i.getParser(),o=new kl,a=s.getLanguageParser().getCreatedModifierChains(),l=null;for(let c=0;c<a.length;c++){let f=a[c];if(e.isWithin(f.startPosition,f.endPosition,2)){for(let d=0;d<f.modifierChain.length;d++){let h=f.modifierChain[d];if(e.isWithin(h.startPosition,h.endPosition,2)){l=h;break}}if(l!=null)break}}l==null&&r instanceof Ct&&n.getDocumentParser().getLanguageParser().hasModifierConstruct(r)&&(l=n.getDocumentParser().getLanguageParser().getModifierConstruct(r));let u=n.wordLeftAt(e);if(l==null&&u!=null&&Ce.instance?.hasModifier(u)&&i.modifierChain!=null&&i.modifierChain.modifierChain.length>0)for(let c=0;c<i.modifierChain.modifierChain.length;c++){let f=i.modifierChain.modifierChain[c];if(f.modifier!=null&&f.modifier.name==u){l=f;break}}if(l!=null){if(o.activeModifier=l,l.nameNode!=null&&(o.name=l.nameNode.name),l.nameNode!=null&&e.isWithin(l.nameNode.startPosition,l.nameNode.endPosition,1)&&(o.inModifierName=!0),l.methodStyleArguments!=null){if(o.valueCount=l.methodStyleArguments.args.length,!o.inModifierName){for(let c=0;c<l.methodStyleArguments.args.length;c++){let f=l.methodStyleArguments.args[c];e.isWithin(f.startPosition,f.endPosition,1)&&(o.activeValueIndex=c,o.activeValue=f)}o.activeValueIndex===-1&&e.isWithin(l.methodStyleArguments.startPosition,l.methodStyleArguments.endPosition)&&(o.valueCount+=1,o.activeValueIndex=o.valueCount-1)}}else if(o.valueCount=l.valueNodes.length,!o.inModifierName)for(let c=0;c<l.valueNodes.length;c++){let f=l.valueNodes[c];if(e.isWithin(f.startPosition,f.endPosition,1)){o.activeValueIndex=c,o.activeValue=f;break}}}return o}};var Dl=class{constructor(){this.parameter=null;this.isInName=!1;this.isInValue=!1}static resolveContext(e,i){let r=new Dl;return r.parameter=i,e.isWithinRange(i.namePosition)?r.isInName=!0:e.isWithinRange(i.valuePosition)&&(r.isInValue=!0),r}};var Ap=class{constructor(){this.refId="";this.node=null;this.leftPunctuation=null;this.rightPunctuation=null;this.leftChar=null;this.rightChar=null;this.word=null;this.char=null;this.interpolatedContext=!1;this.leftWord=null;this.rightWord=null;this.isCursorInIdentifier=!1;this.root=null;this.identifierContext=null;this.position=null;this.feature=null;this.isInParameter=!1;this.subContext=null;this.parameterContext=null;this.modifierContext=null;this.generalContext=null;this.variableContext=null;this.cursorContext=S_.Unknown;this.refId=Ya()}},S_=(o=>(o[o.Unknown=0]="Unknown",o[o.Variable=1]="Variable",o[o.Modifier=2]="Modifier",o[o.Parameter=3]="Parameter",o[o.General=4]="General",o[o.LanguageOperator=5]="LanguageOperator",o))(S_||{});var Fl=class{constructor(){this.variableNode=null;this.varPathText=""}static resolveContext(e,i,r,n){if(r==null)return null;let s=r,o=n.getDocumentParser().getLanguageParser(),a=new Fl,l=n.wordAt(e)??"";r instanceof vt&&o.isMergedVariableComponent(r)==!1&&r.prev instanceof ie&&(s=r.prev);let u="";if(o.isMergedVariableComponent(s)){let f=o.getMergedVariable(s);f.startPosition!=null&&(u=n.getText(f.startPosition.index,e.index).trim()),a.variableNode=f}else s instanceof ie&&(a.variableNode=s,u=s.name,s.variableReference!=null&&(u=s.variableReference.normalizedReference));u.length>0&&(u=mt(u,"\\.",":"));let c=u.split(":");return l.trim().length>0&&c.pop(),u=c.join(":"),u.endsWith(":")&&(u=ln(u,":")),a.varPathText=u,a}};var Fn=class{static resolveIdentifierContext(e,i){let r=new Pp;return i.nameMethodPartStartsOn!=null?e.char<i.nameMethodPartStartsOn.char?(r.inTagPart=!0,r.inMethodPart=!1):(r.inTagPart=!1,r.inMethodPart=!0):(r.inMethodPart=!1,r.inTagPart=!0),r}static resolveContext(e,i,r,n=!1,s=null){if(i==null||e==null)return null;if(i instanceof Gi||i instanceof B){let o=new Ap;if(i.nameStartsOn!=null&&e.line==i.nameStartsOn.line){let u=!1;e.char>=i.nameStartsOn.char&&(u=!0),i.nameEndsOn!=null&&e.char>i.nameEndsOn.char&&(u=!1),u&&(o.isCursorInIdentifier=!0,o.identifierContext=Fn.resolveIdentifierContext(e,i))}i.addContext(o),s?.addContext(o),o.interpolatedContext=n,o.node=i,o.position=e,o.root=s,o.leftPunctuation=r.punctuationLeftAt(e),o.rightPunctuation=r.punctuationRightAt(e),o.leftChar=r.charLeftAt(e),o.rightChar=r.charRightAt(e),o.isCursorInIdentifier==!0&&o.leftChar==" "&&(o.leftChar=":"),o.word=r.wordAt(e),o.char=r.charAt(e),o.leftWord=r.wordLeftAt(e),o.rightWord=r.wordRightAt(e);let a=!1;if(i.parameters.length>0)for(let u=0;u<i.parameters.length;u++){let c=i.parameters[u];if(c.blockPosition!=null&&c.blockPosition.start!=null&&c.blockPosition.end!=null&&e.char>c.blockPosition.start.char&&e.char<=c.blockPosition.end.char+1&&e.line>=(c.namePosition?.start?.line??c.blockPosition.start.line)&&e.line<=(c.valuePosition?.end?.line??c.blockPosition.end.line)){o.cursorContext=3,o.parameterContext=Dl.resolveContext(e,c),o.isInParameter=!0,o.feature=c,a=!0;break}}if(a||i.runtimeNodes.forEach(u=>{u.startPosition!=null&&u.endPosition!=null&&e.isWithin(u.startPosition,u.endPosition,1)&&(o.feature=u)}),a&&i.interpolationRegions.size>0){let u=Array.from(i.interpolationRegions,([c,f])=>f);for(let c=0;c<u.length;c++){let f=u[c];if(e.index>=f.startOffset&&e.index<=f.endOffset){let d=i.getInterpolationNode(f.varContent);return Fn.resolveContext(e,d,r,!0,s)}}}return o.feature instanceof ie&&o.feature.isInterpolationReference&&o.feature.parent!=null&&o.feature.parent instanceof B&&o.feature.parent.processedInterpolationRegions.has(o.feature.name)?Fn.resolveContext(e,o.feature.parent.getInterpolationNode(o.feature.name),r,!0,s):(xl.isModifierLeftOfPosition(e,i.runtimeNodes)?(o.cursorContext=2,o.modifierContext=kl.resolveContext(e,i,o.feature,r)):a||(o.cursorContext=4,o.generalContext=wl.resolveContext(e,i,o.feature)),o.variableContext=Fl.resolveContext(e,i,o.feature,r),o)}return null}};var Xs=class{static isPairedNode(e){return e instanceof Ve?!0:e instanceof Gi||e instanceof B?e.isClosedBy!=null:!1}static findAncestorsBeforePosition(e,i){let r=[],n=[],s=-1,o=-1;for(let a=0;a<i.length;a++){let l=i[a];if(l.isClosedBy!=null&&l.isClosedBy.endPosition?.isBefore(e)&&(n.push(l),n.push(l.isClosedBy),s=l.isClosedBy.endPosition.line,o=l.isClosedBy.endPosition.char),!(s>-1&&l.endPosition!=null&&(l.endPosition.line<s||l.endPosition.line==s&&o>-1&&l.endPosition.char<o))){if(l.startPosition!=null){if(e.isBefore(l.startPosition))break;if(l.startPosition.line==e.line&&e.char<=l.startPosition.char){n.push(l);continue}}if(Ne.instance?.requiresClose(l)&&l.isClosedBy!=null){let u=l.isClosedBy;if(u.startPosition?.isBefore(e)){n.push(l),n.push(u);continue}else u.startPosition?.line==e.line&&u.startPosition?.char<e.char?n.push(l):r.push(l)}else if(l.parent!=null){let u=l.parent;if(n.includes(u)){n.push(l);continue}else l.endPosition?.isBefore(e)?r.push(l):n.push(l)}else r.push(l)}}return r}};var Ep=class{constructor(e){this.doc=e}getAncestorsAt(e,i){let r=this.position(e,i);return r==null?[]:Xs.findAncestorsBeforePosition(r,this.doc.getAllAntlersNodes())}getNameAt(e,i){let r=this.getNodeAt(e,i);return r instanceof B?r.name:null}getScopeAt(e,i){let r=this.getNodeAt(e,i);return r instanceof B&&r.currentScope!=null?r.currentScope:null}getFeaturesAt(e,i){let r=this.position(e,i),n=this.getNodeAt(e,i);return Fn.resolveContext(r,n,this.doc,!1,n)}getNodeAt(e,i){return yt.findNodeAtPosition(this.position(e,i),this.doc.getDocumentParser().getNodes())}getNodeBefore(e,i){return yt.findNodeBeforePosition(this.position(e,i),this.doc.getDocumentParser().getNodes())}getNodeAfter(e,i){return yt.findNodeAfterPosition(this.position(e,i),this.doc.getDocumentParser().getNodes())}getNodesBefore(e,i){return yt.findNodesBeforePosition(this.position(e,i),this.doc.getDocumentParser().getNodes())}getAssignmentsBefore(e,i){let r=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),n=[],s=this.position(e,i);return s!=null&&r.forEach(o=>{yt.isBefore(o.target,s)&&n.push(o)}),n}getAssignmentsAfter(e,i){let r=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),n=[],s=this.position(e,i);return s!=null&&r.forEach(o=>{yt.isAfter(o.target,s)&&n.push(o)}),n}getNodesAfter(e,i){return yt.findNodesAfterPosition(this.position(e,i),this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e,i){let r=this.getNodeBefore(e,i);return r==null?!1:Xs.isPairedNode(r)}position(e,i){return this.doc.getDocumentParser().positionFromCursor(e,i)}charLeftAt(e,i){return this.doc.getDocumentParser().charLeftAtCursor(e,i)}charAt(e,i){return this.doc.getDocumentParser().charAtCursor(e,i)}charRightAt(e,i){return this.doc.getDocumentParser().charRightAtCursor(e,i)}wordLeftAt(e,i,r=4){return this.doc.getDocumentParser().wordLeftAtCursor(e,i,r)}wordRightAt(e,i,r=4){return this.doc.getDocumentParser().wordRightAtCursor(e,i,r)}wordAt(e,i,r=4){return this.doc.getDocumentParser().wordAtCursor(e,i,r)}punctuationLeftAt(e,i,r=4){return this.doc.getDocumentParser().punctuationLeftAtCursor(e,i,r)}punctuationRightAt(e,i,r=4){return this.doc.getDocumentParser().punctuationRightAtCursor(e,i,r)}};var Cp=class{constructor(e){this.doc=e}hasStructureErrors(){return this.doc.getDocumentParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getDocumentParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let e=[],i=[];return this.doc.getAllAntlersNodes().forEach(r=>{r.getErrors().forEach(n=>{e.includes(n.hash())==!1&&(e.push(n.hash()),i.push(n))})}),this.doc.getDocumentParser().getAntlersErrors().forEach(r=>{e.includes(r.hash())==!1&&(e.push(r.hash()),i.push(r))}),i}};var vP=Y(yn(),1);var Oi=Y(bP(),1),bpe=Oi.default.binaryOptions,Ipe=Oi.default.boolOptions,vpe=Oi.default.intOptions,Npe=Oi.default.nullOptions,Spe=Oi.default.strOptions,Ppe=Oi.default.Schema,Ape=Oi.default.Alias,Epe=Oi.default.Collection,Cpe=Oi.default.Merge,Rpe=Oi.default.Node,IP=Oi.default.Pair,Qu=Oi.default.Scalar,Xu=Oi.default.YAMLMap,Ul=Oi.default.YAMLSeq;var Yp=class{constructor(e){this.documentScope=null;this.project=e}getKeyValue(e){return e instanceof Qu?e.value:""}getNodeValue(e){return e instanceof Qu?e.value:e instanceof Xu?this.analyzeDocument(e.items):e instanceof Ul?this.analyzeDocument(e.items):""}getScalarRuntimeType(e){return parseFloat(e).toString()==e||parseInt(e).toString()==e?"number":"string"}analyzeDocument(e){let i=new zi(this.project);return e.forEach(r=>{if(r instanceof IP){let n=this.getKeyValue(r.key),s=this.getNodeValue(r.value);if(r.value instanceof Qu)i.addVariable({dataType:this.getScalarRuntimeType(s),introducedBy:null,name:n,sourceField:null,sourceName:"*frontmatter"});else if(r.value instanceof Ul&&r.key instanceof Qu){let o=new zi(this.project);r.value.items.forEach(a=>{let l=this.getNodeValue(a);o.addVariable({dataType:this.getScalarRuntimeType(l),introducedBy:null,name:a.value,sourceField:null,sourceName:"*frontmatter"})}),i.addScopeList(r.key.value,o)}else i.addScopeList(n,s)}}),i}parse(e){try{let i=vP.default.parseDocument(e);i.contents instanceof Xu&&(this.documentScope=this.analyzeDocument(i.contents.items))}catch{this.documentScope=null}}hasScope(){return this.documentScope!=null}getScope(){return this.documentScope}};var Kp=class{constructor(e){this.doc=e}getAncestors(e){return Xs.findAncestorsBeforePosition(e,this.doc.getAllAntlersNodes())}getNodeAt(e){return yt.findNodeAtPosition(e,this.doc.getDocumentParser().getNodes())}getNodesBefore(e){return yt.findNodesBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeBefore(e){return yt.findNodeBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeAfter(e){return yt.findNodeAfterPosition(e,this.doc.getDocumentParser().getNodes())}getNodesAfter(e){return yt.findNodesAfterPosition(e,this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e){let i=this.getNodeBefore(e);return i==null?!1:Xs.isPairedNode(i)}filter(e){return this.doc.getDocumentParser().getNodes().filter(e)}getComments(){let e=[];return this.doc.getAllNodes().forEach(i=>{i instanceof B&&i.isComment&&e.push(i)}),e}getMultilineNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{i instanceof B&&!i.isComment&&i.startPosition?.line!=i.endPosition?.line&&e.push(i)}),e}getMultiLineComments(){let e=[];return this.getComments().forEach(i=>{i.startPosition?.line!=i.endPosition?.line&&e.push(i)}),e}getAllLiteralNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{(i instanceof Le||i instanceof Qt)&&e.push(i)}),e}getStructuralNodes(){let e=[];return this.doc.getDocumentParser().getRenderNodes().forEach(i=>{i instanceof B?e.push(i):i instanceof Ve&&i.logicBranches.length>0&&i.logicBranches.forEach(r=>{if(r.head!=null){let n=r.head;n.originalNode!=null?e.push(n.originalNode):e.push(n)}})}),e}getAllRuntimeNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{(i instanceof Gi||i instanceof B)&&i.runtimeNodes.length>0&&i.runtimeNodes.forEach(r=>{e.push(r)})}),e}getAllParameterNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{(i instanceof Gi||i instanceof B)&&i.hasParameters&&i.parameters.forEach(r=>{e.push(r)})}),e}getAssignmentNodes(){return yt.findAssignmentNodes(this.getAllRuntimeNodes())}};var $p=class{constructor(e){this.doc=e}getAllSelfClosingNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{i instanceof B&&i.isSelfClosing&&e.push(i)}),e}getAllPairedNodes(){let e=[];return this.doc.getAllNodes().forEach(i=>{(i instanceof B||i instanceof lt)&&i.isClosedBy!=null&&!i.isSelfClosing&&e.push(i)}),e}};var sa=class{static printCommentLines(e,i,r){let n=e.getContent(),s=n.trim();if(s.includes(`
`)){let o=j.breakByNewLine(n),a=[];o.forEach(c=>{if(c.trim().length==0){a.push(" ".repeat(i+r)+c.trim());return}let f=c.length-c.trim().length,d=c.trim();(d.startsWith("@desc")||d.startsWith("@set")||d.startsWith("@name"))&&(f=i),a.push(" ".repeat(i+r+f-i)+c.trim())}),a.length>0&&a[a.length-1].trim().length==0&&a.pop();let l=a.join(`
`),u=`{{#
`;return u+=l,u+=`
`+" ".repeat(r)+"#}}",u}return"{{# "+s+" #}}"}static async printCommentAsync(e,i,r,n){let s=e.getContent(),o=s;if(o.includes(`
`)&&!(o.includes("@desc")||o.includes("@set")||o.includes("@name")))try{let a=o;n!=null&&(a=await n(a));let l=j.breakByNewLine(a),u=[];return l.forEach(c=>{if(c.trim().length==0){u.push(" ".repeat(i+r)+c.trim());return}let f=c.length-c.trim().length;u.push(" ".repeat(i+r+f)+c.trim())}),u.length>0&&u[u.length-1].trim().length==0&&u.pop(),`{{#
`+u.join(`
`)+`
`+" ".repeat(r)+"#}}"}catch{}return this.printCommentLines(e,i,r)}static printComment(e,i,r,n){let s=e.getContent(),o=s.trim();if(o.includes(`
`)&&!(o.includes("@desc")||o.includes("@set")||o.includes("@name")))try{let a=o;n!=null&&(a=n(a));let l=j.breakByNewLine(a),u=[];return l.forEach(c=>{if(c.trim().length==0){u.push(" ".repeat(i+r)+c.trim());return}let f=c.length-c.trim().length;u.push(" ".repeat(i+r+f)+c.trim())}),u.length>0&&u[u.length-1].trim().length==0&&u.pop(),`{{#
`+u.join(`
`)+`
`+" ".repeat(r)+"#}}"}catch{}return this.printCommentLines(e,i,r)}};var Ln=class{static indentRelative(e,i){let r=j.breakByNewLine(e),n=[];for(let a=0;a<r.length;a++)if(r[a].trim().length>0){n=r.slice(a);break}for(let a=n.length-1;a>=0&&n[a].trim().length==0;a--)n.pop();let s=-1,o="";for(let a=0;a<n.length;a++){let l=n[a],u=l.trimLeft(),c=l.length-u.length;(a==0||c<s)&&(s=c,o=l)}if(s>=0){let a=" ".repeat(i);for(let l=0;l<n.length;l++){let u=n[l];if(u.trim().length==0){n[l]="";continue}let c=u.substring(s);if(l==0){n[l]=u.trimLeft();continue}else n[l]=a+c.trimLeft()}}return n.join(`
`)}static shiftIndentLTrim(e,i,r=!1,n=4,s=!0,o=!1){i<0&&(i=0);let a=j.breakByNewLine(e.trim()),l=[],u=!1,c=!1;a.length>=2&&(u=a[0].length-a[0].trimStart().length!=0,c=a[a.length-1].length-a[a.length-1].trimStart().length!=0);for(let d=0;d<a.length;d++){if(d==0&&r){l.push(a[d]);continue}if(d==a.length-1&&o){l.push(a[d]);continue}let h=a[d];if(d>0&&!u&&c){l.push(h);continue}l.push(" ".repeat(i)+h)}let f=l.join(`
`);if(s&&l.length>0&&i-n>n&&l[l.length-1].trim()==") }}"){a=j.breakByNewLine(f.trim()),l=[];for(let d=0;d<a.length;d++){if(d==0&&r){l.push(a[d]);continue}if(d==a.length-1&&o){l.push(a[d]);continue}let h=a[d];if(d==a.length-1){l.push(h);break}l.push(" ".repeat(n)+h)}f=l.join(`
`)}return f}static shiftIndent(e,i,r=!1,n=4,s=!0,o=!1){i<0&&(i=0);let a=j.breakByNewLine(e.trim()),l=[];for(let c=0;c<a.length;c++){if(c==0&&r){l.push(a[c]);continue}if(c==a.length-1&&o){l.push(a[c]);continue}let f=a[c];l.push(" ".repeat(i)+f)}let u=l.join(`
`);if(s&&l.length>0&&i-n>n&&l[l.length-1].trim()==") }}"){a=j.breakByNewLine(u.trim()),l=[];for(let c=0;c<a.length;c++){if(c==0&&r){l.push(a[c]);continue}if(c==a.length-1&&o){l.push(a[c]);continue}let f=a[c];if(c==a.length-1){l.push(f);break}l.push(" ".repeat(n)+f)}u=l.join(`
`)}return u}static shiftClean(e,i){let r=j.breakByNewLine(e),n=[],s=" ".repeat(i),o=!1;return r.forEach(a=>{a.trim().length>0&&(o=!0),o&&n.push(s+a)}),n.join(`
`)}static inferIndentLevel(e,i,r){let n=0,s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.includes(i)){let l=a.trimLeft();n=a.length-l.length,s=o;break}}if(s>0)for(let o=s-1;o>=0;o--){let a=e[o],l=a.trim(),u=a.trimLeft(),c=a.length-l.length;if(u.length!=0&&c!=n&&c<n){let f=n-c;return{targetLevel:n,referenceLevel:c,sourceTabSize:f}}}return{targetLevel:n,referenceLevel:n,sourceTabSize:r}}static indent(e,i,r){let n=Ln.inferIndentLevel(e,i,r);return" ".repeat(n.targetLevel)}};var zp=class{constructor(e,i,r){this.buffer="";this.closeString="";this.relativeIndentSize=0;this.indentSeed=0;this.baseIndent=i,e.isInterpolationNode?(this.buffer="{",this.closeString="}"):(this.buffer="{{ ",e.isSelfClosing?this.closeString=" /}}":this.closeString=" }}"),e.pathReference?.isStrictTagReference&&(this.buffer+="%"),r!=null&&r.trim().length>0&&(this.buffer+=r+" ")}setIndentSeed(e){return this.indentSeed=e,this}close(){return this.closeString==" }}"?this.buffer.endsWith(" ")?this.buffer+="}}":this.buffer+=this.closeString:this.buffer+=this.closeString,this}appendT(e){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer+=e,this}appendTS(e,i=!1){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer.endsWith("{")&&!i&&(e=e.trimStart()),this.buffer+=e,this}append(e){return this.buffer+=e,this}appendOS(e){return this.buffer.endsWith(" ")==!1&&this.buffer.endsWith("(")==!1&&this.buffer.endsWith("{")==!1&&this.buffer.endsWith("[")==!1&&this.buffer.endsWith(":")==!1&&(this.buffer+=" "),this.append(e)}appendS(e){let i="";return this.buffer.endsWith(" ")==!1&&(i+=" "),i+=e+" ",this.buffer+=i,this}indent(){let e=this.baseIndent;return e==0?e=1:e+=2,this.relativeIndentSize>0&&(e+=this.relativeIndentSize),this.buffer+=" ".repeat(e),this}addIndent(e){return e<=0?this:(this.buffer+=" ".repeat(e),this)}paramS(e){let i=" ";return e.isVariableReference&&(i+=":"),i+=e.name+"="+e.nameDelimiter+e.value+e.nameDelimiter,this.append(i),this}replace(e,i){return this.buffer=mt(this.buffer,e,i),this}relativeIndent(e){let i=this.buffer.split(`
`);if(i.length==0)return this;let r=i[i.length-1].trimEnd();return r.endsWith("(")&&(r=r.slice(0,-1)),r.endsWith(e)==!1?this:(this.relativeIndentSize=r.lastIndexOf(e),this)}newlineIndent(){return this.newLine(),this.indent(),this}newlineNDIndent(){return this.buffer=this.buffer.trimEnd(),this.newLine(),this.indent(),this}newLine(){return this.buffer+=`
`,this}getContent(){return this.buffer}endsWith(e){return this.buffer.endsWith(e)}};var oa=class{static prettyPrintNode(e,i,r,n,s,o){let a=e.getTrueRuntimeNodes(),l=0,u=0;if(a.length>0){let c=new zp(e,r,s);o!=null&&c.setIndentSeed(o);let f=null;for(let h=0;h<a.length;h++){let p=a[h];if(f!=null&&p.endPosition?.isBefore(f.startPosition))continue;let y=!1;if(p instanceof Ut?!(p.next instanceof Ut)&&p.next!=null&&(!Rt.isOperatorType(p.next)||!Rt.isAssignmentOperator(p.next))&&(!(p.next instanceof ri)&&!(p.next instanceof vt)&&!p.isSwitchGroupMember&&!Rt.isOperatorType(p.next)&&(y=!0,p.next instanceof ie&&p.next.name=="as"&&(y=!1)),p.next instanceof ci&&(y=!1)):!p.prev?.isVirtual&&p.prev?.isVirtualGroupOperatorResolve&&p.prev.producesVirtualStatementTerminator&&p.next!=null&&!(p.prev instanceof ie)&&!(p.next instanceof $i)&&!(p instanceof $i)&&c.newlineIndent(),p instanceof ie){if(p.convertedToOperator){if(p.name=="arr")c.appendT(" arr");else if(p.name=="switch"||p.name=="list")if(c.appendTS(" "+p.name,!0),h+1<a.length){if(!(a[h+1]instanceof jt))break;c.append("("),p.name!="list"&&c.relativeIndent(p.name).newLine().indent(),h+=1,f=a[h+1];continue}else break;else if(u+=1,u>1)c.newlineNDIndent().indent().addIndent(6).appendS(p.name);else{if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p)){c.append(p.name);continue}c.appendS(p.name)}f=p;continue}if(p.mergeRefName!=null&&p.mergeRefName.trim().length>0&&p.mergeRefName!=p.name)c.append(p.mergeRefName.trim());else if(p.name=="as")c.appendOS("as");else{if(p.methodTarget!=null){p.variableReference!=null&&p.variableReference.pathParts.forEach(v=>{v instanceof zt&&(c.append(v.name),c.append("."))}),c.append(p.methodTarget.method?.name??"");continue}c.append(p.name.trim())}}else if(p instanceof hr)if(c.appendTS(" list"),h+1<a.length){if(!(a[h+1]instanceof jt))break;c.append("("),h+=1,f=a[h+1];continue}else break;else if(p instanceof ci)c.appendS("|");else if(p instanceof vt){if(f!=null&&p.startPosition?.isBefore(f.endPosition)||p.next instanceof ie&&p.next.mergeRefName.startsWith(":"))continue;if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p)){c.endsWith(":")||c.append(":");continue}if(p.prev!=null&&p.next!=null&&at.distance(p.prev,p)<=1&&at.distance(p.next,p)<=1){c.append(":"),f=p;continue}if(i.getDocumentParser().getLanguageParser().isActualModifierSeparator(p)){c.append(":"),f=p;continue}if(f instanceof Ct||f instanceof Gt){c.append(":"),f=p;continue}c.appendS(":")}else if(p instanceof Ct)c.append(p.name);else if(p instanceof $i)c.appendS("?");else if(p instanceof bi){if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p))continue;if(p.isTenaryBranchSeparator){c.appendS(":"),f=p;continue}if(i.getDocumentParser().getLanguageParser().isActualModifierSeparator(p)){c.append(":"),f=p;continue}c.append(":")}else if(p instanceof Gt)c.append(p.value.trim());else if(p instanceof jt)c.append("(");else if(p instanceof Ut)c.append(")");else if(p instanceof Tt){if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p))continue;p.sourceContent!=""?c.appendOS(p.sourceContent):c.appendOS(p.sourceTerminator+p.value+p.sourceTerminator)}else if(p instanceof Et)p.isSwitchGroupMember?c.append(",").newlineIndent():c.append(", ");else if(p instanceof kt){if(f=p,i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p))continue;let v=p.value?.toString()??"";p.rawLexContent!=null&&p.rawLexContent.trim().length>0&&(v=p.rawLexContent.trim()),c.append(v)}else if(p instanceof Ki)c.appendS("=");else if(p instanceof fi)c.appendS("=>");else if(p instanceof Hi)c.appendS("+");else if(p instanceof yi){if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p)){c.append("-");continue}if(p.prev!=null&&p.next!=null&&at.distance(p.prev,p)<=1&&at.distance(p.next,p)<=1){p.next instanceof kt&&p.prev instanceof kt?c.appendS("-"):c.append("-"),f=p;continue}c.appendS("-")}else if(p instanceof Yi)c.appendS("*");else if(p instanceof Wi){if(f=p,p.startPosition?.isBefore(e.nameEndsOn)){c.append("/");continue}if(i.getDocumentParser().getLanguageParser().isMergedVariableComponent(p))continue;c.appendS("/");continue}else p instanceof ri?p.isListGroupMember?(c.append(";").newlineIndent().indent().addIndent(7),h+1<a.length&&!(a[h+1]instanceof Ut)&&c.indent()):(l+=1,l<n.maxAntlersStatementsPerLine?c.appendT("; "):(c.appendT(";").newlineIndent(),l=0)):p instanceof ni?p.content=="not"?c.appendS("not"):c.append("!"):p instanceof lr?h==0&&e.pathReference?.isStrictTagReference||c.appendS(p.rawContent()):p instanceof wt?c.append("->"):c.appendS(p.rawContent());y&&c.newlineIndent(),f=p}e.hasParameters&&e.parameters.forEach(h=>{c.paramS(h)}),c.close();let d=c.getContent();return e.processedInterpolationRegions.size>0&&new Map([...e.processedInterpolationRegions.entries()].sort().reverse()).forEach((p,y)=>{let v=oa.prettyPrintNode(p[0],i,r,n,null,null);d=mt(d,y,v)}),d}return e.getTrueRawContent()}};var jl=class{constructor(e){this.formatIgnoreStart="format-ignore-start";this.formatIgnoreEnd="format-ignore-end";this.htmlFormatter=null;this.asyncHtmlFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.asyncPhpFormatter=null;this.slugs=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.structureLines=[];this.parentTransformer=null;this.tagPairs=new Map;this.conditions=[];this.inlineIfs=new Map;this.createExraStructuralPairs=!1;this.spanNodes=new Map;this.inlineNodes=new Map;this.virtualBlocks=[];this.inlineComments=new Map;this.blockComments=[];this.dynamicElementAntlers=new Map;this.dynamicElementAntlersNodes=new Map;this.dynamicElementPairedAntlers=new Map;this.dynamicElementPairedAntlersNodes=new Map;this.dynamicElementConditionAntlers=new Map;this.dynamicElementConditionAntlersNodes=new Map;this.noParses=new Map;this.forceBreaks=[];this.inlineFormatter=null;this.asyncInlineFormatter=null;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.isInsideIgnoreFormatter=!1;this.forceCleanLines=["{{ if ","{{ /if","{{ /unless","{{ /noparse","{{ else","{{ unless"];this.doc=e,this.options={tabSize:4,newlinesAfterFrontMatter:1,maxAntlersStatementsPerLine:3,endNewline:!0}}withInlineFormatter(e){return this.inlineFormatter=e,this}withAsyncInlineFormatter(e){return this.asyncInlineFormatter=e,this}produceExtraStructuralPairs(e){return this.createExraStructuralPairs=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withAsyncHtmlFormatter(e){return this.asyncHtmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}withAsyncPhpFormatter(e){return this.asyncPhpFormatter=e,this}withOptions(e){return this.options=e,this.options.tabSize<=0&&(this.options.tabSize=4),this.options.newlinesAfterFrontMatter<0&&(this.options.newlinesAfterFrontMatter=1),this}setParentTransformer(e){return this.parentTransformer=e,this}close(e){return"</"+e+">"}open(e){return"<"+e+">"}selfClosing(e){return"<"+e+" />"}selfClosingNs(e){return"<"+e+"/>"}pair(e,i=""){return"<"+e+">"+i+"</"+e+">"}makeSlug(e){let i=j.makeSlug(e);return this.slugs.includes(i)?this.makeSlug(e+1):(this.slugs.push(i),i)}transformInlineConditions(e){let i=e;return this.inlineIfs.forEach((r,n)=>{i=i.replace(n,r.nodeContent)}),i}registerCondition(e){this.parentTransformer!=null?this.parentTransformer.registerCondition(e):this.conditions.push(e)}registerInlineCondition(e,i){this.parentTransformer!=null?this.parentTransformer.registerInlineCondition(e,i):this.inlineIfs.set(e,i)}registerVirtualBlock(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualBlock(e):this.virtualBlocks.push(e)}registerNoParse(e,i){this.parentTransformer!=null?this.parentTransformer.registerNoParse(e,i):this.noParses.set(e,i)}prepareNoParse(e){let i=this.makeSlug(35);return this.registerNoParse(i,e),i}registerForcedBreak(){if(this.parentTransformer!=null)return this.parentTransformer.registerForcedBreak();{let e=this.makeSlug(15),i=this.makeSlug(10);return this.forceBreaks.push(e),this.forceBreaks.push(i),this.removeLines.push(this.open(e)),this.removeLines.push(this.close(e)),this.removeLines.push(this.selfClosing(i)),this.pair(e,this.selfClosing(i))}}transformVirtualStructures(e){let i=e;return this.virtualBlocks.forEach(r=>{this.removeLines.push(r.pairClose);let n=this.indentLevel(r.pairOpen);if(r.virtualElement.length>0&&(this.removeLines.push(this.open(r.virtualElement)),this.removeLines.push(this.close(r.virtualElement))),r.node instanceof Qt){let s="{{ noparse }}"+r.node.getInnerDocumentText();i=i.replace(r.pairOpen,s)}if(r.node instanceof B){let s=r.node;i=i.replace(r.pairClose,s.isClosedBy?.getOriginalContent())}else this.removeLines.push(r.pairClose)}),this.noParses.forEach((r,n)=>{i=i.replace(n,`{{ noparse }}${r.getInnerDocumentText()}{{ /noparse }}`)}),i}async printNodeAsync(e,i=null){let r=e.getTrueNode();if((r.rawStart=="{{?"||r.rawStart=="{{$")&&this.asyncPhpFormatter!=null)try{let l=await this.asyncPhpFormatter(r.content);return`${r.rawStart} ${l} ${r.rawEnd}`}catch{}let n=this.doc;e.childDocument!=null&&(n=e.childDocument.document);let s=null;if(Vt.isConditionalStructure(e)&&(s=r.runtimeName(),e.isClosingTag&&(s=="if"||s=="unless")))return`{{ /${s} }}`;if(e.isClosingTag)return r.runtimeName()=="endunless"?"{{ /unless }}":`{{ ${r.sourceContent.trim()} }}`;let o=oa.prettyPrintNode(r,n,0,this.options,s,null),a=["switch","list"];return i!=null&&o.includes(`
`)&&(e.isVirtual&&(e.name?.name=="switch"||e.name?.name=="list")?o=Ln.shiftIndent(o,i+this.options.tabSize,!0):o=Ln.shiftIndent(o,i-this.options.tabSize*2,!0)),o}printNode(e,i=null){let r=e.getTrueNode();if((r.rawStart=="{{?"||r.rawStart=="{{$")&&this.phpFormatter!=null)try{let l=this.phpFormatter(r.content);return`${r.rawStart} ${l} ${r.rawEnd}`}catch{}let n=this.doc;e.childDocument!=null&&(n=e.childDocument.document);let s=null;if(Vt.isConditionalStructure(e)&&(s=r.runtimeName(),e.isClosingTag&&(s=="if"||s=="unless")))return`{{ /${s} }}`;if(e.isClosingTag)return r.runtimeName()=="endunless"?"{{ /unless }}":`{{ ${r.sourceContent.trim()} }}`;let o=oa.prettyPrintNode(r,n,0,this.options,s,null),a=["switch","list"];return i!=null&&o.includes(`
`)&&(e.isVirtual&&(e.name?.name=="switch"||e.name?.name=="list")?o=Ln.shiftIndent(o,i+this.options.tabSize,!0):o=Ln.shiftIndent(o,i-this.options.tabSize*2,!0)),o}async transformConditionsAsync(e){let i=e;for(let r=0;r<this.conditions.length;r++){let n=this.conditions[r];for(let s=0;s<n.structures.length;s++){let o=n.structures[s],a=o.branch.head;if(o.virtualBreakOpen.length>0&&this.removeLines.push(o.virtualBreakOpen),o.virtualBreakClose.length>0&&(i=i.replace(o.virtualBreakClose,o.virtualBreakClose+`
`),this.removeLines.push(o.virtualBreakClose)),this.virtualStructureOpens.push(o.virtualOpen),this.removeLines.push(o.virtualOpen),this.removeLines.push(o.virtualClose),o.isLast){let l=this.selfClosing(o.virtualSlug);if(!i.includes(l)){let u="<"+o.virtualSlug+"(\\s)+\\/>",c=new RegExp(u,"gm");i=i.replace(c,l)}i.includes(l)&&(i=i.replace(l,o.doc.trim())),i=i.replace(o.pairOpen,await this.printNodeAsync(a,this.indentLevel(o.pairOpen))),i=i.replace(o.pairClose,await this.printNodeAsync(a.isClosedBy))}else{let l=this.selfClosing(o.virtualSlug);if(!i.includes(l)){let u="<"+o.virtualSlug+"(\\s)+\\/>",c=new RegExp(u,"gm");i=i.replace(c,l)}i.includes(l)&&(i=i.replace(l,o.doc.trim())),this.removeLines.push(o.pairClose),i=i.replace(o.pairOpen,await this.printNodeAsync(a,this.indentLevel(o.pairOpen)))}}}return i}transformConditions(e){let i=e;return this.conditions.forEach(r=>{r.structures.forEach(n=>{let s=n.branch.head;if(n.virtualBreakOpen.length>0&&this.removeLines.push(n.virtualBreakOpen),n.virtualBreakClose.length>0&&(i=i.replace(n.virtualBreakClose,n.virtualBreakClose+`
`),this.removeLines.push(n.virtualBreakClose)),this.virtualStructureOpens.push(n.virtualOpen),this.removeLines.push(n.virtualOpen),this.removeLines.push(n.virtualClose),n.isLast){let o=this.selfClosing(n.virtualSlug);if(!i.includes(o)){let a="<"+n.virtualSlug+"(\\s)+\\/>",l=new RegExp(a,"gm");i=i.replace(l,o)}i.includes(o)&&(i=i.replace(o,n.doc.trim())),i=i.replace(n.pairOpen,this.printNode(s,this.indentLevel(n.pairOpen))),i=i.replace(n.pairClose,this.printNode(s.isClosedBy))}else{let o=this.selfClosing(n.virtualSlug);if(!i.includes(o)){let a="<"+n.virtualSlug+"(\\s)+\\/>",l=new RegExp(a,"gm");i=i.replace(l,o)}i.includes(o)&&(i=i.replace(o,n.doc.trim())),this.removeLines.push(n.pairClose),i=i.replace(n.pairOpen,this.printNode(s,this.indentLevel(n.pairOpen)))}})}),i}getAntlersChildDoc(e){return e.childDocument!=null?e.childDocument.document.transform().setParentTransformer(this).toStructure():this.clone().toStructure(e.getImmediateChildren())}prepareCondition(e){let i=e.logicBranches[0].head;if(i.fragmentPosition==2||i.fragmentPosition==1){let l=this.makeSlug(e.nodeContent.length);return this.registerInlineCondition(l,e),l}if(i.fragmentPosition==0)return this.prepareDynamicCondition(e);let r=[],n="";i.prev instanceof B&&i.prev.isInlineAntlers&&(n+=this.registerForcedBreak()),e.logicBranches.forEach((l,u)=>{let c=l.head,f=this.getAntlersChildDoc(l),d=this.makeSlug(c.sourceContent.length),h=this.makeSlug(10),p={branch:l,slug:d,doc:f,pairOpen:this.open(d),pairClose:this.close(d),virtualOpen:this.open(h),virtualClose:this.close(h),virtualSlug:h,isFirst:u==0,isLast:u==e.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(l.head?.name?.getCompoundTagName()=="else"){n+=`
`+p.pairOpen;let y=this.makeSlug(25);this.createExraStructuralPairs&&l.head.containsChildStructures==!1&&l.head.containsAnyFragments==!1?(p.virtualBreakOpen=this.open(y),p.virtualBreakClose=this.close(y),p.virtualSlug=y,n+=`
`+this.selfClosing(y),n+=p.pairClose+`
`):(p.virtualBreakOpen=this.selfClosing(y),n+=p.virtualBreakOpen+`
`,n+=f,n+=`
`+p.pairClose)}else if(this.createExraStructuralPairs&&l.head?.containsAnyFragments==!1&&l.head?.containsChildStructures==!1){let y=this.makeSlug(25);p.virtualBreakOpen=this.open(y),p.virtualBreakClose=this.close(y),p.virtualSlug=y,n+=`
`+p.pairOpen,n+=`
`+this.selfClosing(y),n+=p.pairClose+`
`}else n+=p.pairOpen,n+=`
`,n+=f,n+=`
`,n+=p.pairClose;r.push(p)});let s=r[0].pairOpen,o=r[r.length-1].pairClose,a={pairOpen:s,pairClose:o,structures:r,condition:e};return this.registerCondition(a),n}registerPairedAntlers(e,i){this.parentTransformer!=null?this.parentTransformer.registerPairedAntlers(e,i):this.tagPairs.set(e,i)}preparePairedAntlers(e){let i=this.makeSlug(e.getOriginalContent().length),r=this.getAntlersChildDoc(e);if(e.fragmentPosition!=0){let n="",s="";if(e.prev instanceof B&&e.prev.isPaired()==!1&&(s+=this.registerForcedBreak()),s+=`${this.open(i)}
`,e.containsChildStructures==!1&&e.containsAnyFragments==!1){let o=!1,a=!0,l=!0,u=0;for(let f=0;f<e.children.length;f++){let d=e.children[f];if(d instanceof Le&&d.sourceContent.trim().length>0){o=!0,a=!1;break}}e.children.length==2&&e.children[0]instanceof B&&(o=!0);let c=0;for(let f=0;f<e.children.length-1;f++){let d=e.children[f];d instanceof B&&(u+=1,d.isInlineAntlers?c+=1:l=!1)}c==0&&(o=!0),l==!1&&(o=!1),a==!1&&u==0&&(o=!1),o?(n=this.makeSlug(15),s+=this.pair(n,r)):s+=r}else s+=r;return s+=`
${this.close(i)}
`,this.virtualStructureOpens.push(this.open(n)),this.virtualStructureClose.push(this.close(n)),this.virtualStructureClose.push(this.close(i)),this.registerPairedAntlers(i,{innerDoc:r,slug:i,tag:e,virtualElementSlug:n,isInline:!1}),s}return this.prepareConditionalAntlersPair(e)}registerInlineAntlers(e){if((e.fragmentPosition==2||e.fragmentPosition==1)&&(e.isInlineAntlers=!0),this.parentTransformer!=null)return this.parentTransformer.registerInlineAntlers(e);{let i=this.makeSlug(e.getOriginalContent().length);return e.isInlineAntlers?(this.spanNodes.set(i,e),i):(this.inlineNodes.set(i,e),this.selfClosing(i))}}registerVirtualComment(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(e):this.blockComments.push(e)}registerComment(e,i){this.parentTransformer!=null?this.parentTransformer.registerComment(e,i):this.inlineComments.set(e,i)}prepareComment(e){let i=e.getContent();if(i.trim().includes(`
`)){let s=this.makeSlug(10),o=this.makeSlug(10),a={node:e,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(o)};return this.registerVirtualComment(a),a.pairOpen+`
`+a.virtualElement+`
`+a.pairClose}let n=this.makeSlug(i.length);return this.registerComment(n,e),this.selfClosing(n)}registerDynamicAntlersPair(e,i){this.parentTransformer!=null?(this.dynamicElementPairedAntlers.set(i.nodeContent,e),this.parentTransformer.registerDynamicAntlersPair(e,i)):(this.dynamicElementPairedAntlers.set(i.nodeContent,e),this.dynamicElementPairedAntlersNodes.set(e,i))}prepareConditionalAntlersPair(e){if(this.dynamicElementPairedAntlers.has(e.nodeContent))return this.dynamicElementPairedAntlers.get(e.nodeContent);let i=this.makeSlug(e.nodeContent.length);return this.registerDynamicAntlersPair(i,e),i}registerDynamicCondition(e,i){this.parentTransformer!=null?(this.dynamicElementConditionAntlers.set(i.nodeContent,e),this.parentTransformer.registerDynamicCondition(e,i)):(this.dynamicElementConditionAntlers.set(i.nodeContent,e),this.dynamicElementConditionAntlersNodes.set(e,i))}prepareDynamicCondition(e){if(this.dynamicElementConditionAntlers.has(e.nodeContent))return this.dynamicElementConditionAntlers.get(e.nodeContent);let i=this.makeSlug(e.nodeContent.length);return this.registerDynamicCondition(i,e),i}registerDynamicAntlers(e,i){this.parentTransformer!=null?(this.dynamicElementAntlers.set(i.content,e),this.parentTransformer.registerDynamicAntlers(e,i)):(this.dynamicElementAntlers.set(i.content,e),this.dynamicElementAntlersNodes.set(e,i))}prepareConditionalAntlers(e){if(this.dynamicElementAntlers.has(e.content))return this.dynamicElementAntlers.get(e.content);let i=this.makeSlug(e.content.length);return this.registerDynamicAntlers(i,e),i}prepareAntlers(e){return e.isClosedBy!=null?this.preparePairedAntlers(e):e.fragmentPosition==0?this.prepareConditionalAntlers(e):this.registerInlineAntlers(e)}async transformDynamicAntlersAsync(e){let i=e;for(let[r,n]of this.dynamicElementAntlersNodes){let s=await this.printNodeAsync(n);i=mt(i,r,s)}return this.dynamicElementPairedAntlersNodes.forEach((r,n)=>{let s=r.nodeContent;i=mt(i,n,s)}),this.dynamicElementConditionAntlersNodes.forEach((r,n)=>{let s=r.nodeContent;i=mt(i,n,s)}),i}async transformPairedAntlersAsync(e){let i=e;for(let[r,n]of this.tagPairs){let s=n.tag;if(n.virtualElementSlug.length>0){let l=this.open(n.virtualElementSlug),u=this.close(n.virtualElementSlug);this.virtualStructureOpens.push(l),this.removeLines.push(l),this.removeLines.push(u)}let o=this.open(r),a=this.close(r);i=i.replace(o,await this.printNodeAsync(s,this.indentLevel(o))),i=i.replace(a,await this.printNodeAsync(s.isClosedBy))}return i}async transformInlineAntlersAsync(e){let i=e;for(let[r,n]of this.inlineNodes){let s=this.selfClosing(r),o=this.selfClosingNs(r),a=await this.printNodeAsync(n,this.indentLevel(s));i=i.replace(s,a),i=i.replace(o,a)}for(let[r,n]of this.spanNodes){let s=0;n.isVirtual&&(n.name?.name=="switch"||n.name?.name=="list")&&(s=this.indentLevel(r,!0));let o=await this.printNodeAsync(n,s),a=this.selfClosingNs(r);i=i.replace(r,o),i=i.replace(a,o)}return i}transformDynamicAntlers(e){let i=e;return this.dynamicElementAntlersNodes.forEach((r,n)=>{let s=this.printNode(r);i=mt(i,n,s)}),this.dynamicElementPairedAntlersNodes.forEach((r,n)=>{let s=r.nodeContent;i=mt(i,n,s)}),this.dynamicElementConditionAntlersNodes.forEach((r,n)=>{let s=r.nodeContent;i=mt(i,n,s)}),i}transformPairedAntlers(e){let i=e;return this.tagPairs.forEach((r,n)=>{let s=r.tag;if(r.virtualElementSlug.length>0){let l=this.open(r.virtualElementSlug),u=this.close(r.virtualElementSlug);this.virtualStructureOpens.push(l),this.removeLines.push(l),this.removeLines.push(u)}let o=this.open(n),a=this.close(n);i=i.replace(o,this.printNode(s,this.indentLevel(o))),i=i.replace(a,this.printNode(s.isClosedBy))}),i}transformInlineAntlers(e){let i=e;return this.inlineNodes.forEach((r,n)=>{let s=this.selfClosing(n),o=this.selfClosingNs(n),a=this.printNode(r,this.indentLevel(s));i=i.replace(s,a),i=i.replace(o,a)}),this.spanNodes.forEach((r,n)=>{let s=0;r.isVirtual&&(r.name?.name=="switch"||r.name?.name=="list")&&(s=this.indentLevel(n,!0));let o=this.printNode(r,s),a=this.selfClosingNs(n);i=i.replace(n,o),i=i.replace(a,o)}),i}async transformCommentsAsync(e){let i=e;for(let[r,n]of this.inlineComments){let s=this.selfClosing(r),o=await sa.printCommentAsync(n,this.options.tabSize,0,this.asyncInlineFormatter);i=i.replace(s,o)}for(let r=0;r<this.blockComments.length;r++){let n=this.blockComments[r],s=n.node,o=await sa.printCommentAsync(s,this.options.tabSize,this.indentLevel(n.pairOpen),this.asyncInlineFormatter);i=i.replace(n.pairOpen,o),this.removeLines.push(n.pairClose),this.removeLines.push(n.virtualElement)}return i}transformComments(e){let i=e;return this.inlineComments.forEach((r,n)=>{let s=this.selfClosing(n),o=sa.printComment(r,this.options.tabSize,0,this.inlineFormatter);i=i.replace(s,o)}),this.blockComments.forEach(r=>{let n=r.node,s=sa.printComment(n,this.options.tabSize,this.indentLevel(r.pairOpen),this.inlineFormatter);i=i.replace(r.pairOpen,s),this.removeLines.push(r.pairClose),this.removeLines.push(r.virtualElement)}),i}clone(){let e=new jl(this.doc);return e.withOptions(this.options).setParentTransformer(this),e}toStructure(e=null){let i="";return e==null&&(e=this.doc.getDocumentParser().getRenderNodes()),e.forEach(r=>{if(this.isInsideIgnoreFormatter){if(this.ignoredLiteralBlocks.get(this.activeLiteralSlug)?.push(r),r instanceof B&&r.isComment&&r.content.trim().toLowerCase()==this.formatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}r instanceof Le?r.sourceContent==""?i+=r.content:i+=r.sourceContent:r instanceof Ve?i+=this.prepareCondition(r):r instanceof Qt?i+=this.prepareNoParse(r):r instanceof B&&(r.isComment?r.content.trim()==this.formatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.ignoredLiteralBlocks.set(this.activeLiteralSlug,[]),this.ignoredLiteralBlocks.get(this.activeLiteralSlug)?.push(r),i+=this.selfClosing(this.activeLiteralSlug)):i+=this.prepareComment(r):i+=this.prepareAntlers(r))}),i}indentLevel(e,i=!1){for(let r=0;r<this.structureLines.length;r++){let n=this.structureLines[r];if(n.includes(e)){let s=n.trimLeft(),o=n.length-s.length;return i&&(o+=n.indexOf(e)),o}}return 0}shouldCleanAfter(e){for(let i=0;i<this.removeLines.length;i++)if(e.startsWith(this.removeLines[i]))return!0;for(let i=0;i<this.forceCleanLines.length;i++)if(e.startsWith(this.forceCleanLines[i]))return!0;return!1}shouldCleanLine(e){for(let i=0;i<this.forceCleanLines.length;i++){let r=e.trim();if(e.startsWith(this.forceCleanLines[i])||r.startsWith("{{ /")&&r.endsWith("}}"))return!0}return!1}cleanVirtualStructures(e){let i=[],r=j.breakByNewLine(e),n=!1;for(let s=0;s<r.length;s++){let o=r[s].trim();if(n){if(o.length==0)continue;n=!1}else n=this.shouldCleanAfter(o);if(this.shouldCleanLine(o))for(let a=i.length-1;a>0&&i[a].trim().length==0;a--)i.pop();if(!this.removeLines.includes(o)){let a=r[s];this.removeLines.forEach(l=>{a.includes(l)&&(a=a.replace(l,""))}),i.push(a)}}return i.join(`
`)}applyFragmentReplacements(e,i,r){let n=e;return i.forEach((s,o)=>{let a=this.indentLevel(o),l=s.outerContent;if(a>0){let u=l.length-l.trimStart().length;(u==0||u>a)&&(l=Ln.shiftIndentLTrim(l,a).trimStart())}n=n.replace(o,l)}),n}reflowSlugs(e){let i=e;return this.slugs.forEach(r=>{let n=this.open(r),s=this.close(r),o=this.selfClosing(r),a="/<"+r+"(.*?)>/gms",l="/</"+r+"(.*?)>/gms",u="/<"+r+"(.*?)/>/gms";i=i.replace(a,n),i=i.replace(l,s),i=i.replace(u,o)}),i}cleanLines(e){let i=j.breakByNewLine(e),r=[],n=!1,s=0,o=!1,a=!1;for(let l=0;l<i.length;l++){let u=i[l].trim(),c=i[l];if(u.startsWith("{{")){u.endsWith("}}")?a=!1:a=!0,u.startsWith("{{#")&&(a=!1),n&&(s=0),u.startsWith("{{ /")==!1?o=!0:o=!1,n=!0,r.push(c);continue}if(!n)r.push(c);else{if(a){r.push(c),c.trim().endsWith("}}")&&(a=!1);continue}if(u.length==0){if(o==!1){s=0,n=!1;continue}s+=1;continue}else o&&s>1&&r.push(""),s=0,r.push(c),n=!1}}return r.join(`
`)}async fromStructureAsync(e){let i=this.reflowSlugs(e);this.structureLines=j.breakByNewLine(i);let r=this.transformInlineConditions(i);if(r=await this.transformConditionsAsync(r),r=await this.transformInlineAntlersAsync(r),r=await this.transformCommentsAsync(r),r=this.transformVirtualStructures(r),r=await this.transformDynamicAntlersAsync(r),r=await this.transformPairedAntlersAsync(r),r=this.cleanVirtualStructures(r),r=this.cleanLines(r),this.doc.hasFrontMatter()){let n=this.doc.getFrontMatter(),s=this.doc.getFrontMatterDoc();s!=null&&s.isValid&&this.yamlFormatter!=null&&(n=this.yamlFormatter(n)),r=`---
${n}
---
`+`
`.repeat(this.options.newlinesAfterFrontMatter)+r.trimLeft()}return r=r.trimRight(),this.ignoredLiteralBlocks.forEach((n,s)=>{let o=this.selfClosing(s),a=this.indentLevel(o);r=r.replace(o,this.dumpPreservedNodes(n,a))}),this.options.endNewline&&(r+=`
`),r}fromStructure(e){let i=this.reflowSlugs(e);this.structureLines=j.breakByNewLine(i);let r=this.transformInlineConditions(i);if(r=this.transformConditions(r),r=this.transformInlineAntlers(r),r=this.transformComments(r),r=this.transformVirtualStructures(r),r=this.transformDynamicAntlers(r),r=this.transformPairedAntlers(r),r=this.cleanVirtualStructures(r),r=this.cleanLines(r),this.doc.hasFrontMatter()){let n=this.doc.getFrontMatter(),s=this.doc.getFrontMatterDoc();s!=null&&s.isValid&&this.yamlFormatter!=null&&(n=this.yamlFormatter(n)),r=`---
${n}
---
`+`
`.repeat(this.options.newlinesAfterFrontMatter)+r.trimLeft()}return r=r.trimRight(),this.ignoredLiteralBlocks.forEach((n,s)=>{let o=this.selfClosing(s),a=this.indentLevel(o);r=r.replace(o,this.dumpPreservedNodes(n,a))}),this.options.endNewline&&(r+=`
`),r}dumpPreservedNodes(e,i){let r="";return e.forEach(n=>{if(n instanceof Le)r+=n.sourceContent;else if(n instanceof Ve)r+=n.nodeContent;else if(n instanceof Qt)r+=n.documentText;else if(n instanceof B){if(n.isComment){if(n.content.trim().toLowerCase()==this.formatIgnoreEnd){let s=r.split(`
`);s.length>0&&s[s.length-1].trim().length==0&&(s.pop(),s.push(""),r=s.join(`
`)),r+=" ".repeat(i)+"{{#"+n.content+"#}}"}else r+="{{#"+n.content+"#}}";return}n.isPaired()?r+=n.nodeContent:r+="{{"+n.content+"}}"}}),r}};var NP=Y(yn(),1);var Qp=class{constructor(){this.content="";this.ranges=[];this.lastDocumentOffsetKey=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.keys=[];this.values=[];this.isValid=!1;this.parseError=null}loadString(e){this.content=j.normalizeLineEndings(e);let i=null;try{i=NP.default.parseDocument(this.content),this.isValid=!0}catch(c){this.isValid=!1,this.parseError=c}if(i==null)return;let r=[...this.content.matchAll(/(\n)/gm)],n=r.length,s=2,o=null,a=0,l=0;for(let c=0;c<n;c++){let f=r[c],d=f.index??0,h=d;o!=null?h=d-o:h=h+1,this.documentOffsets.set(d,{char:h,line:s});let p=0,y=0;c==0?(y=h-1,p=0):(p=l+1,y=d),this.lineIndex.set(s,{char:h,line:s,startIndex:p,endIndex:y}),this.lastDocumentOffsetKey=d,s+=1,o=d,l=y,a=p}let u=i.contents;this.processMap(u)}processMap(e){typeof e.items>"u"||e.items.forEach(i=>{this.processItem(i)})}processItem(e){if(e.type=="PAIR"){if(e.value instanceof Xu||e.value instanceof Ul){let s=e.key;if(s.range!=null){let o=this.positionFromOffset(s.range[0],s.range[0]),a=this.positionFromOffset(s.range[1],s.range[1]);this.ranges.push({start:o,end:a,length:a.char-o.char+1,content:"property"}),this.keys.push({start:o,end:a,length:a.char-o.char+1,content:s.value}),e.value instanceof Ul?this.processMap(e.value.items[0]):this.processMap(e.value);return}}let i=e,r=i.key,n=i.value;if(r.range!=null&&n.range!=null){let s=this.positionFromOffset(r.range[0],r.range[0]),o=this.positionFromOffset(r.range[1],r.range[1]),a=this.positionFromOffset(n.range[0],n.range[0]),l=this.positionFromOffset(n.range[1],n.range[1]),u="string";parseInt(n.value)==n.value&&(u="number"),this.ranges.push({start:s,end:o,length:o.char-s.char+1,content:"property"}),this.keys.push({start:s,end:o,length:o.char-s.char+1,content:r.value}),this.ranges.push({start:a,end:l,length:l.char-a.char+1,content:u}),this.values.push({start:a,end:l,length:l.char-a.char+1,content:n.value})}}}positionFromOffset(e,i,r=!1){let n=0,s=0;if(this.documentOffsets.has(e)){let a=this.documentOffsets.get(e);n=a.line,s=a.char}else if(this.documentOffsets.size==0)n=1,s=e+1;else{let a=null,l=null,u=null,c=null;for(let f of this.documentOffsets.keys()){if(f>=e){c!=null&&e>c?(a=u,l=c):(a=this.documentOffsets.get(f),l=f);break}u=this.documentOffsets.get(f),c=f}if(a==null&&(a=u,l=c),a!=null)if(r){let f=this.content.split(""),d=e-(l??0),h=a.char-(l??0)+e;s=d,n=a.line,e<=(l??0)?(n=a.line,s=e+1):n=a.line+1}else{let f=this.content.split(""),d=e-(l??0),h=a.char-(l??0)+e;s=d,n=a.line,e<=(l??0)?(n=a.line,s=e+1):n=a.line+1}else this.lastDocumentOffsetKey!=null&&(n=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let o=new Bt;return o.index=i,o.offset=e,o.line=n,o.char=s,o}getRanges(){return this.ranges}getKeys(){return this.keys}getValues(){return this.values}};var ut=class{constructor(){this.documentParser=new x;this.transformer=null;this.originalText="";this.ranges=new $p(this);this.nodes=new Kp(this);this.cursor=new Ep(this);this.errors=new Cp(this);this.project=null;this.documentUri=""}static fromText(e,i){let r=new ut;return typeof i<"u"&&(r.project=i),r.loadString(e)}static childFromText(e,i=null){let r=new ut;return i!=null&&r.getDocumentParser().setSeedPosition(i),r.getDocumentParser().withChildDocuments(!0),r.loadString(e),{renderNodes:r.getDocumentParser().getRenderNodes(),content:e,document:r}}isValid(){return!(this.hasInvalidControlFlowStructures()||this.hasUnclosedStructures())}getDocumentOptions(){let e=this.getAllNodes();if(e.length==0||!(e[0]instanceof B))return null;let i=e[0];return i.isComment==!1?null:Ru(this.documentUri,i)}isFormattingEnabled(){let e=this.getDocumentOptions();return e==null?!0:e.formatterEnabled}hasInvalidControlFlowStructures(){return this.documentParser.hasUnclosedIfStructures()}hasUnclosedStructures(){return this.documentParser.hasUnclosedStructures()}getFrontMatterDoc(){if(this.hasFrontMatter()){let e=new Qp;return e.loadString(this.getFrontMatter()),e}return null}hasFrontMatter(){return this.documentParser.getFrontMatter().trim().length>0}getFrontMatter(){return this.documentParser.getFrontMatter()}getFrontMatterScope(){if(this.project==null)return null;let e=new Yp(this.project);return e.parse(this.getFrontMatter()),e.getScope()}updateProject(e){this.project=e,this.updateProjectDetails()}updateProjectDetails(){try{if(this.project!=null){let e=new mp(this.project,this.documentUri,this),i=this.documentParser.antlersNodes();i.forEach(r=>{if(this.project!=null&&Ne.instance?.canResolveSpecialTypes(r.getTagName())){let n=Ne.instance?.resolveSpecialType(r.getTagName(),r,this.project);n.context!=null&&(r.reference=n.context)}}),e.analyzeScope(i);for(let r=0;r<i.length;r++){let n=i[r];if(n.hasParameters)for(let s=0;s<n.parameters.length;s++){let o=n.parameters[s];if(o.hasInterpolations())for(let a=0;a<o.interpolations.length;a++){let l=o.interpolations[a];n.processedInterpolationRegions.has(l)&&n.processedInterpolationRegions.get(l).forEach(c=>{c instanceof B&&(c.currentScope=n.currentScope)})}}}wv(this)}}catch(e){console.log(e)}}loadString(e){return this.originalText=e,this.documentParser.parse(e),this.updateProjectDetails(),this}getDocumentParser(){return this.documentParser}getParsedContent(){return this.documentParser.getParsedContent()}getAllNodes(){return this.documentParser.getNodes()}getAllAntlersNodes(){return this.documentParser.antlersNodes()}extractText(){let e=[];return this.nodes.getAllLiteralNodes().forEach(i=>{e.push(i.content)}),e.join("")}getNameAt(e){let i=this.nodes.getNodeAt(e);return i instanceof B?i.name:null}getLinesAround(e){return this.documentParser.getLinesAround(e)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}reloadDocument(){this.loadString(this.originalText)}getFeaturesAt(e){let i=this.nodes.getNodeAt(e);return Fn.resolveContext(e,i,this,!1,i)}getText(e,i){return this.documentParser.getText(e,i)}charLeftAt(e){return this.documentParser.charLeftAt(e)}charAt(e){return this.documentParser.charAt(e)}charRightAt(e){return this.documentParser.charRightAt(e)}getLineIndex(e){return this.documentParser.getLineIndex(e)}getLineText(e){return this.documentParser.getLineText(e)}wordAt(e,i=4){return this.documentParser.wordAt(e,i)}wordLeftAt(e,i=4){return this.documentParser.wordLeftAt(e,i)}wordRightAt(e,i=4){return this.documentParser.wordRightAt(e,i)}punctuationLeftAt(e,i=4){return this.documentParser.punctuationLeftAt(e,i)}punctuationRightAt(e,i=4){return this.documentParser.punctuationRightAt(e,i)}getLineChars(e){let i=this.getLineText(e);return i!=null?i.split(""):null}transform(){return this.transformer==null&&(this.transformer=new jl(this)),this.transformer}};var oo=class{constructor(){this.loadedDocuments=new Map;this.activeProject=null}getDocuments(){let e=[];return this.loadedDocuments.forEach(i=>{e.push(i)}),e}setProject(e){this.activeProject=e,this.loadedDocuments.forEach(i=>{this.activeProject!=null&&i.updateProject(this.activeProject)})}refreshDocumentState(){this.activeProject!=null&&this.setProject(this.activeProject)}hasDocument(e){return this.loadedDocuments.has(e)}createDocument(e){if(!this.loadedDocuments.has(e)){let i=new ut;i.documentUri=e,this.loadedDocuments.set(e,i)}}loadDocument(e,i){this.loadedDocuments.set(e,ut.fromText(i))}getDocument(e){return this.loadedDocuments.get(e)}updateDocument(e,i){if(this.loadedDocuments.has(e)){let r=this.loadedDocuments.get(e);r.loadString(i);let n=ee.instance?.getStructure()?.findView(e);n!=null&&(n.document=r)}}createOrUpdate(e,i){this.createDocument(e),this.updateDocument(e,i)}getDocumentErrors(e){return this.loadedDocuments.has(e)?this.loadedDocuments.get(e).errors.all():[]}};oo.instance=null;(typeof oo.instance>"u"||oo.instance==null)&&(oo.instance=new oo);var SP=oo;var Tn=new Map,_e=new SP;function PP(t,e){let i=[];return t.processedInterpolationRegions.size>0&&t.processedInterpolationRegions.forEach((r,n)=>{for(let s=0;s<r.length;s++){let o=r[s];if(o instanceof B&&e.isWithin(o.startPosition,o.endPosition)){o.currentScope==null&&(t.parent?.currentScope!=null?o.currentScope=t.parent.currentScope:o.currentScope=t.currentScope),i.push(o),o.processedInterpolationRegions.size>0&&(i=i.concat(PP(o,e)));break}}}),i}function Xi(t,e,i=!0){if(!_e.hasDocument(e)||ee.instance==null||ee.instance.hasStructure()==!1)return null;let r=_e.getDocument(e),n=t.line+1,s=t.character+1,o=r.cursor.getFeaturesAt(n,s),a=r.cursor.position(n,s),l=ee.instance.getStructure(),u=r.cursor.getAncestorsAt(n,s);if(a!=null&&u.length>0){let d=u[u.length-1];PP(d,a).forEach(h=>{u.push(h)})}let c=o?.isCursorInIdentifier==!1;return c==!1&&(o?.leftChar??"")==" "&&(c=!0),{hasFrontMatter:r.hasFrontMatter(),antlersDocument:r,frontMatterEndsOn:r.getDocumentParser().getFrontMatterEndLine(),document:e,leftMeaningfulWord:o?.leftWord??null,leftChar:o?.leftChar??"",leftWord:o?.leftWord?.trim()??"",originalLeftWord:o?.leftWord??"",rightWord:o?.rightWord??"",rightChar:o?.rightChar??"",context:o,position:t,project:l,nodesInScope:u,isInDoubleBraces:o?.node?.rawStart=="{{",isInVariableInterpolation:o?.interpolatedContext??!1,interpolationStartsOn:null,currentNode:o?.node??null,isCaretInTag:o?.node!=null,isPastTagPart:c,showGeneralSnippets:i}}var Gl=Y($t(),1);var VH=`{{ collection:$1 $2 }}

{{ /collection:$1 }}`,AP=VH;var UH='&copy; {{ now format="Y"  }}',EP=UH;var jH=`{{ form:set in="$1" }}

{{ if {form:errors} }}
	{{ form:errors }}

	{{ /form:errors }}
{{ /if }}

{{ if {form:success} }}

{{ /if }}

{{ form:create }}
	$2
{{ /form:create }}

{{ /form:set }}`,CP=jH;var RP=`{{# Displays your site's current locale. #}}
<span>{{ site:short_locale }}</span>

{{# Displays all available locales. #}}
<ul>
    {{ locales all="true" self="false" }}
    <li>
        <a href="{{ permalink }}" aria-label="{{ locale:name }}">{{ locale:short }}</a>
    </li>    
    {{ /locales }}
</ul>`;var GH=`<ul>
{{ nav }}
	{{ if depth == 1 }}
		$1
		{{ if children }}
			<ul>{{ *recursive children* }}</ul>
		{{ /if }}
	{{ elseif depth == 2 }}
		
	{{ /if }}
{{ /nav }}
</ul>`,xP=GH;function Ju(t,e,i,r){return{label:t,detail:e,insertTextFormat:Gl.InsertTextFormat.Snippet,kind:Gl.CompletionItemKind.Snippet,textEdit:Gl.TextEdit.replace(r,i),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}}function HH(t){let e=[];if(t.showGeneralSnippets==!1)return e;let i={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position},r=Ji.instance?.getContent("collection"),n=Ji.instance?.getContent("formset"),s=Ji.instance?.getContent("nav_depth2"),o=Ji.instance?.getContent("copyright_year"),a=Ji.instance?.getContent("multisite_lang_generic");return r!=null&&e.push(Ju("coll","Statamic Collection",r,i)),n!=null&&e.push(Ju("formset","Statamic Form Set",n,i)),s!=null&&e.push(Ju("nav-depth2","Statamic Nav with Depth Two",s,i)),o!=null&&e.push(Ju("copyright_year","Copyright year using Antlers tags.",o,i)),a!=null&&e.push(Ju("multisite_locales","Displays the current locale, and a list of all available locales.",a,i)),e}var Ji=class{constructor(){this.registeredSnippets=new Map}loadCoreSnippets(){this.registeredSnippets.set("collection",AP),this.registeredSnippets.set("formset",CP),this.registeredSnippets.set("nav_depth2",xP),this.registeredSnippets.set("copyright_year",EP),this.registeredSnippets.set("multisite_lang_generic",RP)}getContent(e){return this.registeredSnippets.has(e)?this.registeredSnippets.get(e):""}getSnippets(e){let i=[];return e==null||(i=i.concat(HH(e))),i}};Ji.instance=null;(typeof Ji.instance>"u"||Ji.instance==null)&&(Ji.instance=new Ji,Ji.instance.loadCoreSnippets());var wP=Ji;var kP=new Map;function DP(t){if(ee.instance?.hasStructure()==!1)return[];_e.refreshDocumentState();let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)==!1)return[];let i=Xi(t.position,e,aa.showGeneralSnippetCompletions);if(i==null)return[];if(i.hasFrontMatter&&i.frontMatterEndsOn>-1&&i.position.line<i.frontMatterEndsOn)return[];let r=wP.instance?.getSnippets(i)??[],n=bd.getSuggestions(i);r.length>0&&(i.isInDoubleBraces==!1||i.nodesInScope.length==0)&&(n=n.concat(r));let s=[];return n.filter(o=>s.includes(o.label)?!1:(s.push(o.label),!0))}function FP(t){if(kP.has(t.data)){let e=kP.get(t.data);e!=null&&(t.detail=e.detail,t.documentation=e.docs)}return t}var Zu=Y(ag(),1);var W_=Y(ot(),1);function la(t){let e=[];return t.forEach(i=>{let r=null;i.lsRange!=null?r=i.lsRange:i.node!=null?r=ua(i.node):i.range!=null?r={start:ct(i.range.start),end:ct(i.range.end)}:r={start:{line:1,character:1},end:{line:1,character:1}};let n=1;i.level==1&&(n=2),e.push({severity:n,range:r,message:"["+i.errorCode+"] "+i.message,source:"antlers",code:i.errorCode})}),e}function ct(t){return t==null?{character:0,line:0}:{character:t.char,line:t.line-1}}function ua(t){if(t instanceof Ds){let e=ct(t.valuePosition?.end??t.blockPosition?.end??t.endPosition);return t.namePosition!=null&&t.namePosition.start!=null?{start:{line:t.namePosition.start.line-1,character:t.namePosition.start.char-1},end:{character:e.character-1,line:e.line}}:{start:ct(t.namePosition?.start??t.blockPosition?.start??t.startPosition),end:{character:e.character+1,line:e.line}}}else if(t instanceof Ve&&t.logicBranches.length>0){let e=t.logicBranches[0],i=t.logicBranches[t.logicBranches.length-1];if(e.head!=null&&i.head!=null&&i.head.isClosedBy!=null)return{start:ct(e.head.startPosition),end:ct(i.head.isClosedBy.endPosition)}}return{start:ct(t.startPosition),end:ct(t.endPosition)}}function LP(t){if(t.isClosedBy==null)return null;let e=-1,i=-1,r=-1,n=-1;return t.startPosition!=null&&(e=t.startPosition.line-1,i=t.startPosition.char),t.isClosedBy.endPosition!=null?(r=t.isClosedBy.endPosition.char,n=t.isClosedBy.endPosition.line-1):t.isClosedBy.startPosition!=null&&(r=t.isClosedBy.startPosition.char,n=t.isClosedBy.startPosition.line-1),e==-1||n==-1||i==-1||r==-1?null:{kind:W_.FoldingRangeKind.Region,startLine:e,endLine:n,startCharacter:i,endCharacter:r}}function Y_(t){let e=-1,i=-1,r=-1,n=-1;return t.startPosition!=null&&(e=t.startPosition.line-1,i=t.startPosition.char),t.endPosition!=null&&(r=t.endPosition.char,n=t.endPosition.line-1),e==-1||i==-1||r==-1||n==-1?null:{kind:W_.FoldingRangeKind.Comment,startLine:e,endLine:n,startCharacter:i,endCharacter:r}}function OP(t){let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)){let i=_e.getDocument(e),r=i.ranges.getAllPairedNodes(),n=i.nodes.getMultiLineComments(),s=i.nodes.getMultilineNodes(),o=[];if(i.hasFrontMatter()){let a=i.getDocumentParser().getFrontMatterEndLine();o.push({startLine:0,endLine:a-1,kind:Zu.FoldingRangeKind.Imports})}return r.length>0&&r.forEach(a=>{if(a.startPosition?.line==a.isClosedBy?.startPosition?.line)return;let l=LP(a);l!=null&&(l.kind=Zu.FoldingRangeKind.Region,o.push(l))}),n.length>0&&n.forEach(a=>{let l=Y_(a);l!=null&&(l.kind=Zu.FoldingRangeKind.Comment,o.push(l))}),s.length>0&&s.forEach(a=>{if(a.isClosedBy!=null)return;let l=Y_(a);l!=null&&(l.kind=Zu.FoldingRangeKind.Region,o.push(l))}),o}return[]}function JP(t){return typeof t>"u"||t===null}function WH(t){return typeof t=="object"&&t!==null}function YH(t){return Array.isArray(t)?t:JP(t)?[]:[t]}function KH(t,e){var i,r,n,s;if(e)for(s=Object.keys(e),i=0,r=s.length;i<r;i+=1)n=s[i],t[n]=e[n];return t}function $H(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function zH(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var QH=JP,XH=WH,JH=YH,ZH=$H,eW=zH,tW=KH,Xt={isNothing:QH,isObject:XH,toArray:JH,repeat:ZH,isNegativeZero:eW,extend:tW};function ZP(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function tc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ZP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}tc.prototype=Object.create(Error.prototype);tc.prototype.constructor=tc;tc.prototype.toString=function(e){return this.name+": "+ZP(this,e)};var qi=tc;function K_(t,e,i,r,n){var s="",o="",a=Math.floor(n/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),i-r>a&&(o=" ...",i=r+a-o.length),{str:s+t.slice(e,i).replace(/\t/g,"\u2192")+o,pos:r-e+s.length}}function $_(t,e){return Xt.repeat(" ",e-t.length)+t}function iW(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],n=[],s,o=-1;s=i.exec(t.buffer);)n.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,u,c=Math.min(t.line+e.linesAfter,n.length).toString().length,f=e.maxLength-(e.indent+c+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=K_(t.buffer,r[o-l],n[o-l],t.position-(r[o]-r[o-l]),f),a=Xt.repeat(" ",e.indent)+$_((t.line-l+1).toString(),c)+" | "+u.str+`
`+a;for(u=K_(t.buffer,r[o],n[o],t.position,f),a+=Xt.repeat(" ",e.indent)+$_((t.line+1).toString(),c)+" | "+u.str+`
`,a+=Xt.repeat("-",e.indent+c+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)u=K_(t.buffer,r[o+l],n[o+l],t.position-(r[o]-r[o+l]),f),a+=Xt.repeat(" ",e.indent)+$_((t.line+l+1).toString(),c)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var rW=iW,nW=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sW=["scalar","sequence","mapping"];function oW(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function aW(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(nW.indexOf(i)===-1)throw new qi('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=oW(e.styleAliases||null),sW.indexOf(this.kind)===-1)throw new qi('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ni=aW;function MP(t,e){var i=[];return t[e].forEach(function(r){var n=i.length;i.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(n=o)}),i[n]=r}),i}function lW(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function Q_(t){return this.extend(t)}Q_.prototype.extend=function(e){var i=[],r=[];if(e instanceof Ni)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new qi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(s){if(!(s instanceof Ni))throw new qi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new qi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new qi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Ni))throw new qi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Q_.prototype);return n.implicit=(this.implicit||[]).concat(i),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=MP(n,"implicit"),n.compiledExplicit=MP(n,"explicit"),n.compiledTypeMap=lW(n.compiledImplicit,n.compiledExplicit),n};var uW=Q_,cW=new Ni("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),fW=new Ni("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),dW=new Ni("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),pW=new uW({explicit:[cW,fW,dW]});function hW(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function mW(){return null}function gW(t){return t===null}var _W=new Ni("tag:yaml.org,2002:null",{kind:"scalar",resolve:hW,construct:mW,predicate:gW,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function yW(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function TW(t){return t==="true"||t==="True"||t==="TRUE"}function bW(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var IW=new Ni("tag:yaml.org,2002:bool",{kind:"scalar",resolve:yW,construct:TW,predicate:bW,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function vW(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function NW(t){return 48<=t&&t<=55}function SW(t){return 48<=t&&t<=57}function PW(t){if(t===null)return!1;var e=t.length,i=0,r=!1,n;if(!e)return!1;if(n=t[i],(n==="-"||n==="+")&&(n=t[++i]),n==="0"){if(i+1===e)return!0;if(n=t[++i],n==="b"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(!vW(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(!NW(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<e;i++)if(n=t[i],n!=="_"){if(!SW(t.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function AW(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function EW(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Xt.isNegativeZero(t)}var CW=new Ni("tag:yaml.org,2002:int",{kind:"scalar",resolve:PW,construct:AW,predicate:EW,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),RW=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function xW(t){return!(t===null||!RW.test(t)||t[t.length-1]==="_")}function wW(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var kW=/^[-+]?[0-9]+e/;function DW(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xt.isNegativeZero(t))return"-0.0";return i=t.toString(10),kW.test(i)?i.replace("e",".e"):i}function FW(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Xt.isNegativeZero(t))}var LW=new Ni("tag:yaml.org,2002:float",{kind:"scalar",resolve:xW,construct:wW,predicate:FW,represent:DW,defaultStyle:"lowercase"}),OW=pW.extend({implicit:[_W,IW,CW,LW]}),MW=OW,eA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),tA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function qW(t){return t===null?!1:eA.exec(t)!==null||tA.exec(t)!==null}function BW(t){var e,i,r,n,s,o,a,l=0,u=null,c,f,d;if(e=eA.exec(t),e===null&&(e=tA.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(i,r,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],f=+(e[11]||0),u=(c*60+f)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(i,r,n,s,o,a,l)),u&&d.setTime(d.getTime()-u),d}function VW(t){return t.toISOString()}var UW=new Ni("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:qW,construct:BW,instanceOf:Date,represent:VW});function jW(t){return t==="<<"||t===null}var GW=new Ni("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jW}),ty=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function HW(t){if(t===null)return!1;var e,i,r=0,n=t.length,s=ty;for(i=0;i<n;i++)if(e=s.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function WW(t){var e,i,r=t.replace(/[\r\n=]/g,""),n=r.length,s=ty,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return i=n%4*6,i===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):i===18?(a.push(o>>10&255),a.push(o>>2&255)):i===12&&a.push(o>>4&255),new Uint8Array(a)}function YW(t){var e="",i=0,r,n,s=t.length,o=ty;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]),i=(i<<8)+t[r];return n=s%3,n===0?(e+=o[i>>18&63],e+=o[i>>12&63],e+=o[i>>6&63],e+=o[i&63]):n===2?(e+=o[i>>10&63],e+=o[i>>4&63],e+=o[i<<2&63],e+=o[64]):n===1&&(e+=o[i>>2&63],e+=o[i<<4&63],e+=o[64],e+=o[64]),e}function KW(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var $W=new Ni("tag:yaml.org,2002:binary",{kind:"scalar",resolve:HW,construct:WW,predicate:KW,represent:YW}),zW=Object.prototype.hasOwnProperty,QW=Object.prototype.toString;function XW(t){if(t===null)return!0;var e=[],i,r,n,s,o,a=t;for(i=0,r=a.length;i<r;i+=1){if(n=a[i],o=!1,QW.call(n)!=="[object Object]")return!1;for(s in n)if(zW.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function JW(t){return t!==null?t:[]}var ZW=new Ni("tag:yaml.org,2002:omap",{kind:"sequence",resolve:XW,construct:JW}),eY=Object.prototype.toString;function tY(t){if(t===null)return!0;var e,i,r,n,s,o=t;for(s=new Array(o.length),e=0,i=o.length;e<i;e+=1){if(r=o[e],eY.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;s[e]=[n[0],r[n[0]]]}return!0}function iY(t){if(t===null)return[];var e,i,r,n,s,o=t;for(s=new Array(o.length),e=0,i=o.length;e<i;e+=1)r=o[e],n=Object.keys(r),s[e]=[n[0],r[n[0]]];return s}var rY=new Ni("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:tY,construct:iY}),nY=Object.prototype.hasOwnProperty;function sY(t){if(t===null)return!0;var e,i=t;for(e in i)if(nY.call(i,e)&&i[e]!==null)return!1;return!0}function oY(t){return t!==null?t:{}}var aY=new Ni("tag:yaml.org,2002:set",{kind:"mapping",resolve:sY,construct:oY}),iA=MW.extend({implicit:[UW,GW],explicit:[$W,ZW,rY,aY]}),lo=Object.prototype.hasOwnProperty,Xp=1,rA=2,nA=3,Jp=4,z_=1,lY=2,qP=3,uY=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cY=/[\x85\u2028\u2029]/,fY=/[,\[\]\{\}]/,sA=/^(?:!|!!|![a-z\-]+!)$/i,oA=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function BP(t){return Object.prototype.toString.call(t)}function On(t){return t===10||t===13}function fa(t){return t===9||t===32}function Zi(t){return t===9||t===32||t===10||t===13}function Wl(t){return t===44||t===91||t===93||t===123||t===125}function dY(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function pY(t){return t===120?2:t===117?4:t===85?8:0}function hY(t){return 48<=t&&t<=57?t-48:-1}function VP(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function mY(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var aA=new Array(256),lA=new Array(256);for(ca=0;ca<256;ca++)aA[ca]=VP(ca)?1:0,lA[ca]=VP(ca);var ca;function gY(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||iA,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function uA(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=rW(i),new qi(e,i)}function le(t,e){throw uA(t,e)}function Zp(t,e){t.onWarning&&t.onWarning.call(null,uA(t,e))}var UP={YAML:function(e,i,r){var n,s,o;e.version!==null&&le(e,"duplication of %YAML directive"),r.length!==1&&le(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&le(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&le(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Zp(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var n,s;r.length!==2&&le(e,"TAG directive accepts exactly two arguments"),n=r[0],s=r[1],sA.test(n)||le(e,"ill-formed tag handle (first argument) of the TAG directive"),lo.call(e.tagMap,n)&&le(e,'there is a previously declared suffix for "'+n+'" tag handle'),oA.test(s)||le(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{le(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function ao(t,e,i,r){var n,s,o,a;if(e<i){if(a=t.input.slice(e,i),r)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||le(t,"expected valid JSON character");else uY.test(a)&&le(t,"the stream contains non-printable characters");t.result+=a}}function jP(t,e,i,r){var n,s,o,a;for(Xt.isObject(i)||le(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(i),o=0,a=n.length;o<a;o+=1)s=n[o],lo.call(e,s)||(e[s]=i[s],r[s]=!0)}function Yl(t,e,i,r,n,s,o,a,l){var u,c;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),u=0,c=n.length;u<c;u+=1)Array.isArray(n[u])&&le(t,"nested arrays are not supported inside keys"),typeof n=="object"&&BP(n[u])==="[object Object]"&&(n[u]="[object Object]");if(typeof n=="object"&&BP(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)jP(t,e,s[u],i);else jP(t,e,s,i);else!t.json&&!lo.call(i,n)&&lo.call(e,n)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,le(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete i[n];return e}function iy(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):le(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Yt(t,e,i){for(var r=0,n=t.input.charCodeAt(t.position);n!==0;){for(;fa(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(On(n))for(iy(t),n=t.input.charCodeAt(t.position),r++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&Zp(t,"deficient indentation"),r}function ih(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Zi(i)))}function ry(t,e){e===1?t.result+=" ":e>1&&(t.result+=Xt.repeat(`
`,e-1))}function _Y(t,e,i){var r,n,s,o,a,l,u,c,f=t.kind,d=t.result,h;if(h=t.input.charCodeAt(t.position),Zi(h)||Wl(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(n=t.input.charCodeAt(t.position+1),Zi(n)||i&&Wl(n)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;h!==0;){if(h===58){if(n=t.input.charCodeAt(t.position+1),Zi(n)||i&&Wl(n))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Zi(r))break}else{if(t.position===t.lineStart&&ih(t)||i&&Wl(h))break;if(On(h))if(l=t.line,u=t.lineStart,c=t.lineIndent,Yt(t,!1,-1),t.lineIndent>=e){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=u,t.lineIndent=c;break}}a&&(ao(t,s,o,!1),ry(t,t.line-l),s=o=t.position,a=!1),fa(h)||(o=t.position+1),h=t.input.charCodeAt(++t.position)}return ao(t,s,o,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function yY(t,e){var i,r,n;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(ao(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,n=t.position;else return!0;else On(i)?(ao(t,r,n,!0),ry(t,Yt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ih(t)?le(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);le(t,"unexpected end of the stream within a single quoted scalar")}function TY(t,e){var i,r,n,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return ao(t,i,t.position,!0),t.position++,!0;if(a===92){if(ao(t,i,t.position,!0),a=t.input.charCodeAt(++t.position),On(a))Yt(t,!1,e);else if(a<256&&aA[a])t.result+=lA[a],t.position++;else if((o=pY(a))>0){for(n=o,s=0;n>0;n--)a=t.input.charCodeAt(++t.position),(o=dY(a))>=0?s=(s<<4)+o:le(t,"expected hexadecimal character");t.result+=mY(s),t.position++}else le(t,"unknown escape sequence");i=r=t.position}else On(a)?(ao(t,i,r,!0),ry(t,Yt(t,!1,e)),i=r=t.position):t.position===t.lineStart&&ih(t)?le(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}le(t,"unexpected end of the stream within a double quoted scalar")}function bY(t,e){var i=!0,r,n,s,o=t.tag,a,l=t.anchor,u,c,f,d,h,p=Object.create(null),y,v,b,I;if(I=t.input.charCodeAt(t.position),I===91)c=93,h=!1,a=[];else if(I===123)c=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),I=t.input.charCodeAt(++t.position);I!==0;){if(Yt(t,!0,e),I=t.input.charCodeAt(t.position),I===c)return t.position++,t.tag=o,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=a,!0;i?I===44&&le(t,"expected the node content, but found ','"):le(t,"missed comma between flow collection entries"),v=y=b=null,f=d=!1,I===63&&(u=t.input.charCodeAt(t.position+1),Zi(u)&&(f=d=!0,t.position++,Yt(t,!0,e))),r=t.line,n=t.lineStart,s=t.position,Kl(t,e,Xp,!1,!0),v=t.tag,y=t.result,Yt(t,!0,e),I=t.input.charCodeAt(t.position),(d||t.line===r)&&I===58&&(f=!0,I=t.input.charCodeAt(++t.position),Yt(t,!0,e),Kl(t,e,Xp,!1,!0),b=t.result),h?Yl(t,a,p,v,y,b,r,n,s):f?a.push(Yl(t,null,p,v,y,b,r,n,s)):a.push(y),Yt(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(i=!0,I=t.input.charCodeAt(++t.position)):i=!1}le(t,"unexpected end of the stream within a flow collection")}function IY(t,e){var i,r,n=z_,s=!1,o=!1,a=e,l=0,u=!1,c,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)z_===n?n=f===43?qP:lY:le(t,"repeat of a chomping mode identifier");else if((c=hY(f))>=0)c===0?le(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?le(t,"repeat of an indentation width identifier"):(a=e+c-1,o=!0);else break;if(fa(f)){do f=t.input.charCodeAt(++t.position);while(fa(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!On(f)&&f!==0)}for(;f!==0;){for(iy(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),On(f)){l++;continue}if(t.lineIndent<a){n===qP?t.result+=Xt.repeat(`
`,s?1+l:l):n===z_&&s&&(t.result+=`
`);break}for(r?fa(f)?(u=!0,t.result+=Xt.repeat(`
`,s?1+l:l)):u?(u=!1,t.result+=Xt.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Xt.repeat(`
`,l):t.result+=Xt.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,i=t.position;!On(f)&&f!==0;)f=t.input.charCodeAt(++t.position);ao(t,i,t.position,!1)}return!0}function GP(t,e){var i,r=t.tag,n=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!Zi(o))));){if(a=!0,t.position++,Yt(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,Kl(t,e,nA,!1,!0),s.push(t.result),Yt(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)le(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}function vY(t,e,i){var r,n,s,o,a,l,u=t.tag,c=t.anchor,f={},d=Object.create(null),h=null,p=null,y=null,v=!1,b=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),I=t.input.charCodeAt(t.position);I!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(I===63||I===58)&&Zi(r))I===63?(v&&(Yl(t,f,d,h,p,null,o,a,l),h=p=y=null),b=!0,v=!0,n=!0):v?(v=!1,n=!0):le(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=r;else{if(o=t.line,a=t.lineStart,l=t.position,!Kl(t,i,rA,!1,!0))break;if(t.line===s){for(I=t.input.charCodeAt(t.position);fa(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),Zi(I)||le(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Yl(t,f,d,h,p,null,o,a,l),h=p=y=null),b=!0,v=!1,n=!1,h=t.tag,p=t.result;else if(b)le(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=c,!0}else if(b)le(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=c,!0}if((t.line===s||t.lineIndent>e)&&(v&&(o=t.line,a=t.lineStart,l=t.position),Kl(t,e,Jp,!0,n)&&(v?p=t.result:y=t.result),v||(Yl(t,f,d,h,p,y,o,a,l),h=p=y=null),Yt(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&I!==0)le(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&Yl(t,f,d,h,p,null,o,a,l),b&&(t.tag=u,t.anchor=c,t.kind="mapping",t.result=f),b}function NY(t){var e,i=!1,r=!1,n,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&le(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(i=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,n="!!",o=t.input.charCodeAt(++t.position)):n="!",e=t.position,i){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):le(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Zi(o);)o===33&&(r?le(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),sA.test(n)||le(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),fY.test(s)&&le(t,"tag suffix cannot contain flow indicator characters")}s&&!oA.test(s)&&le(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{le(t,"tag name is malformed: "+s)}return i?t.tag=s:lo.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:le(t,'undeclared tag handle "'+n+'"'),!0}function SY(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&le(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Zi(i)&&!Wl(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function PY(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Zi(r)&&!Wl(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),lo.call(t.anchorMap,i)||le(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],Yt(t,!0,-1),!0}function Kl(t,e,i,r,n){var s,o,a,l=1,u=!1,c=!1,f,d,h,p,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=Jp===i||nA===i,r&&Yt(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;NY(t)||SY(t);)Yt(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||n),(l===1||Jp===i)&&(Xp===i||rA===i?y=e:y=e+1,v=t.position-t.lineStart,l===1?a&&(GP(t,v)||vY(t,v,y))||bY(t,y)?c=!0:(o&&IY(t,y)||yY(t,y)||TY(t,y)?c=!0:PY(t)?(c=!0,(t.tag!==null||t.anchor!==null)&&le(t,"alias node should not have any properties")):_Y(t,y,Xp===i)&&(c=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(c=a&&GP(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&le(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(lo.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=t.typeMap.multi[t.kind||"fallback"],f=0,d=h.length;f<d;f+=1)if(t.tag.slice(0,h[f].tag.length)===h[f].tag){p=h[f];break}p||le(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&le(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):le(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||c}function AY(t){var e=t.position,i,r,n,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Yt(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),i=t.position;o!==0&&!Zi(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),n=[],r.length<1&&le(t,"directive name must not be less than one character in length");o!==0;){for(;fa(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!On(o));break}if(On(o))break;for(i=t.position;o!==0&&!Zi(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(i,t.position))}o!==0&&iy(t),lo.call(UP,r)?UP[r](t,r,n):Zp(t,'unknown document directive "'+r+'"')}if(Yt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Yt(t,!0,-1)):s&&le(t,"directives end mark is expected"),Kl(t,t.lineIndent-1,Jp,!1,!0),Yt(t,!0,-1),t.checkLineBreaks&&cY.test(t.input.slice(e,t.position))&&Zp(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ih(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Yt(t,!0,-1));return}if(t.position<t.length-1)le(t,"end of the stream or a document separator is expected");else return}function cA(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new gY(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,le(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)AY(i);return i.documents}function EY(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var r=cA(t,i);if(typeof e!="function")return r;for(var n=0,s=r.length;n<s;n+=1)e(r[n])}function CY(t,e){var i=cA(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new qi("expected a single document in the stream, but found more")}}var RY=EY,xY=CY,fA={loadAll:RY,load:xY},dA=Object.prototype.toString,pA=Object.prototype.hasOwnProperty,ny=65279,wY=9,ic=10,kY=13,DY=32,FY=33,LY=34,X_=35,OY=37,MY=38,qY=39,BY=42,hA=44,VY=45,eh=58,UY=61,jY=62,GY=63,HY=64,mA=91,gA=93,WY=96,_A=123,YY=124,yA=125,Si={};Si[0]="\\0";Si[7]="\\a";Si[8]="\\b";Si[9]="\\t";Si[10]="\\n";Si[11]="\\v";Si[12]="\\f";Si[13]="\\r";Si[27]="\\e";Si[34]='\\"';Si[92]="\\\\";Si[133]="\\N";Si[160]="\\_";Si[8232]="\\L";Si[8233]="\\P";var KY=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],$Y=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function zY(t,e){var i,r,n,s,o,a,l;if(e===null)return{};for(i={},r=Object.keys(e),n=0,s=r.length;n<s;n+=1)o=r[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&pA.call(l.styleAliases,a)&&(a=l.styleAliases[a]),i[o]=a;return i}function QY(t){var e,i,r;if(e=t.toString(16).toUpperCase(),t<=255)i="x",r=2;else if(t<=65535)i="u",r=4;else if(t<=4294967295)i="U",r=8;else throw new qi("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+Xt.repeat("0",r-e.length)+e}var XY=1,rc=2;function JY(t){this.schema=t.schema||iA,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Xt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=zY(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?rc:XY,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function HP(t,e){for(var i=Xt.repeat(" ",e),r=0,n=-1,s="",o,a=t.length;r<a;)n=t.indexOf(`
`,r),n===-1?(o=t.slice(r),r=a):(o=t.slice(r,n+1),r=n+1),o.length&&o!==`
`&&(s+=i),s+=o;return s}function J_(t,e){return`
`+Xt.repeat(" ",t.indent*e)}function ZY(t,e){var i,r,n;for(i=0,r=t.implicitTypes.length;i<r;i+=1)if(n=t.implicitTypes[i],n.resolve(e))return!0;return!1}function th(t){return t===DY||t===wY}function nc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ny||65536<=t&&t<=1114111}function WP(t){return nc(t)&&t!==ny&&t!==kY&&t!==ic}function YP(t,e,i){var r=WP(t),n=r&&!th(t);return(i?r:r&&t!==hA&&t!==mA&&t!==gA&&t!==_A&&t!==yA)&&t!==X_&&!(e===eh&&!n)||WP(e)&&!th(e)&&t===X_||e===eh&&n}function eK(t){return nc(t)&&t!==ny&&!th(t)&&t!==VY&&t!==GY&&t!==eh&&t!==hA&&t!==mA&&t!==gA&&t!==_A&&t!==yA&&t!==X_&&t!==MY&&t!==BY&&t!==FY&&t!==YY&&t!==UY&&t!==jY&&t!==qY&&t!==LY&&t!==OY&&t!==HY&&t!==WY}function tK(t){return!th(t)&&t!==eh}function ec(t,e){var i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function TA(t){var e=/^\n* /;return e.test(t)}var bA=1,Z_=2,IA=3,vA=4,Hl=5;function iK(t,e,i,r,n,s,o,a){var l,u=0,c=null,f=!1,d=!1,h=r!==-1,p=-1,y=eK(ec(t,0))&&tK(ec(t,t.length-1));if(e||o)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=ec(t,l),!nc(u))return Hl;y=y&&YP(u,c,a),c=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=ec(t,l),u===ic)f=!0,h&&(d=d||l-p-1>r&&t[p+1]!==" ",p=l);else if(!nc(u))return Hl;y=y&&YP(u,c,a),c=u}d=d||h&&l-p-1>r&&t[p+1]!==" "}return!f&&!d?y&&!o&&!n(t)?bA:s===rc?Hl:Z_:i>9&&TA(t)?Hl:o?s===rc?Hl:Z_:d?vA:IA}function rK(t,e,i,r,n){t.dump=function(){if(e.length===0)return t.quotingType===rc?'""':"''";if(!t.noCompatMode&&(KY.indexOf(e)!==-1||$Y.test(e)))return t.quotingType===rc?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,i),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=r||t.flowLevel>-1&&i>=t.flowLevel;function l(u){return ZY(t,u)}switch(iK(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!r,n)){case bA:return e;case Z_:return"'"+e.replace(/'/g,"''")+"'";case IA:return"|"+KP(e,t.indent)+$P(HP(e,s));case vA:return">"+KP(e,t.indent)+$P(HP(nK(e,o),s));case Hl:return'"'+sK(e)+'"';default:throw new qi("impossible error: invalid scalar style")}}()}function KP(t,e){var i=TA(t)?String(e):"",r=t[t.length-1]===`
`,n=r&&(t[t.length-2]===`
`||t===`
`),s=n?"+":r?"":"-";return i+s+`
`}function $P(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function nK(t,e){for(var i=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,i.lastIndex=u,zP(t.slice(0,u),e)}(),n=t[0]===`
`||t[0]===" ",s,o;o=i.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!n&&!s&&l!==""?`
`:"")+zP(l,e),n=s}return r}function zP(t,e){if(t===""||t[0]===" ")return t;for(var i=/ [^ ]/g,r,n=0,s,o=0,a=0,l="";r=i.exec(t);)a=r.index,a-n>e&&(s=o>n?o:a,l+=`
`+t.slice(n,s),n=s+1),o=a;return l+=`
`,t.length-n>e&&o>n?l+=t.slice(n,o)+`
`+t.slice(o+1):l+=t.slice(n),l.slice(1)}function sK(t){for(var e="",i=0,r,n=0;n<t.length;i>=65536?n+=2:n++)i=ec(t,n),r=Si[i],!r&&nc(i)?(e+=t[n],i>=65536&&(e+=t[n+1])):e+=r||QY(i);return e}function oK(t,e,i){var r="",n=t.tag,s,o,a;for(s=0,o=i.length;s<o;s+=1)a=i[s],t.replacer&&(a=t.replacer.call(i,String(s),a)),(ls(t,e,a,!1,!1)||typeof a>"u"&&ls(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=n,t.dump="["+r+"]"}function QP(t,e,i,r){var n="",s=t.tag,o,a,l;for(o=0,a=i.length;o<a;o+=1)l=i[o],t.replacer&&(l=t.replacer.call(i,String(o),l)),(ls(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&ls(t,e+1,null,!0,!0,!1,!0))&&((!r||n!=="")&&(n+=J_(t,e)),t.dump&&ic===t.dump.charCodeAt(0)?n+="-":n+="- ",n+=t.dump);t.tag=s,t.dump=n||"[]"}function aK(t,e,i){var r="",n=t.tag,s=Object.keys(i),o,a,l,u,c;for(o=0,a=s.length;o<a;o+=1)c="",r!==""&&(c+=", "),t.condenseFlow&&(c+='"'),l=s[o],u=i[l],t.replacer&&(u=t.replacer.call(i,l,u)),ls(t,e,l,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ls(t,e,u,!1,!1)&&(c+=t.dump,r+=c));t.tag=n,t.dump="{"+r+"}"}function lK(t,e,i,r){var n="",s=t.tag,o=Object.keys(i),a,l,u,c,f,d;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new qi("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!r||n!=="")&&(d+=J_(t,e)),u=o[a],c=i[u],t.replacer&&(c=t.replacer.call(i,u,c)),ls(t,e+1,u,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&ic===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,f&&(d+=J_(t,e)),ls(t,e+1,c,!0,f)&&(t.dump&&ic===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,n+=d));t.tag=s,t.dump=n||"{}"}function XP(t,e,i){var r,n,s,o,a,l;for(n=i?t.explicitTypes:t.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(i?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,dA.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(pA.call(a.represent,l))r=a.represent[l](e,l);else throw new qi("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function ls(t,e,i,r,n,s,o){t.tag=null,t.dump=i,XP(t,i,!1)||XP(t,i,!0);var a=dA.call(t.dump),l=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var c=a==="[object Object]"||a==="[object Array]",f,d;if(c&&(f=t.duplicates.indexOf(i),d=f!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(n=!1),d&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(c&&d&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(lK(t,e,t.dump,n),d&&(t.dump="&ref_"+f+t.dump)):(aK(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?QP(t,e-1,t.dump,n):QP(t,e,t.dump,n),d&&(t.dump="&ref_"+f+t.dump)):(oK(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&rK(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new qi("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function uK(t,e){var i=[],r=[],n,s;for(ey(t,i,r),n=0,s=r.length;n<s;n+=1)e.duplicates.push(i[r[n]]);e.usedDuplicates=new Array(s)}function ey(t,e,i){var r,n,s;if(t!==null&&typeof t=="object")if(n=e.indexOf(t),n!==-1)i.indexOf(n)===-1&&i.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)ey(t[n],e,i);else for(r=Object.keys(t),n=0,s=r.length;n<s;n+=1)ey(t[r[n]],e,i)}function cK(t,e){e=e||{};var i=new JY(e);i.noRefs||uK(t,i);var r=t;return i.replacer&&(r=i.replacer.call({"":r},"",r)),ls(i,0,r,!0,!0)?i.dump+`
`:""}var fK=cK,dK={dump:fK};function sy(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var $l=fA.load,Ime=fA.loadAll,NA=dK.dump,SA=qi;var vme=sy("safeLoad","load"),Nme=sy("safeLoadAll","loadAll"),Sme=sy("safeDump","dump");var rh=class{constructor(){this.yamlData=null}isInClassParmaeter(e){let i=null;return e instanceof Ve&&e.logicBranches.length>0&&e.logicBranches[0].head!=null?i=e.logicBranches[0].head:e instanceof B&&(i=e),i!=null&&i.fragmentPosition==1&&i.fragmentParameter!=null&&i.fragmentParameter.name.toLowerCase()=="class"}getPrefix(e){if(e.prev==null||!(e.prev instanceof Le)||e.prev.content.trimRight().length!=e.prev.content.length)return"";let i=e.prev.content.split('"');if(i.length==0)return"";let r=i[i.length-1].split(" ");return r.length==0?"":r[r.length-1].trim()}getSuffix(e){if(e.next==null||!(e.next instanceof Le)||e.next.content.trimLeft().length!=e.next.content.length)return"";let i=e.next.content.split('"');if(i.length==0)return"";let r=i[0].split(" ");return r.length==0?"":r[0].trim()}analyze(e){let i=e.getDocumentParser().getRenderNodes();if(e.hasFrontMatter())try{this.yamlData=$l(e.getFrontMatter())}catch{}return this.analyzeNodes(i)}analyzeNodes(e){let i=[];return e.forEach(r=>{let n=[],s=[],o="",a="";if(this.isInClassParmaeter(r)){let l=[];if(r instanceof Ve){if(r.logicBranches.length==0)return;let u=r.logicBranches[0],c=r.logicBranches[r.logicBranches.length-1];if(u.head==null||c.head==null||c.head.isClosedBy==null)return;let f=c.head.isClosedBy,d=u.head;o=this.getPrefix(d),a=this.getSuffix(f),r.logicBranches.forEach(h=>{if(h.head==null||h.head.children.length!=2||!(h.head.children[0]instanceof Le))return;let p=h.head.children[0].content;p.trim().length==p.length&&(l.includes(p)||l.push(p))})}else if(r instanceof B){if(r.isPaired()){i=i.concat(this.analyzeNodes(r.getStructuralChildren()));return}o=this.getPrefix(r),a=this.getSuffix(r)}if(this.yamlData!=null&&l.length==0&&o.length+a.length>0){let u=r.getParser();if(typeof u<"u"&&u!==null){let c=u.getLanguageParser();typeof c<"u"&&c!==null&&c.getCreatedVariables().forEach(d=>{if(d.variableReference==null||d.variableReference.pathParts.length!=3||!(d.variableReference.pathParts[0]instanceof zt)||!(d.variableReference.pathParts[1]instanceof zt)||!(d.variableReference.pathParts[2]instanceof pn))return;let h=d.variableReference.pathParts[0],p=d.variableReference.pathParts[1];if(h.name!="view"||typeof this.yamlData[p.name]>"u")return;let y=this.yamlData[p.name],v=[],b=Object.keys(y),I=!0;for(let C=0;C<b.length;C++){let q=y[b[C]];if(typeof q!="string"){I=!1;break}v.push(q)}I&&v.forEach(C=>{l.includes(C)||l.push(C)})})}}if(l.length==0&&o.length+a.length>0){let u="/";o.length>0&&(u+=o),u+="(.*)",a.length>0&&(u+=a),u+="/",s.push(u)}else l.length>0&&l.forEach(u=>{let c=`${o}${u}${a}`;n.push(c)})}else r instanceof B&&r.isPaired()&&(i=i.concat(this.analyzeNodes(r.getImmediateChildren())));(a.length>0||o.length>0)&&(n.length>0||s.length>0)&&i.push({classNames:n,patterns:s,node:r,suffix:a,prefix:o})}),i}};var nh=Y(require("fs"),1),pK={checkDocument(t,e){if(e.diagnostics.warnOnDynamicCssClassNames==!1)return[];let i=[],r=new rh().analyze(t);if(r.length==0)return i;let n="";if(ee.instance?.hasStructure()){let s=ee.instance.getStructure().getProjectRoot(),o=[];o.push(s+"tailwind.config.js"),o.push(s+"webpack.mix.js"),o.push(s+"webpack.config.js");for(let a=0;a<o.length;a++)if(nh.existsSync(o[a])){n=nh.readFileSync(o[a],{encoding:"utf8"});break}}return r.forEach(s=>{let o=s.classNames.concat(s.patterns),a=D.makeSyntaxError(T.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE,s.node,`Dynamic CSS class name generation detected. Some build tools, like PurgeCSS, may not be able to find these classes. It is recommended to use full class names, or configure a class safelist.
    
Possible Classes: ${o.join(", ")}`,1),l=!0;if(n.trim().length>0){l=!1;for(let f=0;f<o.length;f++)if(n.includes(o[f])==!1){l=!0;break}}if(!l)return;let u=ct(s.node.startPosition),c=ct(s.node.endPosition);if(s.node instanceof Ve){if(s.node.logicBranches.length>0){let f=s.node.logicBranches[0],d=s.node.logicBranches[s.node.logicBranches.length-1];f.head!=null&&d.head!=null&&d.head.isClosedBy!=null&&(u=ct(f.head.startPosition),c=ct(d.head.isClosedBy.endPosition))}}else s.node instanceof B&&(u=ct(s.node.startPosition),c=ct(s.node.endPosition));u.character=u.character-s.prefix.length-1,c.character=c.character+s.suffix.length,a.lsRange={start:u,end:c},a.data=s,i.push(a)}),i}},PA=pK;var hK={checkDocument(t){let e=[];return t.hasFrontMatter()&&t.getContent().trim().length==0&&e.push(D.makeSyntaxError(T.LINT_FRONT_MATTER_EMPTY_DOCUMENT,null,'Empty document content with Front Matter will result in "[ErrorException] Undefined index: content".')),e}},AA=hK;function EA(t){let e=t.split(/\r?\n/),i=[];return e.forEach(r=>{let n=r.split("|");if(n.length==1)i.push(r);else if(n.length>1){let s=n[0];if(parseInt(s.trim()).toString()==s.trim()){let o=parseInt(s)+1;n.shift();let a=n.join("|"),l=" ".repeat(s.length-o.toString().length);i.push(l+o.toString()+"|"+a)}else i.push(r)}}),i.join(`
`)}var mK={checkDocument(t){let e=[];if(t.hasFrontMatter()){let i=t.getFrontMatter();try{$l(i,{onWarning:r=>{let n=new Bt,s=new Bt;n.line=r.mark.line+2,n.char=r.mark.column,s.line=r.mark.line+2,s.char=r.mark.snippet.length+r.mark.column;let o={start:n,end:s},a=new D;a.errorCode=T.LINT_INVALID_FRONT_MATTER,a.level=1,a.message=EA(r.message),a.range=o,e.push(a)}})}catch(r){if(r instanceof SA){let n=new Bt,s=new Bt;n.line=r.mark.line+2,n.char=r.mark.column,s.line=r.mark.line+2,s.char=r.mark.snippet.length+r.mark.column;let o={start:n,end:s},a=new D;a.errorCode=T.LINT_INVALID_FRONT_MATTER,a.level=0,a.message=EA(r.message),a.range=o,e.push(a)}}}return e}},CA=mK;var gK={checkDocument(t){let e=[];return t.getAllAntlersNodes().forEach(i=>{if(i.isTagNode&&i.name!=null&&i.getTagName()=="partial"){let r=dl(i);if(r==null)return;let n=ee.instance?.getStructure()?.findRelativeView(r);if(typeof n>"u"||n==null)return;n.documentUri==t.documentUri&&i.findParentOfType(["if","elseif","else"])==null&&e.push(D.makeSyntaxError(T.LINT_POSSIBLE_PARTIAL_RECURSION,i,"Possible partial recursion detected",1))}}),e}},RA=gK;var xA=[AA,CA,RA,PA];var _K=["dump","dd","ddd"],yK={checkNode(t){let e=t.getTagName(),i=[];return _K.includes(e)&&i.push(D.makeSyntaxError(T.LINT_DEBUG_DATA_EXPOSED,t,e+" exposes data and should be removed after debugging.",1)),t.modifiers.hasModifier("dump")&&i.push(D.makeSyntaxError(T.LINT_DEBUG_DATA_EXPOSED,t,"dump modifier exposes data and should be removed after debugging.",1)),i}},wA=yK;var TK={checkNode(t){let e=[];if(t.modifiers==null)return e;let i=[];if(t.modifiers.hasParameterModifiers())for(let r=0;r<t.modifiers.parameterModifiers.length;r++){let n=t.modifiers.parameterModifiers[r];n.refId!=null&&i.includes(n.refId)==!1&&n.modifier!=null&&n.modifier.isDeprecated&&(e.push(D.makeSyntaxError(T.LINT_DEPRECATED_MODIFIER,t.modifiers.parameterModifiers[r],ay(n.modifier),1)),i.push(n.refId))}if(t.modifiers.hasShorthandModifiers()&&t.modifierChain!=null)for(let r=0;r<t.modifierChain.modifierChain.length;r++){let n=t.modifierChain.modifierChain[r];n.refId!=null&&i.includes(n.refId)==!1&&n.modifier!=null&&n.modifier.isDeprecated&&(e.push(D.makeSyntaxError(T.LINT_DEPRECATED_MODIFIER,n,ay(n.modifier),1)),i.push(n.refId))}if(t.runtimeNodes!=null&&t.runtimeNodes.length>0)for(let r=0;r<t.runtimeNodes.length;r++){let n=t.runtimeNodes[r];if(n.modifierChain!=null)for(let s=0;s<n.modifierChain.modifierChain.length;s++){let o=n.modifierChain.modifierChain[s];o.refId!=null&&i.includes(o.refId)==!1&&o.modifier!=null&&o.modifier.isDeprecated&&(e.push(D.makeSyntaxError(T.LINT_DEPRECATED_MODIFIER,o,ay(o.modifier),1)),i.push(o.refId))}}return e}};function ay(t){return t.getDeprecatedMessage!=null?t.getDeprecatedMessage():`${t.name} is deprecated.`}var kA=TK;var bK={checkNode(t){let e=[];if(t.scopeVariable==null||t.scopeVariable.sourceField==null||t.modifierChain==null||t.modifierChain.modifierChain.length==0)return e;let i=t.scopeVariable.sourceField.type,r=t.modifierChain.modifierChain[0];return r.modifier==null||i=="select_multiple"&&(r.modifier.name=="join"||r.modifier.name=="joinplode")&&e.push(D.makeSyntaxError(T.LINT_SELECT_FIELD_JOIN_RAW,t,"To join a select field, add the raw modifier: "+IK(t,"join"),1)),e}};function IK(t,e){return"{{ "+(t.name?.name??"field_name")+" | raw | "+e+" ... }}"}var DA=bK;var vK={checkNode(t){let e=[];if(t.isClosedBy==null||t.parent==null||!(t.parent instanceof B))return e;let i=t.parent;if(i.isClosedBy==null)return e;let r=t.runtimeName();return r=="if"||r=="if:index"||r=="else"||r=="else:index"||r=="elseif"||r=="elseif:index"||r=="elseunless"||r=="elseunless:index"||i.isClosedBy.startPosition?.isBefore(t.isClosedBy.endPosition)&&(e.push(D.makeSyntaxError(T.LINT_INTERLEAVED_TAG_PAIRS,t,"Closing tag cannot appear after parent closing tag.")),e.push(D.makeSyntaxError(T.LINT_INTERLEAVED_TAG_PAIRS,t.isClosedBy,"Closing tag cannot appear after parent closing tag."))),e}},sc=vK;var NK={checkNode(t){let e=[];return t.hasParameters==!1||t.parameters.forEach(i=>{i.hasValidValueDelimiter==!1&&e.push(D.makeSyntaxError(T.LINT_INVALID_PARAMETER_VALUE_DELIMITER,i,"Parameter values must be enclosed in single or double quotes.",1))}),e}},FA=NK;var SK={checkNode(t){let e=[];return t.modifiers!=null&&t.modifiers.hasMixedModifierStyles&&e.push(D.makeSyntaxError(T.LINT_MIXED_MODIFIERS,t,"Mixed modifier styles is not supported",0)),e}},LA=SK;var PK={checkNode(t){let e=[];if(t.modifiers==null)return e;let i=[];if(t.modifiers.hasParameterModifiers()){let r=null;for(let n=0;n<t.modifiers.parameterModifiers.length;n++){let s=t.modifiers.parameterModifiers[n];if(r==null){r=s;continue}if(r!=null&&r.modifier!=null&&s.modifier!=null){if(r.modifier.returnsType.includes("*")||s.modifier.acceptsType.includes("*"))continue;{let o=r.modifier.returnsType,a="void",l="void",u=s.modifier.acceptsType.some(c=>o.includes(c));if(o.length>0&&(a=o[o.length-1]),s.modifier.acceptsType.length>0&&(l=s.modifier.acceptsType[0]),!u){e.push(D.makeSyntaxError(T.LINT_MODIFIER_UNEXPECTED_TYPE,s,"Unexpected type supplied to modifier "+s.name+". Expected "+l+" got "+a+".",1));break}}}}}if(t.modifiers.hasShorthandModifiers()&&t.modifierChain!=null){let r=null;for(let n=0;n<t.modifierChain.modifierChain.length;n++){let s=t.modifierChain.modifierChain[n];if(r==null){r=s;continue}if(r!=null&&r.modifier!=null&&s.modifier!=null)if(r.modifier.returnsType.includes("*")||s.modifier.acceptsType.includes("*")){r=s;continue}else{let o=r.modifier.returnsType,a="void",l="void",u=s.modifier.acceptsType.some(c=>o.includes(c));if(o.length>0&&(a=o[o.length-1]),s.modifier.acceptsType.length>0&&(l=s.modifier.acceptsType[0]),!u){s.refId!=null&&!i.includes(s.refId)&&(e.push(D.makeSyntaxError(T.LINT_MODIFIER_UNEXPECTED_TYPE,s,"Unexpected type supplied to modifier "+s.name+". Expected "+l+" got "+a+".",1)),i.push(s.refId));break}r=s}}}if(t.runtimeNodes!=null&&t.runtimeNodes.length>0)for(let r=0;r<t.runtimeNodes.length;r++){let n=t.runtimeNodes[r],s=null;if(n.modifierChain!=null)for(let o=0;o<n.modifierChain.modifierChain.length;o++){let a=n.modifierChain.modifierChain[o];if(s==null){s=a;continue}if(s!=null&&s.modifier!=null&&a.modifier!=null)if(s.modifier.returnsType.includes("*")||a.modifier.acceptsType.includes("*")){s=a;continue}else{let l=s.modifier.returnsType,u="void",c="void",f=a.modifier.acceptsType.some(d=>l.includes(d));if(l.length>0&&(u=l[l.length-1]),a.modifier.acceptsType.length>0&&(c=a.modifier.acceptsType[0]),!f){a.refId!=null&&i.includes(a.refId)==!1&&(e.push(D.makeSyntaxError(T.LINT_MODIFIER_UNEXPECTED_TYPE,a,"Unexpected type supplied to modifier "+a.name+". Expected "+c+" got "+u+".",1)),i.push(a.refId));break}s=a}}}return e}},OA=PK;var MA={warnUnknownParameters:!1};var sh=class{static validateInteger(e){return parseInt(e).toString()!==e?{isValid:!1,message:'"'+e+'" is not a valid integer.'}:{isValid:!0,message:""}}static validateBoolean(e){return e=="true"||e=="false"?{isValid:!0,message:""}:{isValid:!1,message:'"'+e+'" is not a valid value. Expecting true/false.'}}static validateParameters(e){let i=[];if(e.isTagNode&&Ne.instance?.isKnownTag(e.runtimeName())){let r=Ne.instance?.findTag(e.runtimeName());if(e.hasParameters)for(let n=0;n<e.parameters.length;n++){let s=e.parameters[n],o=null,a=!1,l=s.name.trim();if(!s.isVariableReference)if(l=Rr(l,":"),Ne.instance?.canResolveDynamicParameter(e.runtimeName())&&typeof r.resolveDynamicParameter<"u"&&r.resolveDynamicParameter!=null?(o=r.resolveDynamicParameter(e,l),a=!0):o=Ne.instance?.getParameter(e.runtimeName(),l),a&&o==null&&(o=Ne.instance?.getParameter(e.runtimeName(),l)),o==null){if(MA.warnUnknownParameters){let u="";if(r.suggestAlternativeParams!=null){let f=r.suggestAlternativeParams(l);f.length==1?u='. Did you mean "'+f[0]+'"?':f.length>1&&(u=". Try one of the following: "+f.join(", "))}let c='Unknown parameter name: "'+l+'"'+u;i.push(D.makeSyntaxError(T.LINT_UNKNOWN_PARAMETER,e,c,1))}}else if(o.validate!=null){let u=o.validate(e,s);u.length>0&&u.forEach(c=>{i.push(D.makeSyntaxError(T.LINT_GENERAL_INVALID_PARAMETER_CONTENTS,s,c.message,1))})}else{if(s.hasInterpolations())continue;for(let u=0;u<o.expectsTypes.length;u++){let c=o.expectsTypes[u];if(c=="integer"){let f=this.validateInteger(s.value);f.isValid||i.push(D.makeSyntaxError(T.LINT_PARAMETER_CONTENT_INVALID_INTEGER,s,f.message,1))}else if(c=="boolean"){let f=this.validateBoolean(s.value);if(o.name=="paginate"){if(s.value=="true"||s.value=="false")continue;if(parseInt(s.value).toString()!=s.value){let d='Unexpected "'+s.value+'". Expecting a numeric value, or true/false.';i.push(D.makeSyntaxError(T.LINT_PAGINATE_INVALID_VALUE,s,d,0))}}else f.isValid||i.push(D.makeSyntaxError(T.LINT_PARAMETER_CONTENT_INVALID_BOOLEAN,s,f.message,1))}}}}}return i}};var AK={checkNode(t,e){return e.diagnostics.validateTagParameters==!1?[]:sh.validateParameters(t)}},qA=AK;var EK={checkNode(t){let e=[];if(t.isTagNode&&t.name!=null&&t.getTagName()=="partial"){if(t.isClosingTag&&!t.isSelfClosing)return e;let i=dl(t);if(i==null)return e;let r=ee.instance?.getStructure()?.findRelativeView(i);if(typeof r>"u"||r==null)return e;r.injectsParameters.length>0&&r.injectsParameters.forEach(n=>{n.isRequired&&!t.hasParameter(n.name)&&e.push(D.makeSyntaxError(T.LINT_MISSING_REQUIRED_PARAMETER,t,"Missing required parameter: "+n.name,0))})}return e}},BA=EK;var CK=["assets","entries","form_multiple","sites_multiple","structures_multiple","taxonomies_multiple","terms_multiple","user_groups_multiple","user_roles_multiple","users_multiple"],RK=["as","on_each_side","order_by","sort","query_scope","filter","reverse","paginate","limit","offset","page_name"],oc=class{static isQueryBuilderType(e){return CK.includes(e)}static isIgnoredParameterName(e){return RK.includes(e)}};var VA="Query builder fields must use an alias in order to use modifiers",xK={checkNode(t){let e=[];if(t.scopeVariable!=null&&t.isTagNode==!1){if(t.runtimeNodes.length==0)return e;if(t.runtimeNodes[0]instanceof ie&&t.scopeVariable.sourceField!=null){if(t.hasParameter("as"))return e;if(oc.isQueryBuilderType(t.scopeVariable.sourceField.type)){if(t.modifierChain!=null&&t.modifierChain.modifierChain.length>0)return e.push(D.makeSyntaxError(T.LINT_MODIFIERS_ON_QUERY_BUILDERS_REQUIRE_AS,t,VA,1)),e;if(t.hasParameters)for(let r=0;r<t.parameters.length;r++){let n=t.parameters[r];if(n.modifier!=null&&!oc.isIgnoredParameterName(n.modifier.name))return e.push(D.makeSyntaxError(T.LINT_MODIFIERS_ON_QUERY_BUILDERS_REQUIRE_AS,t,VA,1)),e}}}}return e}},UA=xK;var wK={checkNode(t){let e=[];return t.isTagNode&&t.name!=null&&t.getTagName()=="relate"&&e.push(D.makeSyntaxError(T.LINT_REMOVE_RELATE_TAG,t,"The `relate` tag is not necessary here, and can be removed.",1)),e}},jA=wK;var kK={checkNode(t,e){let i=[];if(e.languageVersion=="runtime")return[];if(t.isClosedBy!=null&&t.modifierChain!=null){let r=t.content.trim(),n=t.isClosedBy.content.trim(),s="/"+r;n!=s&&(i.push(D.makeSyntaxError(T.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH,t,"Closing tags must match exactly when using shorthand modifiers in tag pairs.",0)),i.push(D.makeSyntaxError(T.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH,t.isClosedBy,'Closing tags must match exactly when using shorthand modifiers in tag pairs. Expecting: "'+s+'".',0)))}return i}},GA=kK;var oE=Y(Py(),1),h3={checkNode(t){let e=[];if(t.isOpenedBy!=null||!ee.instance?.hasStructure())return e;let i=ee.instance.getStructure().getStatamicVersion();if(i==null||i.trim().length==0||!Ne.instance?.isKnownTag(t.runtimeName()))return e;let r=Ne.instance?.findTag(t.runtimeName());if(r?.introducedIn==null)return e;try{oE.lt(i,r.introducedIn)&&e.push(D.makeSyntaxError(T.LINT_VERSION_NOT_COMPATIBLE,t,t.runtimeName()+" requires at least Statamic "+r.introducedIn+". Current project version: "+i,1))}catch{}return e}},aE=h3;var m3={checkNode(t){let e=[];return t.isTagNode&&t.getTagName()=="set"&&e.push(D.makeSyntaxError(T.LINT_SET_PRODUCES_RUNTIME_ERROR,t,'`set` tag will produce "array_merge(): Expected parameter 1 to be an array, object given" runtime exception.')),e}},lE=m3;var g3=[wA,LA,OA,DA,kA,jA,lE,GA,aE,sc,FA,BA,qA,UA],uE=g3;var cs=class{constructor(){this.fileDiagnostics=new Map;this.handlers=[];this.docHandlers=[]}registerHandler(e){this.handlers.push(e)}registerDocumentHandler(e){this.docHandlers.push(e)}registerDocumentHandlers(e){for(let i=0;i<e.length;i++)this.registerDocumentHandler(e[i])}registerHandlers(e){for(let i=0;i<e.length;i++)this.registerHandler(e[i])}registerCoreHandlers(){this.registerHandlers(uE),this.registerDocumentHandlers(xA)}hasDiagnosticsIssues(e){return this.fileDiagnostics.has(e)==!1?!1:this.fileDiagnostics.get(e).length>0}registerDiagnostics(e,i){this.fileDiagnostics.set(e,i)}clearIssues(e){this.fileDiagnostics.set(e,[])}getDiagnostics(e){return this.hasDiagnosticsIssues(e)?this.fileDiagnostics.get(e):[]}checkDocument(e){let i=[],r=Ir();return this.docHandlers.forEach(n=>{n.checkDocument(e,r).forEach(s=>{i.push(s)})}),i}checkNode(e){let i=[];if(e.isComment)return i;let r=Ir();return this.handlers.forEach(n=>{n.checkNode(e,r).forEach(s=>{i.push(s)})}),i}getAllDiagnostics(){let e=[];return this.fileDiagnostics.forEach((i,r)=>{for(let n=0;n<i.length;n++)e.push(i[n])}),e}};cs.instance=null;(typeof cs.instance>"u"||cs.instance==null)&&(cs.instance=new cs,cs.instance.registerCoreHandlers());var Vi=cs;var _E=Y($t(),1);var eu=Y($t(),1);var cE=Y(Jh(),1);function fs(t){return t.split("\\").join("/")}function fE(t){let e=(0,cE.default)(decodeURIComponent(t));return fs(e)}var dE=Y(require("fs"),1),pE=Y(require("path"),1);var Ay=class{constructor(){this.activeRequest=null}getName(e){return"Extract to Partial"}canHandle(e){return e.selectedText.trim().length>0}refactor(e){this.activeRequest=e,Ay.currentAction=this;let i=this.getName(e);return[eu.CodeAction.create(i+"...",eu.Command.create(i,"antlers.extractToPartial",e.documentUri),eu.CodeActionKind.RefactorExtract)]}completeRefactor(e){let i=ee.instance?.getStructure();if(i!=null&&this.activeRequest!=null){let r=fs(i.getViewPath()),n=fs(e.fsPath);if(n.startsWith(r)){dE.writeFileSync(e.fsPath,this.activeRequest.selectedText);let s=n.substring(r.length),o=pE.basename(n);o.startsWith("_")&&(o=o.substr(1)),s=s.substr(0,s.length-o.length),o.endsWith(".antlers.html")?o=o.substring(0,o.length-13):o.endsWith(".antlers.xml")||o.endsWith("antlers.php")?o=o.substring(0,o.length-12):o.endsWith(".blade.php")?o=o.substring(0,o.length-10):o.endsWith(".html")&&(o=o.substring(0,o.length-5)),s.length>1&&s.endsWith("/")==!1&&(s=s+"/");let a="{{ partial:"+s+o+" }}",l={range:this.activeRequest.actionParams.range,newText:a},u={changes:{[this.activeRequest.actionParams.textDocument.uri]:[l]}};Ey(u)}}}},gh=Ay;gh.currentAction=null;var fc=gh;var hE=Y($t(),1);var dc=class{static isFlatCondition(e){if(e.chain.length>1&&e.logicBranches[1].head?.getTagName()!="else")return!1;let i=e.logicBranches[0].nodes,r=!1;for(let n=0;n<i.length;n++)if(i[n]instanceof Ve){r=!0;break}if(r)for(let n=0;n<i.length;n++){let s=i[n];if(s instanceof Le&&s.content.trim().length!=0)return!1}for(let n=0;n<i.length;n++){let s=i[n];if(s instanceof Ve&&!dc.isFlatCondition(s)||s instanceof B&&!Vt.isConditionalStructure(s)&&s.isClosingTag)return!1}return!0}static getCleanChildren(e){let i=[],r=[];for(let n=0;n<e.nodes.length;n++){let s=e.nodes[n];if(s.startPosition==null)break;if(!r.includes(s.startPosition.index))s instanceof Le?s.content.trim().length>0&&i.push(s):i.push(s),r.push(s.startPosition.index);else break}return i.pop(),i}static unwrapFlattenedConditions(e){let i={body:[],conditions:[]};return e.logicBranches.forEach(r=>{if(r.head==null)return;i.conditions.push(r.head);let n=this.getCleanChildren(r);if(n.length==1&&n[0]instanceof Ve){let s=this.unwrapFlattenedConditions(n[0]);i.conditions=i.conditions.concat(s.conditions),i.body=i.body.concat(s.body)}else n.length==1?i.body.push(n[0]):n.forEach(s=>{if(s instanceof Ve){let o=this.unwrapFlattenedConditions(s);i.conditions=i.conditions.concat(o.conditions),i.body=i.body.concat(o.body)}else{if(s instanceof B&&Vt.isConditionalStructure(s))return;i.body.push(s)}})}),i}},_h=dc;var pc=class{constructor(e){this.refactoredStyle=0;this.params=e}isSimpleElse(e){return e.logicBranches.length==2&&e.logicBranches[1].head?.getTagName()=="else"}getRefactorMode(){return this.refactoredStyle}refactor(e){let i="";return this.params.refactorNested?(i=this.createdNestedGatekeeper(e),this.refactoredStyle=1):e.logicBranches.length==1?(i=this.createGatekeeper(e),this.refactoredStyle=1):this.isSimpleElse(e)&&(i=this.createTernary(e),this.refactoredStyle=0),this.params.isInInterpolation?"{"+i+"}":"{{ "+i+" }}"}createdNestedGatekeeper(e){let i=_h.unwrapFlattenedConditions(e),r=[],n=[];i.conditions.forEach(a=>{let l=a.getContent().trim();a.runtimeNodes.length>1&&(l.startsWith("(")==!1&&(l="("+l),l.endsWith(")")==!1&&(l=l+")"),this.shouldAddEndingParenthesis(a)&&(l+=")")),r.push(l)}),i.body.forEach(a=>{a instanceof B?n.push(a.getNodeDocumentText()):a instanceof Le&&n.push(a.content)}),n.length>0&&(n[0]=n[0].trimLeft(),n[n.length-1]=n[n.length-1].trimRight());let s=r.join(" && "),o=n.join("");return"("+s+") ?= "+this.convertToString(o)}convertToString(e){let i=e;return i=mt(i,"{{","{"),i=mt(i,"}}","}"),"'"+mt(i,"'","\\'")+"'"}createTernary(e){let i=e.logicBranches[0].head,r=e.logicBranches[1].head,n=this.convertToString(i.getInnerDocumentText()??""),s=this.convertToString(r.getInnerDocumentText()),a=i.getContent().trim();return a.startsWith("(")==!1&&(a="("+a),a.endsWith(")")==!1&&(a=a+")"),this.shouldAddEndingParenthesis(i)&&(a+=")"),a+" ? "+n+" : "+s}shouldAddEndingParenthesis(e){return e.originalNode==null?!1:e.originalNode.getTagName()=="unless"}createGatekeeper(e){let i=e.logicBranches[0].head,r=i.getInnerDocumentText()??"",n=this.convertToString(r),s="";return i.runtimeNodes.length>1?s="("+i.getContent().trim()+")":s=i.getContent(),s.trim()+" ?= "+n}};var Cy=class{constructor(){this.condition=null;this.isNestedConditions=!1;this.refactorStyle=0}getName(e){return this.refactorStyle==1?"Convert Condition to Gatekeeper operator":"Convert Condition to Ternary"}canHandle(e){if(e.selectedDocument.hasUnclosedStructures()||e.selectedDocument.hasUnclosedStructures()||e.selectedDocument.errors.hasAny())return!1;let i=e.selectedDocument.getAllAntlersNodes(),r=new Yo,n=0,s=0;for(let a=0;a<i.length;a++)if(i[a].isClosingTag){if(Vt.isConditionalStructure(i[a])){s+=1;continue}if(n+=1,n>1)return!1}let o=r.associate(i,e.ownerDocument.getDocumentParser());if(o.length==1&&o[0]instanceof Ve){if(this.condition=o[0],this.isNestedConditions=!1,s>2){if(!_h.isFlatCondition(this.condition))return this.isNestedConditions=!1,!1;this.isNestedConditions=!0}return!0}return!1}refactor(e){if(this.condition==null)return[];let i=[],r=!1;e.params.currentNode!=null&&e.params.currentNode.getTagName()!="if"&&(r=!0);let n=new pc({isInInterpolation:r,refactorNested:this.isNestedConditions}),s=n.refactor(this.condition);this.refactorStyle=n.getRefactorMode();let o={range:e.actionParams.range,newText:s};return i.push({title:this.getName(e),kind:hE.CodeActionKind.RefactorRewrite,edit:{changes:{[e.documentUri]:[o]}}}),i}},mE=Cy;var Ry=class{static getRefactors(e){let i=[],r=[];return r.push(new fc),r.push(new mE),r.forEach(n=>{n.canHandle(e)&&n.refactor(e).forEach(s=>{i.push(s)})}),i}},gE=Ry;var xy=[];function yE(t){xy=t}function TE(t){if(ee.instance?.hasStructure()==!1)return[];_e.refreshDocumentState();let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)==!1)return[];if(!Tn.has(e))return[];let i=t.range.start,r=Xi(i,e,aa.showGeneralSnippetCompletions);if(r==null)return[];let n=Tn.get(e),s=n.getText(t.range),o=ut.fromText(s.trim()),a={params:r,selectedText:s,selectedDocument:o,ownerDocument:_e.getDocument(e),documentUri:t.textDocument.uri,actionParams:t},l=gE.getRefactors(a),u=Vi.instance?.getDiagnostics(e),c=[];return u!=null&&u.length>0&&u?.forEach(f=>{if(f.errorCode==T.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE){let d=f.data;if(f.node instanceof Ve){let h="";for(let b=0;b<f.node.logicBranches.length;b++){let I=f.node.logicBranches[b];b==f.node.logicBranches.length-1?(h+=`{{${I.head?.getTrueNode().sourceContent}}}`,h+=`${d.prefix}${I.head?.documentText}${d.suffix}`,h+=`{{${I.head?.isClosedBy?.getTrueNode().sourceContent}}}`):(h+=`{{${I.head?.getTrueNode().sourceContent}}}`,h+=`${d.prefix}${I.head?.documentText}${d.suffix}`)}let p={range:f.lsRange,newText:h},y=[];xy.length>0&&xy.forEach(b=>{b.range==f.lsRange&&y.push(b)});let v="";d.suffix.length>0&&d.prefix.length>0?v=`${d.prefix}...${d.suffix}`:d.suffix.length>0?v=`...${d.suffix}`:d.prefix.length>0&&(v=`${d.prefix}...`),d.classNames.length==1&&d.patterns.length==0&&(v=d.classNames[0]),l.push({title:"Dynamic CSS Class: "+v,kind:_E.CodeActionKind.QuickFix,diagnostics:y,edit:{changes:{[t.textDocument.uri]:[p]}}})}}}),l}function bE(t,e){let i=decodeURIComponent(t);_e.createOrUpdate(i,e)}function wy(t){let e=decodeURIComponent(t.uri);_e.createOrUpdate(decodeURIComponent(t.uri),t.getText()),Tn.set(e,t)}async function ky(t,e){let i=decodeURIComponent(t.uri);_e.createOrUpdate(i,t.getText());let r=[];if(_e.hasDocument(i)){let s=_e.getDocument(i);if(la(s.errors.all()).forEach(o=>{r.push(o)}),Vi.instance?.hasDiagnosticsIssues(i)){let o=Vi.instance.getDiagnostics(i);la(o).forEach(a=>{r.push(a)})}}Ir().diagnostics.reportDiagnostics!=!1&&(yE(r),e.sendDiagnostics({uri:t.uri,diagnostics:r}),_3(t.uri,e))}function IE(t){if(ee.instance?.hasStructure()){let e=ee.instance.getStructure().getViews();for(let i=0;i<e.length;i++){let r=decodeURIComponent(e[i].documentUri),n=[];if(_e.hasDocument(r)){let s=_e.getDocument(r);s.reloadDocument(),la(s.errors.all()).forEach(o=>{n.push(o)}),la(Vi.instance?.checkDocument(s)??[]).forEach(o=>{n.push(o)}),s.getAllAntlersNodes().forEach(o=>{let a=Vi.instance?.checkNode(o)??[];a.length>0&&la(a).forEach(l=>{n.push(l)})})}t.sendDiagnostics({uri:e[i].originalDocumentUri,diagnostics:n})}}}function _3(t,e){if(Ir().diagnostics.reportDiagnostics!=!1&&ee.instance?.hasStructure()){let r=ee.instance.getStructure().getViews();for(let n=0;n<r.length;n++)if(r[n].documentUri!=t){let s=decodeURIComponent(r[n].documentUri);if(Vi.instance?.hasDiagnosticsIssues(s)){let o=[],a=Vi.instance?.getDiagnostics(s);la(a).forEach(l=>{o.push(l)}),e.sendDiagnostics({uri:r[n].originalDocumentUri,diagnostics:o})}}}}var PC=Y(_i(),1);var hc=null;function Dy(t){hc=t}var SC=Y(vC(),1);var Ch=class{constructor(){this.htmlFormatter=null;this.asyncHtmlFormatter=null;this.asyncPhpFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.preFormatter=null;this.transformOptions=null;this.createExtraVirtualStructures=!1}withTransformOptions(e){return this.transformOptions=e,this}withPreFormatter(e){return this.preFormatter=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withAsyncHtmlFormatter(e){return this.asyncHtmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}withAsyncPhpFormatter(e){return this.asyncPhpFormatter=e,this}formatText(e,i){let r=new ut;return r.getDocumentParser().withChildDocuments(!0),r.loadString(e),this.formatDocument(r,i)}async formatTextAsync(e,i){let r=new ut;return r.getDocumentParser().withChildDocuments(!0),r.loadString(e),await this.formatDocumentAsync(r,i)}async formatDocumentAsync(e,i){if(!e.isFormattingEnabled())return e.getOriginalContent();let r=e,n=e.getDocumentParser().getFragmentsContainingStructures(),s=new Map;if(n.length>0){let c=e.getOriginalContent();n.forEach(f=>{let d=j.makeSlug(64);c=c.replace(f.outerContent,d),s.set(d,f)}),r=ut.fromText(c)}if(this.preFormatter!=null){let c=this.preFormatter(r);if(c!=null)return c}let o=r.getAllAntlersNodes();for(let c=0;c<o.length;c++)if(sc.checkNode(o[c],i).length>0)return e.getOriginalContent();if(this.asyncHtmlFormatter==null||r.isValid()==!1)return r.getOriginalContent();r.transform().withAsyncInlineFormatter(c=>this.formatTextAsync(c,i)).produceExtraStructuralPairs(this.createExtraVirtualStructures).withAsyncHtmlFormatter(this.asyncHtmlFormatter).withAsyncPhpFormatter(this.asyncPhpFormatter).withYamlFormatter(this.yamlFormatter),this.transformOptions!=null&&r.transform().withOptions(this.transformOptions);let a=r.transform().toStructure(),l=await this.asyncHtmlFormatter(a),u=await r.transform().fromStructureAsync(l);return n.length>0&&(u=r.transform().applyFragmentReplacements(u,s,this.transformOptions?.tabSize??4)),u}formatDocument(e,i){if(!e.isFormattingEnabled())return e.getOriginalContent();let r=e,n=e.getDocumentParser().getFragmentsContainingStructures(),s=new Map;if(n.length>0){let c=e.getOriginalContent();n.forEach(f=>{let d=j.makeSlug(64);c=c.replace(f.outerContent,d),s.set(d,f)}),r=ut.fromText(c)}if(this.preFormatter!=null){let c=this.preFormatter(r);if(c!=null)return c}let o=r.getAllAntlersNodes();for(let c=0;c<o.length;c++)if(sc.checkNode(o[c],i).length>0)return e.getOriginalContent();if(this.htmlFormatter==null||r.isValid()==!1)return r.getOriginalContent();r.transform().withInlineFormatter(c=>this.formatText(c,i)).produceExtraStructuralPairs(this.createExtraVirtualStructures).withHtmlFormatter(this.htmlFormatter).withPhpFormatter(this.phpFormatter).withYamlFormatter(this.yamlFormatter),this.transformOptions!=null&&r.transform().withOptions(this.transformOptions);let a=r.transform().toStructure(),l=this.htmlFormatter(a),u=r.transform().fromStructure(l);return n.length>0&&(u=r.transform().applyFragmentReplacements(u,s,this.transformOptions?.tabSize??4)),u}};var Rh=class{static formatFrontMatter(e){try{let i=$l(e,{}),r=NA(i,{indent:2,noArrayIndent:!1,condenseFlow:!1,forceQuotes:!0,noRefs:!0,skipInvalid:!0});return r.endsWith(`
`)&&(r=r.trimEnd()),r}catch{return e}}};function er(t,e,i){if(t&&t.hasOwnProperty(e)){let r=t[e];if(r!==null)return r}return i}function NC(t,e,i){let r=er(t,e,null);return typeof r=="string"?r.length>0?r.split(",").map(n=>n.trim().toLowerCase()):[]:i}var tu=class extends Ch{constructor(i){super();this.options=i,this.withHtmlFormatter(this.formatHtml).withYamlFormatter(Rh.formatFrontMatter).withTransformOptions({endNewline:er(i.htmlOptions,"endWithNewline",!1),maxAntlersStatementsPerLine:i.maxStatementsPerLine,newlinesAfterFrontMatter:1,tabSize:i.tabSize})}formatHtml(i){return SC.default.html(i,{indent_size:this.options.tabSize,indent_char:this.options.insertSpaces?" ":"	",indent_empty_lines:er(this.options.htmlOptions,"indentEmptyLines",!1),wrap_line_length:er(this.options.htmlOptions,"wrapLineLength",120),unformatted:NC(this.options.htmlOptions,"unformatted",[])??[],content_unformatted:[],indent_inner_html:er(this.options.htmlOptions,"indentInnerHtml",!1),preserve_newlines:er(this.options.htmlOptions,"preserveNewLines",!0),max_preserve_newlines:er(this.options.htmlOptions,"maxPreserveNewLines",32786),indent_handlebars:er(this.options.htmlOptions,"indentHandlebars",!1),end_with_newline:er(this.options.htmlOptions,"endWithNewline",!1),extra_liners:[],wrap_attributes:er(this.options.htmlOptions,"wrapAttributes","auto"),wrap_attributes_indent_size:er(this.options.htmlOptions,"wrapAttributesIndentSize",void 0),eol:`
`,indent_scripts:er(this.options.htmlOptions,"indentScripts","normal"),unformatted_content_delimiter:er(this.options.htmlOptions,"unformattedContentDelimiter","")})}};function AC(t){let e=Ir(),i=decodeURIComponent(t.textDocument.uri),r=hc.format;if(e.formatterIgnoreExtensions.length>0){for(let n=0;n<e.formatterIgnoreExtensions.length;n++)if(i.toLowerCase().endsWith(e.formatterIgnoreExtensions[n].toLowerCase()))return null}if(_e.hasDocument(i)&&Tn.has(i)){let n=Tn.get(i),s=n.getText(),o=ut.fromText(s),a={htmlOptions:r,formatFrontMatter:e.formatFrontMatter,insertSpaces:t.options.insertSpaces,tabSize:t.options.tabSize,maxStatementsPerLine:3,formatExtensions:[]},l=new tu(a),u=l.formatDocument(o,Ir()),c=n.positionAt(s.length);return[{range:{start:PC.Position.create(0,0),end:c},newText:u}]}return null}var EC=Y(_i(),1);var I$={activeSignature:null,activeParameter:null,signatures:[]};function CC(t){let e=decodeURIComponent(t.textDocument.uri),i=Xi(t.position,e);if(i!=null&&i.context!=null&&i.context.modifierContext!=null&&Ce.instance?.hasModifier(i.context.modifierContext.name)){let r=i.context.modifierContext.name,n=Ce.instance.getModifier(r),s=[];n?.parameters.forEach(a=>{s.push({label:a.name,documentation:a.description})});let o=i.context.modifierContext.activeValueIndex;return o>s.length&&(o=s.length-1),(o<0||s.length==0)&&(o=0),{signatures:[{label:n.name,documentation:{kind:EC.MarkupKind.Markdown,value:n.description},parameters:s,activeParameter:o}],activeParameter:o,activeSignature:0}}return I$}var _a=Y(ot(),1);var xh=class{static getTypedHeader(e,i){let r="";return i.length>0&&(r=i.join(", ")),"**"+e+"** `"+r+"`  \n"}static formatParameterHover(e){let i=this.getTypedHeader(e.name,e.expectsTypes);if(i+=e.description,e.documentationLink!=null&&e.documentationLink.trim().length>0){i+=`  

`;let r="Documentation Reference";e.docLinkName!=null&&e.docLinkName.trim().length>0&&(r=e.docLinkName.trim()),i+="["+r+"]("+e.documentationLink+")"}return{contents:{kind:_a.MarkupKind.Markdown,value:i}}}static formatModifierHover(e){let i=this.getTypedHeader(e.name,e.acceptsType),r="";if(e.parameters.length>0){let s=[];e.parameters.forEach(o=>{s.push("$"+o.name)}),r=s.join(", ")}let n="";if(e.returnsType.length==1)n=e.returnsType[0];else{let s=[];e.returnsType.forEach(o=>{s.push(o)}),n=s.join(", ")}return typeof e.hoverDescription<"u"&&e.hoverDescription!=null?i+=e.hoverDescription+`
`:i+=e.description+`
`,i+="```js\n",i+="function "+e.name+"("+r+"):"+n,i+="\n```",e.docLink!=null&&e.docLink.trim().length>0&&(i+=`  

`,i+="[Documentation Reference]("+e.docLink+")"),{contents:{kind:_a.MarkupKind.Markdown,value:i}}}static formatBlueprintHover(e,i){let r="";return e.displayName!=null&&e.displayName.trim().length>0?r="**"+e.displayName+"** ("+e.name+`)

`:r="**"+e.name+`**

`,e.instructionText!=null&&(r+=e.instructionText+`

`),r+="**Blueprint**: "+e.blueprintName+`

`,r+="**Type**: "+e.type,e.maxItems!=null&&(r+=`

**Max Items**: `+e.maxItems),i!=null&&(r+=`

**From**: `+i.runtimeName()),{contents:{kind:_a.MarkupKind.Markdown,value:r}}}static formatScopeVariableHover(e){if(e.sourceField!=null)return this.formatBlueprintHover(e.sourceField,e.introducedBy);let i="**"+e.name+`**

`;return i+="**Type**: "+e.dataType,e.introducedBy!=null&&(i+=`
**From**: `+e.introducedBy.runtimeName()),{contents:{kind:_a.MarkupKind.Markdown,value:i}}}static getHover(e){if(e==null||e.nodesInScope.length==0)return null;let i=e.nodesInScope[e.nodesInScope.length-1];if(e.context!=null&&e.context.node!=null&&(i=e.context.node),i!=null){if(Ne.instance?.isKnownTag(i.runtimeName())){let o=Ne.instance?.findTag(i.runtimeName());if(e.context!=null&&e.context.isCursorInIdentifier&&typeof o?.resolveDocumentation<"u"){let a=o.resolveDocumentation(e);if(a.trim().length>0)return{contents:{kind:_a.MarkupKind.Markdown,value:a},range:{start:ct(i.startPosition),end:ct(i.endPosition)}}}if(o!=null&&e.context?.parameterContext?.parameter!=null){let a=e.context.parameterContext.parameter,l=Ne.instance.getParameter(o.tagName,a.name);if(l!=null){if(typeof l.providesDocumentation<"u"){let u=l.providesDocumentation(e);if(u.trim().length>0)return{contents:{kind:_a.MarkupKind.Markdown,value:u},range:{start:ct(i.startPosition),end:ct(i.endPosition)}}}return this.formatParameterHover(l)}else if(a.isModifierParameter&&a.modifier!=null)return this.formatModifierHover(a.modifier)}}if(e.context?.parameterContext!=null&&e.context?.parameterContext.parameter?.modifier!=null)return this.formatModifierHover(e.context.parameterContext.parameter.modifier);if(e.context?.modifierContext!=null){let o=Ce.instance?.getModifier(e.context.modifierContext.name);if(o!=null)return this.formatModifierHover(o)}let r=e.position.line+1,n=e.position.character+1,s=e.antlersDocument.cursor.position(r,n);return i.scopeVariable!=null&&s!=null&&s.isWithin(i.startPosition,i.endPosition)?this.formatScopeVariableHover(i.scopeVariable):null}return null}};function RC(t){if(ee.instance?.hasStructure()==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)==!1)return null;let i=Xi(t.position,e);return xh.getHover(i)}var wh=class{static findLocations(e,i){if(e==null||e.nodesInScope.length==0)return null;let r=e.nodesInScope[e.nodesInScope.length-1];if(e.context!=null&&e.context.node!=null&&(r=e.context.node),r!=null&&r.scopeVariable!=null&&r.scopeVariable.introducedBy!=null){let n=[];return n.push({uri:i.textDocument.uri,range:{start:ct(r.scopeVariable.introducedBy.startPosition),end:ct(r.scopeVariable.introducedBy.endPosition)}}),n}return null}};function xC(t){if(ee.instance?.hasStructure()==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)==!1)return null;let i=Xi(t.position,e);return wh.findLocations(i,t)}var DC=Y($t(),1);var kh=new Map,Dh=new Map;function tT(){let t={types:["comment","string","keyword","number","regexp","operator","namespace","type","struct","class","interface","enum","typeParameter","function","method","macro","variable","parameter","property","label","antlersAttribute"],modifiers:["declaration","documentation","readonly","static","abstract","deprecated","modification","async"]};return t.types.forEach((e,i)=>kh.set(e,i)),t.modifiers.forEach((e,i)=>Dh.set(e,i)),{legend:t,async getSemanticTokens(e,i){let r=decodeURIComponent(e.uri),n=new DC.SemanticTokensBuilder,s=[];if(_e.hasDocument(r)){let o=_e.getDocument(r);o.nodes.getAllRuntimeNodes().forEach(h=>{h instanceof Ct&&s.push(h)});let l=new Map;s.forEach(h=>{h.startPosition!=null&&(l.has(h.startPosition.line)||l.set(h.startPosition.line,[]),l.get(h.startPosition.line)?.push(h))});let u=[];Array.from(l.keys()).sort((h,p)=>h-p).forEach(h=>{l.get(h).sort((v,b)=>(v.startPosition?.char??0)-(b.startPosition?.char??0)).forEach(v=>{u.push(v)})}),u.forEach(h=>{h instanceof Ct&&h.startPosition!=null&&h.endPosition!=null&&n.push(h.startPosition.line-1,h.startPosition.char,h.endPosition.char-h.startPosition.char,kC("function"),wC([]))}),o.nodes.getAllParameterNodes().forEach(h=>{h.namePosition!=null&&h.namePosition.start!=null&&h.namePosition.end!=null&&n.push(h.namePosition.start.line-1,h.namePosition.start.char-1,h.namePosition.end.char-h.namePosition.start.char,kC("antlersAttribute"),wC([]))})}return n.build().data}}}function wC(t){let e=0;for(let i=0;i<t.length;i++){let r=t[i];Dh.has(r)?e=e|1<<Dh.get(r):r==="notInLegend"&&(e=e|1<<Dh.size+2)}return e}function kC(t){return kh.has(t)?kh.get(t):t==="notInLegend"?kh.size+2:0}var Fh=Y($t(),1);function FC(t){let e=[];return t.forEach(i=>{if(i.isComment||i.isClosingTag&&!i.isConditionNode||i.isConditionNode&&i.name!=null&&i.isClosingTag&&(i.name.name=="if"||i.name.name=="unless"))return;let r=ua(i),n=[];if(i.children.length>0){let u=i.getStructuralChildren();u.length>0&&(n=FC(u))}let s=Fh.SymbolKind.Field;i.isTagNode&&(s=Fh.SymbolKind.Class);let o=i.getNameContent().trim(),a=i.getContent().trim(),l=o+" "+a;o==a&&(l=a),l=i.sourceContent,i.name!=null&&i.name.name=="partial"&&(s=Fh.SymbolKind.File),e.push({range:r,kind:s,name:l,selectionRange:r,children:n})}),e}function LC(t){let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)){let i=_e.getDocument(e),r=i.nodes.getStructuralNodes();return FC(r)}return[]}var Lh=class{static getDocumentLinks(e){let i=[];if(ee.instance?.hasStructure()){let r=an.instance?.getPartialReferences(e)??[];for(let n=0;n<r.length;n++){let s=r[n];if(s.hasMethodPart()){let o=ee.instance.getStructure().findRelativeView(s.getMethodNameValue());if(o!=null){let a=ct(s.nameEndsOn);i.push({range:{start:ct(s.startPosition),end:{character:a.character-2,line:a.line}},tooltip:"Partial: "+o.displayName,target:decodeURIComponent(o.documentUri)})}}}}return i}};var Jt=Y(require("path"),1),$e=Y(require("fs"),1),go=Y(yn(),1),Q1=require("path");var Bn=Y(require("fs"),1),OC=Y(Py(),1);function v$(t){let e=JSON.parse(Bn.readFileSync(t,{encoding:"utf8"}));return typeof e.extra<"u"&&typeof e.extra.statamic<"u"}var Oh=class{static getInstalledPackages(e,i,r){let n=[];if(Bn.existsSync(e)){let s=JSON.parse(Bn.readFileSync(e,{encoding:"utf8"}));if(typeof s<"u"&&typeof s.packages<"u")for(let o=0;o<s.packages.length;o++){let a=s.packages[o];if(typeof a.name<"u"&&typeof a.version<"u"){let l=r+ln(a.name,"/")+"/composer.json",u=r+ln(a.name,"/")+"/.antlers-ls/",c=!1;if(typeof a.dist<"u"){let p=a.dist;typeof p.type<"u"&&typeof p.url<"u"&&p.type==="path"&&(l=i+ln(a.dist.url,"/")+"/composer.json",u=r+ln(a.name,"/")+"/.antlers-ls/")}let f=null;if(Bn.existsSync(l)&&(c=v$(l),c&&Bn.existsSync(u))){f={fieldtypesFile:null,modifiersFile:null,tagsFile:null};let p=u+"tags.json",y=u+"modifiers.json",v=u+"types.json";Bn.existsSync(p)&&(f.tagsFile=p),Bn.existsSync(y)&&(f.modifiersFile=y),Bn.existsSync(v)&&(f.fieldtypesFile=v)}let d=Rr(a.version,"v"),h=OC.clean(d);h!=null&&(d=h),n.push({name:a.name,version:d,vendorPath:l,isStatamicAddon:c,antlersExtension:f})}}}return n}};var MC=Y(require("path"),1);function Mh(t){let e=MC.resolve(t).replace(/\\/g,"/");return e[0]!=="/"&&(e="/"+e),encodeURI("file://"+e)}function vr(t){return!t.toLowerCase().endsWith(".gitkeep")}var qC=Y(yn(),1),BC=Y(require("fs"),1);function iu(t,e,i,r,n){let s=[],o=[];for(let a of Object.keys(t[i])){let l=t[i][a],u="",c="",f="",d="",h=null,p=null,y=null;if(typeof l.prefix<"u"&&l.prefix!==null&&(d=l.prefix),typeof l.import<"u"&&n.has(l.import)){let v=n.get(l.import);for(let b=0;b<v.length;b++)o.includes(v[b].handle)==!1&&(s.push(Mg(v[b],d)),o.push(v[b].handle));continue}if(typeof l.import<"u"&&(y=l.import),typeof l.field<"u"&&(typeof l.field.type<"u"&&(u=l.field.type),typeof l.field.display<"u"&&(c=l.field.display),typeof l.field.instructions<"u"&&(f=l.field.instructions),typeof l.field.max_items<"u"&&(h=l.field.max_items),u=jI(u,l,h),UI.includes(u)&&typeof l.field.sets<"u")){p=[];for(let v of Object.keys(l.field.sets)){let b=l.field.sets[v],I=iu(b,e,"fields","set:"+v,n),C="";typeof b.display<"u"&&(C=b.display),p.push({handle:v,displayName:C,fields:I})}}s.push({blueprintName:e,name:l.handle,type:u,displayName:c,instructionText:f,maxItems:h,refFieldSetField:null,sets:p,import:y})}return s}function ya(t,e,i,r){let n=[],s={fields:[],handle:"",title:"",filePath:"",type:i};try{let o=BC.readFileSync(t,{encoding:"utf8"}),a=qC.default.parse(o),l=a.sections,u=a.tabs;if(s.filePath=t,s.handle=e,s.title=e,typeof a.title<"u"&&(s.title=a.title),typeof u<"u")for(let c of Object.keys(u)){let f=u[c];if(typeof f.sections<"u")for(let d of Object.keys(f.sections)){let h=f.sections[d];if(typeof h.fields<"u"){let p=iu(h,e,"fields",e,r);p.length>0&&(n=n.concat(p))}}}else if(typeof l<"u")for(let c of Object.keys(l)){let f=l[c];if(typeof f.fields<"u"){let d=iu(f,e,"fields",e,r);d.length>0&&(n=n.concat(d))}}else if(typeof a.fields<"u"){let c=iu(a,e,"fields",e,r);c.length>0&&(n=n.concat(c))}}catch{}return s.fields=n,s}var VC=Y(yn(),1),UC=Y(require("fs"),1);function jC(t,e){let i=[];try{let r=UC.readFileSync(t,{encoding:"utf8"}),n=VC.default.parse(r);if(typeof n>"u"||n===null)return[];if(typeof n.fields<"u")for(let s of Object.keys(n.fields)){let o=n.fields[s],a=o.handle,l="",u="",c="",f=null,d=null,h=null;if(typeof o.import<"u"&&(h=o.import),typeof o.field<"u"&&(typeof o.field.display<"u"&&(l=o.field.display),typeof o.field.type<"u"&&(c=o.field.type),typeof o.field.instructions<"u"&&(u=o.field.instructions),typeof o.field.max_items<"u"&&(f=o.field.max_items),typeof o.field.sets<"u")){d=[];for(let p of Object.keys(o.field.sets)){let y=o.field.sets[p],v=iu(y,e,"fields","set:"+p,new Map),b="";typeof y.display<"u"&&(b=y.display),d.push({handle:p,displayName:b,fields:v})}}i.push({handle:a,instructionText:u,name:l,type:c,maxItems:f,sets:d,import:h})}}catch{}return i}var GC=Y(require("path"),1),HC=Y(require("fs"),1),WC=Y(yn(),1);function YC(t){let e=GC.basename(t).split(".").slice(0,-1).join("."),i=e;try{let r=HC.readFileSync(t,{encoding:"utf8"}),n=WC.default.parse(r);typeof n.title<"u"&&n.title!==null&&(i=n.title)}catch(r){console.error(r)}return{handle:e,title:i}}var KC=Y(require("path"),1),$C=Y(require("fs"),1),zC=Y(yn(),1);function QC(t){let e=KC.basename(t).split(".").slice(0,-1).join("."),i=e,r="";try{let n=$C.readFileSync(t,{encoding:"utf8"}),s=zC.default.parse(n);typeof s<"u"&&s!==null&&(typeof s.title<"u"&&s.title!==null&&(i=s.title),typeof s.disk<"u"&&s.disk!==null&&(r=s.disk))}catch(n){console.error(n)}return{handle:e,title:i,diskName:r}}var XC=Y(require("path"),1),JC=Y(require("fs"),1),ZC=Y(yn(),1);function eR(t){let e=XC.basename(t).split(".").slice(0,-1).join("."),i=JC.readFileSync(t,{encoding:"utf8"}),r="",n="",s="",o=!1,a=[],l=null,u=null,c=[];try{let f=ZC.default.parse(i);if(typeof f<"u"&&f!==null){if(typeof f.title<"u"&&f.title!==null&&(r=f.title),typeof f.inject<"u"&&f.inject!==null){let d=Object.keys(f.inject);for(let h=0;h<d.length;h++){let p=d[h];p=="view_model"?u=f.inject.view_model:c.push(p)}}if(typeof f.template<"u"&&f.template!==null&&(n=f.template),typeof f.layout<"u"&&f.layout!==null&&(s=f.layout),typeof f.taxonomies<"u"&&f.taxonomies!==null&&(a=Object.keys(f.taxonomies)),typeof f.structure<"u"&&f.structure!==null){o=!0;let d=f.structure,h=-1,p=!1;typeof d.root<"u"&&d.root!==null&&(p=d.root),typeof d.max_depth<"u"&&d.max_depth!==null&&(h=d.max_depth),l={root:p,maxDepth:h}}}}catch(f){console.error(f)}return{handle:e,title:r,template:n,layout:s,taxonomies:a,isStructure:o,structure:l,viewModel:u,injectFields:c}}var iT=Y(require("fs"),1),rT=Y(yn(),1);function tR(t){let e=[],i=iT.readFileSync(t,{encoding:"utf8"});try{let r=rT.default.parse(i);if(typeof r>"u"||r===null)return[];let n=Object.keys(r);for(let s=0;s<n.length;s++){let o=n[s],a=r[o],l=o;typeof a<"u"&&a!==null&&typeof a.title<"u"&&a.title!==null&&(l=a.title),e.push({handle:o,title:l})}}catch(r){console.error(r)}return e}function iR(t){let e=[],i=iT.readFileSync(t,{encoding:"utf8"});try{let r=rT.default.parse(i);if(typeof r>"u"||r===null)return[];let n=Object.keys(r);for(let s=0;s<n.length;s++){let o=n[s],a=r[o],l=o;typeof a<"u"&&a!==null&&typeof a.title<"u"&&a.title!==null&&(l=a.title),e.push({handle:o,title:l})}}catch(r){console.error(r)}return e}var rR=Y(require("fs"),1),nR=Y(yn(),1);function sR(t){let e=rR.readFileSync(t,{encoding:"utf8"}),i=[];try{let r=nR.default.parse(e);if(typeof r>"u"||r===null)return[];let n=Object.keys(r);for(let s=0;s<n.length;s++){let o=n[s],a=r[o],l=[],u="";if(typeof a<"u"&&a!==null){let c=Object.keys(a);for(let f=0;f<c.length;f++){let d=c[f],h=Ce.instance?.getModifier(d)??null,p=!1,y="";h!=null?(p=!0,y=Ce.instance?.getProbableReturnType(h,!1)??"",u=y):u="",l.push({hasReference:p,manifestsType:y,name:d,ref:h})}}i.push({name:o,manifestsType:u,modifiers:l})}}catch{}return i}function nT(t,e,i){return{blueprintName:t,displayName:"",import:null,instructionText:"",maxItems:null,name:e,refFieldSetField:null,sets:null,type:i}}var qh=class{constructor(e,i){this.isMocked=!1;this.rootPath="";this.fieldsetsPath="";this.viewsPath="";this.collectionBlueprintsPath="";this.formBlueprintsPath="";this.globalBlueprintsPath="";this.miscBlueprintsPath="";this.taxonomiesBlueprintsPath="";this.globalFiles=[];this.blueprintFiles=[];this.collectionNames=[];this.speculativeFields=new Map;this.customModifierNames=[];this.customTags=[];this.collections=new Map;this.fieldsets=new Map;this.forms=new Map;this.globals=new Map;this.taxonomies=new Map;this.fields=new Map;this.miscFields=new Map;this.blueprintRef=new Map;this.blueprintCollectionRef=new Map;this.templates=[];this.views=[];this.partialCache=[];this.partialViewNames=[];this.taxonomyNames=[];this.hasMacroFile=!1;this.macroFilePath="";this.collectionQueryScopes=[];this.taxonomyTerms=new Map;this.assets=new Map;this.userGroups=new Map;this.userRoles=new Map;this.navigationMenus=new Map;this.blueprints=[];this.viewMap=new Map;this.routeNames=[];this.translationKeys=[];this.uniqueFormNames=[];this.uniquePartialViewNames=[];this.uniqueCollectionNames=[];this.uniqueTaxonomyNames=[];this.uniqueUserGroups=[];this.uniqueUserRoles=[];this.uniqueGlobalSettingNames=[];this.uniqueNavigationNames=[];this.uniqueAssetNames=[];this.publicAssets=[];this.packageMapping=new Map;this.statamicAddonMapping=new Map;this.blueprintFieldReference=[];this.baseResourcePath=i,this.sourceStructure=e,this.rootPath="",this.isMocked=e.isMocked,this.rootPath=e.rootPath,this.fieldsetsPath=e.fieldsetsPath,this.viewsPath=e.viewsPath,this.collectionBlueprintsPath=e.collectionBlueprintsPath,this.formBlueprintsPath=e.formBlueprintsPath,this.globalBlueprintsPath=e.globalBlueprintsPath,this.miscBlueprintsPath=e.miscBlueprintsPath,this.taxonomiesBlueprintsPath=e.taxonomiesBlueprintsPath,this.globalFiles=e.globalFiles,this.blueprintFiles=e.blueprintFiles,this.collectionNames=e.collectionNames,this.blueprints=e.blueprints,this.collections=e.collections,this.assets=e.assets,this.fieldsets=e.fieldsets,this.forms=e.forms,this.globals=e.globals,this.taxonomies=e.taxonomies,this.fields=e.fields,this.miscFields=e.miscFields,this.templates=e.templates,this.views=e.views,this.partialCache=e.partialCache,this.partialViewNames=e.partialViewNames,this.taxonomyNames=e.taxonomyNames,this.macroFilePath=e.macroFilePath,this.hasMacroFile=e.hasMacrosFile,this.collectionQueryScopes=e.collectionScopes,this.taxonomyTerms=e.taxonomyTerms,this.navigationMenus=e.navigationMenus,this.rootPath=e.workingDirectory,this.speculativeFields=e.namedBluePrintFields,this.customModifierNames=e.customModifierNames,this.customTags=e.customTags,this.buildDetails(),typeof this.sourceStructure.restoreProperties<"u"&&this.sourceStructure.restoreProperties!=null&&(this.assets=this.sourceStructure.restoreProperties.assets,this.blueprintCollectionRef=this.sourceStructure.restoreProperties.blueprintCollectionRef,this.blueprintFieldReference=this.sourceStructure.restoreProperties.blueprintFieldReference,this.blueprintFiles=this.sourceStructure.restoreProperties.blueprintFiles,this.blueprintRef=this.sourceStructure.restoreProperties.blueprintRef,this.collectionNames=this.sourceStructure.restoreProperties.collectionNames,this.collectionQueryScopes=this.sourceStructure.restoreProperties.collectionQueryScopes,this.collections=this.sourceStructure.restoreProperties.collections,this.fields=this.sourceStructure.restoreProperties.fields,this.fieldsets=this.sourceStructure.restoreProperties.fieldsets,this.blueprints=this.sourceStructure.restoreProperties.blueprints,this.forms=this.sourceStructure.restoreProperties.forms,this.globalFiles=this.sourceStructure.restoreProperties.globalFiles,this.globals=this.sourceStructure.restoreProperties.globals,this.miscFields=this.sourceStructure.restoreProperties.miscFields,this.navigationMenus=this.sourceStructure.restoreProperties.navigationMenus,this.packageMapping=this.sourceStructure.restoreProperties.packageMapping,this.partialCache=this.sourceStructure.restoreProperties.partialCache,this.partialViewNames=this.sourceStructure.restoreProperties.partialViewNames,this.publicAssets=this.sourceStructure.restoreProperties.publicAssets,this.routeNames=this.sourceStructure.restoreProperties.routeNames,this.statamicAddonMapping=this.sourceStructure.restoreProperties.statamicAddonMapping,this.taxonomies=this.sourceStructure.restoreProperties.taxonomies,this.taxonomyNames=this.sourceStructure.restoreProperties.taxonomyNames,this.taxonomyTerms=this.sourceStructure.restoreProperties.taxonomyTerms,this.templates=this.sourceStructure.restoreProperties.templates,this.translationKeys=this.sourceStructure.restoreProperties.translationKeys,this.uniqueAssetNames=this.sourceStructure.restoreProperties.uniqueAssetNames,this.uniqueCollectionNames=this.sourceStructure.restoreProperties.uniqueCollectionNames,this.uniqueFormNames=this.sourceStructure.restoreProperties.uniqueFormNames,this.uniqueGlobalSettingNames=this.sourceStructure.restoreProperties.uniqueGlobalSettingNames,this.uniqueNavigationNames=this.sourceStructure.restoreProperties.uniqueNavigationNames,this.uniquePartialViewNames=this.sourceStructure.restoreProperties.uniquePartialViewNames,this.uniqueTaxonomyNames=this.sourceStructure.restoreProperties.uniqueTaxonomyNames,this.uniqueUserGroups=this.sourceStructure.restoreProperties.uniqueUserGroups,this.uniqueUserRoles=this.sourceStructure.restoreProperties.uniqueUserRoles,this.userGroups=this.sourceStructure.restoreProperties.userGroups,this.userRoles=this.sourceStructure.restoreProperties.userRoles,this.viewMap=this.sourceStructure.restoreProperties.viewMap,this.views=this.sourceStructure.restoreProperties.views,this.customModifierNames=this.sourceStructure.restoreProperties.customModifierNames,this.customTags=this.sourceStructure.restoreProperties.customTags)}getViewPath(){return this.viewsPath}getProjectRoot(){return this.rootPath}getCustomModifierNames(){return this.customModifierNames}export(){let e=this.sourceStructure;return e.restoreProperties=this.getRestoreRecords(),e}getRestoreRecords(){return{assets:this.assets,baseResourcePath:this.baseResourcePath,blueprintCollectionRef:this.blueprintCollectionRef,blueprintFieldReference:this.blueprintFieldReference,blueprintFiles:this.blueprintFiles,blueprintRef:this.blueprintRef,collectionNames:this.collectionNames,collectionQueryScopes:this.collectionQueryScopes,blueprints:this.blueprints,collections:this.collections,fields:this.fields,fieldsets:this.fieldsets,forms:this.forms,globalFiles:this.globalFiles,globals:this.globals,miscFields:this.miscFields,navigationMenus:this.navigationMenus,packageMapping:this.packageMapping,partialCache:this.partialCache,partialViewNames:this.partialViewNames,publicAssets:this.publicAssets,routeNames:this.routeNames,statamicAddonMapping:this.statamicAddonMapping,taxonomies:this.taxonomies,taxonomyNames:this.taxonomyNames,taxonomyTerms:this.taxonomyTerms,templates:this.templates,translationKeys:this.translationKeys,uniqueAssetNames:this.uniqueAssetNames,uniqueCollectionNames:this.uniqueCollectionNames,uniqueFormNames:this.uniqueFormNames,uniqueGlobalSettingNames:this.uniqueGlobalSettingNames,uniqueNavigationNames:this.uniqueNavigationNames,uniquePartialViewNames:this.uniquePartialViewNames,uniqueTaxonomyNames:this.uniqueTaxonomyNames,uniqueUserGroups:this.uniqueUserGroups,uniqueUserRoles:this.uniqueUserRoles,userGroups:this.userGroups,userRoles:this.userRoles,viewMap:this.viewMap,views:this.views,customModifierNames:this.customModifierNames,customTags:this.customTags}}reloadDetails(){return this}findQueryScopeByHandle(e){for(let i=0;i<this.collectionQueryScopes.length;i++)if(this.collectionQueryScopes[i].handle===e)return this.collectionQueryScopes[i];return null}getCustomAntlersTags(){return this.customTags}findAnyBlueprintField(e){return this.speculativeFields.has(e)?this.speculativeFields.get(e):null}buildImportRefernece(e){if(e.sets!=null)for(let i=0;i<e.sets.length;i++){let r=e.sets[i];for(let n=0;n<r.fields.length;n++){let s=r.fields[n];if(s.import!=null){let o=s.import;if(this.sourceStructure.fieldsets.has(o)){let a=this.sourceStructure.fieldsets.get(o),l=GI(a);for(let u=0;u<l.length;u++)this.buildImportRefernece(l[u]);r.fields.splice(n,1),r.fields=r.fields.concat(l)}}}}}buildDetails(){let e=[],i=[],r=[],n=[];if(typeof this.sourceStructure.assets.forEach<"u"&&this.sourceStructure.assets.forEach((s,o)=>{n.push(o)}),typeof this.sourceStructure.forms.forEach<"u"&&this.sourceStructure.forms.forEach((s,o)=>{s.forEach(a=>{this.blueprintCollectionRef.set(a.blueprintName,o)}),e.push(o),this.blueprintRef.set(o,s)}),typeof this.sourceStructure.globals.forEach<"u"&&this.sourceStructure.globals.forEach((s,o)=>{s.forEach(a=>{this.blueprintCollectionRef.set(a.blueprintName,o)}),i.push(o),this.blueprintRef.set(o,s)}),typeof this.sourceStructure.miscFields.forEach<"u"&&this.sourceStructure.miscFields.forEach((s,o)=>{s.forEach(a=>{this.blueprintCollectionRef.set(a.blueprintName,o)}),this.blueprintRef.set(o,s)}),typeof this.sourceStructure.taxonomies.forEach<"u"&&this.sourceStructure.taxonomies.forEach((s,o)=>{s.forEach(a=>{this.blueprintCollectionRef.set(a.blueprintName,o)}),this.blueprintRef.set(o,s)}),typeof this.sourceStructure.fields.forEach<"u"&&this.sourceStructure.fields.forEach((s,o)=>{s.forEach(a=>{this.blueprintCollectionRef.set(a.blueprintName,o)}),this.blueprintRef.set(o,s)}),typeof this.sourceStructure.navigationMenus.forEach<"u"&&this.sourceStructure.navigationMenus.forEach((s,o)=>{r.push(o)}),typeof this.sourceStructure.views.forEach<"u"&&this.sourceStructure.views.forEach((s,o)=>{this.viewMap.set(s.documentUri,s)}),typeof this.sourceStructure.composerPackages.forEach<"u"&&this.sourceStructure.composerPackages.forEach(s=>{s.isStatamicAddon&&this.statamicAddonMapping.set(s.name,s),this.packageMapping.set(s.name,s)}),this.uniqueAssetNames=[...new Set(n)],this.uniqueNavigationNames=[...new Set(r)],this.uniqueGlobalSettingNames=[...new Set(i)],this.uniqueFormNames=[...new Set(e)],this.uniqueCollectionNames=[...new Set(this.collectionNames)],this.uniquePartialViewNames=[...new Set(this.partialViewNames)],this.uniqueTaxonomyNames=[...new Set(this.taxonomyNames)],Ce.instance?.resetMacros(),this.hasMacroFile){let s=sR(this.macroFilePath);s.length>0&&Ce.instance?.registerMacros(s)}this.uniqueUserRoles=[...new Set(this.sourceStructure.userRoleNames)],this.uniqueUserGroups=[...new Set(this.sourceStructure.userGroupNames)],this.sourceStructure.searchIndexes.length==0&&this.sourceStructure.searchIndexes.push("default");for(let s=0;s<this.sourceStructure.internalFieldReference.length;s++)this.buildImportRefernece(this.sourceStructure.internalFieldReference[s])}getWorkingDirectory(){return this.sourceStructure.workingDirectory}getOAuthProviders(){return[]}getSiteNames(){return[]}getSearchIndexes(){return this.sourceStructure.searchIndexes}getStatamicVersion(){return this.sourceStructure.statamicPackage!=null?this.sourceStructure.statamicPackage.version:""}hasComposerPackage(e){return this.packageMapping.has(e)}hasStatamicAddon(e){return this.statamicAddonMapping.has(e)}getAddonDetails(e){return this.hasStatamicAddon(e)?this.statamicAddonMapping.get(e):null}getComposerPackages(){return this.packageMapping}getComposerPackageDetails(e){return this.hasComposerPackage(e)?this.packageMapping.get(e):null}getPartials(){return this.sourceStructure.partialCache}getBlueprintNames(){let e=[];return this.blueprintRef.forEach((i,r)=>{r.startsWith("*")==!1&&e.includes(r)==!1&&e.push(r)}),e}getBlueprintDetails(e){if(this.blueprintRef.has(e)==!1){let i=[];return i.push(nT(e,"title","text")),i.push(nT(e,"content","markdown")),i.push(nT(e,"slug","slug")),i}return this.blueprintRef.get(e)}hasViewCollectionInjections(e){return this.viewMap.has(e)==!1?!1:this.viewMap.get(e).injectsCollections.length>0}getCollectionNames(){return this.collectionNames}getCollectionNamesForView(e){return this.viewMap.has(e)==!1?[]:this.viewMap.get(e).injectsCollections}getPublicAssetPaths(){return this.publicAssets}getTaxonomyTerms(e){return this.hasTaxonomy(e)?this.taxonomyTerms.get(e):[]}hasTaxonomy(e){return this.taxonomyNames.includes(e)}getCollectionQueryScopes(){return this.collectionQueryScopes}getBlueprintFields(e){let i=[];for(let r=0;r<e.length;r++){let n=e[r],s=this.getCollectionDetails(n);if(s!=null&&s.injectFields!=null)for(let o=0;o<s.injectFields.length;o++)i.push({blueprintName:"*inject",displayName:s.injectFields[o],import:null,instructionText:null,maxItems:null,name:s.injectFields[r],refFieldSetField:null,sets:null,type:"*"});if(this.fields.has(n)){let o=this.fields.get(n);typeof o<"u"&&o!==null&&(i=i.concat(o))}}return i}getBlueprintField(e,i){let r=e;if(this.blueprintCollectionRef.has(r)&&(r=this.blueprintCollectionRef.get(r)),this.fields.has(r)){let n=this.fields.get(r);for(let s=0;s<n.length;s++)if(n[s].name==i)return n[s]}return null}getFields(){return this.fields}getTaxonomyBlueprintFields(e){let i=[];for(let r=0;r<e.length;r++){let n=e[r];if(this.taxonomies.has(n)){let s=this.taxonomies.get(n);typeof s<"u"&&s!==null&&(i=i.concat(s))}}return i}getUserFields(){return this.miscFields.has("user")?this.miscFields.get("user"):[]}getAssetBlueprintFields(e){return this.sourceStructure.assetFields.has(e)?this.sourceStructure.assetFields.get(e):[]}getUniqueTaxonomyNames(){return this.uniqueTaxonomyNames}getUniqueCollectionNames(){return this.uniqueCollectionNames}getUniquePartialNames(){return this.uniquePartialViewNames}getUniqueUserGroupNames(){return this.uniqueUserGroups}getUniqueUserRoleNames(){return this.uniqueUserRoles}getUniqueFormNames(){return this.uniqueFormNames}getAssetPresets(){return[]}getUniqueGlobalsNames(){return this.uniqueGlobalSettingNames}getUniqueNavigationMenuNames(){return this.uniqueNavigationNames}getUniqueAssetNames(){return this.uniqueAssetNames}getCollectionDetails(e){return this.collections.has(e)?this.collections.get(e):null}getFormBlueprintFields(e){if(this.forms.has(e)){let i=this.forms.get(e);return typeof i>"u"||i===null?[]:i}return[]}getRouteNames(){return this.routeNames}getTranslationKeys(){return this.translationKeys}getTemplateNames(){let e=[];return this.views.forEach(i=>{let r=mt(i.relativeDisplayName,"/",".");e.includes(r)==!1&&e.push(r)}),e}getViews(){return this.views}findView(e){if(e.trim()=="")return null;let i=fE(e);for(let r=0;r<this.views.length;r++)if(this.views[r].path==i)return this.views[r];return null}findRelativeView(e){e=mt(e,"\\.","/");for(let i=0;i<this.views.length;i++)if(this.views[i].relativeDisplayName==e)return this.views[i];return e.startsWith("partials/")?null:(e.startsWith("_")&&(e=e.substring(1)),e="partials/"+e,this.findRelativeView(e))}findPartial(e){e=mt(e,"\\.","/");for(let i=0;i<this.views.length;i++)if(this.views[i].isPartial&&this.views[i].relativeDisplayName==e)return this.views[i];return e.startsWith("partials/")?null:(e.startsWith("_")&&(e=e.substring(1)),e="partials/"+e,this.findRelativeView(e))}};function N$(t,e){for(let i=0;i<e.allFields.length;i++)if(e.allFields[i].handle==t)return e.allFields[i];return null}function S$(t,e){let i=[];return e.allFields.forEach(r=>{try{let n=r.handle;t!=null&&(n=t+n),i.push({...r,handle:n,isLinked:!0,linkedFrom:e.handle+"."+r.handle})}catch{}}),i}function m(t,e,i){if(typeof t[e]<"u")try{return t[e]}catch{}return i}var sT=class{constructor(){this.fieldSets=new Map}setFieldSets(e){this.fieldSets=e}_parseArrayFieldType(e){let i=m(e.field,"mode","dynamic"),r=m(e.field,"keys",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{mode:i,keys:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"array"}}_parseAssetContainerFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"asset_container"}}_parseAssetFolderFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"asset_folder"}}_parseAssetsFieldType(e){let i=m(e.field,"mode","list"),r=m(e.field,"container","assets"),n=m(e.field,"folder",null),s=m(e.field,"restrict",null),o=m(e.field,"allow_uploads",!0),a=m(e.field,"show_filename",!0),l=m(e.field,"max_files",null),u=[],c=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(u=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(c=this.parseFields(e.field));let f=m(e.field,"required",!1),d=m(e.field,"type","text"),h=m(e.field,"unless",[]),p=m(e.field,"validate",[]),y=m(e.field,"display",""),v=m(e.field,"__documentation",""),b=m(e.field,"instructions","");return{mode:i,container:r,folder:n,restrict:s,allowUploads:o,showFilename:a,maxFiles:l,required:f,type:d,validate:p,unless:h,display:y,handle:"temp_handle",sets:u,fields:c,isLinked:!1,linkedFrom:"",developerDocumentation:v,instructionText:b,internalIcon:"assets"}}_parseBardFieldType(e){let i=m(e.field,"collapse",null),r=m(e.field,"always_show_set_button",null),n=m(e.field,"previews",!0),s=m(e.field,"buttons",["h2","h3","bold","italic","unorderedlist","orderedlist","removeformat","quote","anchor","image","table"]),o=m(e.field,"container",null),a=m(e.field,"save_html",null),l=m(e.field,"toolbar_mode","fixed"),u=m(e.field,"link_noopener",null),c=m(e.field,"link_noreferrer",null),f=m(e.field,"target_blank",null),d=m(e.field,"link_collections",null),h=m(e.field,"reading_time",null),p=m(e.field,"fullscreen",!0),y=m(e.field,"allow_source",!0),v=m(e.field,"enable_input_rules",!0),b=m(e.field,"enable_paste_rules",!0),I=m(e.field,"antlers",null),C=m(e.field,"remove_empty_nodes","false"),q=[],K=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(q=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(K=this.parseFields(e.field));let J=m(e.field,"required",!1),ve=m(e.field,"type","text"),tt=m(e.field,"unless",[]),Lt=m(e.field,"validate",[]),dt=m(e.field,"display",""),ze=m(e.field,"__documentation",""),Ci=m(e.field,"instructions","");return{collapse:i,alwaysShowSetButton:r,previews:n,buttons:s,container:o,saveHtml:a,toolbarMode:l,linkNoopener:u,linkNoreferrer:c,targetBlank:f,linkCollections:d,readingTime:h,fullscreen:p,allowSource:y,enableInputRules:v,enablePasteRules:b,antlers:I,removeEmptyNodes:C,required:J,type:ve,validate:Lt,unless:tt,display:dt,handle:"temp_handle",sets:q,fields:K,isLinked:!1,linkedFrom:"",developerDocumentation:ze,instructionText:Ci,internalIcon:"bard"}}_parseReplicatorFieldType(e){let i=m(e.field,"collapse",null),r=m(e.field,"previews",!0),n=m(e.field,"max_sets",null),s=[],o=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(s=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(o=this.parseFields(e.field));let a=m(e.field,"required",!1),l=m(e.field,"type","text"),u=m(e.field,"unless",[]),c=m(e.field,"validate",[]),f=m(e.field,"display",""),d=m(e.field,"__documentation",""),h=m(e.field,"instructions","");return{collapse:i,previews:r,maxSets:n,required:a,type:l,validate:c,unless:u,display:f,handle:"temp_handle",sets:s,fields:o,isLinked:!1,linkedFrom:"",developerDocumentation:d,instructionText:h,internalIcon:"replicator"}}_parseBardButtonsSettingFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"bard_buttons_setting"}}_parseButtonGroupFieldType(e){let i=m(e.field,"options",null),r=m(e.field,"default",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{options:i,default:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"button_group"}}_parseCheckboxesFieldType(e){let i=m(e.field,"inline",null),r=m(e.field,"options",null),n=m(e.field,"default",null),s=[],o=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(s=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(o=this.parseFields(e.field));let a=m(e.field,"required",!1),l=m(e.field,"type","text"),u=m(e.field,"unless",[]),c=m(e.field,"validate",[]),f=m(e.field,"display",""),d=m(e.field,"__documentation",""),h=m(e.field,"instructions","");return{inline:i,options:r,default:n,required:a,type:l,validate:c,unless:u,display:f,handle:"temp_handle",sets:s,fields:o,isLinked:!1,linkedFrom:"",developerDocumentation:d,instructionText:h,internalIcon:"checkboxes"}}_parseCodeFieldType(e){let i=m(e.field,"theme","material"),r=m(e.field,"mode","htmlmixed"),n=m(e.field,"mode_selectable",null),s=m(e.field,"indent_type","tabs"),o=m(e.field,"indent_size",4),a=m(e.field,"key_map","default"),l=m(e.field,"line_numbers",!0),u=m(e.field,"line_wrapping",!0),c=[],f=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(c=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(f=this.parseFields(e.field));let d=m(e.field,"required",!1),h=m(e.field,"type","text"),p=m(e.field,"unless",[]),y=m(e.field,"validate",[]),v=m(e.field,"display",""),b=m(e.field,"__documentation",""),I=m(e.field,"instructions","");return{theme:i,mode:r,modeSelectable:n,indentType:s,indentSize:o,keyMap:a,lineNumbers:l,lineWrapping:u,required:d,type:h,validate:y,unless:p,display:v,handle:"temp_handle",sets:c,fields:f,isLinked:!1,linkedFrom:"",developerDocumentation:b,instructionText:I,internalIcon:"code"}}_parseCollectionRoutesFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"collection_routes"}}_parseCollectionTitleFormatsFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"collection_title_formats"}}_parseCollectionsFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"collections"}}_parseColorFieldType(e){let i=m(e.field,"swatches",null),r=m(e.field,"theme","classic"),n=m(e.field,"lock_opacity",null),s=m(e.field,"default_color_mode","HEXA"),o=m(e.field,"color_modes",["HEXA","RGBA","HSLA","HSVA","CMYK"]),a=[],l=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(a=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(l=this.parseFields(e.field));let u=m(e.field,"required",!1),c=m(e.field,"type","text"),f=m(e.field,"unless",[]),d=m(e.field,"validate",[]),h=m(e.field,"display",""),p=m(e.field,"__documentation",""),y=m(e.field,"instructions","");return{swatches:i,theme:r,lockOpacity:n,defaultColorMode:s,colorModes:o,required:u,type:c,validate:d,unless:f,display:h,handle:"temp_handle",sets:a,fields:l,isLinked:!1,linkedFrom:"",developerDocumentation:p,instructionText:y,internalIcon:"color"}}_parseDateFieldType(e){let i=m(e.field,"mode","single"),r=m(e.field,"format",null),n=m(e.field,"earliest_date",null),s=m(e.field,"latest_date",null),o=m(e.field,"time_enabled",null),a=m(e.field,"time_seconds_enabled",null),l=m(e.field,"full_width",null),u=m(e.field,"inline",null),c=m(e.field,"columns",1),f=m(e.field,"rows",1),d=[],h=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(d=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(h=this.parseFields(e.field));let p=m(e.field,"required",!1),y=m(e.field,"type","text"),v=m(e.field,"unless",[]),b=m(e.field,"validate",[]),I=m(e.field,"display",""),C=m(e.field,"__documentation",""),q=m(e.field,"instructions","");return{mode:i,format:r,earliestDate:n,latestDate:s,timeEnabled:o,timeSecondsEnabled:a,fullWidth:l,inline:u,columns:c,rows:f,required:p,type:y,validate:b,unless:v,display:I,handle:"temp_handle",sets:d,fields:h,isLinked:!1,linkedFrom:"",developerDocumentation:C,instructionText:q,internalIcon:"date"}}_parseEntriesFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=m(e.field,"create",!0),s=m(e.field,"collections",null),o=[],a=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(o=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(a=this.parseFields(e.field));let l=m(e.field,"required",!1),u=m(e.field,"type","text"),c=m(e.field,"unless",[]),f=m(e.field,"validate",[]),d=m(e.field,"display",""),h=m(e.field,"__documentation",""),p=m(e.field,"instructions","");return{maxItems:i,mode:r,create:n,collections:s,required:l,type:u,validate:f,unless:c,display:d,handle:"temp_handle",sets:o,fields:a,isLinked:!1,linkedFrom:"",developerDocumentation:h,instructionText:p,internalIcon:"entries"}}_parseFilesFieldType(e){let i=m(e.field,"max_files",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{maxFiles:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"files"}}_parseFloatFieldType(e){let i=m(e.field,"default",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{default:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"float"}}_parseGlobalSetSitesFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"global_set_sites"}}_parseGridFieldType(e){let i=m(e.field,"mode","table"),r=m(e.field,"max_rows",null),n=m(e.field,"min_rows",null),s=m(e.field,"add_row",null),o=m(e.field,"reorderable",!0),a=[],l=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(a=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(l=this.parseFields(e.field));let u=m(e.field,"required",!1),c=m(e.field,"type","text"),f=m(e.field,"unless",[]),d=m(e.field,"validate",[]),h=m(e.field,"display",""),p=m(e.field,"__documentation",""),y=m(e.field,"instructions","");return{mode:i,maxRows:r,minRows:n,addRow:s,reorderable:o,required:u,type:c,validate:d,unless:f,display:h,handle:"temp_handle",sets:a,fields:l,isLinked:!1,linkedFrom:"",developerDocumentation:p,instructionText:y,internalIcon:"grid"}}_parseHiddenFieldType(e){let i=m(e.field,"default",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{default:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"hidden"}}_parseHtmlFieldType(e){let i=m(e.field,"html",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{html:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"html"}}_parseIntegerFieldType(e){let i=m(e.field,"default",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{default:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"integer"}}_parseLinkFieldType(e){let i=m(e.field,"collections",null),r=m(e.field,"container",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{collections:i,container:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"link"}}_parseListFieldType(e){let i=m(e.field,"default",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{default:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"list"}}_parseMarkdownFieldType(e){let i=m(e.field,"container",null),r=m(e.field,"folder",null),n=m(e.field,"restrict",null),s=m(e.field,"automatic_line_breaks",!0),o=m(e.field,"automatic_links",null),a=m(e.field,"escape_markup",null),l=m(e.field,"smartypants",null),u=m(e.field,"parser",null),c=m(e.field,"antlers",null),f=m(e.field,"default",null),d=[],h=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(d=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(h=this.parseFields(e.field));let p=m(e.field,"required",!1),y=m(e.field,"type","text"),v=m(e.field,"unless",[]),b=m(e.field,"validate",[]),I=m(e.field,"display",""),C=m(e.field,"__documentation",""),q=m(e.field,"instructions","");return{container:i,folder:r,restrict:n,automaticLineBreaks:s,automaticLinks:o,escapeMarkup:a,smartypants:l,parser:u,antlers:c,default:f,required:p,type:y,validate:b,unless:v,display:I,handle:"temp_handle",sets:d,fields:h,isLinked:!1,linkedFrom:"",developerDocumentation:C,instructionText:q,internalIcon:"markdown"}}_parseFieldsFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"fields"}}_parseRadioFieldType(e){let i=m(e.field,"options",null),r=m(e.field,"inline",null),n=m(e.field,"cast_booleans",null),s=m(e.field,"default",null),o=[],a=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(o=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(a=this.parseFields(e.field));let l=m(e.field,"required",!1),u=m(e.field,"type","text"),c=m(e.field,"unless",[]),f=m(e.field,"validate",[]),d=m(e.field,"display",""),h=m(e.field,"__documentation",""),p=m(e.field,"instructions","");return{options:i,inline:r,castBooleans:n,default:s,required:l,type:u,validate:f,unless:c,display:d,handle:"temp_handle",sets:o,fields:a,isLinked:!1,linkedFrom:"",developerDocumentation:h,instructionText:p,internalIcon:"radio"}}_parseRangeFieldType(e){let i=m(e.field,"hidden",null),r=m(e.field,"min",null),n=m(e.field,"max",100),s=m(e.field,"step",1),o=m(e.field,"default",null),a=m(e.field,"prepend",null),l=m(e.field,"append",null),u=[],c=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(u=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(c=this.parseFields(e.field));let f=m(e.field,"required",!1),d=m(e.field,"type","text"),h=m(e.field,"unless",[]),p=m(e.field,"validate",[]),y=m(e.field,"display",""),v=m(e.field,"__documentation",""),b=m(e.field,"instructions","");return{hidden:i,min:r,max:n,step:s,default:o,prepend:a,append:l,required:f,type:d,validate:p,unless:h,display:y,handle:"temp_handle",sets:u,fields:c,isLinked:!1,linkedFrom:"",developerDocumentation:v,instructionText:b,internalIcon:"range"}}_parseRevealerFieldType(e){let i=m(e.field,"mode","button"),r=m(e.field,"input_label",""),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{mode:i,inputLabel:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"revealer"}}_parseSectionFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"section"}}_parseSelectFieldType(e){let i=m(e.field,"placeholder",""),r=m(e.field,"options",null),n=m(e.field,"multiple",null),s=m(e.field,"max_items",null),o=m(e.field,"clearable",null),a=m(e.field,"searchable",!0),l=m(e.field,"taggable",null),u=m(e.field,"push_tags",null),c=m(e.field,"cast_booleans",null),f=m(e.field,"default",null),d=[],h=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(d=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(h=this.parseFields(e.field));let p=m(e.field,"required",!1),y=m(e.field,"type","text"),v=m(e.field,"unless",[]),b=m(e.field,"validate",[]),I=m(e.field,"display",""),C=m(e.field,"__documentation",""),q=m(e.field,"instructions","");return{placeholder:i,options:r,multiple:n,maxItems:s,clearable:o,searchable:a,taggable:l,pushTags:u,castBooleans:c,default:f,required:p,type:y,validate:b,unless:v,display:I,handle:"temp_handle",sets:d,fields:h,isLinked:!1,linkedFrom:"",developerDocumentation:C,instructionText:q,internalIcon:"select"}}_parseSetsFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"sets"}}_parseSitesFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"sites"}}_parseStructuresFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"structures"}}_parseSlugFieldType(e){let i=m(e.field,"from","title"),r=m(e.field,"generate",!0),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{from:i,generate:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"slug"}}_parseTextFieldType(e){let i=m(e.field,"placeholder",null),r=m(e.field,"input_type","text"),n=m(e.field,"character_limit",null),s=m(e.field,"prepend",null),o=m(e.field,"append",null),a=m(e.field,"antlers",null),l=m(e.field,"default",null),u=[],c=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(u=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(c=this.parseFields(e.field));let f=m(e.field,"required",!1),d=m(e.field,"type","text"),h=m(e.field,"unless",[]),p=m(e.field,"validate",[]),y=m(e.field,"display",""),v=m(e.field,"__documentation",""),b=m(e.field,"instructions","");return{placeholder:i,inputType:r,characterLimit:n,prepend:s,append:o,antlers:a,default:l,required:f,type:d,validate:p,unless:h,display:y,handle:"temp_handle",sets:u,fields:c,isLinked:!1,linkedFrom:"",developerDocumentation:v,instructionText:b,internalIcon:"text"}}_parseTableFieldType(e){let i=[],r=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(i=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(r=this.parseFields(e.field));let n=m(e.field,"required",!1),s=m(e.field,"type","text"),o=m(e.field,"unless",[]),a=m(e.field,"validate",[]),l=m(e.field,"display",""),u=m(e.field,"__documentation",""),c=m(e.field,"instructions","");return{required:n,type:s,validate:a,unless:o,display:l,handle:"temp_handle",sets:i,fields:r,isLinked:!1,linkedFrom:"",developerDocumentation:u,instructionText:c,internalIcon:"table"}}_parseTaggableFieldType(e){let i=m(e.field,"placeholder",""),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{placeholder:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"tags"}}_parseTermsFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=m(e.field,"create",!0),s=m(e.field,"taxonomies",null),o=[],a=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(o=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(a=this.parseFields(e.field));let l=m(e.field,"required",!1),u=m(e.field,"type","text"),c=m(e.field,"unless",[]),f=m(e.field,"validate",[]),d=m(e.field,"display",""),h=m(e.field,"__documentation",""),p=m(e.field,"instructions","");return{maxItems:i,mode:r,create:n,taxonomies:s,required:l,type:u,validate:f,unless:c,display:d,handle:"temp_handle",sets:o,fields:a,isLinked:!1,linkedFrom:"",developerDocumentation:h,instructionText:p,internalIcon:"taxonomy"}}_parseTaxonomiesFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"taxonomy"}}_parseTemplateFieldType(e){let i=m(e.field,"hide_partials",!0),r=m(e.field,"blueprint",null),n=m(e.field,"folder",null),s=[],o=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(s=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(o=this.parseFields(e.field));let a=m(e.field,"required",!1),l=m(e.field,"type","text"),u=m(e.field,"unless",[]),c=m(e.field,"validate",[]),f=m(e.field,"display",""),d=m(e.field,"__documentation",""),h=m(e.field,"instructions","");return{hidePartials:i,blueprint:r,folder:n,required:a,type:l,validate:c,unless:u,display:f,handle:"temp_handle",sets:s,fields:o,isLinked:!1,linkedFrom:"",developerDocumentation:d,instructionText:h,internalIcon:"template"}}_parseTemplateFolderFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"template_folder"}}_parseTextareaFieldType(e){let i=m(e.field,"placeholder",null),r=m(e.field,"character_limit",null),n=m(e.field,"antlers",null),s=m(e.field,"default",null),o=[],a=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(o=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(a=this.parseFields(e.field));let l=m(e.field,"required",!1),u=m(e.field,"type","text"),c=m(e.field,"unless",[]),f=m(e.field,"validate",[]),d=m(e.field,"display",""),h=m(e.field,"__documentation",""),p=m(e.field,"instructions","");return{placeholder:i,characterLimit:r,antlers:n,default:s,required:l,type:u,validate:f,unless:c,display:d,handle:"temp_handle",sets:o,fields:a,isLinked:!1,linkedFrom:"",developerDocumentation:h,instructionText:p,internalIcon:"textarea"}}_parseTimeFieldType(e){let i=m(e.field,"seconds_enabled",null),r=m(e.field,"default",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{secondsEnabled:i,default:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"time"}}_parseToggleFieldType(e){let i=m(e.field,"inline_label",""),r=m(e.field,"default",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{inlineLabel:i,default:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"toggle"}}_parseUserGroupsFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"user_groups"}}_parseUserRolesFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","default"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"user_roles"}}_parseUsersFieldType(e){let i=m(e.field,"max_items",null),r=m(e.field,"mode","select"),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{maxItems:i,mode:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"users"}}_parseVideoFieldType(e){let i=m(e.field,"default",null),r=m(e.field,"placeholder",null),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{default:i,placeholder:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"video"}}_parseYamlFieldType(e){let i=m(e.field,"default",null),r=[],n=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(r=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(n=this.parseFields(e.field));let s=m(e.field,"required",!1),o=m(e.field,"type","text"),a=m(e.field,"unless",[]),l=m(e.field,"validate",[]),u=m(e.field,"display",""),c=m(e.field,"__documentation",""),f=m(e.field,"instructions","");return{default:i,required:s,type:o,validate:l,unless:a,display:u,handle:"temp_handle",sets:r,fields:n,isLinked:!1,linkedFrom:"",developerDocumentation:c,instructionText:f,internalIcon:"yaml"}}_parseFormFieldType(e){let i=m(e.field,"placeholder",null),r=m(e.field,"max_items",1),n=[],s=[];typeof e.field<"u"&&typeof e.field.sets<"u"&&(n=this.parseSets(e.field.sets)),typeof e.field<"u"&&typeof e.field.fields<"u"&&(s=this.parseFields(e.field));let o=m(e.field,"required",!1),a=m(e.field,"type","text"),l=m(e.field,"unless",[]),u=m(e.field,"validate",[]),c=m(e.field,"display",""),f=m(e.field,"__documentation",""),d=m(e.field,"instructions","");return{placeholder:i,maxItems:r,required:o,type:a,validate:u,unless:l,display:c,handle:"temp_handle",sets:n,fields:s,isLinked:!1,linkedFrom:"",developerDocumentation:f,instructionText:d,internalIcon:"form"}}parse(e){let i=[];if(typeof e.field<"u"&&typeof e.field.type<"u"){let r=e.field.type;r=="array"&&i.push(this._parseArrayFieldType(e)),r=="asset_container"&&i.push(this._parseAssetContainerFieldType(e)),r=="asset_folder"&&i.push(this._parseAssetFolderFieldType(e)),r=="assets"&&i.push(this._parseAssetsFieldType(e)),r=="bard"&&i.push(this._parseBardFieldType(e)),r=="replicator"&&i.push(this._parseReplicatorFieldType(e)),r=="bard_buttons_setting"&&i.push(this._parseBardButtonsSettingFieldType(e)),r=="button_group"&&i.push(this._parseButtonGroupFieldType(e)),r=="checkboxes"&&i.push(this._parseCheckboxesFieldType(e)),r=="code"&&i.push(this._parseCodeFieldType(e)),r=="collection_routes"&&i.push(this._parseCollectionRoutesFieldType(e)),r=="collection_title_formats"&&i.push(this._parseCollectionTitleFormatsFieldType(e)),r=="collections"&&i.push(this._parseCollectionsFieldType(e)),r=="color"&&i.push(this._parseColorFieldType(e)),r=="date"&&i.push(this._parseDateFieldType(e)),r=="entries"&&i.push(this._parseEntriesFieldType(e)),r=="files"&&i.push(this._parseFilesFieldType(e)),r=="float"&&i.push(this._parseFloatFieldType(e)),r=="global_set_sites"&&i.push(this._parseGlobalSetSitesFieldType(e)),r=="grid"&&i.push(this._parseGridFieldType(e)),r=="hidden"&&i.push(this._parseHiddenFieldType(e)),r=="html"&&i.push(this._parseHtmlFieldType(e)),r=="integer"&&i.push(this._parseIntegerFieldType(e)),r=="link"&&i.push(this._parseLinkFieldType(e)),r=="list"&&i.push(this._parseListFieldType(e)),r=="markdown"&&i.push(this._parseMarkdownFieldType(e)),r=="fields"&&i.push(this._parseFieldsFieldType(e)),r=="radio"&&i.push(this._parseRadioFieldType(e)),r=="range"&&i.push(this._parseRangeFieldType(e)),r=="revealer"&&i.push(this._parseRevealerFieldType(e)),r=="section"&&i.push(this._parseSectionFieldType(e)),r=="select"&&i.push(this._parseSelectFieldType(e)),r=="sets"&&i.push(this._parseSetsFieldType(e)),r=="sites"&&i.push(this._parseSitesFieldType(e)),r=="structures"&&i.push(this._parseStructuresFieldType(e)),r=="slug"&&i.push(this._parseSlugFieldType(e)),r=="text"&&i.push(this._parseTextFieldType(e)),r=="table"&&i.push(this._parseTableFieldType(e)),r=="taggable"&&i.push(this._parseTaggableFieldType(e)),r=="terms"&&i.push(this._parseTermsFieldType(e)),r=="taxonomies"&&i.push(this._parseTaxonomiesFieldType(e)),r=="template"&&i.push(this._parseTemplateFieldType(e)),r=="template_folder"&&i.push(this._parseTemplateFolderFieldType(e)),r=="textarea"&&i.push(this._parseTextareaFieldType(e)),r=="time"&&i.push(this._parseTimeFieldType(e)),r=="toggle"&&i.push(this._parseToggleFieldType(e)),r=="user_groups"&&i.push(this._parseUserGroupsFieldType(e)),r=="user_roles"&&i.push(this._parseUserRolesFieldType(e)),r=="users"&&i.push(this._parseUsersFieldType(e)),r=="video"&&i.push(this._parseVideoFieldType(e)),r=="yaml"&&i.push(this._parseYamlFieldType(e)),r=="form"&&i.push(this._parseFormFieldType(e))}return i.length==1?i[0]:null}parseFields(e){let i=[];return typeof e.fields>"u"||e.fields==null||typeof e.fields=="object"&&!Array.isArray(e.fields)||e.fields.forEach(n=>{try{if(typeof n.field=="string"){let o=this.getFieldsetName(n.field);if(o==null||!this.fieldSets.has(o))return;let a=this.fieldSets.get(o),l=N$(this.getFieldName(n.field),a);if(l==null)return;let u=n.handle,c={...l,handle:u,isLinked:!0,linkedFrom:n.field};i.push(c);return}if(typeof n.import=="string"){if(this.fieldSets.has(n.import)==!1)return;let o=this.fieldSets.get(n.import),a=null;if(typeof n.prefix=="string"){let u=n.prefix;u.trim().length>0&&(a=u.trim())}let l=S$(a,o);if(l.length>0)try{l.forEach(u=>{i.push(u)})}catch{}return}let s=this.parse(n);s!=null&&(s.handle=n.handle,i.push(s))}catch{}}),i}getFieldsetName(e){return e.includes(".")==!1?null:e.split(".")[0]}getFieldName(e){return e.includes(".")==!1?e:e.split(".")[1]}parseSets(e){let i=[];return Object.keys(e).forEach(n=>{try{let s=e[n],o=this.parseFields(s);i.push({display:s.display??"",handle:n,fields:o})}catch{}}),i}},Ac=class{constructor(){this.fieldParser=new sT;this.parsedBlueprints=[]}setParsedFieldSet(e){this.fieldParser.setFieldSets(e)}parseTabs(e){let i=[];return Object.keys(e).forEach(n=>{try{let s=e[n];if(typeof s.sections<"u"){let o=s.display??"Tab";this.parseSections(s.sections).forEach(a=>{i.push({...a,display:o,handle:o})})}}catch{}}),i}parseSections(e){let i=[];return Object.keys(e).forEach(n=>{try{let s=e[n],o=s.display??"",a=this.fieldParser.parseFields(s);i.push({display:o,handle:n,fields:a})}catch{}}),i}parseBlueprint(e,i,r,n,s,o){let a=e.title??"",l=[],u=[],c=[];typeof e.tabs<"u"?l=this.parseTabs(e.tabs):typeof e.sections<"u"&&(l=this.parseSections(e.sections)),typeof e.fields<"u"&&(u=this.fieldParser.parseFields(e)),c=u.concat([]),l.forEach(d=>{try{c=c.concat(d.fields)}catch{}});let f={allFields:c,fields:u,handle:i,collection:n,tabs:l,title:a,type:r,fileName:s,contents:o};return this.parsedBlueprints.push(f),f}getBlueprints(){return this.parsedBlueprints}},Bh=class{constructor(){this.blueprintParser=new Ac;this.parsedFieldsets=new Map;this.fieldsetArray=[]}parseFieldset(e,i){let r=this.blueprintParser.parseBlueprint(e,i,"","");if(r==null)return null;let n=[];r.allFields.forEach(o=>{try{n.push({field:o,prefixedHandle:i+"."+o.handle})}catch{}});let s={...r,prefixedFields:n};return this.parsedFieldsets.has(i)==!1&&(this.parsedFieldsets.set(i,s),this.fieldsetArray.push(s)),s}getFieldsets(){return this.parsedFieldsets}getParsedFieldsets(){return this.fieldsetArray}};var oe=class{static getInternalIcon(e){return e=="array"?"array":e=="asset_container"?"asset_container":e=="asset_folder"?"asset_folder":e=="assets"?"assets":e=="bard"?"bard":e=="replicator"?"replicator":e=="bard_buttons_setting"?"bard_buttons_setting":e=="button_group"?"button_group":e=="checkboxes"?"checkboxes":e=="code"?"code":e=="collection_routes"?"collection_routes":e=="collection_title_formats"?"collection_title_formats":e=="collections"?"collections":e=="color"?"color":e=="date"?"date":e=="entries"?"entries":e=="files"?"files":e=="float"?"float":e=="global_set_sites"?"global_set_sites":e=="grid"?"grid":e=="hidden"?"hidden":e=="html"?"html":e=="integer"?"integer":e=="link"?"link":e=="list"?"list":e=="markdown"?"markdown":e=="fields"?"fields":e=="radio"?"radio":e=="range"?"range":e=="revealer"?"revealer":e=="section"?"section":e=="select"?"select":e=="sets"?"sets":e=="sites"?"sites":e=="structures"?"structures":e=="slug"?"slug":e=="text"?"text":e=="table"?"table":e=="taggable"?"tags":e=="terms"||e=="taxonomies"?"taxonomy":e=="template"?"template":e=="template_folder"?"template_folder":e=="textarea"?"textarea":e=="time"?"time":e=="toggle"?"toggle":e=="user_groups"?"user_groups":e=="user_roles"?"user_roles":e=="users"?"users":e=="video"?"video":e=="yaml"?"yaml":e=="form"?"form":""}static baseField(e,i,r){return{validate:[],unless:[],type:i,sets:[],required:!0,linkedFrom:"",isLinked:!1,internalIcon:oe.getInternalIcon(i),handle:e,fields:[],display:"",developerDocumentation:"",instructionText:r}}static textField(e,i){return{...this.baseField(e,"text",i)}}static slugField(e,i){return{...this.baseField(e,"slug",i),from:"",generate:!0}}static injectedTextField(e,i){return{name:e,type:"string",field:this.textField(e,i),description:i}}static boolField(e,i){return{...this.baseField(e,"toggle",i),inlineLabel:"",default:!1}}static injectedBoolField(e,i){return{name:e,type:"boolean",field:this.boolField(e,i),description:i}}static integerField(e,i){return{...this.baseField(e,"integer",i),default:""}}static injectedIntegerField(e,i){return{name:e,type:"integer",field:this.integerField(e,i),description:i}}static floatField(e,i){return{...this.baseField(e,"float",i),default:""}}static injectedFloatField(e,i){return{name:e,type:"float",field:this.floatField(e,i),description:i}}static arrayField(e,i){return{...this.baseField(e,"array",i),mode:"dynamic",keys:[]}}static injectedArrayField(e,i){return{name:e,type:"array",field:this.arrayField(e,i),description:i}}static dateField(e,i){return{...this.baseField(e,"date",i),mode:"",format:null,earliestDate:null,latestDate:null,timeEnabled:null,timeSecondsEnabled:null,fullWidth:null,inline:null,columns:0,rows:0}}static injectedDateField(e,i){return{name:e,type:"date",field:this.dateField(e,i),description:i}}};var Ec=class{static ensureCollectionFields(e){this.ensureFieldPrepended(oe.textField("title","The entry's title"),e),this.ensureField(oe.slugField("slug","The entry's slug"),e),this.ensureField(oe.dateField("date","The date the entry was created"),e)}static ensureNavigationFields(e){this.ensureField(oe.textField("title","The navigation's title"),e),this.ensureField(oe.textField("url","The navigation's URL"),e)}static ensureFieldPrepended(e,i){this.hasField(e.handle,i)||(i.allFields.unshift(e),i.tabs.length>0&&i.tabs[0].fields.unshift(e))}static ensureField(e,i){this.hasField(e.handle,i)||(i.allFields.push(e),i.tabs.length>0&&i.tabs[0].fields.push(e))}static hasField(e,i){for(let r=0;r<i.allFields.length;r++)if(i.allFields[r].handle==e)return!0;return!1}};function oR(t){return typeof t.leadingComments>"u"||t.leadingComments.length===0||t.leadingComments[0].kind!=="commentblock"?"":P$(t.leadingComments[0].value)}function P$(t){let e=t.split(`
`),i="";for(let r=1;r<e.length;r++){let n=e[r].trim();if(n.startsWith("*")){let s=n.slice(1).trim();if(s===""||s.startsWith("@class"))break;i+=s+" "}else break}return i.trim()}var k1=Y(w1(),1),nu=class{static parsePhp(e){let i,r,n="",o=new k1.default.Engine({parser:{extractDoc:!0,php7:!0},ast:{withPositions:!0}}).parseCode(e,""),a=[];return o.children.forEach(l=>{l.kind==="namespace"&&l.children.forEach(u=>{u.kind==="class"&&(i=u.name.name,n=oR(u),u.body.forEach(c=>{c.kind==="propertystatement"&&c.isStatic?c.properties.length>0&&c.properties[0].name?.name==="handle"&&(r=c.properties[0].value?.value):c.kind==="method"&&c.visibility==="public"&&!c.isStatic&&a.push(c.name.name)}))})}),typeof r>"u"&&typeof i<"u"&&(r=j.snakeCase(i)),{className:i,handle:r,description:n,methodNames:a}}};var hT=Y($t(),1);var t9={packageName:"aerni/social-links",providesTags:["social","social:profile","social:facebook:profile","social:github:profile","social:instagram:profile","social:linkedin:profile","social:mail:profile","social:pinterest:profile","social:telegram:profile","social:twitter:profile","social:github:profile","social:whatsapp:profile","social:xing:profile","social:youtube:profile"],providesModifiers:[]},D1=t9;var i9={packageName:"aerni/advanced-seo",providesTags:["seo","seo:description","seo:site_name","seo:canonical_entry:title","seo:head","seo:body","seo:dump"],providesModifiers:[]},F1=i9;var r9={packageName:"aerni/livewire-forms",providesTags:["livewire","livewire:styles","livewire:scripts","livewire:form"],providesModifiers:[]},L1=r9;var n9={packageName:"anakadote/statamic-recaptcha",providesTags:["recaptcha","recaptcha:terms","recaptcha:checkbox"],providesModifiers:[]},O1=n9;var s9={packageName:"aryehraber/statamic-captcha",providesTags:["captcha","captcha:head","captcha:disclaimer","captcha:sitekey"],providesModifiers:[]},M1=s9;var o9={packageName:"cnj/seotamic",providesTags:["seotamic","seotamic:meta:title","seotamic:meta:description","seotamic:meta:canonical","seotamic:meta:robots","seotamic:og","seotamic:twitter","seotamic:social:title","seotamic:social:description","seotamic:social:image","seotamic:social:site_name"],providesModifiers:[]},q1=o9;var a9={packageName:"ddm-studio/cookie-byte",providesTags:["cookie_modal","cookie_cover","cookie_consent"],providesModifiers:[]},B1=a9;var l9={packageName:"doublethreedigital/simple-commerce",providesTags:["sc","sc:cart","sc:cart:items","sc:cart:has","sc:cart:total","sc:cart:grand_total","sc:cart:items_total","sc:cart:shipping_total","sc:cart:tax_total","sc:cart:tax_total_split","sc:cart:coupon_total","sc:cart:itemsTotalWithTax","sc:cart:raw_grand_total","sc:cart:free","sc:cart:addItem","sc:cart:updateItem","sc:cart:removeItem","sc:cart:update","sc:cart:empty","sc:cart:alreadyExists"],providesModifiers:[]},V1=l9;var u9={packageName:"jonassiewertsen/statamic-livewire",providesTags:["livewire","livewire:styles","livewire:scripts"],providesModifiers:[]},U1=u9;var c9={packageName:"kolaente/statamic-snippet",providesTags:[],providesModifiers:["snippet"]},j1=c9;var f9={packageName:"octoper/statamic-inline-assets",providesTags:["inline_assets","inline_assets:css","inline_assets:js"],providesModifiers:[]},G1=f9;var d9={packageName:"parfaitementweb/statamic-fast-seo",providesTags:["fast-seo","fast-seo:title","fast-seo:description","fast-seo:name","fast-seo:og_image","fast-seo:twitter_handle","fast-seo:twitter_image","fast-seo:robots","fast-seo:locale","fast-seo:locales","fast-seo:canonical","fast-seo:extra"],providesModifiers:[]},H1=d9;var p9={packageName:"statamic/seo-pro",providesTags:["seo_pro","seo_pro:meta","seo_pro:meta_data","seo_pro:dump_meta_data"],providesModifiers:[]},W1=p9;var h9={packageName:"stillat/antlers-layouts",providesTags:["layout","layout:share"],providesModifiers:[]},Y1=h9;var m9={packageName:"visuellverstehen/statamic-classify",providesTags:["classify"],providesModifiers:["classify"]},K1=m9;var g9={packageName:"withcandour/aardvark-seo",providesTags:["aardvark-seo","aardvark-seo:head","aardvark-seo:body","aardvark-seo:footer"],providesModifiers:[]},$1=g9;var z1=[W1,Y1,M1,U1,K1,$1,B1,j1,G1,q1,D1,V1,H1,O1,F1,L1];var mo=class{constructor(){this.knownPackages=new Map}loadPackages(){this.knownPackages.entries.length>0||z1.forEach(e=>{this.knownPackages.set(e.packageName,e)})}hasPackage(e){return this.knownPackages.has(e)}getPackage(e){return this.knownPackages.get(e)}};mo.instance=null;(typeof mo.instance>"u"||mo.instance==null)&&(mo.instance=new mo);var Gh=mo;function _9(t){let e=fs(t).split("/"),i=[],r=null;for(let n=0;n<e.length;n++){if(n==0){r=e[n],i.push(e[n]);continue}if(e[n]=="views"&&r=="resources")break;i.push(e[n]),r=e[n]}return i.join("/")}function y9(t){return t.endsWith("/")==!1&&(t=t+"/"),t+"../"}function T9(t){return t+"composer.lock"}function gT(t){return t+"app/"}function b9(t){return gT(t)+"Scopes/"}function I9(t){return gT(t)+"Modifiers/"}function v9(t){return gT(t)+"Tags/"}function N9(t){return t+"vendor/"}function S9(t){return t+"/blueprints/collections/"}function P9(t){return t+"/blueprints/taxonomies/"}function A9(t){return t+"/blueprints/assets/"}function E9(t){return t+"/blueprints/globals/"}function C9(t){return t+"/blueprints/forms/"}function R9(t){return t+"/blueprints/"}function x9(t){return t+"/macros.yaml"}function w9(t){return t+"/views/"}function k9(t){return t+"/users/"}function D9(t){return t+"/forms/"}function F9(t){return t+"/fieldsets"}function kc(t){return t+"/../content/"}function L9(t){return kc(t)+"assets/"}function O9(t){return kc(t)+"collections/"}function M9(t){return kc(t)+"taxonomies/"}function q9(t){return kc(t)+"navigation/"}function _o(t,e,i){if(!$e.existsSync(t))return[];if(!$e.statSync(t).isDirectory())return[];let n=i||[],s=$e.readdirSync(t);for(let o=0;o<s.length;o++){let a=Jt.join(t,s[o]);$e.lstatSync(a).isDirectory()?n=n.concat(_o(a,e,i)):a.indexOf(e)>=0&&n.push(a)}return[...new Set(n)]}function gs(t,e){if(!$e.existsSync(t))return[];if(!$e.statSync(t).isDirectory())return[];let r=[],n=$e.readdirSync(t);for(let s=0;s<n.length;s++){let o=Jt.join(t,n[s]);$e.lstatSync(o).isDirectory()==!1&&r.push(o)}return[...new Set(r)]}function B9(t){let e=_o(t,".html",[]),i=t.length,r=[];for(let n=0;n<e.length;n++){let s=e[n],o=s.substr(i),a=fs(Jt.dirname(o)),l=Jt.basename(o),u=l,c=!1,f=!1,d=!1,h="";l.startsWith("_")&&(c=!0,u=u.substr(1)),l.endsWith(".antlers.html")?(f=!0,u=u.substr(0,u.length-13)):l.endsWith(".blade.php")?(f=!1,d=!0):(f=!1,d=!1),a!="."?h=a+"/"+u:h=u,r.push({displayName:u,fileName:l,documentUri:Mh(s),originalDocumentUri:Mh(s),isAntlers:f,isBlade:d,isPartial:c,path:fs(s),relativeDisplayName:h,relativeFileName:l,relativePath:o,injectsCollections:[],injectsParameters:[],templateName:mt(h,"/","."),varReferenceNames:new Map,document:null})}return r}function _T(t){let e=_9(t),i=S9(e),r=w9(e),n=D9(e),s=C9(e),o=F9(e),a=P9(e),l=E9(e),u=R9(e),c=kc(e),f=q9(e),d=M9(e),h=k9(e),p=O9(e),y=L9(e),v=A9(e),b=_o(i,".yaml",[]),I=B9(r),C=x9(e),q=y9(e),K=T9(q),J=N9(q),ve=b9(q),tt=I9(q),Lt=v9(q),dt=!1,ze=null,Ci=Oh.getInstalledPackages(K,q,J);for(let O=0;O<Ci.length;O++)if(Ci[O].name=="statamic/cms"){ze=Ci[O];break}Gh.instance?.loadPackages();let Nr=[],Sr=new Map,ys=new Map,Ts=new Map,jn=new Map,Io=new Map,ir=new Map,vo=[],va=new Map,Gn=[],rr=[],Na=[],Sa=[],Pa=[],Aa=new Map,Hn=new Map,Ea=new Map,Ca=[],Ra=new Map,Wn=[],xa=new Map,bs=new Map,wa=new Map,zr=new Map,Qr=[],Yn=[];C.trim().length>0&&(dt=$e.existsSync(C));for(let O=0;O<I.length;O++)I[O].isPartial&&(Na.push(I[O]),Sa.push(I[O].relativeDisplayName));if(Ci.forEach(O=>{if(Gh.instance?.hasPackage(O.name)){let X=Gh.instance?.getPackage(O.name);X.providesModifiers.forEach(re=>{Qr.push(re)}),X.providesTags.forEach(re=>{let Ee=X.providesTags.filter(Jr=>Jr.startsWith(`${re}:`)),Xe=re.length+1,mi=[];Ee.forEach(Jr=>{let fu=Jr.substr(Xe).trim();fu.length>0&&mi.push(fu)});let ka=mi.filter(Jr=>Jr!="index"&&Jr!="wildcard");Yn.push({tagName:re,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!0,injectParentScope:!0,parameters:[],hideFromCompletions:!1,introducedIn:null,resolveCompletionItems:Jr=>{if(Jr.leftWord==re||Jr.leftWord==`/${re}`){let fu=[];return ka.forEach(hM=>{fu.push({label:hM,kind:hT.CompletionItemKind.Text,sortText:"1"})}),{items:fu,isExclusiveResult:!0,analyzeDefaults:!1}}return{items:[],isExclusiveResult:!1,analyzeDefaults:!0}}}),ka.forEach(Jr=>{Yn.push({tagName:`${re}:${Jr}`,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!0,injectParentScope:!0,parameters:[],hideFromCompletions:!1,introducedIn:null})})})}}),$e.existsSync(Lt)){let O=_o(Lt,".php",[]);for(let X=0;X<O.length;X++)try{let re=nu.parsePhp($e.readFileSync(O[X],{encoding:"utf8"}));if(typeof re.className<"u"&&typeof re.handle<"u"){let Ee=re.methodNames.filter(Xe=>Xe!="index"&&Xe!="wildcard").map(Xe=>j.snakeCase(Xe));Yn.push({tagName:re.handle,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!0,injectParentScope:!0,parameters:[],hideFromCompletions:!1,introducedIn:null,resolveCompletionItems:Xe=>{if(Xe.leftWord==re.handle||Xe.leftWord==`/${re.handle}`){let mi=[];return Ee.forEach(ka=>{mi.push({label:ka,kind:hT.CompletionItemKind.Text,sortText:"1"})}),{items:mi,isExclusiveResult:!0,analyzeDefaults:!1}}return{items:[],isExclusiveResult:!1,analyzeDefaults:!0}}}),Ee.forEach(Xe=>{Yn.push({tagName:`${re.handle}:${Xe}`,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!0,injectParentScope:!0,parameters:[],hideFromCompletions:!1,introducedIn:null})})}}catch{}}if($e.existsSync(tt)){let O=_o(tt,".php",[]);for(let X=0;X<O.length;X++)try{let re=nu.parsePhp($e.readFileSync(O[X],{encoding:"utf8"}));typeof re.className<"u"&&typeof re.handle<"u"&&Qr.push(re.handle)}catch{}}if($e.existsSync(ve)){let O=_o(ve,".php",[]);for(let X=0;X<O.length;X++)try{let re=nu.parsePhp($e.readFileSync(O[X],{encoding:"utf8"}));typeof re.className<"u"&&typeof re.handle<"u"&&Pa.push({description:re.description,handle:re.handle,name:re.className,path:Mh(O[X])})}catch{}}let No=gs(y,".yaml");for(let O=0;O<No.length;O++)if(vr(No[O])){let X=QC(No[O]);wa.set(X.handle,X)}let Xr=gs(p,".yaml"),uu=[];for(let O=0;O<Xr.length;O++)if(vr(Xr[O])){let X=eR(Xr[O]);Gn.push(X.handle),bs.set(X.handle,X)}let So=h+"roles.yaml",Is=h+"groups.yaml";if($e.existsSync(So)){let O=tR(So);for(let X=0;X<O.length;X++)Ra.set(O[X].handle,O[X]),Wn.push(O[X].handle)}if($e.existsSync(Is)){let O=iR(Is);for(let X=0;X<O.length;X++)Ea.set(O[X].handle,O[X]),Ca.push(O[X].handle)}let vs=new Bh,Ui=_o(o,".yaml",[]),R=[];for(let O=0;O<Ui.length;O++)if(vr(Ui[O])){let X=Jt.basename(Ui[O]).split(".").slice(0,-1).join("."),re=$e.readFileSync(Ui[O]).toString();try{vs.parseFieldset(go.default.parse(re),X)}catch{}if(X!=null&&X.trim().length>0){let Ee=jC(Ui[O],X);Sr.set(X,Ee)}}let P=new Ac;P.setParsedFieldSet(vs.getFieldsets());let _=_o(a,".yaml",[]);for(let O=0;O<_.length;O++)if(vr(_[O])){let X=Jt.basename(_[O]).split(".").slice(0,-1).join("."),re=Jt.basename(Jt.dirname(_[O]));if(X!=null&&X.trim().length>0){ys.set(X,re);let Ee=ya(_[O],X,"taxonomy",Sr);Nr.push(Ee),Io.set(X,Ee.fields),R=R.concat(Ee.fields),rr.includes(X)==!1&&rr.push(X)}}if(rr.length>0){for(let O=0;O<rr.length;O++)if(ys.has(rr[O])){let X=ys.get(rr[O]);if(typeof X<"u"&&X!==null){let re=d+X+"/";if($e.existsSync(re)){let Ee=gs(re,".yaml"),Xe=[];for(let mi=0;mi<Ee.length;mi++)if(vr(Ee[mi])){let ka=Jt.basename(Ee[mi]).split(".").slice(0,-1).join(".");Xe.push(ka)}Aa.set(rr[O],Xe)}}}}let E=gs(u,".yaml");for(let O=0;O<E.length;O++)if(vr(E[O])){let X=$e.readFileSync(E[O]).toString(),re=Jt.basename(E[O]).split(".").slice(0,-1).join(".");try{P.parseBlueprint(go.default.parse(X),re,"misc",re,E[O])}catch{}if(re!=null&&re.trim().length>0){let Ee=ya(E[O],re,"misc",Sr);Nr.push(Ee),ir.set(re,Ee.fields),R=R.concat(Ee.fields)}}let w=[];for(let O=0;O<b.length;O++)if(vr(b[O])){let X=$e.readFileSync(b[O]).toString(),re=Jt.basename(b[O]).split(".").slice(0,-1).join("."),Ee=ya(b[O],re,"collection",Sr),Xe=fs((0,Q1.dirname)(b[O])).split("/").pop();w.includes(Xe)||w.push(Xe);try{P.parseBlueprint(go.default.parse(X),re,"collection",Xe,b[O])}catch{}Nr.push(Ee),R=R.concat(Ee.fields),Xe!=null&&Xe.trim().length>0&&(re=Xe,Gn.includes(Xe)==!1&&Gn.push(Xe)),Ee.fields.forEach(mi=>{Hn.has(mi.name)||Hn.set(mi.name,mi)}),va.set(re,Ee.fields)}let N=[],g=[];Gn.forEach(O=>{w.includes(O)||(N.push(O),g.push({tabs:[],fields:[],allFields:[],collection:O,type:"collection",handle:O,title:O}))}),N.forEach(O=>{bs.set(O,{handle:O,injectFields:[],isStructure:!1,title:O,layout:"",viewModel:null,template:"",taxonomies:[],structure:null})});let k=gs(f,".yaml");for(let O=0;O<k.length;O++)if(vr(k[O])){let X=$e.readFileSync(k[O]).toString(),re=YC(k[O]),Ee=Jt.basename(k[O]).split(".").slice(0,-1).join(".");try{P.parseBlueprint(go.default.parse(X),Ee,"nav",Ee,k[O])}catch{}xa.set(re.handle,re)}let M=gs(l,".yaml");for(let O=0;O<M.length;O++)if(vr(M[O])){let X=$e.readFileSync(M[O]).toString(),re=Jt.basename(M[O]).split(".").slice(0,-1).join("."),Ee=ya(M[O],re,"global",Sr);try{P.parseBlueprint(go.default.parse(X),re,"global",re,M[O])}catch{}Nr.push(Ee),R=R.concat(Ee.fields),jn.set(re,Ee.fields)}if($e.existsSync(v)){let O=gs(v,".yaml");for(let X=0;X<O.length;X++)if(vr(O[X])){let re=$e.readFileSync(O[X]).toString(),Ee=Jt.basename(O[X]).split(".").slice(0,-1).join("."),Xe=ya(O[X],Ee,"asset",Sr);try{P.parseBlueprint(go.default.parse(re),Ee,"asset",Ee,O[X])}catch{}Nr.push(Xe),R=R.concat(Xe.fields),zr.set(Ee,Xe.fields)}}let Z=gs(s,".yaml"),se=gs(n,".yaml"),ge=[];for(let O=0;O<se.length;O++)if(vr(se[O])){let X=Jt.basename(se[O]).split(".").slice(0,-1).join(".");ge.includes(X)||ge.push(X)}for(let O=0;O<Z.length;O++)if(vr(Z[O])){let X=$e.readFileSync(Z[O]).toString(),re=Jt.basename(Z[O]).split(".").slice(0,-1).join("."),Ee=ya(Z[O],re,"form",Sr);try{P.parseBlueprint(go.default.parse(X),re,"form",re,Z[O])}catch{}Nr.push(Ee),R=R.concat(Ee.fields),Ts.set(re,Ee.fields)}for(let O=0;O<ge.length;O++)Ts.has(ge[O])||Ts.set(ge[O],[]);let Qe=new Map;for(let O=0;O<I.length;O++)Qe.set(I[O].relativeDisplayName,I[O]);bs.forEach((O,X)=>{O.template.trim().length>0&&Qe.has(O.template)&&Qe.get(O.template).injectsCollections.push(O.handle)});let Pt=[],At=g,ke=[],In=[],Po=[],cu=[],wT=[];return P.getBlueprints().forEach(O=>{O.type=="misc"?cu.push(O):O.type=="collection"?At.push(O):O.type=="nav"?In.push(O):O.type=="global"?wT.push(O):O.type=="asset"?Pt.push(O):O.type=="form"&&Po.push(O)}),At.forEach(O=>{Ec.ensureCollectionFields(O)}),In.forEach(O=>{Ec.ensureNavigationFields(O)}),vs.getParsedFieldsets(),new mT({composerPackages:Ci,statamicPackage:ze,isMocked:!1,workingDirectory:q,taxonomyPluralizedMapping:ys,collectionScopes:Pa,blueprintFiles:b,collectionBlueprintsPath:i,collections:bs,rootPath:e,fields:va,fieldsetsPath:o,fieldsets:Sr,collectionNames:Gn,formBlueprintsPath:n,taxonomiesBlueprintsPath:a,globalBlueprintsPath:l,miscBlueprintsPath:u,viewsPath:r,views:I,globalFiles:[],forms:Ts,globals:jn,miscFields:ir,taxonomies:Io,taxonomyNames:rr,templates:vo,partialCache:Na,partialViewNames:Sa,macroFilePath:C,hasMacrosFile:dt,contentDirectory:c,taxonomyContentDirectory:d,taxonomyTerms:Aa,blueprints:Nr,assets:wa,assetFields:zr,oauthProviders:[],navigationMenus:xa,userPermissionsPath:h,userGroupNames:Ca,userGroups:Ea,userRoleNames:Wn,userRoles:Ra,searchIndexes:[],internalFieldReference:R,restoreProperties:null,namedBluePrintFields:Hn,customModifierNames:Qr,customTags:Yn},t)}var mT=class extends qh{reloadDetails(){return _T(this.baseResourcePath)}};var Hh=class{static getReferences(e){if(e==null)return null;if(e.context?.feature instanceof ie){let i=e.context.feature;if(i.scopeVariable==null||i.scopeVariable.sourceField==null)return null;let r=new Map;_e.getDocuments().forEach(s=>{let o=s.getAllAntlersNodes(),a=[];o.forEach(l=>{l.runtimeNodes.forEach(u=>{(u.scopeVariable!=null&&u.scopeVariable==i.scopeVariable||u.scopeVariable!=null&&u.scopeVariable.sourceName==i.scopeVariable?.sourceName&&u instanceof ie&&u.name==i.name)&&a.push(u)})}),r.set(s.documentUri,a)});let n=[];return r.forEach((s,o)=>{s.forEach(a=>{n.push({uri:o,range:ua(a)})})}),n}return[]}};function J1(t){if(ee.instance?.hasStructure()==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(_e.hasDocument(e)==!1)return null;let i=Xi(t.position,e);return Hh.getReferences(i)}function Z1(t){let e=decodeURIComponent(t.textDocument.uri),i=Xi(t.position,e);if(i==null)return null;if(i.context?.feature instanceof ie){let r=i.context.feature,n=i.antlersDocument.getAllAntlersNodes();if(r.scopeVariable==null||r.scopeVariable.sourceField==null)return null;let s=[],o=[];return n.forEach(a=>{a.runtimeNodes.forEach(l=>{(l.scopeVariable!=null&&l.scopeVariable==r.scopeVariable||l.scopeVariable!=null&&l.scopeVariable.sourceName==r.scopeVariable?.sourceName&&l instanceof ie&&l.name==r.name)&&s.push(l)})}),s.length>0&&s.push(r),s.forEach(a=>{o.push({range:ua(a)})}),o}return[]}var yT=class{constructor(){this._nodes=[];this._extractedAntlers=new Map;this._buffer="";this._shouldFormat=!0}load(e){let i=new ut;return i.getDocumentParser().withChildDocuments(!0),i.loadString(e),this._nodes=i.getAllNodes(),this._buffer=i.getParsedContent(),(!i.isValid()||!i.isFormattingEnabled())&&(this._shouldFormat=!1),this._nodes.forEach(r=>{if(r instanceof B){let n=r.getNodeDocumentText(),s="ANTLERS:"+r.refId;this._buffer=this._buffer.replace(n,s),this._extractedAntlers.set(s,n)}}),this}getShouldFormat(){return this._shouldFormat}getBuffer(){return this._buffer}getMapping(){return this._extractedAntlers}transform(e){return this._buffer=e(this._buffer),this}getTemplate(){let e=this._buffer;return this._extractedAntlers.forEach((i,r)=>{e=e.replace(r,i)}),e}},eM=yT;var fM=Y(iM(),1);var he=class{static getDocLink(e){return e=e.toLowerCase(),e=="array"?"https://statamic.dev/fieldtypes/array":e=="assets"?"https://statamic.dev/fieldtypes/assets":e=="bard"?"https://statamic.dev/fieldtypes/bard":e=="button_group"?"https://statamic.dev/fieldtypes/button_group":e=="checkboxes"?"https://statamic.dev/fieldtypes/checkboxes":e=="code"?"https://statamic.dev/fieldtypes/code":e=="collections"?"https://statamic.dev/fieldtypes/collections":e=="color"?"https://statamic.dev/fieldtypes/color":e=="date"?"https://statamic.dev/fieldtypes/date":e=="entries"?"https://statamic.dev/fieldtypes/entries":e=="form"?"https://statamic.dev/fieldtypes/form":e=="grid"?"https://statamic.dev/fieldtypes/grid":e=="integer"?"https://statamic.dev/fieldtypes/integer":e=="link"?"https://statamic.dev/fieldtypes/link":e=="list"?"https://statamic.dev/fieldtypes/list":e=="markdown"?"https://statamic.dev/fieldtypes/markdown":e=="radio"?"https://statamic.dev/fieldtypes/radio":e=="range"?"https://statamic.dev/fieldtypes/range":e=="replicator"?"https://statamic.dev/fieldtypes/replicator":e=="select"?"https://statamic.dev/fieldtypes/select":e=="sites"?"https://statamic.dev/fieldtypes/sites":e=="structures"?"https://statamic.dev/fieldtypes/structures":e=="table"?"https://statamic.dev/fieldtypes/table":e=="taggable"?"https://statamic.dev/fieldtypes/taggable":e=="taxonomies"?"https://statamic.dev/fieldtypes/taxonomies":e=="template"?"https://statamic.dev/fieldtypes/template":e=="terms"?"https://statamic.dev/fieldtypes/terms":e=="text"?"https://statamic.dev/fieldtypes/text":e=="textarea"?"https://statamic.dev/fieldtypes/textarea":e=="time"?"https://statamic.dev/fieldtypes/time":e=="toggle"?"https://statamic.dev/fieldtypes/toggle":e=="user_groups"?"https://statamic.dev/fieldtypes/user-groups":e=="user_roles"?"https://statamic.dev/fieldtypes/user-roles":e=="users"?"https://statamic.dev/fieldtypes/users":e=="video"?"https://statamic.dev/fieldtypes/video":e=="yaml"?"https://statamic.dev/fieldtypes/yaml":null}};function Wh(t){return{resolved:!0,documentation:{handle:t.type,field:t,injects:[],stringable:!0,rawReturns:"string",augmentsTo:"string",canBeTagPair:!1,exampleSnippets:[],overviewProperties:[],overviewSnippets:[],modifiers:[],officialDocumentation:he.getDocLink(t.type),stringableReturns:"The field's value"}}}function rM(t){let e=[],i=m(t,"default",null),r=t.validate.includes("required");return i===null||r===!1?e.push({overview:`Using ${t.handle} in an operation`,snippet:`{{# Use null coalescence to account for a possible null value. #}}
{{ _result = (${t.handle} ?? 0) + 1; }}`}):isNaN(i)?e.push({overview:`Using ${t.handle} in an operation`,snippet:`{{#
    This field has a non-numeric default value of '${i}',
    which may cause issues with operations and comparisons.
#}}
{{ _result = ${t.handle} + 1; }}`}):e.push({overview:`Using ${t.handle} in an operation`,snippet:`{{ _result = ${t.handle} + 1; }}`}),e.push({overview:`Using ${t.handle} in a condition`,snippet:`{{ if ${t.handle} > 0 }}

{{ /if }}`}),{resolved:!0,documentation:{handle:t.type,field:t,injects:[],stringable:!0,rawReturns:"number",augmentsTo:"number",canBeTagPair:!1,exampleSnippets:[],overviewProperties:[],overviewSnippets:e,modifiers:[],officialDocumentation:he.getDocLink(t.type),stringableReturns:"The field's value"}}}function nM(t){let e=[];return e.push({overview:`Using the ${t.handle} field in a condition`,snippet:`{{ if ${t.handle} }}

{{ /if }}`}),e.push({overview:`Using the ${t.handle} field in a ternary expression`,snippet:`{{ ${t.handle} ? 'true' : 'false' }}`}),e.push({overview:`Using the ${t.handle} field with the Gatekeeper operator to conditionally render a partial`,snippet:`{{ ${t.handle} ?= {partial:partial/name} }}`}),{resolved:!0,documentation:{handle:t.type,field:t,injects:[],stringable:!0,rawReturns:"boolean",augmentsTo:"boolean",canBeTagPair:!1,exampleSnippets:[],overviewProperties:[],overviewSnippets:e,modifiers:[],officialDocumentation:he.getDocLink(t.type),stringableReturns:"The field's value"}}}var TT={resolved:!1,documentation:null};var we=class{static getKeys(e){if(typeof e.keys>"u")return[];let i=e.keys;return i===null?[]:Object.keys(i)}static keysToInjectedField(e){let i=[];return e.forEach(r=>{i.push(oe.injectedTextField(r,""))}),i}static massageInjectedType(e){return e=="user_roles"||e=="user_groups"?"array":e=="toggle"?"boolean":e}static fieldsToInjectedFields(e){let i=[];return e.forEach(r=>{i.push({name:r.handle,type:this.massageInjectedType(r.type),field:r,description:r.instructionText})}),i}};var Yh=class{static generate(e){let i=[];return i.push({overview:"Alternating between even and odd rows, starting at the second row",snippet:`<ul>
    {{ ${e} }}
    <li class="{ (count % 2 == 0) ? 'even' : 'odd' }">
        {{ value }}
    </li>
    {{ /${e} }}
</ul>`}),i.push({overview:"Alternating between even and odd rows, starting at the first row",snippet:`<ul>
    {{ ${e} }}
    <li class="{ (count % 2 == 0) ? 'odd' : 'even' }">
        {{ value }}
    </li>
    {{ /${e} }}
</ul>`}),i}};var yo=class{constructor(e){this.buffer="";this.tabSize=4;this.tabSize=e}opening(e){return this.buffer+="{{ "+e+" }}",this}append(e){return this.buffer+=e,this}space(){return this.append(" ")}singleField(e){return this.append("{{ "+e+" }}")}nestedFieldsComment(){return this.append("{{# Nested fields. #}}")}nl(){return this.buffer+=`
`,this}indent(){return this.buffer+=" ".repeat(this.tabSize),this}indentedField(e){return this.buffer+=`
`+" ".repeat(this.tabSize)+"{{ "+e+" }}",this}indentedClosing(e){return this.buffer+=`
`+" ".repeat(this.tabSize)+"{{/ "+e+" }}",this}fieldAccess(e,i){return this.buffer+="{{ "+e+"."+i+" /}}",this.nl()}pairedFieldAccess(e,i){return this.buffer+="{{ "+e+"."+i+" }}",this.nl()}closingFieldAccess(e,i){return this.buffer+="{{ /"+e+"."+i+" }}",this.nl()}accessorFieldAccess(e,i,r){return this.buffer+="{{ "+e+"."+i+"."+r+" /}}",this.nl()}pairedAccessorFieldAccess(e,i,r){return this.buffer+="{{ "+e+"."+i+"."+r+" }}",this.nl()}closingAccessorFieldAccess(e,i,r){return this.buffer+="{{ /"+e+"."+i+"."+r+" }}",this.nl()}closing(e){return this.buffer+="{{ /"+e+" }}",this}toString(){return this.buffer}};var To=class{static generate(e,i=4){let r=new yo(i);return r.opening("foreach:"+e),r.nl().indent().singleField("key").space().singleField("value"),r.nl().closing("foreach:"+e),{overview:"Iterate the "+e+" as a key/value pair",snippet:r.toString()}}};function bT(t){return t==="array"||t=="entry"||t=="builder"||t=="entries"}var ce=class{static generate(e,i,r=4){let n=[];return i.length==0?(n.push(ce.generateNestedFields(e,[oe.injectedTextField("value","")],r)),n):(n.push(ce.generateNestedFields(e,i,r)),n.push(ce.generateDotAccessFields(e,i,r)),n)}static generateArrayFields(e,i,r=4){let n=[];return i.length==0?(n.push(ce.generateNestedFields(e,[oe.injectedTextField("value","")],r)),n):(n.push(ce.generateNestedFields(e,i,r)),n.push(ce.generateNestedDotAccessFields(e,"0",i,r)),n)}static generateDotAccessFields(e,i,r){let n=new yo(r);return i.forEach(s=>{bT(s.type)?n.pairedFieldAccess(e,s.name).indent().nestedFieldsComment().nl().closingFieldAccess(e,s.name):n.fieldAccess(e,s.name)}),{overview:"Accessing the nested values of the "+e+' field using "dot" syntax',snippet:n.toString().trimEnd()}}static generateNestedDotAccessFields(e,i,r,n){let s=new yo(n);return r.forEach(o=>{bT(o.type)?(s.pairedAccessorFieldAccess(e,i,o.name),s.indent().nestedFieldsComment(),s.nl().closingAccessorFieldAccess(e,i,o.name)):s.accessorFieldAccess(e,i,o.name)}),{overview:"Accessing the nested values of the "+e+' field using "dot" syntax',snippet:s.toString().trimEnd()}}static generateNestedFields(e,i,r){let n=new yo(r);return n.opening(e),i.forEach(s=>{bT(s.type)?n.indentedField(s.name).nl().indent().indent().nestedFieldsComment().indentedClosing(s.name):n.indentedField(s.name)}),n.nl().closing(e),{overview:"Accessing the nested fields of the "+e+" field within a tag pair.",snippet:n.toString()}}};var _s=class{resolve(e,i){let r=we.getKeys(e),n=he.getDocLink(e.type),s=we.keysToInjectedField(r),o=[],a=ce.generate(e.handle,s);return e.mode=="keyed"?a.push(To.generate(e.handle)):Yh.generate(e.handle).forEach(l=>a.push(l)),o.push({mono:!1,name:"Mode",value:e.mode}),{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!1,rawReturns:"array",augmentsTo:"array",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:n,overviewProperties:o,stringableReturns:null,modifiers:[]}}}};var bo=class{resolve(e,i){let r=he.getDocLink(e.type),n=[],s=[];return s.push({overview:`Using modifiers on the ${e.handle} field`,snippet:`{{ ${e.handle} as="${e.handle}_alias" }}
    {{ ${e.handle}_alias | reverse }}

    {{ /${e.handle}_alias }}
{{ /${e.handle} }}`}),{resolved:!0,documentation:{handle:e.type,field:e,injects:[],stringable:!1,rawReturns:"builder",augmentsTo:"builder",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:s,officialDocumentation:r,overviewProperties:n,stringableReturns:"",modifiers:[]}}}};var V9=[oe.injectedTextField("id","The asset's ID"),oe.injectedTextField("title","The asset's title"),oe.injectedTextField("path","The relative asset path"),oe.injectedTextField("filename","The asset's file name, without the extension"),oe.injectedTextField("basename","The asset's file name, with the extension"),oe.injectedTextField("extension","The extension of the asset"),oe.injectedBoolField("is_asset",""),oe.injectedBoolField("is_audio",""),oe.injectedBoolField("is_previewable",""),oe.injectedBoolField("is_image",""),oe.injectedBoolField("is_video",""),oe.injectedArrayField("blueprint",""),oe.injectedTextField("edit_url",""),oe.injectedArrayField("container",""),oe.injectedTextField("folder",""),oe.injectedTextField("url",""),oe.injectedTextField("permalink",""),oe.injectedTextField("size",""),oe.injectedFloatField("size_bytes",""),oe.injectedFloatField("size_kilobytes",""),oe.injectedFloatField("size_megabytes",""),oe.injectedFloatField("size_gigabytes",""),oe.injectedFloatField("size_b",""),oe.injectedFloatField("size_kb",""),oe.injectedFloatField("size_mb",""),oe.injectedFloatField("size_gb",""),oe.injectedDateField("last_modified",""),oe.injectedFloatField("last_modified_timestamp",""),oe.injectedDateField("last_modified_instance",""),oe.injectedTextField("focus",""),oe.injectedBoolField("has_focus",""),oe.injectedTextField("focus_css",""),oe.injectedFloatField("height",""),oe.injectedFloatField("width",""),oe.injectedTextField("orientation",""),oe.injectedFloatField("ratio",""),oe.injectedTextField("mime_type",""),oe.injectedFloatField("duration",""),oe.injectedFloatField("duration_seconds",""),oe.injectedFloatField("duration_sec",""),oe.injectedTextField("playtime","")],Dc=class{resolve(e,i){if(e.maxFiles!==1)return new bo().resolve(e,i);let r=null;for(let l=0;l<i.assets.length;l++)if(i.assets[l].handle==e.container){r=i.assets[l];break}let n=we.fieldsToInjectedFields(r?.allFields??[]);n=n.concat(V9);let s=he.getDocLink(e.type),o=[],a=ce.generate(e.handle,n);return{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:"asset",augmentsTo:"asset",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:s,overviewProperties:o,stringableReturns:"The asset's path",modifiers:[]}}}};var su=class{static generate(e,i){let r=[],n="";if(i.length==1)n=`    {{ if type == '${i[0].handle}' }}

    {{ /if }}`;else if(i.length>1){let o=i.slice(1);n=`    {{ if type == '${i[0].handle}' }}

`,o.forEach(a=>{n+=`    {{ elseif type == '${a.handle}' }}

`}),n+="    {{ /if }}"}let s=`{{ ${e} }}
${n}
{{ /${e} }}`;return r.push({overview:"Conditionally rendering content based on the current set",snippet:s}),r}};var ou=class{static getSnippets(e){let i=[];return i.push({overview:"Retrieving the augmented value of the field",snippet:`{{ ${e.handle} /}}`}),i}};var li=class{resolve(e,i){let r=[],n=ou.getSnippets(e),s={...Wh(e)};return typeof e.characterLimit<"u"&&r.push({mono:!1,name:"Character Limit",value:e.characterLimit?.toString()??"None"}),s.documentation!=null&&(s.documentation.overviewProperties=r,s.documentation.overviewSnippets=n),s}};var Ia=class extends li{};var Fc=class{resolve(e,i){if(e.sets.length==0)return new Ia().resolve(e,i);let r=he.getDocLink(e.type),n=[],s=[],o=su.generate(e.handle,e.sets);return{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!1,rawReturns:"array",augmentsTo:"array",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:o,officialDocumentation:r,overviewProperties:s,stringableReturns:null,modifiers:[]}}}};var au=class{resolve(e,i){let r=he.getDocLink(e.type),n=["value","label","key"],s=we.keysToInjectedField(n),o=[],a=ce.generate(e.handle,s);return a.push(To.generate(e.handle)),{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!0,rawReturns:"string",augmentsTo:"labeledValue",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:r,overviewProperties:o,stringableReturns:"The field's value",modifiers:[]}}}};var Lc=class extends au{};var Oc=class{resolve(e,i){let r=["key","value","label"],n=he.getDocLink(e.type),s=we.keysToInjectedField(r),o=[],a=ce.generateArrayFields(e.handle,s);return{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!1,rawReturns:"array",augmentsTo:"array",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:n,overviewProperties:o,stringableReturns:null,modifiers:[]}}}};var Mc=class{resolve(e,i){let r=["code","mode","value"],n=he.getDocLink(e.type),s=we.keysToInjectedField(r),o=[],a=ce.generate(e.handle,s);return o.push({mono:!0,name:"Mode",value:e.mode}),o.push({mono:!1,name:"Indent Type",value:(e.indentType??"tabs")+"("+(e.indentSize??4)+")"}),a.unshift({overview:`Rendering a <code /> element using the details of the ${e.handle} field`,snippet:`{{ ${e.handle} }}
    <pre><code class="language-{{ mode }}">{{ code }}</code></pre>
{{ /${e.handle} }}`}),{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!1,rawReturns:"string",augmentsTo:"arrayableString",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:n,overviewProperties:o,stringableReturns:"The code field's value",modifiers:[]}}}};var ui=class{static generate(e,i,r){return{overview:`Use the values of the ${r} field to retrieve items using the ${e} tag`,snippet:`{{ ${e} ${i}="{${r}|piped}" }}

{{ /${e} }}`}}static generateSingle(e,i,r){return{overview:`Use the value of the ${r} field to retrieve items using the ${e} tag`,snippet:`{{ ${e} :${i}="${r}.handle" }}

{{ /${e} }}`}}static generateCondition(e,i,r){return{overview:`Use the values of the ${r} field with the ${e} tag in a condition`,snippet:`{{ if {${e} ${i}="{${r}|piped}"} }}

{{ /if }}`}}static generateSingleCondition(e,i,r){return{overview:`Use the value of the ${r} field with the ${e} tag in a condition`,snippet:`{{ if {${e} :${i}="${r}.handle"} }}

{{ /if }}`}}};var qc=class{constructor(){this.injectsKeys=["title","handle"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="collectionArray",a="collectionArray",l=[],u=!1;return e.maxItems===1?(o="collection",a="collection",u=!0,l.push(ui.generateSingle("collection","from",e.handle)),l=l.concat(ce.generate(e.handle,n))):(l.push(ui.generate("collection","from",e.handle)),l=l.concat(ce.generateArrayFields(e.handle,n))),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The collection's handle",modifiers:[]}}}};var Bc=class{resolve(e,i){let r=new li().resolve(e,i);return r.documentation!=null&&r.documentation.overviewProperties.unshift({mono:!0,name:"Color Mode",value:e.defaultColorMode??"hex"}),r}};var Kh=class{static generate(e){let i=[];return i.push({overview:"Formatting: Atom/ISO-8601 Full Extended (2022-11-19T16:59:46+00:00)",snippet:`{{ ${e.handle} | format('Y-m-d\\TH:i:sP') /}}`}),i.push({overview:"Formatting: ISO-8601 (2022-11-19T16:59:46+0000)",snippet:`{{ ${e.handle} | format('Y-m-d\\TH:i:sO') /}}`}),i.push({overview:"Formatting: Cookie (Saturday, 19-Nov-2022 16:59:46 UTC)",snippet:`{{ ${e.handle} | format('l, d-M-Y H:i:s T') /}}`}),i.push({overview:"Formatting: RFC-822 (Sat, 19 Nov 22 16:59:46 +0000)",snippet:`{{ ${e.handle} | format('D, d M y H:i:s O') /}}`}),i.push({overview:"Formatting: RFC-850 (Saturday, 19-Nov-22 16:59:46 UTC)",snippet:`{{ ${e.handle} | format('l, d-M-y H:i:s T') /}}`}),i.push({overview:"Formatting: RFC-1036 (Sat, 19 Nov 22 16:59:46 +0000)",snippet:`{{ ${e.handle} | format('D, d M y H:i:s O') /}}`}),i.push({overview:"Formatting: RFC-1123 (Sat, 19 Nov 2022 16:59:46 +0000)",snippet:`{{ ${e.handle} | format('D, d M Y H:i:s O') /}}`}),i.push({overview:"Formatting: RFC-2822 (Sat, 19 Nov 2022 16:59:46 +0000)",snippet:`{{ ${e.handle} | format('D, d M Y H:i:s O') /}}`}),i.push({overview:"Formatting: RFC-3339 (2022-11-19T16:59:46+00:00)",snippet:`{{ ${e.handle} | format('Y-m-d\\TH:i:sP') /}}`}),i.push({overview:"Formatting: RFC-3339 Extended (2022-11-19T16:59:46.954+00:00)",snippet:`{{ ${e.handle} | format('Y-m-d\\TH:i:s.vP') /}}`}),i.push({overview:"Formatting: RFC-7231 (Sat, 19 Nov 2022 16:59:46 GMT)",snippet:`{{ ${e.handle} | format('D, d M Y H:i:s \\G\\M\\T') /}}`}),i.push({overview:"Formatting: RSS (Sat, 19 Nov 2022 16:59:46 +0000)",snippet:`{{ ${e.handle} | format('D, d M Y H:i:s O') /}}`}),i.push({overview:"Formatting: W3C (2022-11-19T16:59:46+00:00)",snippet:`{{ ${e.handle} | format('Y-m-d\\TH:i:sP') /}}`}),i}};var Vc=class{resolve(e,i){let r=new li().resolve(e,i);return r.documentation!=null&&(Kh.generate(e).forEach(n=>{r.documentation?.overviewSnippets.unshift(n)}),r.documentation.overviewProperties.unshift({name:"Time Enabled",mono:!1,value:j.boolLabel(e.timeEnabled??!1)}),r.documentation.overviewProperties.unshift({name:"Format",mono:!0,value:e.format??"None"}),r.documentation.augmentsTo="date",r.documentation.stringableReturns="The formatted date"),r}};var Uc=class{resolve(e,i){if(e.maxItems!==1){let a=new bo().resolve(e,i);if(a.resolved&&a.documentation!=null){let l=[],u=[];if(e.collections!=null&&e.collections.length>0){let c=[],f=[];i.collections.forEach(d=>{e.collections?.includes(d.collection)&&typeof d.allFields<"u"&&d.allFields!=null&&d.allFields.forEach(h=>{f.includes(h.handle)==!1&&(f.push(h.handle),c.push(h))})}),l=we.fieldsToInjectedFields(c),u=[ce.generateNestedFields(e.handle,l,4)]}u.forEach(c=>{a.documentation?.overviewSnippets.unshift(c)}),a.documentation.injects=l}return a}let r=he.getDocLink(e.type),n=[],s=[],o=[];if(e.collections!=null&&e.collections.length>0){let a=[],l=[];i.collections.forEach(u=>{e.collections?.includes(u.collection)&&typeof u.allFields<"u"&&u.allFields!=null&&u.allFields.forEach(c=>{l.includes(c.handle)==!1&&(l.push(c.handle),a.push(c))})}),s=we.fieldsToInjectedFields(a),o=[ce.generateNestedFields(e.handle,s,4)]}return{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!1,rawReturns:"entry",augmentsTo:"entry",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:o,officialDocumentation:r,overviewProperties:n,stringableReturns:"",modifiers:[]}}}};var Un=class{resolve(e,i){return rM(e)}};var jc=class extends Un{};var Gc=class{constructor(){this.injectsKeys=["handle","title","api_url","honeypot"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="formArray",a="formArray",l=[],u=!1;return e.maxItems===1?(o="form",a="form",u=!0,l=ce.generate(e.handle,n),l.unshift({overview:`Using the value of the ${e.handle} field to create a form`,snippet:`{{ form:create :in="${e.handle}.handle" }}
    {{ fields }}
        {{# Render the fields. #}}
    {{ /fields }}

    <button type="submit">The Submit Button</button>
{{ /form:create }}`})):l=ce.generateArrayFields(e.handle,n),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The form's handle",modifiers:[]}}}};var Hc=class{resolve(e,i){let r=he.getDocLink(e.type),n=we.fieldsToInjectedFields(e.fields),s=[],o=ce.generate(e.handle,n);return{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!1,rawReturns:"array",augmentsTo:"array",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:o,officialDocumentation:r,overviewProperties:s,stringableReturns:null,modifiers:[]}}}};var Wc=class extends Un{};var Yc=class extends li{};var Kc=class extends _s{};var $c=class extends li{resolve(e,i){let r=super.resolve(e,i);return r.documentation!=null&&r.documentation.overviewSnippets.unshift({overview:"Using a custom Markdown parser to render the content",snippet:`{{ ${e.handle} | raw | markdown('parser_name') /}}`}),r}};var zc=class extends au{};var Qc=class extends Un{resolve(e,i){let r=super.resolve(e,i);return r.documentation!=null&&(r.documentation.overviewProperties.unshift({name:"Max",value:e.max?.toString()??"None",mono:!1}),r.documentation.overviewProperties.unshift({name:"Min",value:e.min?.toString()??"None",mono:!1})),r}};var Xc=class{resolve(e,i){let r=he.getDocLink(e.type),n=[],s=[],o=su.generate(e.handle,e.sets);return{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!1,rawReturns:"array",augmentsTo:"array",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:o,officialDocumentation:r,overviewProperties:s,stringableReturns:null,modifiers:[]}}}};var Jc=class{resolve(e,i){let r=he.getDocLink(e.type),n=["value","label","key"],s=we.keysToInjectedField(n),o=[],a="string",l="labeledValueArray",u=[];return e.multiple!==!0?(a="string",l="labeledValue",u=ce.generate(e.handle,s),u.push(To.generate(e.handle))):u=ce.generateArrayFields(e.handle,s),{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!0,rawReturns:a,augmentsTo:l,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:u,officialDocumentation:r,overviewProperties:o,stringableReturns:"The field's value",modifiers:[]}}}};var Zc=class{constructor(){this.injectsKeys=["handle","name","lang","locale","short_locale","url","direction"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys).concat([oe.injectedArrayField("attributes","")]),s=[],o="siteArray",a="siteArray",l=[],u=!1;return e.maxItems===1?(o="site",a="site",u=!0,l=ce.generate(e.handle,n)):l=ce.generateArrayFields(e.handle,n),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The site's handle",modifiers:[]}}}};var ef=class extends li{};var tf=class{static getSnippets(e){let i=[];return e.maxItems===1?i.push({overview:"Navigate the structure hierarchy using the nav tag",snippet:`{{ nav :from="${e.handle}.handle" }}

{{ /nav }}`}):i.push({overview:"Navigate the structure hierarchies using the nav tag",snippet:`{{ ${e.handle} }}
    {{ nav :from="handle" }}

    {{ /nav }}
{{ /${e.handle} }}`}),i}};var rf=class{constructor(){this.injectsKeys=["title","handle"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="structureArray",a="structureArray",l=tf.getSnippets(e),u=!1;return e.maxItems===1?(o="structure",a="structure",u=!0,ce.generate(e.handle,n).forEach(c=>{l.push(c)})):ce.generateArrayFields(e.handle,n).forEach(c=>{l.push(c)}),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The structure's handle",modifiers:[]}}}};var nf=class{resolve(e,i){let r=he.getDocLink(e.type),n=[],s=[],o="array",a="array",l=[];return l.push({overview:`Using the table modifier to conver the ${e.handle} to HTML`,snippet:`{{ ${e.handle} | table /}}`}),l.push({overview:"Iterating the table and render the contents",snippet:`<table>
  {{ ${e.handle} }}
    <tr>
      {{ cells }}
        <td>{{ value /}}</td>
      {{ /cells }}
    </tr>
  {{ /${e.handle} }}
</table>`}),l.push({overview:'Using the "as" modifier to access individual rows',snippet:`{{ ${e.handle} as="rows" }}
    <thead>
        <tr>
        {{ rows.0.cells }}
            <th>{{ value /}}</th>
        {{ /rows.0.cells }}
        </tr>
    </thead>
    <tbody>
    {{ rows offset="1" }}
        <tr>
        {{ cells }}
            <td>{{ value /}}</td>
        {{ /cells }}
        </tr>
    {{ /rows }}
    </tbody>
{{ /${e.handle} }}`}),l.push({overview:"Using a variable to conditionally render a table header element",snippet:`<table>
  {{ ${e.handle} }}
    {{ if first && first_row_headers }}
      <thead>
        <tr>
          {{ cells }}
            <th>{{ value /}}</th>
          {{ /cells }}
        </tr>
      </thead>
      <tbody>
    {{ /if }}
    {{ if !first && first_row_headers || !first_row_headers }}
      {{ if first }}
        <tbody>
      {{ /if }}
        <tr>
          {{ cells }}
            <td>{{ value /}}</td>
          {{ /cells }}
        </tr>
      {{ if last }}
        </tbody>
      {{ /if }}
    {{ /if }}
  {{ /${e.handle} }}
</table>`}),l.push({overview:"Using a variable to conditionally render a table header element; using ternary conditions to render the body",snippet:`<table>
  {{ ${e.handle} }}
    {{ if first && first_row_headers }}
      <thead>
        <tr>
          {{ cells }}
            <th>{{ value /}}</th>
          {{ /cells }}
        </tr>
      </thead>
      <tbody>
    {{ /if }}
    {{ if !first && first_row_headers || !first_row_headers }}
      {{ first ?= '<tbody>' }}
      <tr>
          {{ cells }}
          <td>{{ value /}}</td>
          {{ /cells }}
      </tr>      
      {{ last ?= '</tbody>' }}
    {{ /if }}
  {{ /${e.handle} }}
</table>`}),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!1,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"",modifiers:[]}}}};var sf=class extends _s{};var of=class{constructor(){this.injectsKeys=["title","handle"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="taxonomyArray",a="taxonomyArray",l=[],u=!1;return e.maxItems===1?(o="taxonomy",a="taxonomy",u=!0,l.push(ui.generateSingle("taxonomy","from",e.handle)),l=l.concat(ce.generate(e.handle,n))):(l.push(ui.generate("taxonomy","from",e.handle)),l=l.concat(ce.generateArrayFields(e.handle,n))),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The taxonomy's handle",modifiers:[]}}}};var af=class extends li{};var lf=class{constructor(){this.injectsKeys=["api_url","edit_url","entries_count","id","is_term","locale","permalink","slug","taxonomy","title","updated_at","updated_by","uri","url"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="builder",a="builder",l=[],u=!1;return e.maxItems===1?(o="taxonomy",a="taxonomy",u=!0,l=l.concat(ce.generate(e.handle,n))):l=l.concat(ce.generateArrayFields(e.handle,n)),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!1,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:null,modifiers:[]}}}};var uf=class extends li{};var cf=class extends Un{};var $h=class{resolve(e,i){return nM(e)}};var ff=class extends $h{};var df=class{constructor(){this.injectsKeys=["title","handle"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="userGroupArray",a="userGroupArray",l=[],u=!1;return e.maxItems===1?(o="userGroup",a="userGroup",u=!0,l.push(ui.generateSingle("user:in","group",e.handle)),l.push(ui.generateSingleCondition("user:in","group",e.handle)),l=l.concat(ce.generate(e.handle,n))):(l.push(ui.generate("user:in","group",e.handle)),l.push(ui.generateCondition("user:in","group",e.handle)),l=l.concat(ce.generateArrayFields(e.handle,n))),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The user group's handle",modifiers:[]}}}};var pf=class{constructor(){this.injectsKeys=["title","handle"]}resolve(e,i){let r=he.getDocLink(e.type),n=we.keysToInjectedField(this.injectsKeys),s=[],o="userRoleArray",a="userRoleArray",l=[],u=!1;return e.maxItems===1?(o="userRole",a="userRole",u=!0,l.push(ui.generateSingle("user:is","role",e.handle)),l.push(ui.generateSingleCondition("user:is","role",e.handle)),l=l.concat(ce.generate(e.handle,n))):(l.push(ui.generate("user:is","role",e.handle)),l.push(ui.generateCondition("user:is","role",e.handle)),l=l.concat(ce.generateArrayFields(e.handle,n))),{resolved:!0,documentation:{handle:e.type,field:e,injects:n,stringable:!0,rawReturns:o,augmentsTo:a,canBeTagPair:!0,exampleSnippets:[],overviewSnippets:l,officialDocumentation:r,overviewProperties:s,stringableReturns:"The user role's handle",modifiers:[]}}}};var hf=class{resolve(e,i){if(e.maxItems!==1)return new bo().resolve(e,i);let r=null;for(let l=0;l<i.general.length;l++)if(i.general[l].handle=="user"){r=i.general[l];break}let n=he.getDocLink(e.type),s=we.fieldsToInjectedFields(r?.allFields??[]),o=[],a=ce.generate(e.handle,s);return{resolved:!0,documentation:{handle:e.type,field:e,injects:s,stringable:!1,rawReturns:"user",augmentsTo:"user",canBeTagPair:!0,exampleSnippets:[],overviewSnippets:a,officialDocumentation:n,overviewProperties:o,stringableReturns:null,modifiers:[]}}}};var mf=class{resolve(e,i){let r=[],n=ou.getSnippets(e),s={...Wh(e)};return n.unshift({overview:"Condtionally output the appropriate video player element",snippet:`{{ if ${e.handle} | is_embeddable }}
    <!-- Youtube and Vimeo -->
    <iframe src="{{ ${e.handle} | embed_url }}" ...></iframe>
{{ else }}
    <!-- Other HTML5 video types -->
    <video src="{{ ${e.handle} | embed_url }}" ...></video>
{{ /if }}`}),s.documentation!=null&&(s.documentation.overviewProperties=r,s.documentation.overviewSnippets=n),s}};var sM=null;function oM(t){sM=t}var zh=class{constructor(){this.providers=new Map;this.providers.set("array",new _s),this.providers.set("assets",new Dc),this.providers.set("bard",new Fc),this.providers.set("button_group",new Lc),this.providers.set("checkboxes",new Oc),this.providers.set("code",new Mc),this.providers.set("collections",new qc),this.providers.set("color",new Bc),this.providers.set("date",new Vc),this.providers.set("entries",new Uc),this.providers.set("float",new jc),this.providers.set("form",new Gc),this.providers.set("grid",new Hc),this.providers.set("integer",new Wc),this.providers.set("link",new Yc),this.providers.set("list",new Kc),this.providers.set("markdown",new $c),this.providers.set("radio",new zc),this.providers.set("range",new Qc),this.providers.set("replicator",new Xc),this.providers.set("select",new Jc),this.providers.set("sites",new Zc),this.providers.set("slug",new ef),this.providers.set("structures",new rf),this.providers.set("table",new nf),this.providers.set("taggable",new sf),this.providers.set("taxonomies",new of),this.providers.set("template",new af),this.providers.set("terms",new lf),this.providers.set("text",new Ia),this.providers.set("textarea",new uf),this.providers.set("time",new cf),this.providers.set("toggle",new ff),this.providers.set("user_groups",new df),this.providers.set("user_roles",new pf),this.providers.set("users",new hf),this.providers.set("video",new mf)}massageAugmentType(e){return e=="builder"?"array":e=="asset"?"assets":e}getDocumentationModifiers(e){let i=[],r=Ce.instance?.getModifiersForType(this.massageAugmentType(e.augmentsTo)),n=[],s=[];return r?.forEach(o=>{o.isDeprecated||o.forFieldType.length>0&&!o.forFieldType.includes(e.field.type)||(e.augmentsTo=="asset"||e.augmentsTo=="entry")&&o.acceptsType.length==1&&o.acceptsType[0]=="array"||(s.push(o),n.push(o.name))}),e.augmentsTo=="asset"&&Ce.instance?.getRegisteredModifiers().forEach(o=>{o.forFieldType.includes("assets")&&!n.includes(o.name)&&(s.push(o),n.push(o.name))}),s.forEach(o=>{i.push({acceptsTypes:o.acceptsType,description:o.description,docLink:o.docLink,name:o.name,returnsTypes:o.returnsType,parameters:o.parameters})}),i}getDocumentation(e){if(typeof e.type!="string")return TT;let i=e.type.toLowerCase();if(!this.providers.has(i))return TT;let r=this.providers.get(i).resolve(e,sM);return r.resolved==!1||r.documentation!=null&&(r.documentation.overviewProperties.unshift({name:"Type",value:i,mono:!0}),r.documentation.overviewProperties.push({name:"Stringable",value:j.boolLabel(r.documentation.stringable),mono:!1}),r.documentation.overviewProperties.push({name:"Arrayable",value:j.boolLabel(r.documentation.canBeTagPair),mono:!1}),r.documentation.overviewProperties.push({name:"Augments To",value:r.documentation.augmentsTo,mono:!0}),r.documentation.modifiers=this.getDocumentationModifiers(r.documentation)),r}};var Qh=class{static handle(e){return new zh().getDocumentation(e.context)}};var RT={formatFrontMatter:!1,showGeneralSnippetCompletions:!0,diagnostics:{warnOnDynamicCssClassNames:!0,validateTagParameters:!0,reportDiagnostics:!0},trace:{server:"off"},formatterIgnoreExtensions:["xml"],languageVersion:"runtime"},aa=RT;function Xh(t){aa=t}function Ir(){return aa}var Fe=(0,Zt.createConnection)(Zt.ProposedFeatures.all),lu=new Zt.TextDocuments(cM.TextDocument),dM=!1,aM=!1,j9=!1,IT;(e=>e.type=new Zt.RequestType("antlers/generateHelp"))(IT||(IT={}));var vT;(e=>e.type=new Zt.RequestType("antlers/lockedits"))(vT||(vT={}));var NT;(e=>e.type=new Zt.RequestType("antlers/forcedFormat"))(NT||(NT={}));var ST;(e=>e.type=new Zt.RequestType("antlers/projectUpdate"))(ST||(ST={}));var PT;(e=>e.type=new Zt.RequestType("antlers/transform"))(PT||(PT={}));var AT;(e=>e.type=new Zt.RequestType0("antlers/semanticTokenLegend"))(AT||(AT={}));var ET;(e=>e.type=new Zt.RequestType("antlers/semanticTokens"))(ET||(ET={}));Fe.onInitialize(t=>{let e=t.capabilities;dM=!!(e.workspace&&!!e.workspace.configuration),aM=!!(e.workspace&&!!e.workspace.workspaceFolders),j9=!!(e.textDocument&&e.textDocument.publishDiagnostics&&e.textDocument.publishDiagnostics.relatedInformation);let i={capabilities:{textDocumentSync:Zt.TextDocumentSyncKind.Full,completionProvider:{resolveProvider:!0,triggerCharacters:[":",'"',"'","{","/","|","@"," "]},documentFormattingProvider:{},foldingRangeProvider:{},signatureHelpProvider:{triggerCharacters:[","]},documentLinkProvider:{},hoverProvider:{},definitionProvider:{},documentSymbolProvider:{},referencesProvider:{},documentHighlightProvider:{},codeActionProvider:{},executeCommandProvider:{commands:["antlers.extractToPartial"]}}};return aM&&(i.capabilities.workspace={workspaceFolders:{supported:!0}}),i});Fe.onInitialized(()=>{dM&&Fe.client.register(Zt.DidChangeConfigurationNotification.type,void 0),Fe.workspace.getConfiguration("html").then(function(t){Dy(t)}),Fe.workspace.getConfiguration("antlersLanguageServer").then(function(t){t!=null?Xh(t):Xh(RT)})});Fe.onExecuteCommand(async t=>{t.command=="antlers.extractToPartial"&&fc.currentAction!=null&&t.arguments?.length==3&&fc.currentAction.completeRefactor({path:t.arguments[1],fsPath:t.arguments[2]})});Fe.onDidChangeConfiguration(t=>{Fe.workspace.getConfiguration("html").then(function(e){Dy(e)}),Fe.workspace.getConfiguration("antlersLanguageServer").then(function(e){if(e!=null){let i=Ir(),r=e;if(Xh(r),r.diagnostics.reportDiagnostics==!1&&ee.instance?.hasStructure()){let n=ee.instance.getStructure().getViews();for(let s=0;s<n.length;s++)Fe.sendDiagnostics({uri:n[s].originalDocumentUri,diagnostics:[]})}i.languageVersion!=r.languageVersion&&IE(Fe)}else Xh(RT)}),lu.all().forEach(pM),lu.all().forEach(wy),lu.all().forEach(e=>{xT(encodeURIComponent(e.uri))}),lu.all().forEach(e=>{ky(e,Fe)})});Fe.onDocumentLinks(t=>{let e=decodeURIComponent(t.textDocument.uri);return Lh.getDocumentLinks(e)});var CT=!1;Fe.onRequest(vT.type,()=>{CT=!0});function G9(t){if(CT){CT=!1;return}pM(t.document),wy(t.document),xT(decodeURIComponent(t.document.uri)),ky(t.document,Fe)}var H9=(0,fM.debounce)(DP,97);lu.onDidChangeContent(G9);Fe.onDidChangeWatchedFiles(t=>{});Fe.onHover(t=>RC(t));Fe.onDocumentSymbol(t=>LC(t));Fe.onDocumentHighlight(Z1);Fe.onReferences(J1);Fe.onDefinition(xC);Fe.onFoldingRanges(OP);Fe.onSignatureHelp(CC);Fe.onDocumentFormatting(AC);Fe.onCompletion(H9);Fe.onCompletionResolve(FP);lu.listen(Fe);Fe.onRequest(AT.type,t=>tT().legend);Fe.onRequest(NT.type,t=>{let e=Ir(),i=hc.format;return new tu({tabSize:t.tabSize,formatFrontMatter:e.formatFrontMatter,insertSpaces:t.insertSpaces,formatExtensions:[],maxStatementsPerLine:3,htmlOptions:i}).formatDocument(ut.fromText(t.content),Ir())});Fe.onRequest(IT.type,t=>({didGenerate:!0,result:Qh.handle(t)}));Fe.onRequest(PT.type,t=>{let e=new eM;e.load(t.content);let i=[];return e.getMapping().forEach((n,s)=>{i.push({find:s,replace:n})}),{shouldParse:e.getShouldFormat(),transformedText:e.getBuffer(),replacements:i}});Fe.onCodeAction(TE);Fe.onRequest(ST.type,()=>{if(ee.instance?.setDirtyState(!0),ee.instance?.reloadDetails(),ee.instance?.hasStructure()){let t=ee.instance?.getStructure();_e.setProject(t),Go.instance?.updateProject(t)}});Fe.onRequest(ET.type,(t,e)=>{let i=decodeURIComponent(t.textDocument.uri);if(Tn.has(i)){let r=Tn.get(i);return tT().getSemanticTokens(r,t.ranges)}return null});async function pM(t){if(ee.instance?.hasStructure()){ee.instance.reloadDetails(),_e.setProject(ee.instance.getStructure());return}let e=decodeURIComponent(t.uri),i=(0,lM.default)(e),r=_T(i);if(ee.instance?.setActiveProject(r),ee.instance?.hasStructure()&&(_e.setProject(ee.instance?.getStructure()),Go.instance?.updateProject(ee.instance?.getStructure())),an.instance?.clearPartialReferences(e),Vi.instance?.clearIssues(e),ee.instance?.hasStructure()){let n=ee.instance.getStructure().getViews();for(let s=0;s<n.length;s++){let o=n[s];bE(o.documentUri,uM.readFileSync(o.path,{encoding:"utf8"})),xT(o.documentUri)}}}function Ey(t){let e={edit:t};Fe.sendRequest("workspace/applyEdit",e)}function X1(t){}function xT(t){if(t=decodeURIComponent(t),_e.hasDocument(t)){let e=_e.getDocument(t),i=e.getAllAntlersNodes();Vi.instance?.clearIssues(t),an.instance?.clearAllReferences(t),Bs.clear(t);let r=[],n=[],s=[],o=[],a=[],l=[];for(let c=0;c<i.length;c++){let f=i[c],d=f.getTagName();if(d==="yield"||d=="yields"){let p=f.reference;p!=null&&p instanceof pl&&r.push(p)}else if(d==="partial")s.push(f);else if(d==="cache")o.push(f);else if(f.runtimeName()=="session:set"||f.runtimeName()=="session:flash"){let p=f.reference;p!=null&&p instanceof Hs&&n.push(p)}if(f.modifiers!=null){let p=f.modifiers.getModifierValue("partial");if(p!=null){let y=ee.instance?.getStructure().findPartial(p);y!=null&&(an.instance?.clearRemovesPageScope(y.originalDocumentUri),an.instance?.setRemovesPageScope(y.originalDocumentUri,f))}}if(f.isTagNode){let p=Ne.instance?.findTag(f.runtimeName());p!=null&&p.requiresClose&&f.isClosedBy==null&&f.isClosingTag==!1&&f.isSelfClosing==!1&&a.push(f)}else f.manifestType==="array"&&f.isClosedBy==null&&a.push(f);let h=Vi.instance?.checkNode(f)??[];h.length>0&&(l=l.concat(h))}let u=Vi.instance?.checkDocument(e)??[];u.length>0&&(l=l.concat(u)),a.length>0&&Bs.registerNodes(t,a),Go.instance?.registerInjections(t,s),Ud.instance?.registerDocumentSections(t,r),an.instance?.registerPartialReferences(t,s),an.instance?.registerCacheReferences(t,o),Vi.instance?.registerDiagnostics(t,l),Vo.instance?.registerDocumentSessionVariables(t,n)}}Fe.listen();0&&(module.exports={getAntlersSettings,globalSettings,requestEdits,sendProjectDetails});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */

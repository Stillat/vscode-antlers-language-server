#!/usr/bin/env node
var iR=Object.create;var hc=Object.defineProperty;var sR=Object.getOwnPropertyDescriptor;var aR=Object.getOwnPropertyNames;var oR=Object.getPrototypeOf,lR=Object.prototype.hasOwnProperty;var bg=t=>hc(t,"__esModule",{value:!0});var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),cR=(t,e)=>{for(var r in e)hc(t,r,{get:e[r],enumerable:!0})},Tg=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aR(e))!lR.call(t,i)&&(r||i!=="default")&&hc(t,i,{get:()=>e[i],enumerable:!(n=sR(e,i))||n.enumerable});return t},Q=(t,e)=>Tg(bg(hc(t!=null?iR(oR(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),uR=(t=>(e,r)=>t&&t.get(e)||(r=Tg(bg({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var vg=$((Ng,gc)=>{(function(t){if(typeof gc=="object"&&typeof gc.exports=="object"){var e=t(require,Ng);e!==void 0&&(gc.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function l(c,u,f,m){this._uri=c,this._languageId=u,this._version=f,this._content=m,this._lineOffsets=void 0}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),l.prototype.getText=function(c){if(c){var u=this.offsetAt(c.start),f=this.offsetAt(c.end);return this._content.substring(u,f)}return this._content},l.prototype.update=function(c,u){for(var f=0,m=c;f<m.length;f++){var p=m[f];if(l.isIncremental(p)){var d=a(p.range),_=this.offsetAt(d.start),P=this.offsetAt(d.end);this._content=this._content.substring(0,_)+p.text+this._content.substring(P,this._content.length);var h=Math.max(d.start.line,0),y=Math.max(d.end.line,0),g=this._lineOffsets,N=s(p.text,!1,_);if(y-h===N.length)for(var S=0,V=N.length;S<V;S++)g[S+h+1]=N[S];else N.length<1e4?g.splice.apply(g,[h+1,y-h].concat(N)):this._lineOffsets=g=g.slice(0,h+1).concat(N,g.slice(y+1));var O=p.text.length-(P-_);if(O!==0)for(var S=h+1+N.length,V=g.length;S<V;S++)g[S]=g[S]+O}else if(l.isFull(p))this._content=p.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=u},l.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=s(this._content,!0)),this._lineOffsets},l.prototype.positionAt=function(c){c=Math.max(Math.min(c,this._content.length),0);var u=this.getLineOffsets(),f=0,m=u.length;if(m===0)return{line:0,character:c};for(;f<m;){var p=Math.floor((f+m)/2);u[p]>c?m=p:f=p+1}var d=f-1;return{line:d,character:c-u[d]}},l.prototype.offsetAt=function(c){var u=this.getLineOffsets();if(c.line>=u.length)return this._content.length;if(c.line<0)return 0;var f=u[c.line],m=c.line+1<u.length?u[c.line+1]:this._content.length;return Math.max(Math.min(f+c.character,m),f)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),l.isIncremental=function(c){var u=c;return u!=null&&typeof u.text=="string"&&u.range!==void 0&&(u.rangeLength===void 0||typeof u.rangeLength=="number")},l.isFull=function(c){var u=c;return u!=null&&typeof u.text=="string"&&u.range===void 0&&u.rangeLength===void 0},l}(),n;(function(l){function c(m,p,d,_){return new r(m,p,d,_)}l.create=c;function u(m,p,d){if(m instanceof r)return m.update(p,d),m;throw new Error("TextDocument.update: document must be created by TextDocument.create")}l.update=u;function f(m,p){for(var d=m.getText(),_=i(p.map(o),function(V,O){var Y=V.range.start.line-O.range.start.line;return Y===0?V.range.start.character-O.range.start.character:Y}),P=0,h=[],y=0,g=_;y<g.length;y++){var N=g[y],S=m.offsetAt(N.range.start);if(S<P)throw new Error("Overlapping edit");S>P&&h.push(d.substring(P,S)),N.newText.length&&h.push(N.newText),P=m.offsetAt(N.range.end)}return h.push(d.substr(P)),h.join("")}l.applyEdits=f})(n=e.TextDocument||(e.TextDocument={}));function i(l,c){if(l.length<=1)return l;var u=l.length/2|0,f=l.slice(0,u),m=l.slice(u);i(f,c),i(m,c);for(var p=0,d=0,_=0;p<f.length&&d<m.length;){var P=c(f[p],m[d]);P<=0?l[_++]=f[p++]:l[_++]=m[d++]}for(;p<f.length;)l[_++]=f[p++];for(;d<m.length;)l[_++]=m[d++];return l}function s(l,c,u){u===void 0&&(u=0);for(var f=c?[u]:[],m=0;m<l.length;m++){var p=l.charCodeAt(m);(p===13||p===10)&&(p===13&&m+1<l.length&&l.charCodeAt(m+1)===10&&m++,f.push(u+m+1))}return f}function a(l){var c=l.start,u=l.end;return c.line>u.line||c.line===u.line&&c.character>u.character?{start:u,end:c}:l}function o(l){var c=a(l.range);return c!==l.range?{newText:l.newText,range:c}:l}})});var _c=$(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.thenable=Et.typedArray=Et.stringArray=Et.array=Et.func=Et.error=Et.number=Et.string=Et.boolean=void 0;function fR(t){return t===!0||t===!1}Et.boolean=fR;function Pg(t){return typeof t=="string"||t instanceof String}Et.string=Pg;function pR(t){return typeof t=="number"||t instanceof Number}Et.number=pR;function dR(t){return t instanceof Error}Et.error=dR;function Ig(t){return typeof t=="function"}Et.func=Ig;function Sg(t){return Array.isArray(t)}Et.array=Sg;function mR(t){return Sg(t)&&t.every(e=>Pg(e))}Et.stringArray=mR;function hR(t,e){return Array.isArray(t)&&t.every(e)}Et.typedArray=hR;function gR(t){return t&&Ig(t.then)}Et.thenable=gR});var Si=$(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});var Zf;function ep(){if(Zf===void 0)throw new Error("No runtime abstraction layer installed");return Zf}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Zf=r}t.install=e})(ep||(ep={}));tp.default=ep});var rp=$(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.Disposable=void 0;var _R;(function(t){function e(r){return{dispose:r}}t.create=e})(_R=Ko.Disposable||(Ko.Disposable={}))});var Rg=$(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.AbstractMessageBuffer=void 0;var yR=13,bR=10,TR=`\r
`,Cg=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let l=this._chunks[r];n=0;t:for(;n<l.length;){switch(l[n]){case yR:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case bR:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=l.byteLength,r++}if(e!==4)return;let s=this._read(i+n),a=new Map,o=this.toString(s,"ascii").split(TR);if(o.length<2)return a;for(let l=0;l<o.length-2;l++){let c=o[l],u=c.indexOf(":");if(u===-1)throw new Error("Message header must separate key and value using :");let f=c.substr(0,u),m=c.substr(u+1).trim();a.set(f,m)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};yc.AbstractMessageBuffer=Cg});var Og=$(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});var NR=Si(),Ag=require("util"),xs=rp(),vR=Rg(),$o=class extends vR.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return $o.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new Ag.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};$o.emptyBuffer=Buffer.allocUnsafe(0);var xg=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),xs.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),xs.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),xs.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),xs.Disposable.create(()=>this.stream.off("data",e))}},Eg=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),xs.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),xs.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),xs.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let s=a=>{a==null?n():i(a)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},wg=Object.freeze({messageBuffer:Object.freeze({create:t=>new $o(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Ag.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new xg(t),asWritableStream:t=>new Eg(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){return setTimeout(t,e,...r)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function np(){return wg}(function(t){function e(){NR.default.install(wg)}t.install=e})(np||(np={}));ip.default=np});var Ia=$(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.stringArray=ur.array=ur.func=ur.error=ur.number=ur.string=ur.boolean=void 0;function PR(t){return t===!0||t===!1}ur.boolean=PR;function Dg(t){return typeof t=="string"||t instanceof String}ur.string=Dg;function IR(t){return typeof t=="number"||t instanceof Number}ur.number=IR;function SR(t){return t instanceof Error}ur.error=SR;function CR(t){return typeof t=="function"}ur.func=CR;function Lg(t){return Array.isArray(t)}ur.array=Lg;function RR(t){return Lg(t)&&t.every(e=>Dg(e))}ur.stringArray=RR});var sp=$(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.isResponseMessage=le.isNotificationMessage=le.isRequestMessage=le.NotificationType9=le.NotificationType8=le.NotificationType7=le.NotificationType6=le.NotificationType5=le.NotificationType4=le.NotificationType3=le.NotificationType2=le.NotificationType1=le.NotificationType0=le.NotificationType=le.RequestType9=le.RequestType8=le.RequestType7=le.RequestType6=le.RequestType5=le.RequestType4=le.RequestType3=le.RequestType2=le.RequestType1=le.RequestType=le.RequestType0=le.AbstractMessageSignature=le.ParameterStructures=le.ResponseError=le.ErrorCodes=void 0;var Es=Ia(),kg;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(kg=le.ErrorCodes||(le.ErrorCodes={}));var bc=class extends Error{constructor(e,r,n){super(r);this.code=Es.number(e)?e:kg.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,bc.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};le.ResponseError=bc;var nr=class{constructor(e){this.kind=e}static is(e){return e===nr.auto||e===nr.byName||e===nr.byPosition}toString(){return this.kind}};le.ParameterStructures=nr;nr.auto=new nr("auto");nr.byPosition=new nr("byPosition");nr.byName=new nr("byName");var ht=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return nr.auto}};le.AbstractMessageSignature=ht;var Mg=class extends ht{constructor(e){super(e,0)}};le.RequestType0=Mg;var Fg=class extends ht{constructor(e,r=nr.auto){super(e,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};le.RequestType=Fg;var Vg=class extends ht{constructor(e,r=nr.auto){super(e,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};le.RequestType1=Vg;var qg=class extends ht{constructor(e){super(e,2)}};le.RequestType2=qg;var Bg=class extends ht{constructor(e){super(e,3)}};le.RequestType3=Bg;var jg=class extends ht{constructor(e){super(e,4)}};le.RequestType4=jg;var Ug=class extends ht{constructor(e){super(e,5)}};le.RequestType5=Ug;var Gg=class extends ht{constructor(e){super(e,6)}};le.RequestType6=Gg;var Wg=class extends ht{constructor(e){super(e,7)}};le.RequestType7=Wg;var Hg=class extends ht{constructor(e){super(e,8)}};le.RequestType8=Hg;var Yg=class extends ht{constructor(e){super(e,9)}};le.RequestType9=Yg;var Kg=class extends ht{constructor(e,r=nr.auto){super(e,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};le.NotificationType=Kg;var $g=class extends ht{constructor(e){super(e,0)}};le.NotificationType0=$g;var zg=class extends ht{constructor(e,r=nr.auto){super(e,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};le.NotificationType1=zg;var Xg=class extends ht{constructor(e){super(e,2)}};le.NotificationType2=Xg;var Qg=class extends ht{constructor(e){super(e,3)}};le.NotificationType3=Qg;var Jg=class extends ht{constructor(e){super(e,4)}};le.NotificationType4=Jg;var Zg=class extends ht{constructor(e){super(e,5)}};le.NotificationType5=Zg;var e_=class extends ht{constructor(e){super(e,6)}};le.NotificationType6=e_;var t_=class extends ht{constructor(e){super(e,7)}};le.NotificationType7=t_;var r_=class extends ht{constructor(e){super(e,8)}};le.NotificationType8=r_;var n_=class extends ht{constructor(e){super(e,9)}};le.NotificationType9=n_;function AR(t){let e=t;return e&&Es.string(e.method)&&(Es.string(e.id)||Es.number(e.id))}le.isRequestMessage=AR;function xR(t){let e=t;return e&&Es.string(e.method)&&t.id===void 0}le.isNotificationMessage=xR;function ER(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Es.string(e.id)||Es.number(e.id)||e.id===null)}le.isResponseMessage=ER});var Sa=$(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.Emitter=ws.Event=void 0;var wR=Si(),OR;(function(t){let e={dispose(){}};t.None=function(){return e}})(OR=ws.Event||(ws.Event={}));var i_=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{r.push(n[s].apply(i[s],e))}catch(o){wR.default().console.error(o)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},zo=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new i_),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,r),i.dispose=zo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ws.Emitter=zo;zo._noop=function(){}});var cp=$(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.CancellationTokenSource=Os.CancellationToken=void 0;var s_=Si(),DR=Ia(),ap=Sa(),op;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ap.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ap.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||DR.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(op=Os.CancellationToken||(Os.CancellationToken={}));var LR=Object.freeze(function(t,e){let r=s_.default().timer.setTimeout(t.bind(e),0);return{dispose(){s_.default().timer.clearTimeout(r)}}}),lp=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?LR:(this._emitter||(this._emitter=new ap.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},a_=class{get token(){return this._token||(this._token=new lp),this._token}cancel(){this._token?this._token.cancel():this._token=op.Cancelled}dispose(){this._token?this._token instanceof lp&&this._token.dispose():this._token=op.None}};Os.CancellationTokenSource=a_});var l_=$(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.ReadableStreamMessageReader=Ci.AbstractMessageReader=Ci.MessageReader=void 0;var Tc=Si(),Ca=Ia(),up=Sa(),kR;(function(t){function e(r){let n=r;return n&&Ca.func(n.listen)&&Ca.func(n.dispose)&&Ca.func(n.onError)&&Ca.func(n.onClose)&&Ca.func(n.onPartialMessage)}t.is=e})(kR=Ci.MessageReader||(Ci.MessageReader={}));var fp=class{constructor(){this.errorEmitter=new up.Emitter,this.closeEmitter=new up.Emitter,this.partialMessageEmitter=new up.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Ca.string(e.message)?e.message:"unknown"}`)}};Ci.AbstractMessageReader=fp;var pp;(function(t){function e(r){var n;let i,s,a,o=new Map,l,c=new Map;if(r===void 0||typeof r=="string")i=r??"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(a=r.contentDecoder,o.set(a.name,a)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)o.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,c.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=Tc.default().applicationJson.decoder,c.set(l.name,l)),{charset:i,contentDecoder:a,contentDecoders:o,contentTypeDecoder:l,contentTypeDecoders:c}}t.fromOptions=e})(pp||(pp={}));var o_=class extends fp{constructor(e,r){super();this.readable=e,this.options=pp.fromOptions(r),this.buffer=Tc.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let a=parseInt(s);if(isNaN(a))throw new Error("Content-Length value must be a number.");this.nextMessageLength=a}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(Tc.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Tc.default().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ci.ReadableStreamMessageReader=o_});var u_=$(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.Semaphore=void 0;var MR=Si(),c_=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||MR.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};Nc.Semaphore=c_});var h_=$(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.WriteableStreamMessageWriter=Ri.AbstractMessageWriter=Ri.MessageWriter=void 0;var f_=Si(),Xo=Ia(),FR=u_(),p_=Sa(),VR="Content-Length: ",d_=`\r
`,qR;(function(t){function e(r){let n=r;return n&&Xo.func(n.dispose)&&Xo.func(n.onClose)&&Xo.func(n.onError)&&Xo.func(n.write)}t.is=e})(qR=Ri.MessageWriter||(Ri.MessageWriter={}));var dp=class{constructor(){this.errorEmitter=new p_.Emitter,this.closeEmitter=new p_.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Xo.string(e.message)?e.message:"unknown"}`)}};Ri.AbstractMessageWriter=dp;var mp;(function(t){function e(r){var n,i;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:f_.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:f_.default().applicationJson.encoder}}t.fromOptions=e})(mp||(mp={}));var m_=class extends dp{constructor(e,r){super();this.writable=e,this.options=mp.fromOptions(r),this.errorCount=0,this.writeSemaphore=new FR.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(VR,n.byteLength.toString(),d_),i.push(d_),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Ri.WriteableStreamMessageWriter=m_});var __=$(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.LRUCache=Ai.LinkedMap=Ai.Touch=void 0;var yr;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(yr=Ai.Touch||(Ai.Touch={}));var hp=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,r=yr.None){let n=this._map.get(e);if(!!n)return r!==yr.None&&this.touch(n,r),n.value}set(e,r,n=yr.None){let i=this._map.get(e);if(i)i.value=r,n!==yr.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case yr.None:this.addItemLast(i);break;case yr.First:this.addItemFirst(i);break;case yr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==yr.First&&r!==yr.Last)){if(r===yr.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===yr.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Ai.LinkedMap=hp;var g_=class extends hp{constructor(e,r=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=yr.AsNew){return super.get(e,r)}peek(e){return super.get(e,yr.None)}set(e,r){return super.set(e,r,yr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ai.LRUCache=g_});var P_=$(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.createMessageConnection=ve.ConnectionOptions=ve.CancellationStrategy=ve.CancellationSenderStrategy=ve.CancellationReceiverStrategy=ve.ConnectionStrategy=ve.ConnectionError=ve.ConnectionErrors=ve.LogTraceNotification=ve.SetTraceNotification=ve.TraceFormat=ve.Trace=ve.NullLogger=ve.ProgressType=void 0;var y_=Si(),Kt=Ia(),be=sp(),b_=__(),Qo=Sa(),gp=cp(),Jo;(function(t){t.type=new be.NotificationType("$/cancelRequest")})(Jo||(Jo={}));var vc;(function(t){t.type=new be.NotificationType("$/progress")})(vc||(vc={}));var T_=class{constructor(){}};ve.ProgressType=T_;var _p;(function(t){function e(r){return Kt.func(r)}t.is=e})(_p||(_p={}));ve.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var wt;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(wt=ve.Trace||(ve.Trace={}));(function(t){function e(n){if(!Kt.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(wt=ve.Trace||(ve.Trace={}));var Cn;(function(t){t.Text="text",t.JSON="json"})(Cn=ve.TraceFormat||(ve.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(Cn=ve.TraceFormat||(ve.TraceFormat={}));var N_;(function(t){t.type=new be.NotificationType("$/setTrace")})(N_=ve.SetTraceNotification||(ve.SetTraceNotification={}));var yp;(function(t){t.type=new be.NotificationType("$/logTrace")})(yp=ve.LogTraceNotification||(ve.LogTraceNotification={}));var Pc;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Pc=ve.ConnectionErrors||(ve.ConnectionErrors={}));var Ds=class extends Error{constructor(e,r){super(r);this.code=e,Object.setPrototypeOf(this,Ds.prototype)}};ve.ConnectionError=Ds;var v_;(function(t){function e(r){let n=r;return n&&Kt.func(n.cancelUndispatched)}t.is=e})(v_=ve.ConnectionStrategy||(ve.ConnectionStrategy={}));var bp;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new gp.CancellationTokenSource}});function e(r){let n=r;return n&&Kt.func(n.createCancellationTokenSource)}t.is=e})(bp=ve.CancellationReceiverStrategy||(ve.CancellationReceiverStrategy={}));var Tp;(function(t){t.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Jo.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Kt.func(n.sendCancellation)&&Kt.func(n.cleanup)}t.is=e})(Tp=ve.CancellationSenderStrategy||(ve.CancellationSenderStrategy={}));var Np;(function(t){t.Message=Object.freeze({receiver:bp.Message,sender:Tp.Message});function e(r){let n=r;return n&&bp.is(n.receiver)&&Tp.is(n.sender)}t.is=e})(Np=ve.CancellationStrategy||(ve.CancellationStrategy={}));var BR;(function(t){function e(r){let n=r;return n&&(Np.is(n.cancellationStrategy)||v_.is(n.connectionStrategy))}t.is=e})(BR=ve.ConnectionOptions||(ve.ConnectionOptions={}));var Rn;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Rn||(Rn={}));function jR(t,e,r,n){let i=r!==void 0?r:ve.NullLogger,s=0,a=0,o=0,l="2.0",c,u=Object.create(null),f,m=Object.create(null),p=new Map,d,_=new b_.LinkedMap,P=Object.create(null),h=Object.create(null),y=wt.Off,g=Cn.Text,N,S=Rn.New,V=new Qo.Emitter,O=new Qo.Emitter,Y=new Qo.Emitter,z=new Qo.Emitter,X=new Qo.Emitter,K=n&&n.cancellationStrategy?n.cancellationStrategy:Np.Message;function re(I){if(I===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+I.toString()}function De(I){return I===null?"res-unknown-"+(++o).toString():"res-"+I.toString()}function de(){return"not-"+(++a).toString()}function te(I,C){be.isRequestMessage(C)?I.set(re(C.id),C):be.isResponseMessage(C)?I.set(De(C.id),C):I.set(de(),C)}function We(I){}function ut(){return S===Rn.Listening}function Vt(){return S===Rn.Closed}function Ve(){return S===Rn.Disposed}function ft(){(S===Rn.New||S===Rn.Listening)&&(S=Rn.Closed,O.fire(void 0))}function Ti(I){V.fire([I,void 0,void 0])}function $i(I){V.fire(I)}t.onClose(ft),t.onError(Ti),e.onClose(ft),e.onError($i);function ce(){d||_.size===0||(d=y_.default().timer.setImmediate(()=>{d=void 0,oe()}))}function oe(){if(_.size===0)return;let I=_.shift();try{be.isRequestMessage(I)?se(I):be.isNotificationMessage(I)?Pt(I):be.isResponseMessage(I)?Ne(I):In(I)}finally{ce()}}let he=I=>{try{if(be.isNotificationMessage(I)&&I.method===Jo.type.method){let C=re(I.params.id),b=_.get(C);if(be.isRequestMessage(b)){let x=n==null?void 0:n.connectionStrategy,w=x&&x.cancelUndispatched?x.cancelUndispatched(b,We):void 0;if(w&&(w.error!==void 0||w.result!==void 0)){_.delete(C),w.id=b.id,ti(w,I.method,Date.now()),e.write(w);return}}}te(_,I)}finally{ce()}};function se(I){if(Ve())return;function C(F,ie,pe){let we={jsonrpc:l,id:I.id};F instanceof be.ResponseError?we.error=F.toJson():we.result=F===void 0?null:F,ti(we,ie,pe),e.write(we)}function b(F,ie,pe){let we={jsonrpc:l,id:I.id,error:F.toJson()};ti(we,ie,pe),e.write(we)}function x(F,ie,pe){F===void 0&&(F=null);let we={jsonrpc:l,id:I.id,result:F};ti(we,ie,pe),e.write(we)}As(I);let w=u[I.method],R,T;w&&(R=w.type,T=w.handler);let D=Date.now();if(T||c){let F=String(I.id),ie=K.receiver.createCancellationTokenSource(F);h[F]=ie;try{let pe;if(T)if(I.params===void 0){if(R!==void 0&&R.numberOfParams!==0){b(new be.ResponseError(be.ErrorCodes.InvalidParams,`Request ${I.method} defines ${R.numberOfParams} params but recevied none.`),I.method,D);return}pe=T(ie.token)}else if(Array.isArray(I.params)){if(R!==void 0&&R.parameterStructures===be.ParameterStructures.byName){b(new be.ResponseError(be.ErrorCodes.InvalidParams,`Request ${I.method} defines parameters by name but received parameters by position`),I.method,D);return}pe=T(...I.params,ie.token)}else{if(R!==void 0&&R.parameterStructures===be.ParameterStructures.byPosition){b(new be.ResponseError(be.ErrorCodes.InvalidParams,`Request ${I.method} defines parameters by position but received parameters by name`),I.method,D);return}pe=T(I.params,ie.token)}else c&&(pe=c(I.method,I.params,ie.token));let we=pe;pe?we.then?we.then(at=>{delete h[F],C(at,I.method,D)},at=>{delete h[F],at instanceof be.ResponseError?b(at,I.method,D):at&&Kt.string(at.message)?b(new be.ResponseError(be.ErrorCodes.InternalError,`Request ${I.method} failed with message: ${at.message}`),I.method,D):b(new be.ResponseError(be.ErrorCodes.InternalError,`Request ${I.method} failed unexpectedly without providing any details.`),I.method,D)}):(delete h[F],C(pe,I.method,D)):(delete h[F],x(pe,I.method,D))}catch(pe){delete h[F],pe instanceof be.ResponseError?C(pe,I.method,D):pe&&Kt.string(pe.message)?b(new be.ResponseError(be.ErrorCodes.InternalError,`Request ${I.method} failed with message: ${pe.message}`),I.method,D):b(new be.ResponseError(be.ErrorCodes.InternalError,`Request ${I.method} failed unexpectedly without providing any details.`),I.method,D)}}else b(new be.ResponseError(be.ErrorCodes.MethodNotFound,`Unhandled method ${I.method}`),I.method,D)}function Ne(I){if(!Ve())if(I.id===null)I.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(I.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let C=String(I.id),b=P[C];if(va(I,b),b){delete P[C];try{if(I.error){let x=I.error;b.reject(new be.ResponseError(x.code,x.message,x.data))}else if(I.result!==void 0)b.resolve(I.result);else throw new Error("Should never happen.")}catch(x){x.message?i.error(`Response handler '${b.method}' failed with message: ${x.message}`):i.error(`Response handler '${b.method}' failed unexpectedly.`)}}}}function Pt(I){if(Ve())return;let C,b;if(I.method===Jo.type.method)b=x=>{let w=x.id,R=h[String(w)];R&&R.cancel()};else{let x=m[I.method];x&&(b=x.handler,C=x.type)}if(b||f)try{Na(I),b?I.params===void 0?(C!==void 0&&C.numberOfParams!==0&&C.parameterStructures!==be.ParameterStructures.byName&&i.error(`Notification ${I.method} defines ${C.numberOfParams} params but recevied none.`),b()):Array.isArray(I.params)?(C!==void 0&&(C.parameterStructures===be.ParameterStructures.byName&&i.error(`Notification ${I.method} defines parameters by name but received parameters by position`),C.numberOfParams!==I.params.length&&i.error(`Notification ${I.method} defines ${C.numberOfParams} params but received ${I.params.length} argumennts`)),b(...I.params)):(C!==void 0&&C.parameterStructures===be.ParameterStructures.byPosition&&i.error(`Notification ${I.method} defines parameters by position but received parameters by name`),b(I.params)):f&&f(I.method,I.params)}catch(x){x.message?i.error(`Notification handler '${I.method}' failed with message: ${x.message}`):i.error(`Notification handler '${I.method}' failed unexpectedly.`)}else Y.fire(I)}function In(I){if(!I){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(I,null,4)}`);let C=I;if(Kt.string(C.id)||Kt.number(C.id)){let b=String(C.id),x=P[b];x&&x.reject(new Error("The received response has neither a result nor an error property."))}}function ba(I){if(!(y===wt.Off||!N))if(g===Cn.Text){let C;y===wt.Verbose&&I.params&&(C=`Params: ${JSON.stringify(I.params,null,4)}

`),N.log(`Sending request '${I.method} - (${I.id})'.`,C)}else qr("send-request",I)}function Ta(I){if(!(y===wt.Off||!N))if(g===Cn.Text){let C;y===wt.Verbose&&(I.params?C=`Params: ${JSON.stringify(I.params,null,4)}

`:C=`No parameters provided.

`),N.log(`Sending notification '${I.method}'.`,C)}else qr("send-notification",I)}function ti(I,C,b){if(!(y===wt.Off||!N))if(g===Cn.Text){let x;y===wt.Verbose&&(I.error&&I.error.data?x=`Error data: ${JSON.stringify(I.error.data,null,4)}

`:I.result?x=`Result: ${JSON.stringify(I.result,null,4)}

`:I.error===void 0&&(x=`No result returned.

`)),N.log(`Sending response '${C} - (${I.id})'. Processing request took ${Date.now()-b}ms`,x)}else qr("send-response",I)}function As(I){if(!(y===wt.Off||!N))if(g===Cn.Text){let C;y===wt.Verbose&&I.params&&(C=`Params: ${JSON.stringify(I.params,null,4)}

`),N.log(`Received request '${I.method} - (${I.id})'.`,C)}else qr("receive-request",I)}function Na(I){if(!(y===wt.Off||!N||I.method===yp.type.method))if(g===Cn.Text){let C;y===wt.Verbose&&(I.params?C=`Params: ${JSON.stringify(I.params,null,4)}

`:C=`No parameters provided.

`),N.log(`Received notification '${I.method}'.`,C)}else qr("receive-notification",I)}function va(I,C){if(!(y===wt.Off||!N))if(g===Cn.Text){let b;if(y===wt.Verbose&&(I.error&&I.error.data?b=`Error data: ${JSON.stringify(I.error.data,null,4)}

`:I.result?b=`Result: ${JSON.stringify(I.result,null,4)}

`:I.error===void 0&&(b=`No result returned.

`)),C){let x=I.error?` Request failed: ${I.error.message} (${I.error.code}).`:"";N.log(`Received response '${C.method} - (${I.id})' in ${Date.now()-C.timerStart}ms.${x}`,b)}else N.log(`Received response ${I.id} without active response promise.`,b)}else qr("receive-response",I)}function qr(I,C){if(!N||y===wt.Off)return;let b={isLSPMessage:!0,type:I,message:C,timestamp:Date.now()};N.log(b)}function Ct(){if(Vt())throw new Ds(Pc.Closed,"Connection is closed.");if(Ve())throw new Ds(Pc.Disposed,"Connection is disposed.")}function Ni(){if(ut())throw new Ds(Pc.AlreadyListening,"Connection is already listening")}function zi(){if(!ut())throw new Error("Call listen() first.")}function Sn(I){return I===void 0?null:I}function vi(I){if(I!==null)return I}function Pi(I){return I!=null&&!Array.isArray(I)&&typeof I=="object"}function Ii(I,C){switch(I){case be.ParameterStructures.auto:return Pi(C)?vi(C):[Sn(C)];case be.ParameterStructures.byName:if(!Pi(C))throw new Error("Recevied parameters by name but param is not an object literal.");return vi(C);case be.ParameterStructures.byPosition:return[Sn(C)];default:throw new Error(`Unknown parameter structure ${I.toString()}`)}}function ri(I,C){let b,x=I.numberOfParams;switch(x){case 0:b=void 0;break;case 1:b=Ii(I.parameterStructures,C[0]);break;default:b=[];for(let w=0;w<C.length&&w<x;w++)b.push(Sn(C[w]));if(C.length<x)for(let w=C.length;w<x;w++)b.push(null);break}return b}let nn={sendNotification:(I,...C)=>{Ct();let b,x;if(Kt.string(I)){b=I;let R=C[0],T=0,D=be.ParameterStructures.auto;be.ParameterStructures.is(R)&&(T=1,D=R);let F=C.length,ie=F-T;switch(ie){case 0:x=void 0;break;case 1:x=Ii(D,C[T]);break;default:if(D===be.ParameterStructures.byName)throw new Error(`Recevied ${ie} parameters for 'by Name' notification parameter structure.`);x=C.slice(T,F).map(pe=>Sn(pe));break}}else{let R=C;b=I.method,x=ri(I,R)}let w={jsonrpc:l,method:b,params:x};Ta(w),e.write(w)},onNotification:(I,C)=>{Ct();let b;return Kt.func(I)?f=I:C&&(Kt.string(I)?(b=I,m[I]={type:void 0,handler:C}):(b=I.method,m[I.method]={type:I,handler:C})),{dispose:()=>{b!==void 0?delete m[b]:f=void 0}}},onProgress:(I,C,b)=>{if(p.has(C))throw new Error(`Progress handler for token ${C} already registered`);return p.set(C,b),{dispose:()=>{p.delete(C)}}},sendProgress:(I,C,b)=>{nn.sendNotification(vc.type,{token:C,value:b})},onUnhandledProgress:z.event,sendRequest:(I,...C)=>{Ct(),zi();let b,x,w;if(Kt.string(I)){b=I;let F=C[0],ie=C[C.length-1],pe=0,we=be.ParameterStructures.auto;be.ParameterStructures.is(F)&&(pe=1,we=F);let at=C.length;gp.CancellationToken.is(ie)&&(at=at-1,w=ie);let qt=at-pe;switch(qt){case 0:x=void 0;break;case 1:x=Ii(we,C[pe]);break;default:if(we===be.ParameterStructures.byName)throw new Error(`Recevied ${qt} parameters for 'by Name' request parameter structure.`);x=C.slice(pe,at).map(Yt=>Sn(Yt));break}}else{let F=C;b=I.method,x=ri(I,F);let ie=I.numberOfParams;w=gp.CancellationToken.is(F[ie])?F[ie]:void 0}let R=s++,T;return w&&(T=w.onCancellationRequested(()=>{K.sender.sendCancellation(nn,R)})),new Promise((F,ie)=>{let pe={jsonrpc:l,id:R,method:b,params:x},we=Yt=>{F(Yt),K.sender.cleanup(R),T==null||T.dispose()},at=Yt=>{ie(Yt),K.sender.cleanup(R),T==null||T.dispose()},qt={method:b,timerStart:Date.now(),resolve:we,reject:at};ba(pe);try{e.write(pe)}catch(Yt){qt.reject(new be.ResponseError(be.ErrorCodes.MessageWriteError,Yt.message?Yt.message:"Unknown reason")),qt=null}qt&&(P[String(R)]=qt)})},onRequest:(I,C)=>{Ct();let b=null;return _p.is(I)?(b=void 0,c=I):Kt.string(I)?(b=null,C!==void 0&&(b=I,u[I]={handler:C,type:void 0})):C!==void 0&&(b=I.method,u[I.method]={type:I,handler:C}),{dispose:()=>{b!==null&&(b!==void 0?delete u[b]:c=void 0)}}},trace:(I,C,b)=>{let x=!1,w=Cn.Text;b!==void 0&&(Kt.boolean(b)?x=b:(x=b.sendNotification||!1,w=b.traceFormat||Cn.Text)),y=I,g=w,y===wt.Off?N=void 0:N=C,x&&!Vt()&&!Ve()&&nn.sendNotification(N_.type,{value:wt.toString(I)})},onError:V.event,onClose:O.event,onUnhandledNotification:Y.event,onDispose:X.event,end:()=>{e.end()},dispose:()=>{if(Ve())return;S=Rn.Disposed,X.fire(void 0);let I=new Error("Connection got disposed.");Object.keys(P).forEach(C=>{P[C].reject(I)}),P=Object.create(null),h=Object.create(null),_=new b_.LinkedMap,Kt.func(e.dispose)&&e.dispose(),Kt.func(t.dispose)&&t.dispose()},listen:()=>{Ct(),Ni(),S=Rn.Listening,t.listen(he)},inspect:()=>{y_.default().console.log("inspect")}};return nn.onNotification(yp.type,I=>{y===wt.Off||!N||N.log(I.message,y===wt.Verbose?I.verbose:void 0)}),nn.onNotification(vc.type,I=>{let C=p.get(I.token);C?C(I.value):z.fire(I)}),nn}ve.createMessageConnection=jR});var Ip=$(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.CancellationSenderStrategy=U.CancellationReceiverStrategy=U.ConnectionError=U.ConnectionErrors=U.LogTraceNotification=U.SetTraceNotification=U.TraceFormat=U.Trace=U.ProgressType=U.createMessageConnection=U.NullLogger=U.ConnectionOptions=U.ConnectionStrategy=U.WriteableStreamMessageWriter=U.AbstractMessageWriter=U.MessageWriter=U.ReadableStreamMessageReader=U.AbstractMessageReader=U.MessageReader=U.CancellationToken=U.CancellationTokenSource=U.Emitter=U.Event=U.Disposable=U.ParameterStructures=U.NotificationType9=U.NotificationType8=U.NotificationType7=U.NotificationType6=U.NotificationType5=U.NotificationType4=U.NotificationType3=U.NotificationType2=U.NotificationType1=U.NotificationType0=U.NotificationType=U.ErrorCodes=U.ResponseError=U.RequestType9=U.RequestType8=U.RequestType7=U.RequestType6=U.RequestType5=U.RequestType4=U.RequestType3=U.RequestType2=U.RequestType1=U.RequestType0=U.RequestType=U.RAL=void 0;U.CancellationStrategy=void 0;var pt=sp();Object.defineProperty(U,"RequestType",{enumerable:!0,get:function(){return pt.RequestType}});Object.defineProperty(U,"RequestType0",{enumerable:!0,get:function(){return pt.RequestType0}});Object.defineProperty(U,"RequestType1",{enumerable:!0,get:function(){return pt.RequestType1}});Object.defineProperty(U,"RequestType2",{enumerable:!0,get:function(){return pt.RequestType2}});Object.defineProperty(U,"RequestType3",{enumerable:!0,get:function(){return pt.RequestType3}});Object.defineProperty(U,"RequestType4",{enumerable:!0,get:function(){return pt.RequestType4}});Object.defineProperty(U,"RequestType5",{enumerable:!0,get:function(){return pt.RequestType5}});Object.defineProperty(U,"RequestType6",{enumerable:!0,get:function(){return pt.RequestType6}});Object.defineProperty(U,"RequestType7",{enumerable:!0,get:function(){return pt.RequestType7}});Object.defineProperty(U,"RequestType8",{enumerable:!0,get:function(){return pt.RequestType8}});Object.defineProperty(U,"RequestType9",{enumerable:!0,get:function(){return pt.RequestType9}});Object.defineProperty(U,"ResponseError",{enumerable:!0,get:function(){return pt.ResponseError}});Object.defineProperty(U,"ErrorCodes",{enumerable:!0,get:function(){return pt.ErrorCodes}});Object.defineProperty(U,"NotificationType",{enumerable:!0,get:function(){return pt.NotificationType}});Object.defineProperty(U,"NotificationType0",{enumerable:!0,get:function(){return pt.NotificationType0}});Object.defineProperty(U,"NotificationType1",{enumerable:!0,get:function(){return pt.NotificationType1}});Object.defineProperty(U,"NotificationType2",{enumerable:!0,get:function(){return pt.NotificationType2}});Object.defineProperty(U,"NotificationType3",{enumerable:!0,get:function(){return pt.NotificationType3}});Object.defineProperty(U,"NotificationType4",{enumerable:!0,get:function(){return pt.NotificationType4}});Object.defineProperty(U,"NotificationType5",{enumerable:!0,get:function(){return pt.NotificationType5}});Object.defineProperty(U,"NotificationType6",{enumerable:!0,get:function(){return pt.NotificationType6}});Object.defineProperty(U,"NotificationType7",{enumerable:!0,get:function(){return pt.NotificationType7}});Object.defineProperty(U,"NotificationType8",{enumerable:!0,get:function(){return pt.NotificationType8}});Object.defineProperty(U,"NotificationType9",{enumerable:!0,get:function(){return pt.NotificationType9}});Object.defineProperty(U,"ParameterStructures",{enumerable:!0,get:function(){return pt.ParameterStructures}});var UR=rp();Object.defineProperty(U,"Disposable",{enumerable:!0,get:function(){return UR.Disposable}});var I_=Sa();Object.defineProperty(U,"Event",{enumerable:!0,get:function(){return I_.Event}});Object.defineProperty(U,"Emitter",{enumerable:!0,get:function(){return I_.Emitter}});var S_=cp();Object.defineProperty(U,"CancellationTokenSource",{enumerable:!0,get:function(){return S_.CancellationTokenSource}});Object.defineProperty(U,"CancellationToken",{enumerable:!0,get:function(){return S_.CancellationToken}});var vp=l_();Object.defineProperty(U,"MessageReader",{enumerable:!0,get:function(){return vp.MessageReader}});Object.defineProperty(U,"AbstractMessageReader",{enumerable:!0,get:function(){return vp.AbstractMessageReader}});Object.defineProperty(U,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return vp.ReadableStreamMessageReader}});var Pp=h_();Object.defineProperty(U,"MessageWriter",{enumerable:!0,get:function(){return Pp.MessageWriter}});Object.defineProperty(U,"AbstractMessageWriter",{enumerable:!0,get:function(){return Pp.AbstractMessageWriter}});Object.defineProperty(U,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Pp.WriteableStreamMessageWriter}});var Or=P_();Object.defineProperty(U,"ConnectionStrategy",{enumerable:!0,get:function(){return Or.ConnectionStrategy}});Object.defineProperty(U,"ConnectionOptions",{enumerable:!0,get:function(){return Or.ConnectionOptions}});Object.defineProperty(U,"NullLogger",{enumerable:!0,get:function(){return Or.NullLogger}});Object.defineProperty(U,"createMessageConnection",{enumerable:!0,get:function(){return Or.createMessageConnection}});Object.defineProperty(U,"ProgressType",{enumerable:!0,get:function(){return Or.ProgressType}});Object.defineProperty(U,"Trace",{enumerable:!0,get:function(){return Or.Trace}});Object.defineProperty(U,"TraceFormat",{enumerable:!0,get:function(){return Or.TraceFormat}});Object.defineProperty(U,"SetTraceNotification",{enumerable:!0,get:function(){return Or.SetTraceNotification}});Object.defineProperty(U,"LogTraceNotification",{enumerable:!0,get:function(){return Or.LogTraceNotification}});Object.defineProperty(U,"ConnectionErrors",{enumerable:!0,get:function(){return Or.ConnectionErrors}});Object.defineProperty(U,"ConnectionError",{enumerable:!0,get:function(){return Or.ConnectionError}});Object.defineProperty(U,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Or.CancellationReceiverStrategy}});Object.defineProperty(U,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Or.CancellationSenderStrategy}});Object.defineProperty(U,"CancellationStrategy",{enumerable:!0,get:function(){return Or.CancellationStrategy}});var GR=Si();U.RAL=GR.default});var Ea=$(ze=>{"use strict";var WR=ze&&ze.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HR=ze&&ze.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&WR(e,t,r)};Object.defineProperty(ze,"__esModule",{value:!0});ze.createMessageConnection=ze.createServerSocketTransport=ze.createClientSocketTransport=ze.createServerPipeTransport=ze.createClientPipeTransport=ze.generateRandomPipeName=ze.StreamMessageWriter=ze.StreamMessageReader=ze.SocketMessageWriter=ze.SocketMessageReader=ze.IPCMessageWriter=ze.IPCMessageReader=void 0;var Ra=Og();Ra.default.install();var ni=Ip(),C_=require("path"),YR=require("os"),KR=require("crypto"),Ic=require("net");HR(Ip(),ze);var R_=class extends ni.AbstractMessageReader{constructor(e){super();this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),ni.Disposable.create(()=>this.process.off("message",e))}};ze.IPCMessageReader=R_;var A_=class extends ni.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};ze.IPCMessageWriter=A_;var Aa=class extends ni.ReadableStreamMessageReader{constructor(e,r="utf-8"){super(Ra.default().stream.asReadableStream(e),r)}};ze.SocketMessageReader=Aa;var xa=class extends ni.WriteableStreamMessageWriter{constructor(e,r){super(Ra.default().stream.asWritableStream(e),r);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ze.SocketMessageWriter=xa;var Sp=class extends ni.ReadableStreamMessageReader{constructor(e,r){super(Ra.default().stream.asReadableStream(e),r)}};ze.StreamMessageReader=Sp;var Cp=class extends ni.WriteableStreamMessageWriter{constructor(e,r){super(Ra.default().stream.asWritableStream(e),r)}};ze.StreamMessageWriter=Cp;var x_=process.env.XDG_RUNTIME_DIR,$R=new Map([["linux",107],["darwin",103]]);function zR(){let t=KR.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;x_?e=C_.join(x_,`vscode-ipc-${t}.sock`):e=C_.join(YR.tmpdir(),`vscode-${t}.sock`);let r=$R.get(process.platform);return r!==void 0&&e.length>=r&&Ra.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}ze.generateRandomPipeName=zR;function XR(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let a=Ic.createServer(o=>{a.close(),r([new Aa(o,e),new xa(o,e)])});a.on("error",s),a.listen(t,()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}ze.createClientPipeTransport=XR;function QR(t,e="utf-8"){let r=Ic.createConnection(t);return[new Aa(r,e),new xa(r,e)]}ze.createServerPipeTransport=QR;function JR(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let a=Ic.createServer(o=>{a.close(),r([new Aa(o,e),new xa(o,e)])});a.on("error",s),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}ze.createClientSocketTransport=JR;function ZR(t,e="utf-8"){let r=Ic.createConnection(t,"127.0.0.1");return[new Aa(r,e),new xa(r,e)]}ze.createServerSocketTransport=ZR;function eA(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function tA(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function rA(t,e,r,n){r||(r=ni.NullLogger);let i=eA(t)?new Sp(t):t,s=tA(e)?new Cp(e):e;return ni.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),ni.createMessageConnection(i,s,r,n)}ze.createMessageConnection=rA});var Rp=$((HV,E_)=>{"use strict";E_.exports=Ea()});var ot=$((w_,Sc)=>{(function(t){if(typeof Sc=="object"&&typeof Sc.exports=="object"){var e=t(require,w_);e!==void 0&&(Sc.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var r;(function(b){b.MIN_VALUE=-2147483648,b.MAX_VALUE=2147483647})(r=e.integer||(e.integer={}));var n;(function(b){b.MIN_VALUE=0,b.MAX_VALUE=2147483647})(n=e.uinteger||(e.uinteger={}));var i;(function(b){function x(R,T){return R===Number.MAX_VALUE&&(R=n.MAX_VALUE),T===Number.MAX_VALUE&&(T=n.MAX_VALUE),{line:R,character:T}}b.create=x;function w(R){var T=R;return C.objectLiteral(T)&&C.uinteger(T.line)&&C.uinteger(T.character)}b.is=w})(i=e.Position||(e.Position={}));var s;(function(b){function x(R,T,D,F){if(C.uinteger(R)&&C.uinteger(T)&&C.uinteger(D)&&C.uinteger(F))return{start:i.create(R,T),end:i.create(D,F)};if(i.is(R)&&i.is(T))return{start:R,end:T};throw new Error("Range#create called with invalid arguments["+R+", "+T+", "+D+", "+F+"]")}b.create=x;function w(R){var T=R;return C.objectLiteral(T)&&i.is(T.start)&&i.is(T.end)}b.is=w})(s=e.Range||(e.Range={}));var a;(function(b){function x(R,T){return{uri:R,range:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&s.is(T.range)&&(C.string(T.uri)||C.undefined(T.uri))}b.is=w})(a=e.Location||(e.Location={}));var o;(function(b){function x(R,T,D,F){return{targetUri:R,targetRange:T,targetSelectionRange:D,originSelectionRange:F}}b.create=x;function w(R){var T=R;return C.defined(T)&&s.is(T.targetRange)&&C.string(T.targetUri)&&(s.is(T.targetSelectionRange)||C.undefined(T.targetSelectionRange))&&(s.is(T.originSelectionRange)||C.undefined(T.originSelectionRange))}b.is=w})(o=e.LocationLink||(e.LocationLink={}));var l;(function(b){function x(R,T,D,F){return{red:R,green:T,blue:D,alpha:F}}b.create=x;function w(R){var T=R;return C.numberRange(T.red,0,1)&&C.numberRange(T.green,0,1)&&C.numberRange(T.blue,0,1)&&C.numberRange(T.alpha,0,1)}b.is=w})(l=e.Color||(e.Color={}));var c;(function(b){function x(R,T){return{range:R,color:T}}b.create=x;function w(R){var T=R;return s.is(T.range)&&l.is(T.color)}b.is=w})(c=e.ColorInformation||(e.ColorInformation={}));var u;(function(b){function x(R,T,D){return{label:R,textEdit:T,additionalTextEdits:D}}b.create=x;function w(R){var T=R;return C.string(T.label)&&(C.undefined(T.textEdit)||g.is(T))&&(C.undefined(T.additionalTextEdits)||C.typedArray(T.additionalTextEdits,g.is))}b.is=w})(u=e.ColorPresentation||(e.ColorPresentation={}));var f;(function(b){b.Comment="comment",b.Imports="imports",b.Region="region"})(f=e.FoldingRangeKind||(e.FoldingRangeKind={}));var m;(function(b){function x(R,T,D,F,ie){var pe={startLine:R,endLine:T};return C.defined(D)&&(pe.startCharacter=D),C.defined(F)&&(pe.endCharacter=F),C.defined(ie)&&(pe.kind=ie),pe}b.create=x;function w(R){var T=R;return C.uinteger(T.startLine)&&C.uinteger(T.startLine)&&(C.undefined(T.startCharacter)||C.uinteger(T.startCharacter))&&(C.undefined(T.endCharacter)||C.uinteger(T.endCharacter))&&(C.undefined(T.kind)||C.string(T.kind))}b.is=w})(m=e.FoldingRange||(e.FoldingRange={}));var p;(function(b){function x(R,T){return{location:R,message:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&a.is(T.location)&&C.string(T.message)}b.is=w})(p=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var d;(function(b){b.Error=1,b.Warning=2,b.Information=3,b.Hint=4})(d=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var _;(function(b){b.Unnecessary=1,b.Deprecated=2})(_=e.DiagnosticTag||(e.DiagnosticTag={}));var P;(function(b){function x(w){var R=w;return R!=null&&C.string(R.href)}b.is=x})(P=e.CodeDescription||(e.CodeDescription={}));var h;(function(b){function x(R,T,D,F,ie,pe){var we={range:R,message:T};return C.defined(D)&&(we.severity=D),C.defined(F)&&(we.code=F),C.defined(ie)&&(we.source=ie),C.defined(pe)&&(we.relatedInformation=pe),we}b.create=x;function w(R){var T,D=R;return C.defined(D)&&s.is(D.range)&&C.string(D.message)&&(C.number(D.severity)||C.undefined(D.severity))&&(C.integer(D.code)||C.string(D.code)||C.undefined(D.code))&&(C.undefined(D.codeDescription)||C.string((T=D.codeDescription)===null||T===void 0?void 0:T.href))&&(C.string(D.source)||C.undefined(D.source))&&(C.undefined(D.relatedInformation)||C.typedArray(D.relatedInformation,p.is))}b.is=w})(h=e.Diagnostic||(e.Diagnostic={}));var y;(function(b){function x(R,T){for(var D=[],F=2;F<arguments.length;F++)D[F-2]=arguments[F];var ie={title:R,command:T};return C.defined(D)&&D.length>0&&(ie.arguments=D),ie}b.create=x;function w(R){var T=R;return C.defined(T)&&C.string(T.title)&&C.string(T.command)}b.is=w})(y=e.Command||(e.Command={}));var g;(function(b){function x(D,F){return{range:D,newText:F}}b.replace=x;function w(D,F){return{range:{start:D,end:D},newText:F}}b.insert=w;function R(D){return{range:D,newText:""}}b.del=R;function T(D){var F=D;return C.objectLiteral(F)&&C.string(F.newText)&&s.is(F.range)}b.is=T})(g=e.TextEdit||(e.TextEdit={}));var N;(function(b){function x(R,T,D){var F={label:R};return T!==void 0&&(F.needsConfirmation=T),D!==void 0&&(F.description=D),F}b.create=x;function w(R){var T=R;return T!==void 0&&C.objectLiteral(T)&&C.string(T.label)&&(C.boolean(T.needsConfirmation)||T.needsConfirmation===void 0)&&(C.string(T.description)||T.description===void 0)}b.is=w})(N=e.ChangeAnnotation||(e.ChangeAnnotation={}));var S;(function(b){function x(w){var R=w;return typeof R=="string"}b.is=x})(S=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var V;(function(b){function x(D,F,ie){return{range:D,newText:F,annotationId:ie}}b.replace=x;function w(D,F,ie){return{range:{start:D,end:D},newText:F,annotationId:ie}}b.insert=w;function R(D,F){return{range:D,newText:"",annotationId:F}}b.del=R;function T(D){var F=D;return g.is(F)&&(N.is(F.annotationId)||S.is(F.annotationId))}b.is=T})(V=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var O;(function(b){function x(R,T){return{textDocument:R,edits:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&ut.is(T.textDocument)&&Array.isArray(T.edits)}b.is=w})(O=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Y;(function(b){function x(R,T,D){var F={kind:"create",uri:R};return T!==void 0&&(T.overwrite!==void 0||T.ignoreIfExists!==void 0)&&(F.options=T),D!==void 0&&(F.annotationId=D),F}b.create=x;function w(R){var T=R;return T&&T.kind==="create"&&C.string(T.uri)&&(T.options===void 0||(T.options.overwrite===void 0||C.boolean(T.options.overwrite))&&(T.options.ignoreIfExists===void 0||C.boolean(T.options.ignoreIfExists)))&&(T.annotationId===void 0||S.is(T.annotationId))}b.is=w})(Y=e.CreateFile||(e.CreateFile={}));var z;(function(b){function x(R,T,D,F){var ie={kind:"rename",oldUri:R,newUri:T};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(ie.options=D),F!==void 0&&(ie.annotationId=F),ie}b.create=x;function w(R){var T=R;return T&&T.kind==="rename"&&C.string(T.oldUri)&&C.string(T.newUri)&&(T.options===void 0||(T.options.overwrite===void 0||C.boolean(T.options.overwrite))&&(T.options.ignoreIfExists===void 0||C.boolean(T.options.ignoreIfExists)))&&(T.annotationId===void 0||S.is(T.annotationId))}b.is=w})(z=e.RenameFile||(e.RenameFile={}));var X;(function(b){function x(R,T,D){var F={kind:"delete",uri:R};return T!==void 0&&(T.recursive!==void 0||T.ignoreIfNotExists!==void 0)&&(F.options=T),D!==void 0&&(F.annotationId=D),F}b.create=x;function w(R){var T=R;return T&&T.kind==="delete"&&C.string(T.uri)&&(T.options===void 0||(T.options.recursive===void 0||C.boolean(T.options.recursive))&&(T.options.ignoreIfNotExists===void 0||C.boolean(T.options.ignoreIfNotExists)))&&(T.annotationId===void 0||S.is(T.annotationId))}b.is=w})(X=e.DeleteFile||(e.DeleteFile={}));var K;(function(b){function x(w){var R=w;return R&&(R.changes!==void 0||R.documentChanges!==void 0)&&(R.documentChanges===void 0||R.documentChanges.every(function(T){return C.string(T.kind)?Y.is(T)||z.is(T)||X.is(T):O.is(T)}))}b.is=x})(K=e.WorkspaceEdit||(e.WorkspaceEdit={}));var re=function(){function b(x,w){this.edits=x,this.changeAnnotations=w}return b.prototype.insert=function(x,w,R){var T,D;if(R===void 0?T=g.insert(x,w):S.is(R)?(D=R,T=V.insert(x,w,R)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(R),T=V.insert(x,w,D)),this.edits.push(T),D!==void 0)return D},b.prototype.replace=function(x,w,R){var T,D;if(R===void 0?T=g.replace(x,w):S.is(R)?(D=R,T=V.replace(x,w,R)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(R),T=V.replace(x,w,D)),this.edits.push(T),D!==void 0)return D},b.prototype.delete=function(x,w){var R,T;if(w===void 0?R=g.del(x):S.is(w)?(T=w,R=V.del(x,w)):(this.assertChangeAnnotations(this.changeAnnotations),T=this.changeAnnotations.manage(w),R=V.del(x,T)),this.edits.push(R),T!==void 0)return T},b.prototype.add=function(x){this.edits.push(x)},b.prototype.all=function(){return this.edits},b.prototype.clear=function(){this.edits.splice(0,this.edits.length)},b.prototype.assertChangeAnnotations=function(x){if(x===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},b}(),De=function(){function b(x){this._annotations=x===void 0?Object.create(null):x,this._counter=0,this._size=0}return b.prototype.all=function(){return this._annotations},Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),b.prototype.manage=function(x,w){var R;if(S.is(x)?R=x:(R=this.nextId(),w=x),this._annotations[R]!==void 0)throw new Error("Id "+R+" is already in use.");if(w===void 0)throw new Error("No annotation provided for id "+R);return this._annotations[R]=w,this._size++,R},b.prototype.nextId=function(){return this._counter++,this._counter.toString()},b}(),de=function(){function b(x){var w=this;this._textEditChanges=Object.create(null),x!==void 0?(this._workspaceEdit=x,x.documentChanges?(this._changeAnnotations=new De(x.changeAnnotations),x.changeAnnotations=this._changeAnnotations.all(),x.documentChanges.forEach(function(R){if(O.is(R)){var T=new re(R.edits,w._changeAnnotations);w._textEditChanges[R.textDocument.uri]=T}})):x.changes&&Object.keys(x.changes).forEach(function(R){var T=new re(x.changes[R]);w._textEditChanges[R]=T})):this._workspaceEdit={}}return Object.defineProperty(b.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),b.prototype.getTextEditChange=function(x){if(ut.is(x)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w={uri:x.uri,version:x.version},R=this._textEditChanges[w.uri];if(!R){var T=[],D={textDocument:w,edits:T};this._workspaceEdit.documentChanges.push(D),R=new re(T,this._changeAnnotations),this._textEditChanges[w.uri]=R}return R}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var R=this._textEditChanges[x];if(!R){var T=[];this._workspaceEdit.changes[x]=T,R=new re(T),this._textEditChanges[x]=R}return R}},b.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new De,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},b.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},b.prototype.createFile=function(x,w,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var T;N.is(w)||S.is(w)?T=w:R=w;var D,F;if(T===void 0?D=Y.create(x,R):(F=S.is(T)?T:this._changeAnnotations.manage(T),D=Y.create(x,R,F)),this._workspaceEdit.documentChanges.push(D),F!==void 0)return F},b.prototype.renameFile=function(x,w,R,T){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;N.is(R)||S.is(R)?D=R:T=R;var F,ie;if(D===void 0?F=z.create(x,w,T):(ie=S.is(D)?D:this._changeAnnotations.manage(D),F=z.create(x,w,T,ie)),this._workspaceEdit.documentChanges.push(F),ie!==void 0)return ie},b.prototype.deleteFile=function(x,w,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var T;N.is(w)||S.is(w)?T=w:R=w;var D,F;if(T===void 0?D=X.create(x,R):(F=S.is(T)?T:this._changeAnnotations.manage(T),D=X.create(x,R,F)),this._workspaceEdit.documentChanges.push(D),F!==void 0)return F},b}();e.WorkspaceChange=de;var te;(function(b){function x(R){return{uri:R}}b.create=x;function w(R){var T=R;return C.defined(T)&&C.string(T.uri)}b.is=w})(te=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var We;(function(b){function x(R,T){return{uri:R,version:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&C.string(T.uri)&&C.integer(T.version)}b.is=w})(We=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var ut;(function(b){function x(R,T){return{uri:R,version:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&C.string(T.uri)&&(T.version===null||C.integer(T.version))}b.is=w})(ut=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Vt;(function(b){function x(R,T,D,F){return{uri:R,languageId:T,version:D,text:F}}b.create=x;function w(R){var T=R;return C.defined(T)&&C.string(T.uri)&&C.string(T.languageId)&&C.integer(T.version)&&C.string(T.text)}b.is=w})(Vt=e.TextDocumentItem||(e.TextDocumentItem={}));var Ve;(function(b){b.PlainText="plaintext",b.Markdown="markdown"})(Ve=e.MarkupKind||(e.MarkupKind={})),function(b){function x(w){var R=w;return R===b.PlainText||R===b.Markdown}b.is=x}(Ve=e.MarkupKind||(e.MarkupKind={}));var ft;(function(b){function x(w){var R=w;return C.objectLiteral(w)&&Ve.is(R.kind)&&C.string(R.value)}b.is=x})(ft=e.MarkupContent||(e.MarkupContent={}));var Ti;(function(b){b.Text=1,b.Method=2,b.Function=3,b.Constructor=4,b.Field=5,b.Variable=6,b.Class=7,b.Interface=8,b.Module=9,b.Property=10,b.Unit=11,b.Value=12,b.Enum=13,b.Keyword=14,b.Snippet=15,b.Color=16,b.File=17,b.Reference=18,b.Folder=19,b.EnumMember=20,b.Constant=21,b.Struct=22,b.Event=23,b.Operator=24,b.TypeParameter=25})(Ti=e.CompletionItemKind||(e.CompletionItemKind={}));var $i;(function(b){b.PlainText=1,b.Snippet=2})($i=e.InsertTextFormat||(e.InsertTextFormat={}));var ce;(function(b){b.Deprecated=1})(ce=e.CompletionItemTag||(e.CompletionItemTag={}));var oe;(function(b){function x(R,T,D){return{newText:R,insert:T,replace:D}}b.create=x;function w(R){var T=R;return T&&C.string(T.newText)&&s.is(T.insert)&&s.is(T.replace)}b.is=w})(oe=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var he;(function(b){b.asIs=1,b.adjustIndentation=2})(he=e.InsertTextMode||(e.InsertTextMode={}));var se;(function(b){function x(w){return{label:w}}b.create=x})(se=e.CompletionItem||(e.CompletionItem={}));var Ne;(function(b){function x(w,R){return{items:w||[],isIncomplete:!!R}}b.create=x})(Ne=e.CompletionList||(e.CompletionList={}));var Pt;(function(b){function x(R){return R.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}b.fromPlainText=x;function w(R){var T=R;return C.string(T)||C.objectLiteral(T)&&C.string(T.language)&&C.string(T.value)}b.is=w})(Pt=e.MarkedString||(e.MarkedString={}));var In;(function(b){function x(w){var R=w;return!!R&&C.objectLiteral(R)&&(ft.is(R.contents)||Pt.is(R.contents)||C.typedArray(R.contents,Pt.is))&&(w.range===void 0||s.is(w.range))}b.is=x})(In=e.Hover||(e.Hover={}));var ba;(function(b){function x(w,R){return R?{label:w,documentation:R}:{label:w}}b.create=x})(ba=e.ParameterInformation||(e.ParameterInformation={}));var Ta;(function(b){function x(w,R){for(var T=[],D=2;D<arguments.length;D++)T[D-2]=arguments[D];var F={label:w};return C.defined(R)&&(F.documentation=R),C.defined(T)?F.parameters=T:F.parameters=[],F}b.create=x})(Ta=e.SignatureInformation||(e.SignatureInformation={}));var ti;(function(b){b.Text=1,b.Read=2,b.Write=3})(ti=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var As;(function(b){function x(w,R){var T={range:w};return C.number(R)&&(T.kind=R),T}b.create=x})(As=e.DocumentHighlight||(e.DocumentHighlight={}));var Na;(function(b){b.File=1,b.Module=2,b.Namespace=3,b.Package=4,b.Class=5,b.Method=6,b.Property=7,b.Field=8,b.Constructor=9,b.Enum=10,b.Interface=11,b.Function=12,b.Variable=13,b.Constant=14,b.String=15,b.Number=16,b.Boolean=17,b.Array=18,b.Object=19,b.Key=20,b.Null=21,b.EnumMember=22,b.Struct=23,b.Event=24,b.Operator=25,b.TypeParameter=26})(Na=e.SymbolKind||(e.SymbolKind={}));var va;(function(b){b.Deprecated=1})(va=e.SymbolTag||(e.SymbolTag={}));var qr;(function(b){function x(w,R,T,D,F){var ie={name:w,kind:R,location:{uri:D,range:T}};return F&&(ie.containerName=F),ie}b.create=x})(qr=e.SymbolInformation||(e.SymbolInformation={}));var Ct;(function(b){function x(R,T,D,F,ie,pe){var we={name:R,detail:T,kind:D,range:F,selectionRange:ie};return pe!==void 0&&(we.children=pe),we}b.create=x;function w(R){var T=R;return T&&C.string(T.name)&&C.number(T.kind)&&s.is(T.range)&&s.is(T.selectionRange)&&(T.detail===void 0||C.string(T.detail))&&(T.deprecated===void 0||C.boolean(T.deprecated))&&(T.children===void 0||Array.isArray(T.children))&&(T.tags===void 0||Array.isArray(T.tags))}b.is=w})(Ct=e.DocumentSymbol||(e.DocumentSymbol={}));var Ni;(function(b){b.Empty="",b.QuickFix="quickfix",b.Refactor="refactor",b.RefactorExtract="refactor.extract",b.RefactorInline="refactor.inline",b.RefactorRewrite="refactor.rewrite",b.Source="source",b.SourceOrganizeImports="source.organizeImports",b.SourceFixAll="source.fixAll"})(Ni=e.CodeActionKind||(e.CodeActionKind={}));var zi;(function(b){function x(R,T){var D={diagnostics:R};return T!=null&&(D.only=T),D}b.create=x;function w(R){var T=R;return C.defined(T)&&C.typedArray(T.diagnostics,h.is)&&(T.only===void 0||C.typedArray(T.only,C.string))}b.is=w})(zi=e.CodeActionContext||(e.CodeActionContext={}));var Sn;(function(b){function x(R,T,D){var F={title:R},ie=!0;return typeof T=="string"?(ie=!1,F.kind=T):y.is(T)?F.command=T:F.edit=T,ie&&D!==void 0&&(F.kind=D),F}b.create=x;function w(R){var T=R;return T&&C.string(T.title)&&(T.diagnostics===void 0||C.typedArray(T.diagnostics,h.is))&&(T.kind===void 0||C.string(T.kind))&&(T.edit!==void 0||T.command!==void 0)&&(T.command===void 0||y.is(T.command))&&(T.isPreferred===void 0||C.boolean(T.isPreferred))&&(T.edit===void 0||K.is(T.edit))}b.is=w})(Sn=e.CodeAction||(e.CodeAction={}));var vi;(function(b){function x(R,T){var D={range:R};return C.defined(T)&&(D.data=T),D}b.create=x;function w(R){var T=R;return C.defined(T)&&s.is(T.range)&&(C.undefined(T.command)||y.is(T.command))}b.is=w})(vi=e.CodeLens||(e.CodeLens={}));var Pi;(function(b){function x(R,T){return{tabSize:R,insertSpaces:T}}b.create=x;function w(R){var T=R;return C.defined(T)&&C.uinteger(T.tabSize)&&C.boolean(T.insertSpaces)}b.is=w})(Pi=e.FormattingOptions||(e.FormattingOptions={}));var Ii;(function(b){function x(R,T,D){return{range:R,target:T,data:D}}b.create=x;function w(R){var T=R;return C.defined(T)&&s.is(T.range)&&(C.undefined(T.target)||C.string(T.target))}b.is=w})(Ii=e.DocumentLink||(e.DocumentLink={}));var ri;(function(b){function x(R,T){return{range:R,parent:T}}b.create=x;function w(R){var T=R;return T!==void 0&&s.is(T.range)&&(T.parent===void 0||b.is(T.parent))}b.is=w})(ri=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var nn;(function(b){function x(D,F,ie,pe){return new I(D,F,ie,pe)}b.create=x;function w(D){var F=D;return!!(C.defined(F)&&C.string(F.uri)&&(C.undefined(F.languageId)||C.string(F.languageId))&&C.uinteger(F.lineCount)&&C.func(F.getText)&&C.func(F.positionAt)&&C.func(F.offsetAt))}b.is=w;function R(D,F){for(var ie=D.getText(),pe=T(F,function(Pa,mc){var yg=Pa.range.start.line-mc.range.start.line;return yg===0?Pa.range.start.character-mc.range.start.character:yg}),we=ie.length,at=pe.length-1;at>=0;at--){var qt=pe[at],Yt=D.offsetAt(qt.range.start),qe=D.offsetAt(qt.range.end);if(qe<=we)ie=ie.substring(0,Yt)+qt.newText+ie.substring(qe,ie.length);else throw new Error("Overlapping edit");we=Yt}return ie}b.applyEdits=R;function T(D,F){if(D.length<=1)return D;var ie=D.length/2|0,pe=D.slice(0,ie),we=D.slice(ie);T(pe,F),T(we,F);for(var at=0,qt=0,Yt=0;at<pe.length&&qt<we.length;){var qe=F(pe[at],we[qt]);qe<=0?D[Yt++]=pe[at++]:D[Yt++]=we[qt++]}for(;at<pe.length;)D[Yt++]=pe[at++];for(;qt<we.length;)D[Yt++]=we[qt++];return D}})(nn=e.TextDocument||(e.TextDocument={}));var I=function(){function b(x,w,R,T){this._uri=x,this._languageId=w,this._version=R,this._content=T,this._lineOffsets=void 0}return Object.defineProperty(b.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),b.prototype.getText=function(x){if(x){var w=this.offsetAt(x.start),R=this.offsetAt(x.end);return this._content.substring(w,R)}return this._content},b.prototype.update=function(x,w){this._content=x.text,this._version=w,this._lineOffsets=void 0},b.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var x=[],w=this._content,R=!0,T=0;T<w.length;T++){R&&(x.push(T),R=!1);var D=w.charAt(T);R=D==="\r"||D===`
`,D==="\r"&&T+1<w.length&&w.charAt(T+1)===`
`&&T++}R&&w.length>0&&x.push(w.length),this._lineOffsets=x}return this._lineOffsets},b.prototype.positionAt=function(x){x=Math.max(Math.min(x,this._content.length),0);var w=this.getLineOffsets(),R=0,T=w.length;if(T===0)return i.create(0,x);for(;R<T;){var D=Math.floor((R+T)/2);w[D]>x?T=D:R=D+1}var F=R-1;return i.create(F,x-w[F])},b.prototype.offsetAt=function(x){var w=this.getLineOffsets();if(x.line>=w.length)return this._content.length;if(x.line<0)return 0;var R=w[x.line],T=x.line+1<w.length?w[x.line+1]:this._content.length;return Math.max(Math.min(R+x.character,T),R)},Object.defineProperty(b.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),b}(),C;(function(b){var x=Object.prototype.toString;function w(qe){return typeof qe!="undefined"}b.defined=w;function R(qe){return typeof qe=="undefined"}b.undefined=R;function T(qe){return qe===!0||qe===!1}b.boolean=T;function D(qe){return x.call(qe)==="[object String]"}b.string=D;function F(qe){return x.call(qe)==="[object Number]"}b.number=F;function ie(qe,Pa,mc){return x.call(qe)==="[object Number]"&&Pa<=qe&&qe<=mc}b.numberRange=ie;function pe(qe){return x.call(qe)==="[object Number]"&&-2147483648<=qe&&qe<=2147483647}b.integer=pe;function we(qe){return x.call(qe)==="[object Number]"&&0<=qe&&qe<=2147483647}b.uinteger=we;function at(qe){return x.call(qe)==="[object Function]"}b.func=at;function qt(qe){return qe!==null&&typeof qe=="object"}b.objectLiteral=qt;function Yt(qe,Pa){return Array.isArray(qe)&&qe.every(Pa)}b.typedArray=Yt})(C||(C={}))})});var $t=$(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.ProtocolNotificationType=sn.ProtocolNotificationType0=sn.ProtocolRequestType=sn.ProtocolRequestType0=sn.RegistrationType=void 0;var wa=Ea(),O_=class{constructor(e){this.method=e}};sn.RegistrationType=O_;var D_=class extends wa.RequestType0{constructor(e){super(e)}};sn.ProtocolRequestType0=D_;var L_=class extends wa.RequestType{constructor(e){super(e,wa.ParameterStructures.byName)}};sn.ProtocolRequestType=L_;var k_=class extends wa.NotificationType0{constructor(e){super(e)}};sn.ProtocolNotificationType0=k_;var M_=class extends wa.NotificationType{constructor(e){super(e,wa.ParameterStructures.byName)}};sn.ProtocolNotificationType=M_});var q_=$(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.objectLiteral=Ot.typedArray=Ot.stringArray=Ot.array=Ot.func=Ot.error=Ot.number=Ot.string=Ot.boolean=void 0;function nA(t){return t===!0||t===!1}Ot.boolean=nA;function F_(t){return typeof t=="string"||t instanceof String}Ot.string=F_;function iA(t){return typeof t=="number"||t instanceof Number}Ot.number=iA;function sA(t){return t instanceof Error}Ot.error=sA;function aA(t){return typeof t=="function"}Ot.func=aA;function V_(t){return Array.isArray(t)}Ot.array=V_;function oA(t){return V_(t)&&t.every(e=>F_(e))}Ot.stringArray=oA;function lA(t,e){return Array.isArray(t)&&t.every(e)}Ot.typedArray=lA;function cA(t){return t!==null&&typeof t=="object"}Ot.objectLiteral=cA});var B_=$(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.ImplementationRequest=void 0;var uA=$t(),fA;(function(t){t.method="textDocument/implementation",t.type=new uA.ProtocolRequestType(t.method)})(fA=Zo.ImplementationRequest||(Zo.ImplementationRequest={}))});var j_=$(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.TypeDefinitionRequest=void 0;var pA=$t(),dA;(function(t){t.method="textDocument/typeDefinition",t.type=new pA.ProtocolRequestType(t.method)})(dA=el.TypeDefinitionRequest||(el.TypeDefinitionRequest={}))});var G_=$(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.DidChangeWorkspaceFoldersNotification=Xi.WorkspaceFoldersRequest=void 0;var U_=$t(),mA;(function(t){t.type=new U_.ProtocolRequestType0("workspace/workspaceFolders")})(mA=Xi.WorkspaceFoldersRequest||(Xi.WorkspaceFoldersRequest={}));var hA;(function(t){t.type=new U_.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(hA=Xi.DidChangeWorkspaceFoldersNotification||(Xi.DidChangeWorkspaceFoldersNotification={}))});var W_=$(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.ConfigurationRequest=void 0;var gA=$t(),_A;(function(t){t.type=new gA.ProtocolRequestType("workspace/configuration")})(_A=tl.ConfigurationRequest||(tl.ConfigurationRequest={}))});var Y_=$(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.ColorPresentationRequest=Qi.DocumentColorRequest=void 0;var H_=$t(),yA;(function(t){t.method="textDocument/documentColor",t.type=new H_.ProtocolRequestType(t.method)})(yA=Qi.DocumentColorRequest||(Qi.DocumentColorRequest={}));var bA;(function(t){t.type=new H_.ProtocolRequestType("textDocument/colorPresentation")})(bA=Qi.ColorPresentationRequest||(Qi.ColorPresentationRequest={}))});var Ap=$(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.FoldingRangeRequest=Ji.FoldingRangeKind=void 0;var TA=$t(),NA;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(NA=Ji.FoldingRangeKind||(Ji.FoldingRangeKind={}));var vA;(function(t){t.method="textDocument/foldingRange",t.type=new TA.ProtocolRequestType(t.method)})(vA=Ji.FoldingRangeRequest||(Ji.FoldingRangeRequest={}))});var K_=$(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.DeclarationRequest=void 0;var PA=$t(),IA;(function(t){t.method="textDocument/declaration",t.type=new PA.ProtocolRequestType(t.method)})(IA=rl.DeclarationRequest||(rl.DeclarationRequest={}))});var $_=$(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.SelectionRangeRequest=void 0;var SA=$t(),CA;(function(t){t.method="textDocument/selectionRange",t.type=new SA.ProtocolRequestType(t.method)})(CA=nl.SelectionRangeRequest||(nl.SelectionRangeRequest={}))});var X_=$(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.WorkDoneProgressCancelNotification=An.WorkDoneProgressCreateRequest=An.WorkDoneProgress=void 0;var RA=Ea(),z_=$t(),AA;(function(t){t.type=new RA.ProgressType;function e(r){return r===t.type}t.is=e})(AA=An.WorkDoneProgress||(An.WorkDoneProgress={}));var xA;(function(t){t.type=new z_.ProtocolRequestType("window/workDoneProgress/create")})(xA=An.WorkDoneProgressCreateRequest||(An.WorkDoneProgressCreateRequest={}));var EA;(function(t){t.type=new z_.ProtocolNotificationType("window/workDoneProgress/cancel")})(EA=An.WorkDoneProgressCancelNotification||(An.WorkDoneProgressCancelNotification={}))});var Q_=$(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.CallHierarchyOutgoingCallsRequest=xn.CallHierarchyIncomingCallsRequest=xn.CallHierarchyPrepareRequest=void 0;var xp=$t(),wA;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new xp.ProtocolRequestType(t.method)})(wA=xn.CallHierarchyPrepareRequest||(xn.CallHierarchyPrepareRequest={}));var OA;(function(t){t.method="callHierarchy/incomingCalls",t.type=new xp.ProtocolRequestType(t.method)})(OA=xn.CallHierarchyIncomingCallsRequest||(xn.CallHierarchyIncomingCallsRequest={}));var DA;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new xp.ProtocolRequestType(t.method)})(DA=xn.CallHierarchyOutgoingCallsRequest||(xn.CallHierarchyOutgoingCallsRequest={}))});var J_=$(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.SemanticTokensRefreshRequest=Ze.SemanticTokensRangeRequest=Ze.SemanticTokensDeltaRequest=Ze.SemanticTokensRequest=Ze.SemanticTokensRegistrationType=Ze.TokenFormat=Ze.SemanticTokens=Ze.SemanticTokenModifiers=Ze.SemanticTokenTypes=void 0;var il=$t(),LA;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(LA=Ze.SemanticTokenTypes||(Ze.SemanticTokenTypes={}));var kA;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(kA=Ze.SemanticTokenModifiers||(Ze.SemanticTokenModifiers={}));var MA;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(MA=Ze.SemanticTokens||(Ze.SemanticTokens={}));var FA;(function(t){t.Relative="relative"})(FA=Ze.TokenFormat||(Ze.TokenFormat={}));var VA;(function(t){t.method="textDocument/semanticTokens",t.type=new il.RegistrationType(t.method)})(VA=Ze.SemanticTokensRegistrationType||(Ze.SemanticTokensRegistrationType={}));var qA;(function(t){t.method="textDocument/semanticTokens/full",t.type=new il.ProtocolRequestType(t.method)})(qA=Ze.SemanticTokensRequest||(Ze.SemanticTokensRequest={}));var BA;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new il.ProtocolRequestType(t.method)})(BA=Ze.SemanticTokensDeltaRequest||(Ze.SemanticTokensDeltaRequest={}));var jA;(function(t){t.method="textDocument/semanticTokens/range",t.type=new il.ProtocolRequestType(t.method)})(jA=Ze.SemanticTokensRangeRequest||(Ze.SemanticTokensRangeRequest={}));var UA;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new il.ProtocolRequestType0(t.method)})(UA=Ze.SemanticTokensRefreshRequest||(Ze.SemanticTokensRefreshRequest={}))});var Z_=$(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.ShowDocumentRequest=void 0;var GA=$t(),WA;(function(t){t.method="window/showDocument",t.type=new GA.ProtocolRequestType(t.method)})(WA=sl.ShowDocumentRequest||(sl.ShowDocumentRequest={}))});var ey=$(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.LinkedEditingRangeRequest=void 0;var HA=$t(),YA;(function(t){t.method="textDocument/linkedEditingRange",t.type=new HA.ProtocolRequestType(t.method)})(YA=al.LinkedEditingRangeRequest||(al.LinkedEditingRangeRequest={}))});var ty=$(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.WillDeleteFilesRequest=Tt.DidDeleteFilesNotification=Tt.DidRenameFilesNotification=Tt.WillRenameFilesRequest=Tt.DidCreateFilesNotification=Tt.WillCreateFilesRequest=Tt.FileOperationPatternKind=void 0;var Oa=$t(),KA;(function(t){t.file="file",t.folder="folder"})(KA=Tt.FileOperationPatternKind||(Tt.FileOperationPatternKind={}));var $A;(function(t){t.method="workspace/willCreateFiles",t.type=new Oa.ProtocolRequestType(t.method)})($A=Tt.WillCreateFilesRequest||(Tt.WillCreateFilesRequest={}));var zA;(function(t){t.method="workspace/didCreateFiles",t.type=new Oa.ProtocolNotificationType(t.method)})(zA=Tt.DidCreateFilesNotification||(Tt.DidCreateFilesNotification={}));var XA;(function(t){t.method="workspace/willRenameFiles",t.type=new Oa.ProtocolRequestType(t.method)})(XA=Tt.WillRenameFilesRequest||(Tt.WillRenameFilesRequest={}));var QA;(function(t){t.method="workspace/didRenameFiles",t.type=new Oa.ProtocolNotificationType(t.method)})(QA=Tt.DidRenameFilesNotification||(Tt.DidRenameFilesNotification={}));var JA;(function(t){t.method="workspace/didDeleteFiles",t.type=new Oa.ProtocolNotificationType(t.method)})(JA=Tt.DidDeleteFilesNotification||(Tt.DidDeleteFilesNotification={}));var ZA;(function(t){t.method="workspace/willDeleteFiles",t.type=new Oa.ProtocolRequestType(t.method)})(ZA=Tt.WillDeleteFilesRequest||(Tt.WillDeleteFilesRequest={}))});var ry=$(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.MonikerRequest=En.MonikerKind=En.UniquenessLevel=void 0;var ex=$t(),tx;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(tx=En.UniquenessLevel||(En.UniquenessLevel={}));var rx;(function(t){t.import="import",t.export="export",t.local="local"})(rx=En.MonikerKind||(En.MonikerKind={}));var nx;(function(t){t.method="textDocument/moniker",t.type=new ex.ProtocolRequestType(t.method)})(nx=En.MonikerRequest||(En.MonikerRequest={}))});var oy=$(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.DocumentLinkRequest=A.CodeLensRefreshRequest=A.CodeLensResolveRequest=A.CodeLensRequest=A.WorkspaceSymbolRequest=A.CodeActionResolveRequest=A.CodeActionRequest=A.DocumentSymbolRequest=A.DocumentHighlightRequest=A.ReferencesRequest=A.DefinitionRequest=A.SignatureHelpRequest=A.SignatureHelpTriggerKind=A.HoverRequest=A.CompletionResolveRequest=A.CompletionRequest=A.CompletionTriggerKind=A.PublishDiagnosticsNotification=A.WatchKind=A.FileChangeType=A.DidChangeWatchedFilesNotification=A.WillSaveTextDocumentWaitUntilRequest=A.WillSaveTextDocumentNotification=A.TextDocumentSaveReason=A.DidSaveTextDocumentNotification=A.DidCloseTextDocumentNotification=A.DidChangeTextDocumentNotification=A.TextDocumentContentChangeEvent=A.DidOpenTextDocumentNotification=A.TextDocumentSyncKind=A.TelemetryEventNotification=A.LogMessageNotification=A.ShowMessageRequest=A.ShowMessageNotification=A.MessageType=A.DidChangeConfigurationNotification=A.ExitNotification=A.ShutdownRequest=A.InitializedNotification=A.InitializeError=A.InitializeRequest=A.WorkDoneProgressOptions=A.TextDocumentRegistrationOptions=A.StaticRegistrationOptions=A.FailureHandlingKind=A.ResourceOperationKind=A.UnregistrationRequest=A.RegistrationRequest=A.DocumentSelector=A.DocumentFilter=void 0;A.MonikerRequest=A.MonikerKind=A.UniquenessLevel=A.WillDeleteFilesRequest=A.DidDeleteFilesNotification=A.WillRenameFilesRequest=A.DidRenameFilesNotification=A.WillCreateFilesRequest=A.DidCreateFilesNotification=A.FileOperationPatternKind=A.LinkedEditingRangeRequest=A.ShowDocumentRequest=A.SemanticTokensRegistrationType=A.SemanticTokensRefreshRequest=A.SemanticTokensRangeRequest=A.SemanticTokensDeltaRequest=A.SemanticTokensRequest=A.TokenFormat=A.SemanticTokens=A.SemanticTokenModifiers=A.SemanticTokenTypes=A.CallHierarchyPrepareRequest=A.CallHierarchyOutgoingCallsRequest=A.CallHierarchyIncomingCallsRequest=A.WorkDoneProgressCancelNotification=A.WorkDoneProgressCreateRequest=A.WorkDoneProgress=A.SelectionRangeRequest=A.DeclarationRequest=A.FoldingRangeRequest=A.ColorPresentationRequest=A.DocumentColorRequest=A.ConfigurationRequest=A.DidChangeWorkspaceFoldersNotification=A.WorkspaceFoldersRequest=A.TypeDefinitionRequest=A.ImplementationRequest=A.ApplyWorkspaceEditRequest=A.ExecuteCommandRequest=A.PrepareRenameRequest=A.RenameRequest=A.PrepareSupportDefaultBehavior=A.DocumentOnTypeFormattingRequest=A.DocumentRangeFormattingRequest=A.DocumentFormattingRequest=A.DocumentLinkResolveRequest=void 0;var Zi=q_(),Ae=$t(),ix=B_();Object.defineProperty(A,"ImplementationRequest",{enumerable:!0,get:function(){return ix.ImplementationRequest}});var sx=j_();Object.defineProperty(A,"TypeDefinitionRequest",{enumerable:!0,get:function(){return sx.TypeDefinitionRequest}});var ny=G_();Object.defineProperty(A,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return ny.WorkspaceFoldersRequest}});Object.defineProperty(A,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return ny.DidChangeWorkspaceFoldersNotification}});var ax=W_();Object.defineProperty(A,"ConfigurationRequest",{enumerable:!0,get:function(){return ax.ConfigurationRequest}});var iy=Y_();Object.defineProperty(A,"DocumentColorRequest",{enumerable:!0,get:function(){return iy.DocumentColorRequest}});Object.defineProperty(A,"ColorPresentationRequest",{enumerable:!0,get:function(){return iy.ColorPresentationRequest}});var ox=Ap();Object.defineProperty(A,"FoldingRangeRequest",{enumerable:!0,get:function(){return ox.FoldingRangeRequest}});var lx=K_();Object.defineProperty(A,"DeclarationRequest",{enumerable:!0,get:function(){return lx.DeclarationRequest}});var cx=$_();Object.defineProperty(A,"SelectionRangeRequest",{enumerable:!0,get:function(){return cx.SelectionRangeRequest}});var Ep=X_();Object.defineProperty(A,"WorkDoneProgress",{enumerable:!0,get:function(){return Ep.WorkDoneProgress}});Object.defineProperty(A,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ep.WorkDoneProgressCreateRequest}});Object.defineProperty(A,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ep.WorkDoneProgressCancelNotification}});var wp=Q_();Object.defineProperty(A,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return wp.CallHierarchyIncomingCallsRequest}});Object.defineProperty(A,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return wp.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(A,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return wp.CallHierarchyPrepareRequest}});var xi=J_();Object.defineProperty(A,"SemanticTokenTypes",{enumerable:!0,get:function(){return xi.SemanticTokenTypes}});Object.defineProperty(A,"SemanticTokenModifiers",{enumerable:!0,get:function(){return xi.SemanticTokenModifiers}});Object.defineProperty(A,"SemanticTokens",{enumerable:!0,get:function(){return xi.SemanticTokens}});Object.defineProperty(A,"TokenFormat",{enumerable:!0,get:function(){return xi.TokenFormat}});Object.defineProperty(A,"SemanticTokensRequest",{enumerable:!0,get:function(){return xi.SemanticTokensRequest}});Object.defineProperty(A,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return xi.SemanticTokensDeltaRequest}});Object.defineProperty(A,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return xi.SemanticTokensRangeRequest}});Object.defineProperty(A,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return xi.SemanticTokensRefreshRequest}});Object.defineProperty(A,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return xi.SemanticTokensRegistrationType}});var ux=Z_();Object.defineProperty(A,"ShowDocumentRequest",{enumerable:!0,get:function(){return ux.ShowDocumentRequest}});var fx=ey();Object.defineProperty(A,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return fx.LinkedEditingRangeRequest}});var Ls=ty();Object.defineProperty(A,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ls.FileOperationPatternKind}});Object.defineProperty(A,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ls.DidCreateFilesNotification}});Object.defineProperty(A,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ls.WillCreateFilesRequest}});Object.defineProperty(A,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ls.DidRenameFilesNotification}});Object.defineProperty(A,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ls.WillRenameFilesRequest}});Object.defineProperty(A,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ls.DidDeleteFilesNotification}});Object.defineProperty(A,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ls.WillDeleteFilesRequest}});var Op=ry();Object.defineProperty(A,"UniquenessLevel",{enumerable:!0,get:function(){return Op.UniquenessLevel}});Object.defineProperty(A,"MonikerKind",{enumerable:!0,get:function(){return Op.MonikerKind}});Object.defineProperty(A,"MonikerRequest",{enumerable:!0,get:function(){return Op.MonikerRequest}});var sy;(function(t){function e(r){let n=r;return Zi.string(n.language)||Zi.string(n.scheme)||Zi.string(n.pattern)}t.is=e})(sy=A.DocumentFilter||(A.DocumentFilter={}));var ay;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Zi.string(n)&&!sy.is(n))return!1;return!0}t.is=e})(ay=A.DocumentSelector||(A.DocumentSelector={}));var px;(function(t){t.type=new Ae.ProtocolRequestType("client/registerCapability")})(px=A.RegistrationRequest||(A.RegistrationRequest={}));var dx;(function(t){t.type=new Ae.ProtocolRequestType("client/unregisterCapability")})(dx=A.UnregistrationRequest||(A.UnregistrationRequest={}));var mx;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(mx=A.ResourceOperationKind||(A.ResourceOperationKind={}));var hx;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(hx=A.FailureHandlingKind||(A.FailureHandlingKind={}));var gx;(function(t){function e(r){let n=r;return n&&Zi.string(n.id)&&n.id.length>0}t.hasId=e})(gx=A.StaticRegistrationOptions||(A.StaticRegistrationOptions={}));var _x;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||ay.is(n.documentSelector))}t.is=e})(_x=A.TextDocumentRegistrationOptions||(A.TextDocumentRegistrationOptions={}));var yx;(function(t){function e(n){let i=n;return Zi.objectLiteral(i)&&(i.workDoneProgress===void 0||Zi.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&Zi.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(yx=A.WorkDoneProgressOptions||(A.WorkDoneProgressOptions={}));var bx;(function(t){t.type=new Ae.ProtocolRequestType("initialize")})(bx=A.InitializeRequest||(A.InitializeRequest={}));var Tx;(function(t){t.unknownProtocolVersion=1})(Tx=A.InitializeError||(A.InitializeError={}));var Nx;(function(t){t.type=new Ae.ProtocolNotificationType("initialized")})(Nx=A.InitializedNotification||(A.InitializedNotification={}));var vx;(function(t){t.type=new Ae.ProtocolRequestType0("shutdown")})(vx=A.ShutdownRequest||(A.ShutdownRequest={}));var Px;(function(t){t.type=new Ae.ProtocolNotificationType0("exit")})(Px=A.ExitNotification||(A.ExitNotification={}));var Ix;(function(t){t.type=new Ae.ProtocolNotificationType("workspace/didChangeConfiguration")})(Ix=A.DidChangeConfigurationNotification||(A.DidChangeConfigurationNotification={}));var Sx;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Sx=A.MessageType||(A.MessageType={}));var Cx;(function(t){t.type=new Ae.ProtocolNotificationType("window/showMessage")})(Cx=A.ShowMessageNotification||(A.ShowMessageNotification={}));var Rx;(function(t){t.type=new Ae.ProtocolRequestType("window/showMessageRequest")})(Rx=A.ShowMessageRequest||(A.ShowMessageRequest={}));var Ax;(function(t){t.type=new Ae.ProtocolNotificationType("window/logMessage")})(Ax=A.LogMessageNotification||(A.LogMessageNotification={}));var xx;(function(t){t.type=new Ae.ProtocolNotificationType("telemetry/event")})(xx=A.TelemetryEventNotification||(A.TelemetryEventNotification={}));var Ex;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ex=A.TextDocumentSyncKind||(A.TextDocumentSyncKind={}));var wx;(function(t){t.method="textDocument/didOpen",t.type=new Ae.ProtocolNotificationType(t.method)})(wx=A.DidOpenTextDocumentNotification||(A.DidOpenTextDocumentNotification={}));var Ox;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(Ox=A.TextDocumentContentChangeEvent||(A.TextDocumentContentChangeEvent={}));var Dx;(function(t){t.method="textDocument/didChange",t.type=new Ae.ProtocolNotificationType(t.method)})(Dx=A.DidChangeTextDocumentNotification||(A.DidChangeTextDocumentNotification={}));var Lx;(function(t){t.method="textDocument/didClose",t.type=new Ae.ProtocolNotificationType(t.method)})(Lx=A.DidCloseTextDocumentNotification||(A.DidCloseTextDocumentNotification={}));var kx;(function(t){t.method="textDocument/didSave",t.type=new Ae.ProtocolNotificationType(t.method)})(kx=A.DidSaveTextDocumentNotification||(A.DidSaveTextDocumentNotification={}));var Mx;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Mx=A.TextDocumentSaveReason||(A.TextDocumentSaveReason={}));var Fx;(function(t){t.method="textDocument/willSave",t.type=new Ae.ProtocolNotificationType(t.method)})(Fx=A.WillSaveTextDocumentNotification||(A.WillSaveTextDocumentNotification={}));var Vx;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new Ae.ProtocolRequestType(t.method)})(Vx=A.WillSaveTextDocumentWaitUntilRequest||(A.WillSaveTextDocumentWaitUntilRequest={}));var qx;(function(t){t.type=new Ae.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(qx=A.DidChangeWatchedFilesNotification||(A.DidChangeWatchedFilesNotification={}));var Bx;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Bx=A.FileChangeType||(A.FileChangeType={}));var jx;(function(t){t.Create=1,t.Change=2,t.Delete=4})(jx=A.WatchKind||(A.WatchKind={}));var Ux;(function(t){t.type=new Ae.ProtocolNotificationType("textDocument/publishDiagnostics")})(Ux=A.PublishDiagnosticsNotification||(A.PublishDiagnosticsNotification={}));var Gx;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Gx=A.CompletionTriggerKind||(A.CompletionTriggerKind={}));var Wx;(function(t){t.method="textDocument/completion",t.type=new Ae.ProtocolRequestType(t.method)})(Wx=A.CompletionRequest||(A.CompletionRequest={}));var Hx;(function(t){t.method="completionItem/resolve",t.type=new Ae.ProtocolRequestType(t.method)})(Hx=A.CompletionResolveRequest||(A.CompletionResolveRequest={}));var Yx;(function(t){t.method="textDocument/hover",t.type=new Ae.ProtocolRequestType(t.method)})(Yx=A.HoverRequest||(A.HoverRequest={}));var Kx;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Kx=A.SignatureHelpTriggerKind||(A.SignatureHelpTriggerKind={}));var $x;(function(t){t.method="textDocument/signatureHelp",t.type=new Ae.ProtocolRequestType(t.method)})($x=A.SignatureHelpRequest||(A.SignatureHelpRequest={}));var zx;(function(t){t.method="textDocument/definition",t.type=new Ae.ProtocolRequestType(t.method)})(zx=A.DefinitionRequest||(A.DefinitionRequest={}));var Xx;(function(t){t.method="textDocument/references",t.type=new Ae.ProtocolRequestType(t.method)})(Xx=A.ReferencesRequest||(A.ReferencesRequest={}));var Qx;(function(t){t.method="textDocument/documentHighlight",t.type=new Ae.ProtocolRequestType(t.method)})(Qx=A.DocumentHighlightRequest||(A.DocumentHighlightRequest={}));var Jx;(function(t){t.method="textDocument/documentSymbol",t.type=new Ae.ProtocolRequestType(t.method)})(Jx=A.DocumentSymbolRequest||(A.DocumentSymbolRequest={}));var Zx;(function(t){t.method="textDocument/codeAction",t.type=new Ae.ProtocolRequestType(t.method)})(Zx=A.CodeActionRequest||(A.CodeActionRequest={}));var e0;(function(t){t.method="codeAction/resolve",t.type=new Ae.ProtocolRequestType(t.method)})(e0=A.CodeActionResolveRequest||(A.CodeActionResolveRequest={}));var t0;(function(t){t.method="workspace/symbol",t.type=new Ae.ProtocolRequestType(t.method)})(t0=A.WorkspaceSymbolRequest||(A.WorkspaceSymbolRequest={}));var r0;(function(t){t.method="textDocument/codeLens",t.type=new Ae.ProtocolRequestType(t.method)})(r0=A.CodeLensRequest||(A.CodeLensRequest={}));var n0;(function(t){t.method="codeLens/resolve",t.type=new Ae.ProtocolRequestType(t.method)})(n0=A.CodeLensResolveRequest||(A.CodeLensResolveRequest={}));var i0;(function(t){t.method="workspace/codeLens/refresh",t.type=new Ae.ProtocolRequestType0(t.method)})(i0=A.CodeLensRefreshRequest||(A.CodeLensRefreshRequest={}));var s0;(function(t){t.method="textDocument/documentLink",t.type=new Ae.ProtocolRequestType(t.method)})(s0=A.DocumentLinkRequest||(A.DocumentLinkRequest={}));var a0;(function(t){t.method="documentLink/resolve",t.type=new Ae.ProtocolRequestType(t.method)})(a0=A.DocumentLinkResolveRequest||(A.DocumentLinkResolveRequest={}));var o0;(function(t){t.method="textDocument/formatting",t.type=new Ae.ProtocolRequestType(t.method)})(o0=A.DocumentFormattingRequest||(A.DocumentFormattingRequest={}));var l0;(function(t){t.method="textDocument/rangeFormatting",t.type=new Ae.ProtocolRequestType(t.method)})(l0=A.DocumentRangeFormattingRequest||(A.DocumentRangeFormattingRequest={}));var c0;(function(t){t.method="textDocument/onTypeFormatting",t.type=new Ae.ProtocolRequestType(t.method)})(c0=A.DocumentOnTypeFormattingRequest||(A.DocumentOnTypeFormattingRequest={}));var u0;(function(t){t.Identifier=1})(u0=A.PrepareSupportDefaultBehavior||(A.PrepareSupportDefaultBehavior={}));var f0;(function(t){t.method="textDocument/rename",t.type=new Ae.ProtocolRequestType(t.method)})(f0=A.RenameRequest||(A.RenameRequest={}));var p0;(function(t){t.method="textDocument/prepareRename",t.type=new Ae.ProtocolRequestType(t.method)})(p0=A.PrepareRenameRequest||(A.PrepareRenameRequest={}));var d0;(function(t){t.type=new Ae.ProtocolRequestType("workspace/executeCommand")})(d0=A.ExecuteCommandRequest||(A.ExecuteCommandRequest={}));var m0;(function(t){t.type=new Ae.ProtocolRequestType("workspace/applyEdit")})(m0=A.ApplyWorkspaceEditRequest||(A.ApplyWorkspaceEditRequest={}))});var cy=$(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.createProtocolConnection=void 0;var ly=Ea();function h0(t,e,r,n){return ly.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),ly.createMessageConnection(t,e,r,n)}Cc.createProtocolConnection=h0});var uy=$(br=>{"use strict";var g0=br&&br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rc=br&&br.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&g0(e,t,r)};Object.defineProperty(br,"__esModule",{value:!0});br.LSPErrorCodes=br.createProtocolConnection=void 0;Rc(Ea(),br);Rc(ot(),br);Rc($t(),br);Rc(oy(),br);var _0=cy();Object.defineProperty(br,"createProtocolConnection",{enumerable:!0,get:function(){return _0.createProtocolConnection}});var y0;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(y0=br.LSPErrorCodes||(br.LSPErrorCodes={}))});var fr=$(ii=>{"use strict";var b0=ii&&ii.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fy=ii&&ii.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&b0(e,t,r)};Object.defineProperty(ii,"__esModule",{value:!0});ii.createProtocolConnection=void 0;var T0=Rp();fy(Rp(),ii);fy(uy(),ii);function N0(t,e,r,n){return T0.createMessageConnection(t,e,r,n)}ii.createProtocolConnection=N0});var Dp=$(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.generateUuid=an.parse=an.isUUID=an.v4=an.empty=void 0;var Ac=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Oe=class extends Ac{constructor(){super([Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),"-",Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),"-","4",Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),"-",Oe._oneOf(Oe._timeHighBits),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),"-",Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex(),Oe._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Oe._oneOf(Oe._chars)}};Oe._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Oe._timeHighBits=["8","9","a","b"];an.empty=new Ac("00000000-0000-0000-0000-000000000000");function py(){return new Oe}an.v4=py;var v0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function dy(t){return v0.test(t)}an.isUUID=dy;function P0(t){if(!dy(t))throw new Error("invalid uuid");return new Ac(t)}an.parse=P0;function I0(){return py().asHex()}an.generateUuid=I0});var hy=$(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.attachPartialResult=ts.ProgressFeature=ts.attachWorkDone=void 0;var es=fr(),S0=Dp(),Ei=class{constructor(e,r){this._connection=e,this._token=r,Ei.Instances.set(this._token,this)}begin(e,r,n,i){let s={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(es.WorkDoneProgress.type,this._token,s)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(es.WorkDoneProgress.type,this._token,n)}done(){Ei.Instances.delete(this._token),this._connection.sendProgress(es.WorkDoneProgress.type,this._token,{kind:"end"})}};Ei.Instances=new Map;var Lp=class extends Ei{constructor(e,r){super(e,r);this._source=new es.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},xc=class{constructor(){}begin(){}report(){}done(){}},kp=class extends xc{constructor(){super();this._source=new es.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function C0(t,e){if(e===void 0||e.workDoneToken===void 0)return new xc;let r=e.workDoneToken;return delete e.workDoneToken,new Ei(t,r)}ts.attachWorkDone=C0;var R0=t=>class extends t{constructor(){super();this._progressSupported=!1}initialize(e){var r;((r=e==null?void 0:e.window)===null||r===void 0?void 0:r.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(es.WorkDoneProgressCancelNotification.type,n=>{let i=Ei.Instances.get(n.token);(i instanceof Lp||i instanceof kp)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new xc:new Ei(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=S0.generateUuid();return this.connection.sendRequest(es.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Lp(this.connection,e))}else return Promise.resolve(new kp)}};ts.ProgressFeature=R0;var Mp;(function(t){t.type=new es.ProgressType})(Mp||(Mp={}));var my=class{constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Mp.type,this._token,e)}};function A0(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new my(t,r)}ts.attachPartialResult=A0});var gy=$(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.ConfigurationFeature=void 0;var x0=fr(),E0=_c(),w0=t=>class extends t{getConfiguration(e){return e?E0.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(x0.ConfigurationRequest.type,r).then(n=>Array.isArray(e)?n:n[0])}};Ec.ConfigurationFeature=w0});var _y=$(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.WorkspaceFoldersFeature=void 0;var wc=fr(),O0=t=>class extends t{initialize(e){let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new wc.Emitter,this.connection.onNotification(wc.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(wc.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(wc.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Oc.WorkspaceFoldersFeature=O0});var yy=$(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.CallHierarchyFeature=void 0;var Fp=fr(),D0=t=>class extends t{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(Fp.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))},onIncomingCalls:e=>{let r=Fp.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onOutgoingCalls:e=>{let r=Fp.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Dc.CallHierarchyFeature=D0});var qp=$(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.SemanticTokensBuilder=Da.SemanticTokensFeature=void 0;var Vp=fr(),L0=t=>class extends t{get semanticTokens(){return{on:e=>{let r=Vp.SemanticTokensRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onDelta:e=>{let r=Vp.SemanticTokensDeltaRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onRange:e=>{let r=Vp.SemanticTokensRangeRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Da.SemanticTokensFeature=L0;var by=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,s){let a=e,o=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){if(this._prevData!==void 0){let e=this._prevData.length,r=this._data.length,n=0;for(;n<r&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<r&&n<e){let i=0;for(;i<r&&i<e&&this._prevData[e-1-i]===this._data[r-1-i];)i++;let s=this._data.slice(n,r-i);return{resultId:this.id,edits:[{start:n,deleteCount:e-i-n,data:s}]}}else return n<r?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}else return this.build()}};Da.SemanticTokensBuilder=by});var Ty=$(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.ShowDocumentFeature=void 0;var k0=fr(),M0=t=>class extends t{showDocument(e){return this.connection.sendRequest(k0.ShowDocumentRequest.type,e)}};Lc.ShowDocumentFeature=M0});var Ny=$(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.FileOperationsFeature=void 0;var La=fr(),F0=t=>class extends t{onDidCreateFiles(e){this.connection.onNotification(La.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){this.connection.onNotification(La.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){this.connection.onNotification(La.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(La.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(La.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(La.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}};kc.FileOperationsFeature=F0});var vy=$(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.LinkedEditingRangeFeature=void 0;var V0=fr(),q0=t=>class extends t{onLinkedEditingRange(e){this.connection.onRequest(V0.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}};Mc.LinkedEditingRangeFeature=q0});var Py=$(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.MonikerFeature=void 0;var B0=fr(),j0=t=>class extends t{get moniker(){return{on:e=>{let r=B0.MonikerRequest.type;this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Fc.MonikerFeature=j0});var $p=$(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConnection=Ye.combineFeatures=Ye.combineLanguagesFeatures=Ye.combineWorkspaceFeatures=Ye.combineWindowFeatures=Ye.combineClientFeatures=Ye.combineTracerFeatures=Ye.combineTelemetryFeatures=Ye.combineConsoleFeatures=Ye._LanguagesImpl=Ye.BulkUnregistration=Ye.BulkRegistration=Ye.ErrorMessageTracker=Ye.TextDocuments=void 0;var J=fr(),on=_c(),Bp=Dp(),xe=hy(),U0=gy(),G0=_y(),W0=yy(),H0=qp(),Y0=Ty(),K0=Ny(),$0=vy(),z0=Py();function jp(t){if(t!==null)return t}var Iy=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new J.Emitter,this._onDidOpen=new J.Emitter,this._onDidClose=new J.Emitter,this._onDidSave=new J.Emitter,this._onWillSave=new J.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=J.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(r=>{let n=r.textDocument,i=this._configuration.create(n.uri,n.languageId,n.version,n.text);this._documents[n.uri]=i;let s=Object.freeze({document:i});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)}),e.onDidChangeTextDocument(r=>{let n=r.textDocument,i=r.contentChanges;if(i.length===0)return;let s=this._documents[n.uri],{version:a}=n;if(a==null)throw new Error(`Received document change event for ${n.uri} without valid version identifier`);s=this._configuration.update(s,i,a),this._documents[n.uri]=s,this._onDidChangeContent.fire(Object.freeze({document:s}))}),e.onDidCloseTextDocument(r=>{let n=this._documents[r.textDocument.uri];n&&(delete this._documents[r.textDocument.uri],this._onDidClose.fire(Object.freeze({document:n})))}),e.onWillSaveTextDocument(r=>{let n=this._documents[r.textDocument.uri];n&&this._onWillSave.fire(Object.freeze({document:n,reason:r.reason}))}),e.onWillSaveTextDocumentWaitUntil((r,n)=>{let i=this._documents[r.textDocument.uri];return i&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:r.reason}),n):[]}),e.onDidSaveTextDocument(r=>{let n=this._documents[r.textDocument.uri];n&&this._onDidSave.fire(Object.freeze({document:n}))})}};Ye.TextDocuments=Iy;var Sy=class{constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Ye.ErrorMessageTracker=Sy;var Up=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(J.MessageType.Error,e)}warn(e){this.send(J.MessageType.Warning,e)}info(e){this.send(J.MessageType.Info,e)}log(e){this.send(J.MessageType.Log,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(J.LogMessageNotification.type,{type:e,message:r})}},Cy=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:J.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(J.ShowMessageRequest.type,n).then(jp)}showWarningMessage(e,...r){let n={type:J.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(J.ShowMessageRequest.type,n).then(jp)}showInformationMessage(e,...r){let n={type:J.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(J.ShowMessageRequest.type,n).then(jp)}},Ry=Y0.ShowDocumentFeature(xe.ProgressFeature(Cy)),X0;(function(t){function e(){return new Gp}t.create=e})(X0=Ye.BulkRegistration||(Ye.BulkRegistration={}));var Gp=class{constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=on.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=Bp.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},Q0;(function(t){function e(){return new Vc(void 0,[])}t.create=e})(Q0=Ye.BulkUnregistration||(Ye.BulkUnregistration={}));var Vc=class{constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(J.UnregistrationRequest.type,r).then(void 0,n=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=on.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(J.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},Wp=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof Gp?this.registerMany(e):e instanceof Vc?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=on.string(r)?r:r.method,s=Bp.generateUuid(),a={registrations:[{id:s,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(J.RegistrationRequest.type,a).then(o=>(e.add({id:s,method:i}),e),o=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(o)))}registerSingle2(e,r){let n=on.string(e)?e:e.method,i=Bp.generateUuid(),s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(J.RegistrationRequest.type,s).then(a=>J.Disposable.create(()=>{this.unregisterSingle(i,n)}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(J.UnregistrationRequest.type,n).then(void 0,i=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(J.RegistrationRequest.type,r).then(()=>new Vc(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},Ay=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}let n=r(e)?e:{edit:e};return this.connection.sendRequest(J.ApplyWorkspaceEditRequest.type,n)}},xy=K0.FileOperationsFeature(G0.WorkspaceFoldersFeature(U0.ConfigurationFeature(Ay))),Hp=class{constructor(){this._trace=J.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==J.Trace.Off&&this.connection.sendNotification(J.LogTraceNotification.type,{message:e,verbose:this._trace===J.Trace.Verbose?r:void 0})}},Yp=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(J.TelemetryEventNotification.type,e)}},Kp=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return xe.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,r){return xe.attachPartialResult(this.connection,r)}};Ye._LanguagesImpl=Kp;var Ey=z0.MonikerFeature($0.LinkedEditingRangeFeature(H0.SemanticTokensFeature(W0.CallHierarchyFeature(Kp))));function wy(t,e){return function(r){return e(t(r))}}Ye.combineConsoleFeatures=wy;function Oy(t,e){return function(r){return e(t(r))}}Ye.combineTelemetryFeatures=Oy;function Dy(t,e){return function(r){return e(t(r))}}Ye.combineTracerFeatures=Dy;function Ly(t,e){return function(r){return e(t(r))}}Ye.combineClientFeatures=Ly;function ky(t,e){return function(r){return e(t(r))}}Ye.combineWindowFeatures=ky;function My(t,e){return function(r){return e(t(r))}}Ye.combineWorkspaceFeatures=My;function J0(t,e){return function(r){return e(t(r))}}Ye.combineLanguagesFeatures=J0;function Z0(t,e){function r(i,s,a){return i&&s?a(i,s):i||s}return{__brand:"features",console:r(t.console,e.console,wy),tracer:r(t.tracer,e.tracer,Dy),telemetry:r(t.telemetry,e.telemetry,Oy),client:r(t.client,e.client,Ly),window:r(t.window,e.window,ky),workspace:r(t.workspace,e.workspace,My)}}Ye.combineFeatures=Z0;function eE(t,e,r){let n=r&&r.console?new(r.console(Up)):new Up,i=t(n);n.rawAttach(i);let s=r&&r.tracer?new(r.tracer(Hp)):new Hp,a=r&&r.telemetry?new(r.telemetry(Yp)):new Yp,o=r&&r.client?new(r.client(Wp)):new Wp,l=r&&r.window?new(r.window(Ry)):new Ry,c=r&&r.workspace?new(r.workspace(xy)):new xy,u=r&&r.languages?new(r.languages(Ey)):new Ey,f=[n,s,a,o,l,c,u];function m(h){return h instanceof Promise?h:on.thenable(h)?new Promise((y,g)=>{h.then(N=>y(N),N=>g(N))}):Promise.resolve(h)}let p,d,_,P={listen:()=>i.listen(),sendRequest:(h,...y)=>i.sendRequest(on.string(h)?h:h.method,...y),onRequest:(h,y)=>i.onRequest(h,y),sendNotification:(h,y)=>{let g=on.string(h)?h:h.method;arguments.length===1?i.sendNotification(g):i.sendNotification(g,y)},onNotification:(h,y)=>i.onNotification(h,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:h=>d=h,onInitialized:h=>i.onNotification(J.InitializedNotification.type,h),onShutdown:h=>p=h,onExit:h=>_=h,get console(){return n},get telemetry(){return a},get tracer(){return s},get client(){return o},get window(){return l},get workspace(){return c},get languages(){return u},onDidChangeConfiguration:h=>i.onNotification(J.DidChangeConfigurationNotification.type,h),onDidChangeWatchedFiles:h=>i.onNotification(J.DidChangeWatchedFilesNotification.type,h),__textDocumentSync:void 0,onDidOpenTextDocument:h=>i.onNotification(J.DidOpenTextDocumentNotification.type,h),onDidChangeTextDocument:h=>i.onNotification(J.DidChangeTextDocumentNotification.type,h),onDidCloseTextDocument:h=>i.onNotification(J.DidCloseTextDocumentNotification.type,h),onWillSaveTextDocument:h=>i.onNotification(J.WillSaveTextDocumentNotification.type,h),onWillSaveTextDocumentWaitUntil:h=>i.onRequest(J.WillSaveTextDocumentWaitUntilRequest.type,h),onDidSaveTextDocument:h=>i.onNotification(J.DidSaveTextDocumentNotification.type,h),sendDiagnostics:h=>i.sendNotification(J.PublishDiagnosticsNotification.type,h),onHover:h=>i.onRequest(J.HoverRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),onCompletion:h=>i.onRequest(J.CompletionRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onCompletionResolve:h=>i.onRequest(J.CompletionResolveRequest.type,h),onSignatureHelp:h=>i.onRequest(J.SignatureHelpRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),onDeclaration:h=>i.onRequest(J.DeclarationRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onDefinition:h=>i.onRequest(J.DefinitionRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onTypeDefinition:h=>i.onRequest(J.TypeDefinitionRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onImplementation:h=>i.onRequest(J.ImplementationRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onReferences:h=>i.onRequest(J.ReferencesRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onDocumentHighlight:h=>i.onRequest(J.DocumentHighlightRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onDocumentSymbol:h=>i.onRequest(J.DocumentSymbolRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onWorkspaceSymbol:h=>i.onRequest(J.WorkspaceSymbolRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onCodeAction:h=>i.onRequest(J.CodeActionRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onCodeActionResolve:h=>i.onRequest(J.CodeActionResolveRequest.type,(y,g)=>h(y,g)),onCodeLens:h=>i.onRequest(J.CodeLensRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onCodeLensResolve:h=>i.onRequest(J.CodeLensResolveRequest.type,(y,g)=>h(y,g)),onDocumentFormatting:h=>i.onRequest(J.DocumentFormattingRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),onDocumentRangeFormatting:h=>i.onRequest(J.DocumentRangeFormattingRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),onDocumentOnTypeFormatting:h=>i.onRequest(J.DocumentOnTypeFormattingRequest.type,(y,g)=>h(y,g)),onRenameRequest:h=>i.onRequest(J.RenameRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),onPrepareRename:h=>i.onRequest(J.PrepareRenameRequest.type,(y,g)=>h(y,g)),onDocumentLinks:h=>i.onRequest(J.DocumentLinkRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onDocumentLinkResolve:h=>i.onRequest(J.DocumentLinkResolveRequest.type,(y,g)=>h(y,g)),onDocumentColor:h=>i.onRequest(J.DocumentColorRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onColorPresentation:h=>i.onRequest(J.ColorPresentationRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onFoldingRanges:h=>i.onRequest(J.FoldingRangeRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onSelectionRanges:h=>i.onRequest(J.SelectionRangeRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),xe.attachPartialResult(i,y))),onExecuteCommand:h=>i.onRequest(J.ExecuteCommandRequest.type,(y,g)=>h(y,g,xe.attachWorkDone(i,y),void 0)),dispose:()=>i.dispose()};for(let h of f)h.attach(P);return i.onRequest(J.InitializeRequest.type,h=>{e.initialize(h),on.string(h.trace)&&(s.trace=J.Trace.fromString(h.trace));for(let y of f)y.initialize(h.capabilities);if(d){let y=d(h,new J.CancellationTokenSource().token,xe.attachWorkDone(i,h),void 0);return m(y).then(g=>{if(g instanceof J.ResponseError)return g;let N=g;N||(N={capabilities:{}});let S=N.capabilities;S||(S={},N.capabilities=S),S.textDocumentSync===void 0||S.textDocumentSync===null?S.textDocumentSync=on.number(P.__textDocumentSync)?P.__textDocumentSync:J.TextDocumentSyncKind.None:!on.number(S.textDocumentSync)&&!on.number(S.textDocumentSync.change)&&(S.textDocumentSync.change=on.number(P.__textDocumentSync)?P.__textDocumentSync:J.TextDocumentSyncKind.None);for(let V of f)V.fillServerCapabilities(S);return N})}else{let y={capabilities:{textDocumentSync:J.TextDocumentSyncKind.None}};for(let g of f)g.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(J.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,p)return p(new J.CancellationTokenSource().token)}),i.onNotification(J.ExitNotification.type,()=>{try{_&&_()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(J.SetTraceNotification.type,h=>{s.trace=J.Trace.fromString(h.value)}),P}Ye.createConnection=eE});var Vy=$(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.resolveModulePath=Tr.FileSystem=Tr.resolveGlobalYarnPath=Tr.resolveGlobalNodePath=Tr.resolve=Tr.uriToFilePath=void 0;var tE=require("url"),wn=require("path"),zp=require("fs"),Xp=require("child_process");function rE(t){let e=tE.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],a=r[1];s.length===0&&a.length>1&&a[1]===":"&&r.shift()}return wn.normalize(r.join("/"))}Tr.uriToFilePath=rE;function Qp(){return process.platform==="win32"}function qc(t,e,r,n){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,o)=>{let l=process.env,c=Object.create(null);Object.keys(l).forEach(u=>c[u]=l[u]),e&&zp.existsSync(e)&&(c[i]?c[i]=e+wn.delimiter+c[i]:c[i]=e,n&&n(`NODE_PATH value is: ${c[i]}`)),c.ELECTRON_RUN_AS_NODE="1";try{let u=Xp.fork("",[],{cwd:r,env:c,execArgv:["-e",s]});if(u.pid===void 0){o(new Error(`Starting process to resolve node module  ${t} failed`));return}u.on("error",m=>{o(m)}),u.on("message",m=>{m.c==="r"&&(u.send({c:"e"}),m.s?a(m.r):o(new Error(`Failed to resolve module: ${t}`)))});let f={c:"rs",a:t};u.send(f)}catch(u){o(u)}})}Tr.resolve=qc;function Jp(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};Qp()&&(e="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=Xp.spawnSync(e,["config","get","prefix"],n).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let a=s.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Qp()?wn.join(a,"node_modules"):wn.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Tr.resolveGlobalNodePath=Jp;function nE(t){let e="yarn",r={encoding:"utf8"};Qp()&&(e="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=Xp.spawnSync(e,["global","dir","--json"],r),s=i.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=s.trim().split(/\r?\n/);for(let o of a)try{let l=JSON.parse(o);if(l.type==="log")return wn.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}Tr.resolveGlobalYarnPath=nE;var Fy;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!zp.existsSync(__filename.toUpperCase())||!zp.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=r;function n(i,s){return r()?wn.normalize(s).indexOf(wn.normalize(i))===0:wn.normalize(s).toLowerCase().indexOf(wn.normalize(i).toLowerCase())===0}t.isParent=n})(Fy=Tr.FileSystem||(Tr.FileSystem={}));function iE(t,e,r,n){return r?(wn.isAbsolute(r)||(r=wn.join(t,r)),qc(e,r,r,n).then(i=>Fy.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>qc(e,Jp(n),t,n))):qc(e,Jp(n),t,n)}Tr.resolveModulePath=iE});var Zp=$((Sq,qy)=>{"use strict";qy.exports=fr()});var jy=$(Br=>{"use strict";var sE=Br&&Br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),By=Br&&Br.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&sE(e,t,r)};Object.defineProperty(Br,"__esModule",{value:!0});Br.ProposedFeatures=Br.SemanticTokensBuilder=void 0;var aE=qp();Object.defineProperty(Br,"SemanticTokensBuilder",{enumerable:!0,get:function(){return aE.SemanticTokensBuilder}});By(fr(),Br);By($p(),Br);var oE;(function(t){t.all={__brand:"features"}})(oE=Br.ProposedFeatures||(Br.ProposedFeatures={}))});var zt=$(jr=>{"use strict";var lE=jr&&jr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uy=jr&&jr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lE(e,t,r)};Object.defineProperty(jr,"__esModule",{value:!0});jr.createConnection=jr.Files=void 0;var ed=_c(),cE=$p(),ol=Vy(),ks=Zp();Uy(Zp(),jr);Uy(jy(),jr);var uE;(function(t){t.uriToFilePath=ol.uriToFilePath,t.resolveGlobalNodePath=ol.resolveGlobalNodePath,t.resolveGlobalYarnPath=ol.resolveGlobalYarnPath,t.resolve=ol.resolve,t.resolveModulePath=ol.resolveModulePath})(uE=jr.Files||(jr.Files={}));var Gy;function Bc(){if(Gy!==void 0)try{Gy.end()}catch{}}var ka=!1,Wy;function fE(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(Wy=setInterval(()=>{try{process.kill(n,0)}catch{Bc(),process.exit(ka?0:1)}},3e3))}catch{}}for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}fE();var pE={initialize:t=>{let e=t.processId;ed.number(e)&&Wy===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(ka?0:1)}},3e3)},get shutdownReceived(){return ka},set shutdownReceived(t){ka=t},exit:t=>{Bc(),process.exit(t)}};function dE(t,e,r,n){let i,s,a,o;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),ks.ConnectionStrategy.is(t)||ks.ConnectionOptions.is(t)?o=t:(s=t,a=e,o=r),mE(s,a,o,i)}jr.createConnection=dE;function mE(t,e,r,n){if(!t&&!e&&process.argv.length>2){let o,l,c=process.argv.slice(2);for(let u=0;u<c.length;u++){let f=c[u];if(f==="--node-ipc"){t=new ks.IPCMessageReader(process),e=new ks.IPCMessageWriter(process);break}else if(f==="--stdio"){t=process.stdin,e=process.stdout;break}else if(f==="--socket"){o=parseInt(c[u+1]);break}else if(f==="--pipe"){l=c[u+1];break}else{var i=f.split("=");if(i[0]==="--socket"){o=parseInt(i[1]);break}else if(i[0]==="--pipe"){l=i[1];break}}}if(o){let u=ks.createServerSocketTransport(o);t=u[0],e=u[1]}else if(l){let u=ks.createServerPipeTransport(l);t=u[0],e=u[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+s);if(!e)throw new Error("Connection output stream is not set. "+s);if(ed.func(t.read)&&ed.func(t.on)){let o=t;o.on("end",()=>{Bc(),process.exit(ka?0:1)}),o.on("close",()=>{Bc(),process.exit(ka?0:1)})}let a=o=>ks.createProtocolConnection(t,e,o,r);return cE.createConnection(a,pE,n)}});var Yy=$((Aq,Hy)=>{"use strict";Hy.exports=zt()});var Uc=$(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var gb=function(){function t(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(e,r){return r===void 0&&(r=!1),this.onePassHasher.start().appendStr(e).end(r)},t.hashAsciiStr=function(e,r){return r===void 0&&(r=!1),this.onePassHasher.start().appendAsciiStr(e).end(r)},t._hex=function(e){var r=t.hexChars,n=t.hexOut,i,s,a,o;for(o=0;o<4;o+=1)for(s=o*8,i=e[o],a=0;a<8;a+=2)n[s+1+a]=r.charAt(i&15),i>>>=4,n[s+0+a]=r.charAt(i&15),i>>>=4;return n.join("")},t._md5cycle=function(e,r){var n=e[0],i=e[1],s=e[2],a=e[3];n+=(i&s|~i&a)+r[0]-680876936|0,n=(n<<7|n>>>25)+i|0,a+=(n&i|~n&s)+r[1]-389564586|0,a=(a<<12|a>>>20)+n|0,s+=(a&n|~a&i)+r[2]+606105819|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&n)+r[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&a)+r[4]-176418897|0,n=(n<<7|n>>>25)+i|0,a+=(n&i|~n&s)+r[5]+1200080426|0,a=(a<<12|a>>>20)+n|0,s+=(a&n|~a&i)+r[6]-1473231341|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&n)+r[7]-45705983|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&a)+r[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,a+=(n&i|~n&s)+r[9]-1958414417|0,a=(a<<12|a>>>20)+n|0,s+=(a&n|~a&i)+r[10]-42063|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&n)+r[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&a)+r[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,a+=(n&i|~n&s)+r[13]-40341101|0,a=(a<<12|a>>>20)+n|0,s+=(a&n|~a&i)+r[14]-1502002290|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&n)+r[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,n+=(i&a|s&~a)+r[1]-165796510|0,n=(n<<5|n>>>27)+i|0,a+=(n&s|i&~s)+r[6]-1069501632|0,a=(a<<9|a>>>23)+n|0,s+=(a&i|n&~i)+r[11]+643717713|0,s=(s<<14|s>>>18)+a|0,i+=(s&n|a&~n)+r[0]-373897302|0,i=(i<<20|i>>>12)+s|0,n+=(i&a|s&~a)+r[5]-701558691|0,n=(n<<5|n>>>27)+i|0,a+=(n&s|i&~s)+r[10]+38016083|0,a=(a<<9|a>>>23)+n|0,s+=(a&i|n&~i)+r[15]-660478335|0,s=(s<<14|s>>>18)+a|0,i+=(s&n|a&~n)+r[4]-405537848|0,i=(i<<20|i>>>12)+s|0,n+=(i&a|s&~a)+r[9]+568446438|0,n=(n<<5|n>>>27)+i|0,a+=(n&s|i&~s)+r[14]-1019803690|0,a=(a<<9|a>>>23)+n|0,s+=(a&i|n&~i)+r[3]-187363961|0,s=(s<<14|s>>>18)+a|0,i+=(s&n|a&~n)+r[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,n+=(i&a|s&~a)+r[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,a+=(n&s|i&~s)+r[2]-51403784|0,a=(a<<9|a>>>23)+n|0,s+=(a&i|n&~i)+r[7]+1735328473|0,s=(s<<14|s>>>18)+a|0,i+=(s&n|a&~n)+r[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,n+=(i^s^a)+r[5]-378558|0,n=(n<<4|n>>>28)+i|0,a+=(n^i^s)+r[8]-2022574463|0,a=(a<<11|a>>>21)+n|0,s+=(a^n^i)+r[11]+1839030562|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^n)+r[14]-35309556|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^a)+r[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,a+=(n^i^s)+r[4]+1272893353|0,a=(a<<11|a>>>21)+n|0,s+=(a^n^i)+r[7]-155497632|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^n)+r[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^a)+r[13]+681279174|0,n=(n<<4|n>>>28)+i|0,a+=(n^i^s)+r[0]-358537222|0,a=(a<<11|a>>>21)+n|0,s+=(a^n^i)+r[3]-722521979|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^n)+r[6]+76029189|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^a)+r[9]-640364487|0,n=(n<<4|n>>>28)+i|0,a+=(n^i^s)+r[12]-421815835|0,a=(a<<11|a>>>21)+n|0,s+=(a^n^i)+r[15]+530742520|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^n)+r[2]-995338651|0,i=(i<<23|i>>>9)+s|0,n+=(s^(i|~a))+r[0]-198630844|0,n=(n<<6|n>>>26)+i|0,a+=(i^(n|~s))+r[7]+1126891415|0,a=(a<<10|a>>>22)+n|0,s+=(n^(a|~i))+r[14]-1416354905|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~n))+r[5]-57434055|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~a))+r[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,a+=(i^(n|~s))+r[3]-1894986606|0,a=(a<<10|a>>>22)+n|0,s+=(n^(a|~i))+r[10]-1051523|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~n))+r[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~a))+r[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,a+=(i^(n|~s))+r[15]-30611744|0,a=(a<<10|a>>>22)+n|0,s+=(n^(a|~i))+r[6]-1560198380|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~n))+r[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~a))+r[4]-145523070|0,n=(n<<6|n>>>26)+i|0,a+=(i^(n|~s))+r[11]-1120210379|0,a=(a<<10|a>>>22)+n|0,s+=(n^(a|~i))+r[2]+718787259|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~n))+r[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=a+e[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(e){var r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a;for(a=0;a<e.length;a+=1){if(s=e.charCodeAt(a),s<128)r[i++]=s;else if(s<2048)r[i++]=(s>>>6)+192,r[i++]=s&63|128;else if(s<55296||s>56319)r[i++]=(s>>>12)+224,r[i++]=s>>>6&63|128,r[i++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++a)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[i++]=(s>>>18)+240,r[i++]=s>>>12&63|128,r[i++]=s>>>6&63|128,r[i++]=s&63|128}i>=64&&(this._dataLength+=64,t._md5cycle(this._state,n),i-=64,n[0]=n[16])}return this._bufferLength=i,this},t.prototype.appendAsciiStr=function(e){for(var r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a=0;;){for(s=Math.min(e.length-a,64-i);s--;)r[i++]=e.charCodeAt(a++);if(i<64)break;this._dataLength+=64,t._md5cycle(this._state,n),i=0}return this._bufferLength=i,this},t.prototype.appendByteArray=function(e){for(var r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a=0;;){for(s=Math.min(e.length-a,64-i);s--;)r[i++]=e[a++];if(i<64)break;this._dataLength+=64,t._md5cycle(this._state,n),i=0}return this._bufferLength=i,this},t.prototype.getState=function(){var e=this,r=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[r[0],r[1],r[2],r[3]]}},t.prototype.setState=function(e){var r=e.buffer,n=e.state,i=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],s=0;s<r.length;s+=1)this._buffer8[s]=r.charCodeAt(s)},t.prototype.end=function(e){e===void 0&&(e=!1);var r=this._bufferLength,n=this._buffer8,i=this._buffer32,s=(r>>2)+1,a;if(this._dataLength+=r,n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,i.set(t.buffer32Identity.subarray(s),s),r>55&&(t._md5cycle(this._state,i),i.set(t.buffer32Identity)),a=this._dataLength*8,a<=4294967295)i[14]=a;else{var o=a.toString(16).match(/(.*?)(.{0,8})$/);if(o===null)return;var l=parseInt(o[2],16),c=parseInt(o[1],16)||0;i[14]=l,i[15]=c}return t._md5cycle(this._state,i),e?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();sd.Md5=gb;gb.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.")});var gs=$(Lr=>{"use strict";var qi={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},xl={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},rD="tag:yaml.org,2002:",nD={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function mv(t){let e=[0],r=t.indexOf(`
`);for(;r!==-1;)r+=1,e.push(r),r=t.indexOf(`
`,r);return e}function hv(t){let e,r;return typeof t=="string"?(e=mv(t),r=t):(Array.isArray(t)&&(t=t[0]),t&&t.context&&(t.lineStarts||(t.lineStarts=mv(t.context.src)),e=t.lineStarts,r=t.context.src)),{lineStarts:e,src:r}}function ym(t,e){if(typeof t!="number"||t<0)return null;let{lineStarts:r,src:n}=hv(e);if(!r||!n||t>n.length)return null;for(let s=0;s<r.length;++s){let a=r[s];if(t<a)return{line:s,col:t-r[s-1]+1};if(t===a)return{line:s+1,col:1}}let i=r.length;return{line:i,col:t-r[i-1]+1}}function iD(t,e){let{lineStarts:r,src:n}=hv(e);if(!r||!(t>=1)||t>r.length)return null;let i=r[t-1],s=r[t];for(;s&&s>i&&n[s-1]===`
`;)--s;return n.slice(i,s)}function sD({start:t,end:e},r,n=80){let i=iD(t.line,r);if(!i)return null;let{col:s}=t;if(i.length>n)if(s<=n-10)i=i.substr(0,n-1)+"\u2026";else{let u=Math.round(n/2);i.length>s+u&&(i=i.substr(0,s+u-1)+"\u2026"),s-=i.length-n,i="\u2026"+i.substr(1-n)}let a=1,o="";e&&(e.line===t.line&&s+(e.col-t.col)<=n+1?a=e.col-t.col:(a=Math.min(i.length+1,n)-s,o="\u2026"));let l=s>1?" ".repeat(s-1):"",c="^".repeat(a);return`${i}
${l}${c}${o}`}var ea=class{static copy(e){return new ea(e.start,e.end)}constructor(e,r){this.start=e,this.end=r||e}isEmpty(){return typeof this.start!="number"||!this.end||this.end<=this.start}setOrigRange(e,r){let{start:n,end:i}=this;if(e.length===0||i<=e[0])return this.origStart=n,this.origEnd=i,r;let s=r;for(;s<e.length&&!(e[s]>n);)++s;this.origStart=n+s;let a=s;for(;s<e.length&&!(e[s]>=i);)++s;return this.origEnd=i+s,a}},or=class{static addStringTerminator(e,r,n){if(n[n.length-1]===`
`)return n;let i=or.endOfWhiteSpace(e,r);return i>=e.length||e[i]===`
`?n+`
`:n}static atDocumentBoundary(e,r,n){let i=e[r];if(!i)return!0;let s=e[r-1];if(s&&s!==`
`)return!1;if(n){if(i!==n)return!1}else if(i!==qi.DIRECTIVES_END&&i!==qi.DOCUMENT_END)return!1;let a=e[r+1],o=e[r+2];if(a!==i||o!==i)return!1;let l=e[r+3];return!l||l===`
`||l==="	"||l===" "}static endOfIdentifier(e,r){let n=e[r],i=n==="<",s=i?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];for(;n&&s.indexOf(n)===-1;)n=e[r+=1];return i&&n===">"&&(r+=1),r}static endOfIndent(e,r){let n=e[r];for(;n===" ";)n=e[r+=1];return r}static endOfLine(e,r){let n=e[r];for(;n&&n!==`
`;)n=e[r+=1];return r}static endOfWhiteSpace(e,r){let n=e[r];for(;n==="	"||n===" ";)n=e[r+=1];return r}static startOfLine(e,r){let n=e[r-1];if(n===`
`)return r;for(;n&&n!==`
`;)n=e[r-=1];return r+1}static endOfBlockIndent(e,r,n){let i=or.endOfIndent(e,n);if(i>n+r)return i;{let s=or.endOfWhiteSpace(e,i),a=e[s];if(!a||a===`
`)return s}return null}static atBlank(e,r,n){let i=e[r];return i===`
`||i==="	"||i===" "||n&&!i}static nextNodeIsIndented(e,r,n){return!e||r<0?!1:r>0?!0:n&&e==="-"}static normalizeOffset(e,r){let n=e[r];return n?n!==`
`&&e[r-1]===`
`?r-1:or.endOfWhiteSpace(e,r):r}static foldNewline(e,r,n){let i=0,s=!1,a="",o=e[r+1];for(;o===" "||o==="	"||o===`
`;){switch(o){case`
`:i=0,r+=1,a+=`
`;break;case"	":i<=n&&(s=!0),r=or.endOfWhiteSpace(e,r+2)-1;break;case" ":i+=1,r+=1;break}o=e[r+1]}return a||(a=" "),o&&i<=n&&(s=!0),{fold:a,offset:r,error:s}}constructor(e,r,n){Object.defineProperty(this,"context",{value:n||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=r||[],this.type=e,this.value=null}getPropValue(e,r,n){if(!this.context)return null;let{src:i}=this.context,s=this.props[e];return s&&i[s.start]===r?i.slice(s.start+(n?1:0),s.end):null}get anchor(){for(let e=0;e<this.props.length;++e){let r=this.getPropValue(e,qi.ANCHOR,!0);if(r!=null)return r}return null}get comment(){let e=[];for(let r=0;r<this.props.length;++r){let n=this.getPropValue(r,qi.COMMENT,!0);n!=null&&e.push(n)}return e.length>0?e.join(`
`):null}commentHasRequiredWhitespace(e){let{src:r}=this.context;if(this.header&&e===this.header.end||!this.valueRange)return!1;let{end:n}=this.valueRange;return e!==n||or.atBlank(r,n-1)}get hasComment(){if(this.context){let{src:e}=this.context;for(let r=0;r<this.props.length;++r)if(e[this.props[r].start]===qi.COMMENT)return!0}return!1}get hasProps(){if(this.context){let{src:e}=this.context;for(let r=0;r<this.props.length;++r)if(e[this.props[r].start]!==qi.COMMENT)return!0}return!1}get includesTrailingLines(){return!1}get jsonLike(){return[xl.FLOW_MAP,xl.FLOW_SEQ,xl.QUOTE_DOUBLE,xl.QUOTE_SINGLE].indexOf(this.type)!==-1}get rangeAsLinePos(){if(!this.range||!this.context)return;let e=ym(this.range.start,this.context.root);if(!e)return;let r=ym(this.range.end,this.context.root);return{start:e,end:r}}get rawValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:r}=this.valueRange;return this.context.src.slice(e,r)}get tag(){for(let e=0;e<this.props.length;++e){let r=this.getPropValue(e,qi.TAG,!1);if(r!=null){if(r[1]==="<")return{verbatim:r.slice(2,-1)};{let[n,i,s]=r.match(/^(.*!)([^!]*)$/);return{handle:i,suffix:s}}}}return null}get valueRangeContainsNewline(){if(!this.valueRange||!this.context)return!1;let{start:e,end:r}=this.valueRange,{src:n}=this.context;for(let i=e;i<r;++i)if(n[i]===`
`)return!0;return!1}parseComment(e){let{src:r}=this.context;if(r[e]===qi.COMMENT){let n=or.endOfLine(r,e+1),i=new ea(e,n);return this.props.push(i),n}return e}setOrigRanges(e,r){return this.range&&(r=this.range.setOrigRange(e,r)),this.valueRange&&this.valueRange.setOrigRange(e,r),this.props.forEach(n=>n.setOrigRange(e,r)),r}toString(){let{context:{src:e},range:r,value:n}=this;if(n!=null)return n;let i=e.slice(r.start,r.end);return or.addStringTerminator(e,r.end,i)}},Po=class extends Error{constructor(e,r,n){if(!n||!(r instanceof or))throw new Error(`Invalid arguments for new ${e}`);super();this.name=e,this.message=n,this.source=r}makePretty(){if(!this.source)return;this.nodeType=this.source.type;let e=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new ea(this.offset,this.offset+1);let r=e&&ym(this.offset,e);if(r){let n={line:r.line,col:r.col+1};this.linePos={start:r,end:n}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){let{line:r,col:n}=this.linePos.start;this.message+=` at line ${r}, column ${n}`;let i=e&&sD(this.linePos,e);i&&(this.message+=`:

${i}
`)}delete this.source}},gv=class extends Po{constructor(e,r){super("YAMLReferenceError",e,r)}},Yu=class extends Po{constructor(e,r){super("YAMLSemanticError",e,r)}},_v=class extends Po{constructor(e,r){super("YAMLSyntaxError",e,r)}},yv=class extends Po{constructor(e,r){super("YAMLWarning",e,r)}};function aD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var El=class extends or{static endOfLine(e,r,n){let i=e[r],s=r;for(;i&&i!==`
`&&!(n&&(i==="["||i==="]"||i==="{"||i==="}"||i===","));){let a=e[s+1];if(i===":"&&(!a||a===`
`||a==="	"||a===" "||n&&a===",")||(i===" "||i==="	")&&a==="#")break;s+=1,i=a}return s}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:r}=this.valueRange,{src:n}=this.context,i=n[r-1];for(;e<r&&(i===`
`||i==="	"||i===" ");)i=n[--r-1];let s="";for(let o=e;o<r;++o){let l=n[o];if(l===`
`){let{fold:c,offset:u}=or.foldNewline(n,o,-1);s+=c,o=u}else if(l===" "||l==="	"){let c=o,u=n[o+1];for(;o<r&&(u===" "||u==="	");)o+=1,u=n[o+1];u!==`
`&&(s+=o>c?n.slice(c,o+1):l)}else s+=l}let a=n[e];switch(a){case"	":{let o="Plain value cannot start with a tab character";return{errors:[new Yu(this,o)],str:s}}case"@":case"`":{let o=`Plain value cannot start with reserved character ${a}`;return{errors:[new Yu(this,o)],str:s}}default:return s}}parseBlockValue(e){let{indent:r,inFlow:n,src:i}=this.context,s=e,a=e;for(let o=i[s];o===`
`&&!or.atDocumentBoundary(i,s+1);o=i[s]){let l=or.endOfBlockIndent(i,r,s+1);if(l===null||i[l]==="#")break;i[l]===`
`?s=l:(a=El.endOfLine(i,l,n),s=a)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=a,a}parse(e,r){this.context=e;let{inFlow:n,src:i}=e,s=r,a=i[s];return a&&a!=="#"&&a!==`
`&&(s=El.endOfLine(i,r,n)),this.valueRange=new ea(r,s),s=or.endOfWhiteSpace(i,s),s=this.parseComment(s),(!this.hasComment||this.valueRange.isEmpty())&&(s=this.parseBlockValue(s)),s}};Lr.Char=qi;Lr.Node=or;Lr.PlainValue=El;Lr.Range=ea;Lr.Type=xl;Lr.YAMLError=Po;Lr.YAMLReferenceError=gv;Lr.YAMLSemanticError=Yu;Lr.YAMLSyntaxError=_v;Lr.YAMLWarning=yv;Lr._defineProperty=aD;Lr.defaultTagPrefix=rD;Lr.defaultTags=nD});var Iv=$(Pv=>{"use strict";var k=gs(),Io=class extends k.Node{constructor(){super(k.Type.BLANK_LINE)}get includesTrailingLines(){return!0}parse(e,r){return this.context=e,this.range=new k.Range(r,r+1),r+1}},Ku=class extends k.Node{constructor(e,r){super(e,r);this.node=null}get includesTrailingLines(){return!!this.node&&this.node.includesTrailingLines}parse(e,r){this.context=e;let{parseNode:n,src:i}=e,{atLineStart:s,lineStart:a}=e;!s&&this.type===k.Type.SEQ_ITEM&&(this.error=new k.YAMLSemanticError(this,"Sequence items must not have preceding content on the same line"));let o=s?r-a:e.indent,l=k.Node.endOfWhiteSpace(i,r+1),c=i[l],u=c==="#",f=[],m=null;for(;c===`
`||c==="#";){if(c==="#"){let d=k.Node.endOfLine(i,l+1);f.push(new k.Range(l,d)),l=d}else{s=!0,a=l+1;let d=k.Node.endOfWhiteSpace(i,a);i[d]===`
`&&f.length===0&&(m=new Io,a=m.parse({src:i},a)),l=k.Node.endOfIndent(i,a)}c=i[l]}if(k.Node.nextNodeIsIndented(c,l-(a+o),this.type!==k.Type.SEQ_ITEM)?this.node=n({atLineStart:s,inCollection:!1,indent:o,lineStart:a,parent:this},l):c&&a>r+1&&(l=a-1),this.node){if(m){let d=e.parent.items||e.parent.contents;d&&d.push(m)}f.length&&Array.prototype.push.apply(this.props,f),l=this.node.range.end}else if(u){let d=f[0];this.props.push(d),l=d.end}else l=k.Node.endOfLine(i,r+1);let p=this.node?this.node.valueRange.end:l;return this.valueRange=new k.Range(r,p),l}setOrigRanges(e,r){return r=super.setOrigRanges(e,r),this.node?this.node.setOrigRanges(e,r):r}toString(){let{context:{src:e},node:r,range:n,value:i}=this;if(i!=null)return i;let s=r?e.slice(n.start,r.range.start)+String(r):e.slice(n.start,n.end);return k.Node.addStringTerminator(e,n.end,s)}},So=class extends k.Node{constructor(){super(k.Type.COMMENT)}parse(e,r){this.context=e;let n=this.parseComment(r);return this.range=new k.Range(r,n),n}};function bm(t){let e=t;for(;e instanceof Ku;)e=e.node;if(!(e instanceof Co))return null;let r=e.items.length,n=-1;for(let a=r-1;a>=0;--a){let o=e.items[a];if(o.type===k.Type.COMMENT){let{indent:l,lineStart:c}=o.context;if(l>0&&o.range.start>=c+l)break;n=a}else if(o.type===k.Type.BLANK_LINE)n=a;else break}if(n===-1)return null;let i=e.items.splice(n,r-n),s=i[0].range.start;for(;e.range.end=s,e.valueRange&&e.valueRange.end>s&&(e.valueRange.end=s),e!==t;)e=e.context.parent;return i}var Co=class extends k.Node{static nextContentHasIndent(e,r,n){let i=k.Node.endOfLine(e,r)+1;r=k.Node.endOfWhiteSpace(e,i);let s=e[r];return s?r>=i+n?!0:s!=="#"&&s!==`
`?!1:Co.nextContentHasIndent(e,r,n):!1}constructor(e){super(e.type===k.Type.SEQ_ITEM?k.Type.SEQ:k.Type.MAP);for(let n=e.props.length-1;n>=0;--n)if(e.props[n].start<e.context.lineStart){this.props=e.props.slice(0,n+1),e.props=e.props.slice(n+1);let i=e.props[0]||e.valueRange;e.range.start=i.start;break}this.items=[e];let r=bm(e);r&&Array.prototype.push.apply(this.items,r)}get includesTrailingLines(){return this.items.length>0}parse(e,r){this.context=e;let{parseNode:n,src:i}=e,s=k.Node.startOfLine(i,r),a=this.items[0];a.context.parent=this,this.valueRange=k.Range.copy(a.valueRange);let o=a.range.start-a.context.lineStart,l=r;l=k.Node.normalizeOffset(i,l);let c=i[l],u=k.Node.endOfWhiteSpace(i,s)===l,f=!1;for(;c;){for(;c===`
`||c==="#";){if(u&&c===`
`&&!f){let d=new Io;if(l=d.parse({src:i},l),this.valueRange.end=l,l>=i.length){c=null;break}this.items.push(d),l-=1}else if(c==="#"){if(l<s+o&&!Co.nextContentHasIndent(i,l,o))return l;let d=new So;if(l=d.parse({indent:o,lineStart:s,src:i},l),this.items.push(d),this.valueRange.end=l,l>=i.length){c=null;break}}if(s=l+1,l=k.Node.endOfIndent(i,s),k.Node.atBlank(i,l)){let d=k.Node.endOfWhiteSpace(i,l),_=i[d];(!_||_===`
`||_==="#")&&(l=d)}c=i[l],u=!0}if(!c)break;if(l!==s+o&&(u||c!==":")){if(l<s+o){s>r&&(l=s);break}else if(!this.error){let d="All collection items must start at the same column";this.error=new k.YAMLSyntaxError(this,d)}}if(a.type===k.Type.SEQ_ITEM){if(c!=="-"){s>r&&(l=s);break}}else if(c==="-"&&!this.error){let d=i[l+1];if(!d||d===`
`||d==="	"||d===" "){let _="A collection cannot be both a mapping and a sequence";this.error=new k.YAMLSyntaxError(this,_)}}let m=n({atLineStart:u,inCollection:!0,indent:o,lineStart:s,parent:this},l);if(!m)return l;if(this.items.push(m),this.valueRange.end=m.valueRange.end,l=k.Node.normalizeOffset(i,m.range.end),c=i[l],u=!1,f=m.includesTrailingLines,c){let d=l-1,_=i[d];for(;_===" "||_==="	";)_=i[--d];_===`
`&&(s=d+1,u=!0)}let p=bm(m);p&&Array.prototype.push.apply(this.items,p)}return l}setOrigRanges(e,r){return r=super.setOrigRanges(e,r),this.items.forEach(n=>{r=n.setOrigRanges(e,r)}),r}toString(){let{context:{src:e},items:r,range:n,value:i}=this;if(i!=null)return i;let s=e.slice(n.start,r[0].range.start)+String(r[0]);for(let a=1;a<r.length;++a){let o=r[a],{atLineStart:l,indent:c}=o.context;if(l)for(let u=0;u<c;++u)s+=" ";s+=String(o)}return k.Node.addStringTerminator(e,n.end,s)}},bv=class extends k.Node{constructor(){super(k.Type.DIRECTIVE);this.name=null}get parameters(){let e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}parseName(e){let{src:r}=this.context,n=e,i=r[n];for(;i&&i!==`
`&&i!=="	"&&i!==" ";)i=r[n+=1];return this.name=r.slice(e,n),n}parseParameters(e){let{src:r}=this.context,n=e,i=r[n];for(;i&&i!==`
`&&i!=="#";)i=r[n+=1];return this.valueRange=new k.Range(e,n),n}parse(e,r){this.context=e;let n=this.parseName(r+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new k.Range(r,n),n}},wl=class extends k.Node{static startCommentOrEndBlankLine(e,r){let n=k.Node.endOfWhiteSpace(e,r),i=e[n];return i==="#"||i===`
`?n:r}constructor(){super(k.Type.DOCUMENT);this.directives=null,this.contents=null,this.directivesEndMarker=null,this.documentEndMarker=null}parseDirectives(e){let{src:r}=this.context;this.directives=[];let n=!0,i=!1,s=e;for(;!k.Node.atDocumentBoundary(r,s,k.Char.DIRECTIVES_END);)switch(s=wl.startCommentOrEndBlankLine(r,s),r[s]){case`
`:if(n){let a=new Io;s=a.parse({src:r},s),s<r.length&&this.directives.push(a)}else s+=1,n=!0;break;case"#":{let a=new So;s=a.parse({src:r},s),this.directives.push(a),n=!1}break;case"%":{let a=new bv;s=a.parse({parent:this,src:r},s),this.directives.push(a),i=!0,n=!1}break;default:return i?this.error=new k.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s}return r[s]?(this.directivesEndMarker=new k.Range(s,s+3),s+3):(i?this.error=new k.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s)}parseContents(e){let{parseNode:r,src:n}=this.context;this.contents||(this.contents=[]);let i=e;for(;n[i-1]==="-";)i-=1;let s=k.Node.endOfWhiteSpace(n,e),a=i===e;for(this.valueRange=new k.Range(s);!k.Node.atDocumentBoundary(n,s,k.Char.DOCUMENT_END);){switch(n[s]){case`
`:if(a){let o=new Io;s=o.parse({src:n},s),s<n.length&&this.contents.push(o)}else s+=1,a=!0;i=s;break;case"#":{let o=new So;s=o.parse({src:n},s),this.contents.push(o),a=!1}break;default:{let o=k.Node.endOfIndent(n,s),c=r({atLineStart:a,indent:-1,inFlow:!1,inCollection:!1,lineStart:i,parent:this},o);if(!c)return this.valueRange.end=o;this.contents.push(c),s=c.range.end,a=!1;let u=bm(c);u&&Array.prototype.push.apply(this.contents,u)}}s=wl.startCommentOrEndBlankLine(n,s)}if(this.valueRange.end=s,n[s]&&(this.documentEndMarker=new k.Range(s,s+3),s+=3,n[s])){if(s=k.Node.endOfWhiteSpace(n,s),n[s]==="#"){let o=new So;s=o.parse({src:n},s),this.contents.push(o)}switch(n[s]){case`
`:s+=1;break;case void 0:break;default:this.error=new k.YAMLSyntaxError(this,"Document end marker line cannot have a non-comment suffix")}}return s}parse(e,r){e.root=this,this.context=e;let{src:n}=e,i=n.charCodeAt(r)===65279?r+1:r;return i=this.parseDirectives(i),i=this.parseContents(i),i}setOrigRanges(e,r){return r=super.setOrigRanges(e,r),this.directives.forEach(n=>{r=n.setOrigRanges(e,r)}),this.directivesEndMarker&&(r=this.directivesEndMarker.setOrigRange(e,r)),this.contents.forEach(n=>{r=n.setOrigRanges(e,r)}),this.documentEndMarker&&(r=this.documentEndMarker.setOrigRange(e,r)),r}toString(){let{contents:e,directives:r,value:n}=this;if(n!=null)return n;let i=r.join("");return e.length>0&&((r.length>0||e[0].type===k.Type.COMMENT)&&(i+=`---
`),i+=e.join("")),i[i.length-1]!==`
`&&(i+=`
`),i}},Tv=class extends k.Node{parse(e,r){this.context=e;let{src:n}=e,i=k.Node.endOfIdentifier(n,r+1);return this.valueRange=new k.Range(r+1,i),i=k.Node.endOfWhiteSpace(n,i),i=this.parseComment(i),i}},_s={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},Nv=class extends k.Node{constructor(e,r){super(e,r);this.blockIndent=null,this.chomping=_s.CLIP,this.header=null}get includesTrailingLines(){return this.chomping===_s.KEEP}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:r}=this.valueRange,{indent:n,src:i}=this.context;if(this.valueRange.isEmpty())return"";let s=null,a=i[r-1];for(;a===`
`||a==="	"||a===" ";){if(r-=1,r<=e){if(this.chomping===_s.KEEP)break;return""}a===`
`&&(s=r),a=i[r-1]}let o=r+1;s&&(this.chomping===_s.KEEP?(o=s,r=this.valueRange.end):r=s);let l=n+this.blockIndent,c=this.type===k.Type.BLOCK_FOLDED,u=!0,f="",m="",p=!1;for(let d=e;d<r;++d){for(let P=0;P<l&&i[d]===" ";++P)d+=1;let _=i[d];if(_===`
`)m===`
`?f+=`
`:m=`
`;else{let P=k.Node.endOfLine(i,d),h=i.slice(d,P);d=P,c&&(_===" "||_==="	")&&d<o?(m===" "?m=`
`:!p&&!u&&m===`
`&&(m=`

`),f+=m+h,m=P<r&&i[P]||"",p=!0):(f+=m+h,m=c&&d<o?" ":`
`,p=!1),u&&h!==""&&(u=!1)}}return this.chomping===_s.STRIP?f:f+`
`}parseBlockHeader(e){let{src:r}=this.context,n=e+1,i="";for(;;){let s=r[n];switch(s){case"-":this.chomping=_s.STRIP;break;case"+":this.chomping=_s.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i+=s;break;default:return this.blockIndent=Number(i)||null,this.header=new k.Range(e,n),n}n+=1}}parseBlockValue(e){let{indent:r,src:n}=this.context,i=!!this.blockIndent,s=e,a=e,o=1;for(let l=n[s];l===`
`&&(s+=1,!k.Node.atDocumentBoundary(n,s));l=n[s]){let c=k.Node.endOfBlockIndent(n,r,s);if(c===null)break;let u=n[c],f=c-(s+r);if(this.blockIndent){if(u&&u!==`
`&&f<this.blockIndent){if(n[c]==="#")break;if(!this.error){let p=`Block scalars must not be less indented than their ${i?"explicit indentation indicator":"first line"}`;this.error=new k.YAMLSemanticError(this,p)}}}else if(n[c]!==`
`){if(f<o){let m="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new k.YAMLSemanticError(this,m)}this.blockIndent=f}else f>o&&(o=f);n[c]===`
`?s=c:s=a=k.Node.endOfLine(n,c)}return this.chomping!==_s.KEEP&&(s=n[a]?a+1:a),this.valueRange=new k.Range(e+1,s),s}parse(e,r){this.context=e;let{src:n}=e,i=this.parseBlockHeader(r);return i=k.Node.endOfWhiteSpace(n,i),i=this.parseComment(i),i=this.parseBlockValue(i),i}setOrigRanges(e,r){return r=super.setOrigRanges(e,r),this.header?this.header.setOrigRange(e,r):r}},vv=class extends k.Node{constructor(e,r){super(e,r);this.items=null}prevNodeIsJsonLike(e=this.items.length){let r=this.items[e-1];return!!r&&(r.jsonLike||r.type===k.Type.COMMENT&&this.prevNodeIsJsonLike(e-1))}parse(e,r){this.context=e;let{parseNode:n,src:i}=e,{indent:s,lineStart:a}=e,o=i[r];this.items=[{char:o,offset:r}];let l=k.Node.endOfWhiteSpace(i,r+1);for(o=i[l];o&&o!=="]"&&o!=="}";){switch(o){case`
`:{a=l+1;let c=k.Node.endOfWhiteSpace(i,a);if(i[c]===`
`){let u=new Io;a=u.parse({src:i},a),this.items.push(u)}if(l=k.Node.endOfIndent(i,a),l<=a+s&&(o=i[l],l<a+s||o!=="]"&&o!=="}")){let u="Insufficient indentation in flow collection";this.error=new k.YAMLSemanticError(this,u)}}break;case",":this.items.push({char:o,offset:l}),l+=1;break;case"#":{let c=new So;l=c.parse({src:i},l),this.items.push(c)}break;case"?":case":":{let c=i[l+1];if(c===`
`||c==="	"||c===" "||c===","||o===":"&&this.prevNodeIsJsonLike()){this.items.push({char:o,offset:l}),l+=1;break}}default:{let c=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:a,parent:this},l);if(!c)return this.valueRange=new k.Range(r,l),l;this.items.push(c),l=k.Node.normalizeOffset(i,c.range.end)}}l=k.Node.endOfWhiteSpace(i,l),o=i[l]}return this.valueRange=new k.Range(r,l+1),o&&(this.items.push({char:o,offset:l}),l=k.Node.endOfWhiteSpace(i,l+1),l=this.parseComment(l)),l}setOrigRanges(e,r){return r=super.setOrigRanges(e,r),this.items.forEach(n=>{if(n instanceof k.Node)r=n.setOrigRanges(e,r);else if(e.length===0)n.origOffset=n.offset;else{let i=r;for(;i<e.length&&!(e[i]>n.offset);)++i;n.origOffset=n.offset+i,r=i}}),r}toString(){let{context:{src:e},items:r,range:n,value:i}=this;if(i!=null)return i;let s=r.filter(l=>l instanceof k.Node),a="",o=n.start;return s.forEach(l=>{let c=e.slice(o,l.range.start);o=l.range.end,a+=c+String(l),a[a.length-1]===`
`&&e[o-1]!==`
`&&e[o]===`
`&&(o+=1)}),a+=e.slice(o,n.end),k.Node.addStringTerminator(e,n.end,a)}},$u=class extends k.Node{static endOfQuote(e,r){let n=e[r];for(;n&&n!=='"';)r+=n==="\\"?2:1,n=e[r];return r+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:r,end:n}=this.valueRange,{indent:i,src:s}=this.context;s[n-1]!=='"'&&e.push(new k.YAMLSyntaxError(this,'Missing closing "quote'));let a="";for(let o=r+1;o<n-1;++o){let l=s[o];if(l===`
`){k.Node.atDocumentBoundary(s,o+1)&&e.push(new k.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:c,offset:u,error:f}=k.Node.foldNewline(s,o,i);a+=c,o=u,f&&e.push(new k.YAMLSemanticError(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(l==="\\")switch(o+=1,s[o]){case"0":a+="\0";break;case"a":a+="\x07";break;case"b":a+="\b";break;case"e":a+="\x1B";break;case"f":a+="\f";break;case"n":a+=`
`;break;case"r":a+="\r";break;case"t":a+="	";break;case"v":a+="\v";break;case"N":a+="\x85";break;case"_":a+="\xA0";break;case"L":a+="\u2028";break;case"P":a+="\u2029";break;case" ":a+=" ";break;case'"':a+='"';break;case"/":a+="/";break;case"\\":a+="\\";break;case"	":a+="	";break;case"x":a+=this.parseCharCode(o+1,2,e),o+=2;break;case"u":a+=this.parseCharCode(o+1,4,e),o+=4;break;case"U":a+=this.parseCharCode(o+1,8,e),o+=8;break;case`
`:for(;s[o+1]===" "||s[o+1]==="	";)o+=1;break;default:e.push(new k.YAMLSyntaxError(this,`Invalid escape sequence ${s.substr(o-1,2)}`)),a+="\\"+s[o]}else if(l===" "||l==="	"){let c=o,u=s[o+1];for(;u===" "||u==="	";)o+=1,u=s[o+1];u!==`
`&&(a+=o>c?s.slice(c,o+1):l)}else a+=l}return e.length>0?{errors:e,str:a}:a}parseCharCode(e,r,n){let{src:i}=this.context,s=i.substr(e,r),o=s.length===r&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;return isNaN(o)?(n.push(new k.YAMLSyntaxError(this,`Invalid escape sequence ${i.substr(e-2,r+2)}`)),i.substr(e-2,r+2)):String.fromCodePoint(o)}parse(e,r){this.context=e;let{src:n}=e,i=$u.endOfQuote(n,r+1);return this.valueRange=new k.Range(r,i),i=k.Node.endOfWhiteSpace(n,i),i=this.parseComment(i),i}},zu=class extends k.Node{static endOfQuote(e,r){let n=e[r];for(;n;)if(n==="'"){if(e[r+1]!=="'")break;n=e[r+=2]}else n=e[r+=1];return r+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:r,end:n}=this.valueRange,{indent:i,src:s}=this.context;s[n-1]!=="'"&&e.push(new k.YAMLSyntaxError(this,"Missing closing 'quote"));let a="";for(let o=r+1;o<n-1;++o){let l=s[o];if(l===`
`){k.Node.atDocumentBoundary(s,o+1)&&e.push(new k.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:c,offset:u,error:f}=k.Node.foldNewline(s,o,i);a+=c,o=u,f&&e.push(new k.YAMLSemanticError(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(l==="'")a+=l,o+=1,s[o]!=="'"&&e.push(new k.YAMLSyntaxError(this,"Unescaped single quote? This should not happen."));else if(l===" "||l==="	"){let c=o,u=s[o+1];for(;u===" "||u==="	";)o+=1,u=s[o+1];u!==`
`&&(a+=o>c?s.slice(c,o+1):l)}else a+=l}return e.length>0?{errors:e,str:a}:a}parse(e,r){this.context=e;let{src:n}=e,i=zu.endOfQuote(n,r+1);return this.valueRange=new k.Range(r,i),i=k.Node.endOfWhiteSpace(n,i),i=this.parseComment(i),i}};function oD(t,e){switch(t){case k.Type.ALIAS:return new Tv(t,e);case k.Type.BLOCK_FOLDED:case k.Type.BLOCK_LITERAL:return new Nv(t,e);case k.Type.FLOW_MAP:case k.Type.FLOW_SEQ:return new vv(t,e);case k.Type.MAP_KEY:case k.Type.MAP_VALUE:case k.Type.SEQ_ITEM:return new Ku(t,e);case k.Type.COMMENT:case k.Type.PLAIN:return new k.PlainValue(t,e);case k.Type.QUOTE_DOUBLE:return new $u(t,e);case k.Type.QUOTE_SINGLE:return new zu(t,e);default:return null}}var Ro=class{static parseType(e,r,n){switch(e[r]){case"*":return k.Type.ALIAS;case">":return k.Type.BLOCK_FOLDED;case"|":return k.Type.BLOCK_LITERAL;case"{":return k.Type.FLOW_MAP;case"[":return k.Type.FLOW_SEQ;case"?":return!n&&k.Node.atBlank(e,r+1,!0)?k.Type.MAP_KEY:k.Type.PLAIN;case":":return!n&&k.Node.atBlank(e,r+1,!0)?k.Type.MAP_VALUE:k.Type.PLAIN;case"-":return!n&&k.Node.atBlank(e,r+1,!0)?k.Type.SEQ_ITEM:k.Type.PLAIN;case'"':return k.Type.QUOTE_DOUBLE;case"'":return k.Type.QUOTE_SINGLE;default:return k.Type.PLAIN}}constructor(e={},{atLineStart:r,inCollection:n,inFlow:i,indent:s,lineStart:a,parent:o}={}){k._defineProperty(this,"parseNode",(l,c)=>{if(k.Node.atDocumentBoundary(this.src,c))return null;let u=new Ro(this,l),{props:f,type:m,valueStart:p}=u.parseProps(c),d=oD(m,f),_=d.parse(u,p);if(d.range=new k.Range(c,_),_<=c&&(d.error=new Error("Node#parse consumed no characters"),d.error.parseEnd=_,d.error.source=d,d.range.end=c+1),u.nodeStartsCollection(d)){!d.error&&!u.atLineStart&&u.parent.type===k.Type.DOCUMENT&&(d.error=new k.YAMLSyntaxError(d,"Block collection must not have preceding content here (e.g. directives-end indicator)"));let P=new Co(d);return _=P.parse(new Ro(u),_),P.range=new k.Range(c,_),P}return d}),this.atLineStart=r??(e.atLineStart||!1),this.inCollection=n??(e.inCollection||!1),this.inFlow=i??(e.inFlow||!1),this.indent=s??e.indent,this.lineStart=a??e.lineStart,this.parent=o??(e.parent||{}),this.root=e.root,this.src=e.src}nodeStartsCollection(e){let{inCollection:r,inFlow:n,src:i}=this;if(r||n)return!1;if(e instanceof Ku)return!0;let s=e.range.end;return i[s]===`
`||i[s-1]===`
`?!1:(s=k.Node.endOfWhiteSpace(i,s),i[s]===":")}parseProps(e){let{inFlow:r,parent:n,src:i}=this,s=[],a=!1;e=this.atLineStart?k.Node.endOfIndent(i,e):k.Node.endOfWhiteSpace(i,e);let o=i[e];for(;o===k.Char.ANCHOR||o===k.Char.COMMENT||o===k.Char.TAG||o===`
`;){if(o===`
`){let c=e,u;do u=c+1,c=k.Node.endOfIndent(i,u);while(i[c]===`
`);let f=c-(u+this.indent),m=n.type===k.Type.SEQ_ITEM&&n.context.atLineStart;if(i[c]!=="#"&&!k.Node.nextNodeIsIndented(i[c],f,!m))break;this.atLineStart=!0,this.lineStart=u,a=!1,e=c}else if(o===k.Char.COMMENT){let c=k.Node.endOfLine(i,e+1);s.push(new k.Range(e,c)),e=c}else{let c=k.Node.endOfIdentifier(i,e+1);o===k.Char.TAG&&i[c]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(e+1,c+13))&&(c=k.Node.endOfIdentifier(i,c+5)),s.push(new k.Range(e,c)),a=!0,e=k.Node.endOfWhiteSpace(i,c)}o=i[e]}a&&o===":"&&k.Node.atBlank(i,e+1,!0)&&(e-=1);let l=Ro.parseType(i,e,r);return{props:s,type:l,valueStart:e}}};function lD(t){let e=[];t.indexOf("\r")!==-1&&(t=t.replace(/\r\n?/g,(i,s)=>(i.length>1&&e.push(s),`
`)));let r=[],n=0;do{let i=new wl,s=new Ro({src:t});n=i.parse(s,n),r.push(i)}while(n<t.length);return r.setOrigRanges=()=>{if(e.length===0)return!1;for(let s=1;s<e.length;++s)e[s]-=s;let i=0;for(let s=0;s<r.length;++s)i=r[s].setOrigRanges(e,i);return e.splice(0,e.length),!0},r.toString=()=>r.join(`...
`),r}Pv.parse=lD});var xo=$(bt=>{"use strict";var j=gs();function cD(t,e,r){return r?`#${r.replace(/[\s\S]^/gm,`$&${e}#`)}
${e}${t}`:t}function Ao(t,e,r){return r?r.indexOf(`
`)===-1?`${t} #${r}`:`${t}
`+r.replace(/^/gm,`${e||""}#`):t}var yn=class{};function ys(t,e,r){if(Array.isArray(t))return t.map((n,i)=>ys(n,String(i),r));if(t&&typeof t.toJSON=="function"){let n=r&&r.anchors&&r.anchors.get(t);n&&(r.onCreate=s=>{n.res=s,delete r.onCreate});let i=t.toJSON(e,r);return n&&r.onCreate&&r.onCreate(i),i}return(!r||!r.keep)&&typeof t=="bigint"?Number(t):t}var Sr=class extends yn{constructor(e){super();this.value=e}toJSON(e,r){return r&&r.keep?this.value:ys(this.value,e,r)}toString(){return String(this.value)}};function Sv(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let s=e[i];if(Number.isInteger(s)&&s>=0){let a=[];a[s]=n,n=a}else{let a={};Object.defineProperty(a,s,{value:n,writable:!0,enumerable:!0,configurable:!0}),n=a}}return t.createNode(n,!1)}var Cv=t=>t==null||typeof t=="object"&&t[Symbol.iterator]().next().done,Wt=class extends yn{constructor(e){super();j._defineProperty(this,"items",[]),this.schema=e}addIn(e,r){if(Cv(e))this.add(r);else{let[n,...i]=e,s=this.get(n,!0);if(s instanceof Wt)s.addIn(i,r);else if(s===void 0&&this.schema)this.set(n,Sv(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn([e,...r]){if(r.length===0)return this.delete(e);let n=this.get(e,!0);if(n instanceof Wt)return n.deleteIn(r);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${r}`)}getIn([e,...r],n){let i=this.get(e,!0);return r.length===0?!n&&i instanceof Sr?i.value:i:i instanceof Wt?i.getIn(r,n):void 0}hasAllNullValues(){return this.items.every(e=>{if(!e||e.type!=="PAIR")return!1;let r=e.value;return r==null||r instanceof Sr&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn([e,...r]){if(r.length===0)return this.has(e);let n=this.get(e,!0);return n instanceof Wt?n.hasIn(r):!1}setIn([e,...r],n){if(r.length===0)this.set(e,n);else{let i=this.get(e,!0);if(i instanceof Wt)i.setIn(r,n);else if(i===void 0&&this.schema)this.set(e,Sv(this.schema,r,n));else throw new Error(`Expected YAML collection at ${e}. Remaining path: ${r}`)}}toJSON(){return null}toString(e,{blockItem:r,flowChars:n,isMap:i,itemIndent:s},a,o){let{indent:l,indentStep:c,stringify:u}=e,f=this.type===j.Type.FLOW_MAP||this.type===j.Type.FLOW_SEQ||e.inFlow;f&&(s+=c);let m=i&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:m,indent:s,inFlow:f,type:null});let p=!1,d=!1,_=this.items.reduce((h,y,g)=>{let N;y&&(!p&&y.spaceBefore&&h.push({type:"comment",str:""}),y.commentBefore&&y.commentBefore.match(/^.*$/gm).forEach(V=>{h.push({type:"comment",str:`#${V}`})}),y.comment&&(N=y.comment),f&&(!p&&y.spaceBefore||y.commentBefore||y.comment||y.key&&(y.key.commentBefore||y.key.comment)||y.value&&(y.value.commentBefore||y.value.comment))&&(d=!0)),p=!1;let S=u(y,e,()=>N=null,()=>p=!0);return f&&!d&&S.includes(`
`)&&(d=!0),f&&g<this.items.length-1&&(S+=","),S=Ao(S,s,N),p&&(N||f)&&(p=!1),h.push({type:"item",str:S}),h},[]),P;if(_.length===0)P=n.start+n.end;else if(f){let{start:h,end:y}=n,g=_.map(N=>N.str);if(d||g.reduce((N,S)=>N+S.length+2,2)>Wt.maxFlowStringSingleLineLength){P=h;for(let N of g)P+=N?`
${c}${l}${N}`:`
`;P+=`
${l}${y}`}else P=`${h} ${g.join(" ")} ${y}`}else{let h=_.map(r);P=h.shift();for(let y of h)P+=y?`
${l}${y}`:`
`}return this.comment?(P+=`
`+this.comment.replace(/^/gm,`${l}#`),a&&a()):p&&o&&o(),P}};j._defineProperty(Wt,"maxFlowStringSingleLineLength",60);function Xu(t){let e=t instanceof Sr?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),Number.isInteger(e)&&e>=0?e:null}var ta=class extends Wt{add(e){this.items.push(e)}delete(e){let r=Xu(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=Xu(e);if(typeof n!="number")return;let i=this.items[n];return!r&&i instanceof Sr?i.value:i}has(e){let r=Xu(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=Xu(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let s of this.items)n.push(ys(s,String(i++),r));return n}toString(e,r,n){return e?super.toString(e,{blockItem:i=>i.type==="comment"?i.str:`- ${i.str}`,flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},r,n):JSON.stringify(this)}},uD=(t,e,r)=>e===null?"":typeof e!="object"?String(e):t instanceof yn&&r&&r.doc?t.toString({anchors:Object.create(null),doc:r.doc,indent:"",indentStep:r.indentStep,inFlow:!0,inStringifyKey:!0,stringify:r.stringify}):JSON.stringify(e),it=class extends yn{constructor(e,r=null){super();this.key=e,this.value=r,this.type=it.Type.PAIR}get commentBefore(){return this.key instanceof yn?this.key.commentBefore:void 0}set commentBefore(e){if(this.key==null&&(this.key=new Sr(null)),this.key instanceof yn)this.key.commentBefore=e;else{let r="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(r)}}addToJSMap(e,r){let n=ys(this.key,"",e);if(r instanceof Map){let i=ys(this.value,n,e);r.set(n,i)}else if(r instanceof Set)r.add(n);else{let i=uD(this.key,n,e),s=ys(this.value,i,e);i in r?Object.defineProperty(r,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):r[i]=s}return r}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return this.addToJSMap(r,n)}toString(e,r,n){if(!e||!e.doc)return JSON.stringify(this);let{indent:i,indentSeq:s,simpleKeys:a}=e.doc.options,{key:o,value:l}=this,c=o instanceof yn&&o.comment;if(a){if(c)throw new Error("With simple keys, key nodes cannot have comments");if(o instanceof Wt){let S="With simple keys, collection cannot be used as a key value";throw new Error(S)}}let u=!a&&(!o||c||(o instanceof yn?o instanceof Wt||o.type===j.Type.BLOCK_FOLDED||o.type===j.Type.BLOCK_LITERAL:typeof o=="object")),{doc:f,indent:m,indentStep:p,stringify:d}=e;e=Object.assign({},e,{implicitKey:!u,indent:m+p});let _=!1,P=d(o,e,()=>c=null,()=>_=!0);if(P=Ao(P,e.indent,c),!u&&P.length>1024){if(a)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");u=!0}if(e.allNullValues&&!a)return this.comment?(P=Ao(P,e.indent,this.comment),r&&r()):_&&!c&&n&&n(),e.inFlow&&!u?P:`? ${P}`;P=u?`? ${P}
${m}:`:`${P}:`,this.comment&&(P=Ao(P,e.indent,this.comment),r&&r());let h="",y=null;l instanceof yn?(l.spaceBefore&&(h=`
`),l.commentBefore&&(h+=`
${l.commentBefore.replace(/^/gm,`${e.indent}#`)}`),y=l.comment):l&&typeof l=="object"&&(l=f.schema.createNode(l,!0)),e.implicitKey=!1,!u&&!this.comment&&l instanceof Sr&&(e.indentAtStart=P.length+1),_=!1,!s&&i>=2&&!e.inFlow&&!u&&l instanceof ta&&l.type!==j.Type.FLOW_SEQ&&!l.tag&&!f.anchors.getName(l)&&(e.indent=e.indent.substr(2));let g=d(l,e,()=>y=null,()=>_=!0),N=" ";return h||this.comment?N=`${h}
${e.indent}`:!u&&l instanceof Wt?(!(g[0]==="["||g[0]==="{")||g.includes(`
`))&&(N=`
${e.indent}`):g[0]===`
`&&(N=""),_&&!y&&n&&n(),Ao(P+N+g,e.indent,y)}};j._defineProperty(it,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Qu=(t,e)=>{if(t instanceof bs){let r=e.get(t.source);return r.count*r.aliasCount}else if(t instanceof Wt){let r=0;for(let n of t.items){let i=Qu(n,e);i>r&&(r=i)}return r}else if(t instanceof it){let r=Qu(t.key,e),n=Qu(t.value,e);return Math.max(r,n)}return 1},bs=class extends yn{static stringify({range:e,source:r},{anchors:n,doc:i,implicitKey:s,inStringifyKey:a}){let o=Object.keys(n).find(c=>n[c]===r);if(!o&&a&&(o=i.anchors.getName(r)||i.anchors.newName()),o)return`*${o}${s?" ":""}`;let l=i.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${l} [${e}]`)}constructor(e){super();this.source=e,this.type=j.Type.ALIAS}set tag(e){throw new Error("Alias nodes cannot have tags")}toJSON(e,r){if(!r)return ys(this.source,e,r);let{anchors:n,maxAliasCount:i}=r,s=n.get(this.source);if(!s||s.res===void 0){let a="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new j.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}if(i>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=Qu(this.source,n)),s.count*s.aliasCount>i)){let a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new j.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}return s.res}toString(e){return bs.stringify(this,e)}};j._defineProperty(bs,"default",!0);function Ol(t,e){let r=e instanceof Sr?e.value:e;for(let n of t)if(n instanceof it&&(n.key===e||n.key===r||n.key&&n.key.value===r))return n}var Ju=class extends Wt{add(e,r){e?e instanceof it||(e=new it(e.key||e,e.value)):e=new it(e);let n=Ol(this.items,e.key),i=this.schema&&this.schema.sortMapEntries;if(n)if(r)n.value=e.value;else throw new Error(`Key ${e.key} already set`);else if(i){let s=this.items.findIndex(a=>i(e,a)<0);s===-1?this.items.push(e):this.items.splice(s,0,e)}else this.items.push(e)}delete(e){let r=Ol(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=Ol(this.items,e),i=n&&n.value;return!r&&i instanceof Sr?i.value:i}has(e){return!!Ol(this.items,e)}set(e,r){this.add(new it(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let s of this.items)s.addToJSMap(r,i);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!(i instanceof it))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return super.toString(e,{blockItem:i=>i.str,flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},r,n)}},Rv="<<",Tm=class extends it{constructor(e){if(e instanceof it){let r=e.value;r instanceof ta||(r=new ta,r.items.push(e.value),r.range=e.value.range);super(e.key,r);this.range=e.range}else super(new Sr(Rv),new ta);this.type=it.Type.MERGE_PAIR}addToJSMap(e,r){for(let{source:n}of this.value.items){if(!(n instanceof Ju))throw new Error("Merge sources must be maps");let i=n.toJSON(null,e,Map);for(let[s,a]of i)r instanceof Map?r.has(s)||r.set(s,a):r instanceof Set?r.add(s):Object.prototype.hasOwnProperty.call(r,s)||Object.defineProperty(r,s,{value:a,writable:!0,enumerable:!0,configurable:!0})}return r}toString(e,r){let n=this.value;if(n.items.length>1)return super.toString(e,r);this.value=n.items[0];let i=super.toString(e,r);return this.value=n,i}},fD={defaultType:j.Type.BLOCK_LITERAL,lineWidth:76},pD={trueStr:"true",falseStr:"false"},dD={asBigInt:!1},mD={nullStr:"null"},ra={defaultType:j.Type.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function Nm(t,e,r){for(let{format:n,test:i,resolve:s}of e)if(i){let a=t.match(i);if(a){let o=s.apply(null,a);return o instanceof Sr||(o=new Sr(o)),n&&(o.format=n),o}}return r&&(t=r(t)),new Sr(t)}var Av="flow",vm="block",Zu="quoted",xv=(t,e)=>{let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e};function ef(t,e,r,{indentAtStart:n,lineWidth:i=80,minContentWidth:s=20,onFold:a,onOverflow:o}){if(!i||i<0)return t;let l=Math.max(1+s,1+i-e.length);if(t.length<=l)return t;let c=[],u={},f=i-e.length;typeof n=="number"&&(n>i-Math.max(2,s)?c.push(0):f=i-n);let m,p,d=!1,_=-1,P=-1,h=-1;r===vm&&(_=xv(t,_),_!==-1&&(f=_+l));for(let g;g=t[_+=1];){if(r===Zu&&g==="\\"){switch(P=_,t[_+1]){case"x":_+=3;break;case"u":_+=5;break;case"U":_+=9;break;default:_+=1}h=_}if(g===`
`)r===vm&&(_=xv(t,_)),f=_+l,m=void 0;else{if(g===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let N=t[_+1];N&&N!==" "&&N!==`
`&&N!=="	"&&(m=_)}if(_>=f)if(m)c.push(m),f=m+l,m=void 0;else if(r===Zu){for(;p===" "||p==="	";)p=g,g=t[_+=1],d=!0;let N=_>h+1?_-2:P-1;if(u[N])return t;c.push(N),u[N]=!0,f=N+l,m=void 0}else d=!0}p=g}if(d&&o&&o(),c.length===0)return t;a&&a();let y=t.slice(0,c[0]);for(let g=0;g<c.length;++g){let N=c[g],S=c[g+1]||t.length;N===0?y=`
${e}${t.slice(0,S)}`:(r===Zu&&u[N]&&(y+=`${t[N]}\\`),y+=`
${e}${t.slice(N+1,S)}`)}return y}var Pm=({indentAtStart:t})=>t?Object.assign({indentAtStart:t},ra.fold):ra.fold,tf=t=>/^(%|---|\.\.\.)/m.test(t);function hD(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let s=0,a=0;s<i;++s)if(t[s]===`
`){if(s-a>n)return!0;if(a=s+1,i-a<=n)return!1}return!0}function na(t,e){let{implicitKey:r}=e,{jsonEncoding:n,minMultiLineLength:i}=ra.doubleQuoted,s=JSON.stringify(t);if(n)return s;let a=e.indent||(tf(t)?"  ":""),o="",l=0;for(let c=0,u=s[c];u;u=s[++c])if(u===" "&&s[c+1]==="\\"&&s[c+2]==="n"&&(o+=s.slice(l,c)+"\\ ",c+=1,l=c,u="\\"),u==="\\")switch(s[c+1]){case"u":{o+=s.slice(l,c);let f=s.substr(c+2,4);switch(f){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:f.substr(0,2)==="00"?o+="\\x"+f.substr(2):o+=s.substr(c,6)}c+=5,l=c+1}break;case"n":if(r||s[c+2]==='"'||s.length<i)c+=1;else{for(o+=s.slice(l,c)+`

`;s[c+2]==="\\"&&s[c+3]==="n"&&s[c+4]!=='"';)o+=`
`,c+=2;o+=a,s[c+2]===" "&&(o+="\\"),c+=1,l=c+1}break;default:c+=1}return o=l?o+s.slice(l):s,r?o:ef(o,a,Zu,Pm(e))}function Ev(t,e){if(e.implicitKey){if(/\n/.test(t))return na(t,e)}else if(/[ \t]\n|\n[ \t]/.test(t))return na(t,e);let r=e.indent||(tf(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:ef(n,r,Av,Pm(e))}function rf({comment:t,type:e,value:r},n,i,s){if(/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return na(r,n);let a=n.indent||(n.forceBlockIndent||tf(r)?"  ":""),o=a?"2":"1",l=e===j.Type.BLOCK_FOLDED?!1:e===j.Type.BLOCK_LITERAL?!0:!hD(r,ra.fold.lineWidth,a.length),c=l?"|":">";if(!r)return c+`
`;let u="",f="";if(r=r.replace(/[\n\t ]*$/,p=>{let d=p.indexOf(`
`);return d===-1?c+="-":(r===p||d!==p.length-1)&&(c+="+",s&&s()),f=p.replace(/\n$/,""),""}).replace(/^[\n ]*/,p=>{p.indexOf(" ")!==-1&&(c+=o);let d=p.match(/ +$/);return d?(u=p.slice(0,-d[0].length),d[0]):(u=p,"")}),f&&(f=f.replace(/\n+(?!\n|$)/g,`$&${a}`)),u&&(u=u.replace(/\n+/g,`$&${a}`)),t&&(c+=" #"+t.replace(/ ?[\r\n]+/g," "),i&&i()),!r)return`${c}${o}
${a}${f}`;if(l)return r=r.replace(/\n+/g,`$&${a}`),`${c}
${a}${u}${r}${f}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);let m=ef(`${u}${r}${f}`,a,vm,ra.fold);return`${c}
${a}${m}`}function gD(t,e,r,n){let{comment:i,type:s,value:a}=t,{actualString:o,implicitKey:l,indent:c,inFlow:u}=e;if(l&&/[\n[\]{},]/.test(a)||u&&/[[\]{},]/.test(a))return na(a,e);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return l||u||a.indexOf(`
`)===-1?a.indexOf('"')!==-1&&a.indexOf("'")===-1?Ev(a,e):na(a,e):rf(t,e,r,n);if(!l&&!u&&s!==j.Type.PLAIN&&a.indexOf(`
`)!==-1)return rf(t,e,r,n);if(c===""&&tf(a))return e.forceBlockIndent=!0,rf(t,e,r,n);let f=a.replace(/\n+/g,`$&
${c}`);if(o){let{tags:p}=e.doc.schema;if(typeof Nm(f,p,p.scalarFallback).value!="string")return na(a,e)}let m=l?f:ef(f,c,Av,Pm(e));return i&&!u&&(m.indexOf(`
`)!==-1||i.indexOf(`
`)!==-1)?(r&&r(),cD(m,c,i)):m}function _D(t,e,r,n){let{defaultType:i}=ra,{implicitKey:s,inFlow:a}=e,{type:o,value:l}=t;typeof l!="string"&&(l=String(l),t=Object.assign({},t,{value:l}));let c=f=>{switch(f){case j.Type.BLOCK_FOLDED:case j.Type.BLOCK_LITERAL:return rf(t,e,r,n);case j.Type.QUOTE_DOUBLE:return na(l,e);case j.Type.QUOTE_SINGLE:return Ev(l,e);case j.Type.PLAIN:return gD(t,e,r,n);default:return null}};(o!==j.Type.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(l)||(s||a)&&(o===j.Type.BLOCK_FOLDED||o===j.Type.BLOCK_LITERAL))&&(o=j.Type.QUOTE_DOUBLE);let u=c(o);if(u===null&&(u=c(i),u===null))throw new Error(`Unsupported default string type ${i}`);return u}function yD({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);if(!isFinite(n))return isNaN(n)?".nan":n<0?"-.inf":".inf";let i=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let s=i.indexOf(".");s<0&&(s=i.length,i+=".");let a=e-(i.length-s-1);for(;a-- >0;)i+="0"}return i}function wv(t,e){let r,n;switch(e.type){case j.Type.FLOW_MAP:r="}",n="flow map";break;case j.Type.FLOW_SEQ:r="]",n="flow sequence";break;default:t.push(new j.YAMLSemanticError(e,"Not a flow collection!?"));return}let i;for(let s=e.items.length-1;s>=0;--s){let a=e.items[s];if(!a||a.type!==j.Type.COMMENT){i=a;break}}if(i&&i.char!==r){let s=`Expected ${n} to end with ${r}`,a;typeof i.offset=="number"?(a=new j.YAMLSemanticError(e,s),a.offset=i.offset+1):(a=new j.YAMLSemanticError(i,s),i.range&&i.range.end&&(a.offset=i.range.end-i.range.start)),t.push(a)}}function Ov(t,e){let r=e.context.src[e.range.start-1];if(r!==`
`&&r!=="	"&&r!==" "){let n="Comments must be separated from other tokens by white space characters";t.push(new j.YAMLSemanticError(e,n))}}function Dv(t,e){let r=String(e),n=r.substr(0,8)+"..."+r.substr(-8);return new j.YAMLSemanticError(t,`The "${n}" key is too long`)}function Lv(t,e){for(let{afterKey:r,before:n,comment:i}of e){let s=t.items[n];s?(r&&s.value&&(s=s.value),i===void 0?(r||!s.commentBefore)&&(s.spaceBefore=!0):s.commentBefore?s.commentBefore+=`
`+i:s.commentBefore=i):i!==void 0&&(t.comment?t.comment+=`
`+i:t.comment=i)}}function Im(t,e){let r=e.strValue;return r?typeof r=="string"?r:(r.errors.forEach(n=>{n.source||(n.source=e),t.errors.push(n)}),r.str):""}function bD(t,e){let{handle:r,suffix:n}=e.tag,i=t.tagPrefixes.find(s=>s.handle===r);if(!i){let s=t.getDefaults().tagPrefixes;if(s&&(i=s.find(a=>a.handle===r)),!i)throw new j.YAMLSemanticError(e,`The ${r} tag handle is non-default and was not declared.`)}if(!n)throw new j.YAMLSemanticError(e,`The ${r} tag has no suffix.`);if(r==="!"&&(t.version||t.options.version)==="1.0"){if(n[0]==="^")return t.warnings.push(new j.YAMLWarning(e,"YAML 1.0 ^ tag expansion is not supported")),n;if(/[:/]/.test(n)){let s=n.match(/^([a-z0-9-]+)\/(.*)/i);return s?`tag:${s[1]}.yaml.org,2002:${s[2]}`:`tag:${n}`}}return i.prefix+decodeURIComponent(n)}function TD(t,e){let{tag:r,type:n}=e,i=!1;if(r){let{handle:s,suffix:a,verbatim:o}=r;if(o){if(o!=="!"&&o!=="!!")return o;let l=`Verbatim tags aren't resolved, so ${o} is invalid.`;t.errors.push(new j.YAMLSemanticError(e,l))}else if(s==="!"&&!a)i=!0;else try{return bD(t,e)}catch(l){t.errors.push(l)}}switch(n){case j.Type.BLOCK_FOLDED:case j.Type.BLOCK_LITERAL:case j.Type.QUOTE_DOUBLE:case j.Type.QUOTE_SINGLE:return j.defaultTags.STR;case j.Type.FLOW_MAP:case j.Type.MAP:return j.defaultTags.MAP;case j.Type.FLOW_SEQ:case j.Type.SEQ:return j.defaultTags.SEQ;case j.Type.PLAIN:return i?j.defaultTags.STR:null;default:return null}}function kv(t,e,r){let{tags:n}=t.schema,i=[];for(let a of n)if(a.tag===r)if(a.test)i.push(a);else{let o=a.resolve(t,e);return o instanceof Wt?o:new Sr(o)}let s=Im(t,e);return typeof s=="string"&&i.length>0?Nm(s,i,n.scalarFallback):null}function ND({type:t}){switch(t){case j.Type.FLOW_MAP:case j.Type.MAP:return j.defaultTags.MAP;case j.Type.FLOW_SEQ:case j.Type.SEQ:return j.defaultTags.SEQ;default:return j.defaultTags.STR}}function vD(t,e,r){try{let n=kv(t,e,r);if(n)return r&&e.tag&&(n.tag=r),n}catch(n){return n.source||(n.source=e),t.errors.push(n),null}try{let n=ND(e);if(!n)throw new Error(`The tag ${r} is unavailable`);let i=`The tag ${r} is unavailable, falling back to ${n}`;t.warnings.push(new j.YAMLWarning(e,i));let s=kv(t,e,n);return s.tag=r,s}catch(n){let i=new j.YAMLReferenceError(e,n.message);return i.stack=n.stack,t.errors.push(i),null}}var PD=t=>{if(!t)return!1;let{type:e}=t;return e===j.Type.MAP_KEY||e===j.Type.MAP_VALUE||e===j.Type.SEQ_ITEM};function ID(t,e){let r={before:[],after:[]},n=!1,i=!1,s=PD(e.context.parent)?e.context.parent.props.concat(e.props):e.props;for(let{start:a,end:o}of s)switch(e.context.src[a]){case j.Char.COMMENT:{if(!e.commentHasRequiredWhitespace(a)){let f="Comments must be separated from other tokens by white space characters";t.push(new j.YAMLSemanticError(e,f))}let{header:l,valueRange:c}=e;(c&&(a>c.start||l&&a>l.start)?r.after:r.before).push(e.context.src.slice(a+1,o));break}case j.Char.ANCHOR:if(n){let l="A node can have at most one anchor";t.push(new j.YAMLSemanticError(e,l))}n=!0;break;case j.Char.TAG:if(i){let l="A node can have at most one tag";t.push(new j.YAMLSemanticError(e,l))}i=!0;break}return{comments:r,hasAnchor:n,hasTag:i}}function SD(t,e){let{anchors:r,errors:n,schema:i}=t;if(e.type===j.Type.ALIAS){let a=e.rawValue,o=r.getNode(a);if(!o){let c=`Aliased anchor not found: ${a}`;return n.push(new j.YAMLReferenceError(e,c)),null}let l=new bs(o);return r._cstAliases.push(l),l}let s=TD(t,e);if(s)return vD(t,e,s);if(e.type!==j.Type.PLAIN){let a=`Failed to resolve ${e.type} node here`;return n.push(new j.YAMLSyntaxError(e,a)),null}try{let a=Im(t,e);return Nm(a,i.tags,i.tags.scalarFallback)}catch(a){return a.source||(a.source=e),n.push(a),null}}function Ts(t,e){if(!e)return null;e.error&&t.errors.push(e.error);let{comments:r,hasAnchor:n,hasTag:i}=ID(t.errors,e);if(n){let{anchors:a}=t,o=e.anchor,l=a.getNode(o);l&&(a.map[a.newName(o)]=l),a.map[o]=e}if(e.type===j.Type.ALIAS&&(n||i)){let a="An alias node must not specify any properties";t.errors.push(new j.YAMLSemanticError(e,a))}let s=SD(t,e);if(s){s.range=[e.range.start,e.range.end],t.options.keepCstNodes&&(s.cstNode=e),t.options.keepNodeTypes&&(s.type=e.type);let a=r.before.join(`
`);a&&(s.commentBefore=s.commentBefore?`${s.commentBefore}
${a}`:a);let o=r.after.join(`
`);o&&(s.comment=s.comment?`${s.comment}
${o}`:o)}return e.resolved=s}function CD(t,e){if(e.type!==j.Type.MAP&&e.type!==j.Type.FLOW_MAP){let a=`A ${e.type} node cannot be resolved as a mapping`;return t.errors.push(new j.YAMLSyntaxError(e,a)),null}let{comments:r,items:n}=e.type===j.Type.FLOW_MAP?ED(t,e):xD(t,e),i=new Ju;i.items=n,Lv(i,r);let s=!1;for(let a=0;a<n.length;++a){let{key:o}=n[a];if(o instanceof Wt&&(s=!0),t.schema.merge&&o&&o.value===Rv){n[a]=new Tm(n[a]);let l=n[a].value.items,c=null;l.some(u=>{if(u instanceof bs){let{type:f}=u.source;return f===j.Type.MAP||f===j.Type.FLOW_MAP?!1:c="Merge nodes aliases can only point to maps"}return c="Merge nodes can only have Alias nodes as values"}),c&&t.errors.push(new j.YAMLSemanticError(e,c))}else for(let l=a+1;l<n.length;++l){let{key:c}=n[l];if(o===c||o&&c&&Object.prototype.hasOwnProperty.call(o,"value")&&o.value===c.value){let u=`Map keys must be unique; "${o}" is repeated`;t.errors.push(new j.YAMLSemanticError(e,u));break}}}if(s&&!t.options.mapAsMap){let a="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new j.YAMLWarning(e,a))}return e.resolved=i,i}var RD=({context:{lineStart:t,node:e,src:r},props:n})=>{if(n.length===0)return!1;let{start:i}=n[0];if(e&&i>e.valueRange.start||r[i]!==j.Char.COMMENT)return!1;for(let s=t;s<i;++s)if(r[s]===`
`)return!1;return!0};function AD(t,e){if(!RD(t))return;let r=t.getPropValue(0,j.Char.COMMENT,!0),n=!1,i=e.value.commentBefore;if(i&&i.startsWith(r))e.value.commentBefore=i.substr(r.length+1),n=!0;else{let s=e.value.comment;!t.node&&s&&s.startsWith(r)&&(e.value.comment=s.substr(r.length+1),n=!0)}n&&(e.comment=r)}function xD(t,e){let r=[],n=[],i,s=null;for(let a=0;a<e.items.length;++a){let o=e.items[a];switch(o.type){case j.Type.BLANK_LINE:r.push({afterKey:!!i,before:n.length});break;case j.Type.COMMENT:r.push({afterKey:!!i,before:n.length,comment:o.comment});break;case j.Type.MAP_KEY:i!==void 0&&n.push(new it(i)),o.error&&t.errors.push(o.error),i=Ts(t,o.node),s=null;break;case j.Type.MAP_VALUE:{if(i===void 0&&(i=null),o.error&&t.errors.push(o.error),!o.context.atLineStart&&o.node&&o.node.type===j.Type.MAP&&!o.node.context.atLineStart){let u="Nested mappings are not allowed in compact mappings";t.errors.push(new j.YAMLSemanticError(o.node,u))}let l=o.node;if(!l&&o.props.length>0){l=new j.PlainValue(j.Type.PLAIN,[]),l.context={parent:o,src:o.context.src};let u=o.range.start+1;if(l.range={start:u,end:u},l.valueRange={start:u,end:u},typeof o.range.origStart=="number"){let f=o.range.origStart+1;l.range.origStart=l.range.origEnd=f,l.valueRange.origStart=l.valueRange.origEnd=f}}let c=new it(i,Ts(t,l));AD(o,c),n.push(c),i&&typeof s=="number"&&o.range.start>s+1024&&t.errors.push(Dv(e,i)),i=void 0,s=null}break;default:i!==void 0&&n.push(new it(i)),i=Ts(t,o),s=o.range.start,o.error&&t.errors.push(o.error);e:for(let l=a+1;;++l){let c=e.items[l];switch(c&&c.type){case j.Type.BLANK_LINE:case j.Type.COMMENT:continue e;case j.Type.MAP_VALUE:break e;default:{let u="Implicit map keys need to be followed by map values";t.errors.push(new j.YAMLSemanticError(o,u));break e}}}if(o.valueRangeContainsNewline){let l="Implicit map keys need to be on a single line";t.errors.push(new j.YAMLSemanticError(o,l))}}}return i!==void 0&&n.push(new it(i)),{comments:r,items:n}}function ED(t,e){let r=[],n=[],i,s=!1,a="{";for(let o=0;o<e.items.length;++o){let l=e.items[o];if(typeof l.char=="string"){let{char:c,offset:u}=l;if(c==="?"&&i===void 0&&!s){s=!0,a=":";continue}if(c===":"){if(i===void 0&&(i=null),a===":"){a=",";continue}}else if(s&&(i===void 0&&c!==","&&(i=null),s=!1),i!==void 0&&(n.push(new it(i)),i=void 0,c===",")){a=":";continue}if(c==="}"){if(o===e.items.length-1)continue}else if(c===a){a=":";continue}let f=`Flow map contains an unexpected ${c}`,m=new j.YAMLSyntaxError(e,f);m.offset=u,t.errors.push(m)}else l.type===j.Type.BLANK_LINE?r.push({afterKey:!!i,before:n.length}):l.type===j.Type.COMMENT?(Ov(t.errors,l),r.push({afterKey:!!i,before:n.length,comment:l.comment})):i===void 0?(a===","&&t.errors.push(new j.YAMLSemanticError(l,"Separator , missing in flow map")),i=Ts(t,l)):(a!==","&&t.errors.push(new j.YAMLSemanticError(l,"Indicator : missing in flow map entry")),n.push(new it(i,Ts(t,l))),i=void 0,s=!1)}return wv(t.errors,e),i!==void 0&&n.push(new it(i)),{comments:r,items:n}}function wD(t,e){if(e.type!==j.Type.SEQ&&e.type!==j.Type.FLOW_SEQ){let s=`A ${e.type} node cannot be resolved as a sequence`;return t.errors.push(new j.YAMLSyntaxError(e,s)),null}let{comments:r,items:n}=e.type===j.Type.FLOW_SEQ?DD(t,e):OD(t,e),i=new ta;if(i.items=n,Lv(i,r),!t.options.mapAsMap&&n.some(s=>s instanceof it&&s.key instanceof Wt)){let s="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";t.warnings.push(new j.YAMLWarning(e,s))}return e.resolved=i,i}function OD(t,e){let r=[],n=[];for(let i=0;i<e.items.length;++i){let s=e.items[i];switch(s.type){case j.Type.BLANK_LINE:r.push({before:n.length});break;case j.Type.COMMENT:r.push({comment:s.comment,before:n.length});break;case j.Type.SEQ_ITEM:if(s.error&&t.errors.push(s.error),n.push(Ts(t,s.node)),s.hasProps){let a="Sequence items cannot have tags or anchors before the - indicator";t.errors.push(new j.YAMLSemanticError(s,a))}break;default:s.error&&t.errors.push(s.error),t.errors.push(new j.YAMLSyntaxError(s,`Unexpected ${s.type} node in sequence`))}}return{comments:r,items:n}}function DD(t,e){let r=[],n=[],i=!1,s,a=null,o="[",l=null;for(let c=0;c<e.items.length;++c){let u=e.items[c];if(typeof u.char=="string"){let{char:f,offset:m}=u;if(f!==":"&&(i||s!==void 0)&&(i&&s===void 0&&(s=o?n.pop():null),n.push(new it(s)),i=!1,s=void 0,a=null),f===o)o=null;else if(!o&&f==="?")i=!0;else if(o!=="["&&f===":"&&s===void 0){if(o===","){if(s=n.pop(),s instanceof it){let p="Chaining flow sequence pairs is invalid",d=new j.YAMLSemanticError(e,p);d.offset=m,t.errors.push(d)}if(!i&&typeof a=="number"){let p=u.range?u.range.start:u.offset;p>a+1024&&t.errors.push(Dv(e,s));let{src:d}=l.context;for(let _=a;_<p;++_)if(d[_]===`
`){let P="Implicit keys of flow sequence pairs need to be on a single line";t.errors.push(new j.YAMLSemanticError(l,P));break}}}else s=null;a=null,i=!1,o=null}else if(o==="["||f!=="]"||c<e.items.length-1){let p=`Flow sequence contains an unexpected ${f}`,d=new j.YAMLSyntaxError(e,p);d.offset=m,t.errors.push(d)}}else if(u.type===j.Type.BLANK_LINE)r.push({before:n.length});else if(u.type===j.Type.COMMENT)Ov(t.errors,u),r.push({comment:u.comment,before:n.length});else{if(o){let m=`Expected a ${o} in flow sequence`;t.errors.push(new j.YAMLSemanticError(u,m))}let f=Ts(t,u);s===void 0?(n.push(f),l=u):(n.push(new it(s,f)),s=void 0),a=u.range.start,o=","}}return wv(t.errors,e),s!==void 0&&n.push(new it(s)),{comments:r,items:n}}bt.Alias=bs;bt.Collection=Wt;bt.Merge=Tm;bt.Node=yn;bt.Pair=it;bt.Scalar=Sr;bt.YAMLMap=Ju;bt.YAMLSeq=ta;bt.addComment=Ao;bt.binaryOptions=fD;bt.boolOptions=pD;bt.findPair=Ol;bt.intOptions=dD;bt.isEmptyPath=Cv;bt.nullOptions=mD;bt.resolveMap=CD;bt.resolveNode=Ts;bt.resolveSeq=wD;bt.resolveString=Im;bt.strOptions=ra;bt.stringifyNumber=yD;bt.stringifyString=_D;bt.toJSON=ys});var nf=$(Jn=>{"use strict";var Qr=gs(),Ge=xo(),LD={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve:(t,e)=>{let r=Ge.resolveString(t,e);if(typeof Buffer=="function")return Buffer.from(r,"base64");if(typeof atob=="function"){let n=atob(r.replace(/[\n\r]/g,"")),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}else{let n="This environment does not support reading binary tags; either Buffer or atob is required";return t.errors.push(new Qr.YAMLReferenceError(e,n)),null}},options:Ge.binaryOptions,stringify:({comment:t,type:e,value:r},n,i,s)=>{let a;if(typeof Buffer=="function")a=r instanceof Buffer?r.toString("base64"):Buffer.from(r.buffer).toString("base64");else if(typeof btoa=="function"){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);a=btoa(o)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=Ge.binaryOptions.defaultType),e===Qr.Type.QUOTE_DOUBLE)r=a;else{let{lineWidth:o}=Ge.binaryOptions,l=Math.ceil(a.length/o),c=new Array(l);for(let u=0,f=0;u<l;++u,f+=o)c[u]=a.substr(f,o);r=c.join(e===Qr.Type.BLOCK_LITERAL?`
`:" ")}return Ge.stringifyString({comment:t,type:e,value:r},n,i,s)}};function Mv(t,e){let r=Ge.resolveSeq(t,e);for(let n=0;n<r.items.length;++n){let i=r.items[n];if(!(i instanceof Ge.Pair)){if(i instanceof Ge.YAMLMap){if(i.items.length>1){let a="Each pair must have its own sequence indicator";throw new Qr.YAMLSemanticError(e,a)}let s=i.items[0]||new Ge.Pair;i.commentBefore&&(s.commentBefore=s.commentBefore?`${i.commentBefore}
${s.commentBefore}`:i.commentBefore),i.comment&&(s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment),i=s}r.items[n]=i instanceof Ge.Pair?i:new Ge.Pair(i)}}return r}function Fv(t,e,r){let n=new Ge.YAMLSeq(t);n.tag="tag:yaml.org,2002:pairs";for(let i of e){let s,a;if(Array.isArray(i))if(i.length===2)s=i[0],a=i[1];else throw new TypeError(`Expected [key, value] tuple: ${i}`);else if(i&&i instanceof Object){let l=Object.keys(i);if(l.length===1)s=l[0],a=i[s];else throw new TypeError(`Expected { key: value } tuple: ${i}`)}else s=i;let o=t.createPair(s,a,r);n.items.push(o)}return n}var kD={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Mv,createNode:Fv},ia=class extends Ge.YAMLSeq{constructor(){super();Qr._defineProperty(this,"add",Ge.YAMLMap.prototype.add.bind(this)),Qr._defineProperty(this,"delete",Ge.YAMLMap.prototype.delete.bind(this)),Qr._defineProperty(this,"get",Ge.YAMLMap.prototype.get.bind(this)),Qr._defineProperty(this,"has",Ge.YAMLMap.prototype.has.bind(this)),Qr._defineProperty(this,"set",Ge.YAMLMap.prototype.set.bind(this)),this.tag=ia.tag}toJSON(e,r){let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let s,a;if(i instanceof Ge.Pair?(s=Ge.toJSON(i.key,"",r),a=Ge.toJSON(i.value,s,r)):s=Ge.toJSON(i,"",r),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,a)}return n}};Qr._defineProperty(ia,"tag","tag:yaml.org,2002:omap");function MD(t,e){let r=Mv(t,e),n=[];for(let{key:i}of r.items)if(i instanceof Ge.Scalar)if(n.includes(i.value)){let s="Ordered maps must not include duplicate keys";throw new Qr.YAMLSemanticError(e,s)}else n.push(i.value);return Object.assign(new ia,r)}function FD(t,e,r){let n=Fv(t,e,r),i=new ia;return i.items=n.items,i}var VD={identify:t=>t instanceof Map,nodeClass:ia,default:!1,tag:"tag:yaml.org,2002:omap",resolve:MD,createNode:FD},sa=class extends Ge.YAMLMap{constructor(){super();this.tag=sa.tag}add(e){let r=e instanceof Ge.Pair?e:new Ge.Pair(e);Ge.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=Ge.findPair(this.items,e);return!r&&n instanceof Ge.Pair?n.key instanceof Ge.Scalar?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=Ge.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new Ge.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return super.toString(e,r,n);throw new Error("Set items must all have null values")}};Qr._defineProperty(sa,"tag","tag:yaml.org,2002:set");function qD(t,e){let r=Ge.resolveMap(t,e);if(!r.hasAllNullValues())throw new Qr.YAMLSemanticError(e,"Set items must all have null values");return Object.assign(new sa,r)}function BD(t,e,r){let n=new sa;for(let i of e)n.items.push(t.createPair(i,null,r));return n}var jD={identify:t=>t instanceof Set,nodeClass:sa,default:!1,tag:"tag:yaml.org,2002:set",resolve:qD,createNode:BD},Sm=(t,e)=>{let r=e.split(":").reduce((n,i)=>n*60+Number(i),0);return t==="-"?-r:r},Vv=({value:t})=>{if(isNaN(t)||!isFinite(t))return Ge.stringifyNumber(t);let e="";t<0&&(e="-",t=Math.abs(t));let r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),e+r.map(n=>n<10?"0"+String(n):String(n)).join(":").replace(/000000\d*$/,"")},UD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:(t,e,r)=>Sm(e,r.replace(/_/g,"")),stringify:Vv},GD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:(t,e,r)=>Sm(e,r.replace(/_/g,"")),stringify:Vv},WD={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:(t,e,r,n,i,s,a,o,l)=>{o&&(o=(o+"00").substr(1,3));let c=Date.UTC(e,r-1,n,i||0,s||0,a||0,o||0);if(l&&l!=="Z"){let u=Sm(l[0],l.slice(1));Math.abs(u)<30&&(u*=60),c-=6e4*u}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};function Cm(t){let e=typeof process!="undefined"&&process.env||{};return t?typeof YAML_SILENCE_DEPRECATION_WARNINGS!="undefined"?!YAML_SILENCE_DEPRECATION_WARNINGS:!e.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS!="undefined"?!YAML_SILENCE_WARNINGS:!e.YAML_SILENCE_WARNINGS}function Rm(t,e){if(Cm(!1)){let r=typeof process!="undefined"&&process.emitWarning;r?r(t,e):console.warn(e?`${e}: ${t}`:t)}}function HD(t){if(Cm(!0)){let e=t.replace(/.*yaml[/\\]/i,"").replace(/\.js$/,"").replace(/\\/g,"/");Rm(`The endpoint 'yaml/${e}' will be removed in a future release.`,"DeprecationWarning")}}var qv={};function YD(t,e){if(!qv[t]&&Cm(!0)){qv[t]=!0;let r=`The option '${t}' will be removed in a future release`;r+=e?`, use '${e}' instead.`:".",Rm(r,"DeprecationWarning")}}Jn.binary=LD;Jn.floatTime=GD;Jn.intTime=UD;Jn.omap=VD;Jn.pairs=kD;Jn.set=jD;Jn.timestamp=WD;Jn.warn=Rm;Jn.warnFileDeprecation=HD;Jn.warnOptionDeprecation=YD});var uf=$(Jv=>{"use strict";var sf=gs(),Te=xo(),Cr=nf();function KD(t,e,r){let n=new Te.YAMLMap(t);if(e instanceof Map)for(let[i,s]of e)n.items.push(t.createPair(i,s,r));else if(e&&typeof e=="object")for(let i of Object.keys(e))n.items.push(t.createPair(i,e[i],r));return typeof t.sortMapEntries=="function"&&n.items.sort(t.sortMapEntries),n}var Dl={createNode:KD,default:!0,nodeClass:Te.YAMLMap,tag:"tag:yaml.org,2002:map",resolve:Te.resolveMap};function $D(t,e,r){let n=new Te.YAMLSeq(t);if(e&&e[Symbol.iterator])for(let i of e){let s=t.createNode(i,r.wrapScalars,null,r);n.items.push(s)}return n}var af={createNode:$D,default:!0,nodeClass:Te.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:Te.resolveSeq},zD={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:Te.resolveString,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),Te.stringifyString(t,e,r,n)},options:Te.strOptions},Am=[Dl,af,zD],of=t=>typeof t=="bigint"||Number.isInteger(t),xm=(t,e,r)=>Te.intOptions.asBigInt?BigInt(t):parseInt(e,r);function Bv(t,e,r){let{value:n}=t;return of(n)&&n>=0?r+n.toString(e):Te.stringifyNumber(t)}var jv={identify:t=>t==null,createNode:(t,e,r)=>r.wrapScalars?new Te.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:Te.nullOptions,stringify:()=>Te.nullOptions.nullStr},Uv={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>t[0]==="t"||t[0]==="T",options:Te.boolOptions,stringify:({value:t})=>t?Te.boolOptions.trueStr:Te.boolOptions.falseStr},Gv={identify:t=>of(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:(t,e)=>xm(t,e,8),options:Te.intOptions,stringify:t=>Bv(t,8,"0o")},Wv={identify:of,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:t=>xm(t,t,10),options:Te.intOptions,stringify:Te.stringifyNumber},Hv={identify:t=>of(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:(t,e)=>xm(t,e,16),options:Te.intOptions,stringify:t=>Bv(t,16,"0x")},Yv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Te.stringifyNumber},Kv={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},$v={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve(t,e,r){let n=e||r,i=new Te.Scalar(parseFloat(t));return n&&n[n.length-1]==="0"&&(i.minFractionDigits=n.length),i},stringify:Te.stringifyNumber},XD=Am.concat([jv,Uv,Gv,Wv,Hv,Yv,Kv,$v]),zv=t=>typeof t=="bigint"||Number.isInteger(t),lf=({value:t})=>JSON.stringify(t),Xv=[Dl,af,{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:Te.resolveString,stringify:lf},{identify:t=>t==null,createNode:(t,e,r)=>r.wrapScalars?new Te.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:lf},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:lf},{identify:zv,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:t=>Te.intOptions.asBigInt?BigInt(t):parseInt(t,10),stringify:({value:t})=>zv(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:lf}];Xv.scalarFallback=t=>{throw new SyntaxError(`Unresolved plain scalar ${JSON.stringify(t)}`)};var Qv=({value:t})=>t?Te.boolOptions.trueStr:Te.boolOptions.falseStr,Ll=t=>typeof t=="bigint"||Number.isInteger(t);function cf(t,e,r){let n=e.replace(/_/g,"");if(Te.intOptions.asBigInt){switch(r){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}let s=BigInt(n);return t==="-"?BigInt(-1)*s:s}let i=parseInt(n,r);return t==="-"?-1*i:i}function Em(t,e,r){let{value:n}=t;if(Ll(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return Te.stringifyNumber(t)}var QD=Am.concat([{identify:t=>t==null,createNode:(t,e,r)=>r.wrapScalars?new Te.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:Te.nullOptions,stringify:()=>Te.nullOptions.nullStr},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>!0,options:Te.boolOptions,stringify:Qv},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>!1,options:Te.boolOptions,stringify:Qv},{identify:Ll,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:(t,e,r)=>cf(e,r,2),stringify:t=>Em(t,2,"0b")},{identify:Ll,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:(t,e,r)=>cf(e,r,8),stringify:t=>Em(t,8,"0")},{identify:Ll,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:(t,e,r)=>cf(e,r,10),stringify:Te.stringifyNumber},{identify:Ll,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:(t,e,r)=>cf(e,r,16),stringify:t=>Em(t,16,"0x")},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(t,e)=>e?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Te.stringifyNumber},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve(t,e){let r=new Te.Scalar(parseFloat(t.replace(/_/g,"")));if(e){let n=e.replace(/_/g,"");n[n.length-1]==="0"&&(r.minFractionDigits=n.length)}return r},stringify:Te.stringifyNumber}],Cr.binary,Cr.omap,Cr.pairs,Cr.set,Cr.intTime,Cr.floatTime,Cr.timestamp),JD={core:XD,failsafe:Am,json:Xv,yaml11:QD},ZD={binary:Cr.binary,bool:Uv,float:$v,floatExp:Kv,floatNaN:Yv,floatTime:Cr.floatTime,int:Wv,intHex:Hv,intOct:Gv,intTime:Cr.intTime,map:Dl,null:jv,omap:Cr.omap,pairs:Cr.pairs,seq:af,set:Cr.set,timestamp:Cr.timestamp};function eL(t,e,r){if(e){let n=r.filter(s=>s.tag===e),i=n.find(s=>!s.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>(n.identify&&n.identify(t)||n.class&&t instanceof n.class)&&!n.format)}function tL(t,e,r){if(t instanceof Te.Node)return t;let{defaultPrefix:n,onTagObj:i,prevObjects:s,schema:a,wrapScalars:o}=r;e&&e.startsWith("!!")&&(e=n+e.slice(2));let l=eL(t,e,a.tags);if(!l){if(typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object")return o?new Te.Scalar(t):t;l=t instanceof Map?Dl:t[Symbol.iterator]?af:Dl}i&&(i(l),delete r.onTagObj);let c={value:void 0,node:void 0};if(t&&typeof t=="object"&&s){let u=s.get(t);if(u){let f=new Te.Alias(u);return r.aliasNodes.push(f),f}c.value=t,s.set(t,c)}return c.node=l.createNode?l.createNode(r.schema,t,r):o?new Te.Scalar(t):t,e&&c.node instanceof Te.Node&&(c.node.tag=e),c.node}function rL(t,e,r,n){let i=t[n.replace(/\W/g,"")];if(!i){let s=Object.keys(t).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${n}"; use one of ${s}`)}if(Array.isArray(r))for(let s of r)i=i.concat(s);else typeof r=="function"&&(i=r(i.slice()));for(let s=0;s<i.length;++s){let a=i[s];if(typeof a=="string"){let o=e[a];if(!o){let l=Object.keys(e).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag "${a}"; use one of ${l}`)}i[s]=o}}return i}var nL=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,Eo=class{constructor({customTags:e,merge:r,schema:n,sortMapEntries:i,tags:s}){this.merge=!!r,this.name=n,this.sortMapEntries=i===!0?nL:i||null,!e&&s&&Cr.warnOptionDeprecation("tags","customTags"),this.tags=rL(JD,ZD,e||s,n)}createNode(e,r,n,i){let s={defaultPrefix:Eo.defaultPrefix,schema:this,wrapScalars:r},a=i?Object.assign(i,s):s;return tL(e,n,a)}createPair(e,r,n){n||(n={wrapScalars:!0});let i=this.createNode(e,n.wrapScalars,null,n),s=this.createNode(r,n.wrapScalars,null,n);return new Te.Pair(i,s)}};sf._defineProperty(Eo,"defaultPrefix",sf.defaultTagPrefix);sf._defineProperty(Eo,"defaultTags",sf.defaultTags);Jv.Schema=Eo});var rP=$(mf=>{"use strict";var Rr=gs(),Pe=xo(),Zv=uf(),iL={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},sL={get binary(){return Pe.binaryOptions},set binary(t){Object.assign(Pe.binaryOptions,t)},get bool(){return Pe.boolOptions},set bool(t){Object.assign(Pe.boolOptions,t)},get int(){return Pe.intOptions},set int(t){Object.assign(Pe.intOptions,t)},get null(){return Pe.nullOptions},set null(t){Object.assign(Pe.nullOptions,t)},get str(){return Pe.strOptions},set str(t){Object.assign(Pe.strOptions,t)}},eP={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:Rr.defaultTagPrefix},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Rr.defaultTagPrefix}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Rr.defaultTagPrefix}]}};function tP(t,e){if((t.version||t.options.version)==="1.0"){let i=e.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(i)return"!"+i[1];let s=e.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return s?`!${s[1]}/${s[2]}`:`!${e.replace(/^tag:/,"")}`}let r=t.tagPrefixes.find(i=>e.indexOf(i.prefix)===0);if(!r){let i=t.getDefaults().tagPrefixes;r=i&&i.find(s=>e.indexOf(s.prefix)===0)}if(!r)return e[0]==="!"?e:`!<${e}>`;let n=e.substr(r.prefix.length).replace(/[!,[\]{}]/g,i=>({"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"})[i]);return r.handle+n}function aL(t,e){if(e instanceof Pe.Alias)return Pe.Alias;if(e.tag){let i=t.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)||i[0]}let r,n;if(e instanceof Pe.Scalar){n=e.value;let i=t.filter(s=>s.identify&&s.identify(n)||s.class&&n instanceof s.class);r=i.find(s=>s.format===e.format)||i.find(s=>!s.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function oL(t,e,{anchors:r,doc:n}){let i=[],s=n.anchors.getName(t);return s&&(r[s]=t,i.push(`&${s}`)),t.tag?i.push(tP(n,t.tag)):e.default||i.push(tP(n,e.tag)),i.join(" ")}function ff(t,e,r,n){let{anchors:i,schema:s}=e.doc,a;if(!(t instanceof Pe.Node)){let c={aliasNodes:[],onTagObj:u=>a=u,prevObjects:new Map};t=s.createNode(t,!0,null,c);for(let u of c.aliasNodes){u.source=u.source.node;let f=i.getName(u.source);f||(f=i.newName(),i.map[f]=u.source)}}if(t instanceof Pe.Pair)return t.toString(e,r,n);a||(a=aL(s.tags,t));let o=oL(t,a,e);o.length>0&&(e.indentAtStart=(e.indentAtStart||0)+o.length+1);let l=typeof a.stringify=="function"?a.stringify(t,e,r,n):t instanceof Pe.Scalar?Pe.stringifyString(t,e,r,n):t.toString(e,r,n);return o?t instanceof Pe.Scalar||l[0]==="{"||l[0]==="["?`${o} ${l}`:`${o}
${e.indent}${l}`:l}var pf=class{static validAnchorNode(e){return e instanceof Pe.Scalar||e instanceof Pe.YAMLSeq||e instanceof Pe.YAMLMap}constructor(e){Rr._defineProperty(this,"map",Object.create(null)),this.prefix=e}createAlias(e,r){return this.setAnchor(e,r),new Pe.Alias(e)}createMergePair(...e){let r=new Pe.Merge;return r.value.items=e.map(n=>{if(n instanceof Pe.Alias){if(n.source instanceof Pe.YAMLMap)return n}else if(n instanceof Pe.YAMLMap)return this.createAlias(n);throw new Error("Merge sources must be Map nodes or their Aliases")}),r}getName(e){let{map:r}=this;return Object.keys(r).find(n=>r[n]===e)}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);let r=Object.keys(this.map);for(let n=1;;++n){let i=`${e}${n}`;if(!r.includes(i))return i}}resolveNodes(){let{map:e,_cstAliases:r}=this;Object.keys(e).forEach(n=>{e[n]=e[n].resolved}),r.forEach(n=>{n.source=n.source.resolved}),delete this._cstAliases}setAnchor(e,r){if(e!=null&&!pf.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(r&&/[\x00-\x19\s,[\]{}]/.test(r))throw new Error("Anchor names must not contain whitespace or control characters");let{map:n}=this,i=e&&Object.keys(n).find(s=>n[s]===e);if(i)if(r)i!==r&&(delete n[i],n[r]=e);else return i;else{if(!r){if(!e)return null;r=this.newName()}n[r]=e}return r}},df=(t,e)=>{if(t&&typeof t=="object"){let{tag:r}=t;t instanceof Pe.Collection?(r&&(e[r]=!0),t.items.forEach(n=>df(n,e))):t instanceof Pe.Pair?(df(t.key,e),df(t.value,e)):t instanceof Pe.Scalar&&r&&(e[r]=!0)}return e},lL=t=>Object.keys(df(t,{}));function cL(t,e){let r={before:[],after:[]},n,i=!1;for(let s of e)if(s.valueRange){if(n!==void 0){let o="Document contains trailing content not separated by a ... or --- line";t.errors.push(new Rr.YAMLSyntaxError(s,o));break}let a=Pe.resolveNode(t,s);i&&(a.spaceBefore=!0,i=!1),n=a}else s.comment!==null?(n===void 0?r.before:r.after).push(s.comment):s.type===Rr.Type.BLANK_LINE&&(i=!0,n===void 0&&r.before.length>0&&!t.commentBefore&&(t.commentBefore=r.before.join(`
`),r.before=[]));if(t.contents=n||null,!n)t.comment=r.before.concat(r.after).join(`
`)||null;else{let s=r.before.join(`
`);if(s){let a=n instanceof Pe.Collection&&n.items[0]?n.items[0]:n;a.commentBefore=a.commentBefore?`${s}
${a.commentBefore}`:s}t.comment=r.after.join(`
`)||null}}function uL({tagPrefixes:t},e){let[r,n]=e.parameters;if(!r||!n){let i="Insufficient parameters given for %TAG directive";throw new Rr.YAMLSemanticError(e,i)}if(t.some(i=>i.handle===r)){let i="The %TAG directive must only be given at most once per handle in the same document.";throw new Rr.YAMLSemanticError(e,i)}return{handle:r,prefix:n}}function fL(t,e){let[r]=e.parameters;if(e.name==="YAML:1.0"&&(r="1.0"),!r){let n="Insufficient parameters given for %YAML directive";throw new Rr.YAMLSemanticError(e,n)}if(!eP[r]){let i=`Document will be parsed as YAML ${t.version||t.options.version} rather than YAML ${r}`;t.warnings.push(new Rr.YAMLWarning(e,i))}return r}function pL(t,e,r){let n=[],i=!1;for(let s of e){let{comment:a,name:o}=s;switch(o){case"TAG":try{t.tagPrefixes.push(uL(t,s))}catch(l){t.errors.push(l)}i=!0;break;case"YAML":case"YAML:1.0":if(t.version){let l="The %YAML directive must only be given at most once per document.";t.errors.push(new Rr.YAMLSemanticError(s,l))}try{t.version=fL(t,s)}catch(l){t.errors.push(l)}i=!0;break;default:if(o){let l=`YAML only supports %TAG and %YAML directives, and not %${o}`;t.warnings.push(new Rr.YAMLWarning(s,l))}}a&&n.push(a)}if(r&&!i&&(t.version||r.version||t.options.version)==="1.1"){let s=({handle:a,prefix:o})=>({handle:a,prefix:o});t.tagPrefixes=r.tagPrefixes.map(s),t.version=r.version}t.commentBefore=n.join(`
`)||null}function wo(t){if(t instanceof Pe.Collection)return!0;throw new Error("Expected a YAML collection as document contents")}var Oo=class{constructor(e){this.anchors=new pf(e.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=e,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}add(e){return wo(this.contents),this.contents.add(e)}addIn(e,r){wo(this.contents),this.contents.addIn(e,r)}delete(e){return wo(this.contents),this.contents.delete(e)}deleteIn(e){return Pe.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):(wo(this.contents),this.contents.deleteIn(e))}getDefaults(){return Oo.defaults[this.version]||Oo.defaults[this.options.version]||{}}get(e,r){return this.contents instanceof Pe.Collection?this.contents.get(e,r):void 0}getIn(e,r){return Pe.isEmptyPath(e)?!r&&this.contents instanceof Pe.Scalar?this.contents.value:this.contents:this.contents instanceof Pe.Collection?this.contents.getIn(e,r):void 0}has(e){return this.contents instanceof Pe.Collection?this.contents.has(e):!1}hasIn(e){return Pe.isEmptyPath(e)?this.contents!==void 0:this.contents instanceof Pe.Collection?this.contents.hasIn(e):!1}set(e,r){wo(this.contents),this.contents.set(e,r)}setIn(e,r){Pe.isEmptyPath(e)?this.contents=r:(wo(this.contents),this.contents.setIn(e,r))}setSchema(e,r){if(!e&&!r&&this.schema)return;typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(r)&&(this.options.customTags=r);let n=Object.assign({},this.getDefaults(),this.options);this.schema=new Zv.Schema(n)}parse(e,r){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");let{directives:n=[],contents:i=[],directivesEndMarker:s,error:a,valueRange:o}=e;if(a&&(a.source||(a.source=this),this.errors.push(a)),pL(this,n,r),s&&(this.directivesEndMarker=!0),this.range=o?[o.start,o.end]:null,this.setSchema(),this.anchors._cstAliases=[],cL(this,i),this.anchors.resolveNodes(),this.options.prettyErrors){for(let l of this.errors)l instanceof Rr.YAMLError&&l.makePretty();for(let l of this.warnings)l instanceof Rr.YAMLError&&l.makePretty()}return this}listNonDefaultTags(){return lL(this.contents).filter(e=>e.indexOf(Zv.Schema.defaultPrefix)!==0)}setTagPrefix(e,r){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(r){let n=this.tagPrefixes.find(i=>i.handle===e);n?n.prefix=r:this.tagPrefixes.push({handle:e,prefix:r})}else this.tagPrefixes=this.tagPrefixes.filter(n=>n.handle!==e)}toJSON(e,r){let{keepBlobsInJSON:n,mapAsMap:i,maxAliasCount:s}=this.options,a=n&&(typeof e!="string"||!(this.contents instanceof Pe.Scalar)),o={doc:this,indentStep:"  ",keep:a,mapAsMap:a&&!!i,maxAliasCount:s,stringify:ff},l=Object.keys(this.anchors.map);l.length>0&&(o.anchors=new Map(l.map(u=>[this.anchors.map[u],{alias:[],aliasCount:0,count:1}])));let c=Pe.toJSON(this.contents,e,o);if(typeof r=="function"&&o.anchors)for(let{count:u,res:f}of o.anchors.values())r(f,u);return c}toString(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");let e=this.options.indent;if(!Number.isInteger(e)||e<=0){let l=JSON.stringify(e);throw new Error(`"indent" option must be a positive integer, not ${l}`)}this.setSchema();let r=[],n=!1;if(this.version){let l="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?l="%YAML:1.0":this.version==="1.1"&&(l="%YAML 1.1")),r.push(l),n=!0}let i=this.listNonDefaultTags();this.tagPrefixes.forEach(({handle:l,prefix:c})=>{i.some(u=>u.indexOf(c)===0)&&(r.push(`%TAG ${l} ${c}`),n=!0)}),(n||this.directivesEndMarker)&&r.push("---"),this.commentBefore&&((n||!this.directivesEndMarker)&&r.unshift(""),r.unshift(this.commentBefore.replace(/^/gm,"#")));let s={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:ff},a=!1,o=null;if(this.contents){this.contents instanceof Pe.Node&&(this.contents.spaceBefore&&(n||this.directivesEndMarker)&&r.push(""),this.contents.commentBefore&&r.push(this.contents.commentBefore.replace(/^/gm,"#")),s.forceBlockIndent=!!this.comment,o=this.contents.comment);let l=o?null:()=>a=!0,c=ff(this.contents,s,()=>o=null,l);r.push(Pe.addComment(c,"",o))}else this.contents!==void 0&&r.push(ff(this.contents,s));return this.comment&&((!a||o)&&r[r.length-1]!==""&&r.push(""),r.push(this.comment.replace(/^/gm,"#"))),r.join(`
`)+`
`}};Rr._defineProperty(Oo,"defaults",eP);mf.Document=Oo;mf.defaultOptions=iL;mf.scalarOptions=sL});var sP=$(iP=>{"use strict";var wm=Iv(),aa=rP(),dL=uf(),mL=gs(),hL=nf();xo();function gL(t,e=!0,r){r===void 0&&typeof e=="string"&&(r=e,e=!0);let n=Object.assign({},aa.Document.defaults[aa.defaultOptions.version],aa.defaultOptions);return new dL.Schema(n).createNode(t,e,r)}var kl=class extends aa.Document{constructor(e){super(Object.assign({},aa.defaultOptions,e))}};function _L(t,e){let r=[],n;for(let i of wm.parse(t)){let s=new kl(e);s.parse(i,n),r.push(s),n=s}return r}function nP(t,e){let r=wm.parse(t),n=new kl(e).parse(r[0]);if(r.length>1){let i="Source contains multiple documents; please use YAML.parseAllDocuments()";n.errors.unshift(new mL.YAMLSemanticError(r[1],i))}return n}function yL(t,e){let r=nP(t,e);if(r.warnings.forEach(n=>hL.warn(n)),r.errors.length>0)throw r.errors[0];return r.toJSON()}function bL(t,e){let r=new kl(e);return r.contents=t,String(r)}var TL={createNode:gL,defaultOptions:aa.defaultOptions,Document:kl,parse:yL,parseAllDocuments:_L,parseCST:wm.parse,parseDocument:nP,scalarOptions:aa.scalarOptions,stringify:bL};iP.YAML=TL});var hi=$((bZ,aP)=>{aP.exports=sP().YAML});var oP=$(Ar=>{"use strict";var Jr=xo(),NL=uf();gs();nf();Ar.Alias=Jr.Alias;Ar.Collection=Jr.Collection;Ar.Merge=Jr.Merge;Ar.Node=Jr.Node;Ar.Pair=Jr.Pair;Ar.Scalar=Jr.Scalar;Ar.YAMLMap=Jr.YAMLMap;Ar.YAMLSeq=Jr.YAMLSeq;Ar.binaryOptions=Jr.binaryOptions;Ar.boolOptions=Jr.boolOptions;Ar.intOptions=Jr.intOptions;Ar.nullOptions=Jr.nullOptions;Ar.strOptions=Jr.strOptions;Ar.Schema=NL.Schema});var bh=$((Ce,GI)=>{Ce=GI.exports=Be;var et;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?et=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:et=function(){};Ce.SEMVER_SPEC_VERSION="2.0.0";var rh=256,Sf=Number.MAX_SAFE_INTEGER||9007199254740991,nh=16,st=Ce.re=[],H=Ce.src=[],Fe=0,Bo=Fe++;H[Bo]="0|[1-9]\\d*";var jo=Fe++;H[jo]="[0-9]+";var ih=Fe++;H[ih]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var AI=Fe++;H[AI]="("+H[Bo]+")\\.("+H[Bo]+")\\.("+H[Bo]+")";var xI=Fe++;H[xI]="("+H[jo]+")\\.("+H[jo]+")\\.("+H[jo]+")";var sh=Fe++;H[sh]="(?:"+H[Bo]+"|"+H[ih]+")";var ah=Fe++;H[ah]="(?:"+H[jo]+"|"+H[ih]+")";var oh=Fe++;H[oh]="(?:-("+H[sh]+"(?:\\."+H[sh]+")*))";var lh=Fe++;H[lh]="(?:-?("+H[ah]+"(?:\\."+H[ah]+")*))";var ch=Fe++;H[ch]="[0-9A-Za-z-]+";var Kl=Fe++;H[Kl]="(?:\\+("+H[ch]+"(?:\\."+H[ch]+")*))";var uh=Fe++,EI="v?"+H[AI]+H[oh]+"?"+H[Kl]+"?";H[uh]="^"+EI+"$";var fh="[v=\\s]*"+H[xI]+H[lh]+"?"+H[Kl]+"?",ph=Fe++;H[ph]="^"+fh+"$";var Uo=Fe++;H[Uo]="((?:<|>)?=?)";var Cf=Fe++;H[Cf]=H[jo]+"|x|X|\\*";var Rf=Fe++;H[Rf]=H[Bo]+"|x|X|\\*";var pa=Fe++;H[pa]="[v=\\s]*("+H[Rf]+")(?:\\.("+H[Rf]+")(?:\\.("+H[Rf]+")(?:"+H[oh]+")?"+H[Kl]+"?)?)?";var Go=Fe++;H[Go]="[v=\\s]*("+H[Cf]+")(?:\\.("+H[Cf]+")(?:\\.("+H[Cf]+")(?:"+H[lh]+")?"+H[Kl]+"?)?)?";var wI=Fe++;H[wI]="^"+H[Uo]+"\\s*"+H[pa]+"$";var OI=Fe++;H[OI]="^"+H[Uo]+"\\s*"+H[Go]+"$";var DI=Fe++;H[DI]="(?:^|[^\\d])(\\d{1,"+nh+"})(?:\\.(\\d{1,"+nh+"}))?(?:\\.(\\d{1,"+nh+"}))?(?:$|[^\\d])";var Af=Fe++;H[Af]="(?:~>?)";var xf=Fe++;H[xf]="(\\s*)"+H[Af]+"\\s+";st[xf]=new RegExp(H[xf],"g");var uM="$1~",LI=Fe++;H[LI]="^"+H[Af]+H[pa]+"$";var kI=Fe++;H[kI]="^"+H[Af]+H[Go]+"$";var Ef=Fe++;H[Ef]="(?:\\^)";var wf=Fe++;H[wf]="(\\s*)"+H[Ef]+"\\s+";st[wf]=new RegExp(H[wf],"g");var fM="$1^",MI=Fe++;H[MI]="^"+H[Ef]+H[pa]+"$";var FI=Fe++;H[FI]="^"+H[Ef]+H[Go]+"$";var dh=Fe++;H[dh]="^"+H[Uo]+"\\s*("+fh+")$|^$";var mh=Fe++;H[mh]="^"+H[Uo]+"\\s*("+EI+")$|^$";var $l=Fe++;H[$l]="(\\s*)"+H[Uo]+"\\s*("+fh+"|"+H[pa]+")";st[$l]=new RegExp(H[$l],"g");var pM="$1$2$3",VI=Fe++;H[VI]="^\\s*("+H[pa]+")\\s+-\\s+("+H[pa]+")\\s*$";var qI=Fe++;H[qI]="^\\s*("+H[Go]+")\\s+-\\s+("+H[Go]+")\\s*$";var BI=Fe++;H[BI]="(<|>)?=?\\s*\\*";for(Ps=0;Ps<Fe;Ps++)et(Ps,H[Ps]),st[Ps]||(st[Ps]=new RegExp(H[Ps]));var Ps;Ce.parse=da;function da(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Be)return t;if(typeof t!="string"||t.length>rh)return null;var r=e.loose?st[ph]:st[uh];if(!r.test(t))return null;try{return new Be(t,e)}catch{return null}}Ce.valid=dM;function dM(t,e){var r=da(t,e);return r?r.version:null}Ce.clean=mM;function mM(t,e){var r=da(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Ce.SemVer=Be;function Be(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Be){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>rh)throw new TypeError("version is longer than "+rh+" characters");if(!(this instanceof Be))return new Be(t,e);et("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?st[ph]:st[uh]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Sf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Sf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Sf||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Sf)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Be.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Be.prototype.toString=function(){return this.version};Be.prototype.compare=function(t){return et("SemVer.compare",this.version,this.options,t),t instanceof Be||(t=new Be(t,this.options)),this.compareMain(t)||this.comparePre(t)};Be.prototype.compareMain=function(t){return t instanceof Be||(t=new Be(t,this.options)),Wo(this.major,t.major)||Wo(this.minor,t.minor)||Wo(this.patch,t.patch)};Be.prototype.comparePre=function(t){if(t instanceof Be||(t=new Be(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(et("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Wo(r,n)}while(++e)};Be.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Ce.inc=hM;function hM(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new Be(t,r).inc(e,n).version}catch{return null}}Ce.diff=gM;function gM(t,e){if(hh(t,e))return null;var r=da(t),n=da(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return i+a;return s}Ce.compareIdentifiers=Wo;var jI=/^[0-9]+$/;function Wo(t,e){var r=jI.test(t),n=jI.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Ce.rcompareIdentifiers=_M;function _M(t,e){return Wo(e,t)}Ce.major=yM;function yM(t,e){return new Be(t,e).major}Ce.minor=bM;function bM(t,e){return new Be(t,e).minor}Ce.patch=TM;function TM(t,e){return new Be(t,e).patch}Ce.compare=Ui;function Ui(t,e,r){return new Be(t,r).compare(new Be(e,r))}Ce.compareLoose=NM;function NM(t,e){return Ui(t,e,!0)}Ce.rcompare=vM;function vM(t,e,r){return Ui(e,t,r)}Ce.sort=PM;function PM(t,e){return t.sort(function(r,n){return Ce.compare(r,n,e)})}Ce.rsort=IM;function IM(t,e){return t.sort(function(r,n){return Ce.rcompare(r,n,e)})}Ce.gt=zl;function zl(t,e,r){return Ui(t,e,r)>0}Ce.lt=Of;function Of(t,e,r){return Ui(t,e,r)<0}Ce.eq=hh;function hh(t,e,r){return Ui(t,e,r)===0}Ce.neq=UI;function UI(t,e,r){return Ui(t,e,r)!==0}Ce.gte=gh;function gh(t,e,r){return Ui(t,e,r)>=0}Ce.lte=_h;function _h(t,e,r){return Ui(t,e,r)<=0}Ce.cmp=Df;function Df(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return hh(t,r,n);case"!=":return UI(t,r,n);case">":return zl(t,r,n);case">=":return gh(t,r,n);case"<":return Of(t,r,n);case"<=":return _h(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Ce.Comparator=bn;function bn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof bn){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof bn))return new bn(t,e);et("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Xl?this.value="":this.value=this.operator+this.semver.version,et("comp",this)}var Xl={};bn.prototype.parse=function(t){var e=this.options.loose?st[dh]:st[mh],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new Be(r[2],this.options.loose):this.semver=Xl};bn.prototype.toString=function(){return this.value};bn.prototype.test=function(t){return et("Comparator.test",t,this.options.loose),this.semver===Xl?!0:(typeof t=="string"&&(t=new Be(t,this.options)),Df(t,this.operator,this.semver,this.options))};bn.prototype.intersects=function(t,e){if(!(t instanceof bn))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new vt(t.value,e),Lf(this.value,r,e);if(t.operator==="")return r=new vt(this.value,e),Lf(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,a=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),o=Df(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=Df(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&a||o||l};Ce.Range=vt;function vt(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof vt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new vt(t.raw,e);if(t instanceof bn)return new vt(t.value,e);if(!(this instanceof vt))return new vt(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}vt.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};vt.prototype.toString=function(){return this.range};vt.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?st[qI]:st[VI];t=t.replace(r,LM),et("hyphen replace",t),t=t.replace(st[$l],pM),et("comparator trim",t,st[$l]),t=t.replace(st[xf],uM),t=t.replace(st[wf],fM),t=t.split(/\s+/).join(" ");var n=e?st[dh]:st[mh],i=t.split(" ").map(function(s){return CM(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new bn(s,this.options)},this),i};vt.prototype.intersects=function(t,e){if(!(t instanceof vt))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};Ce.toComparators=SM;function SM(t,e){return new vt(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function CM(t,e){return et("comp",t,e),t=xM(t,e),et("caret",t),t=RM(t,e),et("tildes",t),t=wM(t,e),et("xrange",t),t=DM(t,e),et("stars",t),t}function wr(t){return!t||t.toLowerCase()==="x"||t==="*"}function RM(t,e){return t.trim().split(/\s+/).map(function(r){return AM(r,e)}).join(" ")}function AM(t,e){var r=e.loose?st[kI]:st[LI];return t.replace(r,function(n,i,s,a,o){et("tilde",t,n,i,s,a,o);var l;return wr(i)?l="":wr(s)?l=">="+i+".0.0 <"+(+i+1)+".0.0":wr(a)?l=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":o?(et("replaceTilde pr",o),l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+(+s+1)+".0"):l=">="+i+"."+s+"."+a+" <"+i+"."+(+s+1)+".0",et("tilde return",l),l})}function xM(t,e){return t.trim().split(/\s+/).map(function(r){return EM(r,e)}).join(" ")}function EM(t,e){et("caret",t,e);var r=e.loose?st[FI]:st[MI];return t.replace(r,function(n,i,s,a,o){et("caret",t,n,i,s,a,o);var l;return wr(i)?l="":wr(s)?l=">="+i+".0.0 <"+(+i+1)+".0.0":wr(a)?i==="0"?l=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+".0 <"+(+i+1)+".0.0":o?(et("replaceCaret pr",o),i==="0"?s==="0"?l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+s+"."+(+a+1):l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+"."+a+"-"+o+" <"+(+i+1)+".0.0"):(et("no pr"),i==="0"?s==="0"?l=">="+i+"."+s+"."+a+" <"+i+"."+s+"."+(+a+1):l=">="+i+"."+s+"."+a+" <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+"."+a+" <"+(+i+1)+".0.0"),et("caret return",l),l})}function wM(t,e){return et("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return OM(r,e)}).join(" ")}function OM(t,e){t=t.trim();var r=e.loose?st[OI]:st[wI];return t.replace(r,function(n,i,s,a,o,l){et("xRange",t,n,i,s,a,o,l);var c=wr(s),u=c||wr(a),f=u||wr(o),m=f;return i==="="&&m&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(u&&(a=0),o=0,i===">"?(i=">=",u?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",u?s=+s+1:a=+a+1),n=i+s+"."+a+"."+o):u?n=">="+s+".0.0 <"+(+s+1)+".0.0":f&&(n=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0"),et("xRange return",n),n})}function DM(t,e){return et("replaceStars",t,e),t.trim().replace(st[BI],"")}function LM(t,e,r,n,i,s,a,o,l,c,u,f,m){return wr(r)?e="":wr(n)?e=">="+r+".0.0":wr(i)?e=">="+r+"."+n+".0":e=">="+e,wr(l)?o="":wr(c)?o="<"+(+l+1)+".0.0":wr(u)?o="<"+l+"."+(+c+1)+".0":f?o="<="+l+"."+c+"."+u+"-"+f:o="<="+o,(e+" "+o).trim()}vt.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new Be(t,this.options));for(var e=0;e<this.set.length;e++)if(kM(this.set[e],t,this.options))return!0;return!1};function kM(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(et(t[n].semver),t[n].semver!==Xl&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Ce.satisfies=Lf;function Lf(t,e,r){try{e=new vt(e,r)}catch{return!1}return e.test(t)}Ce.maxSatisfying=MM;function MM(t,e,r){var n=null,i=null;try{var s=new vt(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new Be(n,r))}),n}Ce.minSatisfying=FM;function FM(t,e,r){var n=null,i=null;try{var s=new vt(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new Be(n,r))}),n}Ce.minVersion=VM;function VM(t,e){t=new vt(t,e);var r=new Be("0.0.0");if(t.test(r)||(r=new Be("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(s){var a=new Be(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!r||zl(r,a))&&(r=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}Ce.validRange=qM;function qM(t,e){try{return new vt(t,e).range||"*"}catch{return null}}Ce.ltr=BM;function BM(t,e,r){return yh(t,e,"<",r)}Ce.gtr=jM;function jM(t,e,r){return yh(t,e,">",r)}Ce.outside=yh;function yh(t,e,r,n){t=new Be(t,n),e=new vt(e,n);var i,s,a,o,l;switch(r){case">":i=zl,s=_h,a=Of,o=">",l=">=";break;case"<":i=Of,s=gh,a=zl,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Lf(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],f=null,m=null;if(u.forEach(function(p){p.semver===Xl&&(p=new bn(">=0.0.0")),f=f||p,m=m||p,i(p.semver,f.semver,n)?f=p:a(p.semver,m.semver,n)&&(m=p)}),f.operator===o||f.operator===l||(!m.operator||m.operator===o)&&s(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0}Ce.prerelease=UM;function UM(t,e){var r=da(t,e);return r&&r.prerelease.length?r.prerelease:null}Ce.intersects=GM;function GM(t,e,r){return t=new vt(t,r),e=new vt(e,r),t.intersects(e)}Ce.coerce=WM;function WM(t){if(t instanceof Be)return t;if(typeof t!="string")return null;var e=t.match(st[DI]);return e==null?null:da(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Th=$((pne,$I)=>{"use strict";var kf=require("path");function $M(t){if(typeof t!="string"||t.length<=7||t.substring(0,7)!=="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");let e=decodeURI(t.substring(7)),r=e.indexOf("/"),n=e.substring(0,r),i=e.substring(r+1);return n==="localhost"&&(n=""),n&&(n=kf.sep+kf.sep+n),i=i.replace(/^(.+)\|/,"$1:"),kf.sep==="\\"&&(i=i.replace(/\//g,"\\")),/^.+:/.test(i)||(i=kf.sep+i),n+i}$I.exports=$M});var qf=$((hie,lS)=>{"use strict";function Zt(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}Zt.prototype.clone_empty=function(){var t=new Zt(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t};Zt.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]};Zt.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1};Zt.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};Zt.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};Zt.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};Zt.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,t.__items[0]===" "&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1};Zt.prototype.is_empty=function(){return this.__items.length===0};Zt.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};Zt.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf(`
`);e!==-1?this.__character_count=t.length-e:this.__character_count+=t.length};Zt.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t};Zt.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};Zt.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};Zt.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};Zt.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t};function Zl(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}Zl.prototype.get_indent_size=function(t,e){var r=this.__base_string_length;return e=e||0,t<0&&(r=0),r+=t*this.__indent_size,r+=e,r};Zl.prototype.get_indent_string=function(t,e){var r=this.__base_string;return e=e||0,t<0&&(t=0,r=""),e+=t*this.__indent_size,this.__ensure_cache(e),r+=this.__cache[e],r};Zl.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()};Zl.prototype.__add_column=function(){var t=this.__cache.length,e=0,r="";this.__indent_size&&t>=this.__indent_size&&(e=Math.floor(t/this.__indent_size),t-=e*this.__indent_size,r=new Array(e+1).join(this.__indent_string)),t&&(r+=new Array(t+1).join(" ")),this.__cache.push(r)};function er(t,e){this.__indent_cache=new Zl(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new Zt(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}er.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};er.prototype.get_line_number=function(){return this.__lines.length};er.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)};er.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)};er.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};er.prototype.add_new_line=function(t){return this.is_empty()||!t&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};er.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&(e[e.length-1]===`
`&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var r=this.__lines.join(`
`);return t!==`
`&&(r=r.replace(/[\n]/g,t)),r};er.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};er.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)};er.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};er.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};er.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};er.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()};er.prototype.trim=function(t){for(t=t===void 0?!1:t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};er.prototype.just_added_newline=function(){return this.current_line.is_empty()};er.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};er.prototype.ensure_empty_line_above=function(t,e){for(var r=this.__lines.length-2;r>=0;){var n=this.__lines[r];if(n.is_empty())break;if(n.item(0).indexOf(t)!==0&&n.item(-1)!==e){this.__lines.splice(r+1,0,new Zt(this)),this.previous_line=this.__lines[this.__lines.length-2];break}r--}};lS.exports.Output=er});var Eh=$((gie,cS)=>{"use strict";function QM(t,e,r,n){this.type=t,this.text=e,this.comments_before=null,this.newlines=r||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}cS.exports.Token=QM});var Oh=$(Hi=>{"use strict";var JM="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",uS="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",wh="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",fS="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",pS="(?:\\\\u[0-9a-fA-F]{4}|["+JM+wh+"])",ZM="(?:\\\\u[0-9a-fA-F]{4}|["+uS+wh+fS+"])*";Hi.identifier=new RegExp(pS+ZM,"g");Hi.identifierStart=new RegExp(pS);Hi.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+uS+wh+fS+"])+");Hi.newline=/[\n\r\u2028\u2029]/;Hi.lineBreak=new RegExp(`\r
|`+Hi.newline.source);Hi.allLineBreaks=new RegExp(Hi.lineBreak.source,"g")});var jf=$((yie,Bf)=>{"use strict";function Ss(t,e){this.raw_options=dS(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}Ss.prototype._get_array=function(t,e){var r=this.raw_options[t],n=e||[];return typeof r=="object"?r!==null&&typeof r.concat=="function"&&(n=r.concat()):typeof r=="string"&&(n=r.split(/[^a-zA-Z0-9_\/\-]+/)),n};Ss.prototype._get_boolean=function(t,e){var r=this.raw_options[t],n=r===void 0?!!e:!!r;return n};Ss.prototype._get_characters=function(t,e){var r=this.raw_options[t],n=e||"";return typeof r=="string"&&(n=r.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),n};Ss.prototype._get_number=function(t,e){var r=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var n=parseInt(r,10);return isNaN(n)&&(n=e),n};Ss.prototype._get_selection=function(t,e,r){var n=this._get_selection_list(t,e,r);if(n.length!==1)throw new Error("Invalid Option Value: The option '"+t+`' can only be one of the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return n[0]};Ss.prototype._get_selection_list=function(t,e,r){if(!e||e.length===0)throw new Error("Selection list cannot be empty.");if(r=r||[e[0]],!this._is_valid_selection(r,e))throw new Error("Invalid Default Value!");var n=this._get_array(t,r);if(!this._is_valid_selection(n,e))throw new Error("Invalid Option Value: The option '"+t+`' can contain only the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return n};Ss.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(r){return e.indexOf(r)===-1})};function dS(t,e){var r={};t=mS(t);var n;for(n in t)n!==e&&(r[n]=t[n]);if(e&&t[e])for(n in t[e])r[n]=t[e][n];return r}function mS(t){var e={},r;for(r in t){var n=r.replace(/-/g,"_");e[n]=t[r]}return e}Bf.exports.Options=Ss;Bf.exports.normalizeOpts=mS;Bf.exports.mergeOpts=dS});var Dh=$((bie,_S)=>{"use strict";var hS=jf().Options,eF=["before-newline","after-newline","preserve-newline"];function gS(t){hS.call(this,t,"js");var e=this.raw_options.brace_style||null;e==="expand-strict"?this.raw_options.brace_style="expand":e==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var n=0;n<r.length;n++)r[n]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=r[n];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",eF),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}gS.prototype=new hS;_S.exports.Options=gS});var Uf=$((Tie,bS)=>{"use strict";var yS=RegExp.prototype.hasOwnProperty("sticky");function lr(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}lr.prototype.restart=function(){this.__position=0};lr.prototype.back=function(){this.__position>0&&(this.__position-=1)};lr.prototype.hasNext=function(){return this.__position<this.__input_length};lr.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t};lr.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e};lr.prototype.__match=function(t,e){t.lastIndex=e;var r=t.exec(this.__input);return r&&!(yS&&t.sticky)&&r.index!==e&&(r=null),r};lr.prototype.test=function(t,e){return e=e||0,e+=this.__position,e>=0&&e<this.__input_length?!!this.__match(t,e):!1};lr.prototype.testChar=function(t,e){var r=this.peek(e);return t.lastIndex=0,r!==null&&t.test(r)};lr.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e};lr.prototype.read=function(t,e,r){var n="",i;return t&&(i=this.match(t),i&&(n+=i[0])),e&&(i||!t)&&(n+=this.readUntil(e,r)),n};lr.prototype.readUntil=function(t,e){var r="",n=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(n=i.index,e&&(n+=i[0].length)):n=this.__input_length,r=this.__input.substring(this.__position,n),this.__position=n,r};lr.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)};lr.prototype.get_regexp=function(t,e){var r=null,n="g";return e&&yS&&(n="y"),typeof t=="string"&&t!==""?r=new RegExp(t,n):t&&(r=new RegExp(t.source,n)),r};lr.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))};lr.prototype.peekUntilAfter=function(t){var e=this.__position,r=this.readUntilAfter(t);return this.__position=e,r};lr.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t};bS.exports.InputScanner=lr});var NS=$((Nie,TS)=>{"use strict";function ma(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}ma.prototype.restart=function(){this.__position=0};ma.prototype.isEmpty=function(){return this.__tokens_length===0};ma.prototype.hasNext=function(){return this.__position<this.__tokens_length};ma.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t};ma.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e};ma.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1};TS.exports.TokenStream=ma});var ec=$((vie,vS)=>{"use strict";function _i(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}_i.prototype.read=function(){var t=this._input.read(this._starting_pattern);return(!this._starting_pattern||t)&&(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t};_i.prototype.read_match=function(){return this._input.match(this._match_pattern)};_i.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e};_i.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e};_i.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e};_i.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e};_i.prototype._create=function(){return new _i(this._input,this)};_i.prototype._update=function(){};vS.exports.Pattern=_i});var SS=$((Pie,IS)=>{"use strict";var PS=ec().Pattern;function Cs(t,e){PS.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Cs.prototype=new PS;Cs.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")};Cs.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(t===" ")this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t};Cs.prototype.matching=function(t,e){var r=this._create();return r.__set_whitespace_patterns(t,e),r._update(),r};Cs.prototype._create=function(){return new Cs(this._input,this)};Cs.prototype.__split=function(t,e){t.lastIndex=0;for(var r=0,n=[],i=t.exec(e);i;)n.push(e.substring(r,i.index)),r=i.index+i[0].length,i=t.exec(e);return r<e.length?n.push(e.substring(r,e.length)):n.push(""),n};IS.exports.WhitespacePattern=Cs});var rc=$((Iie,kh)=>{"use strict";var tF=Uf().InputScanner,CS=Eh().Token,Lh=NS().TokenStream,rF=SS().WhitespacePattern,tc={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},yi=function(t,e){this._input=new tF(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new rF(this._input)};yi.prototype.tokenize=function(){this._input.restart(),this.__tokens=new Lh,this._reset();for(var t,e=new CS(tc.START,""),r=null,n=[],i=new Lh;e.type!==tc.EOF;){for(t=this._get_next_token(e,r);this._is_comment(t);)i.add(t),t=this._get_next_token(e,r);i.isEmpty()||(t.comments_before=i,i=new Lh),t.parent=r,this._is_opening(t)?(n.push(r),r=t):r&&this._is_closing(t,r)&&(t.opened=r,r.closed=t,r=n.pop(),t.parent=r),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens};yi.prototype._is_first_token=function(){return this.__tokens.isEmpty()};yi.prototype._reset=function(){};yi.prototype._get_next_token=function(t,e){this._readWhitespace();var r=this._input.read(/.+/g);return r?this._create_token(tc.RAW,r):this._create_token(tc.EOF,"")};yi.prototype._is_comment=function(t){return!1};yi.prototype._is_opening=function(t){return!1};yi.prototype._is_closing=function(t,e){return!1};yi.prototype._create_token=function(t,e){var r=new CS(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return r};yi.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};kh.exports.Tokenizer=yi;kh.exports.TOKEN=tc});var Gf=$((Sie,RS)=>{"use strict";function Mh(t,e){t=typeof t=="string"?t:t.source,e=typeof e=="string"?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}Mh.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var r=this.__directive_pattern.exec(t);r;)e[r[1]]=r[2],r=this.__directive_pattern.exec(t);return e};Mh.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)};RS.exports.Directives=Mh});var qh=$((Cie,AS)=>{"use strict";var Fh=ec().Pattern,Vh={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function ei(t,e){Fh.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},Vh),this._excluded=Object.assign({},Vh),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var r=new Fh(t);this.__patterns={handlebars_comment:r.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:r.starting_with(/{{{/).until_after(/}}}/),handlebars:r.starting_with(/{{/).until_after(/}}/),php:r.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:r.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:r.starting_with(/{%/).until_after(/%}/),django_value:r.starting_with(/{{/).until_after(/}}/),django_comment:r.starting_with(/{#/).until_after(/#}/),smarty:r.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:r.starting_with(/{\*/).until_after(/\*}/),smarty_literal:r.starting_with(/{literal}/).until_after(/{\/literal}/)}}ei.prototype=new Fh;ei.prototype._create=function(){return new ei(this._input,this)};ei.prototype._update=function(){this.__set_templated_pattern()};ei.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e};ei.prototype.read_options=function(t){var e=this._create();for(var r in Vh)e._disabled[r]=t.templating.indexOf(r)===-1;return e._update(),e};ei.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e};ei.prototype.read=function(){var t="";this._match_pattern?t=this._input.read(this._starting_pattern):t=this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t};ei.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")};ei.prototype._read_template=function(){var t="",e=this._input.peek();if(e==="<"){var r=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&r==="?"&&(t=t||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&r==="%"&&(t=t||this.__patterns.erb.read())}else e==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(t=t||this.__patterns.handlebars_comment.read(),t=t||this.__patterns.handlebars_unescaped.read(),t=t||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=t||this.__patterns.django_comment.read(),t=t||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=t||this.__patterns.smarty_comment.read(),t=t||this.__patterns.smarty_literal.read(),t=t||this.__patterns.smarty.read()));return t};AS.exports.TemplatablePattern=ei});var ic=$((Rie,nc)=>{"use strict";var nF=Uf().InputScanner,xS=rc().Tokenizer,Bh=rc().TOKEN,iF=Gf().Directives,Tn=Oh(),sF=ec().Pattern,aF=qh().TemplatablePattern;function jh(t,e){return e.indexOf(t)!==-1}var _e={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:Bh.START,RAW:Bh.RAW,EOF:Bh.EOF},ES=new iF(/\/\*/,/\*\//),oF=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,lF=/[0-9]/,cF=/[^\d\.]/,uF=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),ha=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";ha=ha.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");ha="\\?\\.(?!\\d) "+ha;ha=ha.replace(/ /g,"|");var fF=new RegExp(ha),wS="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),pF=wS.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),dF=new RegExp("^(?:"+pF.join("|")+")$"),Wf,cr=function(t,e){xS.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var r=new sF(this._input),n=new aF(this._input).read_options(this._options);this.__patterns={template:n,identifier:n.starting_with(Tn.identifier).matching(Tn.identifierMatch),number:r.matching(oF),punct:r.matching(fF),comment:r.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:r.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:r.matching(/<!--/),html_comment_end:r.matching(/-->/),include:r.starting_with(/#include/).until_after(Tn.lineBreak),shebang:r.starting_with(/#!/).until_after(Tn.lineBreak),xml:r.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:n.until(/['\\\n\r\u2028\u2029]/),double_quote:n.until(/["\\\n\r\u2028\u2029]/),template_text:n.until(/[`\\$]/),template_expression:n.until(/[`}\\]/)}};cr.prototype=new xS;cr.prototype._is_comment=function(t){return t.type===_e.COMMENT||t.type===_e.BLOCK_COMMENT||t.type===_e.UNKNOWN};cr.prototype._is_opening=function(t){return t.type===_e.START_BLOCK||t.type===_e.START_EXPR};cr.prototype._is_closing=function(t,e){return(t.type===_e.END_BLOCK||t.type===_e.END_EXPR)&&e&&(t.text==="]"&&e.text==="["||t.text===")"&&e.text==="("||t.text==="}"&&e.text==="{")};cr.prototype._reset=function(){Wf=!1};cr.prototype._get_next_token=function(t,e){var r=null;this._readWhitespace();var n=this._input.peek();return n===null?this._create_token(_e.EOF,""):(r=r||this._read_non_javascript(n),r=r||this._read_string(n),r=r||this._read_word(t),r=r||this._read_singles(n),r=r||this._read_comment(n),r=r||this._read_regexp(n,t),r=r||this._read_xml(n,t),r=r||this._read_punctuation(),r=r||this._create_token(_e.UNKNOWN,this._input.next()),r)};cr.prototype._read_word=function(t){var e;if(e=this.__patterns.identifier.read(),e!=="")return e=e.replace(Tn.allLineBreaks,`
`),!(t.type===_e.DOT||t.type===_e.RESERVED&&(t.text==="set"||t.text==="get"))&&dF.test(e)?e==="in"||e==="of"?this._create_token(_e.OPERATOR,e):this._create_token(_e.RESERVED,e):this._create_token(_e.WORD,e);if(e=this.__patterns.number.read(),e!=="")return this._create_token(_e.WORD,e)};cr.prototype._read_singles=function(t){var e=null;return t==="("||t==="["?e=this._create_token(_e.START_EXPR,t):t===")"||t==="]"?e=this._create_token(_e.END_EXPR,t):t==="{"?e=this._create_token(_e.START_BLOCK,t):t==="}"?e=this._create_token(_e.END_BLOCK,t):t===";"?e=this._create_token(_e.SEMICOLON,t):t==="."&&cF.test(this._input.peek(1))?e=this._create_token(_e.DOT,t):t===","&&(e=this._create_token(_e.COMMA,t)),e&&this._input.next(),e};cr.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(t!=="")return t==="="?this._create_token(_e.EQUALS,t):t==="?."?this._create_token(_e.DOT,t):this._create_token(_e.OPERATOR,t)};cr.prototype._read_non_javascript=function(t){var e="";if(t==="#"){if(this._is_first_token()&&(e=this.__patterns.shebang.read(),e))return this._create_token(_e.UNKNOWN,e.trim()+`
`);if(e=this.__patterns.include.read(),e)return this._create_token(_e.UNKNOWN,e.trim()+`
`);t=this._input.next();var r="#";if(this._input.hasNext()&&this._input.testChar(lF)){do t=this._input.next(),r+=t;while(this._input.hasNext()&&t!=="#"&&t!=="=");return t==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(r+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(r+="{}",this._input.next(),this._input.next())),this._create_token(_e.WORD,r)}this._input.back()}else if(t==="<"&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read(),e){for(;this._input.hasNext()&&!this._input.testChar(Tn.newline);)e+=this._input.next();return Wf=!0,this._create_token(_e.COMMENT,e)}}else if(Wf&&t==="-"&&(e=this.__patterns.html_comment_end.read(),e))return Wf=!1,this._create_token(_e.COMMENT,e);return null};cr.prototype._read_comment=function(t){var e=null;if(t==="/"){var r="";if(this._input.peek(1)==="*"){r=this.__patterns.block_comment.read();var n=ES.get_directives(r);n&&n.ignore==="start"&&(r+=ES.readIgnored(this._input)),r=r.replace(Tn.allLineBreaks,`
`),e=this._create_token(_e.BLOCK_COMMENT,r),e.directives=n}else this._input.peek(1)==="/"&&(r=this.__patterns.comment.read(),e=this._create_token(_e.COMMENT,r))}return e};cr.prototype._read_string=function(t){if(t==="`"||t==="'"||t==='"'){var e=this._input.next();return this.has_char_escapes=!1,t==="`"?e+=this._read_string_recursive("`",!0,"${"):e+=this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=mF(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(Tn.allLineBreaks,`
`),this._create_token(_e.STRING,e)}return null};cr.prototype._allow_regexp_or_xml=function(t){return t.type===_e.RESERVED&&jh(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===_e.END_EXPR&&t.text===")"&&t.opened.previous.type===_e.RESERVED&&jh(t.opened.previous.text,["if","while","for"])||jh(t.type,[_e.COMMENT,_e.START_EXPR,_e.START_BLOCK,_e.START,_e.END_BLOCK,_e.OPERATOR,_e.EQUALS,_e.EOF,_e.SEMICOLON,_e.COMMA])};cr.prototype._read_regexp=function(t,e){if(t==="/"&&this._allow_regexp_or_xml(e)){for(var r=this._input.next(),n=!1,i=!1;this._input.hasNext()&&(n||i||this._input.peek()!==t)&&!this._input.testChar(Tn.newline);)r+=this._input.peek(),n?n=!1:(n=this._input.peek()==="\\",this._input.peek()==="["?i=!0:this._input.peek()==="]"&&(i=!1)),this._input.next();return this._input.peek()===t&&(r+=this._input.next(),r+=this._input.read(Tn.identifier)),this._create_token(_e.STRING,r)}return null};cr.prototype._read_xml=function(t,e){if(this._options.e4x&&t==="<"&&this._allow_regexp_or_xml(e)){var r="",n=this.__patterns.xml.read_match();if(n){for(var i=n[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=i.indexOf("{")===0,a=0;n;){var o=!!n[1],l=n[2],c=!!n[n.length-1]||l.slice(0,8)==="![CDATA[";if(!c&&(l===i||s&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(o?--a:++a),r+=n[0],a<=0)break;n=this.__patterns.xml.read_match()}return n||(r+=this._input.match(/[\s\S]*/g)[0]),r=r.replace(Tn.allLineBreaks,`
`),this._create_token(_e.STRING,r)}}return null};function mF(t){for(var e="",r=0,n=new nF(t),i=null;n.hasNext();)if(i=n.match(/([\s]|[^\\]|\\\\)+/g),i&&(e+=i[0]),n.peek()==="\\"){if(n.next(),n.peek()==="x")i=n.match(/x([0-9A-Fa-f]{2})/g);else if(n.peek()==="u")i=n.match(/u([0-9A-Fa-f]{4})/g);else{e+="\\",n.hasNext()&&(e+=n.next());continue}if(!i||(r=parseInt(i[1],16),r>126&&r<=255&&i[0].indexOf("x")===0))return t;if(r>=0&&r<32){e+="\\"+i[0];continue}else r===34||r===39||r===92?e+="\\"+String.fromCharCode(r):e+=String.fromCharCode(r)}return e}cr.prototype._read_string_recursive=function(t,e,r){var n,i;t==="'"?i=this.__patterns.single_quote:t==='"'?i=this.__patterns.double_quote:t==="`"?i=this.__patterns.template_text:t==="}"&&(i=this.__patterns.template_expression);for(var s=i.read(),a="";this._input.hasNext();){if(a=this._input.next(),a===t||!e&&Tn.newline.test(a)){this._input.back();break}else a==="\\"&&this._input.hasNext()?(n=this._input.peek(),n==="x"||n==="u"?this.has_char_escapes=!0:n==="\r"&&this._input.peek(1)===`
`&&this._input.next(),a+=this._input.next()):r&&(r==="${"&&a==="$"&&this._input.peek()==="{"&&(a+=this._input.next()),r===a&&(t==="`"?a+=this._read_string_recursive("}",e,"`"):a+=this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(a+=this._input.next())));a+=i.read(),s+=a}return s};nc.exports.Tokenizer=cr;nc.exports.TOKEN=_e;nc.exports.positionable_operators=uF.slice();nc.exports.line_starters=wS.slice()});var kS=$((Aie,LS)=>{"use strict";var hF=qf().Output,gF=Eh().Token,Hf=Oh(),_F=Dh().Options,yF=ic().Tokenizer,sc=ic().line_starters,ac=ic().positionable_operators,B=ic().TOKEN;function ke(t,e){return e.indexOf(t)!==-1}function bF(t){return t.replace(/^\s+/g,"")}function TF(t){for(var e={},r=0;r<t.length;r++)e[t[r].replace(/-/g,"_")]=t[r];return e}function Nn(t,e){return t&&t.type===B.RESERVED&&t.text===e}function ct(t,e){return t&&t.type===B.RESERVED&&ke(t.text,e)}var Yf=["case","return","do","if","throw","else","await","break","continue","async"],NF=["before-newline","after-newline","preserve-newline"],oc=TF(NF),OS=[oc.before_newline,oc.preserve_newline],ye={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function DS(t,e){e.multiline_frame||e.mode===ye.ForInitializer||e.mode===ye.Conditional||t.remove_indent(e.start_line_index)}function vF(t){t=t.replace(Hf.allLineBreaks,`
`);for(var e=[],r=t.indexOf(`
`);r!==-1;)e.push(t.substring(0,r)),t=t.substring(r+1),r=t.indexOf(`
`);return t.length&&e.push(t),e}function Rs(t){return t===ye.ArrayLiteral}function lc(t){return ke(t,[ye.Expression,ye.ForInitializer,ye.Conditional])}function PF(t,e){for(var r=0;r<t.length;r++){var n=t[r].trim();if(n.charAt(0)!==e)return!1}return!0}function IF(t,e){for(var r=0,n=t.length,i;r<n;r++)if(i=t[r],i&&i.indexOf(e)!==0)return!1;return!0}function $e(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new _F(e)}$e.prototype.create_flags=function(t,e){var r=0;t&&(r=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>r&&(r=t.line_indent_level));var n={mode:e,parent:t,last_token:t?t.last_token:new gF(B.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:r,alignment:0,line_indent_level:t?t.line_indent_level:r,start_line_index:this._output.get_line_number(),ternary_depth:0};return n};$e.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new hF(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(ye.BlockStatement);var r=new yF(t,this._options);return this._tokens=r.tokenize(),t};$e.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t,e=this._reset(this._source_text),r=this._options.eol;this._options.eol==="auto"&&(r=`
`,e&&Hf.lineBreak.test(e||"")&&(r=e.match(Hf.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return t=this._output.get_code(r),t};$e.prototype.handle_token=function(t,e){t.type===B.START_EXPR?this.handle_start_expr(t):t.type===B.END_EXPR?this.handle_end_expr(t):t.type===B.START_BLOCK?this.handle_start_block(t):t.type===B.END_BLOCK?this.handle_end_block(t):t.type===B.WORD?this.handle_word(t):t.type===B.RESERVED?this.handle_word(t):t.type===B.SEMICOLON?this.handle_semicolon(t):t.type===B.STRING?this.handle_string(t):t.type===B.EQUALS?this.handle_equals(t):t.type===B.OPERATOR?this.handle_operator(t):t.type===B.COMMA?this.handle_comma(t):t.type===B.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===B.COMMENT?this.handle_comment(t,e):t.type===B.DOT?this.handle_dot(t):t.type===B.EOF?this.handle_eof(t):t.type===B.UNKNOWN?this.handle_unknown(t,e):this.handle_unknown(t,e)};$e.prototype.handle_whitespace_and_comments=function(t,e){var r=t.newlines,n=this._options.keep_array_indentation&&Rs(this._flags.mode);if(t.comments_before)for(var i=t.comments_before.next();i;)this.handle_whitespace_and_comments(i,e),this.handle_token(i,e),i=t.comments_before.next();if(n)for(var s=0;s<r;s+=1)this.print_newline(s>0,e);else if(this._options.max_preserve_newlines&&r>this._options.max_preserve_newlines&&(r=this._options.max_preserve_newlines),this._options.preserve_newlines&&r>1){this.print_newline(!1,e);for(var a=1;a<r;a+=1)this.print_newline(!0,e)}};var Uh=["async","break","continue","return","throw","yield"];$e.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=e===void 0?!1:e,!this._output.just_added_newline()){var r=this._options.preserve_newlines&&t.newlines||e,n=ke(this._flags.last_token.text,ac)||ke(t.text,ac);if(n){var i=ke(this._flags.last_token.text,ac)&&ke(this._options.operator_position,OS)||ke(t.text,ac);r=r&&i}if(r)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(ct(this._flags.last_token,Uh))return;this._output.set_wrap_point()}}};$e.prototype.print_newline=function(t,e){if(!e&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==B.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var r=this._tokens.peek();this._flags.mode===ye.Statement&&!(this._flags.if_block&&Nn(r,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)};$e.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&(t.text==="["||Rs(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};$e.prototype.print_token=function(t){if(this._output.raw){this._output.add_raw_token(t);return}if(this._options.comma_first&&t.previous&&t.previous.type===B.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};$e.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};$e.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};$e.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};$e.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===ye.Statement&&DS(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};$e.prototype.start_of_object_property=function(){return this._flags.parent.mode===ye.ObjectLiteral&&this._flags.mode===ye.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ct(this._flags.last_token,["get","set"]))};$e.prototype.start_of_statement=function(t){var e=!1;return e=e||ct(this._flags.last_token,["var","let","const"])&&t.type===B.WORD,e=e||Nn(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===ye.ObjectLiteral&&this._flags.mode===ye.Statement)&&ct(this._flags.last_token,Uh)&&!t.newlines,e=e||Nn(this._flags.last_token,"else")&&!(Nn(t,"if")&&!t.comments_before),e=e||this._flags.last_token.type===B.END_EXPR&&(this._previous_flags.mode===ye.ForInitializer||this._previous_flags.mode===ye.Conditional),e=e||this._flags.last_token.type===B.WORD&&this._flags.mode===ye.BlockStatement&&!this._flags.in_case&&!(t.text==="--"||t.text==="++")&&this._last_last_text!=="function"&&t.type!==B.WORD&&t.type!==B.RESERVED,e=e||this._flags.mode===ye.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ct(this._flags.last_token,["get","set"])),e?(this.set_mode(ye.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,ct(t,["do","for","if","while"])),!0):!1};$e.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=ye.Expression;if(t.text==="["){if(this._flags.last_token.type===B.WORD||this._flags.last_token.text===")"){ct(this._flags.last_token,sc)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}e=ye.ArrayLiteral,Rs(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),ke(this._flags.last_token.type,[B.START_EXPR,B.END_EXPR,B.WORD,B.OPERATOR,B.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===B.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,e=ye.ForInitializer):ke(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=ye.Conditional):ke(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&t.whitespace_before===""?this._output.space_before_token=!1:(ke(this._flags.last_token.text,sc)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===B.EQUALS||this._flags.last_token.type===B.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===B.WORD){this._output.space_before_token=!1;var r=this._tokens.peek(-3);if(this._options.space_after_named_function&&r){var n=this._tokens.peek(-4);ct(r,["async","function"])||r.text==="*"&&ct(n,["async","function"])?this._output.space_before_token=!0:this._flags.mode===ye.ObjectLiteral&&(r.text==="{"||r.text===","||r.text==="*"&&(n.text==="{"||n.text===","))&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===B.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(ke(this._last_last_text,["function","yield"])||this._flags.mode===ye.ObjectLiteral&&ke(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===B.START_BLOCK?this.print_newline():(this._flags.last_token.type===B.END_EXPR||this._flags.last_token.type===B.START_EXPR||this._flags.last_token.type===B.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===B.COMMA)&&this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};$e.prototype.handle_end_expr=function(t){for(;this._flags.mode===ye.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,t.text==="]"&&Rs(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===B.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(t),this.restore_mode(),DS(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===ye.Conditional&&(this._previous_flags.mode=ye.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};$e.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),r=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===B.END_EXPR?(this.set_mode(ye.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(ye.BlockStatement):r&&(ke(r.text,[":",","])&&ke(e.type,[B.STRING,B.WORD,B.RESERVED])||ke(e.text,["get","set","..."])&&ke(r.type,[B.WORD,B.RESERVED]))?ke(this._last_last_text,["class","interface"])?this.set_mode(ye.BlockStatement):this.set_mode(ye.ObjectLiteral):this._flags.last_token.type===B.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(ye.BlockStatement):ke(this._flags.last_token.type,[B.EQUALS,B.START_EXPR,B.COMMA,B.OPERATOR])||ct(this._flags.last_token,["return","throw","import","default"])?this.set_mode(ye.ObjectLiteral):this.set_mode(ye.BlockStatement);var n=!e.comments_before&&e.text==="}",i=n&&this._flags.last_word==="function"&&this._flags.last_token.type===B.END_EXPR;if(this._options.brace_preserve_inline){var s=0,a=null;this._flags.inline_frame=!0;do if(s+=1,a=this._tokens.peek(s-1),a.newlines){this._flags.inline_frame=!1;break}while(a.type!==B.EOF&&!(a.type===B.END_BLOCK&&a.opened===t))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==B.OPERATOR&&(i||this._flags.last_token.type===B.EQUALS||ct(this._flags.last_token,Yf)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(Rs(this._previous_flags.mode)&&(this._flags.last_token.type===B.START_EXPR||this._flags.last_token.type===B.COMMA)&&((this._flags.last_token.type===B.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===B.COMMA||this._flags.last_token.type===B.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==B.OPERATOR&&this._flags.last_token.type!==B.START_EXPR&&(this._flags.last_token.type===B.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),!n&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};$e.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===ye.Statement;)this.restore_mode();var e=this._flags.last_token.type===B.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:this._options.brace_style==="expand"?e||this.print_newline():e||(Rs(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)};$e.prototype.handle_word=function(t){if(t.type===B.RESERVED){if(ke(t.text,["set","get"])&&this._flags.mode!==ye.ObjectLiteral)t.type=B.WORD;else if(t.text==="import"&&this._tokens.peek().text==="(")t.type=B.WORD;else if(ke(t.text,["as","from"])&&!this._flags.import_block)t.type=B.WORD;else if(this._flags.mode===ye.ObjectLiteral){var e=this._tokens.peek();e.text===":"&&(t.type=B.WORD)}}if(this.start_of_statement(t)?ct(this._flags.last_token,["var","let","const"])&&t.type===B.WORD&&(this._flags.declaration_statement=!0):t.newlines&&!lc(this._flags.mode)&&(this._flags.last_token.type!==B.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==B.EQUALS&&(this._options.preserve_newlines||!ct(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(t),this.print_newline()):this.handle_whitespace_and_comments(t),this._flags.do_block&&!this._flags.do_while)if(Nn(t,"while")){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&Nn(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===ye.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&ct(t,["case","default"])){this.print_newline(),this._flags.last_token.type!==B.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(t),this._flags.in_case=!0;return}if((this._flags.last_token.type===B.COMMA||this._flags.last_token.type===B.START_EXPR||this._flags.last_token.type===B.EQUALS||this._flags.last_token.type===B.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t)),Nn(t,"function")){(ke(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(ke(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===B.OPERATOR))&&!this._output.just_added_blankline()&&!t.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===B.RESERVED||this._flags.last_token.type===B.WORD?ct(this._flags.last_token,["get","set","new","export"])||ct(this._flags.last_token,Uh)?this._output.space_before_token=!0:Nn(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===B.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(lc(this._flags.mode)||Rs(this._flags.mode))||this.print_newline(),this.print_token(t),this._flags.last_word=t.text;return}var r="NONE";if(this._flags.last_token.type===B.END_BLOCK?this._previous_flags.inline_frame?r="SPACE":ct(t,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines?r="NEWLINE":(r="SPACE",this._output.space_before_token=!0):r="NEWLINE":this._flags.last_token.type===B.SEMICOLON&&this._flags.mode===ye.BlockStatement?r="NEWLINE":this._flags.last_token.type===B.SEMICOLON&&lc(this._flags.mode)?r="SPACE":this._flags.last_token.type===B.STRING?r="NEWLINE":this._flags.last_token.type===B.RESERVED||this._flags.last_token.type===B.WORD||this._flags.last_token.text==="*"&&(ke(this._last_last_text,["function","yield"])||this._flags.mode===ye.ObjectLiteral&&ke(this._last_last_text,["{",","]))?r="SPACE":this._flags.last_token.type===B.START_BLOCK?this._flags.inline_frame?r="SPACE":r="NEWLINE":this._flags.last_token.type===B.END_EXPR&&(this._output.space_before_token=!0,r="NEWLINE"),ct(t,sc)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?r="SPACE":r="NEWLINE"),ct(t,["else","catch","finally"]))if((!(this._flags.last_token.type===B.END_BLOCK&&this._previous_flags.mode===ye.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var n=this._output.current_line;n.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else r==="NEWLINE"?ct(this._flags.last_token,Yf)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&ct(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==B.END_EXPR?(this._flags.last_token.type!==B.START_EXPR||!ct(t,["var","let","const"]))&&this._flags.last_token.text!==":"&&(Nn(t,"if")&&Nn(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):ct(t,sc)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&Rs(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():r==="SPACE"&&(this._output.space_before_token=!0);t.previous&&(t.previous.type===B.WORD||t.previous.type===B.RESERVED)&&(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===B.RESERVED&&(t.text==="do"?this._flags.do_block=!0:t.text==="if"?this._flags.if_block=!0:t.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Nn(t,"from")&&(this._flags.import_block=!1))};$e.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();this._flags.mode===ye.Statement&&!(this._flags.if_block&&Nn(e,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)};$e.prototype.handle_string=function(t){t.text.startsWith("`")&&t.newlines===0&&t.whitespace_before===""&&(t.previous.text===")"||this._flags.last_token.type===B.WORD)||(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===B.RESERVED||this._flags.last_token.type===B.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===B.COMMA||this._flags.last_token.type===B.START_EXPR||this._flags.last_token.type===B.EQUALS||this._flags.last_token.type===B.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):t.text.startsWith("`")&&this._flags.last_token.type===B.END_EXPR&&(t.previous.text==="]"||t.previous.text===")")&&t.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(t)};$e.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0};$e.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(lc(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===ye.ObjectLiteral||this._flags.mode===ye.Statement&&this._flags.parent.mode===ye.ObjectLiteral?(this._flags.mode===ye.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)};$e.prototype.handle_operator=function(t){var e=t.text==="*"&&(ct(this._flags.last_token,["function","yield"])||ke(this._flags.last_token.type,[B.START_BLOCK,B.COMMA,B.END_BLOCK,B.SEMICOLON])),r=ke(t.text,["-","+"])&&(ke(this._flags.last_token.type,[B.START_BLOCK,B.START_EXPR,B.EQUALS,B.OPERATOR])||ke(this._flags.last_token.text,sc)||this._flags.last_token.text===",");if(!this.start_of_statement(t)){var n=!e;this.handle_whitespace_and_comments(t,n)}if(ct(this._flags.last_token,Yf)){this._output.space_before_token=!0,this.print_token(t);return}if(t.text==="*"&&this._flags.last_token.type===B.DOT){this.print_token(t);return}if(t.text==="::"){this.print_token(t);return}if(this._flags.last_token.type===B.OPERATOR&&ke(this._options.operator_position,OS)&&this.allow_wrap_or_preserved_newline(t),t.text===":"&&this._flags.in_case){this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==B.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0;return}var i=!0,s=!0,a=!1;if(t.text===":"?this._flags.ternary_depth===0?i=!1:(this._flags.ternary_depth-=1,a=!0):t.text==="?"&&(this._flags.ternary_depth+=1),!r&&!e&&this._options.preserve_newlines&&ke(t.text,ac)){var o=t.text===":",l=o&&a,c=o&&!a;switch(this._options.operator_position){case oc.before_newline:this._output.space_before_token=!c,this.print_token(t),(!o||l)&&this.allow_wrap_or_preserved_newline(t),this._output.space_before_token=!0;return;case oc.after_newline:this._output.space_before_token=!0,!o||l?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),this._output.space_before_token=!0;return;case oc.preserve_newline:c||this.allow_wrap_or_preserved_newline(t),i=!(this._output.just_added_newline()||c),this._output.space_before_token=i,this.print_token(t),this._output.space_before_token=!0;return}}if(e){this.allow_wrap_or_preserved_newline(t),i=!1;var u=this._tokens.peek();s=u&&ke(u.type,[B.WORD,B.RESERVED])}else t.text==="..."?(this.allow_wrap_or_preserved_newline(t),i=this._flags.last_token.type===B.START_BLOCK,s=!1):(ke(t.text,["--","++","!","~"])||r)&&((this._flags.last_token.type===B.COMMA||this._flags.last_token.type===B.START_EXPR)&&this.allow_wrap_or_preserved_newline(t),i=!1,s=!1,t.newlines&&(t.text==="--"||t.text==="++")&&this.print_newline(!1,!0),this._flags.last_token.text===";"&&lc(this._flags.mode)&&(i=!0),this._flags.last_token.type===B.RESERVED?i=!0:this._flags.last_token.type===B.END_EXPR?i=!(this._flags.last_token.text==="]"&&(t.text==="--"||t.text==="++")):this._flags.last_token.type===B.OPERATOR&&(i=ke(t.text,["--","-","++","+"])&&ke(this._flags.last_token.text,["--","-","++","+"]),ke(t.text,["+","-"])&&ke(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode===ye.BlockStatement&&!this._flags.inline_frame||this._flags.mode===ye.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline());this._output.space_before_token=this._output.space_before_token||i,this.print_token(t),this._output.space_before_token=s};$e.prototype.handle_block_comment=function(t,e){if(this._output.raw){this._output.add_raw_token(t),t.directives&&t.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(t.directives){this.print_newline(!1,e),this.print_token(t),t.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!Hf.newline.test(t.text)&&!t.newlines){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0;return}else this.print_block_commment(t,e)};$e.prototype.print_block_commment=function(t,e){var r=vF(t.text),n,i=!1,s=!1,a=t.whitespace_before,o=a.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(r[0]),this.print_newline(!1,e),r.length>1){for(r=r.slice(1),i=PF(r,"*"),s=IF(r,a),i&&(this._flags.alignment=1),n=0;n<r.length;n++)i?(this.print_token_line_indentation(t),this._output.add_token(bF(r[n]))):s&&r[n]?(this.print_token_line_indentation(t),this._output.add_token(r[n].substring(o))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,e);this._flags.alignment=0}};$e.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)};$e.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),ct(this._flags.last_token,Yf)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)};$e.prototype.handle_unknown=function(t,e){this.print_token(t),t.text[t.text.length-1]===`
`&&this.print_newline(!1,e)};$e.prototype.handle_eof=function(t){for(;this._flags.mode===ye.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)};LS.exports.Beautifier=$e});var MS=$((xie,Gh)=>{"use strict";var SF=kS().Beautifier,CF=Dh().Options;function RF(t,e){var r=new SF(t,e);return r.beautify()}Gh.exports=RF;Gh.exports.defaultOptions=function(){return new CF}});var Wh=$((Eie,qS)=>{"use strict";var FS=jf().Options;function VS(t){FS.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var n=0;n<r.length;n++)r[n]!=="expand"?this.brace_style="collapse":this.brace_style=r[n]}VS.prototype=new FS;qS.exports.Options=VS});var GS=$((wie,US)=>{"use strict";var AF=Wh().Options,xF=qf().Output,EF=Uf().InputScanner,wF=Gf().Directives,BS=new wF(/\/\*/,/\*\//),jS=/\r\n|[\r\n]/,OF=/\r\n|[\r\n]/g,Kf=/\s/,DF=/(?:\s|\n)+/g,LF=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,kF=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Yi(t,e){this._source_text=t||"",this._options=new AF(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}Yi.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,this._ch==="\\")e+=this._input.next();else if(t.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return e};Yi.prototype.eatWhitespace=function(t){for(var e=Kf.test(this._input.peek()),r=0;Kf.test(this._input.peek());)this._ch=this._input.next(),t&&this._ch===`
`&&(r===0||r<this._options.max_preserve_newlines)&&(r++,this._output.add_new_line(!0));return e};Yi.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,r=this._input.peek(e);r;){if(r==="{")return!0;if(r==="(")t+=1;else if(r===")"){if(t===0)return!1;t-=1}else if(r===";"||r==="}")return!1;e++,r=this._input.peek(e)}return!1};Yi.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)};Yi.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)};Yi.prototype.indent=function(){this._indentLevel++};Yi.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--};Yi.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;e==="auto"&&(e=`
`,t&&jS.test(t||"")&&(e=t.match(jS)[0])),t=t.replace(OF,`
`);var r=t.match(/^[\t ]*/)[0];this._output=new xF(this._options,r),this._input=new EF(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var n=0,i=!1,s=!1,a=!1,o=!1,l=!1,c=this._ch,u,f,m;u=this._input.read(DF),f=u!=="",m=c,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),c=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var p=this._input.read(LF),d=BS.get_directives(p);d&&d.ignore==="start"&&(p+=BS.readIgnored(this._input)),this.print_string(p),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(kF)),this.eatWhitespace(!0);else if(this._ch==="@")if(this.preserveSingleSpace(f),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var _=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);_.match(/[ :]$/)&&(_=this.eatString(": ").replace(/\s$/,""),this.print_string(_),this._output.space_before_token=!0),_=_.replace(/\s$/,""),_==="extend"?o=!0:_==="import"&&(l=!0),_ in this.NESTED_AT_RULE?(this._nestedLevel+=1,_ in this.CONDITIONAL_GROUP_RULE&&(a=!0)):!i&&n===0&&_.indexOf(":")!==-1&&(s=!0,this.indent())}else this._ch==="#"&&this._input.peek()==="{"?(this.preserveSingleSpace(f),this.print_string(this._ch+this.eatString("}"))):this._ch==="{"?(s&&(s=!1,this.outdent()),a?(a=!1,i=this._indentLevel>=this._nestedLevel):i=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&i&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):this._ch==="}"?(this.outdent(),this._output.add_new_line(),m==="{"&&this._output.trim(!0),l=!1,o=!1,s&&(this.outdent(),s=!1),this.print_string(this._ch),i=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0)):this._ch===":"?(i||a)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!o&&n===0?(this.print_string(":"),s||(s=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):this._ch==='"'||this._ch==="'"?(this.preserveSingleSpace(f),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):this._ch===";"?n===0?(s&&(this.outdent(),s=!1),o=!1,l=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):this._ch==="("?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),n++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),n&&(n--,this.outdent()))):(this.preserveSingleSpace(f),this.print_string(this._ch),this.eatWhitespace(),n++,this.indent()):this._ch===")"?(n&&(n--,this.outdent()),this.print_string(this._ch)):this._ch===","?(this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&!s&&n===0&&!l?this._output.add_new_line():this._output.space_before_token=!0):(this._ch===">"||this._ch==="+"||this._ch==="~")&&!s&&n===0?this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Kf.test(this._ch)&&(this._ch="")):this._ch==="]"?this.print_string(this._ch):this._ch==="["?(this.preserveSingleSpace(f),this.print_string(this._ch)):this._ch==="="?(this.eatWhitespace(),this.print_string("="),Kf.test(this._ch)&&(this._ch="")):this._ch==="!"&&!this._input.lookBack("\\")?(this.print_string(" "),this.print_string(this._ch)):(this.preserveSingleSpace(f),this.print_string(this._ch));var P=this._output.get_code(e);return P};US.exports.Beautifier=Yi});var WS=$((Oie,Hh)=>{"use strict";var MF=GS().Beautifier,FF=Wh().Options;function VF(t,e){var r=new MF(t,e);return r.beautify()}Hh.exports=VF;Hh.exports.defaultOptions=function(){return new FF}});var Yh=$((Die,KS)=>{"use strict";var HS=jf().Options;function YS(t){HS.call(this,t,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}YS.prototype=new HS;KS.exports.Options=YS});var zh=$((Lie,$h)=>{"use strict";var $S=rc().Tokenizer,Kh=rc().TOKEN,qF=Gf().Directives,BF=qh().TemplatablePattern,jF=ec().Pattern,xt={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Kh.START,RAW:Kh.RAW,EOF:Kh.EOF},zS=new qF(/<\!--/,/-->/),_r=function(t,e){$S.call(this,t,e),this._current_tag_name="";var r=new BF(this._input).read_options(this._options),n=new jF(this._input);if(this.__patterns={word:r.until(/[\n\r\t <]/),single_quote:r.until_after(/'/),double_quote:r.until_after(/"/),attribute:r.until(/[\n\r\t =>]|\/>/),element_name:r.until(/[\n\r\t >\/]/),handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),handlebars_open:n.until(/[\n\r\t }]/),handlebars_raw_close:n.until(/}}/),comment:n.starting_with(/<!--/).until_after(/-->/),cdata:n.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:n.starting_with(/<!\[/).until_after(/]>/),processing:n.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var i=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=n.matching(i).until_after(i)}};_r.prototype=new $S;_r.prototype._is_comment=function(t){return!1};_r.prototype._is_opening=function(t){return t.type===xt.TAG_OPEN};_r.prototype._is_closing=function(t,e){return t.type===xt.TAG_CLOSE&&e&&((t.text===">"||t.text==="/>")&&e.text[0]==="<"||t.text==="}}"&&e.text[0]==="{"&&e.text[1]==="{")};_r.prototype._reset=function(){this._current_tag_name=""};_r.prototype._get_next_token=function(t,e){var r=null;this._readWhitespace();var n=this._input.peek();return n===null?this._create_token(xt.EOF,""):(r=r||this._read_open_handlebars(n,e),r=r||this._read_attribute(n,t,e),r=r||this._read_close(n,e),r=r||this._read_raw_content(n,t,e),r=r||this._read_content_word(n),r=r||this._read_comment_or_cdata(n),r=r||this._read_processing(n),r=r||this._read_open(n,e),r=r||this._create_token(xt.UNKNOWN,this._input.next()),r)};_r.prototype._read_comment_or_cdata=function(t){var e=null,r=null,n=null;if(t==="<"){var i=this._input.peek(1);i==="!"&&(r=this.__patterns.comment.read(),r?(n=zS.get_directives(r),n&&n.ignore==="start"&&(r+=zS.readIgnored(this._input))):r=this.__patterns.cdata.read()),r&&(e=this._create_token(xt.COMMENT,r),e.directives=n)}return e};_r.prototype._read_processing=function(t){var e=null,r=null,n=null;if(t==="<"){var i=this._input.peek(1);(i==="!"||i==="?")&&(r=this.__patterns.conditional_comment.read(),r=r||this.__patterns.processing.read()),r&&(e=this._create_token(xt.COMMENT,r),e.directives=n)}return e};_r.prototype._read_open=function(t,e){var r=null,n=null;return e||t==="<"&&(r=this._input.next(),this._input.peek()==="/"&&(r+=this._input.next()),r+=this.__patterns.element_name.read(),n=this._create_token(xt.TAG_OPEN,r)),n};_r.prototype._read_open_handlebars=function(t,e){var r=null,n=null;return e||this._options.indent_handlebars&&t==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(r=this.__patterns.handlebars_comment.read(),r=r||this.__patterns.handlebars.read(),n=this._create_token(xt.COMMENT,r)):(r=this.__patterns.handlebars_open.read(),n=this._create_token(xt.TAG_OPEN,r))),n};_r.prototype._read_close=function(t,e){var r=null,n=null;return e&&(e.text[0]==="<"&&(t===">"||t==="/"&&this._input.peek(1)===">")?(r=this._input.next(),t==="/"&&(r+=this._input.next()),n=this._create_token(xt.TAG_CLOSE,r)):e.text[0]==="{"&&t==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),n=this._create_token(xt.TAG_CLOSE,"}}"))),n};_r.prototype._read_attribute=function(t,e,r){var n=null,i="";if(r&&r.text[0]==="<")if(t==="=")n=this._create_token(xt.EQUALS,this._input.next());else if(t==='"'||t==="'"){var s=this._input.next();t==='"'?s+=this.__patterns.double_quote.read():s+=this.__patterns.single_quote.read(),n=this._create_token(xt.VALUE,s)}else i=this.__patterns.attribute.read(),i&&(e.type===xt.EQUALS?n=this._create_token(xt.VALUE,i):n=this._create_token(xt.ATTRIBUTE,i));return n};_r.prototype._is_content_unformatted=function(t){return this._options.void_elements.indexOf(t)===-1&&(this._options.content_unformatted.indexOf(t)!==-1||this._options.unformatted.indexOf(t)!==-1)};_r.prototype._read_raw_content=function(t,e,r){var n="";if(r&&r.text[0]==="{")n=this.__patterns.handlebars_raw_close.read();else if(e.type===xt.TAG_CLOSE&&e.opened.text[0]==="<"&&e.text[0]!=="/"){var i=e.opened.text.substr(1).toLowerCase();if(i==="script"||i==="style"){var s=this._read_comment_or_cdata(t);if(s)return s.type=xt.TEXT,s;n=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(i)&&(n=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig")))}return n?this._create_token(xt.TEXT,n):null};_r.prototype._read_content_word=function(t){var e="";if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(xt.TEXT,e)};$h.exports.Tokenizer=_r;$h.exports.TOKEN=xt});var ZS=$((kie,JS)=>{"use strict";var UF=Yh().Options,GF=qf().Output,WF=zh().Tokenizer,rt=zh().TOKEN,XS=/\r\n|[\r\n]/,HF=/\r\n|[\r\n]/g,vn=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new GF(t,e)};vn.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)};vn.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e};vn.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()};vn.prototype.add_raw_token=function(t){this._output.add_raw_token(t)};vn.prototype.print_preserved_newlines=function(t){var e=0;t.type!==rt.TEXT&&t.previous.type!==rt.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var r=0;r<e;r++)this.print_newline(r>0);return e!==0};vn.prototype.traverse_whitespace=function(t){return t.whitespace_before||t.newlines?(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0):!1};vn.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};vn.prototype.print_newline=function(t){this._output.add_new_line(t)};vn.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))};vn.prototype.indent=function(){this.indent_level++};vn.prototype.get_full_indent=function(t){return t=this.indent_level+(t||0),t<1?"":this._output.get_indent_string(t)};var YF=function(t){for(var e=null,r=t.next;r.type!==rt.EOF&&t.closed!==r;){if(r.type===rt.ATTRIBUTE&&r.text==="type"){r.next&&r.next.type===rt.EQUALS&&r.next.next&&r.next.next.type===rt.VALUE&&(e=r.next.next.text);break}r=r.next}return e},KF=function(t,e){var r=null,n=null;return e.closed?(t==="script"?r="text/javascript":t==="style"&&(r="text/css"),r=YF(e)||r,r.search("text/css")>-1?n="css":r.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?n="javascript":r.search(/(text|application|dojo)\/(x-)?(html)/)>-1?n="html":r.search(/test\/null/)>-1&&(n="null"),n):null};function cc(t,e){return e.indexOf(t)!==-1}function $F(t,e,r){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=r||0,this.parser_token=e||null}function ga(t){this._printer=t,this._current_frame=null}ga.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};ga.prototype.record_tag=function(t){var e=new $F(this._current_frame,t,this._printer.indent_level);this._current_frame=e};ga.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e};ga.prototype._get_frame=function(t,e){for(var r=this._current_frame;r&&t.indexOf(r.tag)===-1;){if(e&&e.indexOf(r.tag)!==-1){r=null;break}r=r.parent}return r};ga.prototype.try_pop=function(t,e){var r=this._get_frame([t],e);return this._try_pop_frame(r)};ga.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)};function Pn(t,e,r,n){this._source_text=t||"",e=e||{},this._js_beautify=r,this._css_beautify=n,this._tag_stack=null;var i=new UF(e,"html");this._options=i,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,"force".length)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,"preserve".length)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Pn.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;this._options.eol==="auto"&&(e=`
`,t&&XS.test(t)&&(e=t.match(XS)[0])),t=t.replace(HF,`
`);var r=t.match(/^[\t ]*/)[0],n={text:"",type:""},i=new QS,s=new vn(this._options,r),a=new WF(t,this._options).tokenize();this._tag_stack=new ga(s);for(var o=null,l=a.next();l.type!==rt.EOF;)l.type===rt.TAG_OPEN||l.type===rt.COMMENT?(o=this._handle_tag_open(s,l,i,n),i=o):l.type===rt.ATTRIBUTE||l.type===rt.EQUALS||l.type===rt.VALUE||l.type===rt.TEXT&&!i.tag_complete?o=this._handle_inside_tag(s,l,i,a):l.type===rt.TAG_CLOSE?o=this._handle_tag_close(s,l,i):l.type===rt.TEXT?o=this._handle_text(s,l,i):s.add_raw_token(l),n=o,l=a.next();var c=s._output.get_code(e);return c};Pn.prototype._handle_tag_close=function(t,e,r){var n={text:e.text,type:e.type};return t.alignment_size=0,r.tag_complete=!0,t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),r.is_unformatted?t.add_raw_token(e):(r.tag_start_char==="<"&&(t.set_space_before_token(e.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&r.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),r.indent_content&&!(r.is_unformatted||r.is_content_unformatted)&&(t.indent(),r.indent_content=!1),!r.is_inline_element&&!(r.is_unformatted||r.is_content_unformatted)&&t.set_wrap_point(),n};Pn.prototype._handle_inside_tag=function(t,e,r,n){var i=r.has_wrapped_attrs,s={text:e.text,type:e.type};if(t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),r.is_unformatted)t.add_raw_token(e);else if(r.tag_start_char==="{"&&e.type===rt.TEXT)t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e);else{if(e.type===rt.ATTRIBUTE?(t.set_space_before_token(!0),r.attr_count+=1):(e.type===rt.EQUALS||e.type===rt.VALUE&&e.previous.type===rt.EQUALS)&&t.set_space_before_token(!1),e.type===rt.ATTRIBUTE&&r.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),i=i||e.newlines!==0),this._is_wrap_attributes_force)){var a=r.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&r.attr_count===1){var o=!0,l=0,c;do{if(c=n.peek(l),c.type===rt.ATTRIBUTE){o=!1;break}l+=1}while(l<4&&c.type!==rt.EOF&&c.type!==rt.TAG_CLOSE);a=!o}a&&(t.print_newline(!1),i=!0)}t.print_token(e),i=i||t.previous_token_wrapped(),r.has_wrapped_attrs=i}return s};Pn.prototype._handle_text=function(t,e,r){var n={text:e.text,type:"TK_CONTENT"};return r.custom_beautifier_name?this._print_custom_beatifier_text(t,e,r):r.is_unformatted||r.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),n};Pn.prototype._print_custom_beatifier_text=function(t,e,r){var n=this;if(e.text!==""){var i=e.text,s,a=1,o="",l="";r.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?s=this._js_beautify:r.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?s=this._css_beautify:r.custom_beautifier_name==="html"&&(s=function(d,_){var P=new Pn(d,_,n._js_beautify,n._css_beautify);return P.beautify()}),this._options.indent_scripts==="keep"?a=0:this._options.indent_scripts==="separate"&&(a=-t.indent_level);var c=t.get_full_indent(a);if(i=i.replace(/\n[ \t]*$/,""),r.custom_beautifier_name!=="html"&&i[0]==="<"&&i.match(/^(<!--|<!\[CDATA\[)/)){var u=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(i);if(!u){t.add_raw_token(e);return}o=c+u[1]+`
`,i=u[4],u[5]&&(l=c+u[5]),i=i.replace(/\n[ \t]*$/,""),(u[2]||u[3].indexOf(`
`)!==-1)&&(u=u[3].match(/[ \t]+$/),u&&(e.whitespace_before=u[0]))}if(i)if(s){var f=function(){this.eol=`
`};f.prototype=this._options.raw_options;var m=new f;i=s(c+i,m)}else{var p=e.whitespace_before;p&&(i=i.replace(new RegExp(`
(`+p+")?","g"),`
`)),i=c+i.replace(/\n/g,`
`+c)}o&&(i?i=o+i+`
`+l:i=o+l),t.print_newline(!1),i&&(e.text=i,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}};Pn.prototype._handle_tag_open=function(t,e,r,n){var i=this._get_tag_open_token(e);return(r.is_unformatted||r.is_content_unformatted)&&!r.is_empty_element&&e.type===rt.TAG_OPEN&&e.text.indexOf("</")===0?(t.add_raw_token(e),i.start_tag_token=this._tag_stack.try_pop(i.tag_name)):(t.traverse_whitespace(e),this._set_tag_position(t,e,i,r,n),i.is_inline_element||t.set_wrap_point(),t.print_token(e)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(i.alignment_size=e.text.length+1),!i.tag_complete&&!i.is_unformatted&&(t.alignment_size=i.alignment_size),i};var QS=function(t,e){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!e)this.tag_complete=!0;else{var r;this.tag_start_char=e.text[0],this.text=e.text,this.tag_start_char==="<"?(r=e.text.match(/^<([^\s>]*)/),this.tag_check=r?r[1]:""):(r=e.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=r?r[1]:"",e.text==="{{#>"&&this.tag_check===">"&&e.next!==null&&(this.tag_check=e.next.text)),this.tag_check=this.tag_check.toLowerCase(),e.type===rt.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&e.closed.text==="/>",this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))}};Pn.prototype._get_tag_open_token=function(t){var e=new QS(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||cc(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&cc(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&cc(e.tag_check,this._options.content_unformatted),e.is_inline_element=cc(e.tag_name,this._options.inline)||e.tag_start_char==="{",e};Pn.prototype._set_tag_position=function(t,e,r,n,i){if(r.is_empty_element||(r.is_end_tag?r.start_tag_token=this._tag_stack.try_pop(r.tag_name):(this._do_optional_end_element(r)&&(r.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(r),(r.tag_name==="script"||r.tag_name==="style")&&!(r.is_unformatted||r.is_content_unformatted)&&(r.custom_beautifier_name=KF(r.tag_check,e)))),cc(r.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),r.is_empty_element){if(r.tag_start_char==="{"&&r.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),r.indent_content=!0;var s=t.current_line_has_match(/{{#if/);s||t.print_newline(!1)}r.tag_name==="!--"&&i.type===rt.TAG_CLOSE&&n.is_end_tag&&r.text.indexOf(`
`)===-1||(r.is_inline_element||r.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,r))}else if(r.is_end_tag){var a=!1;a=r.start_tag_token&&r.start_tag_token.multiline_content,a=a||!r.is_inline_element&&!(n.is_inline_element||n.is_unformatted)&&!(i.type===rt.TAG_CLOSE&&r.start_tag_token===n)&&i.type!=="TK_CONTENT",(r.is_content_unformatted||r.is_unformatted)&&(a=!1),a&&t.print_newline(!1)}else r.indent_content=!r.custom_beautifier_name,r.tag_start_char==="<"&&(r.tag_name==="html"?r.indent_content=this._options.indent_inner_html:r.tag_name==="head"?r.indent_content=this._options.indent_head_inner_html:r.tag_name==="body"&&(r.indent_content=this._options.indent_body_inner_html)),!(r.is_inline_element||r.is_unformatted)&&(i.type!=="TK_CONTENT"||r.is_content_unformatted)&&t.print_newline(!1),this._calcluate_parent_multiline(t,r)};Pn.prototype._calcluate_parent_multiline=function(t,e){e.parent&&t._output.just_added_newline()&&!((e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element)&&(e.parent.multiline_content=!0)};var zF=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],XF=["a","audio","del","ins","map","noscript","video"];Pn.prototype._do_optional_end_element=function(t){var e=null;if(!(t.is_empty_element||!t.is_start_tag||!t.parent)){if(t.tag_name==="body")e=e||this._tag_stack.try_pop("head");else if(t.tag_name==="li")e=e||this._tag_stack.try_pop("li",["ol","ul"]);else if(t.tag_name==="dd"||t.tag_name==="dt")e=e||this._tag_stack.try_pop("dt",["dl"]),e=e||this._tag_stack.try_pop("dd",["dl"]);else if(t.parent.tag_name==="p"&&zF.indexOf(t.tag_name)!==-1){var r=t.parent.parent;(!r||XF.indexOf(r.tag_name)===-1)&&(e=e||this._tag_stack.try_pop("p"))}else t.tag_name==="rp"||t.tag_name==="rt"?(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]),e=e||this._tag_stack.try_pop("rp",["ruby","rtc"])):t.tag_name==="optgroup"?e=e||this._tag_stack.try_pop("optgroup",["select"]):t.tag_name==="option"?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):t.tag_name==="colgroup"?e=e||this._tag_stack.try_pop("caption",["table"]):t.tag_name==="thead"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"])):t.tag_name==="tbody"||t.tag_name==="tfoot"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("thead",["table"]),e=e||this._tag_stack.try_pop("tbody",["table"])):t.tag_name==="tr"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(t.tag_name==="th"||t.tag_name==="td")&&(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),e=e||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return t.parent=this._tag_stack.get_parser_token(),e}};JS.exports.Beautifier=Pn});var eC=$((Mie,Xh)=>{"use strict";var QF=ZS().Beautifier,JF=Yh().Options;function ZF(t,e,r,n){var i=new QF(t,e,r,n);return i.beautify()}Xh.exports=ZF;Xh.exports.defaultOptions=function(){return new JF}});var sC=$((Fie,$f)=>{"use strict";var tC=MS(),rC=WS(),nC=eC();function iC(t,e,r,n){return r=r||tC,n=n||rC,nC(t,e,r,n)}iC.defaultOptions=nC.defaultOptions;$f.exports.js=tC;$f.exports.css=rC;$f.exports.html=iC});var lC=$((Vie,oC)=>{"use strict";function aC(t,e,r){var n=function(i,s){return t.js_beautify(i,s)};return n.js=t.js_beautify,n.css=e.css_beautify,n.html=r.html_beautify,n.js_beautify=t.js_beautify,n.css_beautify=e.css_beautify,n.html_beautify=r.html_beautify,n}typeof define=="function"&&define.amd?define(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(t,e,r){return aC(t,e,r)}):function(t){var e=sC();e.js_beautify=e.js,e.css_beautify=e.css,e.html_beautify=e.html,t.exports=aC(e,e,e)}(oC)});var QC=$(XC=>{XC.debounce=function(t,e,r){var n,i,s;e===void 0&&(e=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,l=r.maxWait,c=Date.now(),u=[];function f(){if(l!==void 0){var p=Date.now()-c;if(p+e>=l)return l-p}return e}var m=function(){var p=[].slice.call(arguments),d=this;return new Promise(function(_,P){var h=a&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,c=Date.now(),!a){var g=t.apply(d,p);o&&o(g),u.forEach(function(N){return(0,N.resolve)(g)}),u=[]}},f()),h){var y=t.apply(d,p);return o&&o(y),_(y)}u.push({resolve:_,reject:P})})};return m.cancel=function(p){s!==void 0&&clearTimeout(s),u.forEach(function(d){return(0,d.reject)(p)}),u=[]},m}});var RV={};cR(RV,{getAntlersSettings:()=>Gi,globalSettings:()=>Bi,requestEdits:()=>Ph});var JC=Q(require("fs")),ZC=Q(vg()),rr=Q(Yy());var Ms=class{constructor(){this.currentStructure=null;this.isReloading=!1;this.isDirtyState=!0}setActiveProject(e){this.currentStructure=e}getStructure(){return this.currentStructure}hasStructure(){return this.currentStructure!=null}setDirtyState(e){this.isDirtyState=e}reloadDetails(){this.isReloading||this.isDirtyState!=!1&&this.currentStructure!=null&&(this.isReloading=!0,this.currentStructure=this.currentStructure.reloadDetails(),this.isReloading=!1,this.isDirtyState=!1)}};Ms.instance=null;(typeof Ms.instance=="undefined"||Ms.instance==null)&&(Ms.instance=new Ms);var ue=Ms;var si=class{static registerDetails(e,r){this.documentDetails.set(e,r)}static hasDetails(e){return this.documentDetails.has(e)}};si.documentDetails=new Map;var hE={documentDescription:"",documentName:"",collectionInjections:[],blueprints:[],variableHelper:null,injectsParameters:[],varReferenceNames:new Map,formatterEnabled:!0},Ky="@name",$y="@description",zy="@desc",Xy="@entry",Qy="@collection",Jy="@blueprint",Zy="@var",eb="@set",tb="@param",rb="@param*",gE="@front",nb="@format";function ll(t,e){if(e==null||e.isComment==!1)return hE;let r=e.content.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`).map(d=>d.trim()),n=[],i=new Map,s="",a="",o=[],l=[],c="",u=null,f=!1,m=!0;for(let d=0;d<r.length;d++){let _=r[d];if(_.startsWith(Xy))o=o.concat(_.slice(Xy.length).split(",").map(P=>P.trim())),f=!1;else if(_.startsWith(Qy))o=o.concat(_.slice(Qy.length).split(",").map(P=>P.trim())),f=!1;else if(_.startsWith(Jy))l=l.concat(_.slice(Jy.length).split(",").map(P=>P.trim())),f=!1;else if(_.startsWith(Ky))s=_.slice(Ky.length).trim(),f=!1;else if(_.startsWith($y))a=_.slice($y.length).trim(),f=!0;else if(_.startsWith(zy))a=_.slice(zy.length).trim(),f=!0;else if(_.startsWith(Zy))c=_.slice(Zy.length).trim(),f=!1;else if(_.startsWith(eb))c="@page "+_.slice(eb.length).trim(),f=!1;else if(_.startsWith(tb)){let P=tb.length,h=!1;_.startsWith(rb)&&(P=rb.length,h=!0);let g=_.slice(P).trim().split(" ");if(g.length>0)if(g[0]==gE&&g.length>=4){g.shift();let N=g.shift(),S=g.shift(),V=g.join(" ");n.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:V,expectsTypes:["*"],isDynamic:!0,isRequired:h,name:S}),i.set(S,N)}else{let N=g.shift(),S=g.join(" ");n.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:S,expectsTypes:["*"],isDynamic:!0,isRequired:h,name:N})}}else _.startsWith(nb)?_.slice(nb.length).trim().toLowerCase()=="true"?m=!0:m=!1:f&&(a+=`
`+_.trim())}if(c.length>0){let d=c.split(" ");if(d.length==2){let _=d[0],P=d[1];if(P.includes(".")){let h=P.split(".");if(h.length==2){let y=h[0],g=h[1];u={variableName:_,collectionName:y,fieldHandle:g,setHandle:""}}else if(h.length==3){let y=h[0],g=h[1],N=h[2];u={variableName:_,collectionName:y,fieldHandle:g,setHandle:N}}}else u={variableName:_,setHandle:"",collectionName:"",fieldHandle:P}}}if(t.trim().length>0&&ue.instance!=null&&ue.instance.hasStructure()){let d=ue.instance.getStructure().findView(t);d!=null&&(d.injectsParameters=n,d.varReferenceNames=i)}let p={documentName:s,documentDescription:a,collectionInjections:o,blueprints:l,variableHelper:u,injectsParameters:n,varReferenceNames:i,formatterEnabled:m};return t.trim().length>0&&e.startPosition!=null&&(e.startPosition.line<=1||e.index<=1)&&si.registerDetails(t,p),p}var _E=["markdown","text","textarea","slug","button_group","code","color","date","form","link","structures","select","taxonomies","terms","template","time","video","users","user_groups","user_roles"],yE=["array","assets","bard","blueprints","collections","entries","list","grid","replicator","structures_multiple","sites","select_multiple","form_multiple","table","tags","terms_multiple","taxonomies_multiple","users_multiple","checkboxes","select_multiple","yaml","user_groups_multiple","user_roles_multiple"],bE=["integer","range"],TE=["toggle"];function jc(t){return _E.includes(t)?"string":yE.includes(t)?"array":bE.includes(t)?"number":TE.includes(t)?"boolean":t}var Fs=class{constructor(){this.partialReferences=new Map;this.cacheReferences=new Map;this.removesPageScope=new Map}clearAllReferences(e){this.clearPartialReferences(e),this.clearCacheReferences(e)}registerPartialReferences(e,r){this.partialReferences.has(e)==!1&&this.partialReferences.set(e,[]),this.partialReferences.set(e,r)}registerCacheReferences(e,r){this.cacheReferences.has(e)==!1&&this.cacheReferences.set(e,[]),this.cacheReferences.set(e,r)}clearPartialReferences(e){this.partialReferences.has(e)&&this.partialReferences.set(e,[])}clearRemovesPageScope(e){this.removesPageScope.has(e)&&this.removesPageScope.delete(e)}pageScopeDisabled(e){return this.removesPageScope.has(e)}clearCacheReferences(e){this.cacheReferences.has(e)&&this.cacheReferences.set(e,[])}setRemovesPageScope(e,r){this.removesPageScope.set(e,r)}getPartialReferences(e){return this.partialReferences.has(e)==!1?[]:this.partialReferences.get(e)}getCacheReferencnes(e){return this.cacheReferences.has(e)==!1?[]:this.cacheReferences.get(e)}hasPartialReferences(e){return this.partialReferences.has(e)}hasCacheReferences(e){return this.cacheReferences.has(e)}};Fs.instance=null;(typeof Fs.instance=="undefined"||Fs.instance==null)&&(Fs.instance=new Fs);var On=Fs;var Bt=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(e){let r=new Bt;return r.offset=this.offset+e,r.index=this.index+e,r.line=this.line,r.char=this.char+e,r}isBefore(e){return e==null?!1:e.line>this.line||e.line==this.line&&this.offset<e.offset}isWithin(e,r,n=0){return e==null||r==null?!1:this.index>=e.index&&this.index<=r.index+n}isWithinRange(e){return e==null?!1:e.start!=null&&e.end!=null?this.isWithin(e.start,e.end):!1}};var td=class{constructor(){this.start=null;this.end=null}},cl=td;cl.Empty=new td;function ib(t,e){let r=e.copy(),n=e.copy();return n.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"group",introducedBy:t}),n.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"key",introducedBy:t}),n.addScopeList("items",r),e.addScopeList("groups",n),e}function sb(t,e){let r=e.copy();return e.addScopeList("items",r),e}var ab=[{name:"key_by",acceptsType:["array"],returnsType:["array"],description:"Re-keys the array or collection using the provided field name.",docLink:null,parameters:[{name:"field",description:"The field to re-key the array or collection by."}],canBeParameter:!0,isDeprecated:!1},{name:"as",acceptsType:["array"],returnsType:["array"],description:"Alias the array variable with a key.",docLink:"https://statamic.dev/modifiers/as",parameters:[{name:"alias",description:"The alias name."}],canBeParameter:!0,isDeprecated:!1},{name:"ampersand_list",acceptsType:["array"],returnsType:["string"],description:"Converts the array into a comma delimited string, with an ampersand before the last item.",docLink:"https://statamic.dev/modifiers/ampersand_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse",acceptsType:["array"],returnsType:["array"],description:"Collapses an array of arrays into a single, flat, array.",docLink:"https://statamic.dev/modifiers/collapse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"contains",acceptsType:["array","string"],returnsType:["boolean"],description:"Tests if the value contains another value.",docLink:"https://statamic.dev/modifiers/contains",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"count",acceptsType:["array"],returnsType:["number"],description:"Returns the number of items in the array.",docLink:"https://statamic.dev/modifiers/count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dl",acceptsType:["array"],returnsType:["string"],description:"Turns an associative array into an HTML definition list.",docLink:"https://statamic.dev/modifiers/dl",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],description:"Breaks a string into an array on a given delimiter.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The delimiter to break the string apart on."}],canBeParameter:!0,isDeprecated:!1},{name:"flatten",acceptsType:["array"],returnsType:["array"],description:"Flattens a multi-dimensional array.",docLink:"https://statamic.dev/modifiers/flatten",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"flip",acceptsType:["array"],returnsType:["array"],description:"Swaps the array keys with their values.",docLink:"https://statamic.dev/modifiers/flip",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"group_by",acceptsType:["array"],returnsType:["array"],description:"Groups the array items by the given key.",docLink:"https://statamic.dev/modifiers/group_by",parameters:[{name:"key",description:"The key to group by."}],canBeParameter:!0,augmentScope:ib,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_empty",acceptsType:["array"],returnsType:["boolean"],description:"Tests if the array is empty.",docLink:"https://statamic.dev/modifiers/is_empty",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"join",acceptsType:["array"],returnsType:["string"],description:"Turn an array into a string by gluing together all the data.",docLink:"https://statamic.dev/modifiers/join",parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"joinplode",acceptsType:["array"],returnsType:["string"],description:"Turn an array into a string by gluing together all the data.",docLink:null,parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"limit",acceptsType:["array"],returnsType:["array"],description:"Limits the number of items returned in the array",docLink:"https://statamic.dev/modifiers/limit",parameters:[{name:"count",description:"The maximum number of items to return."}],canBeParameter:!0,isDeprecated:!1},{name:"list",acceptsType:["array"],returnsType:["string"],description:"Converts the array into a comma-separated string.",docLink:"https://statamic.dev/modifiers/list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"offset",acceptsType:["array"],returnsType:["array"],description:"Offsets the items returned in the array.",docLink:"https://statamic.dev/modifiers/offset",parameters:[{name:"offset",description:"The one-based index to start retrieving items."}],canBeParameter:!0,isDeprecated:!1},{name:"ol",acceptsType:["array"],returnsType:["string"],description:"Turns the array into an HTML ordered list.",docLink:"https://statamic.dev/modifiers/ol",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"option_list",acceptsType:["array"],returnsType:["string"],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/option_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"pluck",acceptsType:["array"],returnsType:["array"],description:"Plucks a value from a collection of items.",parameters:[{name:"value",description:"The value to pluck from the array or collection."}],canBeParameter:!0,docLink:null,isDeprecated:!1},{name:"pad",acceptsType:["array"],returnsType:["array"],description:"Pads the array to a specified length with the given value.",docLink:"https://statamic.dev/modifiers/pad",parameters:[{name:"length",description:"The desired length of the array."},{name:"value",description:"The value to pad the array with."}],canBeParameter:!0,isDeprecated:!1},{name:"piped",acceptsType:["array"],returnsType:["string"],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/piped",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sentence_list",acceptsType:["array"],returnsType:["string"],description:'Turns the array into a comma-delimited list, with the word "and" before the last item.',docLink:"https://statamic.dev/modifiers/sentence_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"shuffle",acceptsType:["array"],returnsType:["array"],description:"Randomizes the order of array elements.",docLink:"https://statamic.dev/modifiers/shuffle",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sort",acceptsType:["array"],returnsType:["array"],description:"Sorts the array by a key in ascending or descending order.",docLink:"https://statamic.dev/modifiers/sort",parameters:[{name:"key",description:"The key to sort by."},{name:"order",description:"The sort direction. `asc` or `desc`."}],canBeParameter:!0,isDeprecated:!1},{name:"sum",acceptsType:["array"],returnsType:["number"],description:"Returns the sum of all items in the array.",docLink:"https://statamic.dev/modifiers/sum",parameters:[{name:"key",description:"The value to sum."}],canBeParameter:!1,isDeprecated:!1},{name:"ul",acceptsType:["array"],returnsType:["string"],description:"Turns the array into an HTML unordered list.",docLink:"https://statamic.dev/modifiers/ul",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"unique",acceptsType:["array"],returnsType:["array"],description:"Returns all unique items in the array.",docLink:"https://statamic.dev/modifiers/unique",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"where",acceptsType:["array"],returnsType:["array"],description:"Filters the array by a given key and value.",docLink:"https://statamic.dev/modifiers/where",parameters:[{name:"key",description:"The property to filter by."},{name:"value",description:"The value to compare to."}],canBeParameter:!0,isDeprecated:!1},{name:"split",acceptsType:["array"],returnsType:["array"],description:"Splits an array into smaller arrays with the provided size.",canBeParameter:!0,docLink:"",parameters:[{name:"size",description:"The size of each new array"}],augmentScope:sb,isDeprecated:!1},{name:"compact",acceptsType:["string"],returnsType:["array"],description:"Accepts a comma-delimited list of variable names and return an array with their values.",canBeParameter:!0,docLink:"",parameters:[{name:"variables",description:"A comma-delimited list of variable names."}],isDeprecated:!1}];var ob=[{name:"background_position",acceptsType:["string"],returnsType:["string"],description:"Converts an asset focal point into a background-position CSS property.",docLink:"https://statamic.dev/modifiers/background_position",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"image",acceptsType:["string"],returnsType:["string"],description:"Generates an HTML image element with the variable's value as the src.",docLink:"https://statamic.dev/modifiers/image",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"output",acceptsType:["string"],returnsType:["string"],description:"Returns the string output of an Asset file's contents.",docLink:"https://statamic.dev/modifiers/output",parameters:[],canBeParameter:!1,isDeprecated:!1}];var lb=[{name:"contains_all",acceptsType:["string"],returnsType:["boolean"],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_all",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"contains_any",acceptsType:["string"],returnsType:["boolean"],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_any",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"ends_with",acceptsType:["string"],returnsType:["boolean"],description:"Tests if a string ends with another string.",docLink:"https://statamic.dev/modifiers/ends_with",parameters:[{name:"value",description:"The value to check against."}],canBeParameter:!1,isDeprecated:!1},{name:"has_lower_case",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string contains any lowercase characters.",docLink:"https://statamic.dev/modifiers/has_lower_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"has_upper_case",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string contains any uppercase characters.",docLink:"https://statamic.dev/modifiers/has_upper_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_after",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the string contains only alphanumeric characters.",docLink:"https://statamic.dev/modifiers/is_after",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_alphanumeric",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string contains only alphanumeric characters.",docLink:"https://statamic.dev/modifiers/is_alphanumeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_before",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if a date is before another date.",docLink:"https://statamic.dev/modifiers/is_before",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_between",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if a date is between two other dates.",docLink:"https://statamic.dev/modifiers/is_between",parameters:[{name:"start_date",description:"The start date to compare."},{name:"end_date",description:"The end date to compare."}],canBeParameter:!1,isDeprecated:!1},{name:"is_blank",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string contains only whitespace characters.",docLink:"https://statamic.dev/modifiers/is_blank",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_future",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is in the future.",docLink:"https://statamic.dev/modifiers/is_future",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_json",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string is valid JSON.",docLink:"https://statamic.dev/modifiers/is_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_leap_year",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is a leap year.",docLink:"https://statamic.dev/modifiers/is_leap_year",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_numeric",acceptsType:["string","number"],returnsType:["boolean"],description:"Tests if the value is a number or numeric string.",docLink:"https://statamic.dev/modifiers/is_numeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_past",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is in the past.",docLink:"https://statamic.dev/modifiers/is_past",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_today",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is today.",docLink:"https://statamic.dev/modifiers/is_today",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_uppercase",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string contains only uppercase characters.",docLink:"https://statamic.dev/modifiers/is_uppercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],description:"Tests if the string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekday",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is a week day.",docLink:"https://statamic.dev/modifiers/is_weekday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekend",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is a weekend day.",docLink:"https://statamic.dev/modifiers/is_weekend",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_yesterday",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is yesterday.",docLink:"https://statamic.dev/modifiers/is_yesterday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_tomorrow",acceptsType:["string","date"],returnsType:["boolean"],description:"Tests if the date is tomorrow.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"starts_with",acceptsType:["string"],returnsType:["boolean"],description:"Tests if a value starts with the provided value.",docLink:"https://statamic.dev/modifiers/starts_with",parameters:[{name:"value",description:"The value to test for."}],canBeParameter:!1,isDeprecated:!1}];var cb=[{name:"days_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of days since a given date.",docLink:"https://statamic.dev/modifiers/days_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"format_translated",acceptsType:["string","date"],returnsType:["string","date"],description:"Returns a formatted Carbon datetime/string.",docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format",acceptsType:["string","date"],returnsType:["string","date"],description:"Formats the date using the provided format using PHP's [date variables](https://www.php.net/date).",docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format_localized",acceptsType:["string","date"],returnsType:["string","date"],description:"Formats the date using server's locale, using PHP's [strftime format variables](https://www.php.net/strftime).",docLink:"https://statamic.dev/modifiers/format_localized",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!0,getDeprecatedMessage(){return"The format_localized modifier is deprecated. Alternatives, such as the iso_format modifier, should be used instead."}},{name:"hours_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of hours since the date.",docLink:"https://statamic.dev/modifiers/hours_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"iso_format",acceptsType:["string","date"],returnsType:["string","date"],description:"Formats the date using an ISO format.",docLink:"https://statamic.dev/modifiers/iso_format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!1,isDeprecated:!1},{name:"minutes_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of minutes since the date.",docLink:"https://statamic.dev/modifiers/minutes_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"modify_date",acceptsType:["string","date"],returnsType:["string","date"],description:"Alters the date by incrementing or decrementing it in a format accepted by PHP's [strtotime](https://www.php.net/strtotime) function.",docLink:"https://statamic.dev/modifiers/modify_date",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"months_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of months since the date.",docLink:"https://statamic.dev/modifiers/months_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"relative",acceptsType:["string","date"],returnsType:["string"],description:"Returns a human readable date difference.",docLink:"https://statamic.dev/modifiers/relative",parameters:[{name:"add_ago",description:"Whether to add the relative suffix words at the end of the string."}],canBeParameter:!1,isDeprecated:!1},{name:"seconds_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of seconds since the date.",docLink:"https://statamic.dev/modifiers/seconds_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"timezone",acceptsType:["string","date"],returnsType:["string","date"],description:"Applies a timezone to the date.",docLink:"https://statamic.dev/modifiers/timezone",parameters:[{name:"timezone",description:"The timezone to apply."}],canBeParameter:!1,isDeprecated:!1},{name:"weeks_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of weeks since the date.",docLink:"https://statamic.dev/modifiers/weeks_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"years_ago",acceptsType:["string","date"],returnsType:["number"],description:"Returns the number of years since the date.",docLink:"https://statamic.dev/modifiers/years_ago",parameters:[],canBeParameter:!1,isDeprecated:!1}];var ub=[{name:"chunk",acceptsType:["array"],returnsType:["array"],description:"Breaks the array or collection into smaller arrays of a given size.",docLink:"https://statamic.dev/modifiers/chunk",parameters:[{name:"chunk_size",description:"The maximum length of each new chunk."}],canBeParameter:!0,isDeprecated:!1},{name:"favicon",acceptsType:["string"],returnsType:["string"],description:"Generates a favicon HTML meta tag for the given value.",docLink:"https://statamic.dev/modifiers/favicon",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"first",acceptsType:["string","array"],returnsType:["*"],description:"Returns the specified number of characters from the beginning of the string.",docLink:"https://statamic.dev/modifiers/first",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"last",acceptsType:["string","array"],returnsType:["*"],description:"Returns the specified number of characters from the end of the string.",docLink:"https://statamic.dev/modifiers/last",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"link",acceptsType:["string"],returnsType:["string"],description:"Generates an HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/link",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"mailto",acceptsType:["string"],returnsType:["string"],description:"Generates a mailto HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/mailto",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"markdown",acceptsType:["string"],returnsType:["string"],description:"Parses the value as Markdown and returns the HTML.",docLink:"https://statamic.dev/modifiers/markdown",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"nl2br",acceptsType:["string"],returnsType:["string"],description:"Replaces line breaks with HTML `<br>` tags.",docLink:"https://statamic.dev/modifiers/nl2br",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate",acceptsType:["string"],returnsType:["string"],description:"Modifies the input string by replacing it with special characters, making it harder for bots but remains readable to site visitors.",docLink:"https://statamic.dev/modifiers/obfuscate",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate_email",acceptsType:["string"],returnsType:["string"],description:"Obfuscates an email address with special HTML characters.",docLink:"https://statamic.dev/modifiers/obfuscate_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"strip_tags",acceptsType:["string"],returnsType:["string"],description:"Removes HTML tags from the string.",docLink:"https://statamic.dev/modifiers/strip_tags",parameters:[{name:"tags",description:"The HTML tag(s) to remove from the string."}],canBeParameter:!1,isDeprecated:!1},{name:"table",acceptsType:["array"],returnsType:["string"],description:"Turns a [Table FieldType](https://statamic.dev/fieldtypes/table) array into an HTML table.",docLink:"https://statamic.dev/modifiers/table",parameters:[{name:"content_markdown",description:"Whether to parse cell contents as Markdown."}],canBeParameter:!1,isDeprecated:!1},{name:"textile",acceptsType:["string"],returnsType:["string"],description:"Parses a string with [Textile](http://demo.textilewiki.com/theme-default/) and returns the HTML.",docLink:"https://statamic.dev/modifiers/textile",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"wrap",acceptsType:["string"],returnsType:["string"],description:"Wraps a string with a given HTML tag.",docLink:"https://statamic.dev/modifiers/wrap",parameters:[{name:"expression",description:"The HTML tag or Emmet-style expression to wrap the value in."}],canBeParameter:!1,isDeprecated:!1}];var fb=[{name:"add",acceptsType:["number"],returnsType:["number"],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!0,isDeprecated:!1},{name:"+",acceptsType:["number"],returnsType:["number"],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!1,isDeprecated:!1},{name:"ceil",acceptsType:["number"],returnsType:["number"],description:"Rounds the value to the next whole number.",docLink:"https://statamic.dev/modifiers/ceil",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"divide",acceptsType:["number"],returnsType:["number"],description:"Divides two values.",docLink:"https://statamic.dev/modifiers/divide",parameters:[{name:"value",description:"The value to divide."}],canBeParameter:!0,isDeprecated:!1},{name:"floor",acceptsType:["number"],returnsType:["number"],description:"Rounds a number down to the next whole number.",docLink:"https://statamic.dev/modifiers/floor",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"format_number",acceptsType:["number"],returnsType:["string"],description:"Formats a number.",docLink:"https://statamic.dev/modifiers/format_number",parameters:[{name:"precision",description:"Number of decimal places before rounding."},{name:"decimal_separator",description:"The decimal separator (defaults to `.`)."},{name:"thousands_separator",description:"The thousands separator (default `,`)."}],canBeParameter:!0,isDeprecated:!1},{name:"mode",acceptsType:["number"],returnsType:["number"],description:"",docLink:"",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"multiply",acceptsType:["number"],returnsType:["number"],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!0,isDeprecated:!1},{name:"*",acceptsType:["number"],returnsType:["number"],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!1,isDeprecated:!1},{name:"round",acceptsType:["number"],returnsType:["number"],description:"Rounds a number to a specified precision.",docLink:"https://statamic.dev/modifiers/round",parameters:[{name:"precision",description:"The number of digits after the decimal point."}],canBeParameter:!0,isDeprecated:!1},{name:"subtract",acceptsType:["number"],returnsType:["number"],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!0,isDeprecated:!1},{name:"-",acceptsType:["number"],returnsType:["number"],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!1,isDeprecated:!1}];var pb=[{name:"partial",acceptsType:["*"],returnsType:["*view*"],description:"Injects data into a partial and renders it.",docLink:"https://statamic.dev/modifiers/partial",parameters:[{name:"partial",description:"The name of the partial."}],canBeParameter:!1,isDeprecated:!1},{name:"macro",acceptsType:["*"],returnsType:["*"],description:"Runs a pre-configured macro on the data.",docLink:"https://statamic.dev/modifiers/macro",parameters:[{name:"macro",description:"The macro name."}],canBeParameter:!1,isDeprecated:!1},{name:"url",acceptsType:["string","*"],returnsType:["string"],description:"Locates the URL of an asset, page, entry, or taxonomy term based on the variable contents.",docLink:"https://statamic.dev/modifiers/url",parameters:[],canBeParameter:!1,isDeprecated:!1}];var db=[{name:"ascii",acceptsType:["string"],returnsType:["string"],description:"Replaces all non-ASCII characters with their closest ASCII counterparts.",docLink:"https://statamic.dev/modifiers/ascii",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"at",acceptsType:["string"],returnsType:["string"],description:"Returns the character at a given zero-based position.",docLink:"https://statamic.dev/modifiers/at",parameters:[{name:"position",description:"The zero-based position to retrieve a character from."}],canBeParameter:!0,isDeprecated:!1},{name:"backspace",acceptsType:["string"],returnsType:["string"],description:"Removes a specified number of characters from the end of a string.",docLink:"https://statamic.dev/modifiers/backspace",parameters:[{name:"character_count",description:"The number of characters to remove from the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"camelize",acceptsType:["string"],returnsType:["string"],description:"Converts the string into camelCase.",docLink:"https://statamic.dev/modifiers/camelize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"cdata",acceptsType:["string"],returnsType:["string"],description:"Wraps the string in CDATA XML tags.",docLink:"https://statamic.dev/modifiers/cdata",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse_whitespace",acceptsType:["string"],returnsType:["string"],description:"Trims a string and replaces consecutive whitespace characters with a single space.",docLink:"https://statamic.dev/modifiers/collapse_whitespace",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"count_substring",acceptsType:["string"],returnsType:["number"],description:"Counts the number of occurrences of a term within the string.",docLink:"https://statamic.dev/modifiers/count_substring",parameters:[{name:"term",description:"The sub-string to search for"}],canBeParameter:!0,isDeprecated:!1},{name:"dashify",acceptsType:["string"],returnsType:["string"],description:"Returns a lower-cased and trimmed string, separated by dashes.",docLink:"https://statamic.dev/modifiers/dashify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"deslugify",acceptsType:["string"],returnsType:["string"],description:"Replaces all hyphens and underscores with spaces.",docLink:"https://statamic.dev/modifiers/deslugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"embed_url",acceptsType:["string"],returnsType:["string"],description:"Converts a YouTube or Viemo link into their embed URLs.",docLink:"https://statamic.dev/modifiers/embed_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trackable_embed_url",acceptsType:["string"],returnsType:["string"],description:"Get the embed URL when given a youtube or vimeo link that's direct to the page.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"ensure_left",acceptsType:["string"],returnsType:["string"],description:"Ensures that the string begins with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_left",parameters:[{name:"start_string",description:"The value that should be at the start of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"ensure_right",acceptsType:["string"],returnsType:["string"],description:"Ensures that the string ends with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_right",parameters:[{name:"end_string",description:"The value that should be at the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"entities",acceptsType:["string"],returnsType:["string"],description:"Encode a string with HTML entities.",docLink:"https://statamic.dev/modifiers/entities",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"excerpt",acceptsType:["string"],returnsType:["string"],description:"Breaks a string at a given marker.",docLink:"https://statamic.dev/modifiers/excerpt",parameters:[{name:"marker",description:"The string to break by."}],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],description:"Breaks a string into an array of strings.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The string to split the larger string by."}],canBeParameter:!0,isDeprecated:!1},{name:"gravatar",acceptsType:["string"],returnsType:["string"],description:"Converts an email string to a Gravatar image URL.",docLink:"https://statamic.dev/modifiers/gravatar",parameters:[{name:"image size",description:"The desired image size."}],canBeParameter:!0,isDeprecated:!1},{name:"insert",acceptsType:["string"],returnsType:["string"],description:"Inserts a string at the position provided.",docLink:"https://statamic.dev/modifiers/insert",parameters:[{name:"value",description:"The value to insert."},{name:"position",description:"The zero based position to insert the text at."}],canBeParameter:!0,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],description:"Returns true if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_embeddable",acceptsType:["string"],returnsType:["boolean"],description:"Checks to see if a video URL is embeddable.",docLink:"https://statamic.dev/modifiers/is_embeddable",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_lowercase",acceptsType:["string"],returnsType:["boolean"],description:"Returns true if the string contains only lowercase characters.",docLink:"https://statamic.dev/modifiers/is_lowercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],description:"Returns true if a string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lcfirst",acceptsType:["string"],returnsType:["string"],description:"Converts the first character of the value to lower case.",docLink:"https://statamic.dev/modifiers/lcfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"length",acceptsType:["string"],returnsType:["number"],description:"Returns the number of items in an array or number of characters in a string.",docLink:"https://statamic.dev/modifiers/length",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lower",acceptsType:["string"],returnsType:["string"],description:"Converts all characters to lowercase.",docLink:"https://statamic.dev/modifiers/lower",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"md5",acceptsType:["string"],returnsType:["string"],description:"Creates an MD5 hash of the variable.",docLink:"https://statamic.dev/modifiers/md5",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"rawurlencode",acceptsType:["string"],returnsType:["string"],description:"URL-encode a variable according to RFC-3986.",docLink:"https://statamic.dev/modifiers/rawurlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"read_time",acceptsType:["string"],returnsType:["string"],description:"Returns an estimated read time, in minutes.",docLink:"https://statamic.dev/modifiers/read_time",parameters:[{name:"words per minute",description:"The words per minute to use as an estimate."}],canBeParameter:!0,isDeprecated:!1},{name:"regex_replace",acceptsType:["string"],returnsType:["string"],description:"Replaces all regex matches with a string.",docLink:"https://statamic.dev/modifiers/regex_replace",parameters:[{name:"pattern",description:"The regex pattern."},{name:"replace",description:"The replacement value."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_left",acceptsType:["string"],returnsType:["string"],description:"Ensures that the string never begins with a specified string.",docLink:"https://statamic.dev/modifiers/remove_left/",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_right",acceptsType:["string"],returnsType:["string"],description:"Ensures that a string never ends with a specified string.",docLink:"https://statamic.dev/modifiers/remove_right",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"replace",acceptsType:["string"],returnsType:["string"],description:"Replaces all occurrences of a string with a different value.",docLink:"https://statamic.dev/modifiers/replace",parameters:[{name:"needle",description:"The string to search for."},{name:"value",description:"The value to replace all occurrences with."}],canBeParameter:!0,isDeprecated:!1},{name:"reverse",acceptsType:["string","array"],returnsType:["string","array"],description:"Reverses all characters in a string, or all items in an array.",docLink:"https://statamic.dev/modifiers/reverse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"safe_truncate",acceptsType:["string"],returnsType:["string"],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/safe_truncate",parameters:[{name:"length",description:"The desired string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"sanitize",acceptsType:["string"],returnsType:["string"],description:"Converts special characters to HTML entities.",docLink:"https://statamic.dev/modifiers/sanitize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"segment",acceptsType:["string"],returnsType:["string"],description:"Returns a segment by number from any valid URL or URI.",docLink:"https://statamic.dev/modifiers/segment",parameters:[{name:"segment",description:"The one-based segment to return."}],canBeParameter:!0,isDeprecated:!1},{name:"singular",acceptsType:["string"],returnsType:["string"],description:"Returns the singular form of an English word.",docLink:"https://statamic.dev/modifiers/singular",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"slugify",acceptsType:["string"],returnsType:["string"],description:"Converts the string into an URL slug.",docLink:"https://statamic.dev/modifiers/slugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"smartypants",acceptsType:["string"],returnsType:["string"],description:"Translates plain ASCII punctuation characters into typographic punctuation HTML entities.",docLink:"https://statamic.dev/modifiers/smartypants",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"spaceless",acceptsType:["string"],returnsType:["string"],description:"Removes excess whitespace and line breaks from a string.",docLink:"https://statamic.dev/modifiers/spaceless",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"substr",acceptsType:["string"],returnsType:["string"],description:"Returns a portion of a string based on provided a start index, and optional length.",docLink:"https://statamic.dev/modifiers/substr",parameters:[{name:"start",description:"The 0-based index to start searching."},{name:"length",description:"An optional length for the string to find."}],canBeParameter:!1,isDeprecated:!1},{name:"surround",acceptsType:["string"],returnsType:["string"],description:"Surrounds a string with another string.",docLink:"https://statamic.dev/modifiers/surround",parameters:[{name:"value",description:"The value to surround the string with."}],canBeParameter:!1,isDeprecated:!1},{name:"swap_case",acceptsType:["string"],returnsType:["string"],description:"Returns a case swapped version of the string.",docLink:"https://statamic.dev/modifiers/swap_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"tidy",acceptsType:["string"],returnsType:["string"],description:"Returns a string with smart quotes, ellipsis characters, and dashes from Windows-1252 replaced by ASCII equivalents.",docLink:"https://statamic.dev/modifiers/tidy",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"title",acceptsType:["string"],returnsType:["string"],description:"Returns a Title Cased version of the string.",docLink:"https://statamic.dev/modifiers/title",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trim",acceptsType:["string"],returnsType:["string"],description:"Removes whitespace from the start and end of the string.",docLink:"https://statamic.dev/modifiers/trim",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"truncate",acceptsType:["string"],returnsType:["string"],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/truncate",parameters:[{name:"length",description:"The maximum string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"ucfirst",acceptsType:["string"],returnsType:["string"],description:"Upper cases the first character in the string.",docLink:"https://statamic.dev/modifiers/ucfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"underscored",acceptsType:["string"],returnsType:["string"],description:"Returns a lower-cased and trimmed version of the string, separated by underscores.",docLink:"https://statamic.dev/modifiers/underscored",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"upper",acceptsType:["string"],returnsType:["string"],description:"Transforms the string to uppercase.",docLink:"https://statamic.dev/modifiers/upper",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urldecode",acceptsType:["string"],returnsType:["string"],description:"URL-decodes the string.",docLink:"https://statamic.dev/modifiers/urldecode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urlencode",acceptsType:["string"],returnsType:["string"],description:"URL-encodes the string.",docLink:"https://statamic.dev/modifiers/urlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"widont",acceptsType:["string"],returnsType:["string"],description:"Attempts to prevent lines with single words.",docLink:"https://statamic.dev/modifiers/widont",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"word_count",acceptsType:["string"],returnsType:["number"],description:"Returns the number of words in the string.",docLink:"https://statamic.dev/modifiers/word_count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"add_slashes",acceptsType:["string"],returnsType:["string"],description:"Adds slashes before characters that need to be escaped.",docLink:"https://statamic.dev/modifiers/add_slashes",canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"antlers",acceptsType:["string"],returnsType:["string"],description:"Parses the provided value as Antlers, and returns the result",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_items",acceptsType:["string"],returnsType:["array"],description:"Converts a Bard value to a flat array of nodes and marks",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_text",acceptsType:["array","string"],returnsType:["string"],description:"Converts a Bard value to plain text (excluding sets)",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_html",acceptsType:["array","string"],returnsType:["string"],description:"Converts a Bard value to HTML (excluding sets)",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"mark",acceptsType:["string"],returnsType:["string"],description:"Wraps matched words and phrases in <mark> tags.",docLink:null,canBeParameter:!1,parameters:[{name:"search",description:"The search word or phrase to wrap in <mark> tags."}],isDeprecated:!1},{name:"regex_mark",acceptsType:["string"],returnsType:["string"],description:"Wraps matched words and phrases in <mark> tags using regular expressions.",docLink:null,canBeParameter:!1,parameters:[{name:"pattern",description:"The search pattern used to wrap content in <mark> tags."}],isDeprecated:!1}];var mb=[{name:"console_log",acceptsType:["*"],returnsType:["null"],description:"Displays variable data in the browser's JavaScript console.",docLink:"https://statamic.dev/modifiers/console_log",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"decode",acceptsType:["string"],returnsType:["string"],description:"Converts all HTML entities to their applicable character codes.",docLink:"https://statamic.dev/modifiers/decode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dump",acceptsType:["*"],returnsType:["null"],description:"Displays variable data in the browser.",docLink:"https://statamic.dev/modifiers/dump",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"full_urls",acceptsType:["string"],returnsType:["string"],description:"Replaces root-relative URLs with absolute URLs.",docLink:"https://statamic.dev/modifiers/full_urls",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"repeat",acceptsType:["string"],returnsType:["string"],description:"Repeats a value a given number of times.",docLink:"https://statamic.dev/modifiers/repeat",parameters:[{name:"repeat_count",description:"The number of times to repeat the value."}],canBeParameter:!0,isDeprecated:!1},{name:"to_spaces",acceptsType:["string"],returnsType:["string"],description:"Converts all tabs to spaces.",docLink:"https://statamic.dev/modifiers/to_spaces",parameters:[{name:"space_count",description:"The number of spaces to replace tabs with."}],canBeParameter:!1,isDeprecated:!1},{name:"to_tabs",acceptsType:["string"],returnsType:["string"],description:"Converts spaces to tabs.",docLink:"https://statamic.dev/modifiers/to_tabs",parameters:[{name:"space_count",description:"The number of spaces to convert to tabs."}],canBeParameter:!1,isDeprecated:!1},{name:"to_json",acceptsType:["*"],returnsType:["string"],description:"Converts the data to JSON.",docLink:"https://statamic.dev/modifiers/to_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"to_bool",acceptsType:["*"],returnsType:["boolean"],description:"Converst the data to a boolean",parameters:[],canBeParameter:!1,docLink:null,isDeprecated:!1}];var rs=class{constructor(){this.registeredModifiers=new Map;this.acceptTypedModifierReference=new Map;this.returnTypeModifierReference=new Map;this.macros=new Map;this.modifierNameCache=[]}reset(){this.modifierNameCache=[],this.registeredModifiers.clear(),this.acceptTypedModifierReference.clear(),this.returnTypeModifierReference.clear()}getRegisteredModifiers(){return this.registeredModifiers}resetMacros(){this.macros.clear()}loadCoreModifiers(){this.registerModifiers(ab),this.registerModifiers(ob),this.registerModifiers(lb),this.registerModifiers(cb),this.registerModifiers(ub),this.registerModifiers(fb),this.registerModifiers(mb),this.registerModifiers(db),this.registerModifiers(pb)}getModifierNames(){return this.modifierNameCache}registerMacro(e){this.macros.set(e.name,e)}registerMacros(e){for(let r=0;r<e.length;r++)this.registerMacro(e[r])}hasMacro(e){if(this.macros.has(e)){let r=this.macros.get(e);return!(typeof r=="undefined"||r===null)}return!1}getMacro(e){if(this.macros.has(e)){let r=this.macros.get(e);return typeof r=="undefined"||r===null?null:r}return null}getMacroManifestingType(e){let r=this.getMacro(e);return r==null?"":r.manifestsType}getRegisteredModifier(e){return this.registeredModifiers.has(e)?this.registeredModifiers.get(e):null}getModifiersForType(e){let r=jc(e);return this.acceptTypedModifierReference.has(r)?this.acceptTypedModifierReference.get(r):[]}getProbableReturnType(e,r){return e==null||e.returnsType.length==0?"":r&&e.returnsType.includes("array")?"array":e.returnsType[0]}registerModifiers(e){var r,n;for(let i=0;i<e.length;i++){let s=e[i];this.modifierNameCache.push(s.name);for(let a=0;a<s.acceptsType.length;a++){let o=s.acceptsType[a];this.acceptTypedModifierReference.has(o)==!1&&this.acceptTypedModifierReference.set(o,[]),(r=this.acceptTypedModifierReference.get(o))==null||r.push(s)}for(let a=0;a<s.returnsType.length;a++){let o=s.returnsType[a];this.returnTypeModifierReference.has(o)==!1&&this.returnTypeModifierReference.set(o,[]),(n=this.returnTypeModifierReference.get(o))==null||n.push(s)}this.registeredModifiers.set(e[i].name,e[i])}}registerModifier(e){let r=[];r.push(e),this.registerModifiers(r)}getModifier(e){if(this.registeredModifiers.has(e)==!1)return null;let r=this.registeredModifiers.get(e);return typeof r=="undefined"||r==null?null:r}hasModifier(e){if(!this.registeredModifiers.has(e))return!1;let r=this.registeredModifiers.get(e);return!(typeof r=="undefined"||r==null)}};rs.instance=null;(typeof rs.instance=="undefined"||rs.instance==null)&&(rs.instance=new rs,rs.instance.loadCoreModifiers());var Me=rs;var rd=class{constructor(e){this.parameterModifiers=[];this.hasMixedModifierStyles=!1;this.modifierNames=[];this.node=e}isPaired(){return this.node instanceof q?this.node.isPaired():!1}getModifierValue(e){var r;if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let n=0;n<this.node.modifierChain.modifierChain.length;n++){let i=this.node.modifierChain.modifierChain[n];if(((r=i.nameNode)==null?void 0:r.name)==e)return i.valueNodes.length>0?i.valueNodes[0].content:""}if(this.hasParameterModifiers())for(let n=0;n<this.parameterModifiers.length;n++){let i=this.parameterModifiers[n];if(i.name==e)return i.value}return null}getModifierRange(e){var r;if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let n=0;n<this.node.modifierChain.modifierChain.length;n++){let i=this.node.modifierChain.modifierChain[n];if(((r=i.nameNode)==null?void 0:r.name)==e)return i.valueNodes.length>0?{start:i.startPosition,end:i.endPosition}:null}if(this.hasParameterModifiers())for(let n=0;n<this.parameterModifiers.length;n++){let i=this.parameterModifiers[n];if(i.name==e&&i.namePosition!=null&&i.valuePosition!=null)return{start:i.namePosition.start,end:i.valuePosition.end}}return null}getLastManifestedModifierRuntimeType(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null){if(this.node.modifierChain.lastManifestedModifier.parameters.length>0&&this.node.modifierChain.lastManifestedModifier.modifier!=null&&Me.instance!=null){let e=this.node.modifierChain.lastManifestedModifier.modifier;return Me.instance.getProbableReturnType(e,this.isPaired())}return"*"}if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let r=0;r<e.length;r++)if(e[r].modifier!=null&&Me.instance!=null){let n=e[r].modifier;return Me.instance.getProbableReturnType(n,this.isPaired())}}return"*"}getLastManifestedModifierValue(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null)return this.node.modifierChain.lastManifestedModifier.parameters.length>0?this.node.modifierChain.lastManifestedModifier.parameters[0].value:"";if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let r=0;r<e.length;r++)if(e[r].modifier!=null)return e[r].value}return""}getLastManifestedModifier(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastModifier!=null)return this.node.modifierChain.lastModifier;if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let r=0;r<e.length;r++)if(e[r].modifier!=null)return e[r].modifier}return null}hasModifiers(){return this.node.modifierChain==null||this.node.modifierChain.modifierChain.length==0?this.parameterModifiers.length>0:!0}hasParameterModifiers(){return this.parameterModifiers.length>0}hasShorthandModifiers(){return this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0}hasModifier(e){return this.modifierNames.includes(e)}};function nd(t){let e=[];return t.forEach(r=>{r instanceof q?e.push(r):r instanceof Xe&&r.logicBranches.length>0&&r.logicBranches.forEach(n=>{if(n.head!=null){let i=n.head;i.originalNode!=null?e.push(i.originalNode):e.push(i)}})}),e}var NE=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("");function hb(t){return(typeof t=="number"||typeof t=="string"&&NE.indexOf(t.slice(-1))===-1)&&t!==""&&!isNaN(t)}var G=class{static normalizeLineEndings(e,r=`
`){return e.replace(/\r?\n/g,r)}static breakByNewLine(e){return e.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static split(e){return e.split("")}static substring(e,r,n){return e.substr(r,n)}static ctypeSpace(e){return(e==null?void 0:e.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(e){return(e==null?void 0:e.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(e){return(e==null?void 0:e.search(/^[\d]+$/g))!==-1}static ctypePunct(e){return(e==null?void 0:e.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(e,r="\\s"){return e.replace(new RegExp("^["+r+"]+"),"")}static trimRight(e,r="\\s"){return e.replace(new RegExp("["+r+"]+$"),"")}static isNumeric(e){return hb(e)}static substringCount(e,r){let n=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(e.match(new RegExp(n,"gi"))||[]).length}static getLastLine(e){let r=G.breakByNewLine(e);return r.length==0?"":r[r.length-1]}static getFirstLine(e){let r=G.breakByNewLine(e);return r.length==0?"":r[0]}};var id=class{constructor(e){this.node=e}findParentWithName(e){let r=this.node.getParser();return r==null?null:r.structure.findParentWithName(e,this.node)}};var _b=Q(Uc());var M=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null;this.actions=[];this.lsRange=null;this.data=null}hash(){var r,n,i,s;let e="";return this.node!=null&&(e=((n=(r=this.node.endPosition)==null?void 0:r.offset)!=null?n:0).toString()+"|"+((s=(i=this.node.startPosition)==null?void 0:i.offset)!=null?s:0).toString()+"|"),_b.Md5.hashStr(e+"|"+this.errorCode)}static makeSyntaxError(e,r,n,i){i==null&&(i=0);let s=new M;return s.errorCode=e,s.node=r,s.message=n,s.level=i,s}};var v=class{};v.TYPE_EXPECTING_OPERAND="ANTLR_001",v.TYPE_UNEXPECTED_END_OF_INPUT="ANTLR_002",v.TYPE_RUNTIME_TYPE_MISMATCH="ANTLR_003",v.TYPE_RUNTIME_DIVIDE_BY_ZERO="ANTLR_004",v.TYPE_RUNTIME_UNKNOWN_LANG_OPERATOR="ANTLR_005",v.TYPE_RUNTIME_UNEXPECTED_STACK_CONDITION="ANTLR_006",v.TYPE_RUNTIME_PARSE_VALUE_VIOLATION="ANTLR_007",v.TYPE_PARSE_UNCLOSED_CONDITIONAL="ANTLR_008",v.TYPE_PARSE_EMPTY_CONDITIONAL="ANTLR_009",v.TYPE_PARSE_UNPAIRED_CONDITIONAL="ANTLR_008",v.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE="ANTLR_009",v.TYPE_INCOMPLETE_ANTLERS_REGION="ANTLR_010",v.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION="ANTLR_011",v.TYPE_ILLEGAL_VARPATH_RIGHT="ANTLR_012",v.TYPE_ILLEGAL_DOTVARPATH_RIGHT="ANTLR_013",v.TYPE_ILLEGAL_VARPATH_SUBPATH_START="ANTLR_014",v.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT="ANTLR_015",v.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR="ANTLR_016",v.TYPE_ILLEGAL_VARIABLE_NAME="ANTLR_017",v.TYPE_UNSET_MODIFIER_DETAILS="ANTLR_018",v.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS="ANTLR_019",v.TYPE_MODIFIER_UNEXPECTED_VALUE="ANTLR_020",v.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST="ANTLR_021",v.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR="ANTLR_022",v.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH="ANTLR_023",v.TYPE_RECURSIVE_UNPAIRED_NODE="ANTLR_024",v.TYPE_RECURSIVE_NODE_INVALID_POSITION="ANTLR_025",v.TYPE_NO_PARSE_UNASSOCIATED="ANTLR_026",v.TYPE_RECURSIVE_NODE_UNASSOCIATED_PARENT="ANTLR_027",v.TYPE_LOGIC_GROUP_NO_END="ANTLR_028",v.TYPE_LOGIC_GROUP_NO_START="ANTLR_029",v.TYPE_UNEXPECTED_BRANCH_SEPARATOR="ANTLR_030",v.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE="ANTLR_031",v.TYPE_UNEXPECTED_MODIFIER_SEPARATOR="ANTLR_032",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS="ANTLR_033",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE="ANTLR_034",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER="ANTLR_035",v.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE="ANTLR_036",v.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS="ANTLR_037",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SEMANTIC_GROUP="ANTLR_038",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP="ANTLR_039",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP="ANTLR_040",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH="ANTLR_041",v.TYPE_UNEXPECTED_EOI_WHILE_EXITING_TERNARY_GROUP="ANTLR_042",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET="ANTLR_043",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION="ANTLR_044",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END="ANTLR_045",v.TYPE_RUNTIME_UNKNOWN_LIBRARY="ANTLR_046",v.TYPE_RUNTIME_LIBRARY_BAD_METHOD_CALL="ANTLR_047",v.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS="ANTLR_048",v.TYPE_UNEXPECTED_FACTORIAL_OPERAND="ANTLR_049",v.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR="ANTLR_050",v.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED="ANTLR_051",v.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT="ANTLR_052",v.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP="ANTLR_053",v.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT="ANTLR_054",v.TYPE_LIBRARY_CALL_NO_ARGS_PROVIDED="ANTLR_055",v.TYPE_LIBRARY_CALL_MISSING_REQUIRED_FORMAL_ARG="ANTLR_056",v.TYPE_LIBRARY_CALL_RUNTIME_TYPE_MISMATCH="ANTLR_057",v.TYPE_LIBRARY_CALL_UNEXPECTED_ARG_RESOLVE_FAULT="ANTLR_058",v.TYPE_LIBRARY_CALL_TOO_MANY_ARGUMENTS="ANTLR_059",v.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD="ANTLR_060",v.TYPE_INVALID_NAMED_ARG_IDENTIFIER="ANTLR_061",v.TYPE_LIBRARY_CALL_INVALID_ARGUMENT_NAME="ANTLR_062",v.TYPE_RUNTIME_ATTEMPT_TO_OVERWRITE_LOADED_LIBRARY="ANTLR_063",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP="ANTLR_064",v.TYPE_EXPECTING_ARGUMENT_GROUP="ANTLR_065",v.TYPE_RUNTIME_PROTECTED_LIBRARY_ACCESS_VIOLATION="ANTLR_066",v.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END="ANTLR_067",v.TYPE_UNEXPECTED_OPERATOR="ANTLR_068",v.TYPE_OPERATOR_INVALID_ON_RIGHT="ANTLR_069",v.TYPE_INVALID_ASSIGNMENT_LOOP_PAIR="ANTLR_070",v.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP="ANTLR_071",v.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND="ANTLR_072",v.TYPE_QUERY_UNSUPPORTED_VALUE_TYPE="ANTLR_073",v.TYPE_UNEXPECTED_RUNTIME_RESULT_FOR_ORDER_BY_CLAUSE="ANTLR_074",v.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP="ANTLR_075",v.TYPE_INVALID_ORDER_BY_NAME_VALUE="ANTLR_076",v.TYPE_INVALID_ORDER_BY_SORT_VALUE="ANTLR_077",v.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY="ANTLR_78",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY="ANTLR_079",v.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE="ANTLR_080",v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP="ANTLR_081",v.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP="ANTLR_082",v.TYPE_UNEXPECTED_SWITCH_START_VALUE="ANTLR_083",v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE="ANTLR_084",v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_SEMANTIC_VALUE="ANTLR_085",v.TYPE_SWITCH_DEFAULT_MUST_BE_LAST="ANTLR_086",v.TYPE_PARSER_INVALID_SWITCH_TOKEN="ANTLR_087",v.TYPE_ORDER_BY_INVALID_RETURN_TYPE="ANTLR_088",v.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED="ANTLR_089",v.TYPE_PLUCK_INTO_MISSING_VARIABLE_TARGET="ANTLR_090",v.TYPE_PLUCK_INTO_INVALID_VARIABLE_TARGET="ANTLR_091",v.TYPE_PLUCK_INTO_NO_PREDICATE="ANTLR_092",v.TYPE_PLUCK_INTO_INVALID_PREDICATE_VALUE="ANTLR_093",v.TYPE_PLUCK_INTO_EMPTY_LOGIC_GROUP="ANTLR_094",v.TYPE_PLUCK_INTO_INVALID_NUMBER_OF_TUPLE_VARIABLES="ANTLR_095",v.TYPE_PLUCK_INTO_UNKNOWN_ALIAS_VARNAME="ANTLR_096",v.TYPE_PLUCK_INTO_UNEXPECTED_EMPTY_T_LOGIC_GROUP="ANTLR_097",v.TYPE_PLUCK_INTO_REFERENCE_TYPE_DYNAMIC="ANTLR_098",v.TYPE_PLUCK_INTO_REFERENCE_AMBIGUOUS="ANTLR_099",v.TYPE_RUNTIME_ASSIGNMENT_TO_NON_VAR="ANTLR_100",v.TYPE_ARR_MAKE_MISSING_TARGET="ANTLR_101",v.TYPE_ARR_MAKE_UNEXPECTED_TYPE="ANTLR_102",v.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE="ANTLR_103",v.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE="ANTLR_104",v.TYPE_ARR_UNEXPECT_ARG_SEPARATOR="ANTLR_105",v.TYPE_ARR_KEY_PAIR_MISSING_KEY="ANTLR_106",v.RUNTIME_PROTECTED_VAR_ACCESS="ANTLR_107",v.RUNTIME_PROTECTED_TAG_ACCESS="ANTLR_108",v.RUNTIME_PROTECTED_MODIFIER_ACCESS="ANTLR_109",v.TYPE_INCOMPLETE_PHP_EVALUATION_REGION="ANTLR_110",v.RUNTIME_PHP_NODE_WHEN_PHP_DISABLED="ANTLR_111",v.RUNTIME_PHP_NODE_USER_CONTENT_TAG="ANTLR_112",v.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST="ANTLR_113",v.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST="ANTLR_114",v.TYPE_MISSING_BODY_TUPLE_LIST="ANTLR_115",v.TYPE_MISSING_NAMES_TUPLE_LIST="ANTLR_116",v.TYPE_VALUE_NAME_LENGTH_MISMATCH_TUPLE_LIST="ANTLR_117",v.TYPE_INVALID_TUPLE_LIST_NAME_TYPE="ANTLR_118",v.TYPE_INVALID_MANIFESTED_NAME_GROUP="ANTLR_119",v.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP="ANTLR_120",v.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE="ANTLR_121",v.TYPE_RUNTIME_BAD_METHOD_CALL="ANTLR_122",v.TYPE_METHOD_CALL_MISSING_ARG_GROUP="ANTLR_123",v.TYPE_INVALID_METHOD_CALL_ARG_GROUP="ANTLR_124",v.TYPE_METHOD_CALL_MISSING_METHOD="ANTLR_125",v.TYPE_MODIFIER_NOT_FOUND="ANTLR_126",v.TYPE_RUNTIME_GENERAL_FAULT="ANTLR_127",v.TYPE_MODIFIER_INCORRECT_VALUE_POSITION="ANTLR_128",v.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX="ANTLR_129",v.TYPE_RUNTIME_ATTEMPTING_TO_RENDER_OBJECT_AS_STRING="ANTLR_130",v.TYPE_UNPAIRED_CLOSING_TAG="ANTLR_131",v.PARSER_CANNOT_PARSE_PATH_RECURSIVE="ANTLR_200",v.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR="ANTLR_201",v.LINT_UNKNOWN_PARAMETER="ANTLR_500",v.LINT_GENERAL_INVALID_PARAMETER_CONTENTS="ANTLR_501",v.LINT_PARAMETER_CONTENT_INVALID_INTEGER="ANTLR_502",v.LINT_PARAMETER_CONTENT_INVALID_BOOLEAN="ANT LR_503",v.LINT_PAGINATE_INVALID_VALUE="ANTLR_504",v.LINT_DEBUG_DATA_EXPOSED="ANTLR_505",v.LINT_DOUBLE_COLON_IN_TAG_IDENTIFIER="ANTLR_506",v.LINT_MIXED_MODIFIERS="ANTLR_507",v.LINT_MODIFIER_UNEXPECTED_TYPE="ANTLR_508",v.LINT_REMOVE_RELATE_TAG="ANTLR_509",v.LINT_SET_PRODUCES_RUNTIME_ERROR="ANTLR_510",v.LINT_FRONT_MATTER_EMPTY_DOCUMENT="ANTLR_511",v.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH="ANTLR_512",v.LINT_INVALID_FRONT_MATTER="ANTLR_513",v.LINT_DUPLICATE_CODE="ANTLR_514",v.LINT_VERSION_NOT_COMPATIBLE="ANTLR_515",v.LINT_INTERLEAVED_TAG_PAIRS="ANTLR_516",v.LINT_MISSING_REQUIRED_PARAMETER="ANTLR_517",v.LINT_POSSIBLE_PARTIAL_RECURSION="ANTLR_518",v.LINT_URL_VARIABLE_WITHOUT_SANITIZE="ANTLR_519",v.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE="ANTLER_520",v.LINT_DEPRECATED_MODIFIER="ANTLER_521";var nt=class{static distance(e,r){return e.endPosition==null||r.startPosition==null?this.DistMax:r.startPosition.index-e.endPosition.index}static getTrueName(e){var r,n,i,s;return e.originalNode!=null?(n=(r=e.originalNode.name)==null?void 0:r.name)!=null?n:"":(s=(i=e.name)==null?void 0:i.name)!=null?s:""}static getSimpleVarName(e){return e.variableReference!=null&&e.variableReference.pathParts.length==1&&e.variableReference.pathParts[0]instanceof pr?e.variableReference.pathParts[0].name:""}static isVariableMatching(e,r){return e instanceof ae?e.name==r:!1}static mergeVarContentLeft(e,r,n){return n.mergeRefName=n.name,n.endPosition=r.endPosition,n.name=n.name+e,n}static mergeVarContentRight(e,r,n){return n.mergeRefName=n.name,n.startPosition=r.startPosition,n.name=e+n.name,n}static mergeVarRight(e,r){return r.mergeRefName=r.name,r.startPosition=e.startPosition,r.name=e.name+r.name,r}static getUnrefName(e){return G.trimLeft(e,":.")}};nt.DistMax=65e3;var ln=class{static isConditionalStructure(e){var n,i;if(e.isComment)return!1;let r=(i=(n=e.name)==null?void 0:n.name)!=null?i:"";return r=="if"||r=="elseif"||r=="else"}static requiresClose(e){var n,i;let r=(i=(n=e.name)==null?void 0:n.name)!=null?i:"";return r=="elseif"||r=="else"?e.isClosedBy==null:!(e.isClosingTag||e.isClosedBy!=null)}static getValidClosingPairs(e){return e=="if"||e=="elseif"?ln.conditionClosingPairs:[]}static findClosestStructurePair(e,r,n){var c,u,f,m,p,d,_,P;let i=[],s=e.length,a=new Map,o=null;i.push({node:r,index:n});for(let h=0;h<s;h+=1){let y=e[h];if(y instanceof q){let g=(u=(c=y.name)==null?void 0:c.name)!=null?u:"";if(y.isClosingTag&&g=="if"){a.set(h,h);continue}else if(g=="elseif"||g=="else"){a.set(h,h);continue}}}let l=a.size;for(;i.length>0;){let h=i.pop();if(h==null)continue;if(h.node._conditionParserAbandonPairing)break;let y=h.node,g=ln.getValidClosingPairs((m=(f=y.name)==null?void 0:f.name)!=null?m:""),N=h.index,S=!1;if(l>50&&o!=null){for(let[V,O]of a)if(V>N){N=V;break}}for(let V=N;V<s;V++){let O=e[V];if(O instanceof q&&ln.isConditionalStructure(O)){if(ln.requiresClose(O)){i.push(h),i.push({node:O,index:V+1}),S=!0;break}if(y.isClosedBy!=null)continue;let Y=(d=(p=O.name)==null?void 0:p.name)!=null?d:"",z=!1;if(O.ref==0&&(O.isClosingTag&&Y=="if"||g.includes(Y))&&(z=!0),O.refId==y.refId&&(z=!1),z){o=V,a.delete(V),y.isClosedBy=O,O.isOpenedBy=y,O.ref+=1,S=!0;break}}}if(!S&&y instanceof q){let V=(P=(_=y.name)==null?void 0:_.name)!=null?P:"";if((V=="elseif"||V=="else")&&y.isOpenedBy==null){let O='Unpaired "'+nt.getTrueName(y)+'" control structure.';y.isInterpolationNode&&(O+=" Tag pairs are not supported within Antlers tags."),y.pushError(M.makeSyntaxError(v.TYPE_PARSE_UNPAIRED_CONDITIONAL,y,O)),y._conditionParserAbandonPairing=!0}if(y.isClosedBy==null&&ln.requiresClose(y)){let O='Unclosed "'+nt.getTrueName(y)+'" control structure.';y.isInterpolationNode&&(O+=" Tag pairs are not supported within Antlers tags."),y.pushError(M.makeSyntaxError(v.TYPE_PARSE_UNCLOSED_CONDITIONAL,y,O)),y._conditionParserAbandonPairing=!0}}}}static pairConditionals(e){for(let r=0;r<e.length;r+=1){let n=e[r];n instanceof q&&ln.isConditionalStructure(n)&&ln.requiresClose(n)&&ln.findClosestStructurePair(e,n,r+1)}return e.forEach(r=>{var n,i;if(r instanceof q&&ln.isConditionalStructure(r)){let s=(i=(n=r.name)==null?void 0:n.name)!=null?i:"";if((s=="elseif"||s=="else")&&r.isOpenedBy==null){r.pushError(M.makeSyntaxError(v.TYPE_PARSE_UNPAIRED_CONDITIONAL,r,'Unpaired "'+nt.getTrueName(r)+'" control structure.'));return}if(r.isClosedBy==null&&ln.requiresClose(r)){r.pushError(M.makeSyntaxError(v.TYPE_PARSE_UNCLOSED_CONDITIONAL,r,"Unclosed "+nt.getTrueName(r)+" control structure."));return}}}),e}},Xt=ln;Xt.conditionClosingPairs=["elseif","else"];function cn(t,e){return e==null&&(e="s"),t.replace(new RegExp("^["+e+"]+"),"")}function It(t,e,r){return t.replace(new RegExp(e,"g"),r)}function Dn(t,e){return e==null&&(e="s"),t.replace(new RegExp("["+e+"]+$"),"")}function Ma(){return(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,"")}function yb(){return It(Ma(),"-","_")}var Gc=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=yb()}},ad=class{constructor(){this.startPosition=null;this.endPosition=null;this.content="";this.name=""}};function vE(t){let e=[],r=[];for(let n=0;n<t.length;n++){let i=t[n],s=i.refId;if(r.includes(s))break;e.push(i),r.push(s)}return e}var Z=class{constructor(){this.refId=null;this.index=0;this.parent=null;this.content="";this.rawLexContent="";this.sourceContent="";this.startPosition=null;this.endPosition=null;this.modifierChain=null;this.originalAbstractNode=null;this.positionContexts=[];this.addedContexts=new Map;this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.isInScriptTag=!1;this.isInStyleTag=!1;this.isVirtual=!0;this.isPartOfMethodChain=!1;this.isVirtualGroupMember=!1;this.isVirtualGroupOperatorResolve=!1;this.isSwitchGroupMember=!1;this.isListGroupMember=!1;this.producesVirtualStatementTerminator=!1;this.convertedToOperator=!1;this.scopeVariable=null;this.currentScope=null;this.manifestType="";this.scopeName=null;this.sourceType="";this.runtimeType=null;this.modifiers=new rd(this);this.prev=null;this.next=null;this.methodTarget=null;this.libraryTarget=null;this.antlersErrors=[];this.parser=null;this.refId=yb()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getContexts(){return this.positionContexts}addContext(e){this.addedContexts.has(e.refId)==!1&&(this.addedContexts.set(e.refId,!0),this.positionContexts.push(e))}getRange(){if(this.originalAbstractNode!=null)return this.originalAbstractNode.getRange();if(this.startPosition==null||this.endPosition==null)return cl.Empty;let e=new cl;return e.start=this.startPosition,e.end=this.endPosition,e}withParser(e){this.parser=e}getParser(){return this.parser}pushError(e){this.parent!=null&&this.parent.pushError(e),this.antlersErrors.push(e),this.parent==null&&this.parser!=null&&this.parser.pushError(e)}mergeErrors(e){e.forEach(r=>{r.node==null&&(r.node=this),this.antlersErrors.push(r)})}getErrors(){return this.antlersErrors}innerContent(){return this.content}rawContent(){return this.content}},od=class extends Z{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.documentText="";this.childDocument=null}getImmediateChildren(){return this.head==null?[]:this.head.getImmediateChildren()}},Xe=class extends Z{constructor(){super(...arguments);this.logicBranches=[];this.chain=[];this.nodeContent="";this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1}},q=class extends Z{constructor(){super(...arguments);this.isNodeAbanonded=!1;this.isComment=!1;this.isTagNode=!1;this.isConditionNode=!1;this.runtimeContent="";this.name=null;this.pathReference=null;this.isClosingTag=!1;this.isInterpolationNode=!1;this.isOpenedBy=null;this.isClosedBy=null;this.isSelfClosing=!1;this.children=[];this.runtimeNodes=[];this.parsedRuntimeNodes=[];this.hasParsedRuntimeNodes=!1;this.parameters=[];this.hasParameters=!1;this.contentOffset=null;this.cachedContent=null;this.cachedInnerContent=null;this.hasRecursiveNode=!1;this.recursiveReference=null;this.rawStart="";this.rawEnd="";this.originalNode=null;this.interpolationRegions=new Map;this.processedInterpolationRegions=new Map;this.hasProcessedInterpolationRegions=!1;this.ref=0;this.contentStartRelativeIndex=null;this.antlersNodeIndex=0;this.nameStartsOn=null;this.nameEndsOn=null;this.nameMethodPartStartsOn=null;this.documentText="";this.nodeContent="";this.childDocument=null;this.structure=new id(this);this.isInlineAntlers=!1;this.mustClose=!1;this.reference=null;this._conditionParserAbandonPairing=!1;this._isEndVirtual=!1}getOriginalContent(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.isClosedBy!=null?this.isClosedBy.startPosition==null||this.isClosedBy.endPosition==null?"":this.parser.getText(this.startPosition.index,this.isClosedBy.endPosition.index+1):this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getNodeDocumentText(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getImmediateChildren(){let e=[];for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n.parent==this){if(n==this.isClosedBy)break;e.push(n)}}return vE(e)}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n instanceof q&&n.refId==this.isClosedBy.refId)break;e.push(n)}return e}getInnerDocumentText(){if(this.startPosition==null||this.endPosition==null||this.parser==null)return"";if(this.isClosedBy==null)return this.getNodeDocumentText();let e=this.isClosedBy.startPosition;return e==null?"":this.parser.getText(this.endPosition.index+1,e.index)}nodeAtIndex(e){if(this.runtimeNodes.length==0)return null;for(let r=0;r<this.runtimeNodes.length;r++)if(this.runtimeNodes[r].index==e)return this.runtimeNodes[r];return null}getDepthCount(){if(this.parent==null)return 1;let e=this.parent,r=1;for(;e!=null;){if(r+=1,e.parent===e){e=null;break}e=e.parent}return r}isEmpty(){return this.content.trim().length==0}nameMatches(e){return this.name==null?!1:this.name.content==e}copyBasicDetails(){return this.copyBasicDetailsTo(new q)}copyBasicDetailsTo(e){return e.refId=this.refId,e.isComment=this.isComment,e.isTagNode=this.isTagNode,e.children=this.children,e.parent=this.parent,e.parameters=this.parameters,e.isClosingTag=this.isClosingTag,e.rawStart=this.rawStart,e.rawEnd=this.rawEnd,e.startPosition=this.startPosition,e.endPosition=this.endPosition,e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}id(){return this.refId}innerContent(){return this.cachedInnerContent==null&&(this.cachedInnerContent=this.content.replace('"','\\"')),this.cachedInnerContent}resetContentCache(){this.cachedContent=null,this.cachedInnerContent=null}hasMethodPart(){return this.name==null?!1:this.name.getMethodName()!=null}runtimeName(){return this.name==null?"":this.name.getCompoundTagName()}getTagName(){return this.name==null?"":this.name.name}getNameContent(){return this.name==null?"":this.name.content}getMethodNameValue(){if(this.name==null)return"";let e=this.name.getMethodName();return e!=null?e:""}methodIsEmptyOrMatches(e){return this.getMethodNameValue()==e}hasParameter(e){return this.findParameter(e)!=null}hasParameterWithValue(e,r){let n=this.findParameter(e);return n==null?!1:n.value==r}findParameterValue(e,r){let n=this.findParameter(e);return n==null?r:n.value}findParameterValueOrNull(e){let r=this.findParameter(e);return r==null?null:r.value}findParameter(e){if(this.parameters.length==0)return null;for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name==e)return this.parameters[r];return null}findAnyParameter(e){for(let r=0;r<e.length;r++){let n=this.findParameter(e[r]);if(n!=null)return n}return null}getContentRelativeStartIndex(){if(this.contentStartRelativeIndex==null){let e=this.content.split("");for(let r=0;r<e.length;r++)if(!G.ctypeSpace(e[r])){this.contentStartRelativeIndex=r;break}this.contentStartRelativeIndex==null&&(this.contentStartRelativeIndex=e.length),this.contentStartRelativeIndex+=this.rawStart.length}return this.contentStartRelativeIndex}getContentAfterName(){let e=0;return this.nameEndsOn!=null&&(e=this.nameEndsOn.char-this.rawStart.length-1),this.content.substring(e)}getContent(){if(this.cachedContent==null)if(this.isComment)this.cachedContent=this.content,this.contentOffset=this.startPosition;else if(this.isTagNode){let e=this.content;e=G.trimLeft(e);let r=0;if(this.name!=null&&(r=this.name.compound.length),this.parameters.length>0){let a=0,o=this.parameters[0];o.startPosition!=null&&(a=o.startPosition.index-1);let l=e,c=l.trimLeft(),u=l.length-c.length,f=r;e=e.substr(0,a)}let n=e.trimLeft(),i=e.length-n.length,s=r+i+2;if(this.parser!=null){let a=0;this.startPosition!=null&&(a=this.startPosition.offset),this.contentOffset==this.parser.positionFromOffset(a+s,0)}this.name!=null?this.name.name=="if"||this.name.name=="elseif"||this.name.name=="unless"||this.name.name=="elseunless"?(e=" "+e.trimLeft(),this.cachedContent=e.substr(this.name.compound.length+1)):this.cachedContent=e:this.cachedContent=e}else if(this.parameters.length>0){let e=this.parameters[0],r=0;e.startPosition!=null&&(r=e.startPosition.index-1),this.contentOffset=this.startPosition,this.cachedContent=this.content.substr(0,r)}else this.contentOffset=this.startPosition,this.cachedContent=this.content;return this.cachedContent}relativePositionFromOffset(e,r){var n,i;return this.parser==null?null:this.parser.positionFromOffset(((i=(n=this.contentOffset)==null?void 0:n.offset)!=null?i:0)+e,r)}getInterpolationNode(e){if(this.processedInterpolationRegions.has(e)){let r=this.processedInterpolationRegions.get(e);if(r.length>0&&r[0]instanceof q)return r[0]}return null}_lexerRelativeOffset(e,r=null){var a,o;let n=e;if(r!=null&&(n=r),this.parser==null){let l=new Bt;return l.index=e,l.offset=e,l}let i=e+this.rawStart.length+((o=(a=this.startPosition)==null?void 0:a.index)!=null?o:0);return this.isTagNode&&this.nameStartsOn!=null&&(i=this.nameStartsOn.index+e,Xt.isConditionalStructure(this)||(i-=this.rawStart.length)),this.parser.positionFromOffset(i,i,!0)}relativeOffset(e,r=null){var a,o;let n=e;if(r!=null&&(n=r),this.parser==null){let l=new Bt;return l.index=e,l.offset=e,l}let i=e+this.rawStart.length+((o=(a=this.startPosition)==null?void 0:a.index)!=null?o:0);return this.parser.positionFromOffset(i,i,!0)}isPaired(){return this.isClosingTag&&this.isSelfClosing==!1&&this.isOpenedBy!=null?!0:!(this.isClosedBy==null||this.isSelfClosing)}getFinalClosingTag(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingTag()}rawContent(){return this.rawStart+this.content+this.rawEnd}getTrueRuntimeNodes(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRuntimeNodes():this.runtimeNodes}getTrueRawContent(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRawContent():this.rawContent()}getTrueNode(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueNode():this}getStructuralChildren(){return this.isClosedBy!=null?nd(this.children.slice(0,-1)):nd(this.children)}findParentOfType(e){return this.parent==null?null:this.parent instanceof q?this.parent.name!=null&&e.includes(this.parent.getTagName())?this.parent:this.parent.findParentOfType(e):null}},Ur=class extends q{static makeWithStartPosition(e){let r=new Ur;return r.startPosition=e,r.endPosition=e,r}},dt=class extends Ur{},un=class extends q{constructor(){super(...arguments);this.recursiveParent=null;this.isNestedRecursive=!1}},Vs=class extends q{constructor(){super(...arguments);this.isEchoNode=!1}},ul=class extends Ur{},ld=class extends Ur{},ir=class extends q{constructor(){super(...arguments);this.isNoParseRegion=!1}},qs=class extends Z{constructor(){super(...arguments);this.modifier=null;this.isModifierParameter=!1;this.nameDelimiter='"';this.isVariableReference=!1;this.name="";this.value="";this.interpolations=[];this.parent=null;this.blockPosition=null;this.namePosition=null;this.valuePosition=null}containsSimpleValue(){return this.hasInterpolations()==!1&&this.isVariableReference==!1}hasInterpolations(){return this.interpolations.length>0}getArrayValue(){return this.value.split("|")}getValue(){return this.value}},fl=class{constructor(){this.modifierTarget=null;this.modifierChain=[];this.startPosition=null;this.endPosition=null;this.lastManifestedModifier=null;this.lastModifier=null}updateValues(){if(this.modifierChain.length==0)this.startPosition=null,this.endPosition=null;else{let e=this.modifierChain[0],r=this.modifierChain[this.modifierChain.length-1];this.startPosition=e.startPosition,this.endPosition=r.endPosition}}},Fa=class extends Z{constructor(){super(...arguments);this.modifier=null;this.methodStyleArguments=null;this.nameNode=null;this.name="";this.valueNodes=[];this.parameters=[]}getParameterValues(){let e=[];return this.parameters.forEach(r=>{e.push(r.value)}),e}},pl=class extends Z{constructor(){super(...arguments);this.order=0;this.name=null;this.directionNode=null}},cd=class extends Z{constructor(){super(...arguments);this.value=""}},Ln=class extends Z{},fn=class extends Z{},kn=class extends Z{},Gr=class extends Z{},Wr=class extends Z{},ai=class extends Z{},ns=class extends Z{constructor(){super(...arguments);this.repeat=1}},oi=class extends Z{},Hr=class extends Z{},Nr=class extends Z{},Mn=class extends Z{},Fn=class extends Z{},Yr=class extends Z{},Vn=class extends Z{},qn=class extends Z{},li=class extends Z{},vr=class extends Z{},pn=class extends Z{},wi=class extends Z{},Bn=class extends Z{},jn=class extends Z{},Un=class extends Z{},Gn=class extends Z{},Wn=class extends Z{},Hn=class extends Z{},Oi=class extends Z{},Yn=class extends Z{},sr=class extends Z{},Bs=class extends Z{constructor(){super(...arguments);this.orderClauses=[]}},St=class extends Z{},dr=class extends Z{},dl=class extends Z{constructor(){super(...arguments);this.left=null;this.right=null}},Pr=class extends Z{constructor(){super(...arguments);this.isTenaryBranchSeparator=!1}},Kn=class extends Z{},dn=class extends Z{},ar=class extends Z{},mn=class extends Z{},ci=class extends Z{},hn=class extends Z{},Ir=class extends Z{},ui=class extends Z{},jt=class extends Z{},Qt=class extends Z{},Va=class extends Z{constructor(){super(...arguments);this.values=[];this.isNamedNode=!1;this.parsedName=null}},Le=class extends Z{constructor(){super(...arguments);this.start=null;this.end=null;this.nodes=[];this.scopeOperator=null}},qa=class extends Z{constructor(){super(...arguments);this.condition=null;this.expression=null}},js=class extends Z{constructor(){super(...arguments);this.cases=[]}},ud=class extends Z{constructor(){super(...arguments);this.left=null;this.right=null}},Di=class extends Z{constructor(){super(...arguments);this.nodes=[]}},ml=class extends Z{constructor(){super(...arguments);this.head=null;this.truthBranch=null;this.falseBranch=null}},Rt=class extends Z{},Dt=class extends Z{constructor(){super(...arguments);this.nodes=[];this.separatorToken=null}},gn=class extends Le{constructor(){super(...arguments);this.scope=null}extract(){let e=null;this.scope!=null&&(e=this.scope.name);let r=this.nodes[0];return[e,r.nodes]}},Li=class extends gn{constructor(){super(...arguments);this.alias=null}},Ba=class extends Z{constructor(){super(...arguments);this.args=[];this.hasNamedArguments=!1;this.numberOfNamedArguments=0}},$n=class extends Z{},fd=class extends Z{};var is=class extends Z{constructor(){super(...arguments);this.libraryName="";this.methodName="";this.arguments=null}},je=class extends Z{constructor(){super(...arguments);this.sourceContent=""}},Jt=class extends Z{constructor(){super(...arguments);this.method=null;this.args=null}},Ut=class extends Z{constructor(){super(...arguments);this.name=""}},Gt=class extends Z{constructor(){super(...arguments);this.value="";this.name=""}},Wc=class extends Z{constructor(){super(...arguments);this.name=null;this.value=null}},hl=class extends Z{constructor(){super(...arguments);this.name=null;this.value=null}},Lt=class extends Z{constructor(){super(...arguments);this.value=null}},Nt=class extends Z{constructor(){super(...arguments);this.value="";this.sourceTerminator="";this.sourceContent=""}},ae=class extends Z{constructor(){super(...arguments);this.name="";this.mergeRefName="";this.variableReference=null;this.interpolationNodes=[];this.isInterpolationReference=!1}},pd=class extends Z{constructor(){super(...arguments);this.name=""}},pr=class extends Z{constructor(){super(...arguments);this.delimiter="";this.name="";this.isStringVar=!1;this.isFinal=!1}},fi=class{constructor(){this.originalContent="";this.normalizedReference="";this.isStrictTagReference=!1;this.isStrictVariableReference=!1;this.isExplicitVariableReference=!1;this.isVariableVariable=!1;this.pathParts=[];this.isFinal=!1;this._isFromEmptyFailState=!1}clone(){let e=new fi;return e.originalContent=this.originalContent,e.normalizedReference=this.normalizedReference,e.isStrictVariableReference=this.isStrictVariableReference,e.isExplicitVariableReference=this.isExplicitVariableReference,e.pathParts=this.pathParts,e.isFinal=this.isFinal,e}implodePaths(){let e=[];return this.pathParts.forEach(r=>{r instanceof pr?e.push(r.name):r instanceof fi&&e.push(r.implodePaths())}),e.join(".")}},dd=class{constructor(e,r,n){this.target=e,this.value=r,this.operator=n}};var av=Q(zt());var ja=Q(ot());function md(t,e){let r=[];if(t.currentNode==null)return r;let n={start:{line:t.position.line,character:t.position.character-0},end:t.position};for(let i=0;i<e.length;i++){let s=e[i];if(!t.currentNode.hasParameter(s.name)){let a=s.name+'="$1"';r.push({label:s.name,kind:ja.CompletionItemKind.Value,insertTextFormat:ja.InsertTextFormat.Snippet,textEdit:ja.TextEdit.replace(n,a),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return r}var Ua=Q(ot());function ss(t,e,r){return{label:t,insertText:t,kind:Ua.CompletionItemKind.Field,detail:r+": "+e}}function PE(t,e){let r="";return e.length>0&&(r=e.join(", ")),"**"+t+"** `"+r+"`  \n"}function Hc(t){let e=PE(t.name,t.acceptsType),r="";if(t.parameters.length>0){let s=[];t.parameters.forEach(a=>{s.push("$"+a.name)}),r=s.join(", ")}let n="";if(t.returnsType.length==1)n=t.returnsType[0];else{let s=[];t.returnsType.forEach(a=>{s.push(a)}),n=s.join(", ")}return e+=t.description+`
`,e+="```js\n",e+="function "+t.name+"("+r+"):"+n,e+="\n```",t.docLink!=null&&t.docLink.trim().length>0&&(e+=`  

`,e+="[Documentation Reference]("+t.docLink+")"),{label:t.name,insertText:t.name,documentation:{kind:Ua.MarkupKind.Markdown,value:e},kind:Ua.CompletionItemKind.Function}}function Yc(t){let e=[];for(let r=0;r<t.length;r++)typeof t[r].name!="undefined"&&e.push(hd(t[r]));return e}function hd(t){let e="",r=t.name;return t.instructionText!=null&&(e=t.instructionText),t.displayName!=null&&(r=t.displayName+" ("+t.name+")"),t.blueprintName!=null&&(e.trim().length>0&&(e+=`
`),e+="Blueprint: "+t.blueprintName),t.type!=null&&(r+=": "+t.type),{label:t.name,insertText:t.name,kind:Ua.CompletionItemKind.Field,documentation:e,detail:r}}function Re(t,e,r,n){let i="**"+t+"**  ";return i+=`
`,i+=e+"  ",i+="\n```antlers\n",i+=r,i+="\n```",n!=null&&(i+=`

`,i+="[Documentation Reference]("+n+")"),i}function L(t,e,r){let n="**"+t+"**  ";return n+=`
`,n+=e+"  ",r!=null&&(n+=`

`,n+="[Documentation Reference]("+r+")"),n}function Ga(t){let e=[];return t=="order"&&e.push("sort"),e}var bb=["replicator","bard"];function IE(t){return{blueprintName:t.sourceName,displayName:t.name,instructionText:"",maxItems:-1,name:t.name,refFieldSetField:null,type:t.dataType,sets:null,import:null}}function Kc(t){let e=[];for(let r=0;r<t.length;r++)e.push(IE(t[r]));return e}function gd(t,e=""){return{blueprintName:"fieldset",displayName:e+t.name,instructionText:t.instructionText,maxItems:t.maxItems,name:e+t.handle,type:t.type,refFieldSetField:t,sets:t.sets,import:t.import}}function Tb(t,e,r){return t=="select"&&typeof e.field.multiple!="undefined"&&e.field.multiple===!0&&(t="select_multiple"),(typeof e.field.multiple=="undefined"||r>1)&&(t=="form"?t="form_multiple":t=="sites"?t="sites_multiple":t=="taxonomies"?t="taxonomies_multiple":t=="user_groups"?t="user_groups_multiple":t=="user_roles"?t="user_roles_multiple":t=="terms"?t="terms_multiple":t=="users"?t="users_multiple":t=="structures"&&(t="structures_multiple")),t}function Nb(t){let e=[];for(let r=0;r<t.length;r++)e.push(gd(t[r]));return e}function Ke(t){return[{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t},{name:"order",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:t}]}function vb(t,e,r){if(typeof r=="undefined"||r===null)return;let n=t.findParameter("as"),i=t.findParameter("scope");r=r.concat(Kc(Ke(t))),n!=null&&i!=null?e.introduceScopedAliasScope(t,i.value,n.value,r):n!=null?e.introduceAliasScope(t,n.value,r):i!=null?e.introduceDynamicScopeList(t,i.value,r):e.addBlueprintFields(t,r)}function Pb(t){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.collection.context",introducedBy:t},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.collection.context",introducedBy:t}]}var zn=Q(ot());var as=[{isRequired:!1,name:"from",description:"The collection name to retrieve entries from",aliases:["folder","use"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"not_from",aliases:["not_folder","dont_use"],description:"The collections to exclude when retrieving entries",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"show_unpublished",aliases:null,description:"Controls whether unpbulished entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_published",aliases:null,description:"Controls whether published entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_past",aliases:null,description:"Controls whether to display entries with a past date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"since",aliases:null,description:"Sets the minimum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"until",aliases:null,description:"Sets the maximum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the entry sort order",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",aliases:null,description:"Sets the maximum number of entries to return",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["integer"],isDynamic:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope",expectsTypes:["string"],isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets the amount that entry results should be offset by",expectsTypes:["integer"],isRequired:!1,name:"offset",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether not to paginate entry results",expectsTypes:["boolean","number"],isRequired:!1,name:"paginate",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies a name to give to a new entries array variable",expectsTypes:["string"],isRequired:!1,name:"as",isDynamic:!1},{name:"scope",aliases:null,acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Sets a prefix on all entry variables",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"locale",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the locale in which to retrieve entry content",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"redirects",aliases:["links"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Controls whether entries with redirects are returned",expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"page_name",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"Allows you to customise the name of the URL query parameter used for pagination.",expectsTypes:["string"],isRequired:!1,isDynamic:!1}],Ib=["from","folder","use"],Sb=["not_from","not_folder","dont_use"],Cb=["draft","scheduled","expired","published"];function Rb(t){let e=[];if(t.project!=null){let r={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position},n=t.project.getUniqueTaxonomyNames();for(let i=0;i<n.length;i++){let s=n[i],a=t.originalLeftWord+s+'="$1"';e.push({label:t.originalLeftWord+s,insertTextFormat:zn.InsertTextFormat.Snippet,kind:zn.CompletionItemKind.Field,textEdit:zn.TextEdit.replace(r,a),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return e}function Wa(t,e){let r=[];if(t.reference!=null){let n=t.reference,i=e.statamicProject.getBlueprintFields(n.collectionNames);typeof i!="undefined"&&i!=null&&(r=i)}return r}function Ab(t){let e=[],r=Cb.filter(n=>!t.includes(n));for(let n=0;n<r.length;n++)e.push({label:r[n],kind:zn.CompletionItemKind.Variable});return e}function xb(t,e,r){let n=[],i=r.getTaxonomyTerms(e),s=i.filter(a=>!t.includes(a));for(let a=0;a<s.length;a++)n.push({label:s[a],kind:zn.CompletionItemKind.Variable});return n}function Eb(t){let e=[],r=t.getCollectionNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:zn.CompletionItemKind.Variable});return e}function Ha(t,e){let r=[],n=e.getCollectionNames().filter(i=>!t.includes(i));for(let i=0;i<n.length;i++)r.push({label:n[i],kind:zn.CompletionItemKind.Variable});return r}function $c(t){let e=[],r=t.getCollectionQueryScopes();for(let n=0;n<r.length;n++)e.push({label:r[n].name,detail:r[n].description,kind:zn.CompletionItemKind.Variable});return e}function Ya(t,e){if(t.isClosingTag)return e;if(t.hasMethodPart()&&t.getMethodNameValue()!="count"&&e.addVariables(Pb(t)),t.reference!=null){let r=Wa(t,e);vb(t,e,r)}return e}var gl=Q(zt());var zc=Q(ot());var _d=[{name:"is",description:"Tests if a field is equal to a value"},{name:"equals",description:"Tests if a field is equal to a value"},{name:"not",description:"Tests if a field is not equal to a value"},{name:"isnt",description:"Tests if a field is not equal to a value"},{name:"exists",description:"Tests if a field exists"},{name:"isset",description:"Tests if a field exists"},{name:"doesnt_exist",description:"Tests if a field does not exist"},{name:"is_empty",description:"Tests if a field does not exist"},{name:"null",description:"Tests if a field does not exist"},{name:"contains",description:"Tests if a field contains a value"},{name:"doesnt_contain",description:"Tests if a field does not contain a value"},{name:"in",description:"Tests if a value is in an array"},{name:"not_in",description:"Tests if an array does not contain a value"},{name:"starts_with",description:"Tests if a field starts with a value"},{name:"doesnt_start_with",description:"Tests if a field does not start with a value"},{name:"ends_with",description:"Tests if a field ends with a value"},{name:"doesnt_end_with",description:"Tests if a field does not end with a value"},{name:"gt",description:"Tests if a field is greater than a value"},{name:"lt",description:"Tests if a field is less than a value"},{name:"gte",description:"Tests if a field is greater than or equal to a value"},{name:"lte",description:"Tests if a field is less than or equal to a value"},{name:"matches",description:"Tests if a field matches a case insensitive regex"},{name:"regex",description:"Tests if a field matches a case insensitive regex"},{name:"doesnt_match",description:"Tests if a field does not match a case insensitive regex"},{name:"is_alpha",description:"Tests if a field contains only alphabetical characters"},{name:"is_numeric",description:"Tests if a field contains only numeric characters"},{name:"is_alpha_numeric",description:"Tests if a field contains only alpha-numeric characters"},{name:"is_url",description:"Tests if a field is a valid URL"},{name:"is_embeddable",description:"Tests if a field is an embeddable video URL"},{name:"is_email",description:"Tests if a field is a valid email address"},{name:"is_after",description:"Tests if a field is after a given date"},{name:"is_before",description:"Tests if a field is before a given date"}];function os(t){let e=[],r={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position};for(let n=0;n<_d.length;n++){let i=_d[n],s=t.originalLeftWord+i.name+'="$1"';e.push({label:i.name,insertTextFormat:zc.InsertTextFormat.PlainText,kind:zc.CompletionItemKind.Field})}return e}var kt=Q(fr());var Us=class{static clear(e){this.unclosedNodes.delete(e)}static registerNodes(e,r){this.unclosedNodes.set(e,r)}static getUnclosedTags(e,r){var a,o,l;let n=[];if(this.unclosedNodes.has(e)==!1)return n;let i=this.unclosedNodes.get(e);if(i.length==0)return n;let s=r.line+1;for(let c=0;c<i.length;c++){let u=i[c];(((a=u.endPosition)==null?void 0:a.line)==s&&r.character>u.endPosition.char||s>((l=(o=u.endPosition)==null?void 0:o.line)!=null?l:0))&&n.push(u)}return n}static hasUnclosedTags(e,r){return this.unclosedNodes.has(e)==!1?!1:this.getUnclosedTags(e,r).length>0}};Us.unclosedNodes=new Map;var wb=["edit_url","id","last_modified","permalink","published","slug","template","url"];function ls(t){return[{name:"edit_url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"id",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"last_modified",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"permalink",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"published",dataType:"boolean",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"slug",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"template",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t},{name:"url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:t}]}var Kr=Q(zt()),Ob=[{label:"name",kind:Kr.CompletionItemKind.Property},{label:"description",kind:Kr.CompletionItemKind.Property},{label:"desc",kind:Kr.CompletionItemKind.Property},{label:"entry",kind:Kr.CompletionItemKind.Property},{label:"collection",kind:Kr.CompletionItemKind.Property},{label:"blueprint",kind:Kr.CompletionItemKind.Property},{label:"var",kind:Kr.CompletionItemKind.Property},{label:"set",kind:Kr.CompletionItemKind.Property},{label:"param",kind:Kr.CompletionItemKind.Property},{label:"param*",kind:Kr.CompletionItemKind.Property},{label:"front",kind:Kr.CompletionItemKind.Property},{label:"format",kind:Kr.CompletionItemKind.Property}];var Xc=Q(ot()),SE=[{label:"if",kind:Xc.CompletionItemKind.Keyword},{label:"elseif",kind:Xc.CompletionItemKind.Keyword},{label:"else",kind:Xc.CompletionItemKind.Keyword}],Db=SE;var Ka=Q(zt()),Lb=Q(ot());var yd=class{static getCompletions(e,r){var a;let n=[],i=0;e.leftWord!=e.leftMeaningfulWord&&(i=e.leftWord.length);let s={start:{line:e.position.line,character:e.position.character-i},end:e.position};return(a=Me.instance)==null||a.getModifiersForType(r.dataType).filter(o=>o.canBeParameter).forEach(o=>{n.push({label:o.name,documentation:{kind:Lb.MarkupKind.Markdown,value:o.description},insertTextFormat:Ka.InsertTextFormat.Snippet,kind:Ka.CompletionItemKind.Value,textEdit:Ka.TextEdit.replace(s,o.name+'="$1" '),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}),n}};var bd=Q(ot()),$a=[];$a.push({label:"true",kind:bd.CompletionItemKind.Keyword});$a.push({label:"false",kind:bd.CompletionItemKind.Keyword});function kb(t){let e=[];for(let r=0;r<t.expectsTypes.length;r++)t.expectsTypes[r]=="boolean"&&(e=e.concat($a));return e}function Qe(t){return[{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"value",introducedBy:t},{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"key",introducedBy:t}]}var CE={name:"array",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Mb=CE;var RE={name:"bard",augmentScope:(t,e)=>{e.addVariable({name:"type",dataType:"string",sourceField:null,sourceName:"*internal.bard",introducedBy:t})},injectCompletions:(t,e,r)=>[]},Fb=RE;var AE={name:"form_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Vb=AE;var xE={name:"list",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},qb=xE;function Bb(t){return[{name:"type",dataType:"string",sourceName:"*internal.replicator",sourceField:null,introducedBy:t}]}var EE={name:"replicator",augmentScope:(t,e)=>{e.addVariables(Bb(t)),e.addVariables(Ke(t))},injectCompletions:(t,e,r)=>[]},jb=EE;var wE={name:"select_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Ub=wE;var OE={name:"sites_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Gb=OE;var DE={name:"structures_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Wb=DE;var LE={name:"table",augmentScope:(t,e)=>{e.addVariable({name:"cells",dataType:"array",sourceName:"*internal.fieldtype.table",sourceField:null,introducedBy:t})}},Hb=LE;var kE={name:"tags",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Yb=kE;function Qc(t){return ls(t).concat([{name:"entries_count",dataType:"number",sourceName:"*internal.term",sourceField:null,introducedBy:t},{name:"is_term",dataType:"boolean",sourceName:"*internal.term",sourceField:null,introducedBy:t},{name:"taxonomy",dataType:"string",sourceName:"*internal.term",sourceField:null,introducedBy:t}])}var ME={name:"taxonomies_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t)),e.addVariables(Qc(t))}},Kb=ME;var FE={name:"terms_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t)),e.addVariables(Qc(t))}},$b=FE;var VE={name:"user_groups_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},zb=VE;var qE={name:"user_roles_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Xb=qE;var BE={name:"users_multiple",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t)),e.injectBlueprint(t,"user")}},Qb=BE;var jE={name:"yaml",augmentScope:(t,e)=>{e.addVariables(Qe(t)),e.addVariables(Ke(t))}},Jb=jE;var UE=[Mb,Fb,Vb,qb,jb,Ub,Gb,Wb,Jb,Hb,Kb,Yb,$b,Qb,zb,Xb],Zb=UE;var cs=class{constructor(){this.fieldTypes=new Map}getFieldTypes(){return this.fieldTypes}getFieldType(e){return this.fieldTypes.get(e)}registerFieldtypes(e){for(let r=0;r<e.length;r++)this.fieldTypes.set(e[r].name,e[r])}loadCoreFieldtypes(){this.registerFieldtypes(Zb)}hasFieldtype(e){return this.fieldTypes.has(e)}};cs.instance=null;(typeof cs.instance=="undefined"||cs.instance==null)&&(cs.instance=new cs,cs.instance.loadCoreFieldtypes());var za=cs;var Td=class{static getVariableSuggestions(e,r){var i,s;let n=[];if(r.scopeVariable!=null&&r.scopeVariable.sourceField!=null&&((i=za.instance)==null?void 0:i.hasFieldtype(r.scopeVariable.sourceField.type))){let a=(s=za.instance)==null?void 0:s.getFieldType(r.scopeVariable.sourceField.type);a.injectCompletions!=null&&(n=a.injectCompletions(e,r.scopeVariable.sourceField,r))}return n}};var GE=["if","elseif","unless","elseunless"],WE=["else","/if"];function eT(t,e){var l,c,u,f,m,p,d,_;let r=(c=(l=t.startPosition)==null?void 0:l.line)!=null?c:-1,n=(f=(u=t.endPosition)==null?void 0:u.line)!=null?f:1,i=(p=(m=t.startPosition)==null?void 0:m.char)!=null?p:-1,s=(_=(d=t.endPosition)==null?void 0:d.char)!=null?_:-1,a=e.line+1,o=e.character+1;return r==n&&a==r+1&&o>i&&o<=s||a==r&&o>i&&o<=s||a==n&&o<s||a>r&&a<n}function Jc(t){let e="";return t.currentNode!=null&&(e=t.currentNode.getMethodNameValue()),e}function ki(t){if(t.includes(":")==!1)return t;let e=t.split(":");return e.length>1?e[e.length-1]:e[0].trim()}function Zc(t){return t.includes(":")==!1?t:t.split(":")[0]}function tT(t){var r;if(t.nodesInScope.length==0)return[];let e=t.nodesInScope[t.nodesInScope.length-1];return((r=t.context)==null?void 0:r.node)!=null&&(e=t.context.node),e.currentScope==null?[]:Gs(t,e.currentScope)}function Gs(t,e){let r=[];return e.values.forEach(n=>{var i;if(n.sourceField!=null?r.push({label:n.name,detail:n.sourceField.blueprintName,documentation:(i=n.sourceField.instructionText)!=null?i:"",kind:kt.CompletionItemKind.Field}):r.push(ss(n.name,"","")),n.dataType.trim().length>0&&n.dataType=="array"){let s=n.name+` }}
    $1
{{ /`+n.name+" ",a={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position};r.push({label:n.name+" loop",insertTextFormat:kt.InsertTextFormat.Snippet,kind:kt.CompletionItemKind.Snippet,textEdit:kt.TextEdit.replace(a,s),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}),e.lists.forEach((n,i)=>{r.push(ss(i,"",""))}),r}function HE(){var e;let t=[];return(e=Me.instance)==null||e.getRegisteredModifiers().forEach(r=>{r.isDeprecated||t.push(Hc(r))}),t}var Nd=class{static getSuggestions(e){var s,a,o,l,c,u,f,m,p,d,_,P,h,y,g,N,S,V,O,Y,z,X,K,re,De,de,te,We,ut,Vt,Ve,ft,Ti,$i;if(e==null)return[];if(e.context!=null&&e.context.node!=null&&e.context.node.isComment)return e.context.node.antlersNodeIndex==1?Ob:[];if(e.nodesInScope.length==0)return[];if(e.leftMeaningfulWord==null&&e.leftChar=="/"){let ce=Us.getUnclosedTags(e.document,e.position);if(ce.length>0){let oe=[],he="";e.rightChar=="}"&&(he=" ");for(let se=0;se<ce.length;se++)oe.push({label:ce[se].runtimeName()+he,kind:kt.CompletionItemKind.Text});return oe}}let r=e.nodesInScope[e.nodesInScope.length-1];if(r instanceof Vs)return[];let n=[],i=!0;if(r.currentScope!=null&&((s=e.context)==null?void 0:s.variableContext)!=null&&e.context.variableContext.varPathText.length>0){if(r.currentScope.hasListInHistory(e.context.variableContext.varPathText)){let ce=r.currentScope.getList(e.context.variableContext.varPathText);ce!=null&&Gs(e,ce).forEach(oe=>{n.push({...oe,sortText:"00"})})}else if(r.currentScope.containsPath(e.context.variableContext.varPathText)){let ce=r.currentScope.findNestedScope(e.context.variableContext.varPathText);ce!=null&&Gs(e,ce).forEach(oe=>{n.push({...oe,sortText:"00"})})}}if(((a=e.context)==null?void 0:a.modifierContext)!=null&&(e.context.modifierContext.inModifierName||e.context.modifierContext.inModifierName==!1&&e.context.modifierContext.inModifierParameter==!1||e.context.feature==null||e.leftChar=="|"&&e.context.char==" ")&&(n=n.concat(HE())),e.nodesInScope.length>=2){let ce=e.nodesInScope.length-2,oe=[];for(let he=ce;he>=0;he--){let se=e.nodesInScope[he];oe=oe.concat(Td.getVariableSuggestions(e,se))}oe.length>0&&(n=n.concat(oe))}if((((o=e.currentNode)==null?void 0:o.isEmpty())||((l=e.context)==null?void 0:l.isCursorInIdentifier)&&e.leftChar!=":"&&e.leftChar!=" ")&&((c=e.context)==null?void 0:c.modifierContext)==null){let ce=(f=(u=Ie.instance)==null?void 0:u.getVisibleTagsWithDocumentation())!=null?f:[],oe=[],he=[];for(let se=0;se<ce.length;se++){let Ne="000";if(e.leftWord!=null&&ce[se].label.startsWith(e.leftWord)==!1&&(Ne="001"),((m=e.context)==null?void 0:m.node)!=null&&((p=e.context)==null?void 0:p.node.parent)!=null&&(Ne=void 0),ce[se].label.includes(":")==!1)oe.includes(ce[se].label)==!1&&(he.push({label:ce[se].label,kind:kt.CompletionItemKind.Text,documentation:{kind:"markdown",value:ce[se].documentation},sortText:Ne}),oe.push(ce[se].label));else{let Pt=ce[se].label.split(":")[0];oe.includes(Pt)==!1&&(he.push({label:Pt,kind:kt.CompletionItemKind.Text,documentation:{kind:"markdown",value:ce[se].documentation},sortText:Ne}),oe.push(Pt))}}n=n.concat(he)}if(r!=null&&r.currentScope!=null){if(WE.includes(r.getTagName()))return[];if(((d=e.context)==null?void 0:d.node)==null)return[];if(e.antlersDocument!=null){let ce=e.antlersDocument.cursor.getAssignmentsBefore(e.position.line,e.position.character);ce.length>0&&ce.forEach(oe=>{oe.target instanceof ae&&n.push({label:oe.target.name,kind:kt.CompletionItemKind.Variable})})}if(GE.includes(r.getTagName())&&e.context.feature!=null&&e.context.feature instanceof Nt&&e.context.feature.prev instanceof vr&&e.context.feature.prev.prev instanceof ae){let ce=r.getParser();if(ce!=null&&e.project!=null&&ce.getLanguageParser().isMergedVariableComponent(e.context.feature.prev.prev)){let he=ce.getLanguageParser().getMergedVariable(e.context.feature.prev.prev),se=[];return he.name=="collection:handle"?se=e.project.getUniqueCollectionNames():he.name=="site:handle"?se=e.project.getSiteNames():he.name=="blueprint:handle"&&(se=e.project.getBlueprintNames()),se.forEach(Ne=>{n.push({label:Ne,sortText:Ne,kind:kt.CompletionItemKind.EnumMember})}),n}if(["collection","current_template","status","blueprint","response_code"].includes(e.context.feature.prev.prev.name)){if(e.project!=null){let he=e.context.feature.prev.prev.name,se=[];return he=="collection"?se=e.project.getUniqueCollectionNames():he=="current_template"?se=e.project.getTemplateNames():he=="status"?se=["draft","scheduled","expired","published"]:he=="blueprint"?se=e.project.getBlueprintNames():he=="response_code"&&(se=["404","200"]),se.forEach(Ne=>{n.push({label:Ne,sortText:Ne,kind:kt.CompletionItemKind.EnumMember})}),n}}else if(e.context.feature.prev.prev.scopeVariable!=null){let he=e.context.feature.prev.prev.scopeVariable.dataType;if(he=="replicator"||he=="bard"){let se=e.context.feature.prev.prev.scopeVariable.sourceField;return(_=se.sets)==null||_.forEach(Ne=>{let Pt="**"+Ne.displayName+"** `"+Ne.handle+"`  ";Pt+=`

 Blueprint: \``+se.blueprintName+"`  \n",Ne.fields.forEach(In=>{Pt+=`
 * `+In.displayName+" `"+In.name+":"+In.type+"`  "}),he=="replicator"?Pt+=`

 [Replicator Templating Documentation](https://statamic.dev/fieldtypes/replicator#templating)`:Pt+=`

 [Bard Templating Documentation](https://statamic.dev/fieldtypes/bard#with-sets)`,n.push({label:Ne.displayName,insertText:Ne.handle,sortText:"000",documentation:{kind:"markdown",value:Pt},kind:kt.CompletionItemKind.EnumMember})}),n}}}if(r.isTagNode==!1){n=n.concat(Db);let ce={start:{line:e.position.line,character:e.position.character-e.originalLeftWord.length},end:e.position},oe=`if $1 }}
    $2
{{ else }}

{{ /if `;n.push({label:"ifelse",insertTextFormat:kt.InsertTextFormat.Snippet,kind:kt.CompletionItemKind.Snippet,textEdit:kt.TextEdit.replace(ce,oe),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}),r.scopeVariable!=null&&(n=n.concat(yd.getCompletions(e,r.scopeVariable)))}if(r.currentScope.hasListInHistory(r.runtimeName())==!1&&r.currentScope.hasPristineReference(r.runtimeName())==!1?i=(h=(P=Ie.instance)==null?void 0:P.injectParentScope(r.runtimeName()))!=null?h:!1:i=!1,((y=e.context)==null?void 0:y.parameterContext)!=null&&e.context.parameterContext.parameter!=null&&(e.context.parameterContext.parameter.isVariableReference==!1?i=!1:i=!0),e.currentNode!=null&&(e.currentNode.isEmpty()||e.currentNode.parent!=null)&&(i=!0),r.runtimeName().includes(":")&&r.currentScope.containsPath(Dn(r.runtimeName(),":"))){let ce=Dn(r.runtimeName(),":"),oe=cn(Dn(e.leftWord,":"),"{");if(ce==oe){let he=r.currentScope.findNestedScope(ce);if(he!=null)return he.lists.forEach((se,Ne)=>{n.push(ss(Ne,"",""))}),he.values.forEach(se=>{var Ne;se.sourceField!=null?n.push({label:se.name,detail:se.sourceField.blueprintName,documentation:(Ne=se.sourceField.instructionText)!=null?Ne:"",kind:kt.CompletionItemKind.Field}):n.push(ss(se.name,"",""))}),n}}if(r.isTagNode){if(e.isInVariableInterpolation&&e.currentNode==null)n=n.concat(Gs(e,r.currentScope.ancestor()));else if(((g=e.context)==null?void 0:g.parameterContext)!=null&&e.context.parameterContext.parameter!=null){let ce=e.context.parameterContext.parameter;if(ce.isVariableReference&&e.position.character<=((V=(S=(N=ce.valuePosition)==null?void 0:N.end)==null?void 0:S.char)!=null?V:-1)){if(n=n.concat(Gs(e,r.currentScope.ancestor())),Ie.instance!=null){let oe=Ie.instance.getCompletionItems(e);n=n.concat(oe.items)}}else if(e.position.character<=((z=(Y=(O=ce.valuePosition)==null?void 0:O.end)==null?void 0:Y.char)!=null?z:-1)){let oe=null,he=!1;if((X=Ie.instance)==null?void 0:X.canResolveDynamicParameter(r.runtimeName())){let se=Ie.instance.findTag(r.runtimeName());typeof se!="undefined"&&typeof se.resolveDynamicParameter!="undefined"&&se.resolveDynamicParameter!=null&&(oe=se.resolveDynamicParameter(r,ce.name),he=!0)}else oe=(re=(K=Ie.instance)==null?void 0:K.getParameter(r.runtimeName(),ce.name))!=null?re:null;if(oe==null&&he&&(oe=(de=(De=Ie.instance)==null?void 0:De.getParameter(r.runtimeName(),ce.name))!=null?de:null),typeof oe!="undefined"&&oe!==null){let se=(We=(te=Ie.instance)==null?void 0:te.resolveParameterCompletions(r.runtimeName(),oe,e))!=null?We:null;se!==null&&se.items.length>0?se.items.forEach(Ne=>{Ne.sortText="000",n.push(Ne)}):kb(oe).forEach(Ne=>{Ne.sortText="000",n.push(Ne)})}if(ce.hasInterpolations()&&e.isInVariableInterpolation&&r.isTagNode){let se=(ut=Ie.instance)==null?void 0:ut.findTag(r.runtimeName());if(se.resolveCompletionItems!=null){let Ne=se.resolveCompletionItems(e);Ne.items.length>0&&(n=Ne.items)}}}}else if(e.isInVariableInterpolation==!1||e.currentNode==r){let ce=eT(r,e.position);if(e.isCaretInTag=ce,e.currentNode=r,Ie.instance!=null){let oe=Ie.instance.getCompletionItems(e);oe.isExclusive?n=oe.items:n=n.concat(oe.items)}}}else e.isInVariableInterpolation&&e.currentNode==null&&(n=n.concat(Gs(e,r.currentScope.ancestor())));if(i){e.context.node!=null&&e.context.node.currentScope!=null&&(e.context.modifierContext==null||e.context.modifierContext.activeModifier==null)&&(n=n.concat(Gs(e,e.context.node.currentScope)));let ce=decodeURIComponent(e.document);if(e.project.hasViewCollectionInjections(ce)){let oe=e.project.getCollectionNamesForView(ce);for(let he=0;he<oe.length;he++){let se=e.project.getBlueprintFields(oe);if(se.length>0)for(let Ne=0;Ne<se.length;Ne++){let Pt=se[Ne];n.push({label:Pt.name,detail:Pt.blueprintName,documentation:(Vt=Pt.instructionText)!=null?Vt:"",kind:kt.CompletionItemKind.Field})}}wb.forEach(he=>{n.push({label:he,kind:kt.CompletionItemKind.Field})})}}return e.context.node!=null&&(e.context.node.manifestType=="array"&&e.context.node.isClosedBy!=null?e.context.modifierContext!=null&&((ft=(Ve=Me.instance)==null?void 0:Ve.getModifiersForType("array"))!=null?ft:[]).forEach(oe=>{if(oe.isDeprecated)return;let he=Hc(oe);he.sortText="000",n.push(he)}):e.context.modifierContext!=null&&(($i=(Ti=Me.instance)==null?void 0:Ti.getModifiersForType(e.context.node.manifestType))!=null?$i:[]).forEach(oe=>{if(oe.isDeprecated)return;let he=Hc(oe);he.sortText="000",n.push(he)})),n}for(let ce=0;ce<e.nodesInScope.length;ce++){let oe=e.nodesInScope[ce],he=!0;if(e.isInVariableInterpolation&&e.currentNode!==null&&oe.currentScope!=null&&e.currentNode.currentScope!=null&&oe.currentScope.generation>e.currentNode.currentScope.generation&&(he=!1),oe.isTagNode&&he){let se=eT(oe,e.position);if(e.isCaretInTag=se,e.currentNode=oe,Ie.instance!=null){let Ne=Ie.instance.getCompletionItems(e);if(Ne.isExclusive){n=Ne.items;break}n=n.concat(Ne.items)}continue}}return n}};var rT=Q(zt());function me(t){let e="";typeof t!="undefined"&&typeof t.resolveDocumentation!="undefined"&&t.resolveDocumentation!=null&&(e=t.resolveDocumentation());let r=t.tagName;if(r.includes(":")){let n=r.split(":");r=n[n.length-1]}return{label:r,kind:rT.CompletionItemKind.Text,sortText:"1",documentation:{kind:"markdown",value:e}}}var vd=Q(ot());function nT(t,e,r){return{name:t,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:e,expectsTypes:["string"],isDynamic:!0,isRequired:!1,documentationLink:r,docLinkName:"MDN Reference"}}var iT=nT("class","A space-separated list of the classes of the element.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class"),sT=nT("style","Contains CSS styling declarations to be applied to the element. Note that it is recommended for styles to be defined in a separate file or files.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/style");function eu(t){return t=="class"?iT:t=="style"?sT:{name:t,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"",expectsTypes:["string","number","array"],isRequired:!1,isDynamic:!0}}function aT(t){let e=[];for(let r=0;r<t.length;r++)e.push({label:t[r],kind:vd.CompletionItemKind.Field});return ee(e)}function mt(t){let e=[];for(let r=0;r<t.length;r++)e.push({label:t[r],kind:vd.CompletionItemKind.Field});return ee(e)}function ee(t){return{items:t,isExclusiveResult:!0,analyzeDefaults:!1}}function mr(t){return{items:t,isExclusiveResult:!1,analyzeDefaults:!0}}var ge={items:[],isExclusiveResult:!1,analyzeDefaults:!0};function tt(t,e){let r=YE(t);return r.tagName=e,r}function YE(t){return{allowsArbitraryParameters:t.allowsArbitraryParameters,allowsContentClose:t.allowsContentClose,injectParentScope:t.injectParentScope,parameters:t.parameters,requiresClose:t.requiresClose,tagName:t.tagName,introducedIn:t.introducedIn,hideFromCompletions:t.hideFromCompletions,augmentScope:t.augmentScope,requiresCloseResolver:t.requiresCloseResolver,resolveCompletionItems:t.resolveCompletionItems,resolveDynamicParameter:t.resolveDynamicParameter,resolveSpecialType:t.resolveSpecialType,resovleParameterCompletionItems:t.resovleParameterCompletionItems,suggestAlternativeParams:t.suggestAlternativeParams,resolveDocumentation:t.resolveDocumentation}}function oT(t){return t.findParameterValueOrNull("scope")}function lT(t){t.getAllNodes().forEach(r=>{r instanceof q&&r.manifestType==="array"&&(r.mustClose=!0)})}function KE(t){return t.findParameterValueOrNull("as")}var $E=["count","next","previous"];function zE(t,e){let r=[];if(t.hasMethodPart()){let o=t.getMethodNameValue();if($E.includes(o)==!1)return r.push(o),r}let n=t.findAnyParameter(Ib),i=t.findAnyParameter(Sb),s=[],a=[];return typeof n!="undefined"&&n!==null&&(n.value.trim()==="*"?(s=e.getUniqueCollectionNames(),typeof i!="undefined"&&i!==null&&i.isVariableReference==!1&&i.hasInterpolations()==!1&&(a=i.getArrayValue())):n.isVariableReference==!1&&n.hasInterpolations()==!1&&(s=n.getArrayValue())),a.length>0?r=s.filter(function(o){return a.includes(o)==!1}):r=s,r}function us(t,e){var c,u,f,m,p,d;let r=zE(t,e),n=!1,i=!1,s=!1,a=null,o="";if(t.isClosingTag==!1){let _=KE(t),P=oT(t);_!=null&&(n=!0,o=_),P!=null&&(s=!0,a=P),i=t.hasParameter("paginate")}return{context:{collectionNames:r!=null?r:[],endPosition:(u=(c=t.endPosition)==null?void 0:c.char)!=null?u:0,aliasName:o,isAliased:n,isScoped:s,scopeName:a,isStartOfScope:!t.isClosingTag,line:(m=(f=t.startPosition)==null?void 0:f.line)!=null?m:0,startPosition:(d=(p=t.startPosition)==null?void 0:p.char)!=null?d:0,isPaginated:i,excludeCollections:[],includeCollections:[]},issues:[]}}function Xa(t,e){if(t==null)return null;let r=cn(e,":");return r.includes(":")&&(r=r.split(":")[0]),r=="status"||r=="taxonomy"||t.currentScope!=null&&t.currentScope.containsReference(r)?eu(e):null}var XE=["from","folder","use","not_from","not_folder"],QE=["previous","next"],JE=["in","collection"];function fs(t,e){var r,n,i,s,a,o,l,c,u,f;if(t.isDynamic){let m=Zc(t.name);if(e.nodesInScope.length>0){let p=e.nodesInScope[e.nodesInScope.length-1];if(p!=null&&p.currentScope!=null){let d=Wa(p,p.currentScope),_=d.map(h=>h.name),P=ki(e.leftWord);if(_.includes(P))return ee(os(e))}}if(m=="status"&&((r=e.context)==null?void 0:r.parameterContext)!=null)return ee(Ab((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[]));if(m=="taxonomy"){let p=ki(t.name);if(e.project.hasTaxonomy(p)&&((s=e.context)==null?void 0:s.parameterContext)!=null)return ee(xb((o=(a=e.context.parameterContext.parameter)==null?void 0:a.getArrayValue())!=null?o:[],p,e.project))}}if(t.name=="filter"||t.name=="query_scope")return ee($c(e.project));if(e.nodesInScope.length>0){let m=e.nodesInScope[e.nodesInScope.length-1];if(m.hasMethodPart()&&QE.includes(m.getMethodNameValue())&&JE.includes(t.name))return ee(Eb(e.project))}return XE.includes(t.name)&&((l=e.context)==null?void 0:l.parameterContext)!=null?ee(Ha((f=(u=(c=e.context)==null?void 0:c.parameterContext.parameter)==null?void 0:u.getArrayValue())!=null?f:[],e.project)):null}var ZE={tagName:"collection:previous",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...as,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:Ya,resolveDynamicParameter:Xa,resolveSpecialType:us,suggestAlternativeParams:Ga,resovleParameterCompletionItems:fs,resolveCompletionItems:Qa,resolveDocumentation:t=>Re("collection:previous Tag","The `collection:previous` tag is used to show the entries that appear before the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the previous two entries, based on dates in ascending order. #}}
{{ collection:previous in="articles" limit="2" sort="date:asc" }}

{{ /collection:previous }}`,"https://statamic.dev/tags/collection-previous")},Ws=ZE;var tu=tt(Ws,"collection:older"),ru=tt(Ws,"collection:newer");var ew={tagName:"collection:count",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...as,{isRequired:!0,name:"in",aliases:["from"],description:"The collection from which to count entries",acceptsVariableInterpolation:!0,allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:us,resovleParameterCompletionItems:fs,resolveDocumentation:t=>Re("collection:count Tag","The `collection:count` tag returns the total number of entries in the specified collection(s). The collection count tag accepts the same parameters as the collection tag, allowing developers to count entries that meet specific conditions.",`Total entry count: {{ collection:count in="collection-name" }}
Draft count: {{ collection:count in="collection-name" status:in="draft" }}`,"https://statamic.dev/tags/collection-count")},nu=ew;var tw={tagName:"collection:next",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...as,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:Ya,resolveDynamicParameter:Xa,resolveSpecialType:us,suggestAlternativeParams:Ga,resovleParameterCompletionItems:fs,resolveCompletionItems:Qa,resolveDocumentation:t=>Re("collection:next Tag","The `collection:next` tag is used to show the entries that will appear after the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the next two entries, based on dates in ascending order. #}}
{{ collection:next in="articles" limit="2" sort="date:asc" }}

{{ /collection:next }}`,"https://statamic.dev/tags/collection-next")},iu=tw;function Qa(t){var r,n;let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="collection"||t.leftWord=="/collection")&&t.leftChar==":"){let i=t.project.getCollectionNames();for(let s=0;s<i.length;s++)e.push({label:i[s],kind:gl.CompletionItemKind.Field,sortText:"0"});return e.push(me(nu)),e.push(me(iu)),e.push(me(Ws)),e.push(me(tu)),e.push(me(ru)),{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}if(t.currentNode!=null&&t.currentNode.currentScope!=null){let i=Wa(t.currentNode,t.currentNode.currentScope),s=i.map(o=>o.name),a=ki(t.leftWord);if(a==="taxonomy")return ee(Rb(t));if(s.includes(a))return e=os(t),ee(e);if(t.isCaretInTag&&!((r=t.context)==null?void 0:r.isInParameter)&&["collection","/collection"].includes(t.leftWord)==!1&&t.leftChar!=" "){let o=[];for(let l=0;l<i.length;l++){let c=i[l];o.includes(c.name)==!1&&(e.push({label:c.name,detail:c.blueprintName,documentation:(n=c.instructionText)!=null?n:"",kind:gl.CompletionItemKind.Field}),o.push(c.name))}if(e.push({label:"taxonomy",insertText:"taxonomy:",kind:gl.CompletionItemKind.Field}),e.push({label:"status",insertText:"status:",kind:gl.CompletionItemKind.Field}),e.length>0)return mr(e)}}return ge}var rw={tagName:"collection",hideFromCompletions:!1,introducedIn:null,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:as,augmentScope:Ya,resolveDynamicParameter:Xa,resolveSpecialType:us,suggestAlternativeParams:Ga,resovleParameterCompletionItems:fs,resolveCompletionItems:Qa,resolveDocumentation:t=>Re("collection Tag","The `collection` tag provides access to entry data such as blog posts, products, etc.",`{{ collection:articles as="posts" }}

	{{ posts }}
		{{ title }}
	{{ /posts }}

{{ /collection:articles }}`,"https://statamic.dev/tags/collection")},cT=rw;var nw={tagName:"cache",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,allowsContentClose:!1,allowsArbitraryParameters:!1,resovleParameterCompletionItems:(t,e)=>t.name=="scope"?mt(["page","site","user"]):null,parameters:[{isRequired:!1,name:"for",description:"The duration the cache is valid for",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"key",description:"An arbitrary name the cache entry may be referenced by",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"scope",description:" The scope of the cached value. Either site or page.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:(t,e)=>{let r=t.findParameter("key"),n=null;if(r!=null){let i=r.value;i.trim().length>0&&(n={key:i,reference:t})}return{context:n,issues:[]}},resolveDocumentation:t=>Re("cache Tag","The `cache` tag can be used to save the results of an expensive template operation. The duration of the cache can be configured.",`{{ cache for="10 minutes" }}
    {{# Template code that won't be re-rendered for at least 10 minutes. #}}
{{ /cache }}`,"https://statamic.dev/tags/cache")},uT=nw;var iw={tagName:"dump",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.leftWord=="dump"&&t.leftChar==":"?ee(tT(t)):ge,resolveDocumentation:t=>Re("dump Tag","The `dump` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered.",`{{ collection:articles }}
	{{# View all data available, for each entry. #}}
    {{ dump }}
{{ /collection:articles }}`,"https://statamic.dev/tags/dump")},fT=iw;var sw={tagName:"404",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>Re("404 (Not Found) Tag","The `404` (Not Found) tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ 404 }}
{{ /unless }}`,"https://statamic.dev/tags/404")},pT=sw;var aw={tagName:"link",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The relative path",expectsTypes:["string"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!0,isDynamic:!1},{name:"absolute",description:"Whether to generate absolute URLs. Default false",expectsTypes:["boolean"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1},{name:"id",description:"The ID of the entry to link to",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1},{name:"in",description:"The handle of the site to link to.",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>L("link Tag","The `link` tag accepts relative URLs or entry IDs and generates fully-qualified URLs to the desired content.","https://statamic.dev/tags/link")},dT=aw;var mT={tagName:"loop",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(t,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:t}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:t=>L("loop Tag","The `loop` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")},hT={tagName:"range",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(t,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:t}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:t=>L("range Tag","The `range` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")};var $r=Q(zt());function Ue(t,e){return e.trim().length>0?eu(e):null}var Ja=[{isRequired:!1,name:"src",description:"The name of the partial view",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1}];var _l=Q(zt());function Za(t,e){var r;if(t.isDynamic&&e.currentNode!=null&&e.currentNode.getTagName()=="partial"&&e.currentNode.hasMethodPart()){let n=e.currentNode.getMethodNameValue();if(n.trim().length>0&&((r=ue.instance)==null?void 0:r.hasStructure())){let i=ue.instance.getStructure().findRelativeView(n);if(i!=null&&i.varReferenceNames.has(t.name)){let s=i.varReferenceNames.get(t.name);if(i.document!=null&&i.document.hasFrontMatter()){let a=i.document.getFrontMatterScope();if(a!=null){let o=a.getList(s);if(o!=null)return aT(o.getVariableNames())}}}}}if(t.name=="src"){let n=e.project.getViews(),i=[];return n.forEach(s=>{if(si.hasDetails(s.documentUri)){let a=si.documentDetails.get(s.documentUri);i.push({label:a.documentName+"("+s.relativeDisplayName+")",insertText:s.relativeDisplayName,detail:a.documentName,documentation:{kind:_l.MarkupKind.Markdown,value:a.documentDescription},kind:_l.CompletionItemKind.File})}else i.push({label:s.relativeDisplayName,kind:_l.CompletionItemKind.File})}),ee(i)}return null}var ow={tagName:"partial:exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:Ja,introducedIn:"3.2.7",resovleParameterCompletionItems:Za,resolveDocumentation:t=>L("partial:exists Tag","The `partial:exists` can be used within conditional statements to test if a partial exists.","https://statamic.dev/tags/partial-exists")},su=ow;var lw={tagName:"partial:if_exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:Ja,introducedIn:"3.2.7",resovleParameterCompletionItems:Za,resolveDocumentation:t=>L("partial:if_exists Tag","The `partial:if_exists` can be used to output the contents of a partial if it exists.","https://statamic.dev/tags/partial-if-exists")},au=lw;function eo(t){if(t.getTagName()!="partial")return null;let e="";if(t.hasMethodPart())e=t.getMethodNameValue();else{let r=t.findParameter("src");r!=null&&(e=r.value)}return e}var cw=[me(su),me(au)],uw={tagName:"partial",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!0,parameters:Ja,requiresClose:!1,allowsContentClose:!0,introducedIn:null,resolveDocumentation:t=>`**Partial Tag**  
Includes another view into the current template.  

[Documentation Reference](https://statamic.dev/tags/partial)
`,resolveDynamicParameter:Ue,resovleParameterCompletionItems:Za,resolveCompletionItems:t=>{let e=[];if(t.leftChar=='"'&&t.leftWord==':src="')return{items:[],analyzeDefaults:!0,isExclusiveResult:!1};if((t.leftWord=="partial"||t.leftWord=="/partial")&&t.leftChar==":"||t.leftWord=='src="'&&t.leftChar=='"')return t.project.getViews().forEach(n=>{let i=decodeURIComponent(n.documentUri);if(si.hasDetails(i)){let s=si.documentDetails.get(i);e.push({label:s.documentName+"("+n.relativeDisplayName+")",insertText:n.relativeDisplayName,detail:s.documentName,documentation:{kind:$r.MarkupKind.Markdown,value:s.documentDescription},kind:$r.CompletionItemKind.File})}else e.push({label:n.relativeDisplayName,kind:$r.CompletionItemKind.File})}),t.leftWord!='src="'&&(e=e.concat(cw)),{analyzeDefaults:!1,isExclusiveResult:!0,items:e};if(t.currentNode!=null&&t.project!=null){let r=eo(t.currentNode);if(r!=null&&r.trim().length>0){let n=t.project.findRelativeView(r);if(n!=null&&Se.hasDocument(n.documentUri)){let i=Se.getDocument(n.documentUri);if(i!=null){let s=i.getAllAntlersNodes(),a=fw(s),o=[];n.varReferenceNames!=null&&n.varReferenceNames.forEach((c,u)=>{a.push(u)});let l=[];if(n.injectsParameters.length>0){let c={start:{line:t.position.line,character:t.position.character-0},end:t.position};n.injectsParameters.forEach(u=>{let f=u.name+'="$1"';o.includes(u.name)||(o.push(u.name),l.push({label:u.name,kind:$r.CompletionItemKind.Value,insertTextFormat:$r.InsertTextFormat.Snippet,textEdit:$r.TextEdit.replace(c,f),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}if(a.length>0){let c={start:{line:t.position.line,character:t.position.character-0},end:t.position};a.forEach(u=>{let f=u+'="$1"';o.includes(u)||(o.push(u),l.push({label:u,kind:$r.CompletionItemKind.Value,insertTextFormat:$r.InsertTextFormat.Snippet,textEdit:$r.TextEdit.replace(c,f),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}return mr(l)}}}}return{analyzeDefaults:!0,isExclusiveResult:!1,items:[]}}};function fw(t){let e=[];return t.forEach(r=>{if(r.isTagNode||r.isClosingTag||r.isComment||r.hasMethodPart()&&r.getMethodNameValue().length>0||r.name!=null&&r.name.content.includes("["))return;let n=r.getTagName();!e.includes(n)&&n!="#"&&n!="slot"&&e.push(n)}),e}var gT=uw;var pw={tagName:"increment:reset",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:"3.2.28",parameters:[{isRequired:!0,name:"counter",aliases:[],description:"The incrementing counter to reset",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"to",aliases:[],description:"An optional value to reset the counter to before incrementing starts again",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveDocumentation:t=>Re("increment:reset Tag","The `increment:reset` tag can be used to reset the value of an incrementing counter.",`{{ array_variable }}
    {{ increment:counter_name }}
{{ /array_variable }}

{{ increment:reset counter="counter_name" }}
`,null)},ou=pw;var dw=[me(ou)],mw={tagName:"increment",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!1,name:"from",aliases:[],description:"The number to start incrementing by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"by",aliases:[],description:"The number to increment by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveCompletionItems:t=>t.leftWord=="increment"||t.leftWord=="/increment"&&t.leftChar==":"?ee(dw):ge,resolveDocumentation:t=>L("increment Tag","The `increment` tag can be used to increment a value each time the tag is encountered.","https://statamic.dev/tags/increment")},_T=mw;var yl=class{constructor(e){this.node=e}},yT={tagName:"yields",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(t,e)=>({context:new yl(t),issues:[]})},bT={tagName:"yield",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(t,e)=>({context:new yl(t),issues:[]}),resolveDocumentation:t=>L("yield Tag","The `yield` tag may be used to push rendered content to named regions within a template's structure.","https://statamic.dev/tags/yield")};var lu=Q(ot());var TT=[{handle:"access cp"},{handle:"configure collections"},{handle:"[view edit create delete publish reorder] {collection} entries"},{handle:"configure structures"},{handle:"[view edit] {structure} structure"},{handle:"edit {global} globals"},{handle:"[view upload edit move rename delete] {container} assets"},{handle:"[view perform] updates"},{handle:"[view edit create delete] users"},{handle:"change passwords"},{handle:"edit roles"},{handle:"configure forms"},{handle:"[view delete] {form} submissions"}];var ps=class{constructor(){this.contextItems=new Map;this.triggerNames=[];this.collectionTriggers=[];this.collectionTriggerCaps=[];this.globalTriggers=[];this.globalTriggerCaps=[];this.formTriggers=[];this.formTriggerCaps=[];this.structureTriggers=[];this.structureTriggerCaps=[];this.assetTriggers=[];this.assetTriggerCaps=[]}getCollectionTriggerCaps(){return this.collectionTriggerCaps}getGlobalTriggerCaps(){return this.globalTriggerCaps}getFormTriggerCaps(){return this.formTriggerCaps}getStructureTriggerCaps(){return this.structureTriggerCaps}getAssetTriggerCaps(){return this.assetTriggerCaps}loadCorePermissions(){this.registerPermissions(TT)}getTriggerNames(){return this.triggerNames}isCollectionTrigger(e){return this.collectionTriggers.includes(e)}isGlobalTrigger(e){return this.globalTriggers.includes(e)}isFormTrigger(e){return this.formTriggers.includes(e)}isStructureTrigger(e){return this.structureTriggers.includes(e)}isAssetTrigger(e){return this.assetTriggers.includes(e)}getTriggerContextItems(e){return this.contextItems.has(e)?this.contextItems.get(e):[]}registerSpecialTrigger(e,r,n){r=="{collection}"?(this.collectionTriggerCaps.includes(n)==!1&&this.collectionTriggerCaps.push(n),this.collectionTriggers.includes(e)==!1&&this.collectionTriggers.push(e)):r=="{structure}"?(this.structureTriggerCaps.includes(n)==!1&&this.structureTriggerCaps.push(n),this.structureTriggers.includes(e)==!1&&this.structureTriggers.push(e)):r=="{container}"?(this.assetTriggerCaps.includes(n)==!1&&this.assetTriggerCaps.push(n),this.assetTriggers.includes(e)==!1&&this.assetTriggers.push(e)):r=="{global}"?(this.globalTriggerCaps.includes(n)==!1&&this.globalTriggerCaps.push(n),this.globalTriggers.includes(e)==!1&&this.globalTriggers.push(e)):r=="{form}"&&(this.formTriggerCaps.includes(n)==!1&&this.formTriggerCaps.push(n),this.formTriggers.includes(e)==!1&&this.formTriggers.push(e))}addContextToTrigger(e,r){var n;this.triggerNames.includes(e)==!1&&this.triggerNames.push(e),this.contextItems.has(e)==!1?this.contextItems.set(e,[r]):(n=this.contextItems.get(e))==null||n.push(r)}registerPermissions(e){for(let r=0;r<e.length;r++){let n=e[r],i=[],s="",a="";if(n.handle.includes("[")&&n.handle.includes("]")){let o=n.handle.indexOf("["),l=n.handle.indexOf("]"),c=l-o,u=n.handle.substr(o+1,c-1).split(" ").filter(m=>m.trim().length>0),f=n.handle.substr(l+1).split(" ").filter(m=>m.trim().length>0);i=u,f.length==2?(s=f[0],a=f[1]):f.length==1&&(s="",a=f[0])}else{let o=n.handle.split(" ").filter(l=>l.trim().length>0);o.length==2&&(i=[o[0]],a=o[1])}for(let o=0;o<i.length;o++){let l=i[o];s.trim().length>0?this.registerSpecialTrigger(l,s,a):this.addContextToTrigger(l,a)}}}};ps.instance=null;(typeof ps.instance=="undefined"||ps.instance==null)&&(ps.instance=new ps,ps.instance.loadCorePermissions());var zr=ps;function NT(t,e){var n,i,s,a,o,l,c,u,f,m,p,d,_,P,h,y,g,N,S;let r=[];if(t.trim().length==0){let V=(i=(n=zr.instance)==null?void 0:n.getTriggerNames())!=null?i:[];for(let O=0;O<V.length;O++)r.push({label:V[O],kind:lu.CompletionItemKind.Value})}else{let V=t.split(" ").filter(te=>te.trim().length>0),O=V[0],Y=(a=(s=zr.instance)==null?void 0:s.getTriggerContextItems(O))!=null?a:[],z=(o=zr.instance)==null?void 0:o.isCollectionTrigger(O),X=(l=zr.instance)==null?void 0:l.isGlobalTrigger(O),K=(c=zr.instance)==null?void 0:c.isFormTrigger(O),re=(u=zr.instance)==null?void 0:u.isStructureTrigger(O),De=(f=zr.instance)==null?void 0:f.isAssetTrigger(O),de=[];if(V.length<=2){z?de=de.concat(e.project.getUniqueCollectionNames()):X?de=de.concat(e.project.getUniqueGlobalsNames()):K?de=de.concat(e.project.getUniqueFormNames()):re?de=de.concat(e.project.getUniqueNavigationMenuNames()):De&&(de=de.concat(e.project.getUniqueAssetNames())),Y.length>0&&(de=de.concat(Y)),de=[...new Set(de)];for(let te=0;te<de.length;te++)r.push({label:de[te],kind:lu.CompletionItemKind.Value})}else{let te=[];z?te=te.concat((p=(m=zr.instance)==null?void 0:m.getCollectionTriggerCaps())!=null?p:[]):X?te=te.concat((_=(d=zr.instance)==null?void 0:d.getGlobalTriggerCaps())!=null?_:[]):K?te=te.concat((h=(P=zr.instance)==null?void 0:P.getFormTriggerCaps())!=null?h:[]):re?te=te.concat((g=(y=zr.instance)==null?void 0:y.getStructureTriggerCaps())!=null?g:[]):De&&(te=te.concat((S=(N=zr.instance)==null?void 0:N.getAssetTriggerCaps())!=null?S:[])),te=[...new Set(te)];for(let We=0;We<te.length;We++)r.push({label:te[We],kind:lu.CompletionItemKind.Value})}}return r}function cu(t,e){var n,i,s,a;let r=Zc(t.name);return((n=e.context)==null?void 0:n.parameterContext)!=null&&["do","permission"].includes(r)?ee(NT((a=(s=(i=e.context)==null?void 0:i.parameterContext.parameter)==null?void 0:s.value)!=null?a:"",e)):null}var hw={tagName:"user:can",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:cu,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:t=>L("user:can Tag","The `user:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can")},to=hw;var gw={tagName:"user:logout",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>L("user:logout Tag","The `user:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout")},ro=gw;var _w={tagName:"user:logout_url",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>Re("user:logout_url","The `user:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ user:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url")},no=_w;var vT={tagName:"switch",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>L("switch Tag","The `switch` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")},PT={tagName:"rotate",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,introducedIn:null,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>L("rotate Tag","The `rotate` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")};var yw={tagName:"oauth",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"provider",description:"The OAuth provider to be used",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]},{name:"redirect",description:"The URL to be taken to after authenticating",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resovleParameterCompletionItems:(t,e)=>t.name=="provider"?mt(e.project.getOAuthProviders()):null,resolveDocumentation:t=>Re("oauth Tag","The `oauth` tag can be used to generate login URls for various third-party services.",'<a href="{{ oauth provider="github" }}">Sign In with Github</a>',"https://statamic.dev/tags/oauth")},IT=yw;var bw={tagName:"session:dump",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>L("session:dump Tag","The `session:dump` tag will display the contents of the user's session to the browser. This tag behaves similarly to the `dd` helper functions, but returns just the session data.","https://statamic.dev/tags/session-dump")},uu=bw;var Hs=class{constructor(e){this.node=e}};var Tw={tagName:"session:set",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:null,resolveDynamicParameter:Ue,resolveSpecialType:(t,e)=>({context:new Hs(t),issues:[]}),resolveDocumentation:t=>L("session:set Tag","The `session:set` tag is used to add new data to the user's session.","https://statamic.dev/tags/session-set")},fu=Tw;var Ys=class{constructor(){this.knownVariables=new Map}registerDocumentSessionVariables(e,r){this.knownVariables.has(e)||this.knownVariables.set(e,new Map);let n=this.knownVariables.get(e);n.clear();for(let i=0;i<r.length;i++){let s=r[i].node;if(s.hasParameters)for(let a=0;a<s.parameters.length;a++){let o=s.parameters[a];n.set(o.name,r[i])}}}getKnownSessionVariableNames(){let e=[];return this.knownVariables.forEach(r=>{r.forEach((n,i)=>{e.includes(i)==!1&&e.push(i)})}),e}};Ys.instance=null;(typeof Ys.instance=="undefined"||Ys.instance==null)&&(Ys.instance=new Ys);var Ks=Ys;var ST=Q(ot());function CT(t,e){let r=[],n=t.getArrayValue(),i=e.filter(s=>!n.includes(s));for(let s=0;s<i.length;s++)r.push({label:i[s],kind:ST.CompletionItemKind.Variable});return ee(r)}var Nw={tagName:"session:forget",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"keys",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The session keys to clear",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;if(t.name=="keys"&&((r=e.context)==null?void 0:r.parameterContext)!=null){let s=(i=(n=Ks.instance)==null?void 0:n.getKnownSessionVariableNames())!=null?i:[];if(e.context.parameterContext.parameter!=null)return CT(e.context.parameterContext.parameter,s)}return null},resolveDocumentation:t=>L("session:forget Tag","The `session:forget` tag is used to remove variables from the user's session.","https://statamic.dev/tags/session-forget")},pu=Nw;var vw={tagName:"session:flush",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>L("session:flush Tag","The `session:flush` tag will clear all values from the visitor's session. If the visitor is currently signed in they will also be signed out.","https://statamic.dev/tags/session-flush")},du=vw;var Pw={tagName:"session:flash",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:Ue,resolveSpecialType:(t,e)=>({context:new Hs(t),issues:[]}),resolveDocumentation:t=>L("session:flash Tag","The `session:flash` tag can be used to add a value to the user's session. Flashed values only persist for a single request, and are then removed.","https://statamic.dev/tags/session-flash")},mu=Pw;var Iw={tagName:"markdown:indent",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>L("markdown:indent Tag","The `markdown:indent` tag is similar to the markdown tag, but will ignore leading whitepsace while rendering the tag's content as markdown.","https://statamic.dev/tags/markdown-indent")},hu=Iw;var Sw=[me(hu)],Cw={tagName:"markdown",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="markdown"||t.leftWord=="/markdown")&&t.leftChar==":"?ee(Sw):ge,resolveDocumentation:t=>L("markdown Tag","The `markdown` tag can be used to render the tags contents as markdown.","https://statamic.dev/tags/markdown")},RT=Cw;var AT=Q(zt());function gu(t,e){let r=[],n=e;if(t.trim().length>0&&t.includes(".")&&t.endsWith(".")){let i=t.substr(0,t.length-1);n=n.filter(s=>s.startsWith(i))}for(let i=0;i<n.length;i++){let s=n[i],a=!0;t.includes(".")&&(s.startsWith(t)==!1?a=!1:s=s.substr(t.length)),a&&r.push({label:s,insertText:s,kind:AT.CompletionItemKind.Text})}return r}function xT(t,e){return gu(t,e.getRouteNames())}var Rw={tagName:"route",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:Ue,resolveCompletionItems:t=>{if(t.leftMeaningfulWord=="route"){let e=Jc(t);return ee(xT(e,t.project))}return ge},resolveDocumentation:t=>L("route Tag","The `route` tag can be used to generate a full URL [to a named route](https://laravel.com/docs/8.x/routing#named-routes), including any defined route parameters.","https://statamic.dev/tags/route")},ET=Rw;var _u=Q(ot()),wT=[{label:"301 Permanent",insertText:"301",kind:_u.CompletionItemKind.EnumMember},{label:"302 Temporary",insertText:"302",kind:_u.CompletionItemKind.EnumMember},{label:"404 Not Found",insertText:"404",kind:_u.CompletionItemKind.EnumMember}];var Aw={tagName:"redirect",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The destination URL",aliases:["url"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!0},{name:"response",description:"The HTTP response code to use",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:t=>t.name=="response"?ee(wT):ge,resolveDocumentation:t=>L("redirect Tag","The `redirect` tag can be used to redirect the site visitor to a URL or named route. An optional HTTP status code can also be specified on the response using the `response` parameter.","https://statamic.dev/tags/redirect")},OT=Aw;var DT=Q(ot());var $s=class{constructor(){this.knownSections=new Map}registerDocumentSections(e,r){this.knownSections.has(e)||this.knownSections.set(e,new Map);let n=this.knownSections.get(e);n.clear();for(let i=0;i<r.length;i++){let s=r[i];s.node.hasMethodPart()&&n.set(s.node.getMethodNameValue(),s)}}getKnownSectionNames(){let e=[];return this.knownSections.forEach(r=>{r.forEach((n,i)=>{e.includes(i)==!1&&e.push(i)})}),e}};$s.instance=null;(typeof $s.instance=="undefined"||$s.instance==null)&&($s.instance=new $s);var yu=$s;var xw={tagName:"section",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>{var e,r;if((t.leftWord=="section"||t.leftWord=="/section")&&t.leftChar==":"){let n=[],i=(r=(e=yu.instance)==null?void 0:e.getKnownSectionNames())!=null?r:[];for(let s=0;s<i.length;s++)n.push({label:i[s],kind:DT.CompletionItemKind.Field});return mr(n)}return ge},resolveDocumentation:t=>L("section Tag","The `section` tag is used to push content to a named region defined by the `yield` tag.","https://statamic.dev/tags/section")},LT=xw;var Ew={tagName:"obfuscate",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>L("obfuscate Tag","The `obfuscate` tag converts the tags's content into a format that is difficult for bots to read, but can easily be viewed by users within their browser.","https://statamic.dev/tags/obfuscate")},kT=Ew;var ww={tagName:"parent",hideFromCompletions:!1,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:t=>L("parent Tag","The `parent` tag provides access to data from the current page's parent (the URL one level above the current page).","https://statamic.dev/tags/parent")},MT=ww;function Pd(t,e){return gu(t,e.getTranslationKeys())}var Ow=["translate","trans","trans_choice"],bu={tagName:"translate",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!0,parameters:[{isRequired:!1,name:"key",description:"The key of the translation string to find",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"locale",description:"The locale to be used when translating",acceptsVariableInterpolation:!1,aliases:["site"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"count",description:"The number of items to use for pluralization",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r;if(t.name=="key"){let n="";return((r=e.context)==null?void 0:r.parameterContext)!=null&&e.context.parameterContext.parameter!=null&&(n=e.context.parameterContext.parameter.value),ee(Pd(n,e.project))}return ge},resolveDynamicParameter:Ue,resolveCompletionItems:t=>{if(t.leftMeaningfulWord!=null&&Ow.includes(t.leftMeaningfulWord)){let e=Jc(t);return ee(Pd(e,t.project))}return ge},resolveDocumentation:t=>L("trans Tag","The `trans` tag can be used to retrieve a string for the current locale's language file.","https://statamic.dev/tags/trans")},FT=tt(bu,"trans"),Id=tt(bu,"trans_choice");Id.resolveDocumentation=t=>L("trans_choice Tag","The `trans_choice` tag can be used to retrieve a pluralized string for the current locale's language file.","https://statamic.dev/tags/trans#pluralization");var Dw={tagName:"svg",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The SVG filename relative to the project root",expectsTypes:["string"],isDynamic:!1}],resolveDynamicParameter:Ue,resolveDocumentation:t=>L("svg Tag","The `svg` tag can be used to render inline SVGs, as well as set attributes on the rendered `<svg>` element.","https://statamic.dev/tags/svg")},VT=Dw;function Tu(t){return[{name:"basename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"extension",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"filename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"focus",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"focus_css",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"height",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_asset",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"is_image",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"path",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_bytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"size_megabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t},{name:"width",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:t}]}var Lw={tagName:"asset",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The path to the file",expectsTypes:["string"],isDynamic:!1,name:"url"}],augmentScope:(t,e)=>(e.addVariables(Tu(t)),e),resolveDocumentation:t=>Re("asset Tag","The `asset` tag can be used to retrive Assets by supplying a URL.",`{{ asset url="/url/for/asset.png" }}
    <img src="{{ url }}" alt="{{ alt }}" />
{{ /asset }}`,"https://statamic.dev/tags/asset")},qT=Lw;var BT=Q(ot());function Sd(t){let e=[],r=t.getUniqueAssetNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:BT.CompletionItemKind.Field});return e}var jT=["container","id","handle"],kw={tagName:"assets",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"container",aliases:["id","handle"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The handle of the asset container",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"folder",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Filters the resulting assets by specific folder",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"recursive",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Returns all assets in all subdirectories",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"limit",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Limits the total results",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sort entries by any asset variable",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>jT.includes(t.name)?ee(Sd(e.project)):ge,augmentScope:(t,e)=>{e.addVariables(Tu(t));let r="";if(t.name!=null&&t.name.getMethodName()!=null)r=t.name.getMethodName();else{let n=t.findAnyParameter(jT);n!=null&&n.containsSimpleValue()&&(r=n.value)}return r.length>0&&e.injectAssetContainer(t,r),e},resolveCompletionItems:t=>(t.leftWord=="assets"||t.leftWord=="/assets")&&t.leftChar==":"?ee(Sd(t.project)):ge,resolveDocumentation:t=>Re("assets Tag","The `assets` tag can be used to retrieve multiple Assets from an Asset container.",`{{ assets container="container-name" }}
    {{# Loop over all assets in the container. #}}
	<img src="{{ url }}" alt="{{ alt }}" />
{{ /assets }}`,"https://statamic.dev/tags/assets")},UT=kw;var Mw={tagName:"get_content",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!1,parameters:[{isRequired:!1,name:"from",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"The ID to retrieve data for",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"locale",aliases:["site"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The locale to show the content in",expectsTypes:["string"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>t.name=="locale"||t.name=="site"?mt(e.project.getSiteNames()):null,resolveDocumentation:t=>Re("get_content Tag","The `get_content` tag can be used to retrieve content from other entries. This tag accepts the ID of another entry, and will return access to all data for that entry.",`{{ get_content from="the-entry-id" }}
{{ /get_content }}`,"https://statamic.dev/tags/get_content")},GT=Mw;function WT(t){return[{name:"basename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"extension",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"filename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"is_image",dataType:"boolean",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"file",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"file",dataType:"last_modified",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_bytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_b",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_gb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_kb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_megabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t},{name:"size_mb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:t}]}var Fw={tagName:"get_files",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"in",aliases:["from"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The directory to find files in relative to the public directory",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"depth",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The depth of the subdirectories",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"not_in",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"The subdirectories or pattern to exclude",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_size",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],description:"The file size filter to use",isDynamic:!1},{isRequired:!1,name:"ext",aliases:["extension"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The extension(s) to filter by",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"include",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:["match"],description:"Filter files by a regular expression",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"exclude",description:"Excludes files by a regular expression",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_date",description:"Filters files by last modified date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",description:"Limits the total number of results",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"offset",description:"The number of entries the results should be offset by",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sorts the listing by extension, size, last_modified, or random",expectsTypes:["string"],isDynamic:!1}],augmentScope:(t,e)=>(e.addVariables(WT(t)),e),resolveDocumentation:t=>L("get_files Tag","The `get_files` tag can be used to display information about files on the site's local filesystem.","https://statamic.dev/tags/get_files")},HT=Fw;function Nu(t){return[{name:"width",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:t},{name:"height",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:t},{name:"url",dataType:"string",sourceName:"*internal.glide",sourceField:null,introducedBy:t}]}var YT=Q(ot());function Xn(t,e,r){var n,i,s,a,o,l,c,u,f,m,p,d;return{endLine:(s=(i=(n=r.valuePosition)==null?void 0:n.end)==null?void 0:i.line)!=null?s:0,startLine:(l=(o=(a=r.namePosition)==null?void 0:a.start)==null?void 0:o.line)!=null?l:0,endPos:(f=(u=(c=r.valuePosition)==null?void 0:c.end)==null?void 0:u.char)!=null?f:0,startPos:(d=(p=(m=r.namePosition)==null?void 0:m.start)==null?void 0:p.char)!=null?d:0,message:t,severity:YT.DiagnosticSeverity.Error}}var Cd=["greyscale","sepia"],Rd=["jpg","pjpg","png","gif","webp","avif","tif","bmp","psd"],KT=["auto","0","90","180","270"],io=[{isRequired:!1,name:"src",aliases:["path","id"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The URL of the image when not using shorthand syntax",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"tag",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Outputs an image tag when set to true",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"alt",description:"The alt attribute value to use when generating tags",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"absolute",description:"Whether to output full URLs",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{name:"width",expectsTypes:["number"],isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The width of the image, in pixels",isDynamic:!1},{name:"height",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],description:"The height of the image, in pixels",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"square",expectsTypes:["number"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets both then height and width of the iamge",isDynamic:!1,isRequired:!1},{name:"fit",expectsTypes:["string"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"How the image is fitted to its target dimensions",isDynamic:!1,isRequired:!1},{name:"crop",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Crops the image to the specific dimensions",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"orient",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Rotates the image",expectsTypes:["*"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!KT.includes(e.value)&&r.push(Xn("Invalid orient value",t,e)),r}},{name:"quality",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Defines the quality of the image",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"dpr",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"Defines the device pixel ratio",expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<1||r>8)&&n.push(Xn("dpr must be an integer between 1 and 8.",t,e)),n}},{name:"format",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Encodes the image to a specific format",expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Rd.includes(e.value)&&r.push(Xn("Format must be one of: "+Rd.join(","),t,e)),r}},{name:"bg",description:"Sets the background color for transparent images",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"blur",description:"Adds a blur effect to the image",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<0||r>100)&&n.push(Xn("blur must be a value between 0 and 100.",t,e)),n}},{name:"brightness",description:"Adjusts the image brightness",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<-100||r>100)&&n.push(Xn("brightness must be a value between -100 and 100.",t,e)),n}},{name:"contrast",description:"Adjusts the image contrast",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<-100||r>100)&&n.push(Xn("contrast must be a value between -100 and 100.",t,e)),n}},{name:"gamma",description:"Adjusts the image gamma",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseFloat(e.value),n=[];return e.containsSimpleValue()&&(r<.1||r>9.99)&&n.push(Xn("gamma must be a value between 0.1 and 9.99.",t,e)),n}},{name:"sharpen",description:"Sharpens the iamge",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<0||r>100)&&n.push(Xn("sharpen must be a value between 0 and 100.",t,e)),n}},{name:"pixelate",description:"Applies a pixelation effect to the image",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=parseInt(e.value),n=[];return e.containsSimpleValue()&&(r<0||r>100)&&n.push(Xn("pixelate must be a value between 0 and 100.",t,e)),n}},{name:"filter",description:"Applies a filter effect to the image",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(t,e)=>{let r=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Cd.includes(e.value)&&r.push(Xn("Filter must be one of: "+Cd.join(","),t,e)),r}},{name:"preset",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],description:"A collection of pre-configured image manipulation parameters.",isDynamic:!1,isRequired:!1}];function so(t,e){return t.name=="orient"?mt(KT):t.name=="format"?mt(Rd):t.name=="filter"?mt(Cd):t.name=="preset"?mt(e.project.getAssetPresets()):ge}var Vw={tagName:"glide:batch",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:io,introducedIn:null,augmentScope:(t,e)=>(e.addVariables(Nu(t)),e),resovleParameterCompletionItems:so,resolveDocumentation:t=>L("glide:batch Tag","The `glide:batch` tag is similar to the glide tag, but can be used to apply image manipulations to multiple images within a piece of content.","https://statamic.dev/tags/glide-batch")},vu=Vw;var qw={tagName:"glide:data_url",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:io,introducedIn:null,resovleParameterCompletionItems:so,resolveDocumentation:t=>L("glide:data_url Tag","The `glide:data_url` tag returns manipulated image datas as a data URI.",null)},Pu=qw;var Bw=[me(vu),me(Pu)],jw={tagName:"glide",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!1,parameters:io,introducedIn:null,augmentScope:(t,e)=>(e.addVariables(Nu(t)),e),resovleParameterCompletionItems:so,resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="glide"||t.leftWord=="/glide")&&t.leftChar==":"?ee(Bw):ge,resolveDocumentation:t=>L("glide Tag","The `glide` tag is used to manipulate images on the fly. Image manipulations may include resizing, cropping, or adjusting sharpness and constrast, amongst many others.","https://statamic.dev/tags/glide")},$T=jw;var zT={tagName:"iterate",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>L("iterate Tag","The `iterate` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")},XT={tagName:"foreach",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:t=>L("foreach Tag","The `foreach` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")};function QT(t){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t},{name:"name",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}]}var Iu=[{isRequired:!1,name:"id",description:"The ID of the content to localize",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"sort",description:"Sort by a sites key",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"current_first",description:"When true, ensures that the current locale is first",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"all",description:"When true, all locale data will be returned.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!0,name:"self",description:"When true, the current locale will be included.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"collection_term_workaround",description:"Disables the behavior introduced in https://github.com/statamic/cms/pull/6466",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1}];var Uw={tagName:"locales:count",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:Iu,introducedIn:"3.0.36",resolveDocumentation:t=>L("locales:count Tag","The `locales:count` tag can be used to count the number of locales the current content is available in.","https://statamic.dev/tags/locales-count")},Su=Uw;var Gw=[me(Su)],Ww={tagName:"locales",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:Iu,introducedIn:null,augmentScope:(t,e)=>(e.addVariableArray("locale",QT(t)),e.addVariable({name:"current",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"exists",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e.addVariable({name:"permalink",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:t}),e),resolveDocumentation:t=>L("locales Tag","The `locales` tag can be used to access all the locales the current content is available in.","https://statamic.dev/tags/locales"),resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="locale"||t.leftWord=="/locale")&&t.leftChar==":"?ee(Gw):ge},JT=Ww;var Hw={tagName:"mix",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",description:"The path to the versioned file, relative to the public directory",acceptsVariableInterpolation:!1,aliases:["path"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"in",description:"The location of the mix manifest file",acceptsVariableInterpolation:!1,aliases:["from"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:t=>L("mix Tag","The `mix` tag is used to return the path of CSS and JavaScript files versioned with [Laravel Mix](https://laravel.com/docs/8.x/mix).","https://statamic.dev/tags/mix")},ZT=Hw;var bl=Q(ot());function eN(t){let e=[],r=t.getUniqueUserGroupNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:bl.CompletionItemKind.Field});return e}function tN(t){let e=[],r=t.getUniqueUserRoleNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:bl.CompletionItemKind.Field});return e}function ao(t,e){let r=[],n=e.getUniqueUserGroupNames(),i=n.filter(s=>!t.includes(s));for(let s=0;s<i.length;s++)r.push({label:i[s],kind:bl.CompletionItemKind.Field});return r}function oo(t,e){let r=[],n=e.getUniqueUserRoleNames(),i=n.filter(s=>!t.includes(s));for(let s=0;s<i.length;s++)r.push({label:i[s],kind:bl.CompletionItemKind.Field});return r}var Yw={tagName:"user:in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="groups"||t.name=="group")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(ao((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveDocumentation:t=>L("user:in Tag","The `user:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in")},Cu=Yw;var Kw={tagName:"user:not_in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="groups"||t.name=="group")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(ao((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveDocumentation:t=>L("user:not_in Tag","The `user:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in")},lo=Kw;var $w={tagName:"user:is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="roles"||t.name=="role")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(oo((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveDocumentation:t=>L("user:is Tag","The `user:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is")},co=$w;var zw={tagName:"user:isnt",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="roles"||t.name=="role")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(oo((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveDocumentation:t=>L("user:isnt Tag","The `user:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt")},uo=zw;var Xw={tagName:"in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="groups"||t.name=="group")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(ao((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveCompletionItems:t=>(t.leftWord=="in"||t.leftWord=="/in")&&t.leftChar==":"?ee(eN(t.project)):ge,resolveDocumentation:t=>L("in Tag","The `in` tag can be used to check if the authenticated user belongs to one or more groups. This tag operates similarly to the `user:in` tag.","https://statamic.dev/tags/user-in")},rN=Xw;var Qw={tagName:"not_found",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>Re("404 (Not Found) Tag","The `not_found` tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ not_found }}
{{ /unless }}`,"https://statamic.dev/tags/404")},nN=Qw;var Jw={tagName:"is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(t,e)=>{var r,n,i;return(t.name=="roles"||t.name=="role")&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(oo((i=(n=e.context.parameterContext.parameter)==null?void 0:n.getArrayValue())!=null?i:[],e.project)):null},resolveCompletionItems:t=>(t.leftWord=="is"||t.leftWord=="/is")&&t.leftChar==":"?ee(tN(t.project)):ge,resolveDocumentation:t=>L("is Tag","The `is` tag can be used to check whether the currently authenticated user has one or more roles. This tag behaves the same as the `user:is` tag.","https://statamic.dev/tags/user-is")},iN=Jw;var Zw={tagName:"widont",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>Re("widont Tag","The `widont` tag is similar to the [widont modifier](https://statamic.dev/modifiers/widont), and will attempt to prevent lines with a single word from appearing within the tags rendered output.",`{{ widont }}
    {{ content }}
{{ /widont }}`,null)},sN=Zw;var Ru=[{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"id",description:"The user ID to fetch",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"email",description:"The email address to find the user by",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"field",description:"The field to fetch the user by",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"value",description:"The value to search for",expectsTypes:["string"],isDynamic:!1}];var eO={tagName:"user:profile",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Ru,introducedIn:null,augmentScope:(t,e)=>(e.injectBlueprint(t,"user"),e),resovleParameterCompletionItems:(t,e)=>t.name=="field"?ee(Yc(e.project.getUserFields())):ge,resolveDocumentation:t=>L("user:profile Tag","The `user:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null)},fo=eO;var aN={tagName:"dd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>Re("dd Tag","The `dd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the dd tag.
	#}}
    {{ dd }}
{{ /collection:articles }}`,null)},oN={tagName:"ddd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>Re("ddd Tag","The `ddd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the ddd tag.
	#}}
    {{ ddd }}
{{ /collection:articles }}`,null)};var tO={tagName:"path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["src"],allowsVariableReference:!0,description:"The path source",name:"to",isDynamic:!1,expectsTypes:["string"]},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],description:"Whether to generate absolute paths",expectsTypes:["boolean"],isDynamic:!1,name:"absolute"}],resolveDocumentation:t=>L("path Tag","The `path` tag can be used to generate URLs from relative URLs, or an entry ID.",null)},lN=tO;var rO={tagName:"user:cant",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:cu,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:t=>L("user:cant Tag","The `user:cant` tag is used to check if the currently authenticated user does not have a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user does not have the specified permissions.","https://statamic.dev/tags/user-can#cant")},Au=rO;var nO={tagName:"query",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,parameters:[{name:"builder",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The query to evaluate",expectsTypes:["string"],isRequired:!0,isDynamic:!1}]},cN=nO;var zs=Q(ot());var pi=[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"src",description:"The relative path to the file",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"cache_bust",description:"Whether to output the last modified date",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"version",description:"Whether to check a versioning manifest to produce the final URL",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"absolute",description:"Generate absolute URLs or not",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"locale",description:"The locale the path should be generated in",expectsTypes:["string"],isDynamic:!1}];var iO=[{label:"asset",kind:zs.CompletionItemKind.Text},{label:"css",kind:zs.CompletionItemKind.Text},{label:"img",kind:zs.CompletionItemKind.Text},{label:"js",kind:zs.CompletionItemKind.Text},{label:"output",kind:zs.CompletionItemKind.Text},{label:"path",kind:zs.CompletionItemKind.Text}],sO={tagName:"theme",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,introducedIn:null,injectParentScope:!1,parameters:pi,resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="theme"||t.leftWord=="/theme")&&t.leftChar==":"?ee(iO):ge},uN=sO;var Ad={tagName:"theme:path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:pi,resolveDocumentation:t=>L("theme:path Tag","The `theme:path` tag may be used to generate URLs for public assets. This tag may also optionally add the current locale, generate relative URLs, or add cache busting URL parameters to the end of the generated URL.",null)},fN=tt(Ad,"theme:asset");var aO={tagName:"theme:css",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...pi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:t=>L("theme:css Tag","The `theme:css` tag may be used to generate a CSS path relative to a public `css/` directory for any arbitrary file path. This tag may also optionally create the HTML `link` tag.",null)},pN=aO;var oO={tagName:"theme:img",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...pi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]},{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"alt",description:"The alt text to use when generating the HTML tag",expectsTypes:["string"]}],resolveDocumentation:t=>L("theme:img Tag","The `theme:img` tag may be used to generate an image path relative to a public `img/` directory for any arbitrary file path. This tag may also optionally create the HTML `img` tag.",null)},dN=oO;var lO={tagName:"theme:js",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...pi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:t=>L("theme:js Tag","The `theme:js` tag may be used to generate a JavaScript path relative to a public `js/` directory for any arbitrary file path. This tag may also optionally create the HTML `script` tag.",null)},mN=lO;var cO={tagName:"theme:output",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"src",description:"The path to the file",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"as",description:"An optional alias for the contents variable",expectsTypes:["string"],isDynamic:!1}],augmentScope:(t,e)=>{if(t.isClosedBy!=null){let r=t.findParameter("as");r!=null?e.addVariable({name:r.value,dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:t}):e.addVariable({name:"output_contents",dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:t})}return e},resolveDocumentation:t=>L("theme:output Tag","The `theme:output` tag may be used to output the contents of any arbitrary file, relative to the site's `resources/` directory.",null)},hN=cO;var uO={tagName:"scope",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveDocumentation:t=>Re("scope Tag","The `scope` tag creates a copy of all available variables, and saves them to a new  *array* variable defined by the tag's method part.",`{{ scope:scope_name }}
    {{ scope_name:title }}
{{ /scope:scope_name }}
`,null)},gN=uO;var fO={tagName:"if",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ue,resolveDocumentation:t=>L("if Conditional Control Structure","The contents of the `if` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},_N=fO;var pO={tagName:"elseif",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ue,resolveDocumentation:t=>L("elseif Conditional Control Structure","The contents of the `elseif` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},yN=pO;var dO={tagName:"else",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:t=>L("else Conditional Control Structure","The contents of the `else` control structure will be evaluated when all previous conditional branch conditions were not met.","https://statamic.dev/antlers#conditions")},bN=dO;var TN=Q(ot());var mO={tagName:"session:has",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:"3.1.28",resolveDynamicParameter:Ue,resolveDocumentation:t=>L("session:has Tag","The `session:has` tag can be used to determine of the user's session contains a specific variable.","https://statamic.dev/tags/session-has")},xu=mO;var hO=[me(fu),me(mu),me(pu),me(du),me(xu),me(uu)],gO={tagName:"session",requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",description:"An optional alias for the session data",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveCompletionItems:t=>{var e,r;if(t.isPastTagPart==!1&&(t.leftWord=="session"||t.leftWord=="/session")&&t.leftChar==":"){let n=(r=(e=Ks.instance)==null?void 0:e.getKnownSessionVariableNames())!=null?r:[],i=[];i=i.concat(hO);for(let s=0;s<n.length;s++)i.push({label:n[s],kind:TN.CompletionItemKind.Variable});return ee(i)}return ge},augmentScope:(t,e)=>{var s,a;let r=t.findParameter("as"),n=(a=(s=Ks.instance)==null?void 0:s.getKnownSessionVariableNames())!=null?a:[],i=[];for(let o=0;o<n.length;o++)i.push({dataType:"*",name:n[o],sourceField:null,sourceName:"project.session",introducedBy:t});return r==null?e.addVariables(i):e.addVariableArray(r.value,i),e}},NN=gO;var Tl={tagName:"user:forgot_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ue,augmentScope:(t,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:t}]),e),resolveDocumentation:t=>L("user:forgot_password_form Tag",'The `user:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form")},xd=tt(Tl,"member:forgot_password_form");xd.resolveDocumentation=t=>L("member:forgot_password_form Tag",'The `member:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form");var Nl={tagName:"user:reset_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ue,augmentScope:(t,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:t}]),e),resolveDocumentation:t=>L("user:reset_password_form Tag","The `user:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form")},Ed=tt(Nl,"member:reset_password_form");Ed.resolveDocumentation=t=>L("member:reset_password_form Tag","The `member:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form");function vN(t,e){return{sourceName:e.blueprintName,dataType:e.type,name:e.name,sourceField:e,introducedBy:t}}function PN(t){let e=new Map;for(let r=0;r<t.length;r++)e.set(t[r].name,t[r]);return e}function po(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push({sourceName:i.blueprintName,dataType:i.type,name:i.name,sourceField:i,introducedBy:t})}return r}function Eu(t){return[{name:"handle",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"display",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"type",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"field",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"error",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"instructions",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t},{name:"old",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:t}]}var vl={tagName:"user:register_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after registering",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed registration attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ue,augmentScope:(t,e)=>{e.addVariableArray("fields",Eu(t)),e.addVariable({name:"errors",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"old",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"error",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t}),e.addVariable({name:"success",dataType:"string",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:t});let r=e.statamicProject.getUserFields();if(r.length>0){let n=po(t,r);e.addVariableArray("old",n),e.addVariableArray("error",n)}return e},resolveDocumentation:t=>L("user:register_form  Form Tag","The `user:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form")},wd=tt(vl,"member:register_form");wd.resolveDocumentation=t=>L("member:register_form Tag","The `member:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form");var _O=[me(co),me(lo),me(uo),me(fo),me(to),me(Au),me(Tl),me(ro),me(no),me(vl),me(Nl)],yO={tagName:"user",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Ru,introducedIn:null,resovleParameterCompletionItems:(t,e)=>e.isPastTagPart==!1&&e.currentNode!=null&&e.currentNode.methodIsEmptyOrMatches("profile")&&t.name=="field"?ee(Yc(e.project.getUserFields())):ge,augmentScope:(t,e)=>(t.methodIsEmptyOrMatches("profile")&&e.injectUserFields(t),e),resolveCompletionItems:t=>(t.leftWord=="user"||t.leftWord=="/user"||t.leftWord=="member"||t.leftWord=="/member")&&t.leftChar==":"?ee(_O):ge,resolveDocumentation:t=>L("user Tag","The `user` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null)},wu=yO;var Ou=tt(wu,"member"),Od=tt(co,"member:is"),Dd=tt(uo,"member:isnt"),Ld=tt(fo,"member:profile"),kd=tt(to,"member:can"),Md=tt(ro,"member:logout"),Fd=tt(no,"member:logout_url"),Vd=tt(Cu,"member:in"),qd=tt(lo,"member:not_in");Ou.hideFromCompletions=!0;Ou.resolveDocumentation=t=>L("member Tag","The `member` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);Od.resolveDocumentation=t=>L("member:is Tag","The `member:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is");Dd.resolveDocumentation=t=>L("member:isnt Tag","The `member:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt");Ld.resolveDocumentation=t=>L("member:profile Tag","The `member:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);kd.resolveDocumentation=t=>L("member:can Tag","The `member:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can");Md.resolveDocumentation=t=>L("member:logout Tag","The `member:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout");Fd.resolveDocumentation=t=>Re("member:logout_url","The `member:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ member:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url");Vd.resolveDocumentation=t=>L("member:in Tag","The `member:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in");qd.resolveDocumentation=t=>L("member:not_in Tag","The `member:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in");function ds(t){return[{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:t},{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:t}]}var CN=Q(ot());var Bd=["from","taxonomy","is","use","folder"],jd=["not_from","not_in","dont_use","not_taxonomy"];var Ud=Bd;Ud=Ud.concat(jd);function IN(t,e){var r,n,i,s,a,o,l,c;if(e.nodesInScope.length>0){let u=e.nodesInScope[e.nodesInScope.length-1];if(u!=null&&u.currentScope!=null){let f=mo(u,e.project),m=e.project.getTaxonomyBlueprintFields(f),p=m.map(_=>_.name),d=ki(e.leftWord);if(p.includes(d))return ee(os(e))}}return t.name=="collection"&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(Ha((s=(i=(n=e.context)==null?void 0:n.parameterContext.parameter)==null?void 0:i.getArrayValue())!=null?s:[],e.project)):t.name=="filter"||t.name=="query_scope"?ee($c(e.project)):Ud.includes(t.name)&&((a=e.context)==null?void 0:a.parameterContext)!=null?ee(SN((c=(l=(o=e.context)==null?void 0:o.parameterContext.parameter)==null?void 0:l.getArrayValue())!=null?c:[],e.project)):null}function mo(t,e){let r=[];if(t.hasMethodPart())return r.push(t.getMethodNameValue()),r;let n=t.findAnyParameter(Bd),i=t.findAnyParameter(jd),s=[],a=[];return typeof n!="undefined"&&n!==null&&(n.value.trim()==="*"?(s=e.getUniqueTaxonomyNames(),typeof i!="undefined"&&i!==null&&i.isVariableReference==!1&&i.hasInterpolations()==!1&&(a=i.getArrayValue())):n.isVariableReference==!1&&n.hasInterpolations()==!1&&(s=n.getArrayValue())),a.length>0?r=s.filter(function(o){return a.includes(o)==!1}):r=s,r}function SN(t,e){let r=[],n=e.getUniqueTaxonomyNames().filter(i=>!t.includes(i));for(let i=0;i<n.length;i++)r.push({label:n[i],kind:CN.CompletionItemKind.Variable});return r}function RN(t,e){let r=mo(t,e.statamicProject),n=e.statamicProject.getTaxonomyBlueprintFields(r),i=t.findParameter("collection");if(e.addBlueprintFields(t,n),e.addVariables([{name:"first",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"last",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"index",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"total_results",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t},{name:"entries_count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:t}]),e.addVariables(ds(t)),typeof i!="undefined"&&i!==null){let s=i.getArrayValue();if(s.length>0){let a=e.statamicProject.getBlueprintFields(s);e.introduceScopedAliasScope(t,"entries","entries",a).addVariables(ls(t))}else e.addVariableArray("entries",ds(t).concat(ls(t)))}else e.addVariableArray("entries",ds(t).concat(ls(t)));return e}var bO=[{name:"from",description:"The taxonomy to use",aliases:["taxonomy","is","use","folder"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"not_from",description:"Taxonomies to exclude",aliases:["not_in","not_folder","dont_use","not_taxonomy"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string","array"],isRequired:!1,isDynamic:!1},{name:"min_count",description:"The minimum number of entries a taxonomy term must have to be returned",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"collection",description:"Filter the terms to those that appear in the specified collections",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"sort",description:"The field to sort terms by",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope",expectsTypes:["string"],isDynamic:!1}],AN=bO;var Gd=Q(ot());function xN(t){var r,n;let e=[];if(t.currentNode!=null&&t.currentNode.currentScope!=null){let i=mo(t.currentNode,t.project),s=t.project.getTaxonomyBlueprintFields(i),a=s.map(l=>l.name),o=ki(t.leftWord);if(a.includes(o))return ee(os(t));if(t.isCaretInTag&&!((r=t.context)==null?void 0:r.interpolatedContext)&&["taxonomy","/taxonomy"].includes(t.leftWord)==!1){let l=[];for(let c=0;c<s.length;c++){let u=s[c];l.includes(u.name)==!1&&(e.push({label:u.name,detail:u.blueprintName,documentation:(n=u.instructionText)!=null?n:"",kind:Gd.CompletionItemKind.Field}),l.push(u.name))}if(e.length>0)return mr(e)}}if((t.leftWord=="taxonomy"||t.leftWord=="/taxonomy")&&t.leftChar==":"){let i=t.project.getUniqueTaxonomyNames();for(let s=0;s<i.length;s++)e.push({label:i[s],kind:Gd.CompletionItemKind.Field});return mr(e)}return ge}var TO={tagName:"taxonomy",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:AN,resolveDynamicParameter:Ue,resolveCompletionItems:xN,resovleParameterCompletionItems:IN,augmentScope:RN,resolveDocumentation:t=>L("taxonomy Tag","The `taxonomy` tag may be used to retrieve taxonomy entries. The taxonomy tag can also be used to access entries associated with any given taxonomy term.","https://statamic.dev/tags/taxonomy")},EN=TO;var Wd=Q(ot());function wN(t,e){e.addVariables([{name:"is_published",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_page",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"has_entries",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_parent",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"is_external",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"depth",dataType:"number",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"children",dataType:"array",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:t},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:t}]);let r=e.statamicProject.getUniqueCollectionNames(),n=[],i=!1;if(t.hasMethodPart()){let s=t.getMethodNameValue().trim().toLowerCase();if(s.startsWith("collection:")){let a=s.split(":").pop();i=!0,n.push(a)}else s=="pages"?(i=!0,n.push("pages")):(i=!1,n.push(s))}else{let s=t.findParameter("handle");s!=null&&(r.includes(s.value)?i=!0:i=!1,n.push(s.value))}if(i){let s=e.statamicProject.getBlueprintFields(n);e.addBlueprintFields(t,s),e.expandScopedAliasScope(t,"page","page",s)}else{let s=Kc(ds(t));e.addBlueprintFields(t,s),e.expandScopedAliasScope(t,"page","page",s)}return e}var NO={tagName:"nav:breadcrumbs",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:[{name:"include_home",description:"Whether to include the home page in the first level",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"reverse",description:"Whether to reverse the order of links",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"trim",description:"Whether to trim the whitespace after each iteration of the loop",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],augmentScope:(t,e)=>(e.addVariables([{name:"is_current",dataType:"boolean",sourceName:"*internal.nav.breadcrumbs",sourceField:null,introducedBy:t}]),e.addVariables(ds(t)),e),resolveDocumentation:t=>L("nav:breadcrumbs Tag","The `nav:breadcrumbs` tag can be used to retrieve the URLs of all pages that make up the current URL back to the site's home page.","https://statamic.dev/tags/nav-breadcrumbs")},Du=NO;function ON(t,e){if(t.name=="handle"){let r=e.project.getUniqueCollectionNames(),n=e.project.getUniqueNavigationMenuNames(),i=[];return i=r,i=i.concat(n),i=[...new Set(i)],mt(i)}return null}var vO=[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["handle"],allowsVariableReference:!1,name:"for",description:"The navigation or collection to use",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],name:"from",description:"The starting point for the navigation",allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"show_unpublished",description:"Whether to include unpublished content",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"include_home",description:"Whether to include the home page in the tree",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"max_depth",description:"The maximum depth of the navigation or structure",expectsTypes:["number"],isDynamic:!1}],DN=vO;var Hd={tagName:"structure",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,injectParentScope:!1,parameters:DN,augmentScope:wN,resovleParameterCompletionItems:ON,resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="nav"||t.leftWord=="/nav"||t.leftWord=="structure"||t.leftWord=="/structure")&&t.leftChar==":"){let r=t.project.getUniqueNavigationMenuNames();for(let n=0;n<r.length;n++)e.push(ss(r[n],"",""));return(t.leftWord=="nav"||t.leftWord=="/nav")&&e.push(me(Du)),e.push(ss("collection","","")),e.push({label:"collection",kind:Wd.CompletionItemKind.Text}),mr(e)}if((t.leftWord=="nav:collection"||t.leftWord=="/nav:collection"||t.leftWord=="collection"||t.leftWord=="/collection"||t.leftWord=="structure:collection"||t.leftWord=="/structure:collection")&&t.leftChar==":"){let r=t.project.getUniqueCollectionNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:Wd.CompletionItemKind.Field});return mr(e)}return ge},resolveDocumentation:t=>L("nav Tag","The `nav` tag can be used to iterate structured collections or navigation menus.","https://statamic.dev/tags/nav")},LN=tt(Hd,"nav");var FN=Q(ot());function kN(t){return[{name:"success",dataType:"string",sourceField:null,sourceName:"*internal.forms",introducedBy:t},{name:"submission_created",dataType:"boolean",sourceField:null,sourceName:"*internal.forms",introducedBy:t}]}var PO={name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},di=PO;var Yd=Q(ot()),IO=[{label:"GET",kind:Yd.CompletionItemKind.EnumMember},{label:"POST",kind:Yd.CompletionItemKind.EnumMember}],MN=IO;var Qn=["in","handle","is","form","formset"];function ho(t,e){return Qn.includes(t.name)?mt(e.project.getUniqueFormNames()):t.name=="method"?ee(MN):t.name=="files"?ee($a):null}function mi(t,e){let r=t.structure.findParentWithName("form:set");return r!=null?{context:r,issues:[]}:{context:null,issues:[]}}var SO=["set","create","errors","success","submissions","submission"];function Xs(t){if(t.reference!=null&&"tagPart"in t.reference){let n=t.reference;if(n.nameMatches("form:set"))return Xs(n)}let e=t.findAnyParameter(Qn),r=t.getMethodNameValue();return r!=null&&SO.includes(r)==!1?r:typeof e!="undefined"&&e!==null&&e.containsSimpleValue()?e.value:""}var CO={tagName:"form:create",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[di,{name:"method",description:"The HTTP method to use",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"files",description:"Indicates if the form sends file data",aliases:[],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveSpecialType:mi,resovleParameterCompletionItems:ho,resolveDynamicParameter:Ue,augmentScope:(t,e)=>{e.addVariables(kN(t)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:t}),e.addVariableArray("fields",Eu(t));let r=Xs(t);if(r.length>0){let n=e.statamicProject.getFormBlueprintFields(r),i=po(t,n);e.addVariableArray("old",i),e.addVariableArray("error",i)}return e},resolveDocumentation:t=>L("form:create Tag","The `form:create` tag can be used to access form data, generate field HTML markup, and handle form validation errors.","https://statamic.dev/tags/form-create")},Lu=CO;var RO={tagName:"form:errors",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[di],resolveSpecialType:mi,resovleParameterCompletionItems:(t,e)=>Qn.includes(t.name)?mt(e.project.getUniqueFormNames()):null,resolveDocumentation:t=>L("form:errors Tag","The `form:errors` tag can be used to retrieve validation errors after a user has submitted a form.","https://statamic.dev/tags/form-errors")},ku=RO;var AO={tagName:"form:set",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!0}],resovleParameterCompletionItems:ho,resolveDocumentation:t=>L("form:set Tag","The `form:set` tag can be used to set the form handle on all nested form tags.","https://statamic.dev/tags/form-set")},Mu=AO;var xO={tagName:"form:submission",requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[di],resolveSpecialType:mi,resovleParameterCompletionItems:(t,e)=>Qn.includes(t.name)?mt(e.project.getUniqueFormNames()):null,augmentScope:(t,e)=>{let r=Xs(t);if(r.length>0){let n=e.statamicProject.getFormBlueprintFields(r);e.addBlueprintFields(t,n)}return e},resolveDocumentation:t=>L("form:submission Tag","The `form:submission` tag can be used to access the form submission submitted by the current user.","https://statamic.dev/tags/form-submission")},Fu=xO;var EO={tagName:"form:submissions",allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[di],resolveSpecialType:mi,resovleParameterCompletionItems:(t,e)=>Qn.includes(t.name)?mt(e.project.getUniqueFormNames()):null,augmentScope:(t,e)=>{if(t.isClosingTag)return e;let r=Xs(t);if(r.length>0){let n=e.statamicProject.getFormBlueprintFields(r);e.addBlueprintFields(t,n)}return e.addVariable({name:"date",dataType:"date",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e.addVariable({name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e.addVariable({name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:t}),e},resolveDocumentation:t=>L("form:submissions Tag","The `form:submissions` tag can be used to fetch previously saved submissions for a form.","https://statamic.dev/tags/form-submissions")},Vu=EO;var wO={tagName:"form:success",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[di],resolveSpecialType:mi,resovleParameterCompletionItems:(t,e)=>Qn.includes(t.name)?mt(e.project.getUniqueFormNames()):null,resolveDocumentation:t=>L("form:success Tag","The `form:success` tag can be used to check if a form submission was successful or not.","https://statamic.dev/tags/form-success")},qu=wO;var OO=[me(Mu),me(Lu),me(ku),me(qu),me(Vu),me(Fu)],DO={tagName:"form",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resovleParameterCompletionItems:ho,resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="form"||t.leftWord=="/form")&&t.leftChar==":"){let r=t.project.getUniqueFormNames();e=e.concat(OO);for(let n=0;n<r.length;n++)e.push({label:r[n],kind:FN.CompletionItemKind.Field});return mr(e)}return ge}},VN=DO;var Kd={tagName:"search:results",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"index",description:"The index to search in",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"query",description:"The query string parameter to use",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"limit",description:"The maximum number of search results to return",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{name:"offset",description:"The number of results to skip",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether not to paginate entry results",expectsTypes:["boolean"],isRequired:!1,name:"paginate",isDynamic:!1},{name:"as",description:"Specifies an alias for search results",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"supplement_data",description:"Controls whether non-indexed fields are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:(t,e)=>t.name=="index"?mt(e.project.getSearchIndexes()):null,augmentScope:(t,e)=>{e.addVariables([{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t}]);let r=t.findParameter("as");return r!=null&&r.value.trim().length>0?e.addVariableArray(r.value,qN(t)):e.addVariables(qN(t)),e},resolveDocumentation:t=>L("search:results Tag","The `search:results` tag provides access to all data that was returned as a result of a user's search.","https://statamic.dev/tags/search")},LO=[me(Kd)];function qN(t){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"content",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"is_term",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"count",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"index",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"search_score",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:t},{name:"_highlightResult",dataType:"array",sourceField:null,sourceName:"*internal.search.results",introducedBy:t}]}var BN={tagName:"search",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveCompletionItems:t=>t.isPastTagPart==!1&&(t.leftWord=="search"||t.leftWord=="/search")&&t.leftChar==":"?mr(LO):ge};function $d(t){return[{name:"email",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t},{name:"password",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t}]}var zd={tagName:"user:login_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after logging in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed login attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ue,augmentScope:(t,e)=>(e.addVariables([{name:"errors",dataType:"array",sourceName:"*internal.user.login",sourceField:null,introducedBy:t},{name:"success",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:t}]),e.addVariables($d(t)),e.addVariableArray("old",$d(t)),e.addVariableArray("error",$d(t)),e),resolveDocumentation:t=>L("user:login_form Tag","The `user:login_form` tag can be used to quickly create a form that users can use to authenticate with the site.","https://statamic.dev/tags/user-login_form")},jN=tt(zd,"member:login_form");var kO={tagName:"noparse",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>L("noparse Tag","The `noparse` tag is used prevent blocks of Antlers code from being parsed, removing the need to escape individual Antlers code regions.","https://statamic.dev/antlers#the-noparse-tag")},UN=kO;var MO={tagName:"unless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ue,resolveDocumentation:t=>L("unless Conditional Control Structure","The `unless` control structure operates the same as an `if` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},GN=MO;var FO={tagName:"elseunless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ue,resolveDocumentation:t=>L("elseunless Conditional Control Structure","The `elseunless` control structure operates the same as an `elseif` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},WN=FO;var HN=Q(zt());var YN={tagName:"installed",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!0,introducedIn:"3.1.19",parameters:[],resolveCompletionItems:t=>{if(t.project!=null){let e=t.project.getComposerPackages(),r=[];return e.forEach((n,i)=>{r.push({label:n.name,kind:HN.CompletionItemKind.Text})}),ee(r)}return ge},resolveDocumentation:t=>Re("installed Tag","The `installed` tag is used to check if the site has a specific Composer package available.",`{{ if {installed:composer/package-name} }}
    {{# Package is availabl.e #}}
{{ else }}
    {{# Something else. #}}
{{ /if }}`,"https://statamic.dev/tags/installed")};var VO={tagName:"relate",hideFromCompletions:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[]},KN=VO;var go=[{name:"bag",description:"The error message bag to retrieve errors from.",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}];var qO={tagName:"get_errors",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:go,introducedIn:"3.2.23",augmentScope:(t,e)=>{var r;if(t.isClosingTag)return e;if(((r=t.name)==null?void 0:r.methodPart)==null){let n=e.copy();n.addVariable({dataType:"string",introducedBy:t,name:"field",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"field",refFieldSetField:null,sets:null,type:"string"}});let i=n.copy();i.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),n.addScopeList("messages",i),e.addScopeList("fields",n)}else{let n=e.copy();n.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",n)}return e},resolveDocumentation:t=>L("get_errors Tag","The `get_errors` tag can be used to retrieve form validation errors.","https://statamic.dev/tags/get_errors")},$N=qO;var BO={tagName:"get_errors:all",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:go,introducedIn:null,augmentScope:(t,e)=>{if(t.isClosingTag)return e;let r=e.copy();return r.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_errors.all",sourceField:{blueprintName:"*internal.tag.get_errors.all",displayName:"get_errors:all",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",r),e},resolveDocumentation:t=>L("get_errors:all Tag","The `get_errors:all` tag can be used to retrieve all form validation errors.","https://statamic.dev/tags/get_errors#list-all-validation-errors")},zN=BO;var jO={tagName:"get_error",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:go,introducedIn:null,augmentScope:(t,e)=>(t.isClosingTag||e.addVariable({dataType:"string",introducedBy:t,name:"message",sourceName:"*internal.tag.get_error",sourceField:{blueprintName:"*internal.tag.get_error",displayName:"get_error",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e),resolveDocumentation:t=>L("get_error Tag","The `get_error` tag can be used to retrieve the first error message for a specific field.","https://statamic.dev/tags/get_errors#get-the-first-error-for-a-specific-field")},XN=jO;var UO={tagName:"set",hideFromCompletions:!0,allowsArbitraryParameters:!0,requiresClose:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[]},QN=UO;var JN=Q(zt());var GO={tagName:"mount_url",hideFromCompletions:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:"3.3.15",parameters:[{isRequired:!1,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The collection handle",name:"handle",isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:t=>L("mount Tag","The `mount` tag can be used to retrieve the mount URL for a given collection.",null),resovleParameterCompletionItems:(t,e)=>{var r,n,i,s;return t.name=="handle"&&((r=e.context)==null?void 0:r.parameterContext)!=null?ee(Ha((s=(i=(n=e.context)==null?void 0:n.parameterContext.parameter)==null?void 0:i.getArrayValue())!=null?s:[],e.project)):null},resolveCompletionItems:t=>{let e=[];if(t.isPastTagPart==!1&&(t.leftWord=="mount_url"||t.leftWord=="/mount_url")&&t.leftChar==":"){let r=t.project.getCollectionNames();for(let n=0;n<r.length;n++)e.push({label:r[n],kind:JN.CompletionItemKind.Field,sortText:"0"})}return{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}},ZN=GO;var WO={tagName:"vite",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"src",description:"The entry point",expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:t=>Re("vite Tag","Generates Vite tags for an entrypoint.",'{{ vite src="entry/point" }}',null)},ev=WO;var HO={tagName:"nocache",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:t=>Re("nocache Tag","The `nocache` tag is used to mark regions of a template. These regions will continue to update even when using caching strategies such as the full or half-measure cache.",`{{ nocache }} 
    <!-- This content will remain dynamic. -->
{{ /nocache }}`,"https://statamic.dev/tags/nocache")},tv=HO;function Bu(t){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t},{name:"handle",dataType:"string",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:t}]}var YO={tagName:"user_roles",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of role handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(t,e)=>(t.isClosingTag||e.addVariables(Bu(t)),e),resolveDocumentation:t=>L("user_roles Tag","The `user_roles` tag can be used to return information about a site's user roles.",null)},rv=YO;var KO={tagName:"user_groups",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of group handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(t,e)=>(t.isClosingTag||e.addVariables(Bu(t)),e),resolveDocumentation:t=>L("user_groups Tag","The `user_groups` tag can be used to return information about a site's user groups.",null)},nv=KO;var $O={tagName:"cookie:forget",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"keys",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The keys to forget",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},ju=$O;var zO={tagName:"cookie:has",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to check for existence",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},Uu=zO;var XO={tagName:"cookie:set",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"minutes",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The lifetime of the cookie, in minutes",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},Gu=XO;var QO={tagName:"cookie:value",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to retrieve the value for",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},Wu=QO;var JO=[me(ju),me(Wu),me(Gu),me(Uu)],ZO={tagName:"cookie",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[],resolveCompletionItems:t=>(t.leftWord=="cookie"||t.leftWord=="/cookie")&&t.leftChar==":"?ee(JO):ge},iv=ZO;var sv=[_N,yN,bN,GN,WN,qT,UT,cT,nu,Ws,iu,ru,tu,iv,ju,Uu,Gu,Wu,KN,VN,Lu,Fu,Vu,Mu,qu,ku,QN,$N,XN,zN,BN,Kd,gT,su,au,pT,nN,fT,oN,aN,uT,GT,HT,$T,vu,Pu,dT,mT,hT,zT,XT,_T,ou,JT,Su,ZT,ZN,LN,Hd,Du,bT,yT,Cu,rN,lo,co,iN,YN,rv,nv,wu,uo,to,Au,ro,no,fo,zd,Nl,Tl,vl,Ou,Od,Dd,Ld,kd,Md,Fd,Vd,qd,jN,Ed,xd,wd,UN,tv,vT,PT,IT,kT,MT,lN,OT,ET,gN,LT,NN,mu,du,pu,fu,xu,uu,VT,EN,uN,Ad,fN,pN,dN,mN,hN,bu,FT,Id,cN,RT,hu,sN,ev];var ms=class{constructor(){this.tags=new Map;this.parameters=new Map}reset(){this.tags.clear(),this.parameters.clear(),this.loadCoreTags()}getVisibleTagsWithDocumentation(){let e=[];return this.tags.forEach((r,n)=>{if(r.hideFromCompletions==!1){let i="";r.resolveDocumentation!=null&&(i=r.resolveDocumentation()),e.push({label:n,documentation:i})}}),e}getVisibleTagNames(){let e=[];return this.tags.forEach((r,n)=>{r.hideFromCompletions==!1&&e.push(n)}),[...new Set(e)]}getPossibleTagMethods(e){let r=[],n=e.length+1;return this.tags.forEach((i,s)=>{if(s.startsWith(e)){let a=s.substr(n).trim();a.length>0&&r.push(a)}}),[...new Set(r)]}getTagNames(){let e=[];return this.tags.forEach((r,n)=>{e.push(n)}),[...new Set(e)]}loadCoreTags(){this.registerTags(sv)}cleanTagName(e){return cn(e,"/")}findTag(e){return this.tags.get(this.resolveTagName(e))}isKnownTag(e){return this.tags.has(this.resolveTagName(e))}isSymbolKnownTag(e){return this.isKnownTag(e.runtimeName())}resolveTagName(e){return e=this.cleanTagName(e.trim()),this.tags.has(e)||e.includes(":")&&(e=e.split(":")[0]),e}canResolveSpecialTypes(e){e=this.resolveTagName(e);let r=this.tags.get(e);return!(typeof r=="undefined"||r==null||r.resolveSpecialType==null)}resolveSpecialType(e,r,n){e=this.resolveTagName(e);let i=this.findTag(e);if(i.resolveSpecialType==null)throw new Error(e+" does not support special types.");return i.resolveSpecialType(r,n)}getCompletionItems(e){var s;let r=null,n=[],i=!0;if(e.nodesInScope.length>0&&(r=e.nodesInScope[e.nodesInScope.length-1]),e.currentNode!=null&&this.isKnownTag(e.currentNode.runtimeName())){let a=this.findTag(e.currentNode.runtimeName());if(typeof a=="undefined")return{isExclusive:!1,items:[]};let o=[];if(a.resolveCompletionItems!=null){let l=a.resolveCompletionItems(e);if(l.isExclusiveResult)return{isExclusive:!0,items:l.items};i=l.analyzeDefaults,n=n.concat(l.items)}if(e.isPastTagPart==!1){let l=this.getPossibleTagMethods(a.tagName);for(let c=0;c<l.length;c++)n.push({label:l[c],kind:av.CompletionItemKind.Text})}if(i){if(e.isCaretInTag==!0&&a.parameters.length>0&&(n=n.concat(md(e,a.parameters)),a.tagName=="partial"&&(r==null?void 0:r.hasMethodPart()))){let l=r.getMethodNameValue();if(l.trim().length>0&&((s=ue.instance)==null?void 0:s.hasStructure())){let c=ue.instance.getStructure().findPartial(l);c!=null&&c.injectsParameters.length>0&&(n=n.concat(md(e,c.injectsParameters)))}}for(let l=0;l<e.nodesInScope.length;l++)if(e.nodesInScope[l].runtimeType!==null){let c=e.nodesInScope[l].runtimeType;if(c!=null&&c.assumedType=="structure_ref"&&c.supplementedFields!=null)for(let u=0;u<c.supplementedFields.length;u++)n.push(hd(c.supplementedFields[u]))}}return{items:n,isExclusive:!1}}return{items:n,isExclusive:!1}}injectParentScope(e){let r=this.findTag(e);return typeof r=="undefined"||r==null?!0:r.injectParentScope}resolveParameterCompletions(e,r,n){let i=this.findTag(e);return typeof i!="undefined"&&i!==null&&typeof i.resovleParameterCompletionItems!="undefined"&&i.resovleParameterCompletionItems!==null?i.resovleParameterCompletionItems(r,n):null}canResolveDynamicParameter(e){let r=this.resolveTagName(e);if(this.isKnownTag(r)){let n=this.tags.get(r);if(typeof n=="undefined")return!1;if(typeof n.resolveDynamicParameter!="undefined"&&n.resolveDynamicParameter!=null)return!0}return!1}getParameter(e,r){let n=this.resolveTagName(e);if(this.parameters.has(n)==!1)return null;let i=this.parameters.get(n);if(i==null)return null;if(i.has(r)==!1){let a=this.findTag(e);if(a!=null&&typeof a.resolveDynamicParameter!="undefined"&&a.resolveDynamicParameter!=null){let o=a.resolveDynamicParameter(null,r);if(o!==null)return o}return null}let s=i.get(r);return typeof s=="undefined"||i==null?null:s}registerTags(e){for(let r=0;r<e.length;r++)this.registerTag(e[r])}registerTag(e){if(this.tags.set(e.tagName,e),this.parameters.has(e.tagName)==!1&&this.parameters.set(e.tagName,new Map),e.parameters.length>0){let r=this.parameters.get(e.tagName);for(let n=0;n<e.parameters.length;n++){let i=e.parameters[n];r==null||r.set(i.name,i)}}}requiresClose(e){let r=e.getTagName();if(this.tags.has(r)){let n=this.findTag(r);if(n!=null)return n.requiresCloseResolver!=null?n.requiresCloseResolver(e):n.requiresClose}return!1}};ms.instance=null;(typeof ms.instance=="undefined"||ms.instance==null)&&(ms.instance=new ms,ms.instance.loadCoreTags());var Ie=ms;var _n=class{constructor(e){this.generation=0;this.id="";this.name="";this.values=new Map;this.lists=new Map;this.pristine=new Map;this.parentScope=null;this.statamicProject=e,_n.generationCounter+=1,this.generation=_n.generationCounter,this.id=Ma()}makeNew(){return new _n(this.statamicProject)}ancestor(){return this.parentScope!=null?this.parentScope:this}canShiftScope(e){return!!this.pristine.has(e)}shiftScope(e,r,n){if(this.pristine.has(r)){let i=this.pristine.get(r),s=i.parentCopy.copy();return s.introduceAliasScope(e,n,i.introducedFields),s}return this}containsPath(e){if(e.includes(":")){let r=e.split(":"),n=r.shift(),i=r.join(":");if(typeof n=="undefined")return!1;let s=this.lists.get(n);return typeof s=="undefined"?!1:s.containsPath(i)}return!!this.lists.has(e)}findReference(e){if(e.includes(":")){let r=e.split(":"),n=r.pop(),i=r.join(":"),s=this.findNestedScope(i);if(s!=null)return s.findReference(n)}return this.values.has(e)?this.values.get(e):null}findReferenceWithField(e){if(e.includes(":")){let r=e.split(":"),n=r.pop(),i=r.join(":"),s=this.findNestedScope(i);if(s!=null)return s.findReference(n)}if(this.values.has(e)){let r=this.values.get(e);if(r.sourceField==null){if(r.introducedBy!=null&&r.introducedBy.currentScope!=null&&r.introducedBy.currentScope!=this)return r.introducedBy.currentScope.findReferenceWithField(r.introducedBy.getTagName());if(this.parentScope!=null&&this.parentScope!=this)return this.parentScope.findReferenceWithField(e)}return r}return null}containsReference(e){return this.findReference(e)!=null}findNestedScope(e){if(e.includes(":")){let r=e.split(":"),n=r.shift(),i=r.join(":");if(typeof n=="undefined")return null;let s=this.lists.get(n);return typeof s=="undefined"?null:s.findNestedScope(i)}return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this&&this.parentScope.hasList(e)?this.parentScope.lists.get(e):null}liftList(e){if(this.lists.has(e)){let r=this.lists.get(e);return typeof r=="undefined"||r===null?null:(this.lists.delete(e),r)}return null}hasPristineReference(e){return!!this.pristine.has(e)}hasListInHistory(e){return this.hasList(e)?!0:this.parentScope!=null?this.name=="*root*"?!1:this.parentScope.hasList(e):!1}hasList(e){if(this.lists.has(e)){let r=this.lists.get(e);return!(typeof r=="undefined"||r===null)}return!1}bringListIntoMainScope(e){if(e.includes(":")){let n=e.split(":"),i=n.shift(),s=n.join(":");if(typeof i=="undefined")return this;let a=this.lists.get(i);return typeof a=="undefined"?this:a.bringListIntoMainScope(s)}let r=this.lists.get(e);return this.lists.delete(e),this.mergeScope(r)}getListNames(){let e=[];return this.lists.forEach((r,n)=>{e.push(n)}),e}getVariableNames(){let e=[];return this.values.forEach(r=>{e.push(r.name)}),e}getList(e){return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this?this.parentScope.getList(e):null}hasValue(e){return this.values.has(e)}findAncestorWithList(e){return this.hasList(e)?this:this.parentScope!=null&&this.parentScope!=this?this.parentScope.findAncestorWithList(e):null}findReferenceNotIntroducedBy(e,r){if(this.hasValue(e)){let n=this.values.get(e);if(n.introducedBy!=null&&n.introducedBy!=r)return n}return this.parentScope!=null&&this.parentScope!=this?this.parentScope.findReferenceNotIntroducedBy(e,r):null}removeThroughIntroduction(e,r){if(this.values.delete(e),this.parentScope!=null){let n=this.findReferenceNotIntroducedBy(e,r);n!=null&&this.addVariable(n)}}wasIntroducedBySymbol(e,r){if(this.values.has(e)==!1)return!1;let n=this.values.get(e);return n.introducedBy!=null?n.introducedBy==r:!1}referencesArray(e){return this.values.has(e)==!1?!1:this.values.get(e).dataType=="array"}addScopeList(e,r){return this.lists.set(e,r),this}mergeAndList(e,r){let n=new _n(this.statamicProject);return n.values=PN(r),this.lists.set(e,n),this.mergeVariableScope(r),this}mergeScope(e){return e==this||e==null?this:(typeof e.values!="undefined"&&e.values!==null&&e.values.forEach((r,n)=>{this.values.set(n,r)}),typeof e.lists!="undefined"&&e.lists!==null&&e.lists.forEach((r,n)=>{this.lists.set(n,r)}),this)}mergeVariableScope(e){for(let r=0;r<e.length;r++)this.values.set(e[r].name,e[r]);return this}addVariable(e){this.values.set(e.name,e)}addVariables(e){for(let r=0;r<e.length;r++)this.addVariable(e[r])}addVariableArray(e,r){this.values.has(e)&&this.values.delete(e);let n=new _n(this.statamicProject);n.addVariables(r),this.addScopeList(e,n)}injectAssetContainer(e,r){this.addBlueprintFields(e,this.statamicProject.getAssetBlueprintFields(r))}injectUserFields(e){this.addBlueprintFields(e,this.statamicProject.getUserFields())}addBlueprintField(e,r){this.addVariable({dataType:r.type,name:r.name,sourceField:r,sourceName:r.blueprintName,introducedBy:e})}introduceScopedAliasScope(e,r,n,i){this.pristine.set(n,{introducedFields:i,introducedScope:n,parentCopy:this.copy()});let s=new _n(this.statamicProject),a=new _n(this.statamicProject);return a.addBlueprintFields(e,i),s.name=n,s.addScopeList(r,a),this.addScopeList(n,s),s}expandScopedAliasScope(e,r,n,i){this.lists.has(n)==!1?this.introduceScopedAliasScope(e,r,n,i):this.lists.get(n).addBlueprintFields(e,i)}introduceAliasScope(e,r,n){this.pristine.set(r,{introducedFields:n,introducedScope:r,parentCopy:this.copy()});let i=new _n(this.statamicProject);i.addBlueprintFields(e,n),i.name=r,this.addScopeList(r,i)}introduceDynamicScopeList(e,r,n){this.pristine.set(r,{introducedFields:n,introducedScope:r,parentCopy:this.copy()});let i=new _n(this.statamicProject);i.name=r,i.addBlueprintFields(e,n),this.addScopeList(r,i)}addBlueprintFields(e,r){for(let n=0;n<r.length;n++)this.addBlueprintField(e,r[n])}injectBlueprint(e,r){let n=this.statamicProject.getBlueprintDetails(r);n.length>0&&this.addBlueprintFields(e,n)}copy(){let e=new _n(this.statamicProject);return e.pristine=new Map(this.pristine),e.values=new Map(this.values),e.lists=new Map(this.lists),e.parentScope=this,e}},Xr=_n;Xr.generationCounter=0;function Xd(t){let e=new Xr(t);return e.addVariable({dataType:"string",name:"handle",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"name",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"short_locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e}function ov(){let t=[];return t.push({dataType:"number",name:"response_code",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"csrf_field",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"csrf_token",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"environment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"xml_header",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"last_segment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_uri",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"amp_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"api_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_full_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"string",name:"current_template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"logged_in",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"logged_out",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"boolean",name:"is_homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"now",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"today",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"date",name:"current_date",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"get",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"get_post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t.push({dataType:"array",name:"old",sourceField:null,sourceName:"*internal.system",introducedBy:null}),t}function lv(t,e){let r=t.findParameter("paginate");if(r!=null&&(r.value.toLowerCase()=="true"||parseInt(r.value).toString()==r.value)){let n=e.makeNew(),i=e.makeNew(),s=e.makeNew(),a=e.makeNew();n.addVariable({name:"next_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),n.addVariable({name:"prev_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),n.addVariable({name:"total_items",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),n.addVariable({name:"total_pages",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),n.addVariable({name:"current_page",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),n.addVariable({name:"auto_links",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:t}),s.addVariable({name:"url",dataType:"string",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:t}),s.addVariable({name:"page",dataType:"integer",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:t}),a.addVariable({name:"first",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),a.addVariable({name:"last",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),a.addVariable({name:"slider",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:t}),i.addScopeList("all",s),i.addScopeList("segments",a),n.addScopeList("links",i),e.addScopeList("paginate",n)}}var Qs=class{constructor(){this.fileInjections=new Map;this.project=null}updateProject(e){this.project=e}registerInjections(e,r){if(r.length==0)return;let n=[];for(let i=0;i<r.length;i++){let s=r[i];s.hasParameters&&n.push(s)}if(n.length>0){let i=n[0].getMethodNameValue();if(i!=null&&this.project!=null){let s=this.project.findPartial(i);s!=null&&(this.fileInjections.has(s.documentUri)||this.fileInjections.set(s.documentUri,new Map),this.fileInjections.get(s.documentUri).set(e,n))}}}hasAvailableInjections(e){return this.fileInjections.has(e)}getScopeInjection(e,r){let n=new Xr(r);return n.name="*injection*",this.fileInjections.get(e).forEach((s,a)=>{for(let o=0;o<s.length;o++){let l=s[o];if(l.hasParameters)for(let c=0;c<l.parameters.length;c++){let u=l.parameters[c];if(u.containsSimpleValue())n.addVariable({dataType:"string",name:u.name,sourceField:null,sourceName:"scope.injection",introducedBy:l});else if(u.isVariableReference&&l.currentScope!=null&&l.currentScope.hasListInHistory(u.value)){let f=l.currentScope.findNestedScope(u.value);if(f!=null){let m=cn(u.name,":"),p=f.copy();p.name=m,n.addScopeList(m,f)}}}}}),n}};Qs.instance=null;(typeof Qs.instance=="undefined"||Qs.instance==null)&&(Qs.instance=new Qs);var Js=Qs;var eD=["collection"],tD=["if","elseif","unless","elseunless"],Qd=class{constructor(e,r,n){this.pageVars=[];this.viewDataVars=null;this.documentUri="";this.lastSymbolId="";this.ideHelperMap=new Map;this.statamicProject=e,this.documentUri=r,this.document=n,this.makePageScope(),this.makeViewDataScope()}makeViewDataScope(){this.document.hasFrontMatter()&&(this.viewDataVars=this.document.getFrontMatterScope())}makePageScope(){let e=[],r=this.statamicProject.getFields();if(r.has("pages")){let n=r.get("pages");for(let i=0;i<n.length;i++){let s=n[i];e.push({name:s.name,dataType:s.type,sourceField:s,sourceName:s.blueprintName,introducedBy:null})}}this.pageVars=e}analyzeScope(e){var u,f,m,p,d,_,P,h,y;let r=new Xr(this.statamicProject);r.name="*root*",r.parentScope=r,r.addScopeList("site",Xd(this.statamicProject)),r.addScopeList("sites",Xd(this.statamicProject)),r.addVariables(ov());let n=new Xr(this.statamicProject);n.name="*root_user*",n.parentScope=r,this.statamicProject.getUserFields().forEach(g=>{n.addBlueprintField(null,g)}),r.addScopeList("current_user",n),((u=On.instance)==null?void 0:u.pageScopeDisabled(this.documentUri))?this.viewDataVars!=null&&r.addScopeList("view",this.viewDataVars):this.viewDataVars!=null?r.mergeAndList("page",this.pageVars).addScopeList("view",this.viewDataVars):r.mergeAndList("page",this.pageVars);let i=null;e.length>0&&e[0].isComment&&(i=ll(this.documentUri,e[0]));for(let g=0;g<e.length;g++)if(e[g].isComment){let N=ll(this.documentUri,e[g]);N.variableHelper!=null&&this.ideHelperMap.set(e[g].id(),N.variableHelper)}let s=this.statamicProject.getCollectionNamesForView(this.documentUri);if(i!=null&&(i.collectionInjections.length>0&&(s=s.concat(i.collectionInjections)),i.blueprints.length>0&&(s=s.concat(i.blueprints)),i.variableHelper!=null&&i.variableHelper.variableName=="@page")){let g=this.statamicProject.getBlueprintField(i.variableHelper.collectionName,i.variableHelper.fieldHandle);if(g!=null)if(i.variableHelper.setHandle.length>0){if(g.sets!=null){for(let N=0;N<g.sets.length;N++)if(g.sets[N].handle==i.variableHelper.setHandle){r.addVariables(po(e[0],g.sets[N].fields));break}}}else r.addBlueprintField(e[0],g)}if(s.length>0){for(let g=0;g<s.length;g++)r.injectBlueprint(e[0],s[g]);r.addVariables(ls(e[0]))}((f=Js.instance)==null?void 0:f.hasAvailableInjections(this.documentUri))&&r.mergeScope((m=Js.instance)==null?void 0:m.getScopeInjection(this.documentUri,this.statamicProject));let a=[],o=[],l=[],c=[];c.push(r);for(let g=0;g<e.length;g++){let N=e[g];this.lastSymbolId.length>0&&o.includes(N.id())&&(a.pop(),c.pop(),c.length==0&&c.push(r));let S=c[c.length-1];if(N.hasParameters){for(let O=0;O<N.parameters.length;O++)if(N.parameters[O].interpolations.length>0)for(let Y=0;Y<N.parameters[O].interpolations.length;Y++){let z=N.parameters[O].interpolations[Y];N.processedInterpolationRegions.has(z)&&N.processedInterpolationRegions.get(z).forEach(K=>{K instanceof q&&(K.currentScope=S)})}}if(((p=Ie.instance)==null?void 0:p.isKnownTag(N.getTagName()))==!1){if(N.scopeVariable=S.findReference(N.runtimeName()),g>0){let O=e[g-1];if(O.isComment&&this.ideHelperMap.has(O.id())&&!O.isClosingTag&&!N.isClosingTag){let Y=this.ideHelperMap.get(O.id());if(Y.variableName==N.getTagName()){let z=this.statamicProject.getBlueprintField(Y.collectionName,Y.fieldHandle);z!=null&&(N.scopeVariable=vN(N,z))}}}if(N.scopeVariable==null){let O=N.runtimeName().trim();if(S.hasList(O)||((d=N.currentScope)==null?void 0:d.hasListInHistory(O))){N.sourceType="array";let Y=S.getList(O);if(Y!=null&&Y.values.size>0){let z=Y.values.entries().next().value[1];N.scopeVariable={dataType:"array",introducedBy:z.introducedBy,name:O,sourceField:null,sourceName:z.sourceName}}}}else N.sourceType=jc(N.scopeVariable.dataType),N.scopeVariable.sourceField!=null&&((_=za.instance)==null?void 0:_.hasFieldtype(N.scopeVariable.sourceField.type))&&((P=za.instance)==null?void 0:P.getFieldType(N.scopeVariable.sourceField.type)).augmentScope(N,S)}if(N.hasParameters&&lv(N,S),N.modifiers!=null&&N.modifiers.hasModifiers()?N.manifestType=N.modifiers.getLastManifestedModifierRuntimeType():N.manifestType=N.sourceType,N.isClosedBy!=null&&(a.push(N.id()),o.push(N.isClosedBy.id()),S=S.copy(),c.push(S)),N.getTagName()=="scope"&&N.hasMethodPart()){let O=c[c.length-2].copy();S.addScopeList(N.getMethodNameValue(),O)}if(S.containsPath(N.runtimeName())&&(a.push(N.id()),N.isClosedBy!=null&&o.push(N.isClosedBy.id()),S=S.copy().bringListIntoMainScope(N.runtimeName()),c.push(S)),N.currentScope=S,N.getTagName()!="cache"){let O=N.findParameter("scope");O!=null&&S.canShiftScope(N.runtimeName())&&(S=S.shiftScope(N,N.runtimeName(),O.value),N.currentScope=S,c.pop(),c.push(S))}if((h=Ie.instance)==null?void 0:h.isKnownTag(N.runtimeName())){let O=(y=Ie.instance)==null?void 0:y.findTag(N.runtimeName());typeof O!="undefined"&&O.augmentScope!=null&&O.augmentScope(N,S)}if(N.modifierChain!=null&&N.modifierChain.modifierChain.length>0&&N.modifierChain.modifierChain.forEach(O=>{O.modifier!=null&&typeof O.modifier.augmentScope!="undefined"&&O.modifier.augmentScope!=null&&O.modifier.augmentScope(N,S)}),N.modifiers.hasParameterModifiers()&&N.modifiers.parameterModifiers.forEach(O=>{O.modifier!=null&&typeof O.modifier.augmentScope!="undefined"&&O.modifier.augmentScope!=null&&O.modifier.augmentScope(N,S)}),N.sourceType=="array"){let O=N.findParameter("chunk"),Y=!0;if(N.parent!=null&&N.parent instanceof q&&eD.includes(N.parent.runtimeName())&&(Y=!1),typeof O!="undefined"&&O!==null)if(N.currentScope.parentScope!=null&&(N.currentScope.parentScope.hasList(N.runtimeName())||S.referencesArray(N.runtimeName()))){let z=N.currentScope.parentScope.copy(),X=z.liftList(N.runtimeName());if(X==null&&S.referencesArray(N.runtimeName())){if(X=new Xr(S.statamicProject),Y){let K=Qe(N);for(let re=0;re<K.length;re++){let De=K[re];z.wasIntroducedBySymbol(De.name,N)&&z.removeThroughIntroduction(De.name,N)}X.addVariables(K)}}else Y&&z.addVariables(Qe(N));z.addScopeList("chunk",X),S=z,c.pop(),c.push(S),N.currentScope=z}else{let z=N.findParameter("scope");if(typeof z!="undefined"&&z!==null&&N.currentScope!=null&&N.currentScope.hasList(z.value)&&N.scopeName!=null){let X=N.currentScope.copy(),K=X.ancestor().copy(),re=X.liftList(N.scopeName);Y&&X.addVariables(Qe(N)),K.liftList(N.scopeName),X.addScopeList(N.scopeName,re),K.addScopeList("chunk",X),S=K,c.pop(),c.push(S),N.currentScope=K}}else N.scopeVariable!=null&&N.scopeVariable.sourceField==null&&Y&&(S.addVariables(Qe(N)),S.addVariables(Ke(N)))}if(o.includes(N.id())&&N.parent!=null&&N.parent instanceof q){let O=N.currentScope.findAncestorWithList(N.getTagName());O!=null?(N.currentScope=O,S=O.copy(),c.pop(),c.length==0&&c.push(r),c.push(S)):N.parent.parent!=null?N.currentScope=N.parent.parent.currentScope:N.currentScope=N.parent.currentScope}if(N.currentScope!=null&&N.runtimeNodes.length>0&&N.runtimeNodes.forEach(O=>{var Y;if(O instanceof ae&&((Y=N.currentScope)==null?void 0:Y.hasValue(O.name))){let z=N.currentScope.findReferenceWithField(O.name);O.currentScope=N.currentScope,O.scopeName=N.scopeName,O.scopeVariable=z}}),tD.includes(N.runtimeName())&&N.runtimeNodes.length==3&&N.runtimeNodes[0]instanceof ae&&N.runtimeNodes[1]instanceof vr&&N.runtimeNodes[2]instanceof Nt&&N.runtimeNodes[0].scopeVariable!=null&&N.runtimeNodes[0].scopeVariable.sourceField!=null){let O=N.runtimeNodes[0].scopeVariable,Y=N.runtimeNodes[2].value,z=O.sourceField;if(z.sets!=null)for(let X=0;X<z.sets.length;X++){let K=z.sets[X];if(K.handle==Y&&K.fields!=null){S=S.copy(),S.addBlueprintFields(N,K.fields),N.isClosedBy!=null&&!N.isSelfClosing&&(a.push(N.id()),o.push(N.isClosedBy.id()),c.push(S));break}}}this.lastSymbolId=N.id();let V=a.join("/");l.push(V)}}};var hs=class{};hs.globalTagEnterStack=[],hs.interpolatedVariables=[];var dv=Q(Uc());var Dr=class{constructor(){this.name="";this.compound="";this.methodPart="";this.content="";this.cachedCompoundTagName=null}tagPartIs(e){return e=e.toLowerCase().trim(),this.name.toLowerCase().trim()==e}isCompound(){return this.methodPart==null?!1:this.methodPart.length>0}getMethodName(){return this.methodPart==""?"index":this.methodPart=="null"?"":this.methodPart}getRuntimeMethodName(){}getCompoundTagName(){if(this.cachedCompoundTagName==null){let e=this.getMethodName();this.cachedCompoundTagName=this.name,e!=null&&e!=""&&(this.cachedCompoundTagName=this.cachedCompoundTagName+":"+e)}return this.cachedCompoundTagName}};var Jd=class{constructor(){this.tagNames=[];this.modifierNames=[]}getModifierNames(){var e,r;return this.modifierNames.concat((r=(e=Me.instance)==null?void 0:e.getModifierNames())!=null?r:[])}getTagNames(){var e,r;return this.tagNames.concat((r=(e=Ie.instance)==null?void 0:e.getTagNames())!=null?r:[])}setTagNames(e){this.tagNames=e}setModifierNames(e){this.modifierNames=e}isTag(e){var r;return Jd.alwaysLikeTag.includes(e)||((r=Ie.instance)==null?void 0:r.isKnownTag(e))?!0:this.tagNames.includes(e)}isModifier(e){var r;return((r=Me.instance)==null?void 0:r.hasModifier(e))?!0:this.modifierNames.includes(e)}},_o=Jd;_o.alwaysLikeTag=["if","endif","elseif","else","unless","elseunless"];var bo=class{static analyze(e,r){e.forEach(n=>{if(n instanceof q){if(n.pathReference!=null&&n.pathReference.isStrictVariableReference){n.isTagNode=!1;return}n.name!=null&&(n.isTagNode=r.isTag(n.name.name))}})}static analyzeNode(e){if(e.pathReference!=null&&e.pathReference.isStrictVariableReference){e.isTagNode=!1;return}bo.environmentDetails!=null&&e.name!=null&&(e.isTagNode=bo.environmentDetails.isTag(e.name.name)),e.name!=null&&(e.isConditionNode=_o.alwaysLikeTag.includes(e.name.name))}static analyzeParametersForModifiers(e){e.parameters.forEach(r=>{bo.environmentDetails!=null&&(r.isModifierParameter=bo.environmentDetails.isModifier(r.name))})}},yo=bo;yo.environmentDetails=null;(typeof yo.environmentDetails=="undefined"||yo.environmentDetails==null)&&(yo.environmentDetails=new _o);var Zd=yo;var em=class{static getIdentifier(e){var i;let r=new Dr;r.content=e.trim();let n=e.split(":");if(n.length==1)r.name=n[0].trim(),r.methodPart=null,r.compound=r.name;else if(n.length>1){let s=(i=n.shift())!=null?i:"",a=n.join(":");r.name=s.trim(),r.methodPart=a.trim(),r.compound=r.name+":"+r.methodPart}else r.name=e.trim(),r.methodPart="";return r.name.startsWith("/")&&(r.name=r.name.substr(1),r.compound=r.compound.substr(1)),r}};var ne=class{static getPrettyTypeName(e){return e instanceof Yn?ne.TOKEN_LANG_OPERATOR:e instanceof Gr?ne.TOKEN_OP_A_ADD:e instanceof ae?ne.TOKEN_VARIABLE:e instanceof Nt?ne.TOKEN_STRING:e instanceof Lt?ne.TOKEN_NUMBER:e instanceof Ln?ne.TOKEN_CONSTANT_FALSE:e instanceof fn?ne.TOKEN_CONSTANT_NULL:e instanceof kn?ne.TOKEN_CONSTANT_TRUE:e instanceof Fa?ne.TOKEN_MODIFIER_NODE:e instanceof fl?ne.TOKEN_MODIFIER_CHAIN:e instanceof cd?ne.TOKEN_MODIFIER_PARAMETER:e instanceof Wr?ne.TOKEN_OP_A_DIVIDE:e instanceof ai?ne.TOKEN_OP_A_EXPONENTIATION:e instanceof oi?ne.TOKEN_OP_A_MODULUS:e instanceof Hr?ne.TOKEN_OP_A_MULTIPLY:e instanceof Nr?ne.TOKEN_OP_A_SUBTRACT:e instanceof Mn?ne.TOKEN_ASG_ADD:e instanceof Fn?ne.TOKEN_ASG_DIVIDE:e instanceof Vn?ne.TOKEN_ASG_MODULUS:e instanceof qn?ne.TOKEN_ASG_MULTIPLY:e instanceof Yr?ne.TOKEN_ASG_ASSIGN:e instanceof li?ne.TOKEN_ASG_SUBTRACT:e instanceof vr?ne.TOKEN_CMP_EQUAL:e instanceof Hn?ne.TOKEN_CMP_SEQUAL:e instanceof pn?ne.TOKEN_CMP_GT:e instanceof wi?ne.TOKEN_CMP_GTE:e instanceof Bn?ne.TOKEN_CMP_LT:e instanceof jn?ne.TOKEN_CMP_LTE:e instanceof Un?ne.TOKEN_CMP_NEQ:e instanceof Gn?ne.TOKEN_CMP_SNEQ:e instanceof Wn?ne.TOKEN_CMP_SPACESHIP:e instanceof Oi?ne.TOKEN_OP_VARIABLE_FALLBACK:e instanceof ud?ne.TOKEN_COND_FALLBACK_GROUP:e instanceof St?ne.TOKEN_BRANCH_SEPARATOR:e instanceof Kn?ne.TOKEN_TERNARY_SEPARATOR:e instanceof Qt?ne.TOKEN_GROUP_BEGIN:e instanceof jt?ne.TOKEN_GROUP_END:e instanceof dr?ne.TOKEN_MODIFIER_SEPARATOR:e instanceof Ut?ne.TOKEN_MODIFIER_NAME:e instanceof Gt?ne.TOKEN_MODIFIER_VALUE:e instanceof Pr?ne.TOKEN_MODIFIER_VALUE_SEPARATOR:e instanceof dl?ne.TOKEN_NULL_COALESCE_GROUP:e instanceof Dt?ne.TOKEN_SEMANTIC_GROUP:e instanceof sr?ne.TOKEN_STATEMENT_SEPARATOR:e instanceof ml?ne.TOKEN_TERNARY_CONDITION:e instanceof dn?ne.TOKEN_OP_AND:e instanceof ar?ne.TOKEN_OP_LOGIC_NEGATION:e instanceof mn?ne.TOKEN_OP_OR:e instanceof ci?ne.TOKEN_OP_XOR:e instanceof hn?ne.TOKEN_OP_NULL_COALESCE:e instanceof qs?ne.TOKEN_PARAM:e instanceof pr?ne.TOKEN_PATH_ACCESSOR:e instanceof ns?ne.TOKEN_OP_A_FACTORIAL:e instanceof un?ne.TOKEN_RECURSIVE:e instanceof Ba?ne.TOKEN_ARG_GROUP:e instanceof Rt?ne.TOKEN_ARG_SEPARATOR:e instanceof ui?ne.TOKEN_OP_STRING_CONCAT:e instanceof Ir?ne.TOKEN_OP_SCOPE_REASSIGNMENT:e instanceof qa?ne.TOKEN_STRUCT_SWITCH_CASE:e instanceof js?ne.TOKEN_STRUCT_SWITCH_GROUP:e instanceof Bs?ne.TOKEN_STRUCT_DIRECTION_GROUP:e instanceof gn?ne.TOKEN_STRUCT_SCOPED_LOGIC_GROUP:e instanceof Le?ne.TOKEN_STRUCT_LOGIC_GROUP:e instanceof pl?ne.TOKEN_STRUCT_VALUE_DIRECTION:e instanceof Di?ne.TOKEN_STRUCT_ARRAY:e instanceof $n?ne.TOKEN_STRUCT_T_LIST_START:e instanceof fd?ne.TOKEN_STRUCT_TUPLE_LIST:e instanceof Jt?ne.TOKEN_STRUCT_METHOD_CALL:typeof e}},W=ne;W.TOKEN_LANG_OPERATOR="T_LANG_OPERATOR",W.TOKEN_VARIABLE="T_VAR",W.TOKEN_NUMBER="T_NUMERIC",W.TOKEN_STRING="T_STRING",W.TOKEN_RECURSIVE="T_RECURSIVE",W.TOKEN_CONSTANT_FALSE="T_FALSE",W.TOKEN_CONSTANT_NULL="T_NULL",W.TOKEN_CONSTANT_TRUE="T_TRUE",W.TOKEN_MODIFIER_NODE="T_MODIFIER",W.TOKEN_MODIFIER_CHAIN="T_MODIFIER_CHAIN",W.TOKEN_MODIFIER_PARAMETER="T_MODIFIER_PARAM",W.TOKEN_OP_A_ADD="T_AOP_ADD",W.TOKEN_OP_A_DIVIDE="T_AOP_DIVIDE",W.TOKEN_OP_A_EXPONENTIATION="T_AOP_EXP",W.TOKEN_OP_A_MODULUS="T_AOP_MOD",W.TOKEN_OP_A_MULTIPLY="T_AOP_MULTIPLY",W.TOKEN_OP_A_SUBTRACT="T_AOP_SUBTRACT",W.TOKEN_OP_A_FACTORIAL="T_AOP_FACTORIAL",W.TOKEN_ASG_ADD="T_ASG_ADD",W.TOKEN_ASG_DIVIDE="T_ASG_DIVIDE",W.TOKEN_ASG_ASSIGN="T_ASG",W.TOKEN_ASG_MODULUS="T_ASG_MODULUS",W.TOKEN_ASG_MULTIPLY="T_ASG_MULTIPLY",W.TOKEN_ASG_SUBTRACT="T_ASG_SUBTRACT",W.TOKEN_CMP_EQUAL="T_CMP_EQ",W.TOKEN_CMP_SEQUAL="T_CMP_SEQ",W.TOKEN_CMP_GT="T_CMP_GT",W.TOKEN_CMP_GTE="T_CMP_GTE",W.TOKEN_CMP_LT="T_CMP_LT",W.TOKEN_CMP_LTE="T_CMP_LTE",W.TOKEN_CMP_NEQ="T_CMP_NEQ",W.TOKEN_CMP_SNEQ="T_CMP_SNEQ",W.TOKEN_CMP_SPACESHIP="T_CMP_SPSHP",W.TOKEN_OP_VARIABLE_FALLBACK="T_VFBK",W.TOKEN_COND_FALLBACK_GROUP="T_VFBK_GROUP",W.TOKEN_BRANCH_SEPARATOR="T_BRANCH_SEPARATOR",W.TOKEN_TERNARY_SEPARATOR="T_TERNARY_SEPARATOR",W.TOKEN_GROUP_BEGIN="T_LOGIC_BEGIN",W.TOKEN_GROUP_END="T_LOGIC_END",W.TOKEN_MODIFIER_SEPARATOR="T_MODIFIER_SEPARATOR",W.TOKEN_MODIFIER_NAME="T_MODIFIER_NAME",W.TOKEN_MODIFIER_VALUE="T_MODIFIER_VALUE",W.TOKEN_MODIFIER_VALUE_SEPARATOR="T_MODIFIER_VALUE_SEPARATOR",W.TOKEN_NULL_COALESCE_GROUP="T_NULL_COALESCE_GROUP",W.TOKEN_SEMANTIC_GROUP="T_SEMANTIC_GROUP",W.TOKEN_STATEMENT_SEPARATOR="T_STATEMENT_SEPARATOR",W.TOKEN_TERNARY_CONDITION="T_TERNARY_CONDITION",W.TOKEN_OP_AND="T_AND",W.TOKEN_OP_LOGIC_NEGATION="T_LOGIC_INVERSE",W.TOKEN_OP_OR="T_OR",W.TOKEN_OP_XOR="T_XOR",W.TOKEN_OP_NULL_COALESCE="T_NULL_COALESCE",W.TOKEN_PARAM="T_PARAM",W.TOKEN_PATH_ACCESSOR="T_VAR_SEPARATOR",W.TOKEN_ARG_GROUP="T_ARG_GROUP",W.TOKEN_ARG_SEPARATOR="T_ARG_SEPARATOR",W.TOKEN_OP_STRING_CONCAT="T_STR_CONCAT",W.TOKEN_OP_SCOPE_REASSIGNMENT="T_SCOPE_ASSIGNMENT",W.TOKEN_STRUCT_SWITCH_CASE="T_SWITCH_CASE",W.TOKEN_STRUCT_SWITCH_GROUP="T_SWITCH_GROUP",W.TOKEN_STRUCT_DIRECTION_GROUP="T_DIRECTION_GROUP",W.TOKEN_STRUCT_VALUE_DIRECTION="T_ORDER_DIRECTION",W.TOKEN_STRUCT_SCOPED_LOGIC_GROUP="T_SCOPED_LOGIC_GROUP",W.TOKEN_STRUCT_LOGIC_GROUP="T_LOGIC_GROUP",W.TOKEN_STRUCT_ARRAY="T_ARRAY",W.TOKEN_STRUCT_T_LIST_START="T_LIST_START",W.TOKEN_STRUCT_TUPLE_LIST="T_LIST",W.TOKEN_STRUCT_METHOD_CALL="T_METHOD_CALL";var Je=class{static isLanguageLogicalKeyword(e){return e==this.LogicalAnd||e==this.LogicalNot||e==this.LogicalOr||e==this.LogicalXor}};Je.LogicalAnd="and",Je.LogicalNot="not",Je.LogicalOr="or",Je.LogicalXor="xor",Je.ConstTrue="true",Je.ConstFalse="false",Je.ConstNull="null",Je.ArrList="list",Je.ScopeAs="as";var tm=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.currentContent=[];this.rawContent=[];this.startIndex=0;this.cur=null;this.next=null;this.prev=null;this.isParsingString=!1;this.isParsingModifierName=!1;this.isInModifierParameterValue=!1;this.runtimeNodes=[];this.ignorePrevious=!1;this.lastNode=null;this.referenceParser=null;this.activeNode=null}reset(){this.ignorePrevious=!1,this.runtimeNodes=[],this.chars=[],this.inputLen=0,this.currentIndex=0,this.currentContent=[],this.rawContent=[],this.startIndex=0,this.cur=null,this.next=null,this.prev=null,this.isParsingString=!1,this.isParsingModifierName=!1,this.isInModifierParameterValue=!1,this.referenceParser=null,this.activeNode=null}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.ignorePrevious?(this.prev="",this.ignorePrevious=!1):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}isValidChar(e){return e==null||e==E.Punctuation_Semicolon?!1:this.isParsingString==!1&&e=="]"?!0:this.isParsingString==!1&&e==")"?!1:(e=="["||e=="]")&&e==this.cur||(e=="_"||e=="."||e=="["||e=="]")&&(!(this.currentContent.length>0)||G.ctypeAlpha(this.cur)||G.ctypeDigit(this.cur))?!0:G.ctypeSpace(e)?!1:this.isParsingModifierName&&(e==E.Punctuation_Minus||e==E.Punctuation_Underscore)?!0:!G.ctypePunct(e)}isRightOfInterpolationRegion(){if(this.activeNode==null||this.referenceParser==null)return!1;let e=this.activeNode._lexerRelativeOffset(this.currentIndex);return this.referenceParser.bordersInterpolationRegion(e)}scanForwardTo(e,r=0){let n=[];for(let i=this.currentIndex+1+r;i<this.inputLen;i++){let s=this.chars[i];if(s==e){n.push(s);break}else n.push(s)}return n}nextNonWhitespace(){for(let e=this.currentIndex+1;e<this.inputLen;e++){let r=this.chars[e];if(!G.ctypeSpace(r))return r}return null}pushError(e){this.referenceParser!=null&&this.referenceParser.addAntlersError(e)}guardAgainstNeighboringTypesInModifier(e){return this.lastNode instanceof Gt&&this.pushError(M.makeSyntaxError(v.TYPE_MODIFIER_INCORRECT_VALUE_POSITION,this.lastNode,"Incorrect type ["+W.getPrettyTypeName(e)+"] near ["+W.getPrettyTypeName(this.lastNode)+"]")),!1}appendContent(e){e!=null&&this.currentContent.push(e)}tokenize(e,r){this.reset(),this.referenceParser=e.getParser(),this.activeNode=e,this.chars=r.split(""),this.inputLen=this.chars.length,this.runtimeNodes=[],this.lastNode=null;let n=null;this.isParsingString=!1,this.isParsingModifierName=!1;let i=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){this.checkCurrentOffsets();let a=!0;if(this.cur!=null&&this.rawContent.push(this.cur),this.isParsingString==!1&&(this.cur==E.String_Terminator_DoubleQuote||this.cur==E.String_Terminator_SingleQuote)){if(this.prev==E.String_EscapeCharacter){this.pushError(M.makeSyntaxError(v.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE,e,"Illegal string escape sequence outside string parsing."));continue}this.rawContent=[],this.rawContent.push(this.cur),i=this.cur,this.isParsingString=!0,n=this.currentIndex;continue}if(this.isInModifierParameterValue&&!this.isParsingString){let o=!1;if(!this.isParsingString&&G.ctypeSpace(this.next)){let l=this.scanForwardTo(" ",1).join("").trim().toLowerCase();l.length>0&&Je.isLanguageLogicalKeyword(l)&&(o=!0)}if(this.next==E.String_Terminator_SingleQuote||this.next==E.String_Terminator_DoubleQuote||this.next==null||o){this.appendContent(this.cur);let l=this.currentContent.join("");if(l.length>0){let c=l;if(this.currentContent=[],this.rawContent=[],c.trimRight().length==0){let f=this.nextNonWhitespace();if(f==E.String_Terminator_SingleQuote||f==E.String_Terminator_DoubleQuote){this.currentContent=[],this.rawContent=[];continue}}let u=new Gt;u.isVirtual=!1,u.name=c,u.value=c.trimRight(),u.startPosition=e._lexerRelativeOffset(this.currentIndex-c.length),u.endPosition=e._lexerRelativeOffset(this.currentIndex),u.parent=this.activeNode,this.guardAgainstNeighboringTypesInModifier(u),this.runtimeNodes.push(u),this.lastNode=u}if(l.length==0)continue;this.currentContent=[],this.rawContent=[],this.isInModifierParameterValue=!1;continue}if(this.next==E.Punctuation_Pipe||this.next==E.Punctuation_Colon||this.next==E.RightParent){this.isInModifierParameterValue=!1,this.appendContent(this.cur);let l=0,c=!1;if(this.currentContent[0]==E.String_Terminator_SingleQuote||this.currentContent[0]==E.String_Terminator_DoubleQuote){let m=this.scanForwardTo(this.currentContent[0]);m.length>0&&(this.currentContent=this.currentContent.concat(m),l=m.length,c=!0)}let u=this.currentContent.join("");c&&(u=u.substr(1),u=u.slice(0,-1)),this.currentContent=[],this.rawContent=[];let f=new Gt;f.isVirtual=!1,f.name=u,f.value=u,f.startPosition=e._lexerRelativeOffset(this.currentIndex-u.length),f.endPosition=e._lexerRelativeOffset(this.currentIndex),f.parent=this.activeNode,this.runtimeNodes.push(f),this.guardAgainstNeighboringTypesInModifier(f),this.lastNode=f,this.currentIndex+=l}else this.appendContent(this.cur);continue}if(this.isParsingString&&this.cur==i){if(this.prev==E.String_EscapeCharacter)this.appendContent(i);else{if(this.isInModifierParameterValue){let l=this.currentContent.join(""),c=new Gt;c.isVirtual=!1,c.name=l,c.value=l,c.startPosition=e._lexerRelativeOffset(n!=null?n:0),c.endPosition=e._lexerRelativeOffset(this.currentIndex),c.parent=this.activeNode,this.runtimeNodes.push(c),this.guardAgainstNeighboringTypesInModifier(c),this.lastNode=c,this.currentContent=[],this.rawContent=[],this.isParsingString=!1,this.isInModifierParameterValue=!1;continue}let o=new Nt;o.isVirtual=!1,o.startPosition=e._lexerRelativeOffset(n!=null?n:0),o.endPosition=e._lexerRelativeOffset(this.currentIndex),this.referenceParser!=null&&(o.sourceContent=this.referenceParser.getText(o.startPosition.index,o.endPosition.index+1)),o.parent=this.activeNode,i!=null&&(o.sourceTerminator=i),i=null,this.isParsingString=!1,o.value=this.currentContent.join(""),o.rawLexContent=this.rawContent.join("").trim(),this.currentContent=[],this.rawContent=[],this.guardAgainstNeighboringTypesInModifier(o),this.runtimeNodes.push(o),this.lastNode=o}continue}if(this.isParsingString&&this.cur==E.String_EscapeCharacter){if(this.next==E.String_EscapeCharacter){this.appendContent(E.String_EscapeCharacter),this.ignorePrevious=!0,this.currentIndex+=1;continue}else if(this.next==E.String_Terminator_SingleQuote){this.appendContent(E.String_Terminator_SingleQuote),this.currentIndex+=1;continue}else if(this.next==E.String_Terminator_DoubleQuote){this.appendContent(E.String_Terminator_DoubleQuote),this.currentIndex+=1;continue}else if(this.next=="n"){this.appendContent(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){this.appendContent("	"),this.currentIndex+=1;continue}else if(this.next=="r"){this.appendContent("\r"),this.currentIndex+=1;continue}}if(this.isParsingString==!1){if(this.isValidChar(this.cur)&&this.isValidChar(this.next)==!1&&this.currentContent.length==0&&(this.appendContent(this.cur),a=!1),(this.next==null||this.isValidChar(this.next)==!1)&&this.currentContent.length>0){a&&this.appendContent(this.cur);let o=this.currentContent.join("").trim(),l=o.length,c=this.currentIndex-l,u=e._lexerRelativeOffset(c),f=e._lexerRelativeOffset(this.currentIndex);if(this.currentContent=[],this.rawContent=[],o==Je.LogicalAnd){let p=new dn;p.isVirtual=!1,p.content=Je.LogicalAnd,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.LogicalOr){let p=new mn;p.isVirtual=!1,p.content=Je.LogicalOr,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.LogicalXor){let p=new ci;p.isVirtual=!1,p.content=Je.LogicalXor,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.ConstNull){let p=new fn;p.isVirtual=!1,p.content=Je.ConstNull,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.ConstTrue){let p=new kn;p.isVirtual=!1,p.content=Je.ConstTrue,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.ConstFalse){let p=new Ln;p.isVirtual=!1,p.content=Je.ConstFalse,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.LogicalNot){let p=new ar;p.isVirtual=!1,p.content=Je.LogicalNot,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}else if(o==Je.ArrList&&this.next==E.LeftParen){let p=new $n;p.isVirtual=!1,p.content=Je.ArrList,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,this.runtimeNodes.push(p),this.lastNode=p;continue}if(G.isNumeric(o)){let p=new Lt;p.isVirtual=!1,p.startPosition=u,p.endPosition=f,p.parent=this.activeNode,o.includes(".")?p.value=parseFloat(o):p.value=parseInt(o),p.rawLexContent=o,this.guardAgainstNeighboringTypesInModifier(p),this.runtimeNodes.push(p),this.lastNode=p;continue}if(this.runtimeNodes.length>0){let p=this.runtimeNodes[this.runtimeNodes.length-1];if(p instanceof dr){let d=new Ut;d.isVirtual=!1,d.name=o,d.content=o,d.startPosition=u,d.endPosition=f,d.parent=this.activeNode,this.runtimeNodes.push(d),this.lastNode=d;continue}else if(p instanceof Pr){let d=new Gt;d.isVirtual=!1,d.name=o,d.value=o,d.startPosition=u,d.endPosition=f,d.parent=this.activeNode,this.runtimeNodes.push(d),this.lastNode=d,this.isParsingModifierName=!1;continue}}let m=new ae;m.isVirtual=!1,m.name=o,m.startPosition=u,m.endPosition=f,m.parent=this.activeNode,this.runtimeNodes.push(m),this.lastNode=m;continue}}else{this.appendContent(this.cur);continue}if(!G.ctypeSpace(this.cur)){if(this.isParsingString==!1){if(this.cur==E.Punctuation_Equals&&this.next==E.Punctuation_GreaterThan){let o=new Ir;o.isVirtual=!1,o.content="=>",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.currentContent=[],this.rawContent=[],this.currentIndex+=1;continue}if(this.cur==E.Punctuation_Comma){let o=new Rt;o.isVirtual=!1,o.content=E.Punctuation_Comma,o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Semicolon){let o=new sr;o.isVirtual=!1,o.content=E.Punctuation_Semicolon,o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Plus){if(this.next==E.Punctuation_Equals){let l=new Mn;l.isVirtual=!1,l.content="+=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new Gr;o.isVirtual=!1,o.content="+",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.isParsingModifierName==!1&&this.cur==E.Punctuation_Minus){if(G.ctypeDigit(this.next)&&G.ctypeDigit(this.prev)==!1&&this.prev!=E.RightParent&&this.isRightOfInterpolationRegion()==!1){this.appendContent(this.cur);continue}if(this.next==E.Punctuation_Equals){let l=new li;l.isVirtual=!1,l.content="-=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}else if(this.next==E.Punctuation_GreaterThan){let l=new Jt;l.isVirtual=!1,l.content="->",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new Nr;o.isVirtual=!1,o.content="-",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Asterisk){if(this.next==E.Punctuation_Asterisk){let l=new ai;l.isVirtual=!1,l.content="**",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}else if(this.next==E.Punctuation_Equals){let l=new qn;l.isVirtual=!1,l.content="*=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new Hr;o.isVirtual=!1,o.content="*",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_ForwardSlash){if(this.next==E.Punctuation_Equals){let l=new Fn;l.isVirtual=!1,l.content="/=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new Wr;o.isVirtual=!1,o.content="/",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Percent){if(this.next==E.Punctuation_Equals){let l=new Vn;l.isVirtual=!1,l.content="%=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new oi;o.isVirtual=!1,o.content="%",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_LessThan){if(this.next==E.Punctuation_Equals){let l=null;if(this.currentIndex+2<this.inputLen&&(l=this.chars[this.currentIndex+2]),l==E.Punctuation_GreaterThan){let u=new Wn;u.isVirtual=!1,u.content="<=>",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+3),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=2;continue}let c=new jn;c.isVirtual=!1,c.content="<=",c.startPosition=e._lexerRelativeOffset(this.currentIndex),c.endPosition=e._lexerRelativeOffset(this.currentIndex+2),c.parent=this.activeNode,this.runtimeNodes.push(c),this.lastNode=c,this.currentIndex+=1;continue}let o=new Bn;o.isVirtual=!1,o.content="<",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_GreaterThan){if(this.next==E.Punctuation_Equals){let l=new pn;l.isVirtual=!1,l.content=">=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}let o=new pn;o.isVirtual=!1,o.content=">",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Equals&&this.next!=E.Punctuation_Equals){let o=new Yr;o.isVirtual=!1,o.content="=",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Equals&&this.next==E.Punctuation_Equals){let o=null;if(this.currentIndex+2<this.inputLen&&(o=this.chars[this.currentIndex+2]),o==E.Punctuation_Equals){let l=new Hn;l.isVirtual=!1,l.content="===",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+3),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=2}else{let l=new vr;l.isVirtual=!1,l.content="==",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1}continue}if(this.cur==E.Punctuation_Ampersand){if(this.next==E.Punctuation_Ampersand){let l=new dn;l.isVirtual=!1,l.content="&&",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.next==E.Punctuation_Equals){let l=new ui;l.isVirtual=!1,l.content="&=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}let o=new dn;o.isVirtual=!1,o.content="&",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Pipe&&this.next!=E.Punctuation_Pipe){let o=new dr;o.isVirtual=!1,o.content="|",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.isParsingModifierName=!0;continue}if(this.cur==E.Punctuation_Pipe&&this.next==E.Punctuation_Pipe){let o=new mn;o.isVirtual=!1,o.content="||",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+2),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.currentIndex+=1;continue}if(this.cur==E.Punctuation_Exclamation){if(this.next==E.Punctuation_Equals){let l=null;if(this.currentIndex+2<this.inputLen&&(l=this.chars[this.currentIndex+2]),l==E.Punctuation_Equals){let u=new Gn;u.isVirtual=!1,u.content="!==",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+3),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=2;continue}let c=new Un;c.isVirtual=!1,c.content="!=",c.startPosition=e._lexerRelativeOffset(this.currentIndex),c.endPosition=e._lexerRelativeOffset(this.currentIndex+2),c.parent=this.activeNode,this.runtimeNodes.push(c),this.lastNode=c,this.currentIndex+=1;continue}let o=new ar;o.isVirtual=!1,o.content="!",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Question&&this.next==E.Punctuation_Equals){let o=new Oi;o.isVirtual=!1,o.content="?=",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+2),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.currentIndex+=1;continue}if(this.cur==E.Punctuation_Question&&this.next==E.Punctuation_Question){let o=new hn;o.isVirtual=!1,o.content="??",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+2),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.currentIndex+=1;continue}if(this.cur==E.Punctuation_Question&&this.next==E.Punctuation_Colon){let o=new hn;o.isVirtual=!1,o.content="?:",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+2),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.currentIndex+=1;continue}if(this.cur==E.Punctuation_Question){let o=new Kn;o.isVirtual=!1,o.content="?",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.LeftParen){let o=new Qt;o.isVirtual=!1,o.content="(",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.RightParent){let o=new jt;o.isVirtual=!1,o.content=")",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o;continue}if(this.cur==E.Punctuation_Colon){if(this.runtimeNodes.length>0&&this.runtimeNodes[this.runtimeNodes.length-1]instanceof Ut){let c=new Pr;c.isVirtual=!1,c.content=":",c.startPosition=e._lexerRelativeOffset(this.currentIndex),c.endPosition=e._lexerRelativeOffset(this.currentIndex+1),c.parent=this.activeNode,this.runtimeNodes.push(c),this.isInModifierParameterValue==!1?this.isInModifierParameterValue=!0:this.isInModifierParameterValue=!1;continue}let o=new St;o.isVirtual=!1,o.content=":",o.startPosition=e._lexerRelativeOffset(this.currentIndex),o.endPosition=e._lexerRelativeOffset(this.currentIndex+1),o.parent=this.activeNode,this.runtimeNodes.push(o),this.lastNode=o,this.isParsingModifierName=!1;continue}}a&&this.appendContent(this.cur)}}let s=this.runtimeNodes.length-1;for(let a=0;a<this.runtimeNodes.length;a++){let o=null,l=null;a>0&&(o=this.runtimeNodes[a-1]),a!=s&&(l=this.runtimeNodes[a+1]);let c=this.runtimeNodes[a];c.prev=o,c.next=l}return this.runtimeNodes}};var Mt=class{constructor(){this.chars=[];this.currentIndex=0;this.lastIndex=0;this.inputLength=0;this.prev=null;this.cur=null;this.next=null;this.isParsingString=!1;this.isStringKeyPath=!1;this.antlersErrors=[];this._recusriveEntryCheck=new Map}isValidChar(e){return!(this.isParsingString==!1&&G.ctypeSpace(e)||this.isParsingString==!1&&e==Mt.LeftBracket||this.isParsingString==!1&&e==Mt.RightBracket)}normalizePath(e){return e=e.replace(":","_"),e=e.replace(".","_"),e=e.replace("[","_"),e=e.replace("]","_"),e.replace("]","_")}getAntlersErrors(){return this.antlersErrors}mergeErrors(e){e.forEach(r=>{this.antlersErrors.push(r)})}parse(e){this.antlersErrors=[],this._recusriveEntryCheck.clear();let r=e,n=!1,i=!1,s=!1,a=!1;e.startsWith(E.AtChar)&&(s=!0,e=e.substr(1)),e.startsWith(E.Punctuation_Caret)?(a=!0,e=e.substr(1)):(e.startsWith(E.Punctuation_Dollar)&&(n=!0,e=e.substr(1)),e.startsWith(E.Punctuation_Dollar)&&(i=!0,e=e.substr(1))),this.chars=[],this.currentIndex=0,this.lastIndex=0,this.inputLength=0,this.cur=null,this.prev=null,this.next=null,this.chars=e.split(""),this.inputLength=this.chars.length,this.lastIndex=this.inputLength-1;let o=[],l=!1,c=[],u=Mt.ColonSeparator,f=!1,m=null,p=!1,d=!0;if(this.isParsingString=!1,this.inputLength==0){let h=new fi;return h._isFromEmptyFailState=!0,h}for(this.currentIndex;this.currentIndex<this.inputLength;this.currentIndex+=1){if(this.cur=this.chars[this.currentIndex],this.next=null,f?(f=!1,this.prev=""):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLength&&(this.next=this.chars[this.currentIndex+1]),this.isParsingString==!1&&this.cur==Mt.ColonSeparator&&(u=Mt.ColonSeparator),this.isParsingString==!1&&this.cur==Mt.DotPathSeparator&&(u=Mt.DotPathSeparator),this.isParsingString&&this.cur==E.String_EscapeCharacter&&this.next==m){m!=null&&o.push(m),this.currentIndex+=1;continue}if(this.cur==E.String_Terminator_SingleQuote||this.cur==E.String_Terminator_DoubleQuote)if(this.isParsingString)if(this.cur==m)if(this.prev==E.String_EscapeCharacter){o.push(this.cur);continue}else this.isParsingString=!1,d=!1;else{o.push(this.cur);continue}else{this.prev!=null&&this.prev!=E.LeftBracket&&(G.ctypeAlpha(this.prev)||G.ctypeDigit(this.prev))&&this.antlersErrors.push(M.makeSyntaxError(v.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR,null,"Unexpected string start while parsing variable path. String literals must be within array accessors.")),this.isParsingString=!0,p=!0,m=this.cur,this.isStringKeyPath=!0;continue}if(this.isParsingString){if(G.ctypeSpace(this.cur)){o.push(this.cur);continue}else if(this.cur==E.String_EscapeCharacter){if(this.next==E.String_EscapeCharacter){o.push(E.String_EscapeCharacter),this.currentIndex+=1,f=!0;continue}else if(this.next=="n"){o.push(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){o.push("	"),this.currentIndex+=1;continue}else if(this.next=="r"){o.push("\r"),this.currentIndex+=1;continue}}}if(this.isParsingString==!1&&this.cur==Mt.LeftBracket){if(o.length>0){let g=new pr;g.name=o.join(""),g.delimiter=u,c.push(g),o=[]}if(this.next==null||G.ctypeSpace(this.next)){this.antlersErrors.push(M.makeSyntaxError(v.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT,null,"Unexpected end of input or whitespace while parsing variable accessor path."));continue}let h=this.locateEndOfAccessor();this.currentIndex=h.foundOn;let y=new Mt;if(c.push(y.parse(h.nestedContent)),this.mergeErrors(y.getAntlersErrors()),l=!0,this.currentIndex==-1){this.antlersErrors.push(M.makeSyntaxError(v.PARSER_CANNOT_PARSE_PATH_RECURSIVE,null,"Cannot parse variable path.")),l=!1;break}continue}if(this.isParsingString==!1&&this.next==Mt.RightBracket&&l){d?o.push(this.cur):d=!0;let h=new pd;h.name=o.join(""),c.push(h),o=[],u=Mt.ColonSeparator,this.currentIndex+=1,l=!1;continue}if(this.isParsingString==!1&&(this.cur==Mt.LeftBracket||this.cur==Mt.ColonSeparator||this.cur==Mt.DotPathSeparator||this.currentIndex==this.lastIndex)){if(this.next==null||G.ctypeSpace(this.next)){if(this.cur==Mt.ColonSeparator){if(o.length==0){this.antlersErrors.push(M.makeSyntaxError(v.TYPE_UNEXPECTED_BRANCH_SEPARATOR,null,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}this.antlersErrors.push(M.makeSyntaxError(v.TYPE_ILLEGAL_VARPATH_RIGHT,null,'Variable paths cannot end with the ":" character.'));continue}if(this.cur==Mt.LeftBracket){this.antlersErrors.push(M.makeSyntaxError(v.TYPE_ILLEGAL_VARPATH_SUBPATH_START,null,"Illegal variable sub-path start."));continue}}this.currentIndex==this.lastIndex&&this.isValidChar(this.cur)&&(d?o.push(this.cur):d=!0);let h=new pr;h.delimiter=u,h.name=o.join(""),p&&(h.isStringVar=p,h.name=r.substr(1),h.name=h.name.slice(0,-1),p=!1),c.push(h),o=[];continue}else{o.push(this.cur);continue}}let _=c.length;if(_>0){let h=c[_-1];(h instanceof pr||h instanceof fi)&&(h.isFinal=!0)}let P=new fi;return P.isStrictTagReference=a,P.isStrictVariableReference=n,P.isExplicitVariableReference=i,P.pathParts=c,P.originalContent=e,P.isVariableVariable=s,P.normalizedReference=e.replace(":","."),P}locateEndOfAccessor(){let e=[],r=1,n=-1,i="",s=!1,a=null;if(this._recusriveEntryCheck.has(this.currentIndex+1)==!1)this._recusriveEntryCheck.set(this.currentIndex+1,!0);else return{foundOn:n,nestedContent:""};for(let o=this.currentIndex+1;o<this.inputLength;o++){let l=this.chars[o],c=null,u=null;if(o>0&&(u=this.chars[o-1]),o+1<this.inputLength&&(c=this.chars[o+1]),s==!1&&(l==E.String_Terminator_SingleQuote||l==E.String_Terminator_DoubleQuote)){s=!0,a=l,e.push(l);continue}if(s==!1&&l==Mt.LeftBracket){r+=1,e.push(l);continue}if(s&&l==a&&u!=E.String_EscapeCharacter){e.push(l),s=!1,a=null;continue}if(s==!1&&l==Mt.RightBracket)if(r-=1,r==0){n=o,i=e.join("");break}else{e.push(l);continue}else e.push(l);s==!1&&G.ctypeSpace(c)&&this.antlersErrors.push(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path.")),c==null&&this.antlersErrors.push(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path."))}return{foundOn:n,nestedContent:i}}},Mi=Mt;Mi.ColonSeparator=":",Mi.LeftBracket="[",Mi.RightBracket="]",Mi.DotPathSeparator=".";var rm=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.cur=null;this.prev=null;this.pathParser=new Mi;this.lexer=new tm;this.activeNode=null}reset(){this.chars=[],this.inputLen=0,this.currentIndex=0,this.cur=null,this.prev=null}canBeClosingTag(e){var n;let r=(n=e.name)==null?void 0:n.name;return r=="elseif"||r=="else"?!0:e.name==null?!1:e.name.content.startsWith("/")}parseNode(e){var u,f,m,p;if(this.activeNode=e,this.reset(),e.content.startsWith("*subrecursive")){let d=e.content;d=d.trim(),d=G.trimRight(d,"*"),d=d.substr(13);let _=new un;return e.copyBasicDetailsTo(_),_.originalNode=e,_.name=new Dr,_.name.name=d,_.isNestedRecursive=!0,_.pathReference=this.pathParser.parse(d),_.mergeErrors(this.pathParser.getAntlersErrors()),_.content=d,_.runtimeContent=d,_}if(e.content.trim().startsWith("*recursive")){let d=e.content;d=d.trim(),d=G.trimRight(d,"*"),d=d.substr(10).trim();let _=new un;return e.copyBasicDetailsTo(_),_.originalNode=e,_.name=new Dr,_.name.name=d,_.pathReference=this.pathParser.parse(d),_.mergeErrors(this.pathParser.getAntlersErrors()),_.content=d,_.runtimeContent=d,_}this.chars=e.content.split(""),this.inputLen=this.chars.length;let r=[],n=!1,i="",s=!1,a=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.cur=this.chars[this.currentIndex],this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),n==!1){if(s==!1&&(this.cur==E.String_Terminator_DoubleQuote||this.cur==E.String_Terminator_SingleQuote)){a=this.cur,s=!0,r.push(this.cur);continue}if(s&&G.ctypeSpace(this.cur)){r.push(this.cur);continue}if(s&&this.cur==a&&this.prev!=E.String_EscapeCharacter){a=null,s=!1,r.push(this.cur);continue}if(G.ctypeSpace(this.cur)||this.currentIndex==this.inputLen-1||this.cur==E.Punctuation_Pipe){if(r.length==0)continue;G.ctypeSpace(this.cur)||this.cur!=E.Punctuation_Pipe&&r.push(this.cur),i=r.join(""),n=!0;break}r.push(this.cur)}let o=e.getContentRelativeStartIndex();if(e.nameStartsOn=e.relativeOffset(o,o),e.nameStartsOn!=null&&(e.nameEndsOn=e.nameStartsOn.shiftRight(i.length-1),i.includes(E.Punctuation_Colon))){let d=i.indexOf(E.Punctuation_Colon);e.nameMethodPartStartsOn=e.nameStartsOn.shiftRight(d+1)}e.name=em.getIdentifier(i),Zd.analyzeNode(e),e.parameters=this.getParameters(e),e.hasParameters=e.parameters.length>0,e.hasParameters&&(Zd.analyzeParametersForModifiers(e),e.resetContentCache()),e.pathReference=this.pathParser.parse(i),e.mergeErrors(this.pathParser.getAntlersErrors()),e.pathReference!=null&&e.pathReference.isStrictTagReference&&(e.name.name=e.name.name.substr(1),e.name.content=e.name.content.substr(1)),e.isClosingTag=this.canBeClosingTag(e);let l=[];e.isClosingTag==!1&&(l=this.lexer.tokenize(e,e.getContent())),e.runtimeNodes=l;let c=e.content.trim();if(Xt.isConditionalStructure(e)&&e.name.name!="else"&&l.length==0&&c!="/if"&&c!="/unless"&&c!="/endunless"&&c!="endif"&&c!="endunless"&&c!="/endif"&&e.getContent().trim().length==0&&this.pushConditionWithoutExpression(e),e.name.name=="endif"){let d=e.copyBasicDetails(),_=e.getParser();return _!=null&&d.withParser(_),d.name=new Dr,d.name.name="if",d.name.compound="if",d.isClosingTag=!0,d.content=" /if ",d.originalNode=e,d}if(e.name.name=="unless"){let d=e.copyBasicDetails(),_=e.getParser();if(_!=null&&d.withParser(_),d.name=new Dr,d.name.name="if",d.name.compound="if",e.isClosingTag==!1){let P=(u=e.getContent())!=null?u:"",h=" if !("+P+") ";d.content=h,d.originalNode=e,d.resetContentCache(),d.runtimeNodes=this.lexer.tokenize(d,(f=d.getContent())!=null?f:""),this.testUnlessContent(d)}else d.originalNode=e,d.content=" /if ";return d}else if(e.name.name=="elseunless"){let d=e.copyBasicDetails(),_=e.getParser();_!=null&&d.withParser(_),d.name=new Dr,d.name.name="elseif",d.name.compound="elseif";let P=(m=e.getContent())!=null?m:"",h=" elseif !("+P+") ";return d.content=h,d.originalNode=e,d.resetContentCache(),d.runtimeNodes=this.lexer.tokenize(d,(p=d.getContent())!=null?p:""),this.testUnlessContent(d),d}else if(e.name.name=="endunless"){let d=e.copyBasicDetails(),_=e.getParser();return _!=null&&d.withParser(_),d.name=new Dr,d.name.name="if",d.name.compound="if",d.isClosingTag=!0,d.content=" /if ",d.originalNode=e,d}return e}pushError(e){this.activeNode!=null&&this.activeNode.pushError(e)}testUnlessContent(e){var n;let r=(n=e.getContent())!=null?n:"";if(r=r.replace("!",""),r=r.replace("(",""),r=r.replace(")","").trim(),r.length==0){this.pushConditionWithoutExpression(e);return}}pushConditionWithoutExpression(e){this.pushError(M.makeSyntaxError(v.TYPE_PARSE_EMPTY_CONDITIONAL,e,"Condition structure lacks comparison expression."))}getParameters(e){var V,O,Y,z,X,K,re,De,de;let r=(V=e.getContent())!=null?V:"",n=r.split(""),i=[],s=[],a=n.length,o=0;if(e.name!=null){let te=G.trimLeft(e.content," "),We=e.content.length-te.length,ut=e.name.content.length;We>0?o=We+ut:o=ut}let l=!1,c=[],u="",f=0,m=0,p=!1,d=null,_=-1,P=-1,h=-1,y=-1,g=-1,N=-1,S='"';for(let te=0;te<a;te++){let We=n[te],ut=null,Vt=null;if(te+1<a&&(Vt=n[te+1]),p?(ut="",p=!1):te>0&&(ut=n[te-1]),l==!1&&G.ctypeSpace(We)){c=[],_=-1,P=-1,h=-1,y=-1,g=-1,N=-1;continue}if(l==!1&&We==E.Punctuation_Equals){if(c.length>0&&(G.ctypeAlpha(c[0])||G.ctypeDigit(c[0])||c[0]==E.Punctuation_Colon||c[0]==E.AtChar)==!1){c=[];continue}if(te+1>=a){this.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_END_OF_INPUT,e,"Unexpected end of input"));continue}let Ve=null;if(te+1<a&&(Ve=n[te+1]),ut==E.Punctuation_Equals){c=[],_=-1,P=-1,h=-1,y=-1,g=-1,N=-1;continue}if(G.ctypeSpace(Ve)||Ve==E.Punctuation_Equals){c=[],_=-1,P=-1,h=-1,y=-1,g=-1,N=-1;continue}c.length>0&&(y=te,g=te,u=c.join(""),f=m,l=!0,c=[]),Vt==E.String_Terminator_DoubleQuote&&(d=E.String_Terminator_DoubleQuote,S=E.String_Terminator_DoubleQuote,te+=1),Vt==E.String_Terminator_SingleQuote&&(d=E.String_Terminator_SingleQuote,S=E.String_Terminator_SingleQuote,te+=1);continue}if(l&&We==E.String_EscapeCharacter){let Ve=null;if(te+1<a&&(Ve=n[te+1]),Ve==E.String_EscapeCharacter){c.push(E.String_EscapeCharacter),te+=1,p=!0;continue}if(Ve==E.String_Terminator_DoubleQuote){c.push(E.String_Terminator_DoubleQuote),te+=1;continue}if(Ve==E.String_Terminator_SingleQuote){c.push(E.String_Terminator_SingleQuote),te+=1;continue}if(Ve=="n"){c.push(`
`),te+=1;continue}if(Ve=="r"){c.push("\r"),te+=1;continue}}if(l==!1&&(d!=null&&We==d||d==null&&G.ctypeSpace(We))&&i.push(c.join("")),l&&(d!=null&&We==d||d==null&&G.ctypeSpace(We))){let Ve=c.join("");N=te,P=te,l=!1,d=null,c=[];let ft=new qs;if(u.startsWith(E.Punctuation_Colon)&&(ft.isVariableReference=!0,u=u.substr(1)),ft.nameDelimiter=S,ft.name=u,ft.value=Ve,ft.startPosition=(O=e.relativePositionFromOffset(m,f))!=null?O:null,te+1>a){this.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER,e,"Unexpected end of input while parsing parameter content.")),ft.parent=e,s.push(ft),u="";continue}ft.endPosition=(Y=e.relativePositionFromOffset(te+1,te+1))!=null?Y:null,ft.parent=e,ft.blockPosition={start:(z=e.relativeOffset(_,_))!=null?z:null,end:(X=e.relativeOffset(P,P))!=null?X:null},ft.namePosition={start:(K=e.relativeOffset(h,h))!=null?K:null,end:(re=e.relativeOffset(y,y))!=null?re:null},ft.valuePosition={start:(De=e.relativeOffset(g+2,g+2))!=null?De:null,end:(de=e.relativeOffset(N,N))!=null?de:null},s.push(ft),u="",_=-1,P=-1,h=-1,y=-1,g=-1,N=-1;continue}if(l==!1&&(We==E.String_Terminator_DoubleQuote||We==E.String_Terminator_SingleQuote)&&te>o)break;c.push(We),_==-1&&(_=te),h==-1&&(h=te),c.length==1&&(m=te+1)}if(d!=null){let te=e;if(i.length>0){let We=i[i.length-1],ut=e.content.indexOf(We);if(ut>=0){let Vt=new Z;Vt.startPosition=e.relativeOffset(ut-2,ut-2),Vt.endPosition=e.relativeOffset(ut+We.length,ut+We.length),te=Vt}}this.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_END_OF_INPUT,te,"Unexpected string literal while parsing parameters."))}return s}};function Pl(t){return t.length==0?null:t[0].startPosition}var cv=Q(Uc()),Hu=class{static regions(){return this.noParseRegions}static clear(){this.noParseRegions.clear()}static registerNoParseContent(e){let r=cv.Md5.hashStr(e);return this.noParseRegions.set(r,e),r}};Hu.noParseRegions=new Map;function nm(t,e){let r=new Set(t),n=new Set(e),i=new Set([...r].filter(s=>n.has(s)));return Array.from(i)}var im=class{constructor(){this.closingTagIndex=new Map;this.closingTagIndexCount=new Map;this.openTagIndexCount=new Map;this.closingTagNames=new Map;this.parentNode=null;this.stackCount=0;this.createdExecutionBranches=[];this.document=null}getClosingCandidates(e){var r,n;if((e instanceof q||e instanceof dt)&&e.isClosingTag==!1){let i=(n=(r=e.name)==null?void 0:r.compound)!=null?n:"";return i=="if"?["if","elseif","else"]:i=="elseif"?["elseif","else","if"]:i=="else"?["if"]:[i]}return[]}buildCloseIndex(e){var r,n,i;e.forEach(s=>{var a,o,l,c,u,f,m,p,d,_;if(!(s instanceof un)&&!((s instanceof q||s instanceof dt)&&s.isSelfClosing)&&(s instanceof q||s instanceof dt)&&s.isClosingTag){this.closingTagIndex.has(this.stackCount)==!1&&this.closingTagIndex.set(this.stackCount,new Map),this.closingTagIndexCount.has(this.stackCount)==!1&&this.closingTagIndexCount.set(this.stackCount,new Map);let P=(o=(a=s.name)==null?void 0:a.compound)!=null?o:"";((l=this.closingTagIndex.get(this.stackCount))==null?void 0:l.has(P))==!1&&((c=this.closingTagIndex.get(this.stackCount))==null||c.set(P,[]),(u=this.closingTagIndexCount.get(this.stackCount))==null||u.set(P,0)),(m=(f=this.closingTagIndex.get(this.stackCount))==null?void 0:f.get(P))==null||m.push(s);let h=(d=(p=this.closingTagIndexCount.get(this.stackCount))==null?void 0:p.get(P))!=null?d:0;(_=this.closingTagIndexCount.get(this.stackCount))==null||_.set(P,h+1)}}),this.closingTagNames.has(this.stackCount)==!1&&this.closingTagNames.set(this.stackCount,[]),this.closingTagIndex.has(this.stackCount)&&(this.closingTagNames.set(this.stackCount,Array.from((n=(r=this.closingTagIndex.get(this.stackCount))==null?void 0:r.keys())!=null?n:[])),(i=this.closingTagIndex.get(this.stackCount))==null||i.forEach((s,a)=>{var c,u,f,m,p,d,_;let o=s.length;if(o==0)return;let l=s[o-1];for(let P=0;P<o;P++){let h=e[P];if(h instanceof q||h instanceof dt){if(h instanceof un)continue;if(h.index>=l.index)break;let y=(u=(c=h.name)==null?void 0:c.compound)!=null?u:"";if(h.isClosingTag==!1&&a==y&&!h.isSelfClosing){this.openTagIndexCount.has(this.stackCount)==!1&&this.openTagIndexCount.set(this.stackCount,new Map),((f=this.openTagIndexCount.get(this.stackCount))==null?void 0:f.has(a))==!1&&((m=this.openTagIndexCount.get(this.stackCount))==null||m.set(a,0));let g=(d=(p=this.openTagIndexCount.get(this.stackCount))==null?void 0:p.get(a))!=null?d:0;(_=this.openTagIndexCount.get(this.stackCount))==null||_.set(a,g+1)}}}}))}getScanForList(e){var r;if(e instanceof q||e instanceof dt){let n=(r=e.name)==null?void 0:r.compound;if(n=="else")return["if"];if(n=="elseif")return["elseif","else","if"];if(e.isClosingTag==!1){let i=this.getClosingCandidates(e),s=this.closingTagNames.get(this.stackCount);return nm(i,s)}}return[]}canPossiblyClose(e){var r,n;if(e instanceof un)return!1;if(e instanceof dt||e instanceof q){if(e.isComment||e.isSelfClosing)return!1;let i=(n=(r=e.name)==null?void 0:r.compound)!=null?n:"";if(i=="else"||i=="elseif")return!0;if(e.isClosingTag==!1){let s=this.getClosingCandidates(e),a=this.closingTagNames.get(this.stackCount);return nm(s,a).length>0}}return!1}findClosingPair(e,r,n){var o,l,c,u;let i=r.runtimeNodes.length,s=e.length,a=0;for(let f=0;f<s;f++){let m=e[f];if(m instanceof q||m instanceof dt)if(r.endPosition!=null&&m.startPosition!=null){if(r.endPosition.isBefore(m.startPosition)){if(m.isClosingTag&&m.isOpenedBy!=null||m.isSelfClosing)continue;let p=(l=(o=m.name)==null?void 0:o.compound)!=null?l:"";if(m.isClosingTag==!1){if(n.includes(p)){let d=(c=this.openTagIndexCount.get(this.stackCount))==null?void 0:c.get(p),_=(u=this.closingTagIndexCount.get(this.stackCount))==null?void 0:u.get(p);d!=_&&m.runtimeNodes.length>=i,a+=1}continue}if(n.includes(p)&&a>0){a-=1;continue}if(a==0&&n.includes(p)){m.isOpenedBy=r,r.isClosedBy=m;break}}}else continue}}associate(e,r){var s,a,o,l,c,u,f;this.document=r;let n=[{documentNodes:e,parent:null}],i=[];for(;n.length>0;){let m=n.pop();if(m==null)continue;let p=m.documentNodes;this.parentNode=m.parent,this.stackCount+=1,this.buildCloseIndex(p),p=Xt.pairConditionals(p),p.forEach(h=>{if((h instanceof q||h instanceof dt)&&this.canPossiblyClose(h)){if(Xt.isConditionalStructure(h))return;let y=this.getScanForList(h);this.findClosingPair(p,h,y)}});let d=p.length;for(let h=0;h<d;h++){let y=p[h];if((y instanceof q||y instanceof dt)&&y.isClosedBy!=null)for(let g=h+1;g<d;g++){let N=p[g];if(N.index>y.isClosedBy.index)break;if(N.parent=y,y.children.push(N),N instanceof q&&N.index==y.index){N.parent=y;break}}}p.forEach(h=>{if((h instanceof q||h instanceof dt)&&h.children.length>0){let y=[];h.children.forEach(g=>{g.parent!=null&&g.parent.index==h.index&&(g.parent=h,y.push(g))}),n.push({documentNodes:y,parent:h})}});let _=[];p.forEach(h=>{this.parentNode==null?h.parent==null&&_.push(h):h.parent==this.parentNode&&_.push(h)}),_=this.reduceConditionals(_,r);let P=new Map;p.forEach(h=>{var y,g,N,S;if((h instanceof q||h instanceof dt)&&h.isClosedBy!=null&&this.document!=null){let V=this.document.getText(((g=(y=h.endPosition)==null?void 0:y.index)!=null?g:0)+1,(S=(N=h.isClosedBy.startPosition)==null?void 0:N.index)!=null?S:0);h.runtimeContent=V}});for(let h=0;h<_.length;h++){let y=_[h],g=(s=y.refId)!=null?s:"";if(P.set(g,1),(y instanceof q||y instanceof dt)&&y.isComment==!1&&((a=y.name)==null?void 0:a.name)=="noparse"&&!(y instanceof ir)&&y.isClosingTag==!1){if(y.isClosedBy==null){y.pushError(M.makeSyntaxError(v.TYPE_NO_PARSE_UNASSOCIATED,y,"Encountered noparse region without a closing tag. All noparse regions must be closed."));continue}let N=y.content;this.document!=null&&(N=this.document.getText(((l=(o=y.endPosition)==null?void 0:o.index)!=null?l:0)+1,(f=(u=(c=y.isClosedBy)==null?void 0:c.startPosition)==null?void 0:u.index)!=null?f:0));let S=new ir,V=y.getParser();V!=null&&S.withParser(V),y.copyBasicDetailsTo(S),S.name=new Dr,S.name.name="noparse",S.name.compound="noparse",S.content=Hu.registerNoParseContent(N),S.originalNode=y,S.isClosedBy=y.isClosedBy,S.parent=y.parent,_[h]=S}}if(this.parentNode!=null&&(this.parentNode instanceof dt||this.parentNode instanceof q)&&(this.parentNode.children=this.cleanNodes(_),this.parentNode.parent!=null&&this.parentNode.parent instanceof q)){let h=this.parentNode.parent.children,y=[];h.forEach(g=>{var N;P.has((N=g.refId)!=null?N:"")==!1&&y.push(g)}),this.parentNode.parent.children=this.cleanNodes(y)}this.stackCount<=1&&(i=_)}return this.createdExecutionBranches.length>0&&this.createdExecutionBranches.forEach(m=>{m.head!=null&&(m.nodes=m.head.children)}),i}cleanNodes(e){let r=[],n=[];for(let i=0;i<e.length;i++){let s=e[i],a=s.refId;if(n.includes(a))break;r.push(s),n.push(a)}return r}findEndOfBranch(e,r,n){let i=[],s=n,a=null;for(let o=0;o<e.length;o++){let l=e[o];if((l instanceof q||l instanceof dt)&&l.isOpenedBy!=null&&l.isOpenedBy==r){a=l;break}else i.push(l)}return{children:i,tail:a,offset:s}}reduceConditionals(e,r){var i,s,a,o,l,c,u,f,m,p,d,_;let n=[];for(let P=0;P<e.length;P++){let h=e[P];if((h instanceof q||h instanceof dt)&&h.isComment==!1&&h.isClosingTag==!1&&h.isClosedBy!=null)if(((s=(i=h.name)==null?void 0:i.compound)!=null?s:"")=="if"){let g=new Xe;g.index=h.index,g.chain.push(h.index),g.fragment=h.fragment,g.fragmentPosition=h.fragmentPosition,g.containsAnyFragments=h.containsAnyFragments,g.containsChildStructures=h.containsChildStructures;let N=(o=(a=h.startPosition)==null?void 0:a.offset)!=null?o:0,S=h.getFinalClosingTag(),V=((c=(l=S.endPosition)==null?void 0:l.offset)!=null?c:0)+1;g.nodeContent=r.getText(N,V),this.parentNode!=null&&(g.parent=this.parentNode);let O=null,Y=!0,z=0;for(;Y;){if(z+=1,z>im.ForceBreakLimit){Y=!1;break}if(h instanceof q||h instanceof dt){let X=this.findEndOfBranch(e.slice(P+1),h,P),K=new od,re=X.tail;K.head=h,K.tail=re,K.nodes=this.cleanNodes(h.children);let De=((f=(u=h.endPosition)==null?void 0:u.offset)!=null?f:0)+1,de=(d=(p=(m=h.isClosedBy)==null?void 0:m.startPosition)==null?void 0:p.offset)!=null?d:0,te=r.getText(De,de);if(K.documentText=te,r.shouldParseChildDocument()&&(K.childDocument=gt.childFromText(K.documentText,Pl(K.nodes))),re==null&&(re=K.head.isClosedBy),re!=null&&re.startPosition!=null&&(K.startPosition=re.startPosition),re!=null&&(K.index=re.index),K.nodes.length>0){let We=K.nodes[K.nodes.length-1];We.endPosition!=null&&(K.endPosition=We.endPosition)}else re!=null&&re.endPosition!=null&&(K.endPosition=re.endPosition);if(this.createdExecutionBranches.push(K),g.logicBranches.push(K),(re==null?void 0:re.isClosingTag)&&((_=re.name)==null?void 0:_.compound)=="if"){O=X.offset,Y=!1;break}else re!=null&&g.chain.push(re.index),P=X.offset,re instanceof q&&(h=re)}else Y=!1}if(g.logicBranches.length>0){let X=g.logicBranches[0],K=g.logicBranches[g.logicBranches.length-1];X.startPosition!=null&&(g.startPosition=X.startPosition),K.endPosition!=null&&(g.endPosition=K.endPosition)}if(n.push(g),O!=null&&O==e.length)break}else n.push(h);else n.push(h)}return n}},To=im;To.ForceBreakLimit=1e5;var sm=class{static associateRecursiveParent(e){var r,n;for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof un){let a="*recursive "+((r=s.name)==null?void 0:r.name);if(i-1<0){s.pushError(M.makeSyntaxError(v.TYPE_RECURSIVE_NODE_INVALID_POSITION,s,"Unpaired recursive node. All recursive nodes must have a parent node introducing them."));continue}let o=null;for(let l=i-1;l>=0;l-=1){let c=e[l];if(!(c instanceof je)&&c instanceof q&&c.isClosedBy!=null){if(s.isNestedRecursive){if(c.content.trim()==((n=s.name)==null?void 0:n.name)){o=c;break}}else if(c.runtimeContent.includes(a)&&G.substringCount(s.runtimeContent,"*recursive")==1){o=c;continue}else if(o!=null)break}}if(o==null)continue;s.isNestedRecursive?(o.hasRecursiveNode=!0,s.recursiveParent=o,o.recursiveReference=s):o.parent!=null?o.parent instanceof q&&(o.parent.hasRecursiveNode=!0,o.parent.recursiveReference=s,s.recursiveParent=o.parent):(o.hasRecursiveNode=!0,s.recursiveParent=o,o.recursiveReference=s)}}}};var No=class{static getNearText(e){var n,i,s,a;if(e instanceof ae)return e.name;if(e instanceof Lt)return(i=(n=e.value)==null?void 0:n.toString())!=null?i:"";if(e instanceof Nt)return e.value;if(e instanceof Ut)return e.name;if(e instanceof Gt)return e.value;if(e instanceof $n||e instanceof ci||e instanceof fn||e instanceof kn||e instanceof Ln||e instanceof ar||e instanceof Yn||e instanceof Rt||e instanceof sr||e instanceof Mn||e instanceof Gr||e instanceof li||e instanceof Nr||e instanceof ai||e instanceof qn||e instanceof Hr||e instanceof Fn||e instanceof Wr||e instanceof Vn||e instanceof oi||e instanceof Wn||e instanceof jn||e instanceof Bn||e instanceof wi||e instanceof pn||e instanceof Yr||e instanceof Hn||e instanceof vr||e instanceof dn||e instanceof dr||e instanceof mn||e instanceof Gn||e instanceof Un||e instanceof Oi||e instanceof hn||e instanceof Kn||e instanceof Qt||e instanceof jt||e instanceof Pr||e instanceof St||e instanceof ns||e instanceof Ir||e instanceof ui||e instanceof Jt)return e.content;let r="";return e instanceof q?e.originalNode!=null?r=e.originalNode.getContent():r=(a=(s=e.startPosition)==null?void 0:s.line.toString())!=null?a:"":e.originalAbstractNode!=null?r=e.originalAbstractNode.rawContent():r=e.rawContent(),r.length>15&&(r=r.substr(0,-15)),r}};var vo=class{};vo.deferredCoreLibraries=["arr","array","str","string","method","math","sys","convert","scope","stopwatch","file","path","url","request","json","datetime"];var _t=class{};_t.ARR_PLUCK="pluck",_t.ARR_TAKE="take",_t.ARR_SKIP="skip",_t.ARR_MAKE="arr",_t.ARR_ORDERBY="orderby",_t.ARR_GROUPBY="groupby",_t.ARR_MERGE="merge",_t.QUERY_WHERE="where",_t.STRUCT_SWITCH="switch",_t.BITWISE_AND="bwa",_t.BITWISE_OR="bwo",_t.BITWISE_XOR="bxor",_t.BITWISE_NOT="bnot",_t.BITWISE_SHIFT_LEFT="bsl",_t.BITWISE_SHIFT_RIGHT="bsr",_t.operators=["pluck","take","arr","skip","orderby","groupby","merge","where","switch","bwa","bwo","bxor","bsl","bsr"];var At=class{constructor(){this.pathParser=new Mi;this.tokens=[];this.createdVariables=[];this.createdModifierChains=[];this.createdLanguageOperators=[];this.createdArrays=[];this.tracedAssignments=[];this.mergedVariablePaths=[];this.mergedComponents=new Map;this.modifierNameMapping=new Map;this.isRealModifierSeparator=new Map;this.isRoot=!0;this.retriggerNonVirtualGroupMembers=[]}hasModifierConstruct(e){return this.modifierNameMapping.has(e)}getModifierConstruct(e){return this.modifierNameMapping.get(e)}isActualModifierSeparator(e){return this.isRealModifierSeparator.has(e)}isMergedVariableComponent(e){return this.mergedComponents.has(e)}getMergedVariable(e){return this.mergedComponents.get(e)}getMergedVariablePaths(){return this.mergedVariablePaths}getCreatedModifierChains(){return this.createdModifierChains}getCreatedLangaugeOperators(){return this.createdLanguageOperators}getCreatedArrays(){return this.createdArrays}getCreatedVariables(){return this.createdVariables}getRuntimeAssignments(){return this.tracedAssignments}getAssignedVariables(){let e=[],r=[];for(let n=0;n<this.tracedAssignments.length;n++){let i=this.tracedAssignments[n];i.target instanceof ae&&r.includes(i.target.name)==!1&&(r.push(i.target.name),e.push(i.target))}return e}getAssignedVariableNames(){let e=[];for(let r=0;r<this.tracedAssignments.length;r++){let n=this.tracedAssignments[r];n.target instanceof ae&&e.includes(n.target.name)==!1&&e.push(n.target.name)}return e}reset(){this.tokens=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.createdArrays=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.tracedAssignments=[],this.createdArrays=[],this.mergedVariablePaths=[],this.mergedComponents.clear(),this.modifierNameMapping.clear()}parse(e){return this.tokens=e,this.tokens=this.combineVariablePaths(this.tokens),this.tokens=this.createLanguageOperators(this.tokens),this.tokens=this.createLogicalGroups(this.tokens),this.tokens=this.associateMethodCalls(this.tokens),this.tokens=this.createTupleLists(this.tokens),this.tokens=this.createLibraryInvocations(this.tokens),this.tokens=this.associateModifiers(this.tokens),this.tokens=this.createNullCoalescenceGroups(this.tokens),this.tokens=this.correctTypes(this.tokens),this.tokens=this.createTernaryGroups(this.tokens),this.tokens=this.applyOperationOrder(this.tokens),this.validateNeighboringOperators(this.tokens),this.tokens=this.createLogicGroupsToRemoveMethodInvocationAmbiguity(this.tokens),this.tokens=this.createLogicGroupsToResolveOperatorAmbiguity(this.tokens),this.validateNoDanglingLogicGroupEnds(this.tokens),this.isRoot&&(this.tokens=this.insertAutomaticStatementSeparators(this.tokens),this.retriggerNonVirtualGroupMembers.length>0&&this.retriggerNonVirtualGroupMembers.forEach(r=>{this.markAllNonVirtualAsListGroupMember(r)})),this.createSemanticGroups(this.tokens)}setIsRoot(e){return this.isRoot=e,this}validateNeighboringOperators(e){let r=e.length;for(let n=0;n<r;n++){let i=e[n];if(At.isOperatorType(i)){if(n+1>=r){i.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_OPERATOR,i,"Unexpected operator while parsing input text."));return}let s=e[n+1];if(At.isOperatorType(s)){s.pushError(M.makeSyntaxError(v.TYPE_OPERATOR_INVALID_ON_RIGHT,s,"Unexpected operator while parsing input text."));continue}}}}static isAssignmentOperator(e){return e instanceof Mn||e instanceof Fn||e instanceof Yr||e instanceof Vn||e instanceof qn||e instanceof li}static isOperatorType(e){return e instanceof Mn||e instanceof Fn||e instanceof Yr||e instanceof Vn||e instanceof qn||e instanceof li||e instanceof Oi||e instanceof Yn||e instanceof dn||e instanceof ar||e instanceof mn||e instanceof ci||e instanceof hn||e instanceof ui||e instanceof Gr||e instanceof Wr||e instanceof ai||e instanceof oi||e instanceof Hr||e instanceof Nr||e instanceof vr||e instanceof pn||e instanceof wi||e instanceof Bn||e instanceof jn||e instanceof Un||e instanceof Gn||e instanceof Wn||e instanceof Hn}markAllNonVirtualAsListGroupMember(e){e.forEach(r=>{if(r instanceof Le||r instanceof gn||r instanceof Li){r.start!=null&&r.start.isVirtual==!1&&(r.start.isListGroupMember=!0),r.end!=null&&r.end.isVirtual==!1&&(r.end.isListGroupMember=!0),r.scopeOperator!=null&&(r.scopeOperator.isListGroupMember=!0),r.nodes.forEach(n=>{this.markAllNonVirtualAsListGroupMember([n])});return}else r instanceof Dt&&(r.separatorToken!=null&&r.separatorToken.isVirtual==!1&&(r.separatorToken.isListGroupMember=!0),this.markAllNonVirtualAsListGroupMember(r.nodes));r.isVirtual==!1&&(r.isListGroupMember=!0),r.originalAbstractNode!=null&&r.originalAbstractNode!=r&&this.markAllNonVirtualAsListGroupMember([r.originalAbstractNode])})}markAllNonVirtualAsSwitch(e){e.forEach(r=>{if(r instanceof Le||r instanceof gn||r instanceof Li){r.start!=null&&r.start.isVirtual==!1&&(r.start.isSwitchGroupMember=!0),r.end!=null&&r.end.isVirtual==!1&&(r.end.isSwitchGroupMember=!0),r.scopeOperator!=null&&(r.scopeOperator.isSwitchGroupMember=!0),r.nodes.forEach(n=>{this.markAllNonVirtualAsSwitch([n])});return}else r instanceof Dt&&(r.separatorToken!=null&&r.separatorToken.isVirtual==!1&&(r.separatorToken.isSwitchGroupMember=!0),this.markAllNonVirtualAsSwitch(r.nodes));r.isVirtual==!1&&(r.isSwitchGroupMember=!0),r.originalAbstractNode!=null&&r.originalAbstractNode!=r&&this.markAllNonVirtualAsSwitch([r.originalAbstractNode])})}validateNoDanglingLogicGroupEnds(e){e.forEach(r=>{r instanceof jt&&r.pushError(M.makeSyntaxError(v.TYPE_LOGIC_GROUP_NO_START,r,"Unexpected [T_LOGIC_END] while parsing input text."))})}isValidModifierValue(e){return e instanceof Gt||e instanceof ae||e instanceof kn||e instanceof Ln||e instanceof fn||e instanceof Lt||e instanceof Nt}wrapNumberInVariable(e){var n,i,s,a;let r=new ae;return r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.name=(i=(n=e.value)==null?void 0:n.toString())!=null?i:"",r.content=(a=(s=e.value)==null?void 0:s.toString())!=null?a:"",r.originalAbstractNode=e,r.refId=e.refId,r.modifierChain=e.modifierChain,r.index=e.index,this.createdVariables.push(r),r}wrapArithmeticModifier(e,r){let n=new Ut;return n.startPosition=e.startPosition,n.endPosition=e.endPosition,n.originalAbstractNode=e,n.content=r,n.name=r,n.index=e.index,n}combineVariablePaths(e){let r=[],n=e.length;for(let i=0;i<n;i++){let s=e[i],a=r.length;if(s instanceof St){if(a==0){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE,s,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}if(i+1>n){let c="";if(i>0){let u=e[i-1];c=No.getNearText(u)}s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP,s,'Unexpected end of input while parsing input text near "'+c+No.getNearText(s)+'".'));continue}let o=r[a-1],l=e[i+1];if(l instanceof Lt&&nt.distance(o,l)==1&&(l=this.wrapNumberInVariable(l)),o instanceof ae&&l instanceof ae&&nt.distance(o,l)==1){r.pop(),nt.mergeVarContentRight(":",s,l),nt.mergeVarRight(o,l),r.push(l),this.createdVariables.push(l),this.mergedVariablePaths.push(l),this.mergedComponents.set(s,l),this.mergedComponents.set(o,l),this.mergedComponents.set(l,l),i+=1;continue}else{r.push(s);continue}}else if(s instanceof Nt&&a>0){if(i+1>=n){r.push(s);continue}let o=r[a-1],l=e[i+1];if(o instanceof ae&&l instanceof ae&&nt.distance(o,s)<=1&&nt.distance(s,l)<=1){r.pop(),nt.mergeVarContentLeft(s.sourceTerminator+s.value+s.sourceTerminator,s,o),nt.mergeVarContentLeft(l.name,l,o),this.createdVariables.push(o),r.push(o),this.mergedVariablePaths.push(o),this.mergedComponents.set(s,o),this.mergedComponents.set(o,o),this.mergedComponents.set(l,o),i+=1;continue}else r.push(s)}else if(s instanceof Nr&&a>0){let o=r[a-1],l=e[i+1];if(o instanceof ae&&(l instanceof ae||l instanceof mn)){let c=nt.distance(o,s),u=nt.distance(s,l);c<=1&&u<=1?(o.endPosition=l.endPosition,this.mergedComponents.set(s,o),this.mergedComponents.set(o,o),this.mergedComponents.set(l,o),i+=1):r.push(s)}else r.push(s)}else r.push(s)}return r.forEach(i=>{i instanceof ae&&(i.variableReference=this.pathParser.parse(i.name),i.mergeErrors(this.pathParser.getAntlersErrors()))}),r}convertVarNodeToOperator(e){let r=new Yn;return r.content=e.name,r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.originalAbstractNode=e,e.convertedToOperator=!0,this.createdLanguageOperators.push(r),r}convertOperatorToVarNode(e){let r=new ae;return r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.content=e.content,r.name=e.content,r.originalAbstractNode=e,this.createdVariables.push(r),r}createLanguageOperators(e){let r=e.length;for(let n=0;n<r;n++){let i=e[n];if(i instanceof ae){if(i.name.includes(E.Punctuation_FullStop)){let s=i.name.split(E.Punctuation_FullStop);if(_t.operators.includes(s[0])||vo.deferredCoreLibraries.includes(s[0])){e[n]=this.convertVarNodeToOperator(i);continue}}if(_t.operators.includes(i.name)){e[n]=this.convertVarNodeToOperator(i);continue}}if(i instanceof Yn){if(n+1>=r){e[n]=this.convertOperatorToVarNode(i);continue}if(e[n+1]instanceof sr){e[n]=this.convertOperatorToVarNode(i);continue}}}return e}createLogicalGroups(e){let r=[],n=e.length,i=[];for(let a=0;a<n;a++){let o=e[a];if(o instanceof ar){let l=this.countTypeRight(e,a,ar);if(i.length==0&&e.length==l){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR,o,"Unexpected [T_LOGIC_INVERSE] while parsing input text."));continue}if(a>0&&i.length>0){let f=i[i.length-1];if(f instanceof Lt||f instanceof jt||f instanceof Le){if(f instanceof Le&&f.start instanceof ar){f.start.pushError(M.makeSyntaxError(v.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED,f.start,"[T_AOP_FACTORIAL] operand will always materialize boolean type."));continue}let m=new ns;m.startPosition=o.startPosition,m.endPosition=o.endPosition,m.content="!".repeat(l),m.originalAbstractNode=o,m.repeat=l,i.push(m),l>0&&(a+=l-1);continue}}if(l%2==0){a+=l-1;continue}let c=e[a+l];if(c instanceof Qt){let f=a+l+1;if(f>=n){c.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET,c,"Unexpected end of input while parsing input text."));continue}let m=this.findLogicalGroupEnd(e[a+l],e.slice(f));if(m.found){let p=m.logicalGroup,d=new Le;d.start=o,d.end=p,d.nodes.push(o),d.nodes.push(p),d.startPosition=o.startPosition,d.endPosition=p.endPosition,i.push(d),a+=m.skipCount+l}continue}let u=this.resolveValueRight(e,a);u.value!=null&&i.push(u.value),a+=u.negationCount}else i.push(o)}let s=i.length;for(let a=0;a<s;a++){let o=i[a];if(o instanceof Qt){if(a+1>=s){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION,o,"Unexpected end of input while parsing input text."));continue}let l=this.findLogicalGroupEnd(o,i.slice(a+1));l.found&&l.logicalGroup!=null&&r.push(l.logicalGroup),a+=l.skipCount}else if(o instanceof ns){if(r.length==0){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS,o,"Unexpected [T_AOP_FACTORIAL] while parsing input text."));continue}let l=r[r.length-1];if(!(l instanceof Le)&&!(l instanceof Lt)){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_FACTORIAL_OPERAND,o,"Unexpected left operand encountered for [T_AOP_FACTORIAL] while parsing input text."));continue}l=r.pop();let c=new Le;c.startPosition=l.startPosition,c.endPosition=o.endPosition,c.originalAbstractNode=o,c.nodes.push(l),c.nodes.push(o),r.push(c)}else r.push(o)}return r}makeArgGroup(e){let r=new Ba,n=e.length;for(let s=0;s<n;s++){let a=e[s];if(this.isOperand(a)==!1){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing argument group."));continue}let o=null;if(s+1<n&&(o=e[s+1]),o==null||o instanceof Rt){r.args.push(e[s]),s+=1;continue}else if(o instanceof St){if(s+2>=n){a.pushError(M.makeSyntaxError(v.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT,a,"Unexpected end of input while parsing named argument."));continue}let l=e[s+2],c=new Wc;c.startPosition=a.startPosition,c.endPosition=l.endPosition,c.content=a.content+l.content,c.name=a,c.value=l,a instanceof ae||a.pushError(M.makeSyntaxError(v.TYPE_INVALID_NAMED_ARG_IDENTIFIER,a,"Invalid type ["+W.getPrettyTypeName(a)+"] supplied for named argument name.")),r.hasNamedArguments=!0,r.numberOfNamedArguments+=1,r.args.push(c),s+3<n&&e[s+3]instanceof Rt?s+=3:s+=2;continue}}let i=!1;return r.args.forEach(s=>{s instanceof Wc?i=!0:i&&s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT,s,"Unnamed arguments are not allowed to appear after a named argument."))}),r}cleanVariableForMethodInvocation(e){(e.name.startsWith(":")||e.name.startsWith("."))&&(e.name=e.name.substr(1),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(1),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(1)),e.startPosition!=null&&(e.startPosition.offset+=1,e.startPosition.char+=1))}reduceVariableReferenceForObjectAccessor(e){var s;let r=(s=e.variableReference)==null?void 0:s.pathParts.pop(),n=r.name,i=n.length+1;return e.name=e.name.substr(0,-i),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(0,-i),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(0,-i),e.variableReference.pathParts[e.variableReference.pathParts.length-1].isFinal=!0),e.endPosition!=null&&(e.endPosition.offset-=i,e.endPosition.char-=i),{accessor:n,accessorLen:i}}associateMethodCalls(e){var i,s;let r=[],n=e.length;for(let a=0;a<n;a++){let o=e[a],l=null,c=null;if(r.length>0&&(l=r[r.length-1]),a+1<n&&(c=e[a+1]),o instanceof ae&&c instanceof Le&&l!=null&&(this.isProperMethodChainTargetStrict(l)||l instanceof St)){let u=c,f=[];u.nodes.length>0&&(u.nodes[0]instanceof Dt?f=u.nodes[0].nodes:f=u.nodes);let m=new Jt;if(m.startPosition=o.startPosition,l instanceof St){let p=r.pop();m.startPosition=p.startPosition}this.cleanVariableForMethodInvocation(o),m.endPosition=u.endPosition,m.args=this.makeArgGroup(f),m.method=o,l.methodTarget=m,l instanceof ae&&l.mergeRefName.length>0&&(l.name=nt.getUnrefName(l.mergeRefName)),r.push(m),a+=1;continue}else if(o instanceof Le&&l instanceof ae&&l.variableReference!=null&&l.variableReference.pathParts.length>=2){let u=[];if(o.nodes.length>0&&(o.nodes[0]instanceof Dt?u=o.nodes[0].nodes:u=o.nodes),l.variableReference.pathParts[0]instanceof pr&&vo.deferredCoreLibraries.includes(l.variableReference.pathParts[0].name)){let _=r.pop(),P=new is;P.startPosition=_.startPosition,P.endPosition=o.endPosition,P.content=_.content,P.originalAbstractNode=o;let y=((i=_.variableReference)==null?void 0:i.pathParts.shift()).name,g=(s=_.variableReference)==null?void 0:s.implodePaths();P.libraryName=y,P.methodName=g,P.arguments=this.makeArgGroup(u),r.push(P),a+=1;continue}let f=this.reduceVariableReferenceForObjectAccessor(l),m=new Jt;m.startPosition=o.startPosition,m.endPosition=o.endPosition,l.methodTarget=m,l instanceof ae&&l.mergeRefName.length>0&&(l.name=nt.getUnrefName(l.mergeRefName)),o.start!=null&&(o.start.isPartOfMethodChain=!0),o.end!=null&&(o.end.isPartOfMethodChain=!0);let p=new ae;p.name=f.accessor,p.isPartOfMethodChain=!0;let d=this.makeArgGroup(u);if(m.startPosition!=null&&(m.startPosition.offset-=f.accessorLen,m.startPosition.char-=f.accessorLen),m.method=p,m.args=d,G.isNumeric(l.name)){let _=r.pop();r.push(this.convertOperatorToVarNode(_))}r.push(m);continue}else if(o instanceof ae&&l instanceof Jt){if(this.cleanVariableForMethodInvocation(o),a+1>n){o.pushError(M.makeSyntaxError(v.TYPE_METHOD_CALL_MISSING_ARG_GROUP,o,"Unexpected end of input while parsing method call."));continue}let u=e[a+1];if(!(u instanceof Le)){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_METHOD_CALL_ARG_GROUP,o,"Unexpected ["+W.getPrettyTypeName(u)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let f=u,m=[];f.nodes.length>0&&(f.nodes[0]instanceof Dt?m=f.nodes[0].nodes:m=f.nodes);let p=new Jt;p.startPosition=o.startPosition,p.endPosition=f.endPosition,p.args=this.makeArgGroup(m),p.method=o,l.methodTarget=p,r.push(p),a+=1;continue}else if(o instanceof St&&l instanceof Jt){if(a+1>n){o.pushError(M.makeSyntaxError(v.TYPE_METHOD_CALL_MISSING_METHOD,o,"Unexpected end of input while parsing method call."));continue}let u=e[a+1];if(a+2>n){o.pushError(M.makeSyntaxError(v.TYPE_METHOD_CALL_MISSING_ARG_GROUP,o,"Unexpected end of input while parsing method call."));continue}let f=e[a+2];if(!(f instanceof Le)){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_METHOD_CALL_ARG_GROUP,o,"Unexpected ["+W.getPrettyTypeName(f)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let m=f,p=[];m.nodes.length>0&&(m.nodes[0]instanceof Dt?p=m.nodes[0].nodes:p=m.nodes);let d=new Jt;d.startPosition=o.startPosition,d.endPosition=f.endPosition,d.args=this.makeArgGroup(p),d.method=u,l.methodTarget=d,r.push(d),a+=2;continue}else if(o instanceof Jt){if(a+1>n){o.pushError(M.makeSyntaxError(v.TYPE_METHOD_CALL_MISSING_METHOD,o,"Unexpected end of input while parsing method call."));continue}let u=e[a+1];if(a+2>n){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_METHOD_CALL_ARG_GROUP,o,"Unexpected end of input while parsing method call."));continue}let f=e[a+2];if(!(f instanceof Le)){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_METHOD_CALL_ARG_GROUP,o,"Unexpected ["+W.getPrettyTypeName(f)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let m=f,p=[];m.nodes.length>0&&(m.nodes[0]instanceof Dt?p=m.nodes[0].nodes:p=m.nodes);let d=this.makeArgGroup(p);if(l instanceof ae&&vo.deferredCoreLibraries.includes(l.name)){let _=r.pop(),P=new is;P.startPosition=_.startPosition,P.endPosition=m.endPosition,P.libraryName=_.name,P.methodName=u.name,P.content=P.libraryName+"->"+P.methodName,P.arguments=d,l.libraryTarget=P,r.push(P),a+=2;continue}o.method=u,o.args=d,r.length>0&&(r[r.length-1].methodTarget=o),a+=2,r.push(o);continue}else r.push(o)}return r}convertVariableToStringNode(e){let r=new Nt;return r.content=e.name,r.value=e.name,r.originalAbstractNode=e,r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.index=e.index,r}createTupleLists(e){let r=e.length,n=[];for(let i=0;i<r;i++){let s=e[i];if(s instanceof $n){if(s.isListGroupMember=!0,i+1>=r){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST,s,"Unexpected end of input while parsing tuple list."));continue}let a=e[i+1];if(!(a instanceof Le)){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing tuple list."));continue}let o=a;if(this.markAllNonVirtualAsListGroupMember([o]),this.retriggerNonVirtualGroupMembers.push([o]),o.nodes.length==0){o.pushError(M.makeSyntaxError(v.TYPE_MISSING_BODY_TUPLE_LIST,o,"Missing tuple list body while parsing tuple list."));continue}let c=o.nodes.shift(),u=c.nodes.length,f=[];for(let d=0;d<u;d++){let _=c.nodes[d];if(!(_ instanceof Rt)){let P=!1;if(_ instanceof ae&&(_.variableReference==null&&(P=!0),_.variableReference!=null&&_.variableReference.pathParts.length>1&&(P=!0),_.name.trim().length==0&&(P=!0)),P||!(_ instanceof ae)){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_TUPLE_LIST_NAME_TYPE,o,"Invalid ["+W.getPrettyTypeName(_)+"] name type found while parsing tuple list."));continue}let h=_;f.push(this.convertVariableToStringNode(h))}}let m=f.length;if(m==0){o.pushError(M.makeSyntaxError(v.TYPE_INVALID_MANIFESTED_NAME_GROUP,o,"Invalid Name expression produced an invalid name group while parsing tuple list."));continue}let p=new Di;this.createdArrays.push(p),p.startPosition=s.startPosition,p.endPosition=s.endPosition,o.nodes.forEach(d=>{if(!(d instanceof Dt)){d.pushError(M.makeSyntaxError(v.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP,d,"Invalid ["+W.getPrettyTypeName(d)+"] name type found while parsing tuple list value expression."));return}let _=d,P=new Di;this.createdArrays.push(P),P.startPosition=_.startPosition;let h=[];for(let y=0;y<u;y++){let g=_.nodes[y];if(!(g instanceof Rt)){if(this.isOperand(g)==!1){g.pushError(M.makeSyntaxError(v.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE,g,"Unexpected ["+W.getPrettyTypeName(g)+"]  while parsing tuple list value."));continue}h.push(g)}}for(let y=0;y<m&&!(y>h.length);y++){let g=h[y],N=new hl;N.startPosition=g.startPosition,N.endPosition=g.endPosition,N.name=f[y],N.value=g,P.nodes.push(N),p.endPosition=g.endPosition,P.endPosition=g.endPosition}p.nodes.push(P)}),n.push(p),i+=1;continue}else n.push(s)}return e}makeOrderGroup(e){let r=[],n=e.length,i=0;for(let s=0;s<n;s++){let a=e[s],o=null;if(s+1<n&&(o=e[s+1]),s>0&&(o==null||o instanceof Rt)){i+=1;let l=new pl;l.order=i,l.name=e[s-1],l.directionNode=a,this.isOperand(l.name)==!1&&l.name.pushError(M.makeSyntaxError(v.TYPE_INVALID_ORDER_BY_NAME_VALUE,l.name,"Invalid value or expression supplied for order by name.")),this.isOperand(l.directionNode)==!1&&l.directionNode.pushError(M.makeSyntaxError(v.TYPE_INVALID_ORDER_BY_SORT_VALUE,l.directionNode,"Invalid value or expression supplied for order by direction.")),l.startPosition=l.name.startPosition,l.endPosition=l.directionNode.endPosition,r.push(l),s+=1;continue}}return r}getValues(e){let r=new Va,n=e.length,i=[];for(let s=0;s<n;s++){let a=e[s],o=null;if(s+1<n&&(o=e[s+1]),o==null||o instanceof Rt){i.push(a),s+=1;continue}}return r.values=i,r}createLibraryInvocations(e){let r=[],n=e.length;for(let i=0;i<n;i++){let s=e[i];if(s instanceof Yn)if(s.content.includes(".")){let a=s.content.split("."),o=a.shift(),l=a.join("."),c=new is;if(c.startPosition=s.startPosition,c.endPosition=s.endPosition,c.content=s.content,c.libraryName=o,c.methodName=l,c.originalAbstractNode=s,i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP,s,"Unexpected end of input while parsing argument group."));continue}if(!(e[i+1]instanceof Le)){s.pushError(M.makeSyntaxError(v.TYPE_EXPECTING_ARGUMENT_GROUP,s,"Unexpected token while parsing method call. Expecting [T_ARG_SEPARATOR] got ["+W.getPrettyTypeName(s)+"]."));continue}let u=e[i+1],f=null;if(u.nodes.length>0){let m=u.nodes[0];f=this.makeArgGroup(m.nodes)}f==null&&(f=new Ba,f.startPosition=u.startPosition,f.endPosition=u.endPosition,f.originalAbstractNode=u),c.arguments=f,r.push(c),i+=1;continue}else if(s.content==_t.ARR_ORDERBY){if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP,s,"Unexpected end of input while parsing order group."));continue}let a=e[i+1];if(!(a instanceof Le)){a.pushError(M.makeSyntaxError(v.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing order group."));continue}let l=a.nodes;l[0]instanceof Dt&&(l=l[0].nodes);let c=this.makeOrderGroup(l);c.length==0&&s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP,s,"Unexpected empty [T_DIRECTION_GROUP]. Must have at least one order clause, and each property must have a direction specified."));let u=new Bs;if(u.orderClauses=c,c.length>0){c[0].directionNode!=null&&(u.startPosition=c[0].directionNode.startPosition);let f=c[c.length-1].directionNode;f!=null&&(u.endPosition=f.endPosition)}r.push(s),r.push(u),i+=1;continue}else if(s.content==_t.ARR_GROUPBY){if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY,s,"Unexpected end of input while parsing group by clause."));continue}let a=e[i+1];if(a instanceof Li||a instanceof gn){a.pushError(M.makeSyntaxError(v.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED,a,"Type ["+W.getPrettyTypeName(a)+"] must be enclosed with parenthesis to be used with groupby."));continue}if(!(a instanceof Le)){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing group by."));continue}let l=a.nodes;l[0]instanceof Dt&&(l=l[0].nodes);let c=this.getValues(l);if(r.push(s),r.push(c),i+2<n&&i+3<n){let u=e[i+2],f=e[i+3];if(nt.isVariableMatching(u,Je.ScopeAs))if(f instanceof Nt){c.isNamedNode=!0,c.parsedName=f,i+=3;continue}else f.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE,f,"Expecting [T_STRING] for group by collection alias; got ["+W.getPrettyTypeName(f)+"]."))}i+=1;continue}else if(s.content==_t.STRUCT_SWITCH){if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP,s,"Unexpected end of input while parsing [T_SWITCH_GROUP]."));continue}let a=e[i+1];if(!(a instanceof gn)){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing [T_SWITCH_GROUP]."));continue}let o=a;if(this.markAllNonVirtualAsSwitch([a]),o.scope==null||!(o.scope instanceof Le)){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_SWITCH_START_VALUE,o,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let l=o.scope;if(l.nodes.length==0||!(l.nodes[0]instanceof Dt)){o.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,o,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let c=l.nodes[0];if(this.markAllNonVirtualAsSwitch([l]),c.nodes.length==0||!(c.nodes[0]instanceof Le)){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}this.markAllNonVirtualAsSwitch([s]),this.markAllNonVirtualAsSwitch(c.nodes);let u=c.nodes;if(o.nodes.length==0&&s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP].")),!(l.nodes[0]instanceof Dt)){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let m=l.nodes[0];this.markAllNonVirtualAsSwitch(m.nodes);let p=m.nodes,d=new js,_=new Le;_.nodes=u,_.startPosition=_.nodes[0].startPosition,_.endPosition=_.nodes[_.nodes.length-1].endPosition;let P=new qa;P.condition=_;let h=new Le;h.nodes.push(p.shift()),h.startPosition=h.nodes[0].startPosition,h.endPosition=h.nodes[h.nodes.length-1].endPosition,P.expression=h,P.startPosition=P.condition.startPosition,P.endPosition=P.expression.nodes[P.expression.nodes.length-1].endPosition,p.shift(),d.cases.push(P);let y=p.length;if(y>0){if(!(p[0]instanceof Le)){s.pushError(M.makeSyntaxError(v.TYPE_PARSER_INVALID_SWITCH_TOKEN,s,"Invalid ["+W.getPrettyTypeName(p[0])+"] while parsing case statement."));continue}for(let g=0;g<y;g++){let N=p[g],S=null;if(N instanceof Rt){N.isSwitchGroupMember=!0;continue}if(g+1<y&&(S=p[g+1]),S instanceof Ir){S.isSwitchGroupMember=!0;let V=new qa;V.condition=N,this.markAllNonVirtualAsSwitch([V.condition]);let O=new Le;if(O.nodes.push(p[g+2]),O.startPosition=O.nodes[0].startPosition,O.endPosition=O.nodes[O.nodes.length-1].endPosition,V.expression=O,this.markAllNonVirtualAsSwitch([O]),V.startPosition=V.condition.startPosition,V.endPosition=V.expression.nodes[V.expression.nodes.length-1].endPosition,d.cases.push(V),g+3<y&&!(p[g+3]instanceof Rt)){p[g+3].pushError(M.makeSyntaxError(v.TYPE_PARSER_INVALID_SWITCH_TOKEN,p[g+3],"Invalid ["+W.getPrettyTypeName(p[g+3])+"] while parsing case statement; expecting [T_ARG_SEPARATOR]."));continue}p[g+3].isSwitchGroupMember=!0,g+=2;continue}}}r.push(new fn),r.push(s),r.push(d),i+=1;continue}else if(s.content==_t.ARR_MAKE){if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_ARR_MAKE_MISSING_TARGET,s,"Missing target variable for arr operator."));continue}let a=e[i+1];if(!(a instanceof Le)){a.pushError(M.makeSyntaxError(v.TYPE_ARR_MAKE_UNEXPECTED_TYPE,a,"Unexpected ["+W.getPrettyTypeName(a)+"] while parsing array."));continue}let o=a instanceof gn,l=a,c=l.nodes;if(c[0]instanceof Dt&&(c=c[0].nodes),o){let p=a;c.unshift(new Ir),c.unshift(p.scope)}let u=this.getArrayValues(c),f=new Di;f.startPosition=s.startPosition;let m=u.values.length;m>0?f.endPosition=u.values[m-1].endPosition:f.endPosition=s.endPosition,l.end!=null&&(f.endPosition=l.end.endPosition),f.nodes=u.values,this.createdArrays.push(f),r.push(f),i+=1}else r.push(s);else r.push(s)}return r}getArrayValues(e){let r=new Va,n=e.length,i=[];for(let s=0;s<n;s++){let a=e[s];if(a instanceof Rt){a.pushError(M.makeSyntaxError(v.TYPE_ARR_UNEXPECT_ARG_SEPARATOR,a,"Unexpected [T_ARG_SEPARATOR] while parsing array."));continue}if(a instanceof Ir){if(s==0){a.pushError(M.makeSyntaxError(v.TYPE_ARR_KEY_PAIR_MISSING_KEY,a,"Missing key for key/value pair while parsing array."));continue}else if(e[s-1]instanceof Rt){a.pushError(M.makeSyntaxError(v.TYPE_ARR_KEY_PAIR_MISSING_KEY,a,"Missing key for key/value pair while parsing array."));continue}}let o=null;if(s+1<n&&(o=e[s+1]),o instanceof Ir){if(s+2>=n){o.pushError(M.makeSyntaxError(v.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE,o,"Missing key/pair value while parsing array."));continue}let l=e[s+2],c=new hl;if(this.isValidArrayKeyNode(a)==!1){a.pushError(M.makeSyntaxError(v.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE,a,"Invalid ["+W.getPrettyTypeName(a)+"] type for key/value key."));continue}c.name=a,c.value=l,c.startPosition=a.startPosition,c.endPosition=l.endPosition,i.push(c),s+=3;continue}if(o==null||o instanceof Rt){let l=new hl;l.value=a,l.startPosition=a.startPosition,l.endPosition=a.endPosition,i.push(l),s+=1;continue}}return r.values=i,r}isValidArrayKeyNode(e){return e instanceof Lt||e instanceof Nt}associateModifiers(e){let r=[],n=e.length,i=null;for(let s=0;s<n;s++){let a=e[s];if(a instanceof dr){let o=r.length;if(o==0){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_MODIFIER_SEPARATOR,a,"Unexpected [T_MODIFIER_SEPARATOR] while parsing input text."));continue}if(this.isRealModifierSeparator.set(a,!0),i=r[o-1],i.modifierChain==null&&(i.modifierChain=new fl,i.modifierChain.modifierTarget=i,this.createdModifierChains.push(i.modifierChain)),s+1>=n){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS,a,"Unexpected end of input while preparing to gather modifier details."));continue}let l=this.scanToEndOfModifier(e.slice(s+1)),c=l.length;if(c>1&&l[1]instanceof St){this.isRealModifierSeparator.set(l[1],!0);let f=l[0];f instanceof Gr?l[0]=this.wrapArithmeticModifier(f,"add"):f instanceof Nr?l[0]=this.wrapArithmeticModifier(f,"subtract"):f instanceof Wr?l[0]=this.wrapArithmeticModifier(f,"divide"):f instanceof Hr?l[0]=this.wrapArithmeticModifier(f,"multiply"):f instanceof oi&&(l[0]=this.wrapArithmeticModifier(f,"mod"))}if(c==0){a.pushError(M.makeSyntaxError(v.TYPE_UNSET_MODIFIER_DETAILS,a,"Invalid or missing modifier details."));continue}if(!(l[0]instanceof Ut)){a.pushError(M.makeSyntaxError(v.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS,a,"Invalid ["+W.getPrettyTypeName(l[0])+"]; expecting [T_MODIFIER_NAME]"));continue}let u=this.createModifier(l);u.nameNode!=null&&this.modifierNameMapping.set(u.nameNode,u),s+=c,i.modifierChain.modifierChain.push(u),i.modifierChain.updateValues();continue}else r.push(a)}return r}createNullCoalescenceGroups(e){let r=[],n=e.length;for(let i=0;i<n;i++){let s=e[i];if(s instanceof hn){let a=r.pop();if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP,s,"Unexpected end of input while parsing input text."));continue}let o=e[i+1],l=new dl;l.left=a,l.right=o,r.push(l),i+=1;continue}else r.push(s)}return r}isOperand(e){return e instanceof ae||e instanceof Le||e instanceof Nt||e instanceof Lt||e instanceof Ln||e instanceof fn||e instanceof kn||e instanceof is||e instanceof Bs||e instanceof Va||e instanceof js||e instanceof Di}isProperMethodChainTargetStrict(e){return e instanceof Le||e instanceof Nt||e instanceof Lt||e instanceof Ln||e instanceof fn||e instanceof kn||e instanceof is||e instanceof Bs||e instanceof Va||e instanceof js||e instanceof Di}assertOperandRight(e,r){if(r+1>e.length-1)return e[r].pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_END_OF_INPUT,e[r],"Unexpected end of input; expecting operand for operator "+W.getPrettyTypeName(e[r])+' near "'+No.getNearText(e[r])+'".')),!1;let n=e[r+1];return this.isOperand(n)?!0:(n.pushError(M.makeSyntaxError(v.TYPE_EXPECTING_OPERAND,e[r],"Expecting operand, found "+W.getPrettyTypeName(n)+' near "'+No.getNearText(e[r])+'".')),!1)}resolveValueRight(e,r){let n=null,i=0,s=null;if(e.length>0){let a=!0;for(;a;){let o=e[r];if(o instanceof ar){s=o,i+=1,r+=1,a=!1;continue}else if(this.isOperand(o)){n=o,a=!1;break}else{a=!1;break}}}if(i%2!=0){let a=new Le;return a.nodes=[],s!=null&&n!=null&&(a.nodes.push(s),a.nodes.push(n)),{value:a,negationCount:i}}return{value:n,negationCount:i}}correctTypes(e){let r=[];return e.forEach(n=>{if(n instanceof Pr){let i=new St;i.startPosition=n.startPosition,i.endPosition=n.endPosition,i.originalAbstractNode=n,r.push(i)}else if(n instanceof Gt){let i=new ae;i.name=n.value,i.startPosition=n.startPosition,i.endPosition=n.endPosition,i.modifierChain=n.modifierChain,i.originalAbstractNode=n,this.createdVariables.push(i),r.push(i)}else r.push(n)}),r}createTernaryGroups(e){var i,s,a,o;let r=[],n=e.length;for(let l=0;l<n;l++){let c=e[l];if(c instanceof Kn){let u=this.seek(St,l+1);if(((i=u.node)==null?void 0:i.originalAbstractNode)!=null&&u.node.originalAbstractNode instanceof Pr&&(u.node.originalAbstractNode.isTenaryBranchSeparator=!0),u.found==!1){c.pushError(M.makeSyntaxError(v.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR,c,"Unexpected end of input; expecting [T_BRANCH_SEPARATOR]."));continue}let f=this.collectUntil(r);r=f.tokens;let m=f.collectedTokens[0],p=(s=u.foundAt)!=null?s:0;if(p>=n){c.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP,c,"Unexpected end of input while parsing ternary group."));continue}let d=e.slice(l+1,p);if(d.length>1||d.length==0){c.pushError(M.makeSyntaxError(v.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH,c,"Unexpected number of operations within ternary truth branch."));continue}let _=d[0],P=((a=u.foundAt)!=null?a:0)+1;if(P>=n){c.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH,c,"Unexpected end of input while parsing ternary false execution branch."));continue}let h=e[P],y=new ml;y.head=m,y.truthBranch=_,y.falseBranch=h,r.push(y),l=((o=u.foundAt)!=null?o:0)+1;continue}else r.push(c)}return r}groupNodesByType(e,r){let n=[],i=e.length;for(let s=0;s<i;s++){let a=e[s];if(s>0&&a instanceof r){let o=[],l=n.pop();if(o.push(l),!this.assertOperandRight(e,s))continue;if(s+1>=i){a.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,a,"Unexpected end of input while parsing input text."));continue}let c=e[s+1];typeof c!="undefined"&&(c.isVirtualGroupMember=!0),typeof l!="undefined"&&(l.isVirtualGroupMember=!0),a.isVirtualGroupMember=!0;let u=new Le;u.nodes=o,u.nodes.push(a),u.nodes.push(c),s+=1,n.push(u);continue}else n.push(a)}return n}flagNodeAsOperatorResolve(e){if(e instanceof Le){if(e.nodes.length==0)return;this.flagNodeAsOperatorResolve(e.nodes[e.nodes.length-1])}e.isVirtualGroupOperatorResolve=!0,e.next instanceof sr||(e.producesVirtualStatementTerminator=!0)}groupNodesByOperatorType(e){let r=[],n=e.length;for(let i=0;i<n;i++){let s=e[i];if(i>0&&At.isOperatorType(s)){let a=[],o=r.pop();if(a.push(o),!this.assertOperandRight(e,i))continue;if(i+1>=n){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,s,"Unexpected end of input while parsing input text."));continue}let l=e[i+1];this.flagNodeAsOperatorResolve(l),At.isAssignmentOperator(s)&&this.tracedAssignments.push(new dd(o,l,s)),typeof o!="undefined"&&(o.isVirtualGroupMember=!0),typeof l!="undefined"&&(l.isVirtualGroupMember=!0),s.isVirtualGroupMember=!0;let c=new Le;c.nodes=a,c.nodes.push(s),c.nodes.push(l),i+=1,r.push(c);continue}else r.push(s)}return r}applyOperationOrder(e){return e=this.groupNodesByType(e,ai),e=this.groupNodesByType(e,Hr),e=this.groupNodesByType(e,Wr),e=this.groupNodesByType(e,Gr),e=this.groupNodesByType(e,Nr),e}createLogicGroupsToRemoveMethodInvocationAmbiguity(e){let r=[],n=e.length,i=n-1;for(let s=0;s<n;s++){let a=e[s];if(a instanceof Jt){let o=r.pop(),l=new Le;if(l.startPosition=o.startPosition,typeof o!="undefined"&&(o.isVirtualGroupMember=!0),typeof a!="undefined"&&(a.isVirtualGroupMember=!0),l.nodes.push(o),l.nodes.push(a),s!=i)for(let c=s+1;c<n;c++)if(e[c]instanceof Jt){if(typeof e[c]=="undefined")continue;if(e[c].isVirtualGroupMember=!0,l.nodes.push(e[c]),c==i){c+=1;break}}else{if(c==i){c+=1;break}s=c-1;break}l.endPosition=l.nodes[l.nodes.length-1].endPosition,r.push(l)}else r.push(a)}return r}countTypeRight(e,r,n){let i=0;for(let s=r;s<e.length&&e[s]instanceof n;s++)i+=1;return i}createLogicGroupsToResolveOperatorAmbiguity(e){return e=this.groupNodesByType(e,wi),e=this.groupNodesByType(e,pn),e=this.groupNodesByType(e,jn),e=this.groupNodesByType(e,Bn),e=this.groupNodesByType(e,Hn),e=this.groupNodesByType(e,vr),e=this.groupNodesByType(e,Gn),e=this.groupNodesByType(e,Un),e=this.groupNodesByType(e,Wn),e=this.groupNodesByOperatorType(e),e}createModifier(e){let r=e.shift(),n=[],i=e.length;if(e.length>0&&e[0]instanceof Le){let a=this.unpack(e[0].nodes),o=this.makeArgGroup(a),l=new Fa;if(l.nameNode=r,l.methodStyleArguments=o,e.length>1)for(let c=1;c<i;c++)e[c].pushError(M.makeSyntaxError(v.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX,e[c],"Unexpected ["+W.getPrettyTypeName(e[c])+"] while parsing modifier argument group. Expecting [T_MODIFIER_SEPARATOR] or end of current expression."));return l}for(let a=0;a<i;a++)if(e[a]instanceof Pr||e[a]instanceof St){if(a+1>=i)return e[a].pushError(M.makeSyntaxError(v.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST,e[a],"Unexpected end of modifier value list while parsing modifier.")),e;let o=e[a+1];if(this.isValidModifierValue(o)){if(o instanceof ae)if(o.variableReference!=null&&o.variableReference.pathParts.length>0)o.variableReference.pathParts.forEach(l=>{if(l instanceof pr){let c=new Gt;c.startPosition=l.startPosition,c.endPosition=l.endPosition,c.value=l.name,c.name=l.name,c.originalAbstractNode=l,c.endPosition==null&&c.startPosition==null&&(c.startPosition=o.startPosition,c.endPosition=o.endPosition),n.push(c)}});else{let l=new Gt;l.startPosition=o.startPosition,l.endPosition=o.endPosition,l.value=o.name,l.name=o.name,l.originalAbstractNode=o,n.push(l)}else n.push(o);a+=1;continue}else return o.pushError(M.makeSyntaxError(v.TYPE_MODIFIER_UNEXPECTED_VALUE,o,"Unexpected ["+W.getPrettyTypeName(o)+"] while parsing modifier value.")),e}let s=new Fa;return s.nameNode=r,s.valueNodes=n,s.startPosition=s.nameNode.startPosition,s.valueNodes.length>0?s.endPosition=s.valueNodes[s.valueNodes.length-1].endPosition:s.endPosition=s.nameNode.endPosition,s}scanToEndOfModifier(e){let r=[],n=e.length;for(let i=0;i<n;i++){let s=e[i];if(s instanceof Pr){let a=r.length;if(a==0){s.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE,s,"Unexpected end of input while parsing modifier value."));continue}this.isRealModifierSeparator.set(s,!0);let o=r[a-1];if(nt.distance(o,s)>1)break}if(s instanceof Nt||s instanceof ae||s instanceof Lt){let a=r.length;if(a>0&&r[a-1]instanceof Le)break}if(s instanceof dr||s instanceof jt||s instanceof Qt||s instanceof vr||s instanceof pn||s instanceof wi||s instanceof Bn||s instanceof jn||s instanceof Un||s instanceof Gn||s instanceof Wn||s instanceof Hn||s instanceof dn||s instanceof mn||s instanceof ci||s instanceof hn||s instanceof ui||s instanceof Yn||s instanceof is||s instanceof Jt||s instanceof ar)break;r.push(s)}return r}static isAssignmentOperatorNode(e){return e instanceof Mn||e instanceof Fn||e instanceof Yr||e instanceof Vn||e instanceof qn||e instanceof Nr}insertAutomaticStatementSeparators(e){let r=e.length,n=[];for(let i=0;i<r;i++){let s=e[i];if(At.isAssignmentOperatorNode(s))if(i+2<r)if(e[i+2]instanceof sr){n.push(s),n.push(e[i+1]),n.push(e[i+2]),i+=2;continue}else{n.push(s),n.push(e[i+1]),n.push(new sr),i+=1;continue}else{n.push(s),n.push(e[i+1]),n.push(new sr);break}else n.push(s)}return e}createSemanticGroups(e){let r=[],n=e.length,i=[];for(let s=0;s<n;s++)if(e[s]instanceof sr){let a=new Dt;a.nodes=i,a.separatorToken=e[s],r.push(a),i=[];continue}else if(i.push(e[s]),s+1>=n){let a=new Dt;a.nodes=i,r.push(a);break}return r}findLogicalGroupEnd(e,r){let n=[],i=r.length,s=null,a=0,o=0;for(o;o<i;o++){let u=r[o];if(a+=1,u instanceof jt){s=u;break}else if(u instanceof Qt){if(o+1>=i)return u.pushError(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END,u,"Unexpected end of input while parsing input text.")),{found:!1,logicalGroup:null,skipCount:a};let f=this.findLogicalGroupEnd(u,r.slice(o+1));if(f.found){f.logicalGroup!=null&&n.push(f.logicalGroup),a+=f.skipCount,o+=f.skipCount;continue}else continue}else n.push(u)}if(s==null)return e.pushError(M.makeSyntaxError(v.TYPE_LOGIC_GROUP_NO_END,e,"Unexpected end of input while parsing logic group.")),{found:!1,logicalGroup:null,skipCount:a};let l=new At;l.setIsRoot(!1);let c=new Le;if(n.length>=2&&n[1]instanceof Ir){if(c=new gn,c.scopeOperator=n[1],o+2<i&&r[o+1]instanceof ae&&r[o+2]instanceof Nt&&r[o+1].name==Je.ScopeAs){let m=r[o+2];c=new Li,c instanceof Li&&(c.alias=m),a+=2}let u=n.splice(0,2);(c instanceof gn||c instanceof Li)&&(c.scope=u[0])}return c.nodes=l.parse(n),c.start=e,c.end=s,c.startPosition=e.startPosition,c.endPosition=s.endPosition,c instanceof Li&&c.alias!=null&&(c.endPosition=c.alias.endPosition),{found:!0,logicalGroup:c,skipCount:a}}unpack(e){if(e.length==0)return[];if(e[0]instanceof Dt){let r=e[0];return this.unpack(r.nodes)}return e}collectUntil(e){let r=e.length,n=[];for(let i=r-1;i>=0&&!At.isAssignmentOperator(e[i]);i--){let s=e.pop();n.push(s)}if(n=n.reverse(),n.length>=3){let i=new At;return i.setIsRoot(!1),{collectedTokens:this.unpack(i.parse(n)),tokens:e}}return{collectedTokens:n,tokens:e}}seek(e,r){for(let n=r;n<this.tokens.length;n++)if(this.tokens[n]instanceof e)return{found:!0,foundAt:n,node:this.tokens[n]};return{found:!1,foundAt:null,node:null}}};var Fi=class{static findRightBeighboringNextPunctuation(e,r,n=4){r=r.replace("	"," ".repeat(n));let i=!1;for(let s=e+1;s<r.length;s++){let a=r[s];if(G.ctypeSpace(a)&&(i=!0),i&&(G.ctypeAlpha(a)||G.ctypeDigit(a)))return null;if(G.ctypePunct(a)||a==E.String_Terminator_SingleQuote||a==E.String_Terminator_DoubleQuote)return a}return null}static findRightNeighboringNextAlphaNumeric(e,r,n=4){r=r.replace("	"," ".repeat(n));let i=!1;for(let s=e+1;s<r.length;s++){let a=r[s];if((G.ctypeSpace(a)||G.ctypePunct(a)&&a!=E.Punctuation_Underscore)&&(i=!0),i&&(G.ctypeAlpha(a)||G.ctypeDigit(a)))return s+1}return null}static findLeftNeighboringNextPunctuation(e,r,n=4){r=r.replace("	"," ".repeat(n));let i=!1;for(let s=e-2;s>=0;s--){let a=r[s];if(G.ctypeSpace(a)&&(i=!0),i&&(G.ctypeAlpha(a)||G.ctypeDigit(a)))return null;if(G.ctypePunct(a))return a}return null}static findLeftNeighboringNextAlphaNumeric(e,r,n=4){r=r.replace("	"," ".repeat(n));let i=!1;for(let s=e-1;s>=0;s--){let a=r[s];if((G.ctypeSpace(a)||G.ctypePunct(a)&&a!=E.Punctuation_Underscore)&&(i=!0),i&&(G.ctypeAlpha(a)||G.ctypeDigit(a)))return s+1}return null}static scanWordAt(e,r,n=4){if(r=r.replace("	"," ".repeat(n)),e<0||e>r.length)return null;let i=[],s=[];for(let a=e-1;a>=0;a--){let o=r[a];if(G.ctypePunct(o)&&o!=E.Punctuation_Underscore||G.ctypeSpace(o))break;i.push(o)}for(let a=e;a<r.length;a++){let o=r[a];if(G.ctypePunct(o)&&o!=E.Punctuation_Underscore||G.ctypeSpace(o))break;s.push(o)}return i.reverse().join("")+s.join("")}};var am=class{constructor(e){this.parser=e}findParentWithName(e,r){let n=r.parent;for(;n!=null;){if(n instanceof q&&n.nameMatches(e))return n;if(n.parent==n)break;n=n.parent}return null}};var om=class{static analyzeModifierNodeParameters(e){var n,i,s,a;if(e.parameters.forEach(o=>{var l,c,u,f;o.isModifierParameter=(c=(l=Me.instance)==null?void 0:l.hasModifier(o.name))!=null?c:!1,o.isModifierParameter&&(e.modifiers.parameterModifiers.push(o),o.modifier=(f=(u=Me.instance)==null?void 0:u.getModifier(o.name))!=null?f:null,e.modifiers.modifierNames.includes(o.name)==!1&&e.modifiers.modifierNames.push(o.name))}),e.modifierChain!=null&&e.modifierChain.modifierChain.length>0){let o=null;e.modifierChain.modifierChain.forEach(l=>{var c,u;l.nameNode!=null&&(l.modifier=(u=(c=Me.instance)==null?void 0:c.getModifier(l.nameNode.content))!=null?u:null,e.modifiers.modifierNames.includes(l.nameNode.content)==!1&&e.modifiers.modifierNames.push(l.nameNode.content),l.modifier!=null&&(o=l.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=l)))}),e.modifierChain.lastModifier=o,e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}e.runtimeNodes.length>0&&e.runtimeNodes.forEach(o=>{if(o.modifierChain!=null&&o.modifierChain.modifierChain.length>0){let l=null;o.modifierChain.modifierChain.forEach(c=>{var u,f;c.nameNode!=null&&(c.modifier=(f=(u=Me.instance)==null?void 0:u.getModifier(c.nameNode.content))!=null?f:null,e.modifiers.modifierNames.includes(c.nameNode.content)==!1&&e.modifiers.modifierNames.push(c.nameNode.content),c.modifier!=null&&(l=c.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=c)))}),e.modifierChain!=null&&(e.modifierChain.lastModifier=l),e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}});let r=e.modifiers.getLastManifestedModifier();if(r!=null)if(r.name=="macro"){let o=e.modifiers.getLastManifestedModifierValue();e.manifestType=(i=(n=Me.instance)==null?void 0:n.getMacroManifestingType(o))!=null?i:""}else e.manifestType=(a=(s=Me.instance)==null?void 0:s.getProbableReturnType(r,e.isPaired()))!=null?a:""}};function lm(t){return t==null?!1:t=='"'||t=="'"}function uv(t,e){for(t.getCurrentIndex();t.getCurrentIndex()<t.inputLength()&&(t.checkCurrentOffsets(),e&&t.pushChar(t.getCurrent()),t.getCurrent()!=E.NewLine);t.incrementIndex());}function fv(t,e){for(t.getCurrentIndex();t.getCurrentIndex()<t.inputLength();t.incrementIndex())if(t.checkCurrentOffsets(),e&&t.pushChar(t.getCurrent()),t.getCurrent()==E.Punctuation_Asterisk&&t.getNext()==E.Punctuation_ForwardSlash){e&&t.pushChar(E.Punctuation_ForwardSlash),t.incrementIndex(),t.checkCurrentOffsets();break}}function cm(t){let e=t.getCurrent();for(t.incrementIndex(),t.getCurrentIndex();t.getCurrentIndex()<t.inputLength()&&(t.checkCurrentOffsets(),!(t.getCurrent()==e&&t.getPrev()!=E.String_EscapeCharacter));t.incrementIndex());}var um=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(e){this.currentIndex=e}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(e){}getChar(e){return this.chars[e]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(e,r){return this.documentOffsets=e,this.lastDocumentOffsetKey=r,this}getClosingFragmentAfter(e){if(typeof e=="undefined")return null;let r=e.name.toLowerCase();for(let n=0;n<this.fragments.length;n++){let i=this.fragments[n];if(i.isClosingFragment&&!i.isSelfClosing&&i.name.toLowerCase()==r&&i.index>e.index)return i}return null}getContentSubstring(e,r){return this.content.substr(e,r)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(e,r,n=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let o=this.documentOffsets.get(e);i=o.line,s=o.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let o=null,l=null,c=null,u=null;for(let f of this.documentOffsets.keys()){if(f>=e){u!=null&&e>u?(o=c,l=u):(o=this.documentOffsets.get(f),l=f);break}c=this.documentOffsets.get(f),u=f}o==null&&(o=c,l=u),o!=null?(s=e-(l!=null?l:0),i=o.line,e<=(l!=null?l:0)?(i=o.line,s=e+1):i=o.line+1):this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new Bt;return a.index=r,a.offset=e,a.line=i+this.shiftLine,a.char=s,a}getFragments(){return this.fragments}getFragmentsBetween(e,r){let n=[];return this.fragments.forEach(i=>{var o,l,c,u;let s=(l=(o=i.startPosition)==null?void 0:o.index)!=null?l:0,a=(u=(c=i.endPosition)==null?void 0:c.index)!=null?u:0;s>e&&a<r&&n.push(i)}),n}getFragmentContaining(e){var r,n,i,s;for(let a=0;a<this.fragments.length;a++){let o=this.fragments[a];if(((n=(r=o.startPosition)==null?void 0:r.index)!=null?n:0)<e.index&&((s=(i=o.endPosition)==null?void 0:i.index)!=null?s:0)>e.index)return o}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let r=G.split(G.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),r.forEach(n=>{this.chars.push(n),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(e){this.content=e,this.inputLen=this.content.length;let r=[...this.content.matchAll(/(<(?!\?[php|?=]))/gm)],n=[];r.forEach(i=>{var a;let s=(a=i.index)!=null?a:0;for(let o=0;o<this.nodeIndex.length;o++){let l=this.nodeIndex[o];if(s>=l.start&&s<=l.end)return}n.push(s)}),this.fragmentStartIndex=n}setIndexRanges(e){return this.nodeIndex=e,this}fetchAt(e,r){return this.content.substr(e,r)}getFragmentsContainingStructures(){let e=[];return this.fragments.forEach(r=>{let n=r.name.toLowerCase();if(!(n!="script"&&n!="style")&&!r.isClosingFragment&&!r.isSelfClosing&&r.containsStructures){let i=this.getClosingFragmentAfter(r);i!=null&&e.push({start:r,end:i})}}),e}parse(e){if(this.resetState().processInputText(e),this.fragmentStartIndex.length==0)return[];for(let s=0;s<this.fragmentStartIndex.length;s++){let a=this.fragmentStartIndex[s];if(this.resetIntermediateState(),this.seedOffset=a,this.currentChunkOffset=a,this.parseIntermediateText(),this.isScript){let o=!1;for(let l=s+1;l<this.fragmentStartIndex.length;l++){let c=this.fragmentStartIndex[l];if(this.fetchAt(c,8).toLowerCase()=="<\/script"){s=l-1,this.isScript=!1,o=!0;break}}if(!o)break}}let n=0,i=0;return this.fragments.forEach(s=>{let a=s.name.toLowerCase();(a=="script"||a=="style")&&(s.embeddedIndex=i,this.embeddedIndexedFragments.set(i,s),i+=1),s.index=n,this.indexedFragments.set(n,s),n+=1}),this.fragments}getFragment(e){return this.indexedFragments.get(e)}getEmbeddedFragment(e){return this.embeddedIndexedFragments.has(e)?this.embeddedIndexedFragments.get(e):null}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),lm(this.cur)&&cm(this),this.cur==E.Punctuation_ForwardSlash&&this.next==E.Punctuation_ForwardSlash){uv(this,!0);continue}if(this.cur==E.Punctuation_ForwardSlash&&this.next==E.Punctuation_Asterisk){fv(this,!0);continue}if(this.cur==E.Punctuation_Question&&this.next==E.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let e=this.currentIndex,r=[],n=[],i=!1,s=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),G.ctypeSpace(this.cur)&&(i=!0),this.next==E.Punctuation_LessThan){let a=1;this.cur==E.Punctuation_ForwardSlash&&(a=2);let o=this.fetchAt(this.currentChunkOffset+a,5);if(o.toLowerCase()=="<?php"||o.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==E.Punctuation_LessThan||this.next==null&&this.cur!=E.Punctuation_GreaterThan)break;if(!i&&this.cur==E.Punctuation_LessThan&&this.next==E.Punctuation_ForwardSlash&&(s=!0),!i&&this.cur!=E.Punctuation_LessThan&&this.cur!=E.Punctuation_ForwardSlash&&this.cur!=E.Punctuation_GreaterThan&&n.push(this.cur),lm(this.cur)){let a=this.currentIndex;cm(this);let o=new ad;o.startPosition=this.positionFromOffset(a+this.seedOffset,a+this.seedOffset),o.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let l=a+this.seedOffset,c=this.currentIndex+this.seedOffset+1;o.content=this.content.substr(l,c-l);let u=[];for(let f=a-2;f>=0;f--){let m=this.chars[f];if(G.ctypeSpace(m))break;u.push(m)}o.name=u.reverse().join(""),r.push(o);continue}if(this.cur==E.Punctuation_ForwardSlash&&this.next==E.Punctuation_GreaterThan){let a=new Gc;a.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),a.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),a.parameters=r,a.isSelfClosing=!0,a.name=n.join(""),a.isClosingFragment=s,this.fragments.push(a),s?this.fragmentOpeningIndex.set(a.startPosition.index+1,1):this.fragmentOpeningIndex.set(a.startPosition.index,1);break}if(this.cur==E.Punctuation_GreaterThan){let a=new Gc;a.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),a.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),a.parameters=r,a.name=n.join(""),a.isClosingFragment=s,this.fragments.push(a),s?this.fragmentOpeningIndex.set(a.startPosition.index+1,1):this.fragmentOpeningIndex.set(a.startPosition.index,1),a.name.toLowerCase()=="script"&&a.isClosingFragment==!1&&(this.isScript=!0);break}}}};var fm=class{constructor(e,r){this.documentParser=e,this.fragmentsParser=r}doesContainFragments(e){var i,s,a,o,l;let r=(s=(i=e.endPosition)==null?void 0:i.index)!=null?s:0,n=(l=(o=(a=e.isClosedBy)==null?void 0:a.startPosition)==null?void 0:o.index)!=null?l:0;return this.fragmentsParser.getFragmentsBetween(r,n).length>0}analyze(){let e=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(r=>{let n=r.name.toLowerCase();if(r.isClosingFragment==!1&&r.isSelfClosing==!1&&(n=="script"||n=="style")){let i=this.fragmentsParser.getClosingFragmentAfter(r);if(i==null)return;r.endPosition!=null&&i.startPosition!=null&&this.documentParser.getNodesBetween(r.endPosition,i.startPosition).forEach(a=>{(a instanceof Xe||a instanceof q&&a.isClosedBy!=null)&&(r.containsStructures=!0),n=="style"?a.isInStyleTag=!0:a.isInScriptTag=!0})}}),e.forEach(r=>{var a,o,l,c,u,f;if(r instanceof je||r.startPosition==null)return;r instanceof q&&(Xt.isConditionalStructure(r)||!r.isClosingTag)&&r.isClosedBy!=null&&(r.containsAnyFragments=this.doesContainFragments(r));let n=this.fragmentsParser.getFragmentContaining(r.startPosition);if(n==null){r.fragmentPosition=3;return}if(r.fragment=n,r.startPosition.index-((o=(a=n.startPosition)==null?void 0:a.index)!=null?o:0)<=3){r.fragmentPosition=0;return}if(n.parameters.length==0){r.fragmentPosition=2;return}let s=!1;for(let m=0;m<n.parameters.length;m++){let p=n.parameters[m];if(((c=(l=p.startPosition)==null?void 0:l.index)!=null?c:0)<r.startPosition.index&&((f=(u=p.endPosition)==null?void 0:u.index)!=null?f:0)>r.startPosition.index){r.fragmentPosition=1,r.fragmentParameter=p,s=!0;break}}s||(r.fragmentPosition=2)}))}};var pm=class{static analyze(e){e.forEach(r=>{var n,i,s,a,o,l;if(r instanceof q){if(r.prev instanceof q&&r.isPaired()&&r.prev.isInlineAntlers==!0){r.isInlineAntlers=!1,r.isClosedBy!=null&&(r.isClosedBy.isInlineAntlers=!1);return}let c=!1,u=!1;if(r.next==null)c=!0;else if(r.next instanceof je){let f=G.getFirstLine(r.next.content);(r.next.next==null&&f.trim().length==0||G.trimLeft(f," 	").startsWith(`
`)==!1&&f.trim().length>0||r.next.next instanceof ir||r.next.next instanceof q&&(r.next.next.isPaired()==!1||((i=(n=r.next.next.startPosition)==null?void 0:n.line)!=null?i:0)!=((a=(s=r.startPosition)==null?void 0:s.line)!=null?a:0)))&&(c=!0)}else r.next instanceof q&&r.next.isPaired()&&(c=!0);if(r.prev==null)u=!0;else if(r.prev instanceof je){let f=G.getLastLine(r.prev.content);G.trimRight(f," 	").endsWith(`
`)==!1&&f.trim().length>0||r.prev.prev instanceof ir?u=!0:r.prev.prev instanceof q&&(r.prev.prev.isInlineAntlers&&((o=r.prev.prev.endPosition)==null?void 0:o.line)==((l=r.startPosition)==null?void 0:l.line)?u=!0:r.prev.prev.isClosingTag&&r.prev.prev.isOpenedBy!=null&&(r.prev.prev.isOpenedBy instanceof ir||r.prev.prev.runtimeName()=="noparse")&&(r.prev.prev.isInlineAntlers=!0,u=!0))}else r.prev instanceof q&&r.prev.isPaired()&&(u=!0);r.isInlineAntlers=c&&u}})}};var Ee=class{constructor(){this.interpolationRegions=new Map;this.nodeParser=new rm;this.chars=[];this.charLen=0;this.lastAntlersNode=null;this.content="";this.originalContent="";this.currentIndex=0;this.currentContent=[];this.sourceContent=[];this.startIndex=0;this._recoveryStartIndex=0;this.cur=null;this.next=null;this.prev=null;this.nodes=[];this.renderNodes=[];this.isInterpolatedParser=!1;this.inputLen=0;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.isDoubleBrace=!1;this.interpolationEndOffsets=new Map;this.isScanningInterpolations=!1;this.seedStartLine=1;this.seedStartchar=1;this.frontMatterEndLine=-1;this.lastAntlersEndIndex=-1;this.seedOffset=0;this.antlersStartIndex=[];this.antlersStartPositionIndex=new Map;this.chunkSize=5;this.maxLine=1;this.currentChunkOffset=0;this.isNoParse=!1;this.antlersErrors=[];this.structureErrors=[];this.languageParser=new At;this.documentPath=null;this.pushedErrors=new Map;this.frontMatter="";this.shiftLine=0;this.doesHaveUncloseIfStructures=!1;this.doesHaveUnclosedStructures=!1;this.parseChildDocuments=!1;this.structuralErrorCodes=[v.TYPE_PARSE_UNCLOSED_CONDITIONAL,v.TYPE_PARSE_UNPAIRED_CONDITIONAL,v.TYPE_RECURSIVE_UNPAIRED_NODE,v.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END,v.TYPE_UNPAIRED_CLOSING_TAG];this.structure=new am(this);this.fragmentsParser=new um,this.fragmentsAnalyzer=new fm(this,this.fragmentsParser)}withChildDocuments(e){return this.parseChildDocuments=e,this}shouldParseChildDocument(){return this.parseChildDocuments}hasUnclosedIfStructures(){return this.doesHaveUncloseIfStructures}hasUnclosedStructures(){return this.doesHaveUnclosedStructures}getFrontMatter(){return this.frontMatter}setDocumentPath(e){this.documentPath=e}getFrontMatterEndLine(){return this.frontMatterEndLine}pushError(e){(e.errorCode==v.TYPE_PARSE_UNCLOSED_CONDITIONAL||e.errorCode==v.TYPE_PARSE_UNPAIRED_CONDITIONAL)&&(this.doesHaveUncloseIfStructures=!0);let r=e.hash();this.pushedErrors.has(r)||(this.pushedErrors.set(r,e),this.antlersErrors.push(e),this.structuralErrorCodes.includes(e.errorCode)&&this.structureErrors.push(e))}getInterpolationRegions(){return this.interpolationRegions}getDocumentPath(){return this.documentPath}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let r=G.split(G.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),r.forEach(n=>{this.chars.push(n),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}charLeftAt(e){return e==null||e.char<=1?null:this.charAt(this.positionFromCursor(e.line,e.char-1))}charLeftAtCursor(e,r){return this.charLeftAt(this.positionFromCursor(e,r))}charRightAt(e){return e==null?null:this.charAt(this.positionFromCursor(e.line,e.char+1))}charRightAtCursor(e,r){return this.charRightAt(this.positionFromCursor(e,r))}punctuationLeftAt(e,r=4){if(e==null)return null;let n=this.getLineText(e.line);return n==null?null:Fi.findLeftNeighboringNextPunctuation(e.char,n,r)}punctuationLeftAtCursor(e,r,n=4){return this.punctuationLeftAt(this.positionFromCursor(e,r),n)}punctuationRightAt(e,r=4){if(e==null)return null;let n=this.getLineText(e.line);return n==null?null:Fi.findRightBeighboringNextPunctuation(e.char,n,r)}punctuationRightAtCursor(e,r,n=4){return this.punctuationRightAt(this.positionFromCursor(e,r),n)}wordRightAt(e,r=4){if(e==null)return null;let n=this.getLineText(e.line);if(n==null)return null;let i=Fi.findRightNeighboringNextAlphaNumeric(e.char,n,r);return i==null?null:Fi.scanWordAt(i,n,r)}wordRightAtCursor(e,r,n=4){return this.wordRightAt(this.positionFromCursor(e,r),n)}wordLeftAt(e,r=4){if(e==null)return null;let n=this.getLineText(e.line);if(n==null)return null;let i=Fi.findLeftNeighboringNextAlphaNumeric(e.char,n,r);return i==null?null:Fi.scanWordAt(i,n,r)}wordLeftAtCursor(e,r,n=4){return this.wordLeftAt(this.positionFromCursor(e,r),n)}wordAt(e,r=4){if(e==null)return null;let n=this.getLineText(e.line);return n==null?null:Fi.scanWordAt(e.char,n,r)}getLineText(e){let r=this.getLineIndex(e);return r!=null?G.trimRight(this.getContent().substring(r.start,r.end+1)):null}wordAtCursor(e,r,n=4){return this.wordAt(this.positionFromCursor(e,r),n)}charAt(e){return e==null?null:this.content.substr(e.offset,1)}getLinesAround(e){var s;let r=new Map,n=e-3,i=e+3;n<1&&(n=1),i>this.maxLine&&(i=this.maxLine);for(let a=n;a<=i;a++)r.set(a,(s=this.getLineText(a))!=null?s:"");return r}charAtCursor(e,r){return this.charAt(this.positionFromCursor(e,r))}getLineIndex(e){if(e==this.maxLine){let n=this.lineIndex.get(e-1);if(n!=null){let i=n.endIndex+1;return{end:this.inputLen-1,start:i}}return null}let r=this.lineIndex.get(e);return r!=null?{start:r.startIndex,end:r.endIndex}:null}positionFromCursor(e,r){if(e==this.maxLine){let i=this.lineIndex.get(e-1);if(i!=null){let s=i.endIndex+1,a=s+(r-1),o=new Bt;return o.offset=a,o.line=e,o.char=r,o.index=a,o}return null}let n=this.lineIndex.get(e);if(n!=null){let i=new Bt;return i.offset=n.startIndex+(r-1),i.line=n.line,i.char=r,i.index=n.startIndex+(r-1),i}return null}parse(e){var c,u,f,m,p,d,_,P,h,y;if(this.resetState(),!this.processInputText(e))return[];let r=this.antlersStartIndex.length,n=r-1;if(r==0&&!this.isNoParse){let g=new je;g.withParser(this),g.content=this.prepareLiteralContent(this.content),g.startPosition=this.positionFromOffset(0,0),g.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),g.sourceContent=this.content,this.nodes.push(g)}else for(let g=0;g<r;g+=1){let N=this.antlersStartIndex[g];if(this.seedOffset=N,g==0&&N>0&&!this.isNoParse){let V=new je;if(V.withParser(this),V.content=this.prepareLiteralContent(this.content.substr(0,N)),V.content.length>0){V.startPosition=this.positionFromOffset(0,0),V.endPosition=this.positionFromOffset(N,N-1);let O=(c=V.startPosition.index)!=null?c:0,Y=V.endPosition.index+1;V.sourceContent=this.content.substr(O,Y-O),this.nodes.push(V)}}if(N<this.lastAntlersEndIndex)continue;if(this.currentChunkOffset=N,this.resetIntermediateState(),this.parseIntermediateText(),this.lastAntlersNode!=null&&!(this.lastAntlersNode instanceof Vs)&&this.lastAntlersNode.isComment&&!(this.lastAntlersNode instanceof ul)&&g+1<r){let V=this.antlersStartPositionIndex.get(g+1);if(this.lastAntlersNode.endPosition!=null&&V<this.lastAntlersNode.endPosition.offset){let O=null;for(let Y=g+1;Y<r;Y++)if(this.antlersStartIndex[Y]>this.lastAntlersNode.endPosition.offset){O=Y;break}if(O==null){let Y=this.prepareLiteralContent(this.content.substr(this.lastAntlersNode.endPosition.offset+1));if(Y.length>0&&!this.isNoParse){let z=new je;z.withParser(this),z.content=Y;let X=this.lastAntlersNode.endPosition.offset+1;z.startPosition=this.positionFromOffset(X,X),z.endPosition=this.positionFromOffset(this.inputLen,this.inputLen);let K=(u=z.startPosition.index)!=null?u:0,re=z.endPosition.index+1;z.sourceContent=this.content.substr(K,re-K),this.nodes.push(z)}break}else{let Y=this.antlersStartIndex[O],z=Y-this.lastAntlersNode.endPosition.offset-1;if(z>0){let X=this.lastAntlersNode.endPosition.offset,K=Y-1;X+=1,K-=1;let re=this.content.substr(X,z);if(re.length>0&&!this.isNoParse){let De=new je;De.withParser(this),De.content=re,De.startPosition=this.positionFromOffset(X,X),De.endPosition=this.positionFromOffset(K,K);let de=(f=De.startPosition.index)!=null?f:0,te=De.endPosition.index+1;De.sourceContent=this.content.substr(de,te-de),this.nodes.push(De)}continue}g=O-1;continue}}}let S=!1;if(this.antlersStartPositionIndex.has(this.currentChunkOffset)?this.lastAntlersEndIndex<this.currentChunkOffset&&(S=!0):S=!0,S){if(g+1<r){let V=this.antlersStartIndex[g+1],O=this.lastAntlersEndIndex+1;if(V<O)if(this.lastAntlersEndIndex>V)g+2<r&&(V=this.antlersStartIndex[g+2]);else continue;if(g+1==n&&V<=this.lastAntlersEndIndex){if(this.isNoParse)break;let Y=this.currentChunkOffset,z=this.content.substr(O),X=new je;if(X.withParser(this),X.content=this.prepareLiteralContent(z),X.content.length>0){X.startPosition=this.positionFromOffset(Y,Y),X.endPosition=this.positionFromOffset(V,V-1);let K=(m=X.startPosition.index)!=null?m:0,re=X.endPosition.index+1;X.sourceContent=this.content.substr(K+2,this.inputLen-K+2),this.nodes.push(X)}break}else{let Y=V-this.lastAntlersEndIndex-1;if(Y==0||this.isNoParse)continue;let X=this.currentChunkOffset;this.lastAntlersNode instanceof ul&&(O=((d=(p=this.lastAntlersNode.endPosition)==null?void 0:p.offset)!=null?d:0)+1,Y-=((P=(_=this.lastAntlersNode.endPosition)==null?void 0:_.offset)!=null?P:0)+1,X=O),this.lastAntlersNode instanceof Vs&&(O-=1,Y+=1);let K=this.content.substr(O,Y),re=new je;if(re.withParser(this),re.content=this.prepareLiteralContent(K),re.content.length>0){re.startPosition=this.positionFromOffset(O,O),re.endPosition=this.positionFromOffset(V,V-1);let De=(h=re.startPosition.index)!=null?h:0,de=re.endPosition.index+1;re.sourceContent=this.content.substr(De,de-De),this.nodes.push(re)}}continue}if(g!==n&&this.lastAntlersNode!=null&&this.lastAntlersNode.endPosition!=null&&this.positionFromOffset(N,N).isBefore(this.lastAntlersNode.endPosition)){if(g+1<r){if(this.antlersStartIndex[g+1]<this.lastAntlersNode.endPosition.offset)continue}else if(g+1!=n)continue}if(g==n){let V=this.currentIndex+N;if(V<this.inputLen&&!this.isNoParse){let O=new je;if(O.withParser(this),O.content=this.prepareLiteralContent(this.content.substr(V)),O.content.length>0){O.startPosition=this.positionFromOffset(V,V),O.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1);let Y=(y=O.startPosition.index)!=null?y:0,z=O.endPosition.index+1;O.sourceContent=this.content.substr(Y,z-Y),this.nodes.push(O)}break}}}}let i=0;this.nodes.forEach(g=>{g.index=i,i+=1}),this.nodes.length>500&&(this.parseChildDocuments=!1),this.nodes.forEach(g=>{g instanceof q&&g.isComment||g instanceof q&&g.interpolationRegions.size>0&&(g.interpolationRegions.forEach((N,S)=>{let V=new Ee;V.withChildDocuments(this.parseChildDocuments),V.setIsInterpolatedParser(!0);let O=V.parse(N.parseContent);O.length>1&&O[1]instanceof q&&(O=[O[1]]),V.hasUnclosedIfStructures()&&(this.doesHaveUncloseIfStructures=!0),V.hasUnclosedStructures()&&(this.doesHaveUnclosedStructures=!0),g.processedInterpolationRegions.set(S,O),this.mergeErrors(V.getAntlersErrors())}),g.hasProcessedInterpolationRegions=!0)}),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content);let s=new To;this.renderNodes=s.associate(this.nodes,this),this.createChildDocuments(this.renderNodes);let a=null,o=null;for(let g=0;g<this.nodes.length;g++){let N=this.nodes[g];g+1<this.nodes.length?o=this.nodes[g+1]:o=null,N.next=o,N.prev=a,a=N}this.fragmentsAnalyzer.analyze(),pm.analyze(this.nodes),this.nodes.forEach(g=>{if(g instanceof q&&g.isClosedBy!=null){let N=g.getImmediateChildren();for(let S=0;S<N.length;S++){let V=N[S];if(V instanceof q&&V.isClosedBy!=null){g.containsChildStructures=!0;break}else if(V instanceof Xe){g.containsChildStructures=!0;break}}}}),this.nodes.forEach(g=>{if(g instanceof q&&g.isClosingTag&&g.isOpenedBy==null){let N="Unpaired closing tag.";g.isInterpolationNode&&(N+=" Tag pairs are not supported within Antlers tags."),g.pushError(M.makeSyntaxError(v.TYPE_UNPAIRED_CLOSING_TAG,g,N))}}),sm.associateRecursiveParent(this.nodes),this.nodes.forEach(g=>{var N;if(!(g instanceof q&&g.isComment)&&((g instanceof q||g instanceof dt)&&(g.isInterpolationNode=this.isInterpolatedParser),(g instanceof q||g instanceof dt)&&g.interpolationRegions.size>0&&g.runtimeNodes.forEach(S=>{S instanceof ae&&g.interpolationRegions.has(S.name)&&(S.isInterpolationReference=!0,S.interpolationNodes=g.processedInterpolationRegions.get(S.name))}),(g instanceof q||g instanceof dt)&&g.hasParameters&&g.interpolationRegions.size>0&&g.parameters.forEach(S=>{g.interpolationRegions.forEach((V,O)=>{S.value.includes(O)&&S.interpolations.push(O)})}),g instanceof q&&g.runtimeNodes.length>0&&g.isClosingTag==!1&&!g.isComment&&(g.parsedRuntimeNodes=this.languageParser.parse(g.runtimeNodes),g.hasParsedRuntimeNodes=!0,!g.isTagNode&&g.parsedRuntimeNodes.length>0))){let S=g.nodeAtIndex(0);S!=null&&S instanceof ae&&S.name==((N=g.name)==null?void 0:N.name)&&(g.modifierChain=S.modifierChain)}}),this.languageParser.getCreatedModifierChains().forEach(g=>{g.modifierChain.length>0&&g.modifierChain.forEach(N=>{var S,V;N.nameNode!=null&&Me.instance!=null&&Me.instance.hasModifier((S=N.nameNode)==null?void 0:S.name)&&(N.modifier=(V=Me.instance)==null?void 0:V.getModifier(N.nameNode.name))})});let l=1;return this.nodes.forEach(g=>{var N,S;if(g instanceof q){if(g.isComment)return;g.isTagNode=(S=(N=Ie.instance)==null?void 0:N.isKnownTag(g.runtimeName()))!=null?S:!1,g.scopeName=g.findParameterValue("scope",""),g.antlersNodeIndex=l,l+=1,om.analyzeModifierNodeParameters(g)}}),this.nodes.forEach(g=>{var N,S,V,O,Y,z,X,K;if(g instanceof q&&g.isClosedBy!=null){let re=((S=(N=g.endPosition)==null?void 0:N.offset)!=null?S:0)+1,De=(O=(V=g.isClosedBy.startPosition)==null?void 0:V.offset)!=null?O:0,de=(z=(Y=g.startPosition)==null?void 0:Y.offset)!=null?z:0,te=((K=(X=g.isClosedBy.endPosition)==null?void 0:X.offset)!=null?K:0)+1;g.documentText=this.content.substr(re,De-re),g.nodeContent=this.content.substr(de,te-de),this.parseChildDocuments&&(g.childDocument=gt.childFromText(g.documentText,Pl(g.children)))}}),this.renderNodes}createChildDocuments(e){e.forEach(r=>{var n,i,s,a,o,l,c,u;if(r instanceof q&&r.isClosedBy!=null){let f=r.isClosedBy,m=((i=(n=r.startPosition)==null?void 0:n.index)!=null?i:0)-1,p=((a=(s=f.endPosition)==null?void 0:s.index)!=null?a:0)-m;if(r.documentText=this.content.substr(m,p),this.parseChildDocuments){let d=(l=(o=r.endPosition)==null?void 0:o.index)!=null?l:0,_=((u=(c=f.startPosition)==null?void 0:c.index)!=null?u:0)-1-d,P=this.content.substr(d,_);r.childDocument=gt.childFromText(P,Pl(r.getChildren()))}}})}getNodeIndexRanges(){let e=[];return this.nodes.forEach(r=>{var n,i,s,a;r instanceof je||e.push({start:(i=(n=r.startPosition)==null?void 0:n.index)!=null?i:0,end:(a=(s=r.endPosition)==null?void 0:s.index)!=null?a:0})}),e}positionFromOffset(e,r,n=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let o=this.documentOffsets.get(e);i=o.line,s=o.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let o=null,l=null,c=null,u=null;for(let f of this.documentOffsets.keys()){if(f>=e){u!=null&&e>u?(o=c,l=u):(o=this.documentOffsets.get(f),l=f);break}c=this.documentOffsets.get(f),u=f}if(o==null&&(o=c,l=u),o!=null)if(n){let f=this.content.split(""),m=e-(l!=null?l:0),p=o.char-(l!=null?l:0)+e;s=m,i=o.line,e<=(l!=null?l:0)?(i=o.line,s=e+1):i=o.line+1}else{let f=this.content.split(""),m=e-(l!=null?l:0),p=o.char-(l!=null?l:0)+e;s=m,i=o.line,e<=(l!=null?l:0)?(i=o.line,s=e+1):i=o.line+1}else this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new Bt;return a.index=r,a.offset=e,a.line=i+this.shiftLine,a.char=s,a}getLanguageParser(){return this.languageParser}getText(e,r){return this.content.substr(e,r-e)}getOriginalContent(){return this.originalContent}getContent(){return this.content}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}setIsInterpolatedParser(e){return this.isInterpolatedParser=e,this}setStartLineSeed(e){return this.seedStartLine=e,this}setSeedStartChar(e){return this.seedStartchar=e,this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.sourceContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(e){return e==null?this.shiftLine=0:this.shiftLine=e.line,this}resetState(){if(this.languageParser.reset(),this.charLen=0,this.antlersStartIndex=[],this.antlersErrors=[],this.pushedErrors.clear(),this.antlersStartPositionIndex.clear(),this.lastAntlersEndIndex=-1,this.renderNodes=[],this.nodes=[],hs.globalTagEnterStack.length>0){let e=hs.globalTagEnterStack[hs.length-1];e!=null&&e.endPosition!=null&&this.setStartLineSeed(e.endPosition.line)}this.seedOffset=0,this.isScanningInterpolations=!1,this.content="",this.chars=[],this.currentIndex=0,this.startIndex=0,this._recoveryStartIndex=0,this.cur=null,this.next=null,this.prev=null,this.inputLen=0,this.documentOffsets.clear(),this.isDoubleBrace=!1,this.interpolationRegions.clear(),this.interpolationEndOffsets.clear()}fetch(e){let r=this.currentChunkOffset+this.chunkSize-this.chars.length;return G.substring(this.content,r,e)}getParsedContent(){return this.content}peek(e){if(e==this.charLen){let r=G.split(G.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,r.forEach(n=>{this.chars.push(n),this.charLen+=1})}return this.chars[e]}parseIntermediateText(){for(this.currentContent=[],this.sourceContent=[],this.startIndex=0,this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ee.LeftBrace&&this.next==Ee.LeftBrace&&this.prev==Ee.AtChar){this.dumpLiteralNode(this.currentIndex);let e=new ir;e.withParser(this),e.name=new Dr,e.name.name="noparse",e.content="{{",e.startPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),this.nodes.push(e),this.currentContent=[],this.sourceContent=[],this.currentIndex+=1;continue}if((this.prev==null||this.prev!=null&&this.prev!=Ee.AtChar)&&this.next!=null&&this.cur==Ee.LeftBrace&&this.next==Ee.LeftBrace){this.dumpLiteralNode(this.currentIndex);let e=null;if(this.currentIndex+2<this.inputLen&&(e=this.peek(this.currentIndex+2)),e==Ee.Punctuation_Question&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(Ee.Punctuation_Question),this.isDoubleBrace=!1;break}if(e==Ee.Punctuation_Dollar&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(Ee.Punctuation_Dollar),this.isDoubleBrace=!1;break}if(e==Ee.Punctuation_Octothorp&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersCommentRegion(),this.isDoubleBrace=!1;break}if(!this.isNoParse)this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1;else if(this.fetch(11).replace(" ","").toLocaleLowerCase().startsWith("{{/noparse")){this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1,this.isNoParse=!1;break}else{this.currentContent.push(this.cur);continue}break}if(this.cur==Ee.AtChar&&this.next!=null&&this.next==Ee.LeftBrace){if(this.currentIndex+2>=this.inputLen){this.appendContent(this.next),this.dumpLiteralNode(this.currentIndex+1);break}let e=0;for(let r=this.currentIndex+1;r<this.inputLen&&this.chars[r]==Ee.LeftBrace;r+=1)e+=1;this.currentContent=this.currentContent.concat(Ee.LeftBrace.repeat(e).split("")),this.sourceContent=this.currentContent.concat(Ee.LeftBrace.repeat(e).split("")),this.currentIndex+=e}this.appendContent(this.cur),this.next==null&&this.currentContent.length>0&&this.dumpLiteralNode(this.currentIndex)}}getRenderNodes(){return this.renderNodes}processInputText(e){var f;if(this.originalContent=e,this.content=G.normalizeLineEndings(e),this.inputLen=this.content.length,this.content.startsWith("---")){let m=this.content.split(`
`),p=[],d=[];d.push("");for(let _=1;_<m.length;_++){let P=m[_];if(P.startsWith("---")){d.push(""),d=d.concat(m.slice(_+1)),this.content=d.join(`
`),this.frontMatter=p.join(`
`),this.frontMatterEndLine=_+1;break}else p.push(P),d.push("")}}let r=[...this.content.matchAll(/(\n)/gm)],n=r.length,i=this.seedStartLine,s=null,a=0,o=0;for(let m=0;m<n;m++){let p=r[m],d=(f=p.index)!=null?f:0,_=d;s!=null?_=d-s:_=_+1,this.documentOffsets.set(d,{char:_,line:i});let P=0,h=0;m==0?(h=_-1,P=0):(P=o+1,h=d),this.lineIndex.set(i,{char:_,line:i,startIndex:P,endIndex:h}),this.lastDocumentOffsetKey=d,this.maxLine=i,i+=1,s=d,o=h,a=P}this.maxLine+=1;let l=[...this.content.matchAll(/@?{{/gm)],c=0,u=!1;return l.forEach(m=>{let p=m[0];if(p.startsWith(Ee.AtChar)){c=this.content.indexOf(p,c)+2,u=!0;return}let d=this.content.indexOf(p,c);if(u&&c==d){c=d;return}this.antlersStartIndex.push(d),this.antlersStartPositionIndex.set(d,1),c=d+2,u=!1}),!0}prepareLiteralContent(e){return e.replace("@{{","{{")}scanToEndOfPhpRegion(e){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==e&&this.next!=null&&this.next==Ee.RightBrace&&this.peek(this.currentIndex+2)==Ee.RightBrace){let n=this.makeAntlersPhpNode(this.currentIndex,e==Ee.Punctuation_Dollar);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.startIndex=this.currentIndex,this._recoveryStartIndex=this.startIndex,this.nodes.push(n),this.lastAntlersNode=n;break}if(this.appendContent(this.cur),this.next==null){let r=this.makeAntlersPhpFailedNode(this.currentIndex);this.nodes.push(r),this.lastAntlersNode=r,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(M.makeSyntaxError(v.TYPE_INCOMPLETE_PHP_EVALUATION_REGION,r,"Unexpected end of input while parsing Antlers PHP region."));break}}}appendContent(e){e!=null&&(this.currentContent.push(e),this.sourceContent.push(e))}scanToEndOfAntlersCommentRegion(){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ee.Punctuation_Octothorp&&this.next!=null&&this.next==Ee.RightBrace&&this.peek(this.currentIndex+2)==Ee.RightBrace){let r=this.makeAntlersTagNode(this.currentIndex,!0);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.nodes.push(r),this.lastAntlersNode=r;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersCommentFailedNode(this.currentIndex);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(M.makeSyntaxError(v.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION,e,"Unexpected end of input while parsing Antlers comment region."));break}}}scanToEndOfInterpolatedRegion(){this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0);let e=[];this.isScanningInterpolations=!0;let r=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),this.cur==Ee.LeftBrace){if(this.prev==Ee.AtChar){e.push(this.cur);continue}r+=1,e.push(this.cur)}else if(this.cur==Ee.RightBrace){if(this.prev==Ee.AtChar){e.push(this.cur);continue}if(r-=1,e.push(this.cur),r==0){this.interpolationEndOffsets.set(this.currentIndex,1);break}}else this.cur!=null&&e.push(this.cur);let n=e.join(""),s=("int_"+dv.Md5.hashStr(n)).substr(0,n.length),a=s.length,o=n.length;if(a<o){let l=o-a;s+="x".repeat(l)}return this.isScanningInterpolations=!1,{content:n,varContent:s}}bordersInterpolationRegion(e){if(this.interpolationEndOffsets.size==0)return!1;let r=e.offset-1;return r<=0?!1:this.interpolationEndOffsets.has(r)}getParseableContent(e){let r="";for(let n=0;n<=e;n++)this.content[n]==Ee.LeftBrace||this.content[n]==Ee.RightBrace?r+="~":r+=this.content[n];return r}scanToEndOfAntlersRegion(){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ee.LeftBrace&&this.prev==Ee.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.isInterpolatedParser&&this.cur==Ee.RightBrace&&this.prev==Ee.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.cur==Ee.LeftBrace){let e=this.scanToEndOfInterpolatedRegion(),r=this.currentIndex+this.seedOffset,n=r-e.content.length,i=this.getParseableContent(n-1);hs.interpolatedVariables.push(e.varContent),this.currentContent=this.currentContent.concat(e.varContent.split("")),this.sourceContent=this.sourceContent.concat(e.content.split(""));let s=i+"{"+e.content+"}";this.interpolationRegions.set(e.varContent,{content:e.content,parseContent:s,varContent:e.varContent,startOffset:n,endOffset:r});continue}if(this.cur==Ee.RightBrace&&this.next!=null&&this.next==Ee.RightBrace){let e=this.makeAntlersTagNode(this.currentIndex,!1);e.name!=null&&e.name.name=="noparse"&&(this.isNoParse=!0),this.currentIndex+=2,this.nodes.push(e),this.lastAntlersNode=e;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersFailedNode(this.currentIndex,!1);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0;let r="Unexpected end of input while parsing Antlers region.";this.isScanningInterpolations&&(r="Unexpected end of input wihle parsing interpolated Antlers region."),this.antlersErrors.push(M.makeSyntaxError(v.TYPE_INCOMPLETE_ANTLERS_REGION,e,r));break}}}makeAntlersPhpNode(e,r){let n=new Vs;return r?(n.rawStart="{{$",n.rawEnd="$}}"):(n.rawStart="{{?",n.rawEnd="?}}"),n.content=this.currentContent.join(""),n.sourceContent=this.sourceContent.join(""),n.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+3>this.inputLen?(n.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,n,"Unexpected end of input while locating end of Antlers region.")),n):(this.lastAntlersEndIndex=e+3+this.seedOffset,n.endPosition=this.positionFromOffset(e+this.seedOffset,e+3+this.seedOffset),n)}makeAntlersPhpFailedNode(e){let r=new ld;r.rawStart="{{$",r.rawEnd="$}}",r._isEndVirtual=!0,r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let n=this.getLineText(r.startPosition.line),i=this.getLineIndex(r.startPosition.line);if(n!=null){let a=n.substr(this._recoveryStartIndex);r.content=a,r.sourceContent=a}let s=e+this.seedOffset;return i!=null&&(this.currentIndex=i.end,s=i.end),r.endPosition=this.positionFromOffset(s,s),r}makeAntlersCommentFailedNode(e){let r=new ul;this.isDoubleBrace?(r.rawStart="{{",r.rawEnd="}}"):(r.rawStart="{",r.rawEnd="}"),r._isEndVirtual=!0;let n=!1,i=this.currentContent.length;i>0&&this.currentContent[i-1]==Ee.Punctuation_ForwardSlash&&(this.currentContent.pop(),n=!0),r.isComment=!0,r.isSelfClosing=n,r.withParser(this),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let s=this.getLineText(r.startPosition.line),a=this.getLineIndex(r.startPosition.line);if(s!=null){let l=s.substr(this._recoveryStartIndex);r.content=l,r.sourceContent=l}let o=e+this.seedOffset;return a!=null&&(this.currentIndex=a.end,o=a.end),r.endPosition=this.positionFromOffset(o,o),r.interpolationRegions=new Map,this.interpolationRegions.forEach((l,c)=>{r.content.includes(c)&&r.interpolationRegions.set(c,l)}),r}makeAntlersFailedNode(e,r){let n=new dt;this.isDoubleBrace?(n.rawStart="{{",n.rawEnd="}}"):(n.rawStart="{",n.rawEnd="}"),n._isEndVirtual=!0;let i=!1,s=this.currentContent.length;s>0&&this.currentContent[s-1]==Ee.Punctuation_ForwardSlash&&(this.currentContent.pop(),i=!0),n.isComment=r,n.isSelfClosing=i,n.withParser(this),n.content=this.currentContent.join(""),n.sourceContent=this.sourceContent.join(""),n.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let a=this.getLineText(n.startPosition.line),o=this.getLineIndex(n.startPosition.line);if(a!=null){let u=G.trimLeft(this.content.substring(n.startPosition.offset+n.rawStart.length-1,o==null?void 0:o.end),"{");n.content=u,n.sourceContent=u}let l=e+this.seedOffset;o!=null&&(this.currentIndex=o.end,l=o.end),n.endPosition=this.positionFromOffset(l,l),n.interpolationRegions=new Map,this.interpolationRegions.forEach((u,f)=>{n.content.includes(f)&&n.interpolationRegions.set(f,u)});let c=this.nodeParser.parseNode(n);return this.mergeErrors(c.getErrors()),c}makeAntlersTagNode(e,r){let n=new q;this.isDoubleBrace?(n.rawStart="{{",n.rawEnd="}}"):(n.rawStart="{",n.rawEnd="}");let i=!1,s=this.currentContent.length;if(s>0&&this.currentContent[s-1]==Ee.Punctuation_ForwardSlash&&(this.currentContent.pop(),i=!0),n.isInterpolationNode=this.isInterpolatedParser,n.isComment=r,n.isSelfClosing=i,n.withParser(this),n.content=this.currentContent.join(""),n.sourceContent=this.sourceContent.join(""),n.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+2>this.inputLen)return n.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(M.makeSyntaxError(v.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,n,"Unexpected end of input while locating end of Antlers region.")),n;if(r?this.lastAntlersEndIndex=e+2+this.seedOffset:this.lastAntlersEndIndex=e+1+this.seedOffset,n.endPosition=this.positionFromOffset(this.lastAntlersEndIndex,this.lastAntlersEndIndex),n.interpolationRegions=new Map,this.interpolationRegions.forEach((o,l)=>{n.content.includes(l)&&n.interpolationRegions.set(l,o)}),n.isComment)return n;let a=this.nodeParser.parseNode(n);return this.mergeErrors(a.getErrors()),a}mergeErrors(e){e.forEach(r=>{this.antlersErrors.push(r)})}getNodes(){return this.nodes}getNodesBetween(e,r){let n=[];return this.nodes.forEach(i=>{var s,a,o,l;((a=(s=i.startPosition)==null?void 0:s.offset)!=null?a:0)>e.offset&&((l=(o=i.endPosition)==null?void 0:o.offset)!=null?l:0)<r.offset&&n.push(i)}),n}antlersNodes(){return this.nodes.filter(function(e){return e instanceof q})}dumpLiteralNode(e){this.isNoParse||(this.currentContent.length>0&&this.nodes.push(this.makeLiteralNode(this.currentContent,this.startIndex,e)),this.currentContent=[],this.sourceContent=[])}makeLiteralNode(e,r,n){let i=new je;return i.content=e.join(""),i.sourceContent=this.sourceContent.join(""),i.startPosition=this.positionFromOffset(r,r),i.endPosition=this.positionFromOffset(n,n),i.sourceContent=this.content.substr(r,n),i.withParser(this),i}addAntlersError(e){this.antlersErrors.push(e)}getAntlersErrors(){return this.antlersErrors}getStructureErrors(){return this.structureErrors}},E=Ee;E.K_CHAR="char",E.K_LINE="line",E.NewLine=`
`,E.AtChar="@",E.LeftBrace="{",E.RightBrace="}",E.LeftBracket="[",E.RightBracket="]",E.String_EscapeCharacter="\\",E.String_Terminator_DoubleQuote='"',E.String_Terminator_SingleQuote="'",E.Punctuation_Question="?",E.Punctuation_Equals="=",E.Punctuation_Comma=",",E.Punctuation_Colon=":",E.Punctuation_Semicolon=";",E.Punctuation_Exclamation="!",E.Punctuation_Pipe="|",E.Punctuation_Ampersand="&",E.Punctuation_LessThan="<",E.Punctuation_GreaterThan=">",E.Punctuation_Octothorp="#",E.Punctuation_Tilde="~",E.Punctuation_FullStop=".",E.Punctuation_Dollar="$",E.Punctuation_Asterisk="*",E.Punctuation_Percent="%",E.Punctuation_Plus="+",E.Punctuation_Minus="-",E.Punctuation_Underscore="_",E.Punctuation_ForwardSlash="/",E.Punctuation_Caret="^",E.LeftParen="(",E.RightParent=")";var yt=class{static findAssignmentNodes(e){let r=[];for(let n=0;n<e.length;n++)At.isAssignmentOperatorNode(e[n])&&r.push(e[n]);return r}static findAbstractNodesBefore(e,r){return this.findAbstractNodesBeforePosition(e.startPosition,r)}static findAbstractNodesBeforePosition(e,r){if(e==null)return[];let n=[];for(let i=0;i<r.length;i++){let s=r[i];if(s.startPosition!=null){if(s.startPosition.index>e.index)break;n.push(s)}}return n}static isBefore(e,r){return e.startPosition==null?!1:e.startPosition.index<r.index}static isAfter(e,r){return e.startPosition==null?!1:e.startPosition.index>r.index}static findNodesBeforePosition(e,r){let n=[];if(e==null)return n;for(let i=0;i<r.length;i++){let s=r[i];if(!yt.isLiteralType(s)&&s.startPosition!=null&&s.endPosition!=null){if(s.startPosition.index>e.index)break;n.push(s)}}return n}static findNodesAfterPosition(e,r){let n=[];if(e==null)return n;for(let i=0;i<r.length;i++){let s=r[i];yt.isLiteralType(s)||s.startPosition!=null&&s.startPosition.index>e.index&&n.push(s)}return n}static findNodeBeforePosition(e,r){if(e==null)return null;let n=null;for(let i=0;i<r.length;i++){let s=r[i];if(!yt.isLiteralType(s)&&s.startPosition!=null){if(s.startPosition.index>e.index)break;n=s}}return n}static findNodeAfterPosition(e,r){if(e==null)return null;for(let n=0;n<r.length;n++){let i=r[n];if(!yt.isLiteralType(i)&&i.startPosition!=null&&i.startPosition.index>e.index)return i}return null}static findNodeAtPosition(e,r){if(e==null)return null;for(let n=0;n<r.length;n++){let i=r[n];if(!yt.isLiteralType(i)&&i.startPosition!=null&&i.endPosition!=null&&e.index>=i.startPosition.index&&e.index<=i.endPosition.index)return i}return null}static isLiteralType(e){return e instanceof ir||e instanceof je}};var Il=class{static isModifierLeftOf(e,r){return Il.isModifierLeftOfPosition(e.startPosition,r)}static isModifierLeftOfPosition(e,r){let n=yt.findAbstractNodesBeforePosition(e,r);for(let i=n.length-1;i>=0;i--){let s=n[i];if(s instanceof Qt||s instanceof jt)return!1;if(s instanceof dr)return!0}return!1}};var Sl=class{constructor(){this.isRightOfOperator=!1;this.isLeftOfOperator=!1}static resolveContext(e,r,n){let i=new Sl;return n!=null&&(n.prev!=null&&At.isOperatorType(n.prev)&&(i.isRightOfOperator=!0),n.next!=null&&At.isOperatorType(n.next)&&(i.isLeftOfOperator=!0)),i}};var dm=class{constructor(){this.inTagPart=!1;this.inMethodPart=!1}};var Cl=class{constructor(){this.modifierChain=null;this.activeModifier=null;this.name="";this.inModifierName=!1;this.inModifierParameter=!1;this.valueCount=0;this.activeValueIndex=-1;this.activeValue=null}static resolveContext(e,r,n,i){let s=r.getParser(),a=new Cl,o=s.getLanguageParser().getCreatedModifierChains(),l=null;for(let c=0;c<o.length;c++){let u=o[c];if(e.isWithin(u.startPosition,u.endPosition)){for(let f=0;f<u.modifierChain.length;f++){let m=u.modifierChain[f];if(e.isWithin(m.startPosition,m.endPosition)){l=m;break}}if(l!=null)break}}if(l==null&&n instanceof Ut&&i.getDocumentParser().getLanguageParser().hasModifierConstruct(n)&&(l=i.getDocumentParser().getLanguageParser().getModifierConstruct(n)),l!=null)if(a.activeModifier=l,a.valueCount=l.valueNodes.length,l.nameNode!=null&&(a.name=l.nameNode.name),l.nameNode!=null&&e.isWithin(l.nameNode.startPosition,l.nameNode.endPosition,1))a.inModifierName=!0;else for(let c=0;c<l.valueNodes.length;c++){let u=l.valueNodes[c];if(e.isWithin(u.startPosition,u.endPosition,1)){a.activeValueIndex=c,a.inModifierParameter=!0,a.activeValue=u;break}}return a}};var Rl=class{constructor(){this.parameter=null;this.isInName=!1;this.isInValue=!1}static resolveContext(e,r){let n=new Rl;return n.parameter=r,e.isWithinRange(r.namePosition)?n.isInName=!0:e.isWithinRange(r.valuePosition)&&(n.isInValue=!0),n}};var mm=class{constructor(){this.refId="";this.node=null;this.leftPunctuation=null;this.rightPunctuation=null;this.leftChar=null;this.rightChar=null;this.word=null;this.char=null;this.interpolatedContext=!1;this.leftWord=null;this.rightWord=null;this.isCursorInIdentifier=!1;this.root=null;this.identifierContext=null;this.position=null;this.feature=null;this.isInParameter=!1;this.subContext=null;this.parameterContext=null;this.modifierContext=null;this.generalContext=null;this.variableContext=null;this.cursorContext=hm.Unknown;this.refId=Ma()}},hm=(a=>(a[a.Unknown=0]="Unknown",a[a.Variable=1]="Variable",a[a.Modifier=2]="Modifier",a[a.Parameter=3]="Parameter",a[a.General=4]="General",a[a.LanguageOperator=5]="LanguageOperator",a))(hm||{});var Al=class{constructor(){this.variableNode=null;this.varPathText=""}static resolveContext(e,r,n,i){var f;if(n==null)return null;let s=n,a=i.getDocumentParser().getLanguageParser(),o=new Al,l=(f=i.wordAt(e))!=null?f:"";n instanceof St&&a.isMergedVariableComponent(n)==!1&&n.prev instanceof ae&&(s=n.prev);let c="";if(a.isMergedVariableComponent(s)){let m=a.getMergedVariable(s);m.startPosition!=null&&(c=i.getText(m.startPosition.index,e.index).trim()),o.variableNode=m}else s instanceof ae&&(o.variableNode=s,c=s.name,s.variableReference!=null&&(c=s.variableReference.normalizedReference));c.length>0&&(c=It(c,"\\.",":"));let u=c.split(":");return l.trim().length>0&&u.pop(),c=u.join(":"),c.endsWith(":")&&(c=Dn(c,":")),o.varPathText=c,o}};var Vi=class{static resolveIdentifierContext(e,r){let n=new dm;return r.nameMethodPartStartsOn!=null?e.char<r.nameMethodPartStartsOn.char?(n.inTagPart=!0,n.inMethodPart=!1):(n.inTagPart=!1,n.inMethodPart=!0):(n.inMethodPart=!1,n.inTagPart=!0),n}static resolveContext(e,r,n,i=!1,s=null){var a,o,l,c,u,f;if(r==null||e==null)return null;if(r instanceof Ur||r instanceof q){let m=new mm;if(r.nameStartsOn!=null&&e.line==r.nameStartsOn.line){let _=!1;e.char>=r.nameStartsOn.char&&(_=!0),r.nameEndsOn!=null&&e.char>r.nameEndsOn.char&&(_=!1),_&&(m.isCursorInIdentifier=!0,m.identifierContext=Vi.resolveIdentifierContext(e,r))}r.addContext(m),s!=null&&s.addContext(m),m.interpolatedContext=i,m.node=r,m.position=e,m.root=s,m.leftPunctuation=n.punctuationLeftAt(e),m.rightPunctuation=n.punctuationRightAt(e),m.leftChar=n.charLeftAt(e),m.rightChar=n.charRightAt(e),m.word=n.wordAt(e),m.char=n.charAt(e),m.leftWord=n.wordLeftAt(e),m.rightWord=n.wordRightAt(e);let p=!1;if(r.parameters.length>0)for(let _=0;_<r.parameters.length;_++){let P=r.parameters[_];if(P.blockPosition!=null&&P.blockPosition.start!=null&&P.blockPosition.end!=null&&e.char>P.blockPosition.start.char&&e.char<=P.blockPosition.end.char+1&&e.line>=((l=(o=(a=P.namePosition)==null?void 0:a.start)==null?void 0:o.line)!=null?l:P.blockPosition.start.line)&&e.line<=((f=(u=(c=P.valuePosition)==null?void 0:c.end)==null?void 0:u.line)!=null?f:P.blockPosition.end.line)){m.cursorContext=3,m.parameterContext=Rl.resolveContext(e,P),m.isInParameter=!0,m.feature=P,p=!0;break}}if(p||r.runtimeNodes.forEach(_=>{_.startPosition!=null&&_.endPosition!=null&&e.isWithin(_.startPosition,_.endPosition,1)&&(m.feature=_)}),p&&r.interpolationRegions.size>0){let _=Array.from(r.interpolationRegions,([P,h])=>h);for(let P=0;P<_.length;P++){let h=_[P];if(e.index>=h.startOffset&&e.index<=h.endOffset){let y=r.getInterpolationNode(h.varContent);return Vi.resolveContext(e,y,n,!0,s)}}}return m.feature instanceof ae&&m.feature.isInterpolationReference&&m.feature.parent!=null&&m.feature.parent instanceof q&&m.feature.parent.processedInterpolationRegions.has(m.feature.name)?Vi.resolveContext(e,m.feature.parent.getInterpolationNode(m.feature.name),n,!0,s):(Il.isModifierLeftOfPosition(e,r.runtimeNodes)?(m.cursorContext=2,m.modifierContext=Cl.resolveContext(e,r,m.feature,n)):p||(m.cursorContext=4,m.generalContext=Sl.resolveContext(e,r,m.feature)),m.variableContext=Al.resolveContext(e,r,m.feature,n),m)}return null}};var Zs=class{static isPairedNode(e){return e instanceof Xe?!0:e instanceof Ur||e instanceof q?e.isClosedBy!=null:!1}static findAncestorsBeforePosition(e,r){var o,l,c,u,f,m;let n=[],i=[],s=-1,a=-1;for(let p=0;p<r.length;p++){let d=r[p];if(d.isClosedBy!=null&&((o=d.isClosedBy.endPosition)==null?void 0:o.isBefore(e))&&(i.push(d),i.push(d.isClosedBy),s=d.isClosedBy.endPosition.line,a=d.isClosedBy.endPosition.char),!(s>-1&&d.endPosition!=null&&(d.endPosition.line<s||d.endPosition.line==s&&a>-1&&d.endPosition.char<a))){if(d.startPosition!=null){if(e.isBefore(d.startPosition))break;if(d.startPosition.line==e.line&&e.char<=d.startPosition.char){i.push(d);continue}}if(((l=Ie.instance)==null?void 0:l.requiresClose(d))&&d.isClosedBy!=null){let _=d.isClosedBy;if((c=_.startPosition)==null?void 0:c.isBefore(e)){i.push(d),i.push(_);continue}else((u=_.startPosition)==null?void 0:u.line)==e.line&&((f=_.startPosition)==null?void 0:f.char)<e.char?i.push(d):n.push(d)}else if(d.parent!=null){let _=d.parent;if(i.includes(_)){i.push(d);continue}else((m=d.endPosition)==null?void 0:m.isBefore(e))?n.push(d):i.push(d)}else n.push(d)}}return n}};var gm=class{constructor(e){this.doc=e}getAncestorsAt(e,r){let n=this.position(e,r);return n==null?[]:Zs.findAncestorsBeforePosition(n,this.doc.getAllAntlersNodes())}getNameAt(e,r){let n=this.getNodeAt(e,r);return n instanceof q?n.name:null}getScopeAt(e,r){let n=this.getNodeAt(e,r);return n instanceof q&&n.currentScope!=null?n.currentScope:null}getFeaturesAt(e,r){let n=this.position(e,r),i=this.getNodeAt(e,r);return Vi.resolveContext(n,i,this.doc,!1,i)}getNodeAt(e,r){return yt.findNodeAtPosition(this.position(e,r),this.doc.getDocumentParser().getNodes())}getNodeBefore(e,r){return yt.findNodeBeforePosition(this.position(e,r),this.doc.getDocumentParser().getNodes())}getNodeAfter(e,r){return yt.findNodeAfterPosition(this.position(e,r),this.doc.getDocumentParser().getNodes())}getNodesBefore(e,r){return yt.findNodesBeforePosition(this.position(e,r),this.doc.getDocumentParser().getNodes())}getAssignmentsBefore(e,r){let n=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),i=[],s=this.position(e,r);return s!=null&&n.forEach(a=>{yt.isBefore(a.target,s)&&i.push(a)}),i}getAssignmentsAfter(e,r){let n=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),i=[],s=this.position(e,r);return s!=null&&n.forEach(a=>{yt.isAfter(a.target,s)&&i.push(a)}),i}getNodesAfter(e,r){return yt.findNodesAfterPosition(this.position(e,r),this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e,r){let n=this.getNodeBefore(e,r);return n==null?!1:Zs.isPairedNode(n)}position(e,r){return this.doc.getDocumentParser().positionFromCursor(e,r)}charLeftAt(e,r){return this.doc.getDocumentParser().charLeftAtCursor(e,r)}charAt(e,r){return this.doc.getDocumentParser().charAtCursor(e,r)}charRightAt(e,r){return this.doc.getDocumentParser().charRightAtCursor(e,r)}wordLeftAt(e,r,n=4){return this.doc.getDocumentParser().wordLeftAtCursor(e,r,n)}wordRightAt(e,r,n=4){return this.doc.getDocumentParser().wordRightAtCursor(e,r,n)}wordAt(e,r,n=4){return this.doc.getDocumentParser().wordAtCursor(e,r,n)}punctuationLeftAt(e,r,n=4){return this.doc.getDocumentParser().punctuationLeftAtCursor(e,r,n)}punctuationRightAt(e,r,n=4){return this.doc.getDocumentParser().punctuationRightAtCursor(e,r,n)}};var _m=class{constructor(e){this.doc=e}hasStructureErrors(){return this.doc.getDocumentParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getDocumentParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let e=[],r=[];return this.doc.getAllAntlersNodes().forEach(n=>{n.getErrors().forEach(i=>{e.includes(i.hash())==!1&&(e.push(i.hash()),r.push(i))})}),this.doc.getDocumentParser().getAntlersErrors().forEach(n=>{e.includes(n.hash())==!1&&(e.push(n.hash()),r.push(n))}),r}};var cP=Q(hi());var xr=Q(oP(),1),NZ=xr.default.binaryOptions,vZ=xr.default.boolOptions,PZ=xr.default.intOptions,IZ=xr.default.nullOptions,SZ=xr.default.strOptions,CZ=xr.default.Schema,RZ=xr.default.Alias,AZ=xr.default.Collection,xZ=xr.default.Merge,EZ=xr.default.Node,lP=xr.default.Pair,Ml=xr.default.Scalar,Fl=xr.default.YAMLMap,Do=xr.default.YAMLSeq;var Om=class{constructor(e){this.documentScope=null;this.project=e}getKeyValue(e){return e instanceof Ml?e.value:""}getNodeValue(e){return e instanceof Ml?e.value:e instanceof Fl?this.analyzeDocument(e.items):e instanceof Do?this.analyzeDocument(e.items):""}getScalarRuntimeType(e){return parseFloat(e).toString()==e||parseInt(e).toString()==e?"number":"string"}analyzeDocument(e){let r=new Xr(this.project);return e.forEach(n=>{if(n instanceof lP){let i=this.getKeyValue(n.key),s=this.getNodeValue(n.value);if(n.value instanceof Ml)r.addVariable({dataType:this.getScalarRuntimeType(s),introducedBy:null,name:i,sourceField:null,sourceName:"*frontmatter"});else if(n.value instanceof Do&&n.key instanceof Ml){let a=new Xr(this.project);n.value.items.forEach(o=>{let l=this.getNodeValue(o);a.addVariable({dataType:this.getScalarRuntimeType(l),introducedBy:null,name:o.value,sourceField:null,sourceName:"*frontmatter"})}),r.addScopeList(n.key.value,a)}else r.addScopeList(i,s)}}),r}parse(e){try{let r=cP.parseDocument(e);r.contents instanceof Fl&&(this.documentScope=this.analyzeDocument(r.contents.items))}catch{this.documentScope=null}}hasScope(){return this.documentScope!=null}getScope(){return this.documentScope}};var Dm=class{constructor(e){this.doc=e}getAncestors(e){return Zs.findAncestorsBeforePosition(e,this.doc.getAllAntlersNodes())}getNodeAt(e){return yt.findNodeAtPosition(e,this.doc.getDocumentParser().getNodes())}getNodesBefore(e){return yt.findNodesBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeBefore(e){return yt.findNodeBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeAfter(e){return yt.findNodeAfterPosition(e,this.doc.getDocumentParser().getNodes())}getNodesAfter(e){return yt.findNodesAfterPosition(e,this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e){let r=this.getNodeBefore(e);return r==null?!1:Zs.isPairedNode(r)}filter(e){return this.doc.getDocumentParser().getNodes().filter(e)}getComments(){let e=[];return this.doc.getAllNodes().forEach(r=>{r instanceof q&&r.isComment&&e.push(r)}),e}getMultilineNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{var n,i;r instanceof q&&!r.isComment&&((n=r.startPosition)==null?void 0:n.line)!=((i=r.endPosition)==null?void 0:i.line)&&e.push(r)}),e}getMultiLineComments(){let e=[];return this.getComments().forEach(r=>{var n,i;((n=r.startPosition)==null?void 0:n.line)!=((i=r.endPosition)==null?void 0:i.line)&&e.push(r)}),e}getAllLiteralNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{(r instanceof je||r instanceof ir)&&e.push(r)}),e}getStructuralNodes(){let e=[];return this.doc.getDocumentParser().getRenderNodes().forEach(r=>{r instanceof q?e.push(r):r instanceof Xe&&r.logicBranches.length>0&&r.logicBranches.forEach(n=>{if(n.head!=null){let i=n.head;i.originalNode!=null?e.push(i.originalNode):e.push(i)}})}),e}getAllRuntimeNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{(r instanceof Ur||r instanceof q)&&r.runtimeNodes.length>0&&r.runtimeNodes.forEach(n=>{e.push(n)})}),e}getAllParameterNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{(r instanceof Ur||r instanceof q)&&r.hasParameters&&r.parameters.forEach(n=>{e.push(n)})}),e}getAssignmentNodes(){return yt.findAssignmentNodes(this.getAllRuntimeNodes())}};var Lm=class{constructor(e){this.doc=e}getAllSelfClosingNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{r instanceof q&&r.isSelfClosing&&e.push(r)}),e}getAllPairedNodes(){let e=[];return this.doc.getAllNodes().forEach(r=>{(r instanceof q||r instanceof dt)&&r.isClosedBy!=null&&!r.isSelfClosing&&e.push(r)}),e}};var hf=class{static printComment(e,r,n){let i=e.getContent(),s=i.trim();if(s.includes(`
`)){let a=G.breakByNewLine(i.trim()),o=[];a.forEach(u=>{o.push(" ".repeat(r+n)+u.trim())});let l=o.join(`
`),c=`{{#
`;return c+=l,c+=`
`+" ".repeat(n)+"#}}",c}return"{{# "+s+" #}}"}};var oa=class{static indentRelative(e,r){let n=G.breakByNewLine(e),i=[];for(let o=0;o<n.length;o++)if(n[o].trim().length>0){i=n.slice(o);break}for(let o=i.length-1;o>=0&&i[o].trim().length==0;o--)i.pop();let s=-1,a="";for(let o=0;o<i.length;o++){let l=i[o],c=l.trimLeft(),u=l.length-c.length;(o==0||u<s)&&(s=u,a=l)}if(s>=0){let o=" ".repeat(r);for(let l=0;l<i.length;l++){let c=i[l];if(c.trim().length==0){i[l]="";continue}let u=c.substring(s);if(l==0){i[l]=c.trimLeft();continue}else i[l]=o+u.trimLeft()}}return i.join(`
`)}static shiftIndent(e,r,n=!1,i=4,s=!0){r<0&&(r=0);let a=G.breakByNewLine(e.trim()),o=[];for(let c=0;c<a.length;c++){if(c==0&&n){o.push(a[c]);continue}let u=a[c];o.push(" ".repeat(r)+u)}let l=o.join(`
`);if(s&&o.length>0&&r-i>i&&o[o.length-1].trim()==") }}"){a=G.breakByNewLine(l.trim()),o=[];for(let c=0;c<a.length;c++){if(c==0&&n){o.push(a[c]);continue}let u=a[c];if(c==a.length-1){o.push(u);break}o.push(" ".repeat(i)+u)}l=o.join(`
`)}return l}static shiftClean(e,r){let n=G.breakByNewLine(e),i=[],s=" ".repeat(r),a=!1;return n.forEach(o=>{o.trim().length>0&&(a=!0),!!a&&i.push(s+o)}),i.join(`
`)}static inferIndentLevel(e,r,n){let i=0,s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.includes(r)){let l=o.trimLeft();i=o.length-l.length,s=a;break}}if(s>0)for(let a=s-1;a>=0;a--){let o=e[a],l=o.trim(),c=o.trimLeft(),u=o.length-l.length;if(c.length!=0&&u!=i&&u<i){let f=i-u;return{targetLevel:i,referenceLevel:u,sourceTabSize:f}}}return{targetLevel:i,referenceLevel:i,sourceTabSize:n}}static indent(e,r,n){let i=oa.inferIndentLevel(e,r,n);return" ".repeat(i.targetLevel)}};var km=class{constructor(e,r,n){this.buffer="";this.closeString="";this.relativeIndentSize=0;this.indentSeed=0;this.baseIndent=r,e.isInterpolationNode?(this.buffer="{",this.closeString="}"):(this.buffer="{{ ",e.isSelfClosing?this.closeString=" /}}":this.closeString=" }}"),n!=null&&n.trim().length>0&&(this.buffer+=n+" ")}setIndentSeed(e){return this.indentSeed=e,this}close(){return this.closeString==" }}"?this.buffer.endsWith(" ")?this.buffer+="}}":this.buffer+=this.closeString:this.buffer+=this.closeString,this}appendT(e){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer+=e,this}appendTS(e,r=!1){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer.endsWith("{")&&!r&&(e=e.trimStart()),this.buffer+=e,this}append(e){return this.buffer+=e,this}appendOS(e){return this.buffer.endsWith(" ")==!1&&this.buffer.endsWith("(")==!1&&this.buffer.endsWith("{")==!1&&this.buffer.endsWith("[")==!1&&this.buffer.endsWith(":")==!1&&(this.buffer+=" "),this.append(e)}appendS(e){let r="";return this.buffer.endsWith(" ")==!1&&(r+=" "),r+=e+" ",this.buffer+=r,this}indent(){let e=this.baseIndent;return e==0?e=1:e+=2,this.relativeIndentSize>0&&(e+=this.relativeIndentSize),this.buffer+=" ".repeat(e),this}addIndent(e){return e<=0?this:(this.buffer+=" ".repeat(e),this)}paramS(e){let r=" ";return e.isVariableReference&&(r+=":"),r+=e.name+"="+e.nameDelimiter+e.value+e.nameDelimiter,this.append(r),this}replace(e,r){return this.buffer=It(this.buffer,e,r),this}relativeIndent(e){let r=this.buffer.split(`
`);if(r.length==0)return this;let n=r[r.length-1].trimEnd();return n.endsWith("(")&&(n=n.slice(0,-1)),n.endsWith(e)==!1?this:(this.relativeIndentSize=n.lastIndexOf(e),this)}newlineIndent(){return this.newLine(),this.indent(),this}newlineNDIndent(){return this.buffer=this.buffer.trimEnd(),this.newLine(),this.indent(),this}newLine(){return this.buffer+=`
`,this}getContent(){return this.buffer}endsWith(e){return this.buffer.endsWith(e)}};var Vl=class{static prettyPrintNode(e,r,n,i,s,a){var u,f,m,p,d,_,P;let o=e.getTrueRuntimeNodes(),l=0,c=0;if(o.length>0){let h=new km(e,n,s);a!=null&&h.setIndentSeed(a);let y=null;for(let N=0;N<o.length;N++){let S=o[N];if(y!=null&&((u=S.endPosition)==null?void 0:u.isBefore(y.startPosition)))continue;let V=!1;if(S instanceof jt?!(S.next instanceof jt)&&S.next!=null&&(!At.isOperatorType(S.next)||!At.isAssignmentOperator(S.next))&&(!(S.next instanceof sr)&&!(S.next instanceof St)&&!S.isSwitchGroupMember&&!At.isOperatorType(S.next)&&(V=!0,S.next instanceof ae&&S.next.name=="as"&&(V=!1)),S.next instanceof dr&&(V=!1)):!((f=S.prev)==null?void 0:f.isVirtual)&&((m=S.prev)==null?void 0:m.isVirtualGroupOperatorResolve)&&S.prev.producesVirtualStatementTerminator&&S.next!=null&&(S.prev instanceof ae||h.newlineIndent()),S instanceof ae){if(S.convertedToOperator){if(S.name=="arr")h.appendT(" arr");else if(S.name=="switch"||S.name=="list")if(h.appendTS(" "+S.name,!0),N+1<o.length){if(!(o[N+1]instanceof Qt))break;h.append("("),S.name!="list"&&h.relativeIndent(S.name).newLine().indent(),N+=1,y=o[N+1];continue}else break;else if(c+=1,c>1)h.newlineNDIndent().indent().addIndent(6).appendS(S.name);else{if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S)){h.append(S.name);continue}h.appendS(S.name)}y=S;continue}S.mergeRefName!=null&&S.mergeRefName.trim().length>0&&S.mergeRefName!=S.name?h.append(S.mergeRefName.trim()):S.name=="as"?h.appendOS("as"):h.append(S.name.trim())}else if(S instanceof $n)if(h.appendTS(" list"),N+1<o.length){if(!(o[N+1]instanceof Qt))break;h.append("("),N+=1,y=o[N+1];continue}else break;else if(S instanceof dr)h.appendS("|");else if(S instanceof St){if(y!=null&&((p=S.startPosition)==null?void 0:p.isBefore(y.endPosition))||S.next instanceof ae&&S.next.mergeRefName.startsWith(":"))continue;if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S)){h.endsWith(":")||h.append(":");continue}if(S.prev!=null&&S.next!=null&&nt.distance(S.prev,S)<=1&&nt.distance(S.next,S)<=1){h.append(":"),y=S;continue}if(r.getDocumentParser().getLanguageParser().isActualModifierSeparator(S)){h.append(":"),y=S;continue}if(y instanceof Ut||y instanceof Gt){h.append(":"),y=S;continue}h.appendS(":")}else if(S instanceof Ut)h.append(S.name);else if(S instanceof Kn)h.appendS("?");else if(S instanceof Pr){if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S))continue;if(S.isTenaryBranchSeparator){h.appendS(":"),y=S;continue}if(r.getDocumentParser().getLanguageParser().isActualModifierSeparator(S)){h.append(":"),y=S;continue}h.append(":")}else if(S instanceof Gt)h.append(S.value.trim());else if(S instanceof Qt)h.append("(");else if(S instanceof jt)h.append(")");else if(S instanceof Nt){if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S))continue;S.sourceContent!=""?h.appendOS(S.sourceContent):h.appendOS(S.sourceTerminator+S.value+S.sourceTerminator)}else if(S instanceof Rt)S.isSwitchGroupMember?h.append(",").newlineIndent():h.append(", ");else if(S instanceof Lt){if(y=S,r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S))continue;let O=(_=(d=S.value)==null?void 0:d.toString())!=null?_:"";S.rawLexContent!=null&&S.rawLexContent.trim().length>0&&(O=S.rawLexContent.trim()),h.append(O)}else if(S instanceof Yr)h.appendS("=");else if(S instanceof Ir)h.appendS("=>");else if(S instanceof Gr)h.appendS("+");else if(S instanceof Nr){if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S)){h.append("-");continue}if(S.prev!=null&&S.next!=null&&nt.distance(S.prev,S)<=1&&nt.distance(S.next,S)<=1){S.next instanceof Lt&&S.prev instanceof Lt?h.appendS("-"):h.append("-"),y=S;continue}h.appendS("-")}else if(S instanceof Hr)h.appendS("*");else if(S instanceof Wr){if(y=S,(P=S.startPosition)==null?void 0:P.isBefore(e.nameEndsOn)){h.append("/");continue}if(r.getDocumentParser().getLanguageParser().isMergedVariableComponent(S))continue;h.appendS("/");continue}else S instanceof sr?S.isListGroupMember?(h.append(";").newlineIndent().indent().addIndent(7),N+1<o.length&&!(o[N+1]instanceof jt)&&h.indent()):(l+=1,l<i.maxAntlersStatementsPerLine?h.appendT("; "):(h.appendT(";").newlineIndent(),l=0)):S instanceof ar?S.content=="not"?h.appendS("not"):h.append("!"):h.appendS(S.rawContent());V&&h.newlineIndent(),y=S}e.hasParameters&&e.parameters.forEach(N=>{h.paramS(N)}),h.close();let g=h.getContent();return e.processedInterpolationRegions.size>0&&e.processedInterpolationRegions.forEach((N,S)=>{let V=Vl.prettyPrintNode(N[0],r,n,i,null,null);g=It(g,S,V)}),g}return e.getTrueRawContent()}};var ql=class{constructor(e){this.htmlFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.slugs=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.structureLines=[];this.parentTransformer=null;this.tagPairs=new Map;this.conditions=[];this.inlineIfs=new Map;this.createExraStructuralPairs=!1;this.spanNodes=new Map;this.inlineNodes=new Map;this.virtualBlocks=[];this.inlineComments=new Map;this.blockComments=[];this.extractedEmbeddedDocuments=new Map;this.dynamicElementAntlers=new Map;this.dynamicElementAntlersNodes=new Map;this.dynamicElementPairedAntlers=new Map;this.dynamicElementPairedAntlersNodes=new Map;this.dynamicElementConditionAntlers=new Map;this.dynamicElementConditionAntlersNodes=new Map;this.noParses=new Map;this.forceBreaks=[];this.forceCleanLines=["{{ if ","{{ /if","{{ /unless","{{ /noparse","{{ else","{{ unless"];this.doc=e,this.options={tabSize:4,newlinesAfterFrontMatter:1,maxAntlersStatementsPerLine:3,endNewline:!0}}produceExtraStructuralPairs(e){return this.createExraStructuralPairs=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}withOptions(e){return this.options=e,this.options.tabSize<=0&&(this.options.tabSize=4),this.options.newlinesAfterFrontMatter<0&&(this.options.newlinesAfterFrontMatter=1),this}setParentTransformer(e){return this.parentTransformer=e,this}close(e){return"</"+e+">"}open(e){return"<"+e+">"}selfClosing(e){return"<"+e+" />"}pair(e,r=""){return"<"+e+">"+r+"</"+e+">"}makeSlug(e){e<=2&&(e=7);let r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length;for(let a=0;a<e-1;a++)r+=n.charAt(Math.floor(Math.random()*i));let s="A"+r+"A";return this.slugs.includes(s)?this.makeSlug(e+1):(this.slugs.push(s),s)}transformInlineConditions(e){let r=e;return this.inlineIfs.forEach((n,i)=>{r=r.replace(i,n.nodeContent)}),r}registerCondition(e){this.parentTransformer!=null?this.parentTransformer.registerCondition(e):this.conditions.push(e)}registerInlineCondition(e,r){this.parentTransformer!=null?this.parentTransformer.registerInlineCondition(e,r):this.inlineIfs.set(e,r)}registerVirtualBlock(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualBlock(e):this.virtualBlocks.push(e)}registerNoParse(e,r){this.parentTransformer!=null?this.parentTransformer.registerNoParse(e,r):this.noParses.set(e,r)}prepareNoParse(e){let r=this.makeSlug(35);return this.registerNoParse(r,e),r}registerForcedBreak(){if(this.parentTransformer!=null)return this.parentTransformer.registerForcedBreak();{let e=this.makeSlug(15),r=this.makeSlug(10);return this.forceBreaks.push(e),this.forceBreaks.push(r),this.removeLines.push(this.open(e)),this.removeLines.push(this.close(e)),this.removeLines.push(this.selfClosing(r)),this.pair(e,this.selfClosing(r))}}transformVirtualStructures(e){let r=e;return this.virtualBlocks.forEach(n=>{var s;this.removeLines.push(n.pairClose);let i=this.indentLevel(n.pairOpen);if(n.virtualElement.length>0&&(this.removeLines.push(this.open(n.virtualElement)),this.removeLines.push(this.close(n.virtualElement))),n.node instanceof ir){let a="{{ noparse }}"+n.node.getInnerDocumentText();r=r.replace(n.pairOpen,a)}if(n.node instanceof q){let a=n.node;r=r.replace(n.pairClose,(s=a.isClosedBy)==null?void 0:s.getOriginalContent())}else this.removeLines.push(n.pairClose)}),this.noParses.forEach((n,i)=>{r=r.replace(i,`{{ noparse }}${n.getInnerDocumentText()}{{ /noparse }}`)}),r}printNode(e,r=null){var l,c;let n=e.getTrueNode();if((n.rawStart=="{{?"||n.rawStart=="{{$")&&this.phpFormatter!=null)try{let u=this.phpFormatter(n.content);return`${n.rawStart} ${u} ${n.rawEnd}`}catch{}let i=this.doc;e.childDocument!=null&&(i=e.childDocument.document);let s=null;if(Xt.isConditionalStructure(e)&&(s=n.runtimeName(),e.isClosingTag&&(s=="if"||s=="unless")))return`{{ /${s} }}`;if(e.isClosingTag)return n.runtimeName()=="endunless"?"{{ /unless }}":`{{ ${n.content.trim()} }}`;let a=Vl.prettyPrintNode(n,i,0,this.options,s,null),o=["switch","list"];return r!=null&&a.includes(`
`)&&(e.isVirtual&&(((l=e.name)==null?void 0:l.name)=="switch"||((c=e.name)==null?void 0:c.name)=="list")?a=oa.shiftIndent(a,r+this.options.tabSize,!0):a=oa.shiftIndent(a,r-this.options.tabSize*2,!0)),a}transformConditions(e){let r=e;return this.conditions.forEach(n=>{n.structures.forEach(i=>{let s=i.branch.head;if(i.virtualBreakOpen.length>0&&this.removeLines.push(i.virtualBreakOpen),i.virtualBreakClose.length>0&&(r=r.replace(i.virtualBreakClose,i.virtualBreakClose+`
`),this.removeLines.push(i.virtualBreakClose)),this.virtualStructureOpens.push(i.virtualOpen),this.removeLines.push(i.virtualOpen),this.removeLines.push(i.virtualClose),i.isLast){let a=this.selfClosing(i.virtualSlug);r.includes(a)&&(r=r.replace(a,i.doc.trim())),r=r.replace(i.pairOpen,this.printNode(s,this.indentLevel(i.pairOpen))),r=r.replace(i.pairClose,this.printNode(s.isClosedBy))}else{let a=this.selfClosing(i.virtualSlug);r.includes(a)&&(r=r.replace(a,i.doc.trim())),this.removeLines.push(i.pairClose),r=r.replace(i.pairOpen,this.printNode(s,this.indentLevel(i.pairOpen)))}})}),r}transformExtractedDocuments(e){let r=e;return this.extractedEmbeddedDocuments.forEach((n,i)=>{let s="",a=0;n.isScript?s="//"+i:s="/*"+i+"*/",a=this.indentLevel(s),r.includes(s)&&(r=r.replace(s,oa.indentRelative(n.content,a)))}),r}getAntlersChildDoc(e){return e.childDocument!=null?e.childDocument.document.transform().setParentTransformer(this).toStructure():this.clone().toStructure(e.getImmediateChildren())}prepareCondition(e){let r=e.logicBranches[0].head;if(r.fragmentPosition==2||r.fragmentPosition==1){let l=this.makeSlug(e.nodeContent.length);return this.registerInlineCondition(l,e),l}if(r.fragmentPosition==0)return this.prepareDynamicCondition(e);let n=[],i="";r.prev instanceof q&&r.prev.isInlineAntlers&&(i+=this.registerForcedBreak()),e.logicBranches.forEach((l,c)=>{var _,P,h,y;let u=l.head,f=this.getAntlersChildDoc(l),m=this.makeSlug(u.sourceContent.length),p=this.makeSlug(10),d={branch:l,slug:m,doc:f,pairOpen:this.open(m),pairClose:this.close(m),virtualOpen:this.open(p),virtualClose:this.close(p),virtualSlug:p,isFirst:c==0,isLast:c==e.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(((P=(_=l.head)==null?void 0:_.name)==null?void 0:P.getCompoundTagName())=="else"){i+=`
`+d.pairOpen;let g=this.makeSlug(25);this.createExraStructuralPairs&&l.head.containsChildStructures==!1&&l.head.containsAnyFragments==!1?(d.virtualBreakOpen=this.open(g),d.virtualBreakClose=this.close(g),d.virtualSlug=g,i+=`
`+this.selfClosing(g),i+=d.pairClose+`
`):(d.virtualBreakOpen=this.selfClosing(g),i+=d.virtualBreakOpen+`
`,i+=f,i+=`
`+d.pairClose)}else if(this.createExraStructuralPairs&&((h=l.head)==null?void 0:h.containsAnyFragments)==!1&&((y=l.head)==null?void 0:y.containsChildStructures)==!1){let g=this.makeSlug(25);d.virtualBreakOpen=this.open(g),d.virtualBreakClose=this.close(g),d.virtualSlug=g,i+=`
`+d.pairOpen,i+=`
`+this.selfClosing(g),i+=d.pairClose+`
`}else i+=d.pairOpen,i+=`
`,i+=f,i+=`
`,i+=d.pairClose;n.push(d)});let s=n[0].pairOpen,a=n[n.length-1].pairClose,o={pairOpen:s,pairClose:a,structures:n,condition:e};return this.registerCondition(o),i}registerPairedAntlers(e,r){this.parentTransformer!=null?this.parentTransformer.registerPairedAntlers(e,r):this.tagPairs.set(e,r)}preparePairedAntlers(e){let r=this.makeSlug(e.getOriginalContent().length),n=this.getAntlersChildDoc(e);if(e.fragmentPosition!=0){let i="",s="";if(e.prev instanceof q&&e.prev.isPaired()==!1&&(s+=this.registerForcedBreak()),s+=`${this.open(r)}
`,e.containsChildStructures==!1&&e.containsAnyFragments==!1){let a=!1,o=!0,l=!0,c=0;for(let f=0;f<e.children.length;f++){let m=e.children[f];if(m instanceof je&&m.sourceContent.trim().length>0){a=!0,o=!1;break}}e.children.length==2&&e.children[0]instanceof q&&(a=!0);let u=0;for(let f=0;f<e.children.length-1;f++){let m=e.children[f];m instanceof q&&(c+=1,m.isInlineAntlers?u+=1:l=!1)}u==0&&(a=!0),l==!1&&(a=!1),o==!1&&c==0&&(a=!1),a?(i=this.makeSlug(15),s+=this.pair(i,n)):s+=n}else s+=n;return s+=`
${this.close(r)}
`,this.virtualStructureOpens.push(this.open(i)),this.virtualStructureClose.push(this.close(i)),this.virtualStructureClose.push(this.close(r)),this.registerPairedAntlers(r,{innerDoc:n,slug:r,tag:e,virtualElementSlug:i,isInline:!1}),s}return this.prepareConditionalAntlersPair(e)}registerInlineAntlers(e){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineAntlers(e);{let r=this.makeSlug(e.getOriginalContent().length);return e.isInlineAntlers?(this.spanNodes.set(r,e),r):(this.inlineNodes.set(r,e),this.selfClosing(r))}}registerVirtualComment(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(e):this.blockComments.push(e)}registerComment(e,r){this.parentTransformer!=null?this.parentTransformer.registerComment(e,r):this.inlineComments.set(e,r)}prepareComment(e){let r=e.getContent();if(r.trim().includes(`
`)){let s=this.makeSlug(10),a=this.makeSlug(10),o={node:e,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(a)};return this.registerVirtualComment(o),o.pairOpen+`
`+o.virtualElement+`
`+o.pairClose}let i=this.makeSlug(r.length);return this.registerComment(i,e),this.selfClosing(i)}registerDynamicAntlersPair(e,r){this.parentTransformer!=null?(this.dynamicElementPairedAntlers.set(r.nodeContent,e),this.parentTransformer.registerDynamicAntlersPair(e,r)):(this.dynamicElementPairedAntlers.set(r.nodeContent,e),this.dynamicElementPairedAntlersNodes.set(e,r))}prepareConditionalAntlersPair(e){if(this.dynamicElementPairedAntlers.has(e.nodeContent))return this.dynamicElementPairedAntlers.get(e.nodeContent);let r=this.makeSlug(e.nodeContent.length);return this.registerDynamicAntlersPair(r,e),r}registerDynamicCondition(e,r){this.parentTransformer!=null?(this.dynamicElementConditionAntlers.set(r.nodeContent,e),this.parentTransformer.registerDynamicCondition(e,r)):(this.dynamicElementConditionAntlers.set(r.nodeContent,e),this.dynamicElementConditionAntlersNodes.set(e,r))}prepareDynamicCondition(e){if(this.dynamicElementConditionAntlers.has(e.nodeContent))return this.dynamicElementConditionAntlers.get(e.nodeContent);let r=this.makeSlug(e.nodeContent.length);return this.registerDynamicCondition(r,e),r}registerDynamicAntlers(e,r){this.parentTransformer!=null?(this.dynamicElementAntlers.set(r.content,e),this.parentTransformer.registerDynamicAntlers(e,r)):(this.dynamicElementAntlers.set(r.content,e),this.dynamicElementAntlersNodes.set(e,r))}prepareConditionalAntlers(e){if(this.dynamicElementAntlers.has(e.content))return this.dynamicElementAntlers.get(e.content);let r=this.makeSlug(e.content.length);return this.registerDynamicAntlers(r,e),r}prepareAntlers(e){return e.isClosedBy!=null?this.preparePairedAntlers(e):e.fragmentPosition==0?this.prepareConditionalAntlers(e):this.registerInlineAntlers(e)}transformDynamicAntlers(e){let r=e;return this.dynamicElementAntlersNodes.forEach((n,i)=>{let s=this.printNode(n);r=It(r,i,s)}),this.dynamicElementPairedAntlersNodes.forEach((n,i)=>{let s=n.nodeContent;r=It(r,i,s)}),this.dynamicElementConditionAntlersNodes.forEach((n,i)=>{let s=n.nodeContent;r=It(r,i,s)}),r}transformPairedAntlers(e){let r=e;return this.tagPairs.forEach((n,i)=>{let s=n.tag;if(n.virtualElementSlug.length>0){let l=this.open(n.virtualElementSlug),c=this.close(n.virtualElementSlug);this.virtualStructureOpens.push(l),this.removeLines.push(l),this.removeLines.push(c)}let a=this.open(i),o=this.close(i);r=r.replace(a,this.printNode(s,this.indentLevel(a))),r=r.replace(o,this.printNode(s.isClosedBy))}),r}transformInlineAntlers(e){let r=e;return this.inlineNodes.forEach((n,i)=>{let s=this.selfClosing(i),a=this.indentLevel(s);r=r.replace(s,this.printNode(n,this.indentLevel(s)))}),this.spanNodes.forEach((n,i)=>{var a,o;let s=0;n.isVirtual&&(((a=n.name)==null?void 0:a.name)=="switch"||((o=n.name)==null?void 0:o.name)=="list")&&(s=this.indentLevel(i,!0)),r=r.replace(i,this.printNode(n,s))}),r}transformComments(e){let r=e;return this.inlineComments.forEach((n,i)=>{let s=this.selfClosing(i);r=r.replace(s,hf.printComment(n,this.options.tabSize,0))}),this.blockComments.forEach(n=>{let i=n.node;r=r.replace(n.pairOpen,hf.printComment(i,this.options.tabSize,this.indentLevel(n.pairOpen))),this.removeLines.push(n.pairClose),this.removeLines.push(n.virtualElement)}),r}registerEmbeddedDocument(e,r,n){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(e,r,n):(this.extractedEmbeddedDocuments.set(e,{slug:e,content:r,isScript:n}),e)}clone(){let e=new ql(this.doc);return e.withOptions(this.options).setParentTransformer(this),e}toStructure(e=null){let r="";e==null&&(e=this.doc.getDocumentParser().getRenderNodes()),e.forEach(i=>{i instanceof je?i.sourceContent==""?r+=i.content:r+=i.sourceContent:i instanceof Xe?r+=this.prepareCondition(i):i instanceof ir?r+=this.prepareNoParse(i):i instanceof q&&(i.isComment?r+=this.prepareComment(i):r+=this.prepareAntlers(i))});let n=this.doc.getDocumentParser().getFragmentsContainingStructures();if(n.length>0){let i=new gt;i.loadString(r),n.forEach(s=>{var p,d,_,P,h,y,g,N;let a=this.doc.getDocumentParser().getText(((d=(p=s.start.endPosition)==null?void 0:p.offset)!=null?d:0)+1,(P=(_=s.end.startPosition)==null?void 0:_.offset)!=null?P:0),o=i.getDocumentParser().getFragmentsParser().getEmbeddedFragment(s.start.embeddedIndex);if(o==null)return;let l=i.getDocumentParser().getFragmentsParser().getClosingFragmentAfter(o);if(l==null)return;let c=i.getDocumentParser().getText(((y=(h=o.endPosition)==null?void 0:h.offset)!=null?y:0)+1,(N=(g=l==null?void 0:l.startPosition)==null?void 0:g.offset)!=null?N:0),u=this.makeSlug(16),f=s.start.name.toLowerCase()=="script",m=u;f?m="//"+u:m="/*"+u+"*/",r=r.replace(c,m),this.registerEmbeddedDocument(u,a,f)})}return r}removeVirtualStructures(e){let r=e;return this.removeLines.forEach(n=>{r=r.replace(n,"")}),r}indentLevel(e,r=!1){for(let n=0;n<this.structureLines.length;n++){let i=this.structureLines[n];if(i.includes(e)){let s=i.trimLeft(),a=i.length-s.length;return r&&(a+=i.indexOf(e)),a}}return 0}shouldCleanAfter(e){for(let r=0;r<this.removeLines.length;r++)if(e.startsWith(this.removeLines[r]))return!0;for(let r=0;r<this.forceCleanLines.length;r++)if(e.startsWith(this.forceCleanLines[r]))return!0;return!1}shouldCleanLine(e){for(let r=0;r<this.forceCleanLines.length;r++){let n=e.trim();if(e.startsWith(this.forceCleanLines[r])||n.startsWith("{{ /")&&n.endsWith("}}"))return!0}return!1}cleanVirtualStructures(e){let r=[],n=G.breakByNewLine(e),i=!1;for(let s=0;s<n.length;s++){let a=n[s].trim();if(i){if(a.length==0)continue;i=!1}else i=this.shouldCleanAfter(a);if(this.shouldCleanLine(a))for(let o=r.length-1;o>0&&r[o].trim().length==0;o--)r.pop();if(!this.removeLines.includes(a)){let o=n[s];this.removeLines.forEach(l=>{o.includes(l)&&(o=o.replace(l,""))}),r.push(o)}}return r.join(`
`)}cleanStructuralNewLines(e){let r=G.breakByNewLine(e),n=[],i=!1;return r.forEach(s=>{let a=s.trim();if(a.startsWith("{{")&&a.endsWith("}}")){n.push(s),i=!0;return}i&&a.length>0&&(i=!1),i||n.push(s)}),n.join(`
`)}reflowSlugs(e){let r=e;return this.slugs.forEach(n=>{let i=this.open(n),s=this.close(n),a=this.selfClosing(n),o="/<"+n+"(.*?)>/gms",l="/</"+n+"(.*?)>/gms",c="/<"+n+"(.*?)/>/gms";r=r.replace(o,i),r=r.replace(l,s),r=r.replace(c,a)}),r}cleanLines(e){let r=G.breakByNewLine(e),n=[],i=!1,s=0,a=!1;for(let o=0;o<r.length;o++){let l=r[o].trim(),c=r[o];if(l.startsWith("{{")&&l.endsWith("}}")){i&&(s=0),l.startsWith("{{ /")==!1?a=!0:a=!1,i=!0,n.push(c);continue}if(!i)n.push(c);else if(l.length==0){if(a==!1){s=0,i=!1;continue}s+=1;continue}else a&&s>1&&n.push(""),s=0,n.push(c),i=!1}return n.join(`
`)}fromStructure(e){let r=this.reflowSlugs(e);this.structureLines=G.breakByNewLine(r);let n=this.transformInlineConditions(r);if(n=this.transformConditions(n),n=this.transformInlineAntlers(n),n=this.transformComments(n),n=this.transformVirtualStructures(n),n=this.transformDynamicAntlers(n),n=this.transformPairedAntlers(n),n=this.transformExtractedDocuments(n),n=this.cleanVirtualStructures(n),n=this.cleanLines(n),this.doc.hasFrontMatter()){let i=this.doc.getFrontMatter(),s=this.doc.getFrontMatterDoc();s!=null&&s.isValid&&this.yamlFormatter!=null&&(i=this.yamlFormatter(i)),n=`---
${i}
---
`+`
`.repeat(this.options.newlinesAfterFrontMatter)+n.trimLeft()}return n=n.trimRight(),this.options.endNewline&&(n+=`
`),n}};var uP=Q(hi());var Mm=class{constructor(){this.content="";this.ranges=[];this.lastDocumentOffsetKey=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.keys=[];this.values=[];this.isValid=!1;this.parseError=null}loadString(e){var u;this.content=G.normalizeLineEndings(e);let r=null;try{r=uP.parseDocument(this.content),this.isValid=!0}catch(f){this.isValid=!1,this.parseError=f}if(r==null)return;let n=[...this.content.matchAll(/(\n)/gm)],i=n.length,s=2,a=null,o=0,l=0;for(let f=0;f<i;f++){let m=n[f],p=(u=m.index)!=null?u:0,d=p;a!=null?d=p-a:d=d+1,this.documentOffsets.set(p,{char:d,line:s});let _=0,P=0;f==0?(P=d-1,_=0):(_=l+1,P=p),this.lineIndex.set(s,{char:d,line:s,startIndex:_,endIndex:P}),this.lastDocumentOffsetKey=p,s+=1,a=p,l=P,o=_}let c=r.contents;this.processMap(c)}processMap(e){typeof e.items!="undefined"&&e.items.forEach(r=>{this.processItem(r)})}processItem(e){if(e.type=="PAIR"){if(e.value instanceof Fl||e.value instanceof Do){let s=e.key;if(s.range!=null){let a=this.positionFromOffset(s.range[0],s.range[0]),o=this.positionFromOffset(s.range[1],s.range[1]);this.ranges.push({start:a,end:o,length:o.char-a.char+1,content:"property"}),this.keys.push({start:a,end:o,length:o.char-a.char+1,content:s.value}),e.value instanceof Do?this.processMap(e.value.items[0]):this.processMap(e.value);return}}let r=e,n=r.key,i=r.value;if(n.range!=null&&i.range!=null){let s=this.positionFromOffset(n.range[0],n.range[0]),a=this.positionFromOffset(n.range[1],n.range[1]),o=this.positionFromOffset(i.range[0],i.range[0]),l=this.positionFromOffset(i.range[1],i.range[1]),c="string";parseInt(i.value)==i.value&&(c="number"),this.ranges.push({start:s,end:a,length:a.char-s.char+1,content:"property"}),this.keys.push({start:s,end:a,length:a.char-s.char+1,content:n.value}),this.ranges.push({start:o,end:l,length:l.char-o.char+1,content:c}),this.values.push({start:o,end:l,length:l.char-o.char+1,content:i.value})}}}positionFromOffset(e,r,n=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let o=this.documentOffsets.get(e);i=o.line,s=o.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let o=null,l=null,c=null,u=null;for(let f of this.documentOffsets.keys()){if(f>=e){u!=null&&e>u?(o=c,l=u):(o=this.documentOffsets.get(f),l=f);break}c=this.documentOffsets.get(f),u=f}if(o==null&&(o=c,l=u),o!=null)if(n){let f=this.content.split(""),m=e-(l!=null?l:0),p=o.char-(l!=null?l:0)+e;s=m,i=o.line,e<=(l!=null?l:0)?(i=o.line,s=e+1):i=o.line+1}else{let f=this.content.split(""),m=e-(l!=null?l:0),p=o.char-(l!=null?l:0)+e;s=m,i=o.line,e<=(l!=null?l:0)?(i=o.line,s=e+1):i=o.line+1}else this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new Bt;return a.index=r,a.offset=e,a.line=i,a.char=s,a}getRanges(){return this.ranges}getKeys(){return this.keys}getValues(){return this.values}};var gt=class{constructor(){this.documentParser=new E;this.transformer=null;this.ranges=new Lm(this);this.nodes=new Dm(this);this.cursor=new gm(this);this.errors=new _m(this);this.project=null;this.documentUri=""}static fromText(e,r){let n=new gt;return typeof r!="undefined"&&(n.project=r),n.loadString(e)}static childFromText(e,r=null){let n=new gt;return r!=null&&n.getDocumentParser().setSeedPosition(r),n.getDocumentParser().withChildDocuments(!0),n.loadString(e),{renderNodes:n.getDocumentParser().getRenderNodes(),content:e,document:n}}isValid(){return!(this.hasInvalidControlFlowStructures()||this.hasUnclosedStructures())}getDocumentOptions(){let e=this.getAllNodes();if(e.length==0||!(e[0]instanceof q))return null;let r=e[0];return r.isComment==!1?null:ll(this.documentUri,r)}isFormattingEnabled(){let e=this.getDocumentOptions();return e==null?!0:e.formatterEnabled}hasInvalidControlFlowStructures(){return this.documentParser.hasUnclosedIfStructures()}hasUnclosedStructures(){return this.documentParser.hasUnclosedStructures()}getFrontMatterDoc(){if(this.hasFrontMatter()){let e=new Mm;return e.loadString(this.getFrontMatter()),e}return null}hasFrontMatter(){return this.documentParser.getFrontMatter().trim().length>0}getFrontMatter(){return this.documentParser.getFrontMatter()}getFrontMatterScope(){if(this.project==null)return null;let e=new Om(this.project);return e.parse(this.getFrontMatter()),e.getScope()}updateProject(e){this.project=e,this.updateProjectDetails()}updateProjectDetails(){try{if(this.project!=null){let e=new Qd(this.project,this.documentUri,this),r=this.documentParser.antlersNodes();r.forEach(n=>{var i,s;if(this.project!=null&&((i=Ie.instance)==null?void 0:i.canResolveSpecialTypes(n.getTagName()))){let a=(s=Ie.instance)==null?void 0:s.resolveSpecialType(n.getTagName(),n,this.project);a.context!=null&&(n.reference=a.context)}}),e.analyzeScope(r);for(let n=0;n<r.length;n++){let i=r[n];if(i.hasParameters)for(let s=0;s<i.parameters.length;s++){let a=i.parameters[s];if(a.hasInterpolations())for(let o=0;o<a.interpolations.length;o++){let l=a.interpolations[o];i.processedInterpolationRegions.has(l)&&i.processedInterpolationRegions.get(l).forEach(u=>{u instanceof q&&(u.currentScope=i.currentScope)})}}}lT(this)}}catch(e){console.log(e)}}loadString(e){return this.documentParser.parse(e),this.updateProjectDetails(),this}getDocumentParser(){return this.documentParser}getParsedContent(){return this.documentParser.getParsedContent()}getAllNodes(){return this.documentParser.getNodes()}getAllAntlersNodes(){return this.documentParser.antlersNodes()}extractText(){let e=[];return this.nodes.getAllLiteralNodes().forEach(r=>{e.push(r.content)}),e.join("")}getNameAt(e){let r=this.nodes.getNodeAt(e);return r instanceof q?r.name:null}getLinesAround(e){return this.documentParser.getLinesAround(e)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getFeaturesAt(e){let r=this.nodes.getNodeAt(e);return Vi.resolveContext(e,r,this,!1,r)}getText(e,r){return this.documentParser.getText(e,r)}charLeftAt(e){return this.documentParser.charLeftAt(e)}charAt(e){return this.documentParser.charAt(e)}charRightAt(e){return this.documentParser.charRightAt(e)}getLineIndex(e){return this.documentParser.getLineIndex(e)}getLineText(e){return this.documentParser.getLineText(e)}wordAt(e,r=4){return this.documentParser.wordAt(e,r)}wordLeftAt(e,r=4){return this.documentParser.wordLeftAt(e,r)}wordRightAt(e,r=4){return this.documentParser.wordRightAt(e,r)}punctuationLeftAt(e,r=4){return this.documentParser.punctuationLeftAt(e,r)}punctuationRightAt(e,r=4){return this.documentParser.punctuationRightAt(e,r)}getLineChars(e){let r=this.getLineText(e);return r!=null?r.split(""):null}transform(){return this.transformer==null&&(this.transformer=new ql(this)),this.transformer}};var la=class{constructor(){this.loadedDocuments=new Map;this.activeProject=null}getDocuments(){let e=[];return this.loadedDocuments.forEach(r=>{e.push(r)}),e}setProject(e){this.activeProject=e,this.loadedDocuments.forEach(r=>{this.activeProject!=null&&r.updateProject(this.activeProject)})}refreshDocumentState(){this.activeProject!=null&&this.setProject(this.activeProject)}hasDocument(e){return this.loadedDocuments.has(e)}createDocument(e){if(!this.loadedDocuments.has(e)){let r=new gt;r.documentUri=e,this.loadedDocuments.set(e,r)}}loadDocument(e,r){this.loadedDocuments.set(e,gt.fromText(r))}getDocument(e){return this.loadedDocuments.get(e)}updateDocument(e,r){var n,i;if(this.loadedDocuments.has(e)){let s=this.loadedDocuments.get(e);s.loadString(r);let a=(i=(n=ue.instance)==null?void 0:n.getStructure())==null?void 0:i.findView(e);a!=null&&(a.document=s)}}createOrUpdate(e,r){this.createDocument(e),this.updateDocument(e,r)}getDocumentErrors(e){return this.loadedDocuments.has(e)?this.loadedDocuments.get(e).errors.all():[]}};la.instance=null;(typeof la.instance=="undefined"||la.instance==null)&&(la.instance=new la);var fP=la;var Zn=new Map,Se=new fP;function pP(t,e){let r=[];return t.processedInterpolationRegions.size>0&&t.processedInterpolationRegions.forEach((n,i)=>{var s;for(let a=0;a<n.length;a++){let o=n[a];if(o instanceof q&&e.isWithin(o.startPosition,o.endPosition)){o.currentScope==null&&(((s=t.parent)==null?void 0:s.currentScope)!=null?o.currentScope=t.parent.currentScope:o.currentScope=t.currentScope),r.push(o),o.processedInterpolationRegions.size>0&&(r=r.concat(pP(o,e)));break}}}),r}function kr(t,e,r=!0){var m,p,d,_,P,h,y,g,N,S,V;if(!Se.hasDocument(e)||ue.instance==null||ue.instance.hasStructure()==!1)return null;let n=Se.getDocument(e),i=t.line+1,s=t.character+1,a=n.cursor.getFeaturesAt(i,s),o=n.cursor.position(i,s),l=ue.instance.getStructure(),c=n.cursor.getAncestorsAt(i,s);if(o!=null&&c.length>0){let O=c[c.length-1];pP(O,o).forEach(Y=>{c.push(Y)})}let u=(a==null?void 0:a.isCursorInIdentifier)==!1;return u==!1&&((m=a==null?void 0:a.leftChar)!=null?m:"")==" "&&(u=!0),{hasFrontMatter:n.hasFrontMatter(),antlersDocument:n,frontMatterEndsOn:n.getDocumentParser().getFrontMatterEndLine(),document:e,leftMeaningfulWord:(p=a==null?void 0:a.leftWord)!=null?p:null,leftChar:(d=a==null?void 0:a.leftChar)!=null?d:"",leftWord:(P=(_=a==null?void 0:a.leftWord)==null?void 0:_.trim())!=null?P:"",originalLeftWord:(h=a==null?void 0:a.leftWord)!=null?h:"",rightWord:(y=a==null?void 0:a.rightWord)!=null?y:"",rightChar:(g=a==null?void 0:a.rightChar)!=null?g:"",context:a,position:t,project:l,nodesInScope:c,isInDoubleBraces:((N=a==null?void 0:a.node)==null?void 0:N.rawStart)=="{{",isInVariableInterpolation:(S=a==null?void 0:a.interpolatedContext)!=null?S:!1,interpolationStartsOn:null,currentNode:(V=a==null?void 0:a.node)!=null?V:null,isCaretInTag:(a==null?void 0:a.node)!=null,isPastTagPart:u,showGeneralSnippets:r}}var Lo=Q(zt());var vL=`{{ collection:$1 $2 }}

{{ /collection:$1 }}`,dP=vL;var PL='&copy; {{ now format="Y"  }}',mP=PL;var IL=`{{ form:set in="$1" }}

{{ if {form:errors} }}
	{{ form:errors }}

	{{ /form:errors }}
{{ /if }}

{{ if {form:success} }}

{{ /if }}

{{ form:create }}
	$2
{{ /form:create }}

{{ /form:set }}`,hP=IL;var gP=`{{# Displays your site's current locale. #}}
<span>{{ site:short_locale }}</span>

{{# Displays all available locales. #}}
<ul>
    {{ locales all="true" self="false" }}
    <li>
        <a href="{{ permalink }}" aria-label="{{ locale:name }}">{{ locale:short }}</a>
    </li>    
    {{ /locales }}
</ul>`;var SL=`<ul>
{{ nav }}
	{{ if depth == 1 }}
		$1
		{{ if children }}
			<ul>{{ *recursive children* }}</ul>
		{{ /if }}
	{{ elseif depth == 2 }}
		
	{{ /if }}
{{ /nav }}
</ul>`,_P=SL;function Bl(t,e,r,n){return{label:t,detail:e,insertTextFormat:Lo.InsertTextFormat.Snippet,kind:Lo.CompletionItemKind.Snippet,textEdit:Lo.TextEdit.replace(n,r),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}}function CL(t){var l,c,u,f,m;let e=[];if(t.showGeneralSnippets==!1)return e;let r={start:{line:t.position.line,character:t.position.character-t.originalLeftWord.length},end:t.position},n=(l=Zr.instance)==null?void 0:l.getContent("collection"),i=(c=Zr.instance)==null?void 0:c.getContent("formset"),s=(u=Zr.instance)==null?void 0:u.getContent("nav_depth2"),a=(f=Zr.instance)==null?void 0:f.getContent("copyright_year"),o=(m=Zr.instance)==null?void 0:m.getContent("multisite_lang_generic");return n!=null&&e.push(Bl("coll","Statamic Collection",n,r)),i!=null&&e.push(Bl("formset","Statamic Form Set",i,r)),s!=null&&e.push(Bl("nav-depth2","Statamic Nav with Depth Two",s,r)),a!=null&&e.push(Bl("copyright_year","Copyright year using Antlers tags.",a,r)),o!=null&&e.push(Bl("multisite_locales","Displays the current locale, and a list of all available locales.",o,r)),e}var Zr=class{constructor(){this.registeredSnippets=new Map}loadCoreSnippets(){this.registeredSnippets.set("collection",dP),this.registeredSnippets.set("formset",hP),this.registeredSnippets.set("nav_depth2",_P),this.registeredSnippets.set("copyright_year",mP),this.registeredSnippets.set("multisite_lang_generic",gP)}getContent(e){return this.registeredSnippets.has(e)?this.registeredSnippets.get(e):""}getSnippets(e){let r=[];return e==null||(r=r.concat(CL(e))),r}};Zr.instance=null;(typeof Zr.instance=="undefined"||Zr.instance==null)&&(Zr.instance=new Zr,Zr.instance.loadCoreSnippets());var yP=Zr;var bP=new Map;function TP(t){var a,o,l;if(((a=ue.instance)==null?void 0:a.hasStructure())==!1)return[];Se.refreshDocumentState();let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)==!1)return[];let r=kr(t.position,e,Bi.showGeneralSnippetCompletions);if(r==null)return[];if(r.hasFrontMatter&&r.frontMatterEndsOn>-1&&r.position.line<r.frontMatterEndsOn)return[];let n=(l=(o=yP.instance)==null?void 0:o.getSnippets(r))!=null?l:[],i=Nd.getSuggestions(r);n.length>0&&(r.isInDoubleBraces==!1||r.nodesInScope.length==0)&&(i=i.concat(n));let s=[];return i.filter(c=>s.includes(c.label)?!1:(s.push(c.label),!0))}function NP(t){if(bP.has(t.data)){let e=bP.get(t.data);e!=null&&(t.detail=e.detail,t.documentation=e.docs)}return t}var jl=Q(Ap());var Fm=Q(ot());function gf(t){let e=[];return t.forEach(r=>{let n=null;r.lsRange!=null?n=r.lsRange:r.node!=null?n=ca(r.node):r.range!=null?n={start:lt(r.range.start),end:lt(r.range.end)}:n={start:{line:1,character:1},end:{line:1,character:1}};let i=1;r.level==1&&(i=2),e.push({severity:i,range:n,message:"["+r.errorCode+"] "+r.message,source:"antlers",code:r.errorCode})}),e}function lt(t){return t==null?{character:0,line:0}:{character:t.char,line:t.line-1}}function ca(t){var e,r,n,i,s,a,o,l;if(t instanceof qs){let c=lt((i=(n=(e=t.valuePosition)==null?void 0:e.end)!=null?n:(r=t.blockPosition)==null?void 0:r.end)!=null?i:t.endPosition);return{start:lt((l=(o=(s=t.namePosition)==null?void 0:s.start)!=null?o:(a=t.blockPosition)==null?void 0:a.start)!=null?l:t.startPosition),end:{character:c.character+1,line:c.line}}}else if(t instanceof Xe&&t.logicBranches.length>0){let c=t.logicBranches[0],u=t.logicBranches[t.logicBranches.length-1];if(c.head!=null&&u.head!=null&&u.head.isClosedBy!=null)return{start:lt(c.head.startPosition),end:lt(u.head.isClosedBy.endPosition)}}return{start:lt(t.startPosition),end:lt(t.endPosition)}}function vP(t){if(t.isClosedBy==null)return null;let e=-1,r=-1,n=-1,i=-1;return t.startPosition!=null&&(e=t.startPosition.line-1,r=t.startPosition.char),t.isClosedBy.endPosition!=null?(n=t.isClosedBy.endPosition.char,i=t.isClosedBy.endPosition.line-1):t.isClosedBy.startPosition!=null&&(n=t.isClosedBy.startPosition.char,i=t.isClosedBy.startPosition.line-1),e==-1||i==-1||r==-1||n==-1?null:{kind:Fm.FoldingRangeKind.Region,startLine:e,endLine:i,startCharacter:r,endCharacter:n}}function Vm(t){let e=-1,r=-1,n=-1,i=-1;return t.startPosition!=null&&(e=t.startPosition.line-1,r=t.startPosition.char),t.endPosition!=null&&(n=t.endPosition.char,i=t.endPosition.line-1),e==-1||r==-1||n==-1||i==-1?null:{kind:Fm.FoldingRangeKind.Comment,startLine:e,endLine:i,startCharacter:r,endCharacter:n}}function PP(t){let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)){let r=Se.getDocument(e),n=r.ranges.getAllPairedNodes(),i=r.nodes.getMultiLineComments(),s=r.nodes.getMultilineNodes(),a=[];if(r.hasFrontMatter()){let o=r.getDocumentParser().getFrontMatterEndLine();a.push({startLine:0,endLine:o-1,kind:jl.FoldingRangeKind.Imports})}return n.length>0&&n.forEach(o=>{var c,u,f;if(((c=o.startPosition)==null?void 0:c.line)==((f=(u=o.isClosedBy)==null?void 0:u.startPosition)==null?void 0:f.line))return;let l=vP(o);l!=null&&(l.kind=jl.FoldingRangeKind.Region,a.push(l))}),i.length>0&&i.forEach(o=>{let l=Vm(o);l!=null&&(l.kind=jl.FoldingRangeKind.Comment,a.push(l))}),s.length>0&&s.forEach(o=>{if(o.isClosedBy!=null)return;let l=Vm(o);l!=null&&(l.kind=jl.FoldingRangeKind.Region,a.push(l))}),a}return[]}function IP(t){return typeof t=="undefined"||t===null}function RL(t){return typeof t=="object"&&t!==null}function AL(t){return Array.isArray(t)?t:IP(t)?[]:[t]}function xL(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function EL(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function wL(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var OL=IP,DL=RL,LL=AL,kL=EL,ML=wL,FL=xL,Ht={isNothing:OL,isObject:DL,toArray:LL,repeat:kL,isNegativeZero:ML,extend:FL};function SP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Ul(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=SP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ul.prototype=Object.create(Error.prototype);Ul.prototype.constructor=Ul;Ul.prototype.toString=function(e){return this.name+": "+SP(this,e)};var Er=Ul;function qm(t,e,r,n,i){var s="",a="",o=Math.floor(i/2)-1;return n-e>o&&(s=" ... ",e=n-o+s.length),r-n>o&&(a=" ...",r=n+o-a.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+s.length}}function Bm(t,e){return Ht.repeat(" ",e-t.length)+t}function VL(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,a=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var o="",l,c,u=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)c=qm(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),f),o=Ht.repeat(" ",e.indent)+Bm((t.line-l+1).toString(),u)+" | "+c.str+`
`+o;for(c=qm(t.buffer,n[a],i[a],t.position,f),o+=Ht.repeat(" ",e.indent)+Bm((t.line+1).toString(),u)+" | "+c.str+`
`,o+=Ht.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)c=qm(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),f),o+=Ht.repeat(" ",e.indent)+Bm((t.line+l+1).toString(),u)+" | "+c.str+`
`;return o.replace(/\n$/,"")}var qL=VL,BL=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],jL=["scalar","sequence","mapping"];function UL(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function GL(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(BL.indexOf(r)===-1)throw new Er('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=UL(e.styleAliases||null),jL.indexOf(this.kind)===-1)throw new Er('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var hr=GL;function CP(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=a)}),r[i]=n}),r}function WL(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function jm(t){return this.extend(t)}jm.prototype.extend=function(e){var r=[],n=[];if(e instanceof hr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Er("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof hr))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Er("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Er("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof hr))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(jm.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=CP(i,"implicit"),i.compiledExplicit=CP(i,"explicit"),i.compiledTypeMap=WL(i.compiledImplicit,i.compiledExplicit),i};var HL=jm,YL=new hr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),KL=new hr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),$L=new hr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),zL=new HL({explicit:[YL,KL,$L]});function XL(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function QL(){return null}function JL(t){return t===null}var ZL=new hr("tag:yaml.org,2002:null",{kind:"scalar",resolve:XL,construct:QL,predicate:JL,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function ek(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function tk(t){return t==="true"||t==="True"||t==="TRUE"}function rk(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var nk=new hr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ek,construct:tk,predicate:rk,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function ik(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function sk(t){return 48<=t&&t<=55}function ak(t){return 48<=t&&t<=57}function ok(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!ik(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!sk(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!ak(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function lk(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function ck(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ht.isNegativeZero(t)}var uk=new hr("tag:yaml.org,2002:int",{kind:"scalar",resolve:ok,construct:lk,predicate:ck,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),fk=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function pk(t){return!(t===null||!fk.test(t)||t[t.length-1]==="_")}function dk(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var mk=/^[-+]?[0-9]+e/;function hk(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ht.isNegativeZero(t))return"-0.0";return r=t.toString(10),mk.test(r)?r.replace("e",".e"):r}function gk(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ht.isNegativeZero(t))}var _k=new hr("tag:yaml.org,2002:float",{kind:"scalar",resolve:pk,construct:dk,predicate:gk,represent:hk,defaultStyle:"lowercase"}),yk=zL.extend({implicit:[ZL,nk,uk,_k]}),bk=yk,RP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),AP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Tk(t){return t===null?!1:RP.exec(t)!==null||AP.exec(t)!==null}function Nk(t){var e,r,n,i,s,a,o,l=0,c=null,u,f,m;if(e=RP.exec(t),e===null&&(e=AP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),c=(u*60+f)*6e4,e[9]==="-"&&(c=-c)),m=new Date(Date.UTC(r,n,i,s,a,o,l)),c&&m.setTime(m.getTime()-c),m}function vk(t){return t.toISOString()}var Pk=new hr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Tk,construct:Nk,instanceOf:Date,represent:vk});function Ik(t){return t==="<<"||t===null}var Sk=new hr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ik}),Um=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ck(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=Um;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Rk(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=Um,a=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}function Ak(t){var e="",r=0,n,i,s=t.length,a=Um;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function xk(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Ek=new hr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ck,construct:Rk,predicate:xk,represent:Ak}),wk=Object.prototype.hasOwnProperty,Ok=Object.prototype.toString;function Dk(t){if(t===null)return!0;var e=[],r,n,i,s,a,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],a=!1,Ok.call(i)!=="[object Object]")return!1;for(s in i)if(wk.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function Lk(t){return t!==null?t:[]}var kk=new hr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Dk,construct:Lk}),Mk=Object.prototype.toString;function Fk(t){if(t===null)return!0;var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],Mk.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function Vk(t){if(t===null)return[];var e,r,n,i,s,a=t;for(s=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var qk=new hr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Fk,construct:Vk}),Bk=Object.prototype.hasOwnProperty;function jk(t){if(t===null)return!0;var e,r=t;for(e in r)if(Bk.call(r,e)&&r[e]!==null)return!1;return!0}function Uk(t){return t!==null?t:{}}var Gk=new hr("tag:yaml.org,2002:set",{kind:"mapping",resolve:jk,construct:Uk}),xP=bk.extend({implicit:[Pk,Sk],explicit:[Ek,kk,qk,Gk]}),Ns=Object.prototype.hasOwnProperty,_f=1,EP=2,wP=3,yf=4,Gm=1,Wk=2,OP=3,Hk=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Yk=/[\x85\u2028\u2029]/,Kk=/[,\[\]\{\}]/,DP=/^(?:!|!!|![a-z\-]+!)$/i,LP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function kP(t){return Object.prototype.toString.call(t)}function gi(t){return t===10||t===13}function ua(t){return t===9||t===32}function Mr(t){return t===9||t===32||t===10||t===13}function ko(t){return t===44||t===91||t===93||t===123||t===125}function $k(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function zk(t){return t===120?2:t===117?4:t===85?8:0}function Xk(t){return 48<=t&&t<=57?t-48:-1}function MP(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Qk(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var FP=new Array(256),VP=new Array(256);for(fa=0;fa<256;fa++)FP[fa]=MP(fa)?1:0,VP[fa]=MP(fa);var fa;function Jk(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||xP,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function qP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=qL(r),new Er(e,r)}function fe(t,e){throw qP(t,e)}function bf(t,e){t.onWarning&&t.onWarning.call(null,qP(t,e))}var BP={YAML:function(e,r,n){var i,s,a;e.version!==null&&fe(e,"duplication of %YAML directive"),n.length!==1&&fe(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&fe(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),a=parseInt(i[2],10),s!==1&&fe(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&bf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&fe(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],DP.test(i)||fe(e,"ill-formed tag handle (first argument) of the TAG directive"),Ns.call(e.tagMap,i)&&fe(e,'there is a previously declared suffix for "'+i+'" tag handle'),LP.test(s)||fe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{fe(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function vs(t,e,r,n){var i,s,a,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,s=o.length;i<s;i+=1)a=o.charCodeAt(i),a===9||32<=a&&a<=1114111||fe(t,"expected valid JSON character");else Hk.test(o)&&fe(t,"the stream contains non-printable characters");t.result+=o}}function jP(t,e,r,n){var i,s,a,o;for(Ht.isObject(r)||fe(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,o=i.length;a<o;a+=1)s=i[a],Ns.call(e,s)||(e[s]=r[s],n[s]=!0)}function Mo(t,e,r,n,i,s,a,o,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&fe(t,"nested arrays are not supported inside keys"),typeof i=="object"&&kP(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&kP(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)jP(t,e,s[c],r);else jP(t,e,s,r);else!t.json&&!Ns.call(r,i)&&Ns.call(e,i)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,fe(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function Wm(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):fe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ft(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ua(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(gi(i))for(Wm(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&bf(t,"deficient indentation"),n}function Tf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Mr(r)))}function Hm(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ht.repeat(`
`,e-1))}function Zk(t,e,r){var n,i,s,a,o,l,c,u,f=t.kind,m=t.result,p;if(p=t.input.charCodeAt(t.position),Mr(p)||ko(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Mr(i)||r&&ko(i)))return!1;for(t.kind="scalar",t.result="",s=a=t.position,o=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Mr(i)||r&&ko(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Mr(n))break}else{if(t.position===t.lineStart&&Tf(t)||r&&ko(p))break;if(gi(p))if(l=t.line,c=t.lineStart,u=t.lineIndent,Ft(t,!1,-1),t.lineIndent>=e){o=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=c,t.lineIndent=u;break}}o&&(vs(t,s,a,!1),Hm(t,t.line-l),s=a=t.position,o=!1),ua(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return vs(t,s,a,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function e1(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(vs(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else gi(r)?(vs(t,n,i,!0),Hm(t,Ft(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Tf(t)?fe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);fe(t,"unexpected end of the stream within a single quoted scalar")}function t1(t,e){var r,n,i,s,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return vs(t,r,t.position,!0),t.position++,!0;if(o===92){if(vs(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),gi(o))Ft(t,!1,e);else if(o<256&&FP[o])t.result+=VP[o],t.position++;else if((a=zk(o))>0){for(i=a,s=0;i>0;i--)o=t.input.charCodeAt(++t.position),(a=$k(o))>=0?s=(s<<4)+a:fe(t,"expected hexadecimal character");t.result+=Qk(s),t.position++}else fe(t,"unknown escape sequence");r=n=t.position}else gi(o)?(vs(t,r,n,!0),Hm(t,Ft(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Tf(t)?fe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}fe(t,"unexpected end of the stream within a double quoted scalar")}function r1(t,e){var r=!0,n,i,s,a=t.tag,o,l=t.anchor,c,u,f,m,p,d=Object.create(null),_,P,h,y;if(y=t.input.charCodeAt(t.position),y===91)u=93,p=!1,o=[];else if(y===123)u=125,p=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),y=t.input.charCodeAt(++t.position);y!==0;){if(Ft(t,!0,e),y=t.input.charCodeAt(t.position),y===u)return t.position++,t.tag=a,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=o,!0;r?y===44&&fe(t,"expected the node content, but found ','"):fe(t,"missed comma between flow collection entries"),P=_=h=null,f=m=!1,y===63&&(c=t.input.charCodeAt(t.position+1),Mr(c)&&(f=m=!0,t.position++,Ft(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,Fo(t,e,_f,!1,!0),P=t.tag,_=t.result,Ft(t,!0,e),y=t.input.charCodeAt(t.position),(m||t.line===n)&&y===58&&(f=!0,y=t.input.charCodeAt(++t.position),Ft(t,!0,e),Fo(t,e,_f,!1,!0),h=t.result),p?Mo(t,o,d,P,_,h,n,i,s):f?o.push(Mo(t,null,d,P,_,h,n,i,s)):o.push(_),Ft(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}fe(t,"unexpected end of the stream within a flow collection")}function n1(t,e){var r,n,i=Gm,s=!1,a=!1,o=e,l=0,c=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Gm===i?i=f===43?OP:Wk:fe(t,"repeat of a chomping mode identifier");else if((u=Xk(f))>=0)u===0?fe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?fe(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(ua(f)){do f=t.input.charCodeAt(++t.position);while(ua(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!gi(f)&&f!==0)}for(;f!==0;){for(Wm(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),gi(f)){l++;continue}if(t.lineIndent<o){i===OP?t.result+=Ht.repeat(`
`,s?1+l:l):i===Gm&&s&&(t.result+=`
`);break}for(n?ua(f)?(c=!0,t.result+=Ht.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=Ht.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Ht.repeat(`
`,l):t.result+=Ht.repeat(`
`,s?1+l:l),s=!0,a=!0,l=0,r=t.position;!gi(f)&&f!==0;)f=t.input.charCodeAt(++t.position);vs(t,r,t.position,!1)}return!0}function UP(t,e){var r,n=t.tag,i=t.anchor,s=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,fe(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Mr(a))));){if(o=!0,t.position++,Ft(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,Fo(t,e,wP,!1,!0),s.push(t.result),Ft(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)fe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function i1(t,e,r){var n,i,s,a,o,l,c=t.tag,u=t.anchor,f={},m=Object.create(null),p=null,d=null,_=null,P=!1,h=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),y=t.input.charCodeAt(t.position);y!==0;){if(!P&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,fe(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(y===63||y===58)&&Mr(n))y===63?(P&&(Mo(t,f,m,p,d,null,a,o,l),p=d=_=null),h=!0,P=!0,i=!0):P?(P=!1,i=!0):fe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(a=t.line,o=t.lineStart,l=t.position,!Fo(t,r,EP,!1,!0))break;if(t.line===s){for(y=t.input.charCodeAt(t.position);ua(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),Mr(y)||fe(t,"a whitespace character is expected after the key-value separator within a block mapping"),P&&(Mo(t,f,m,p,d,null,a,o,l),p=d=_=null),h=!0,P=!1,i=!1,p=t.tag,d=t.result;else if(h)fe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(h)fe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(P&&(a=t.line,o=t.lineStart,l=t.position),Fo(t,e,yf,!0,i)&&(P?d=t.result:_=t.result),P||(Mo(t,f,m,p,d,_,a,o,l),p=d=_=null),Ft(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&y!==0)fe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return P&&Mo(t,f,m,p,d,null,a,o,l),h&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=f),h}function s1(t){var e,r=!1,n=!1,i,s,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&fe(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(s=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):fe(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Mr(a);)a===33&&(n?fe(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),DP.test(i)||fe(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Kk.test(s)&&fe(t,"tag suffix cannot contain flow indicator characters")}s&&!LP.test(s)&&fe(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{fe(t,"tag name is malformed: "+s)}return r?t.tag=s:Ns.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:fe(t,'undeclared tag handle "'+i+'"'),!0}function a1(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&fe(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Mr(r)&&!ko(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&fe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function o1(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Mr(n)&&!ko(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&fe(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Ns.call(t.anchorMap,r)||fe(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ft(t,!0,-1),!0}function Fo(t,e,r,n,i){var s,a,o,l=1,c=!1,u=!1,f,m,p,d,_,P;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=a=o=yf===r||wP===r,n&&Ft(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;s1(t)||a1(t);)Ft(t,!0,-1)?(c=!0,o=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=c||i),(l===1||yf===r)&&(_f===r||EP===r?_=e:_=e+1,P=t.position-t.lineStart,l===1?o&&(UP(t,P)||i1(t,P,_))||r1(t,_)?u=!0:(a&&n1(t,_)||e1(t,_)||t1(t,_)?u=!0:o1(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&fe(t,"alias node should not have any properties")):Zk(t,_,_f===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&UP(t,P))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&fe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(d=t.implicitTypes[f],d.resolve(t.result)){t.result=d.construct(t.result),t.tag=d.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ns.call(t.typeMap[t.kind||"fallback"],t.tag))d=t.typeMap[t.kind||"fallback"][t.tag];else for(d=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,m=p.length;f<m;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){d=p[f];break}d||fe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&d.kind!==t.kind&&fe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+d.kind+'", not "'+t.kind+'"'),d.resolve(t.result,t.tag)?(t.result=d.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):fe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function l1(t){var e=t.position,r,n,i,s=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Ft(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(s=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Mr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&fe(t,"directive name must not be less than one character in length");a!==0;){for(;ua(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!gi(a));break}if(gi(a))break;for(r=t.position;a!==0&&!Mr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&Wm(t),Ns.call(BP,n)?BP[n](t,n,i):bf(t,'unknown document directive "'+n+'"')}if(Ft(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ft(t,!0,-1)):s&&fe(t,"directives end mark is expected"),Fo(t,t.lineIndent-1,yf,!1,!0),Ft(t,!0,-1),t.checkLineBreaks&&Yk.test(t.input.slice(e,t.position))&&bf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Tf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ft(t,!0,-1));return}if(t.position<t.length-1)fe(t,"end of the stream or a document separator is expected");else return}function GP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Jk(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,fe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)l1(r);return r.documents}function c1(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=GP(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function u1(t,e){var r=GP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Er("expected a single document in the stream, but found more")}}var f1=c1,p1=u1,WP={loadAll:f1,load:p1},HP=Object.prototype.toString,YP=Object.prototype.hasOwnProperty,Ym=65279,d1=9,Gl=10,m1=13,h1=32,g1=33,_1=34,Km=35,y1=37,b1=38,T1=39,N1=42,KP=44,v1=45,Nf=58,P1=61,I1=62,S1=63,C1=64,$P=91,zP=93,R1=96,XP=123,A1=124,QP=125,gr={};gr[0]="\\0";gr[7]="\\a";gr[8]="\\b";gr[9]="\\t";gr[10]="\\n";gr[11]="\\v";gr[12]="\\f";gr[13]="\\r";gr[27]="\\e";gr[34]='\\"';gr[92]="\\\\";gr[133]="\\N";gr[160]="\\_";gr[8232]="\\L";gr[8233]="\\P";var x1=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],E1=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function w1(t,e){var r,n,i,s,a,o,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)a=n[i],o=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&YP.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[a]=o;return r}function O1(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Er("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ht.repeat("0",n-e.length)+e}var D1=1,Wl=2;function L1(t){this.schema=t.schema||xP,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ht.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=w1(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Wl:D1,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function JP(t,e){for(var r=Ht.repeat(" ",e),n=0,i=-1,s="",a,o=t.length;n<o;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=o):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(s+=r),s+=a;return s}function $m(t,e){return`
`+Ht.repeat(" ",t.indent*e)}function k1(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function vf(t){return t===h1||t===d1}function Hl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Ym||65536<=t&&t<=1114111}function ZP(t){return Hl(t)&&t!==Ym&&t!==m1&&t!==Gl}function eI(t,e,r){var n=ZP(t),i=n&&!vf(t);return(r?n:n&&t!==KP&&t!==$P&&t!==zP&&t!==XP&&t!==QP)&&t!==Km&&!(e===Nf&&!i)||ZP(e)&&!vf(e)&&t===Km||e===Nf&&i}function M1(t){return Hl(t)&&t!==Ym&&!vf(t)&&t!==v1&&t!==S1&&t!==Nf&&t!==KP&&t!==$P&&t!==zP&&t!==XP&&t!==QP&&t!==Km&&t!==b1&&t!==N1&&t!==g1&&t!==A1&&t!==P1&&t!==I1&&t!==T1&&t!==_1&&t!==y1&&t!==C1&&t!==R1}function F1(t){return!vf(t)&&t!==Nf}function Yl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function tI(t){var e=/^\n* /;return e.test(t)}var rI=1,zm=2,nI=3,iI=4,Vo=5;function V1(t,e,r,n,i,s,a,o){var l,c=0,u=null,f=!1,m=!1,p=n!==-1,d=-1,_=M1(Yl(t,0))&&F1(Yl(t,t.length-1));if(e||a)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Yl(t,l),!Hl(c))return Vo;_=_&&eI(c,u,o),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Yl(t,l),c===Gl)f=!0,p&&(m=m||l-d-1>n&&t[d+1]!==" ",d=l);else if(!Hl(c))return Vo;_=_&&eI(c,u,o),u=c}m=m||p&&l-d-1>n&&t[d+1]!==" "}return!f&&!m?_&&!a&&!i(t)?rI:s===Wl?Vo:zm:r>9&&tI(t)?Vo:a?s===Wl?Vo:zm:m?iI:nI}function q1(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Wl?'""':"''";if(!t.noCompatMode&&(x1.indexOf(e)!==-1||E1.test(e)))return t.quotingType===Wl?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),o=n||t.flowLevel>-1&&r>=t.flowLevel;function l(c){return k1(t,c)}switch(V1(e,o,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case rI:return e;case zm:return"'"+e.replace(/'/g,"''")+"'";case nI:return"|"+sI(e,t.indent)+aI(JP(e,s));case iI:return">"+sI(e,t.indent)+aI(JP(B1(e,a),s));case Vo:return'"'+j1(e)+'"';default:throw new Er("impossible error: invalid scalar style")}}()}function sI(t,e){var r=tI(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function aI(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function B1(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,oI(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",s,a;a=r.exec(t);){var o=a[1],l=a[2];s=l[0]===" ",n+=o+(!i&&!s&&l!==""?`
`:"")+oI(l,e),i=s}return n}function oI(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,a=0,o=0,l="";n=r.exec(t);)o=n.index,o-i>e&&(s=a>i?a:o,l+=`
`+t.slice(i,s),i=s+1),a=o;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}function j1(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Yl(t,i),n=gr[r],!n&&Hl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||O1(r);return e}function U1(t,e,r){var n="",i=t.tag,s,a,o;for(s=0,a=r.length;s<a;s+=1)o=r[s],t.replacer&&(o=t.replacer.call(r,String(s),o)),(ji(t,e,o,!1,!1)||typeof o=="undefined"&&ji(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function lI(t,e,r,n){var i="",s=t.tag,a,o,l;for(a=0,o=r.length;a<o;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(ji(t,e+1,l,!0,!0,!1,!0)||typeof l=="undefined"&&ji(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=$m(t,e)),t.dump&&Gl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function G1(t,e,r){var n="",i=t.tag,s=Object.keys(r),a,o,l,c,u;for(a=0,o=s.length;a<o;a+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=s[a],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),!!ji(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!ji(t,e,c,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function W1(t,e,r,n){var i="",s=t.tag,a=Object.keys(r),o,l,c,u,f,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Er("sortKeys must be a boolean or a function");for(o=0,l=a.length;o<l;o+=1)m="",(!n||i!=="")&&(m+=$m(t,e)),c=a[o],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),!!ji(t,e+1,c,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Gl===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=$m(t,e)),!!ji(t,e+1,u,!0,f)&&(t.dump&&Gl===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=s,t.dump=i||"{}"}function cI(t,e,r){var n,i,s,a,o,l;for(i=r?t.explicitTypes:t.implicitTypes,s=0,a=i.length;s<a;s+=1)if(o=i[s],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(l=t.styleMap[o.tag]||o.defaultStyle,HP.call(o.represent)==="[object Function]")n=o.represent(e,l);else if(YP.call(o.represent,l))n=o.represent[l](e,l);else throw new Er("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}function ji(t,e,r,n,i,s,a){t.tag=null,t.dump=r,cI(t,r,!1)||cI(t,r,!0);var o=HP.call(t.dump),l=n,c;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=o==="[object Object]"||o==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(r),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?(W1(t,e,t.dump,i),m&&(t.dump="&ref_"+f+t.dump)):(G1(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?lI(t,e-1,t.dump,i):lI(t,e,t.dump,i),m&&(t.dump="&ref_"+f+t.dump)):(U1(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&q1(t,t.dump,e,s,l);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Er("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function H1(t,e){var r=[],n=[],i,s;for(Xm(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function Xm(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Xm(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)Xm(t[n[i]],e,r)}function Y1(t,e){e=e||{};var r=new L1(e);r.noRefs||H1(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ji(r,0,n,!0,!0)?r.dump+`
`:""}var K1=Y1,$1={dump:K1};function Qm(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var qo=WP.load,vte=WP.loadAll,uI=$1.dump,fI=Er;var Pte=Qm("safeLoad","load"),Ite=Qm("safeLoadAll","loadAll"),Ste=Qm("safeDump","dump");var Zm=class{constructor(){this.yamlData=null}isInClassParmaeter(e){let r=null;return e instanceof Xe&&e.logicBranches.length>0&&e.logicBranches[0].head!=null?r=e.logicBranches[0].head:e instanceof q&&(r=e),r!=null&&r.fragmentPosition==1&&r.fragmentParameter!=null&&r.fragmentParameter.name.toLowerCase()=="class"}getPrefix(e){if(e.prev==null||!(e.prev instanceof je)||e.prev.content.trimRight().length!=e.prev.content.length)return"";let r=e.prev.content.split('"');if(r.length==0)return"";let n=r[r.length-1].split(" ");return n.length==0?"":n[n.length-1].trim()}getSuffix(e){if(e.next==null||!(e.next instanceof je)||e.next.content.trimLeft().length!=e.next.content.length)return"";let r=e.next.content.split('"');if(r.length==0)return"";let n=r[0].split(" ");return n.length==0?"":n[0].trim()}analyze(e){let r=e.getDocumentParser().getRenderNodes();if(e.hasFrontMatter())try{this.yamlData=qo(e.getFrontMatter())}catch{}return this.analyzeNodes(r)}analyzeNodes(e){let r=[];return e.forEach(n=>{var l;let i=[],s=[],a="",o="";if(this.isInClassParmaeter(n)){let c=[];if(n instanceof Xe){if(n.logicBranches.length==0)return;let u=n.logicBranches[0],f=n.logicBranches[n.logicBranches.length-1];if(u.head==null||f.head==null||f.head.isClosedBy==null)return;let m=f.head.isClosedBy,p=u.head;a=this.getPrefix(p),o=this.getSuffix(m),n.logicBranches.forEach(d=>{if(d.head==null||d.head.children.length!=2||!(d.head.children[0]instanceof je))return;let _=d.head.children[0].content;_.trim().length==_.length&&(c.includes(_)||c.push(_))})}else if(n instanceof q){if(n.isPaired()){r=r.concat(this.analyzeNodes(n.getStructuralChildren()));return}a=this.getPrefix(n),o=this.getSuffix(n)}if(this.yamlData!=null&&c.length==0&&a.length+o.length>0&&((l=n.getParser())==null?void 0:l.getLanguageParser()).getCreatedVariables().forEach(m=>{if(m.variableReference==null||m.variableReference.pathParts.length!=3||!(m.variableReference.pathParts[0]instanceof pr)||!(m.variableReference.pathParts[1]instanceof pr)||!(m.variableReference.pathParts[2]instanceof fi))return;let p=m.variableReference.pathParts[0],d=m.variableReference.pathParts[1];if(p.name!="view"||typeof this.yamlData[d.name]=="undefined")return;let _=this.yamlData[d.name],P=[],h=Object.keys(_),y=!0;for(let g=0;g<h.length;g++){let N=_[h[g]];if(typeof N!="string"){y=!1;break}P.push(N)}y&&P.forEach(g=>{c.includes(g)||c.push(g)})}),c.length==0&&a.length+o.length>0){let u="/";a.length>0&&(u+=a),u+="(.*)",o.length>0&&(u+=o),u+="/",s.push(u)}else c.length>0&&c.forEach(u=>{let f=`${a}${u}${o}`;i.push(f)})}else n instanceof q&&n.isPaired()&&(r=r.concat(this.analyzeNodes(n.getImmediateChildren())));(o.length>0||a.length>0)&&(i.length>0||s.length>0)&&r.push({classNames:i,patterns:s,node:n,suffix:o,prefix:a})}),r}};var Pf=Q(require("fs")),z1={checkDocument(t,e){var s;if(e.diagnostics.warnOnDynamicCssClassNames==!1)return[];let r=[],n=new Zm().analyze(t);if(n.length==0)return r;let i="";if((s=ue.instance)==null?void 0:s.hasStructure()){let a=ue.instance.getStructure().getProjectRoot(),o=[];o.push(a+"tailwind.config.js"),o.push(a+"webpack.mix.js"),o.push(a+"webpack.config.js");for(let l=0;l<o.length;l++)if(Pf.existsSync(o[l])){i=Pf.readFileSync(o[l],{encoding:"utf8"});break}}return n.forEach(a=>{let o=a.classNames.concat(a.patterns),l=M.makeSyntaxError(v.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE,a.node,`Dynamic CSS class name generation detected. Some build tools, like PurgeCSS, may not be able to find these classes. It is recommended to use full class names, or configure a class safelist.
    
Possible Classes: ${o.join(", ")}`,1),c=!0;if(i.trim().length>0){c=!1;for(let m=0;m<o.length;m++)if(i.includes(o[m])==!1){c=!0;break}}if(!c)return;let u=lt(a.node.startPosition),f=lt(a.node.endPosition);if(a.node instanceof Xe){if(a.node.logicBranches.length>0){let m=a.node.logicBranches[0],p=a.node.logicBranches[a.node.logicBranches.length-1];m.head!=null&&p.head!=null&&p.head.isClosedBy!=null&&(u=lt(m.head.startPosition),f=lt(p.head.isClosedBy.endPosition))}}else a.node instanceof q&&(u=lt(a.node.startPosition),f=lt(a.node.endPosition));u.character=u.character-a.prefix.length-1,f.character=f.character+a.suffix.length,l.lsRange={start:u,end:f},l.data=a,r.push(l)}),r}},pI=z1;var X1={checkDocument(t){let e=[];return t.hasFrontMatter()&&t.getContent().trim().length==0&&e.push(M.makeSyntaxError(v.LINT_FRONT_MATTER_EMPTY_DOCUMENT,null,'Empty document content with Front Matter will result in "[ErrorException] Undefined index: content".')),e}},dI=X1;function mI(t){let e=t.split(/\r?\n/),r=[];return e.forEach(n=>{let i=n.split("|");if(i.length==1)r.push(n);else if(i.length>1){let s=i[0];if(parseInt(s.trim()).toString()==s.trim()){let a=parseInt(s)+1;i.shift();let o=i.join("|"),l=" ".repeat(s.length-a.toString().length);r.push(l+a.toString()+"|"+o)}else r.push(n)}}),r.join(`
`)}var Q1={checkDocument(t){let e=[];if(t.hasFrontMatter()){let r=t.getFrontMatter();try{qo(r,{onWarning:n=>{let i=new Bt,s=new Bt;i.line=n.mark.line+2,i.char=n.mark.column,s.line=n.mark.line+2,s.char=n.mark.snippet.length+n.mark.column;let a={start:i,end:s},o=new M;o.errorCode=v.LINT_INVALID_FRONT_MATTER,o.level=1,o.message=mI(n.message),o.range=a,e.push(o)}})}catch(n){if(n instanceof fI){let i=new Bt,s=new Bt;i.line=n.mark.line+2,i.char=n.mark.column,s.line=n.mark.line+2,s.char=n.mark.snippet.length+n.mark.column;let a={start:i,end:s},o=new M;o.errorCode=v.LINT_INVALID_FRONT_MATTER,o.level=0,o.message=mI(n.message),o.range=a,e.push(o)}}}return e}},hI=Q1;var J1={checkDocument(t){let e=[];return t.getAllAntlersNodes().forEach(r=>{var n,i;if(r.isTagNode&&r.name!=null&&r.getTagName()=="partial"){let s=eo(r);if(s==null)return;let a=(i=(n=ue.instance)==null?void 0:n.getStructure())==null?void 0:i.findRelativeView(s);if(typeof a=="undefined"||a==null)return;a.documentUri==t.documentUri&&r.findParentOfType(["if","elseif","else"])==null&&e.push(M.makeSyntaxError(v.LINT_POSSIBLE_PARTIAL_RECURSION,r,"Possible partial recursion detected",1))}}),e}},gI=J1;var _I=[dI,hI,gI,pI];var Z1=["dump","dd","ddd"],eM={checkNode(t){let e=t.getTagName(),r=[];return Z1.includes(e)&&r.push(M.makeSyntaxError(v.LINT_DEBUG_DATA_EXPOSED,t,e+" exposes data and should be removed after debugging.",1)),t.modifiers.hasModifier("dump")&&r.push(M.makeSyntaxError(v.LINT_DEBUG_DATA_EXPOSED,t,"dump modifier exposes data and should be removed after debugging.",1)),r}},yI=eM;var tM={checkNode(t){let e=[];if(t.modifiers==null)return e;let r=[];if(t.modifiers.hasParameterModifiers())for(let n=0;n<t.modifiers.parameterModifiers.length;n++){let i=t.modifiers.parameterModifiers[n];i.refId!=null&&r.includes(i.refId)==!1&&i.modifier!=null&&i.modifier.isDeprecated&&(e.push(M.makeSyntaxError(v.LINT_DEPRECATED_MODIFIER,t.modifiers.parameterModifiers[n],eh(i.modifier),1)),r.push(i.refId))}if(t.modifiers.hasShorthandModifiers()&&t.modifierChain!=null)for(let n=0;n<t.modifierChain.modifierChain.length;n++){let i=t.modifierChain.modifierChain[n];i.refId!=null&&r.includes(i.refId)==!1&&i.modifier!=null&&i.modifier.isDeprecated&&(e.push(M.makeSyntaxError(v.LINT_DEPRECATED_MODIFIER,i,eh(i.modifier),1)),r.push(i.refId))}if(t.runtimeNodes!=null&&t.runtimeNodes.length>0)for(let n=0;n<t.runtimeNodes.length;n++){let i=t.runtimeNodes[n];if(i.modifierChain!=null)for(let s=0;s<i.modifierChain.modifierChain.length;s++){let a=i.modifierChain.modifierChain[s];a.refId!=null&&r.includes(a.refId)==!1&&a.modifier!=null&&a.modifier.isDeprecated&&(e.push(M.makeSyntaxError(v.LINT_DEPRECATED_MODIFIER,a,eh(a.modifier),1)),r.push(a.refId))}}return e}};function eh(t){return t.getDeprecatedMessage!=null?t.getDeprecatedMessage():`${t.name} is deprecated.`}var bI=tM;var rM={checkNode(t){let e=[];return t.runtimeName().includes("::")&&e.push(M.makeSyntaxError(v.LINT_DOUBLE_COLON_IN_TAG_IDENTIFIER,t,":: in tag part leads to ErrorException call_user_func() runtime exception.",1)),e}},TI=rM;var nM={checkNode(t){var i;let e=[];if(t.isClosedBy==null||t.parent==null||!(t.parent instanceof q))return e;let r=t.parent;if(r.isClosedBy==null)return e;let n=t.runtimeName();return n=="if"||n=="if:index"||n=="else"||n=="else:index"||n=="elseif"||n=="elseif:index"||n=="elseunless"||n=="elseunless:index"||((i=r.isClosedBy.startPosition)==null?void 0:i.isBefore(t.isClosedBy.endPosition))&&(e.push(M.makeSyntaxError(v.LINT_INTERLEAVED_TAG_PAIRS,t,"Closing tag cannot appear after parent closing tag.")),e.push(M.makeSyntaxError(v.LINT_INTERLEAVED_TAG_PAIRS,t.isClosedBy,"Closing tag cannot appear after parent closing tag."))),e}},If=nM;var iM={checkNode(t){let e=[];return t.modifiers!=null&&t.modifiers.hasMixedModifierStyles&&e.push(M.makeSyntaxError(v.LINT_MIXED_MODIFIERS,t,"Mixed modifier styles is not supported",0)),e}},NI=iM;var sM={checkNode(t){let e=[];if(t.modifiers==null)return e;let r=[];if(t.modifiers.hasParameterModifiers()){let n=null;for(let i=0;i<t.modifiers.parameterModifiers.length;i++){let s=t.modifiers.parameterModifiers[i];if(n==null){n=s;continue}if(n!=null&&n.modifier!=null&&s.modifier!=null){if(n.modifier.returnsType.includes("*")||s.modifier.acceptsType.includes("*"))continue;{let a=n.modifier.returnsType,o="void",l="void",c=s.modifier.acceptsType.some(u=>a.includes(u));if(a.length>0&&(o=a[a.length-1]),s.modifier.acceptsType.length>0&&(l=s.modifier.acceptsType[0]),!c){e.push(M.makeSyntaxError(v.LINT_MODIFIER_UNEXPECTED_TYPE,s,"Unexpected type supplied to modifier "+s.name+". Expected "+l+" got "+o+".",1));break}}}}}if(t.modifiers.hasShorthandModifiers()&&t.modifierChain!=null){let n=null;for(let i=0;i<t.modifierChain.modifierChain.length;i++){let s=t.modifierChain.modifierChain[i];if(n==null){n=s;continue}if(n!=null&&n.modifier!=null&&s.modifier!=null){if(n.modifier.returnsType.includes("*")||s.modifier.acceptsType.includes("*"))continue;{let a=n.modifier.returnsType,o="void",l="void",c=s.modifier.acceptsType.some(u=>a.includes(u));if(a.length>0&&(o=a[a.length-1]),s.modifier.acceptsType.length>0&&(l=s.modifier.acceptsType[0]),!c){s.refId!=null&&!r.includes(s.refId)&&(e.push(M.makeSyntaxError(v.LINT_MODIFIER_UNEXPECTED_TYPE,s,"Unexpected type supplied to modifier "+s.name+". Expected "+l+" got "+o+".",1)),r.push(s.refId));break}}}}}if(t.runtimeNodes!=null&&t.runtimeNodes.length>0)for(let n=0;n<t.runtimeNodes.length;n++){let i=t.runtimeNodes[n],s=null;if(i.modifierChain!=null)for(let a=0;a<i.modifierChain.modifierChain.length;a++){let o=i.modifierChain.modifierChain[a];if(s==null){s=o;continue}if(s!=null&&s.modifier!=null&&o.modifier!=null){if(s.modifier.returnsType.includes("*")||o.modifier.acceptsType.includes("*"))continue;{let l=s.modifier.returnsType,c="void",u="void",f=o.modifier.acceptsType.some(m=>l.includes(m));if(l.length>0&&(c=l[l.length-1]),o.modifier.acceptsType.length>0&&(u=o.modifier.acceptsType[0]),!f){o.refId!=null&&r.includes(o.refId)==!1&&(e.push(M.makeSyntaxError(v.LINT_MODIFIER_UNEXPECTED_TYPE,o,"Unexpected type supplied to modifier "+o.name+". Expected "+u+" got "+c+".",1)),r.push(o.refId));break}}}}}return e}},vI=sM;var PI={warnUnknownParameters:!1};var th=class{static validateInteger(e){return parseInt(e).toString()!==e?{isValid:!1,message:'"'+e+'" is not a valid integer.'}:{isValid:!0,message:""}}static validateBoolean(e){return e=="true"||e=="false"?{isValid:!0,message:""}:{isValid:!1,message:'"'+e+'" is not a valid value. Expecting true/false.'}}static validateParameters(e){var n,i,s,a,o;let r=[];if(e.isTagNode&&((n=Ie.instance)==null?void 0:n.isKnownTag(e.runtimeName()))){let l=(i=Ie.instance)==null?void 0:i.findTag(e.runtimeName());if(e.hasParameters)for(let c=0;c<e.parameters.length;c++){let u=e.parameters[c],f=null,m=!1,p=u.name.trim();if(!u.isVariableReference)if(p=cn(p,":"),((s=Ie.instance)==null?void 0:s.canResolveDynamicParameter(e.runtimeName()))&&typeof l.resolveDynamicParameter!="undefined"&&l.resolveDynamicParameter!=null?(f=l.resolveDynamicParameter(e,p),m=!0):f=(a=Ie.instance)==null?void 0:a.getParameter(e.runtimeName(),p),m&&f==null&&(f=(o=Ie.instance)==null?void 0:o.getParameter(e.runtimeName(),p)),f==null){if(PI.warnUnknownParameters){let d="";if(l.suggestAlternativeParams!=null){let P=l.suggestAlternativeParams(p);P.length==1?d='. Did you mean "'+P[0]+'"?':P.length>1&&(d=". Try one of the following: "+P.join(", "))}let _='Unknown parameter name: "'+p+'"'+d;r.push(M.makeSyntaxError(v.LINT_UNKNOWN_PARAMETER,e,_,1))}}else if(f.validate!=null){let d=f.validate(e,u);d.length>0&&d.forEach(_=>{r.push(M.makeSyntaxError(v.LINT_GENERAL_INVALID_PARAMETER_CONTENTS,u,_.message,1))})}else{if(u.hasInterpolations())continue;for(let d=0;d<f.expectsTypes.length;d++){let _=f.expectsTypes[d];if(_=="integer"){let P=this.validateInteger(u.value);P.isValid||r.push(M.makeSyntaxError(v.LINT_PARAMETER_CONTENT_INVALID_INTEGER,u,P.message,1))}else if(_=="boolean"){let P=this.validateBoolean(u.value);if(f.name=="paginate"){if(u.value=="true"||u.value=="false")continue;if(parseInt(u.value).toString()!=u.value){let h='Unexpected "'+u.value+'". Expecting a numeric value, or true/false.';r.push(M.makeSyntaxError(v.LINT_PAGINATE_INVALID_VALUE,u,h,0))}}else P.isValid||r.push(M.makeSyntaxError(v.LINT_PARAMETER_CONTENT_INVALID_BOOLEAN,u,P.message,1))}}}}}return r}};var aM={checkNode(t,e){return e.diagnostics.validateTagParameters==!1?[]:th.validateParameters(t)}},II=aM;var oM={checkNode(t){var r,n;let e=[];if(t.isTagNode&&t.name!=null&&t.getTagName()=="partial"){let i=eo(t);if(i==null)return e;let s=(n=(r=ue.instance)==null?void 0:r.getStructure())==null?void 0:n.findRelativeView(i);if(typeof s=="undefined"||s==null)return e;s.injectsParameters.length>0&&s.injectsParameters.forEach(a=>{a.isRequired&&!t.hasParameter(a.name)&&e.push(M.makeSyntaxError(v.LINT_MISSING_REQUIRED_PARAMETER,t,"Missing required parameter: "+a.name,0))})}return e}},SI=oM;var lM={checkNode(t){let e=[];return t.isTagNode&&t.name!=null&&t.getTagName()=="relate"&&e.push(M.makeSyntaxError(v.LINT_REMOVE_RELATE_TAG,t,"The `relate` tag is not necessary here, and can be removed.",1)),e}},CI=lM;var cM={checkNode(t){let e=[];if(Bi.languageVersion=="runtime")return[];if(t.isClosedBy!=null&&t.modifierChain!=null){let r=t.content.trim(),n=t.isClosedBy.content.trim(),i="/"+r;n!=i&&(e.push(M.makeSyntaxError(v.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH,t,"Closing tags must match exactly when using shorthand modifiers in tag pairs.",0)),e.push(M.makeSyntaxError(v.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH,t.isClosedBy,'Closing tags must match exactly when using shorthand modifiers in tag pairs. Expecting: "'+i+'".',0)))}return e}},RI=cM;var WI=Q(bh()),HM={checkNode(t){var i,s,a;let e=[];if(t.isOpenedBy!=null||!((i=ue.instance)==null?void 0:i.hasStructure()))return e;let r=ue.instance.getStructure().getStatamicVersion();if(r==null||r.trim().length==0||!((s=Ie.instance)==null?void 0:s.isKnownTag(t.runtimeName())))return e;let n=(a=Ie.instance)==null?void 0:a.findTag(t.runtimeName());if((n==null?void 0:n.introducedIn)==null)return e;try{WI.lt(r,n.introducedIn)&&e.push(M.makeSyntaxError(v.LINT_VERSION_NOT_COMPATIBLE,t,t.runtimeName()+" requires at least Statamic "+n.introducedIn+". Current project version: "+r,1))}catch{}return e}},HI=HM;var YM={checkNode(t){let e=[];return t.isTagNode&&t.getTagName()=="set"&&e.push(M.makeSyntaxError(v.LINT_SET_PRODUCES_RUNTIME_ERROR,t,'`set` tag will produce "array_merge(): Expected parameter 1 to be an array, object given" runtime exception.')),e}},YI=YM;var KM=[yI,NI,vI,bI,TI,CI,YI,RI,HI,If,SI,II],KI=KM;var Is=class{constructor(){this.fileDiagnostics=new Map;this.handlers=[];this.docHandlers=[]}registerHandler(e){this.handlers.push(e)}registerDocumentHandler(e){this.docHandlers.push(e)}registerDocumentHandlers(e){for(let r=0;r<e.length;r++)this.registerDocumentHandler(e[r])}registerHandlers(e){for(let r=0;r<e.length;r++)this.registerHandler(e[r])}registerCoreHandlers(){this.registerHandlers(KI),this.registerDocumentHandlers(_I)}hasDiagnosticsIssues(e){return this.fileDiagnostics.has(e)==!1?!1:this.fileDiagnostics.get(e).length>0}registerDiagnostics(e,r){this.fileDiagnostics.set(e,r)}clearIssues(e){this.fileDiagnostics.set(e,[])}getDiagnostics(e){return this.hasDiagnosticsIssues(e)?this.fileDiagnostics.get(e):[]}checkDocument(e){let r=[],n=Gi();return this.docHandlers.forEach(i=>{i.checkDocument(e,n).forEach(s=>{r.push(s)})}),r}checkNode(e){let r=[];if(e.isComment)return r;let n=Gi();return this.handlers.forEach(i=>{i.checkNode(e,n).forEach(s=>{r.push(s)})}),r}getAllDiagnostics(){let e=[];return this.fileDiagnostics.forEach((r,n)=>{for(let i=0;i<r.length;i++)e.push(r[i])}),e}};Is.instance=null;(typeof Is.instance=="undefined"||Is.instance==null)&&(Is.instance=new Is,Is.instance.registerCoreHandlers());var tn=Is;var nS=Q(zt());var Ho=Q(zt());var zM=Th();function Wi(t){return t.split("\\").join("/")}function zI(t){let e=zM(decodeURIComponent(t));return Wi(e)}var XI=Q(require("fs")),QI=Q(require("path"));var vh=class{constructor(){this.activeRequest=null}getName(e){return"Extract to Partial"}canHandle(e){return e.selectedText.trim().length>0}refactor(e){this.activeRequest=e,vh.currentAction=this;let r=this.getName(e);return[Ho.CodeAction.create(r+"...",Ho.Command.create(r,"antlers.extractToPartial",e.documentUri),Ho.CodeActionKind.RefactorExtract)]}completeRefactor(e){var n;let r=(n=ue.instance)==null?void 0:n.getStructure();if(r!=null&&this.activeRequest!=null){let i=Wi(r.getViewPath()),s=Wi(e.fsPath);if(s.startsWith(i)){XI.writeFileSync(e.fsPath,this.activeRequest.selectedText);let a=s.substring(i.length),o=QI.basename(s);o.startsWith("_")&&(o=o.substr(1)),a=a.substr(0,a.length-o.length),o.endsWith(".antlers.html")?o=o.substring(0,o.length-13):o.endsWith(".antlers.xml")||o.endsWith("antlers.php")?o=o.substring(0,o.length-12):o.endsWith(".blade.php")?o=o.substring(0,o.length-10):o.endsWith(".html")&&(o=o.substring(0,o.length-5)),a.length>1&&a.endsWith("/")==!1&&(a=a+"/");let l="{{ partial:"+a+o+" }}",c={range:this.activeRequest.actionParams.range,newText:l},u={changes:{[this.activeRequest.actionParams.textDocument.uri]:[c]}};Ph(u)}}}},Nh=vh;Nh.currentAction=null;var Ql=Nh;var JI=Q(zt());var Mf=class{static isFlatCondition(e){var i;if(e.chain.length>1&&((i=e.logicBranches[1].head)==null?void 0:i.getTagName())!="else")return!1;let r=e.logicBranches[0].nodes,n=!1;for(let s=0;s<r.length;s++)if(r[s]instanceof Xe){n=!0;break}if(n)for(let s=0;s<r.length;s++){let a=r[s];if(a instanceof je&&a.content.trim().length!=0)return!1}for(let s=0;s<r.length;s++){let a=r[s];if(a instanceof Xe&&!Mf.isFlatCondition(a)||a instanceof q&&!Xt.isConditionalStructure(a)&&a.isClosingTag)return!1}return!0}static getCleanChildren(e){let r=[],n=[];for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i];if(s.startPosition==null)break;if(!n.includes(s.startPosition.index))s instanceof je?s.content.trim().length>0&&r.push(s):r.push(s),n.push(s.startPosition.index);else break}return r.pop(),r}static unwrapFlattenedConditions(e){let r={body:[],conditions:[]};return e.logicBranches.forEach(n=>{if(n.head==null)return;r.conditions.push(n.head);let i=this.getCleanChildren(n);if(i.length==1&&i[0]instanceof Xe){let s=this.unwrapFlattenedConditions(i[0]);r.conditions=r.conditions.concat(s.conditions),r.body=r.body.concat(s.body)}else i.length==1?r.body.push(i[0]):i.forEach(s=>{if(s instanceof Xe){let a=this.unwrapFlattenedConditions(s);r.conditions=r.conditions.concat(a.conditions),r.body=r.body.concat(a.body)}else{if(s instanceof q&&Xt.isConditionalStructure(s))return;r.body.push(s)}})}),r}},Ff=Mf;var Vf=class{constructor(e){this.refactoredStyle=0;this.params=e}isSimpleElse(e){var r;return e.logicBranches.length==2&&((r=e.logicBranches[1].head)==null?void 0:r.getTagName())=="else"}getRefactorMode(){return this.refactoredStyle}refactor(e){let r="";return this.params.refactorNested?(r=this.createdNestedGatekeeper(e),this.refactoredStyle=1):e.logicBranches.length==1?(r=this.createGatekeeper(e),this.refactoredStyle=1):this.isSimpleElse(e)&&(r=this.createTernary(e),this.refactoredStyle=0),this.params.isInInterpolation?"{"+r+"}":"{{ "+r+" }}"}createdNestedGatekeeper(e){let r=Ff.unwrapFlattenedConditions(e),n=[],i=[];r.conditions.forEach(o=>{let l=o.getContent().trim();o.runtimeNodes.length>1&&(l.startsWith("(")==!1&&(l="("+l),l.endsWith(")")==!1&&(l=l+")"),this.shouldAddEndingParenthesis(o)&&(l+=")")),n.push(l)}),r.body.forEach(o=>{o instanceof q?i.push(o.getNodeDocumentText()):o instanceof je&&i.push(o.content)}),i.length>0&&(i[0]=i[0].trimLeft(),i[i.length-1]=i[i.length-1].trimRight());let s=n.join(" && "),a=i.join("");return"("+s+") ?= "+this.convertToString(a)}convertToString(e){let r=e;return r=It(r,"{{","{"),r=It(r,"}}","}"),"'"+It(r,"'","\\'")+"'"}createTernary(e){var l;let r=e.logicBranches[0].head,n=e.logicBranches[1].head,i=this.convertToString((l=r.getInnerDocumentText())!=null?l:""),s=this.convertToString(n.getInnerDocumentText()),o=r.getContent().trim();return o.startsWith("(")==!1&&(o="("+o),o.endsWith(")")==!1&&(o=o+")"),this.shouldAddEndingParenthesis(r)&&(o+=")"),o+" ? "+i+" : "+s}shouldAddEndingParenthesis(e){return e.originalNode==null?!1:e.originalNode.getTagName()=="unless"}createGatekeeper(e){var a;let r=e.logicBranches[0].head,n=(a=r.getInnerDocumentText())!=null?a:"",i=this.convertToString(n),s="";return r.runtimeNodes.length>1?s="("+r.getContent().trim()+")":s=r.getContent(),s.trim()+" ?= "+i}};var ZI=class{constructor(){this.condition=null;this.isNestedConditions=!1;this.refactorStyle=0}getName(e){return this.refactorStyle==1?"Convert Condition to Gatekeeper operator":"Convert Condition to Ternary"}canHandle(e){if(e.selectedDocument.hasUnclosedStructures()||e.selectedDocument.hasUnclosedStructures()||e.selectedDocument.errors.hasAny())return!1;let r=e.selectedDocument.getAllAntlersNodes(),n=new To,i=0,s=0;for(let o=0;o<r.length;o++)if(r[o].isClosingTag){if(Xt.isConditionalStructure(r[o])){s+=1;continue}if(i+=1,i>1)return!1}let a=n.associate(r,e.ownerDocument.getDocumentParser());if(a.length==1&&a[0]instanceof Xe){if(this.condition=a[0],this.isNestedConditions=!1,s>2){if(!Ff.isFlatCondition(this.condition))return this.isNestedConditions=!1,!1;this.isNestedConditions=!0}return!0}return!1}refactor(e){if(this.condition==null)return[];let r=[],n=!1;e.params.currentNode!=null&&e.params.currentNode.getTagName()!="if"&&(n=!0);let i=new Vf({isInInterpolation:n,refactorNested:this.isNestedConditions}),s=i.refactor(this.condition);this.refactorStyle=i.getRefactorMode();let a={range:e.actionParams.range,newText:s};return r.push({title:this.getName(e),kind:JI.CodeActionKind.RefactorRewrite,edit:{changes:{[e.documentUri]:[a]}}}),r}},eS=ZI;var tS=class{static getRefactors(e){let r=[],n=[];return n.push(new Ql),n.push(new eS),n.forEach(i=>{i.canHandle(e)&&i.refactor(e).forEach(s=>{r.push(s)})}),r}},rS=tS;var Ih=[];function iS(t){Ih=t}function sS(t){var f,m;if(((f=ue.instance)==null?void 0:f.hasStructure())==!1)return[];Se.refreshDocumentState();let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)==!1)return[];if(!Zn.has(e))return[];let r=t.range.start,n=kr(r,e,Bi.showGeneralSnippetCompletions);if(n==null)return[];let i=Zn.get(e),s=i.getText(t.range),a=gt.fromText(s.trim()),o={params:n,selectedText:s,selectedDocument:a,ownerDocument:Se.getDocument(e),documentUri:t.textDocument.uri,actionParams:t},l=rS.getRefactors(o),c=(m=tn.instance)==null?void 0:m.getDiagnostics(e),u=[];return c!=null&&c.length>0&&(c==null||c.forEach(p=>{var d,_,P,h,y,g;if(p.errorCode==v.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE){let N=p.data;if(p.node instanceof Xe){let S="";for(let z=0;z<p.node.logicBranches.length;z++){let X=p.node.logicBranches[z];z==p.node.logicBranches.length-1?(S+=`{{${(d=X.head)==null?void 0:d.getTrueNode().sourceContent}}}`,S+=`${N.prefix}${(_=X.head)==null?void 0:_.documentText}${N.suffix}`,S+=`{{${(h=(P=X.head)==null?void 0:P.isClosedBy)==null?void 0:h.getTrueNode().sourceContent}}}`):(S+=`{{${(y=X.head)==null?void 0:y.getTrueNode().sourceContent}}}`,S+=`${N.prefix}${(g=X.head)==null?void 0:g.documentText}${N.suffix}`)}let V={range:p.lsRange,newText:S},O=[];Ih.length>0&&Ih.forEach(z=>{z.range==p.lsRange&&O.push(z)});let Y="";N.suffix.length>0&&N.prefix.length>0?Y=`${N.prefix}...${N.suffix}`:N.suffix.length>0?Y=`...${N.suffix}`:N.prefix.length>0&&(Y=`${N.prefix}...`),N.classNames.length==1&&N.patterns.length==0&&(Y=N.classNames[0]),l.push({title:"Dynamic CSS Class: "+Y,kind:nS.CodeActionKind.QuickFix,diagnostics:O,edit:{changes:{[t.textDocument.uri]:[V]}}})}}})),l}function aS(t,e){let r=decodeURIComponent(t);Se.createOrUpdate(r,e)}function Sh(t){let e=decodeURIComponent(t.uri);Se.createOrUpdate(decodeURIComponent(t.uri),t.getText()),Zn.set(e,t)}async function Ch(t,e){var i;let r=decodeURIComponent(t.uri);Se.createOrUpdate(r,t.getText());let n=[];if(Se.hasDocument(r)){let s=Se.getDocument(r);if(gf(s.errors.all()).forEach(a=>{n.push(a)}),(i=tn.instance)==null?void 0:i.hasDiagnosticsIssues(r)){let a=tn.instance.getDiagnostics(r);gf(a).forEach(o=>{n.push(o)})}}iS(n),e.sendDiagnostics({uri:t.uri,diagnostics:n}),XM(t.uri,e)}function XM(t,e){var r,n,i;if((r=ue.instance)==null?void 0:r.hasStructure()){let s=ue.instance.getStructure().getViews();for(let a=0;a<s.length;a++)if(s[a].documentUri!=t){let o=decodeURIComponent(s[a].documentUri);if((n=tn.instance)==null?void 0:n.hasDiagnosticsIssues(o)){let l=[],c=(i=tn.instance)==null?void 0:i.getDiagnostics(o);gf(c).forEach(u=>{l.push(u)}),e.sendDiagnostics({uri:s[a].originalDocumentUri,diagnostics:l})}}}}var cC=Q(fr());var Jl=null;function Rh(t){Jl=t}var Ah=class{constructor(){this.htmlFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.preFormatter=null;this.transformOptions=null;this.createExtraVirtualStructures=!1}withTransformOptions(e){return this.transformOptions=e,this}withPreFormatter(e){return this.preFormatter=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}formatText(e,r){let n=new gt;return n.getDocumentParser().withChildDocuments(!0),n.loadString(e),this.formatDocument(n,r)}formatDocument(e,r){if(!e.isFormattingEnabled())return e.getOriginalContent();if(this.preFormatter!=null){let a=this.preFormatter(e);if(a!=null)return a}let n=e.getAllAntlersNodes();for(let a=0;a<n.length;a++)if(If.checkNode(n[a],r).length>0)return e.getOriginalContent();if(this.htmlFormatter==null||e.isValid()==!1)return e.getOriginalContent();e.transform().produceExtraStructuralPairs(this.createExtraVirtualStructures).withHtmlFormatter(this.htmlFormatter).withPhpFormatter(this.phpFormatter).withYamlFormatter(this.yamlFormatter),this.transformOptions!=null&&e.transform().withOptions(this.transformOptions);let i=e.transform().toStructure(),s=this.htmlFormatter(i);return e.transform().fromStructure(s)}};var xh=class{static formatFrontMatter(e){try{let r=qo(e,{}),n=uI(r,{indent:2,noArrayIndent:!1,condenseFlow:!1,forceQuotes:!0,noRefs:!0,skipInvalid:!0});return n.endsWith(`
`)&&(n=n.trimEnd()),n}catch{return e}}};function Fr(t,e,r){if(t&&t.hasOwnProperty(e)){let n=t[e];if(n!==null)return n}return r}function oS(t,e,r){let n=Fr(t,e,null);return typeof n=="string"?n.length>0?n.split(",").map(i=>i.trim().toLowerCase()):[]:r}var eV=lC().html,uc=class extends Ah{constructor(e){super();this.options=e,this.withHtmlFormatter(this.formatHtml).withYamlFormatter(xh.formatFrontMatter).withTransformOptions({endNewline:Fr(e.htmlOptions,"endWithNewline",!1),maxAntlersStatementsPerLine:e.maxStatementsPerLine,newlinesAfterFrontMatter:1,tabSize:e.tabSize})}formatHtml(e){var r;return eV(e,{indent_size:this.options.tabSize,indent_char:this.options.insertSpaces?" ":"	",indent_empty_lines:Fr(this.options.htmlOptions,"indentEmptyLines",!1),wrap_line_length:Fr(this.options.htmlOptions,"wrapLineLength",120),unformatted:(r=oS(this.options.htmlOptions,"unformatted",[]))!=null?r:[],content_unformatted:[],indent_inner_html:Fr(this.options.htmlOptions,"indentInnerHtml",!1),preserve_newlines:Fr(this.options.htmlOptions,"preserveNewLines",!0),max_preserve_newlines:Fr(this.options.htmlOptions,"maxPreserveNewLines",32786),indent_handlebars:Fr(this.options.htmlOptions,"indentHandlebars",!1),end_with_newline:Fr(this.options.htmlOptions,"endWithNewline",!1),extra_liners:[],wrap_attributes:Fr(this.options.htmlOptions,"wrapAttributes","auto"),wrap_attributes_indent_size:Fr(this.options.htmlOptions,"wrapAttributesIndentSize",void 0),eol:`
`,indent_scripts:Fr(this.options.htmlOptions,"indentScripts","normal"),unformatted_content_delimiter:Fr(this.options.htmlOptions,"unformattedContentDelimiter","")})}};function uC(t){let e=Gi(),r=decodeURIComponent(t.textDocument.uri),n=Jl.format;if(e.formatterIgnoreExtensions.length>0){for(let i=0;i<e.formatterIgnoreExtensions.length;i++)if(r.toLowerCase().endsWith(e.formatterIgnoreExtensions[i].toLowerCase()))return null}if(Se.hasDocument(r)&&Zn.has(r)){let i=Zn.get(r),s=i.getText(),a=gt.fromText(s),o={htmlOptions:n,formatFrontMatter:e.formatFrontMatter,insertSpaces:t.options.insertSpaces,tabSize:t.options.tabSize,maxStatementsPerLine:3,formatExtensions:[]},l=new uc(o),c=l.formatDocument(a,Gi()),u=i.positionAt(s.length);return[{range:{start:cC.Position.create(0,0),end:u},newText:c}]}return null}var fC=Q(fr());var tV={activeSignature:null,activeParameter:null,signatures:[]};function pC(t){var n;let e=decodeURIComponent(t.textDocument.uri),r=kr(t.position,e);if(r!=null&&r.context!=null&&r.context.modifierContext!=null&&((n=Me.instance)==null?void 0:n.hasModifier(r.context.modifierContext.name))){let i=r.context.modifierContext.name,s=Me.instance.getModifier(i),a=[];s!=null&&s.parameters.forEach(l=>{a.push({label:l.name,documentation:l.description})});let o=r.context.modifierContext.activeValueIndex;return o>a.length&&(o=a.length-1),(o<0||a.length==0)&&(o=0),{signatures:[{label:s.name,documentation:{kind:fC.MarkupKind.Markdown,value:s.description},parameters:a,activeParameter:o}],activeParameter:o,activeSignature:0}}return tV}var _a=Q(ot());var Qh=class{static getTypedHeader(e,r){let n="";return r.length>0&&(n=r.join(", ")),"**"+e+"** `"+n+"`  \n"}static formatParameterHover(e){let r=this.getTypedHeader(e.name,e.expectsTypes);if(r+=e.description,e.documentationLink!=null&&e.documentationLink.trim().length>0){r+=`  

`;let n="Documentation Reference]";e.docLinkName!=null&&e.docLinkName.trim().length>0&&(n=e.docLinkName.trim()),r+="["+n+"]("+e.documentationLink+")"}return{contents:{kind:_a.MarkupKind.Markdown,value:r}}}static formatModifierHover(e){let r=this.getTypedHeader(e.name,e.acceptsType),n="";if(e.parameters.length>0){let s=[];e.parameters.forEach(a=>{s.push("$"+a.name)}),n=s.join(", ")}let i="";if(e.returnsType.length==1)i=e.returnsType[0];else{let s=[];e.returnsType.forEach(a=>{s.push(a)}),i=s.join(", ")}return r+=e.description+`
`,r+="```js\n",r+="function "+e.name+"("+n+"):"+i,r+="\n```",e.docLink!=null&&e.docLink.trim().length>0&&(r+=`  

`,r+="[Documentation Reference]("+e.docLink+")"),{contents:{kind:_a.MarkupKind.Markdown,value:r}}}static formatBlueprintHover(e,r){let n="";return e.displayName!=null&&e.displayName.trim().length>0?n="**"+e.displayName+"** ("+e.name+`)

`:n="**"+e.name+`**

`,e.instructionText!=null&&(n+=e.instructionText+`

`),n+="**Blueprint**: "+e.blueprintName+`

`,n+="**Type**: "+e.type,e.maxItems!=null&&(n+=`

**Max Items**: `+e.maxItems),r!=null&&(n+=`

**From**: `+r.runtimeName()),{contents:{kind:_a.MarkupKind.Markdown,value:n}}}static formatScopeVariableHover(e){if(e.sourceField!=null)return this.formatBlueprintHover(e.sourceField,e.introducedBy);let r="**"+e.name+`**

`;return r+="**Type**: "+e.dataType,e.introducedBy!=null&&(r+=`
**From**: `+e.introducedBy.runtimeName()),{contents:{kind:_a.MarkupKind.Markdown,value:r}}}static getHover(e){var n,i,s,a,o,l,c,u,f;if(e==null||e.nodesInScope.length==0)return null;let r=e.nodesInScope[e.nodesInScope.length-1];if(e.context!=null&&e.context.node!=null&&(r=e.context.node),r!=null){if((n=Ie.instance)==null?void 0:n.isKnownTag(r.runtimeName())){let _=(i=Ie.instance)==null?void 0:i.findTag(r.runtimeName());if(e.context!=null&&e.context.isCursorInIdentifier&&typeof(_==null?void 0:_.resolveDocumentation)!="undefined"){let P=_.resolveDocumentation(e);if(P.trim().length>0)return{contents:{kind:_a.MarkupKind.Markdown,value:P},range:{start:lt(r.startPosition),end:lt(r.endPosition)}}}if(_!=null&&((a=(s=e.context)==null?void 0:s.parameterContext)==null?void 0:a.parameter)!=null){let P=e.context.parameterContext.parameter,h=Ie.instance.getParameter(_.tagName,P.name);if(h!=null){if(typeof h.providesDocumentation!="undefined"){let y=h.providesDocumentation(e);if(y.trim().length>0)return{contents:{kind:_a.MarkupKind.Markdown,value:y},range:{start:lt(r.startPosition),end:lt(r.endPosition)}}}return this.formatParameterHover(h)}else if(P.isModifierParameter&&P.modifier!=null)return this.formatModifierHover(P.modifier)}}if(((o=e.context)==null?void 0:o.parameterContext)!=null&&((c=(l=e.context)==null?void 0:l.parameterContext.parameter)==null?void 0:c.modifier)!=null)return this.formatModifierHover(e.context.parameterContext.parameter.modifier);if(((u=e.context)==null?void 0:u.modifierContext)!=null){let _=(f=Me.instance)==null?void 0:f.getModifier(e.context.modifierContext.name);if(_!=null)return this.formatModifierHover(_)}let m=e.position.line+1,p=e.position.character+1,d=e.antlersDocument.cursor.position(m,p);return r.scopeVariable!=null&&d!=null&&d.isWithin(r.startPosition,r.endPosition)?this.formatScopeVariableHover(r.scopeVariable):null}return null}};function dC(t){var n;if(((n=ue.instance)==null?void 0:n.hasStructure())==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)==!1)return null;let r=kr(t.position,e);return Qh.getHover(r)}var Jh=class{static findLocations(e,r){if(e==null||e.nodesInScope.length==0)return null;let n=e.nodesInScope[e.nodesInScope.length-1];if(e.context!=null&&e.context.node!=null&&(n=e.context.node),n!=null&&n.scopeVariable!=null&&n.scopeVariable.introducedBy!=null){let i=[];return i.push({uri:r.textDocument.uri,range:{start:lt(n.scopeVariable.introducedBy.startPosition),end:lt(n.scopeVariable.introducedBy.endPosition)}}),i}return null}};function mC(t){var n;if(((n=ue.instance)==null?void 0:n.hasStructure())==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)==!1)return null;let r=kr(t.position,e);return Jh.findLocations(r,t)}var hC=Q(zt());var zf=new Map,Xf=new Map;function Zh(){let t={types:["comment","string","keyword","number","regexp","operator","namespace","type","struct","class","interface","enum","typeParameter","function","method","macro","variable","parameter","property","label","antlersAttribute"],modifiers:["declaration","documentation","readonly","static","abstract","deprecated","modification","async"]};return t.types.forEach((e,r)=>zf.set(e,r)),t.modifiers.forEach((e,r)=>Xf.set(e,r)),{legend:t,async getSemanticTokens(e,r){let n=decodeURIComponent(e.uri),i=new hC.SemanticTokensBuilder,s=[];if(Se.hasDocument(n)){let a=Se.getDocument(n);a.nodes.getAllRuntimeNodes().forEach(p=>{p instanceof Ut&&s.push(p)});let l=new Map;s.forEach(p=>{var d;p.startPosition!=null&&(l.has(p.startPosition.line)||l.set(p.startPosition.line,[]),(d=l.get(p.startPosition.line))==null||d.push(p))});let c=[];Array.from(l.keys()).sort((p,d)=>p-d).forEach(p=>{l.get(p).sort((P,h)=>{var y,g,N,S;return((g=(y=P.startPosition)==null?void 0:y.char)!=null?g:0)-((S=(N=h.startPosition)==null?void 0:N.char)!=null?S:0)}).forEach(P=>{c.push(P)})}),c.forEach(p=>{p instanceof Ut&&p.startPosition!=null&&p.endPosition!=null&&i.push(p.startPosition.line-1,p.startPosition.char,p.endPosition.char-p.startPosition.char,_C("function"),gC([]))}),a.nodes.getAllParameterNodes().forEach(p=>{p.namePosition!=null&&p.namePosition.start!=null&&p.namePosition.end!=null&&i.push(p.namePosition.start.line-1,p.namePosition.start.char-1,p.namePosition.end.char-p.namePosition.start.char,_C("antlersAttribute"),gC([]))})}return i.build().data}}}function gC(t){let e=0;for(let r=0;r<t.length;r++){let n=t[r];Xf.has(n)?e=e|1<<Xf.get(n):n==="notInLegend"&&(e=e|1<<Xf.size+2)}return e}function _C(t){return zf.has(t)?zf.get(t):t==="notInLegend"?zf.size+2:0}var Qf=Q(zt());function yC(t){let e=[];return t.forEach(r=>{if(r.isComment||r.isClosingTag&&!r.isConditionNode||r.isConditionNode&&r.name!=null&&r.isClosingTag&&(r.name.name=="if"||r.name.name=="unless"))return;let n=ca(r),i=[];if(r.children.length>0){let c=r.getStructuralChildren();c.length>0&&(i=yC(c))}let s=Qf.SymbolKind.Field;r.isTagNode&&(s=Qf.SymbolKind.Class);let a=r.getNameContent().trim(),o=r.getContent().trim(),l=a+" "+o;a==o&&(l=o),l=r.sourceContent,r.name!=null&&r.name.name=="partial"&&(s=Qf.SymbolKind.File),e.push({range:n,kind:s,name:l,selectionRange:n,children:i})}),e}function bC(t){let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)){let r=Se.getDocument(e),n=r.nodes.getStructuralNodes();return yC(n)}return[]}var eg=class{static getDocumentLinks(e){var n,i,s;let r=[];if((n=ue.instance)==null?void 0:n.hasStructure()){let a=(s=(i=On.instance)==null?void 0:i.getPartialReferences(e))!=null?s:[];for(let o=0;o<a.length;o++){let l=a[o];if(l.hasMethodPart()){let c=ue.instance.getStructure().findRelativeView(l.getMethodNameValue());if(c!=null){let u=lt(l.nameEndsOn);r.push({range:{start:lt(l.startPosition),end:{character:u.character-2,line:u.line}},tooltip:"Partial: "+c.displayName,target:decodeURIComponent(c.documentUri)})}}}}return r}};var tr=Q(require("path")),Vr=Q(require("fs")),WC=require("path");var bi=Q(require("fs")),TC=Q(bh());function rV(t){let e=JSON.parse(bi.readFileSync(t,{encoding:"utf8"}));return typeof e.extra!="undefined"&&typeof e.extra.statamic!="undefined"}var tg=class{static getInstalledPackages(e,r,n){let i=[];if(bi.existsSync(e)){let s=JSON.parse(bi.readFileSync(e,{encoding:"utf8"}));if(typeof s!="undefined"&&typeof s.packages!="undefined")for(let a=0;a<s.packages.length;a++){let o=s.packages[a];if(typeof o.name!="undefined"&&typeof o.version!="undefined"){let l=n+Dn(o.name,"/")+"/composer.json",c=n+Dn(o.name,"/")+"/.antlers-ls/",u=!1;if(typeof o.dist!="undefined"){let d=o.dist;typeof d.type!="undefined"&&typeof d.url!="undefined"&&d.type==="path"&&(l=r+Dn(o.dist.url,"/")+"/composer.json",c=n+Dn(o.name,"/")+"/.antlers-ls/")}let f=null;if(bi.existsSync(l)&&(u=rV(l),u&&bi.existsSync(c))){f={fieldtypesFile:null,modifiersFile:null,tagsFile:null};let d=c+"tags.json",_=c+"modifiers.json",P=c+"types.json";bi.existsSync(d)&&(f.tagsFile=d),bi.existsSync(_)&&(f.modifiersFile=_),bi.existsSync(P)&&(f.fieldtypesFile=P)}let m=cn(o.version,"v"),p=TC.clean(m);p!=null&&(m=p),i.push({name:o.name,version:m,vendorPath:l,isStatamicAddon:u,antlersExtension:f})}}}return i}};var NC=Q(require("path"));function rg(t){let e=NC.resolve(t).replace(/\\/g,"/");return e[0]!=="/"&&(e="/"+e),encodeURI("file://"+e)}function rn(t){return!t.toLowerCase().endsWith(".gitkeep")}var vC=Q(hi()),PC=Q(require("fs"));function fc(t,e,r,n,i){let s=[],a=[];for(let o of Object.keys(t[r])){let l=t[r][o],c="",u="",f="",m="",p=null,d=null,_=null;if(typeof l.prefix!="undefined"&&l.prefix!==null&&(m=l.prefix),typeof l.import!="undefined"&&i.has(l.import)){let P=i.get(l.import);for(let h=0;h<P.length;h++)a.includes(P[h].handle)==!1&&(s.push(gd(P[h],m)),a.push(P[h].handle));continue}if(typeof l.import!="undefined"&&(_=l.import),typeof l.field!="undefined"&&(typeof l.field.type!="undefined"&&(c=l.field.type),typeof l.field.display!="undefined"&&(u=l.field.display),typeof l.field.instructions!="undefined"&&(f=l.field.instructions),typeof l.field.max_items!="undefined"&&(p=l.field.max_items),c=Tb(c,l,p),bb.includes(c)&&typeof l.field.sets!="undefined")){d=[];for(let P of Object.keys(l.field.sets)){let h=l.field.sets[P],y=fc(h,e,"fields","set:"+P,i),g="";typeof h.display!="undefined"&&(g=h.display),d.push({handle:P,displayName:g,fields:y})}}s.push({blueprintName:e,name:l.handle,type:c,displayName:u,instructionText:f,maxItems:p,refFieldSetField:null,sets:d,import:_})}return s}function ya(t,e,r){let n=[];try{let i=PC.readFileSync(t,{encoding:"utf8"}),s=vC.parse(i),a=s.sections;if(typeof a!="undefined")for(let o of Object.keys(a)){let l=a[o];if(typeof l.fields!="undefined"){let c=fc(l,e,"fields",e,r);c.length>0&&(n=n.concat(c))}}else if(typeof s.fields!="undefined"){let o=fc(s,e,"fields",e,r);o.length>0&&(n=n.concat(o))}}catch{}return n}var IC=Q(hi()),SC=Q(require("fs"));function CC(t,e){let r=[];try{let n=SC.readFileSync(t,{encoding:"utf8"}),i=IC.parse(n);if(typeof i=="undefined"||i===null)return[];if(typeof i.fields!="undefined")for(let s of Object.keys(i.fields)){let a=i.fields[s],o=a.handle,l="",c="",u="",f=null,m=null,p=null;if(typeof a.import!="undefined"&&(p=a.import),typeof a.field!="undefined"&&(typeof a.field.display!="undefined"&&(l=a.field.display),typeof a.field.type!="undefined"&&(u=a.field.type),typeof a.field.instructions!="undefined"&&(c=a.field.instructions),typeof a.field.max_items!="undefined"&&(f=a.field.max_items),typeof a.field.sets!="undefined")){m=[];for(let d of Object.keys(a.field.sets)){let _=a.field.sets[d],P=fc(_,e,"fields","set:"+d,new Map),h="";typeof _.display!="undefined"&&(h=_.display),m.push({handle:d,displayName:h,fields:P})}}r.push({handle:o,instructionText:c,name:l,type:u,maxItems:f,sets:m,import:p})}}catch{}return r}var RC=Q(require("path")),AC=Q(require("fs")),xC=Q(hi());function EC(t){let e=RC.basename(t).split(".").slice(0,-1).join("."),r=e;try{let n=AC.readFileSync(t,{encoding:"utf8"}),i=xC.parse(n);typeof i.title!="undefined"&&i.title!==null&&(r=i.title)}catch(n){console.error(n)}return{handle:e,title:r}}var wC=Q(require("path")),OC=Q(require("fs")),DC=Q(hi());function LC(t){let e=wC.basename(t).split(".").slice(0,-1).join("."),r=e,n="";try{let i=OC.readFileSync(t,{encoding:"utf8"}),s=DC.parse(i);typeof s!="undefined"&&s!==null&&(typeof s.title!="undefined"&&s.title!==null&&(r=s.title),typeof s.disk!="undefined"&&s.disk!==null&&(n=s.disk))}catch(i){console.error(i)}return{handle:e,title:r,diskName:n}}var kC=Q(require("path")),MC=Q(require("fs")),FC=Q(hi());function VC(t){let e=kC.basename(t).split(".").slice(0,-1).join("."),r=MC.readFileSync(t,{encoding:"utf8"}),n="",i="",s="",a=!1,o=[],l=null,c=null,u=[];try{let f=FC.parse(r);if(typeof f!="undefined"&&f!==null){if(typeof f.title!="undefined"&&f.title!==null&&(n=f.title),typeof f.inject!="undefined"&&f.inject!==null){let m=Object.keys(f.inject);for(let p=0;p<m.length;p++){let d=m[p];d=="view_model"?c=f.inject.view_model:u.push(d)}}if(typeof f.template!="undefined"&&f.template!==null&&(i=f.template),typeof f.layout!="undefined"&&f.layout!==null&&(s=f.layout),typeof f.taxonomies!="undefined"&&f.taxonomies!==null&&(o=Object.keys(f.taxonomies)),typeof f.structure!="undefined"&&f.structure!==null){a=!0;let m=f.structure,p=-1,d=!1;typeof m.root!="undefined"&&m.root!==null&&(d=m.root),typeof m.max_depth!="undefined"&&m.max_depth!==null&&(p=m.max_depth),l={root:d,maxDepth:p}}}}catch(f){console.error(f)}return{handle:e,title:n,template:i,layout:s,taxonomies:o,isStructure:a,structure:l,viewModel:c,injectFields:u}}var ng=Q(require("fs")),ig=Q(hi());function qC(t){let e=[],r=ng.readFileSync(t,{encoding:"utf8"});try{let n=ig.parse(r);if(typeof n=="undefined"||n===null)return[];let i=Object.keys(n);for(let s=0;s<i.length;s++){let a=i[s],o=n[a],l=a;typeof o!="undefined"&&o!==null&&typeof o.title!="undefined"&&o.title!==null&&(l=o.title),e.push({handle:a,title:l})}}catch(n){console.error(n)}return e}function BC(t){let e=[],r=ng.readFileSync(t,{encoding:"utf8"});try{let n=ig.parse(r);if(typeof n=="undefined"||n===null)return[];let i=Object.keys(n);for(let s=0;s<i.length;s++){let a=i[s],o=n[a],l=a;typeof o!="undefined"&&o!==null&&typeof o.title!="undefined"&&o.title!==null&&(l=o.title),e.push({handle:a,title:l})}}catch(n){console.error(n)}return e}var jC=Q(require("fs")),UC=Q(hi());function GC(t){var n,i,s,a;let e=jC.readFileSync(t,{encoding:"utf8"}),r=[];try{let o=UC.parse(e);if(typeof o=="undefined"||o===null)return[];let l=Object.keys(o);for(let c=0;c<l.length;c++){let u=l[c],f=o[u],m=[],p="";if(typeof f!="undefined"&&f!==null){let d=Object.keys(f);for(let _=0;_<d.length;_++){let P=d[_],h=(i=(n=Me.instance)==null?void 0:n.getModifier(P))!=null?i:null,y=!1,g="";h!=null?(y=!0,g=(a=(s=Me.instance)==null?void 0:s.getProbableReturnType(h,!1))!=null?a:"",p=g):p="",m.push({hasReference:y,manifestsType:g,name:P,ref:h})}}r.push({name:u,manifestsType:p,modifiers:m})}}catch{}return r}function sg(t,e,r){return{blueprintName:t,displayName:"",import:null,instructionText:"",maxItems:null,name:e,refFieldSetField:null,sets:null,type:r}}var ag=class{constructor(e,r){this.isMocked=!1;this.rootPath="";this.fieldsetsPath="";this.viewsPath="";this.collectionBlueprintsPath="";this.formBlueprintsPath="";this.globalBlueprintsPath="";this.miscBlueprintsPath="";this.taxonomiesBlueprintsPath="";this.globalFiles=[];this.blueprintFiles=[];this.collectionNames=[];this.collections=new Map;this.fieldsets=new Map;this.forms=new Map;this.globals=new Map;this.taxonomies=new Map;this.fields=new Map;this.miscFields=new Map;this.blueprintRef=new Map;this.blueprintCollectionRef=new Map;this.templates=[];this.views=[];this.partialCache=[];this.partialViewNames=[];this.taxonomyNames=[];this.hasMacroFile=!1;this.macroFilePath="";this.collectionQueryScopes=[];this.taxonomyTerms=new Map;this.assets=new Map;this.userGroups=new Map;this.userRoles=new Map;this.navigationMenus=new Map;this.viewMap=new Map;this.routeNames=[];this.translationKeys=[];this.uniqueFormNames=[];this.uniquePartialViewNames=[];this.uniqueCollectionNames=[];this.uniqueTaxonomyNames=[];this.uniqueUserGroups=[];this.uniqueUserRoles=[];this.uniqueGlobalSettingNames=[];this.uniqueNavigationNames=[];this.uniqueAssetNames=[];this.publicAssets=[];this.packageMapping=new Map;this.statamicAddonMapping=new Map;this.blueprintFieldReference=[];this.baseResourcePath=r,this.sourceStructure=e,this.rootPath="",this.isMocked=e.isMocked,this.rootPath=e.rootPath,this.fieldsetsPath=e.fieldsetsPath,this.viewsPath=e.viewsPath,this.collectionBlueprintsPath=e.collectionBlueprintsPath,this.formBlueprintsPath=e.formBlueprintsPath,this.globalBlueprintsPath=e.globalBlueprintsPath,this.miscBlueprintsPath=e.miscBlueprintsPath,this.taxonomiesBlueprintsPath=e.taxonomiesBlueprintsPath,this.globalFiles=e.globalFiles,this.blueprintFiles=e.blueprintFiles,this.collectionNames=e.collectionNames,this.collections=e.collections,this.assets=e.assets,this.fieldsets=e.fieldsets,this.forms=e.forms,this.globals=e.globals,this.taxonomies=e.taxonomies,this.fields=e.fields,this.miscFields=e.miscFields,this.templates=e.templates,this.views=e.views,this.partialCache=e.partialCache,this.partialViewNames=e.partialViewNames,this.taxonomyNames=e.taxonomyNames,this.macroFilePath=e.macroFilePath,this.hasMacroFile=e.hasMacrosFile,this.collectionQueryScopes=e.collectionScopes,this.taxonomyTerms=e.taxonomyTerms,this.navigationMenus=e.navigationMenus,this.rootPath=e.workingDirectory,this.buildDetails(),typeof this.sourceStructure.restoreProperties!="undefined"&&this.sourceStructure.restoreProperties!=null&&(this.assets=this.sourceStructure.restoreProperties.assets,this.blueprintCollectionRef=this.sourceStructure.restoreProperties.blueprintCollectionRef,this.blueprintFieldReference=this.sourceStructure.restoreProperties.blueprintFieldReference,this.blueprintFiles=this.sourceStructure.restoreProperties.blueprintFiles,this.blueprintRef=this.sourceStructure.restoreProperties.blueprintRef,this.collectionNames=this.sourceStructure.restoreProperties.collectionNames,this.collectionQueryScopes=this.sourceStructure.restoreProperties.collectionQueryScopes,this.collections=this.sourceStructure.restoreProperties.collections,this.fields=this.sourceStructure.restoreProperties.fields,this.fieldsets=this.sourceStructure.restoreProperties.fieldsets,this.forms=this.sourceStructure.restoreProperties.forms,this.globalFiles=this.sourceStructure.restoreProperties.globalFiles,this.globals=this.sourceStructure.restoreProperties.globals,this.miscFields=this.sourceStructure.restoreProperties.miscFields,this.navigationMenus=this.sourceStructure.restoreProperties.navigationMenus,this.packageMapping=this.sourceStructure.restoreProperties.packageMapping,this.partialCache=this.sourceStructure.restoreProperties.partialCache,this.partialViewNames=this.sourceStructure.restoreProperties.partialViewNames,this.publicAssets=this.sourceStructure.restoreProperties.publicAssets,this.routeNames=this.sourceStructure.restoreProperties.routeNames,this.statamicAddonMapping=this.sourceStructure.restoreProperties.statamicAddonMapping,this.taxonomies=this.sourceStructure.restoreProperties.taxonomies,this.taxonomyNames=this.sourceStructure.restoreProperties.taxonomyNames,this.taxonomyTerms=this.sourceStructure.restoreProperties.taxonomyTerms,this.templates=this.sourceStructure.restoreProperties.templates,this.translationKeys=this.sourceStructure.restoreProperties.translationKeys,this.uniqueAssetNames=this.sourceStructure.restoreProperties.uniqueAssetNames,this.uniqueCollectionNames=this.sourceStructure.restoreProperties.uniqueCollectionNames,this.uniqueFormNames=this.sourceStructure.restoreProperties.uniqueFormNames,this.uniqueGlobalSettingNames=this.sourceStructure.restoreProperties.uniqueGlobalSettingNames,this.uniqueNavigationNames=this.sourceStructure.restoreProperties.uniqueNavigationNames,this.uniquePartialViewNames=this.sourceStructure.restoreProperties.uniquePartialViewNames,this.uniqueTaxonomyNames=this.sourceStructure.restoreProperties.uniqueTaxonomyNames,this.uniqueUserGroups=this.sourceStructure.restoreProperties.uniqueUserGroups,this.uniqueUserRoles=this.sourceStructure.restoreProperties.uniqueUserRoles,this.userGroups=this.sourceStructure.restoreProperties.userGroups,this.userRoles=this.sourceStructure.restoreProperties.userRoles,this.viewMap=this.sourceStructure.restoreProperties.viewMap,this.views=this.sourceStructure.restoreProperties.views)}getViewPath(){return this.viewsPath}getProjectRoot(){return this.rootPath}export(){let e=this.sourceStructure;return e.restoreProperties=this.getRestoreRecords(),e}getRestoreRecords(){return{assets:this.assets,baseResourcePath:this.baseResourcePath,blueprintCollectionRef:this.blueprintCollectionRef,blueprintFieldReference:this.blueprintFieldReference,blueprintFiles:this.blueprintFiles,blueprintRef:this.blueprintRef,collectionNames:this.collectionNames,collectionQueryScopes:this.collectionQueryScopes,collections:this.collections,fields:this.fields,fieldsets:this.fieldsets,forms:this.forms,globalFiles:this.globalFiles,globals:this.globals,miscFields:this.miscFields,navigationMenus:this.navigationMenus,packageMapping:this.packageMapping,partialCache:this.partialCache,partialViewNames:this.partialViewNames,publicAssets:this.publicAssets,routeNames:this.routeNames,statamicAddonMapping:this.statamicAddonMapping,taxonomies:this.taxonomies,taxonomyNames:this.taxonomyNames,taxonomyTerms:this.taxonomyTerms,templates:this.templates,translationKeys:this.translationKeys,uniqueAssetNames:this.uniqueAssetNames,uniqueCollectionNames:this.uniqueCollectionNames,uniqueFormNames:this.uniqueFormNames,uniqueGlobalSettingNames:this.uniqueGlobalSettingNames,uniqueNavigationNames:this.uniqueNavigationNames,uniquePartialViewNames:this.uniquePartialViewNames,uniqueTaxonomyNames:this.uniqueTaxonomyNames,uniqueUserGroups:this.uniqueUserGroups,uniqueUserRoles:this.uniqueUserRoles,userGroups:this.userGroups,userRoles:this.userRoles,viewMap:this.viewMap,views:this.views}}reloadDetails(){return this}buildImportRefernece(e){if(e.sets!=null)for(let r=0;r<e.sets.length;r++){let n=e.sets[r];for(let i=0;i<n.fields.length;i++){let s=n.fields[i];if(s.import!=null){let a=s.import;if(this.sourceStructure.fieldsets.has(a)){let o=this.sourceStructure.fieldsets.get(a),l=Nb(o);for(let c=0;c<l.length;c++)this.buildImportRefernece(l[c]);n.fields.splice(i,1),n.fields=n.fields.concat(l)}}}}}buildDetails(){var s,a;let e=[],r=[],n=[],i=[];if(typeof this.sourceStructure.assets.forEach!="undefined"&&this.sourceStructure.assets.forEach((o,l)=>{i.push(l)}),typeof this.sourceStructure.forms.forEach!="undefined"&&this.sourceStructure.forms.forEach((o,l)=>{o.forEach(c=>{this.blueprintCollectionRef.set(c.blueprintName,l)}),e.push(l),this.blueprintRef.set(l,o)}),typeof this.sourceStructure.globals.forEach!="undefined"&&this.sourceStructure.globals.forEach((o,l)=>{o.forEach(c=>{this.blueprintCollectionRef.set(c.blueprintName,l)}),r.push(l),this.blueprintRef.set(l,o)}),typeof this.sourceStructure.miscFields.forEach!="undefined"&&this.sourceStructure.miscFields.forEach((o,l)=>{o.forEach(c=>{this.blueprintCollectionRef.set(c.blueprintName,l)}),this.blueprintRef.set(l,o)}),typeof this.sourceStructure.taxonomies.forEach!="undefined"&&this.sourceStructure.taxonomies.forEach((o,l)=>{o.forEach(c=>{this.blueprintCollectionRef.set(c.blueprintName,l)}),this.blueprintRef.set(l,o)}),typeof this.sourceStructure.fields.forEach!="undefined"&&this.sourceStructure.fields.forEach((o,l)=>{o.forEach(c=>{this.blueprintCollectionRef.set(c.blueprintName,l)}),this.blueprintRef.set(l,o)}),typeof this.sourceStructure.navigationMenus.forEach!="undefined"&&this.sourceStructure.navigationMenus.forEach((o,l)=>{n.push(l)}),typeof this.sourceStructure.views.forEach!="undefined"&&this.sourceStructure.views.forEach((o,l)=>{this.viewMap.set(o.documentUri,o)}),typeof this.sourceStructure.composerPackages.forEach!="undefined"&&this.sourceStructure.composerPackages.forEach(o=>{o.isStatamicAddon&&this.statamicAddonMapping.set(o.name,o),this.packageMapping.set(o.name,o)}),this.uniqueAssetNames=[...new Set(i)],this.uniqueNavigationNames=[...new Set(n)],this.uniqueGlobalSettingNames=[...new Set(r)],this.uniqueFormNames=[...new Set(e)],this.uniqueCollectionNames=[...new Set(this.collectionNames)],this.uniquePartialViewNames=[...new Set(this.partialViewNames)],this.uniqueTaxonomyNames=[...new Set(this.taxonomyNames)],(s=Me.instance)==null||s.resetMacros(),this.hasMacroFile){let o=GC(this.macroFilePath);o.length>0&&((a=Me.instance)==null||a.registerMacros(o))}this.uniqueUserRoles=[...new Set(this.sourceStructure.userRoleNames)],this.uniqueUserGroups=[...new Set(this.sourceStructure.userGroupNames)],this.sourceStructure.searchIndexes.length==0&&this.sourceStructure.searchIndexes.push("default");for(let o=0;o<this.sourceStructure.internalFieldReference.length;o++)this.buildImportRefernece(this.sourceStructure.internalFieldReference[o])}getWorkingDirectory(){return this.sourceStructure.workingDirectory}getOAuthProviders(){return[]}getSiteNames(){return[]}getSearchIndexes(){return this.sourceStructure.searchIndexes}getStatamicVersion(){return this.sourceStructure.statamicPackage!=null?this.sourceStructure.statamicPackage.version:""}hasComposerPackage(e){return this.packageMapping.has(e)}hasStatamicAddon(e){return this.statamicAddonMapping.has(e)}getAddonDetails(e){return this.hasStatamicAddon(e)?this.statamicAddonMapping.get(e):null}getComposerPackages(){return this.packageMapping}getComposerPackageDetails(e){return this.hasComposerPackage(e)?this.packageMapping.get(e):null}getPartials(){return this.sourceStructure.partialCache}getBlueprintNames(){let e=[];return this.blueprintRef.forEach((r,n)=>{n.startsWith("*")==!1&&e.includes(n)==!1&&e.push(n)}),e}getBlueprintDetails(e){if(this.blueprintRef.has(e)==!1){let r=[];return r.push(sg(e,"title","text")),r.push(sg(e,"content","markdown")),r.push(sg(e,"slug","slug")),r}return this.blueprintRef.get(e)}hasViewCollectionInjections(e){return this.viewMap.has(e)==!1?!1:this.viewMap.get(e).injectsCollections.length>0}getCollectionNames(){return this.collectionNames}getCollectionNamesForView(e){return this.viewMap.has(e)==!1?[]:this.viewMap.get(e).injectsCollections}getPublicAssetPaths(){return this.publicAssets}getTaxonomyTerms(e){return this.hasTaxonomy(e)?this.taxonomyTerms.get(e):[]}hasTaxonomy(e){return this.taxonomyNames.includes(e)}getCollectionQueryScopes(){return this.collectionQueryScopes}getBlueprintFields(e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=this.getCollectionDetails(i);if(s!=null&&s.injectFields!=null)for(let a=0;a<s.injectFields.length;a++)r.push({blueprintName:"*inject",displayName:s.injectFields[a],import:null,instructionText:null,maxItems:null,name:s.injectFields[n],refFieldSetField:null,sets:null,type:"*"});if(this.fields.has(i)){let a=this.fields.get(i);typeof a!="undefined"&&a!==null&&(r=r.concat(a))}}return r}getBlueprintField(e,r){let n=e;if(this.blueprintCollectionRef.has(n)&&(n=this.blueprintCollectionRef.get(n)),this.fields.has(n)){let i=this.fields.get(n);for(let s=0;s<i.length;s++)if(i[s].name==r)return i[s]}return null}getFields(){return this.fields}getTaxonomyBlueprintFields(e){let r=[];for(let n=0;n<e.length;n++){let i=e[n];if(this.taxonomies.has(i)){let s=this.taxonomies.get(i);typeof s!="undefined"&&s!==null&&(r=r.concat(s))}}return r}getUserFields(){return this.miscFields.has("user")?this.miscFields.get("user"):[]}getAssetBlueprintFields(e){return this.sourceStructure.assetFields.has(e)?this.sourceStructure.assetFields.get(e):[]}getUniqueTaxonomyNames(){return this.uniqueTaxonomyNames}getUniqueCollectionNames(){return this.uniqueCollectionNames}getUniquePartialNames(){return this.uniquePartialViewNames}getUniqueUserGroupNames(){return this.uniqueUserGroups}getUniqueUserRoleNames(){return this.uniqueUserRoles}getUniqueFormNames(){return this.uniqueFormNames}getAssetPresets(){return[]}getUniqueGlobalsNames(){return this.uniqueGlobalSettingNames}getUniqueNavigationMenuNames(){return this.uniqueNavigationNames}getUniqueAssetNames(){return this.uniqueAssetNames}getCollectionDetails(e){return this.collections.has(e)?this.collections.get(e):null}getFormBlueprintFields(e){if(this.forms.has(e)){let r=this.forms.get(e);return typeof r=="undefined"||r===null?[]:r}return[]}getRouteNames(){return this.routeNames}getTranslationKeys(){return this.translationKeys}getTemplateNames(){let e=[];return this.views.forEach(r=>{let n=It(r.relativeDisplayName,"/",".");e.includes(n)==!1&&e.push(n)}),e}getViews(){return this.views}findView(e){if(e.trim()=="")return null;let r=zI(e);for(let n=0;n<this.views.length;n++)if(this.views[n].path==r)return this.views[n];return null}findRelativeView(e){e=It(e,"\\.","/");for(let r=0;r<this.views.length;r++)if(this.views[r].relativeDisplayName==e)return this.views[r];return null}findPartial(e){e=It(e,"\\.","/");for(let r=0;r<this.views.length;r++)if(this.views[r].isPartial&&this.views[r].relativeDisplayName==e)return this.views[r];return null}};function nV(t){let e=Wi(t).split("/"),r=[],n=null;for(let i=0;i<e.length;i++){if(i==0){n=e[i],r.push(e[i]);continue}if(e[i]=="views"&&n=="resources")break;r.push(e[i]),n=e[i]}return r.join("/")}function iV(t){return t.endsWith("/")==!1&&(t=t+"/"),t+"../"}function sV(t){return t+"composer.lock"}function aV(t){return t+"vendor/"}function oV(t){return t+"/blueprints/collections/"}function lV(t){return t+"/blueprints/taxonomies/"}function cV(t){return t+"/blueprints/assets/"}function uV(t){return t+"/blueprints/globals/"}function fV(t){return t+"/blueprints/forms/"}function pV(t){return t+"/blueprints/"}function dV(t){return t+"/macros.yaml"}function mV(t){return t+"/views/"}function hV(t){return t+"/users/"}function gV(t){return t+"/forms/"}function _V(t){return t+"/fieldsets"}function pc(t){return t+"/../content/"}function yV(t){return pc(t)+"assets/"}function bV(t){return pc(t)+"collections/"}function TV(t){return pc(t)+"taxonomies/"}function NV(t){return pc(t)+"navigation/"}function dc(t,e,r){if(!Vr.existsSync(t))return[];let n=r||[],i=Vr.readdirSync(t);for(let s=0;s<i.length;s++){let a=tr.join(t,i[s]);Vr.lstatSync(a).isDirectory()?n=n.concat(dc(a,e,r)):a.indexOf(e)>=0&&n.push(a)}return[...new Set(n)]}function Ki(t,e){if(!Vr.existsSync(t))return[];let r=[],n=Vr.readdirSync(t);for(let i=0;i<n.length;i++){let s=tr.join(t,n[i]);Vr.lstatSync(s).isDirectory()==!1&&r.push(s)}return[...new Set(r)]}function vV(t){let e=dc(t,".html",[]),r=t.length,n=[];for(let i=0;i<e.length;i++){let s=e[i],a=s.substr(r),o=Wi(tr.dirname(a)),l=tr.basename(a),c=l,u=!1,f=!1,m=!1,p="";l.startsWith("_")&&(u=!0,c=c.substr(1)),l.endsWith(".antlers.html")?(f=!0,c=c.substr(0,c.length-13)):l.endsWith(".blade.php")?(f=!1,m=!0):(f=!1,m=!1),o!="."?p=o+"/"+c:p=c,n.push({displayName:c,fileName:l,documentUri:rg(s),originalDocumentUri:rg(s),isAntlers:f,isBlade:m,isPartial:u,path:Wi(s),relativeDisplayName:p,relativeFileName:l,relativePath:a,injectsCollections:[],injectsParameters:[],templateName:It(p,"/","."),varReferenceNames:new Map,document:null})}return n}function og(t){let e=nV(t),r=oV(e),n=mV(e),i=gV(e),s=fV(e),a=_V(e),o=lV(e),l=uV(e),c=pV(e),u=pc(e),f=NV(e),m=TV(e),p=hV(e),d=bV(e),_=yV(e),P=cV(e),h=dc(r,".yaml",[]),y=vV(n),g=dV(e),N=iV(e),S=sV(N),V=aV(N),O=!1,Y=null,z=tg.getInstalledPackages(S,N,V);for(let I=0;I<z.length;I++)if(z[I].name=="statamic/cms"){Y=z[I];break}let X=new Map,K=new Map,re=new Map,De=new Map,de=new Map,te=new Map,We=[],ut=new Map,Vt=[],Ve=[],ft=[],Ti=[],$i=[],ce=new Map,oe=new Map,he=[],se=new Map,Ne=[],Pt=new Map,In=new Map,ba=new Map,Ta=new Map;g.trim().length>0&&(O=Vr.existsSync(g));for(let I=0;I<y.length;I++)y[I].isPartial&&(ft.push(y[I]),Ti.push(y[I].relativeDisplayName));let ti=Ki(_,".yaml");for(let I=0;I<ti.length;I++)if(rn(ti[I])){let C=LC(ti[I]);ba.set(C.handle,C)}let As=Ki(d,".yaml");for(let I=0;I<As.length;I++)if(rn(As[I])){let C=VC(As[I]);In.set(C.handle,C)}let Na=p+"roles.yaml",va=p+"groups.yaml";if(Vr.existsSync(Na)){let I=qC(Na);for(let C=0;C<I.length;C++)se.set(I[C].handle,I[C]),Ne.push(I[C].handle)}if(Vr.existsSync(va)){let I=BC(va);for(let C=0;C<I.length;C++)oe.set(I[C].handle,I[C]),he.push(I[C].handle)}let qr=dc(a,".yaml",[]),Ct=[];for(let I=0;I<qr.length;I++)if(rn(qr[I])){let C=tr.basename(qr[I]).split(".").slice(0,-1).join(".");if(C!=null&&C.trim().length>0){let b=CC(qr[I],C);X.set(C,b)}}let Ni=dc(o,".yaml",[]);for(let I=0;I<Ni.length;I++)if(rn(Ni[I])){let C=tr.basename(Ni[I]).split(".").slice(0,-1).join("."),b=tr.basename(tr.dirname(Ni[I]));if(C!=null&&C.trim().length>0){K.set(C,b);let x=ya(Ni[I],C,X);de.set(C,x),Ct=Ct.concat(x),Ve.includes(C)==!1&&Ve.push(C)}}if(Ve.length>0){for(let I=0;I<Ve.length;I++)if(K.has(Ve[I])){let C=K.get(Ve[I]);if(typeof C!="undefined"&&C!==null){let b=m+C+"/";if(Vr.existsSync(b)){let x=Ki(b,".yaml"),w=[];for(let R=0;R<x.length;R++)if(rn(x[R])){let T=tr.basename(x[R]).split(".").slice(0,-1).join(".");w.push(T)}ce.set(Ve[I],w)}}}}let zi=Ki(c,".yaml");for(let I=0;I<zi.length;I++)if(rn(zi[I])){let C=tr.basename(zi[I]).split(".").slice(0,-1).join(".");if(C!=null&&C.trim().length>0){let b=ya(zi[I],C,X);te.set(C,b),Ct=Ct.concat(b)}}for(let I=0;I<h.length;I++)if(rn(h[I])){let C=tr.basename(h[I]).split(".").slice(0,-1).join("."),b=ya(h[I],C,X),x=Wi((0,WC.dirname)(h[I])).split("/").pop();Ct=Ct.concat(b),x!=null&&x.trim().length>0&&(C=x,Vt.includes(x)==!1&&Vt.push(x)),ut.set(C,b)}let Sn=Ki(f,".yaml");for(let I=0;I<Sn.length;I++)if(rn(Sn[I])){let C=EC(Sn[I]);Pt.set(C.handle,C)}let vi=Ki(l,".yaml");for(let I=0;I<vi.length;I++)if(rn(vi[I])){let C=tr.basename(vi[I]).split(".").slice(0,-1).join("."),b=ya(vi[I],C,X);Ct=Ct.concat(b),De.set(C,b)}if(Vr.existsSync(P)){let I=Ki(P,".yaml");for(let C=0;C<I.length;C++)if(rn(I[C])){let b=tr.basename(I[C]).split(".").slice(0,-1).join("."),x=ya(I[C],b,X);Ct=Ct.concat(x),Ta.set(b,x)}}let Pi=Ki(s,".yaml"),Ii=Ki(i,".yaml"),ri=[];for(let I=0;I<Ii.length;I++)if(rn(Ii[I])){let C=tr.basename(Ii[I]).split(".").slice(0,-1).join(".");ri.includes(C)||ri.push(C)}for(let I=0;I<Pi.length;I++)if(rn(Pi[I])){let C=tr.basename(Pi[I]).split(".").slice(0,-1).join("."),b=ya(Pi[I],C,X);Ct=Ct.concat(b),re.set(C,b)}for(let I=0;I<ri.length;I++)re.has(ri[I])||re.set(ri[I],[]);let nn=new Map;for(let I=0;I<y.length;I++)nn.set(y[I].relativeDisplayName,y[I]);return In.forEach((I,C)=>{I.template.trim().length>0&&nn.has(I.template)&&nn.get(I.template).injectsCollections.push(I.handle)}),new HC({composerPackages:z,statamicPackage:Y,isMocked:!1,workingDirectory:N,taxonomyPluralizedMapping:K,collectionScopes:$i,blueprintFiles:h,collectionBlueprintsPath:r,collections:In,rootPath:e,fields:ut,fieldsetsPath:a,fieldsets:X,collectionNames:Vt,formBlueprintsPath:i,taxonomiesBlueprintsPath:o,globalBlueprintsPath:l,miscBlueprintsPath:c,viewsPath:n,views:y,globalFiles:[],forms:re,globals:De,miscFields:te,taxonomies:de,taxonomyNames:Ve,templates:We,partialCache:ft,partialViewNames:Ti,macroFilePath:g,hasMacrosFile:O,contentDirectory:u,taxonomyContentDirectory:m,taxonomyTerms:ce,assets:ba,assetFields:Ta,oauthProviders:[],navigationMenus:Pt,userPermissionsPath:p,userGroupNames:he,userGroups:oe,userRoleNames:Ne,userRoles:se,searchIndexes:[],internalFieldReference:Ct,restoreProperties:null},t)}var HC=class extends ag{reloadDetails(){return og(this.baseResourcePath)}};var lg=class{static getReferences(e){var r;if(e==null)return null;if(((r=e.context)==null?void 0:r.feature)instanceof ae){let n=e.context.feature;if(n.scopeVariable==null||n.scopeVariable.sourceField==null)return null;let i=new Map;Se.getDocuments().forEach(a=>{let o=a.getAllAntlersNodes(),l=[];o.forEach(c=>{c.runtimeNodes.forEach(u=>{var f;(u.scopeVariable!=null&&u.scopeVariable==n.scopeVariable||u.scopeVariable!=null&&u.scopeVariable.sourceName==((f=n.scopeVariable)==null?void 0:f.sourceName)&&u instanceof ae&&u.name==n.name)&&l.push(u)})}),i.set(a.documentUri,l)});let s=[];return i.forEach((a,o)=>{a.forEach(l=>{s.push({uri:o,range:ca(l)})})}),s}return[]}};function YC(t){var n;if(((n=ue.instance)==null?void 0:n.hasStructure())==!1)return null;let e=decodeURIComponent(t.textDocument.uri);if(Se.hasDocument(e)==!1)return null;let r=kr(t.position,e);return lg.getReferences(r)}function KC(t){var n;let e=decodeURIComponent(t.textDocument.uri),r=kr(t.position,e);if(r==null)return null;if(((n=r.context)==null?void 0:n.feature)instanceof ae){let i=r.context.feature,s=r.antlersDocument.getAllAntlersNodes();if(i.scopeVariable==null||i.scopeVariable.sourceField==null)return null;let a=[],o=[];return s.forEach(l=>{l.runtimeNodes.forEach(c=>{var u;(c.scopeVariable!=null&&c.scopeVariable==i.scopeVariable||c.scopeVariable!=null&&c.scopeVariable.sourceName==((u=i.scopeVariable)==null?void 0:u.sourceName)&&c instanceof ae&&c.name==i.name)&&a.push(c)})}),a.length>0&&a.push(i),a.forEach(l=>{o.push({range:ca(l)})}),o}return[]}var $C=class{constructor(){this._nodes=[];this._extractedAntlers=new Map;this._buffer="";this._shouldFormat=!0}load(e){let r=new gt;return r.getDocumentParser().withChildDocuments(!0),r.loadString(e),this._nodes=r.getAllNodes(),this._buffer=r.getParsedContent(),(!r.isValid()||!r.isFormattingEnabled())&&(this._shouldFormat=!1),this._nodes.forEach(n=>{if(n instanceof q){let i=n.getNodeDocumentText(),s="ANTLERS:"+n.refId;this._buffer=this._buffer.replace(i,s),this._extractedAntlers.set(s,i)}}),this}getShouldFormat(){return this._shouldFormat}getBuffer(){return this._buffer}getMapping(){return this._extractedAntlers}transform(e){return this._buffer=e(this._buffer),this}getTemplate(){let e=this._buffer;return this._extractedAntlers.forEach((r,n)=>{e=e.replace(n,r)}),e}},zC=$C;var eR=Q(QC()),PV=Th(),cg={formatFrontMatter:!1,showGeneralSnippetCompletions:!0,diagnostics:{warnOnDynamicCssClassNames:!0,validateTagParameters:!0},trace:{server:"off"},formatterIgnoreExtensions:["xml"],languageVersion:"runtime"},Bi=cg;function Jf(t){Bi=t}function Gi(){return Bi}var He=(0,rr.createConnection)(rr.ProposedFeatures.all),Yo=new rr.TextDocuments(ZC.TextDocument),tR=!1,rR=!1,IV=!1,ug;(e=>e.type=new rr.RequestType("antlers/lockedits"))(ug||(ug={}));var fg;(e=>e.type=new rr.RequestType("antlers/forcedFormat"))(fg||(fg={}));var pg;(e=>e.type=new rr.RequestType("antlers/projectUpdate"))(pg||(pg={}));var dg;(e=>e.type=new rr.RequestType("antlers/transform"))(dg||(dg={}));var mg;(e=>e.type=new rr.RequestType0("antlers/semanticTokenLegend"))(mg||(mg={}));var hg;(e=>e.type=new rr.RequestType("antlers/semanticTokens"))(hg||(hg={}));He.onInitialize(t=>{let e=t.capabilities;tR=!!(e.workspace&&!!e.workspace.configuration),rR=!!(e.workspace&&!!e.workspace.workspaceFolders),IV=!!(e.textDocument&&e.textDocument.publishDiagnostics&&e.textDocument.publishDiagnostics.relatedInformation);let r={capabilities:{textDocumentSync:rr.TextDocumentSyncKind.Full,completionProvider:{resolveProvider:!0,triggerCharacters:[":",'"',"'","{","/","|","@"," "]},documentFormattingProvider:{},foldingRangeProvider:{},signatureHelpProvider:{triggerCharacters:[":",","]},documentLinkProvider:{},hoverProvider:{},definitionProvider:{},documentSymbolProvider:{},referencesProvider:{},documentHighlightProvider:{},codeActionProvider:{},executeCommandProvider:{commands:["antlers.extractToPartial"]}}};return rR&&(r.capabilities.workspace={workspaceFolders:{supported:!0}}),r});He.onInitialized(()=>{tR&&He.client.register(rr.DidChangeConfigurationNotification.type,void 0),He.workspace.getConfiguration("html").then(function(t){Rh(t)}),He.workspace.getConfiguration("antlersLanguageServer").then(function(t){t!=null?Jf(t):Jf(cg)})});He.onExecuteCommand(async t=>{var e;t.command=="antlers.extractToPartial"&&Ql.currentAction!=null&&((e=t.arguments)==null?void 0:e.length)==3&&Ql.currentAction.completeRefactor({path:t.arguments[1],fsPath:t.arguments[2]})});He.onDidChangeConfiguration(t=>{He.workspace.getConfiguration("html").then(function(e){Rh(e)}),He.workspace.getConfiguration("antlersLanguageServer").then(function(e){e!=null?Jf(e):Jf(cg)}),Yo.all().forEach(nR),Yo.all().forEach(Sh),Yo.all().forEach(e=>{_g(encodeURIComponent(e.uri))}),Yo.all().forEach(e=>{Ch(e,He)})});He.onDocumentLinks(t=>{let e=decodeURIComponent(t.textDocument.uri);return eg.getDocumentLinks(e)});var gg=!1;He.onRequest(ug.type,()=>{gg=!0});function SV(t){if(gg){gg=!1;return}nR(t.document),Sh(t.document),_g(decodeURIComponent(t.document.uri)),Ch(t.document,He)}var CV=(0,eR.debounce)(SV,250);Yo.onDidChangeContent(CV);He.onDidChangeWatchedFiles(t=>{});He.onHover(t=>dC(t));He.onDocumentSymbol(t=>bC(t));He.onDocumentHighlight(KC);He.onReferences(YC);He.onDefinition(mC);He.onFoldingRanges(PP);He.onSignatureHelp(pC);He.onDocumentFormatting(uC);He.onCompletion(TP);He.onCompletionResolve(NP);Yo.listen(He);He.onRequest(mg.type,t=>Zh().legend);He.onRequest(fg.type,t=>{let e=Gi(),r=Jl.format;return new uc({tabSize:t.tabSize,formatFrontMatter:e.formatFrontMatter,insertSpaces:t.insertSpaces,formatExtensions:[],maxStatementsPerLine:3,htmlOptions:r}).formatDocument(gt.fromText(t.content),Gi())});He.onRequest(dg.type,t=>{let e=new zC;e.load(t.content);let r=[];return e.getMapping().forEach((i,s)=>{r.push({find:s,replace:i})}),{shouldParse:e.getShouldFormat(),transformedText:e.getBuffer(),replacements:r}});He.onCodeAction(sS);He.onRequest(pg.type,()=>{var t,e,r,n,i;if((t=ue.instance)==null||t.setDirtyState(!0),(e=ue.instance)==null||e.reloadDetails(),(r=ue.instance)==null?void 0:r.hasStructure()){let s=(n=ue.instance)==null?void 0:n.getStructure();Se.setProject(s),(i=Js.instance)==null||i.updateProject(s)}});He.onRequest(hg.type,(t,e)=>{let r=decodeURIComponent(t.textDocument.uri);if(Zn.has(r)){let n=Zn.get(r);return Zh().getSemanticTokens(n,t.ranges)}return null});async function nR(t){var i,s,a,o,l,c,u,f,m;if((i=ue.instance)==null?void 0:i.hasStructure()){ue.instance.reloadDetails(),Se.setProject(ue.instance.getStructure());return}let e=decodeURIComponent(t.uri),r=PV(e),n=og(r);if((s=ue.instance)==null||s.setActiveProject(n),((a=ue.instance)==null?void 0:a.hasStructure())&&(Se.setProject((o=ue.instance)==null?void 0:o.getStructure()),(c=Js.instance)==null||c.updateProject((l=ue.instance)==null?void 0:l.getStructure())),(u=On.instance)==null||u.clearPartialReferences(e),(f=tn.instance)==null||f.clearIssues(e),(m=ue.instance)==null?void 0:m.hasStructure()){let p=ue.instance.getStructure().getViews();for(let d=0;d<p.length;d++){let _=p[d];aS(_.documentUri,JC.readFileSync(_.path,{encoding:"utf8"})),_g(_.documentUri)}}}function Ph(t){let e={edit:t};He.sendRequest("workspace/applyEdit",e)}function _g(t){var e,r,n,i,s,a,o,l,c,u,f,m,p,d,_,P;if(t=decodeURIComponent(t),Se.hasDocument(t)){let h=Se.getDocument(t),y=h.getAllAntlersNodes();(e=tn.instance)==null||e.clearIssues(t),(r=On.instance)==null||r.clearAllReferences(t),Us.clear(t);let g=[],N=[],S=[],V=[],O=[],Y=[];for(let X=0;X<y.length;X++){let K=y[X],re=K.getTagName();if(re==="yield"||re=="yields"){let de=K.reference;de!=null&&de instanceof yl&&g.push(de)}else if(re==="partial")S.push(K);else if(re==="cache")V.push(K);else if(K.runtimeName()=="session:set"||K.runtimeName()=="session:flash"){let de=K.reference;de!=null&&de instanceof Hs&&N.push(de)}if(K.modifiers!=null){let de=K.modifiers.getModifierValue("partial");if(de!=null){let te=(n=ue.instance)==null?void 0:n.getStructure().findPartial(de);te!=null&&((i=On.instance)==null||i.clearRemovesPageScope(te.originalDocumentUri),(s=On.instance)==null||s.setRemovesPageScope(te.originalDocumentUri,K))}}if(K.isTagNode){let de=(a=Ie.instance)==null?void 0:a.findTag(K.runtimeName());de!=null&&de.requiresClose&&K.isClosedBy==null&&K.isClosingTag==!1&&K.isSelfClosing==!1&&O.push(K)}else K.manifestType==="array"&&K.isClosedBy==null&&O.push(K);let De=(l=(o=tn.instance)==null?void 0:o.checkNode(K))!=null?l:[];De.length>0&&(Y=Y.concat(De))}let z=(u=(c=tn.instance)==null?void 0:c.checkDocument(h))!=null?u:[];z.length>0&&(Y=Y.concat(z)),O.length>0&&Us.registerNodes(t,O),(f=Js.instance)==null||f.registerInjections(t,S),(m=yu.instance)==null||m.registerDocumentSections(t,g),(p=On.instance)==null||p.registerPartialReferences(t,S),(d=On.instance)==null||d.registerCacheReferences(t,V),(_=tn.instance)==null||_.registerDiagnostics(t,Y),(P=Ks.instance)==null||P.registerDocumentSessionVariables(t,N)}}He.listen();module.exports=uR(RV);0&&(module.exports={getAntlersSettings,globalSettings,requestEdits});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */

import {createRequire} from 'module';const require=createRequire(import.meta.url);
var pE=Object.create;var ob=Object.defineProperty;var hE=Object.getOwnPropertyDescriptor;var mE=Object.getOwnPropertyNames;var gE=Object.getPrototypeOf,TE=Object.prototype.hasOwnProperty;var ar=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var pe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var _E=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mE(e))!TE.call(n,i)&&i!==t&&ob(n,i,{get:()=>e[i],enumerable:!(r=hE(e,i))||r.enumerable});return n};var Me=(n,e,t)=>(t=n!=null?pE(gE(n)):{},_E(e||!n||!n.__esModule?ob(t,"default",{value:n,enumerable:!0}):t,n));var bc=pe(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});var kb=function(){function n(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return n.hashStr=function(e,t){return t===void 0&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},n.hashAsciiStr=function(e,t){return t===void 0&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},n._hex=function(e){var t=n.hexChars,r=n.hexOut,i,s,a,l;for(l=0;l<4;l+=1)for(s=l*8,i=e[l],a=0;a<8;a+=2)r[s+1+a]=t.charAt(i&15),i>>>=4,r[s+0+a]=t.charAt(i&15),i>>>=4;return r.join("")},n._md5cycle=function(e,t){var r=e[0],i=e[1],s=e[2],a=e[3];r+=(i&s|~i&a)+t[0]-680876936|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[1]-389564586|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[2]+606105819|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[4]-176418897|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[5]+1200080426|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[6]-1473231341|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[7]-45705983|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[9]-1958414417|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[10]-42063|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[13]-40341101|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[14]-1502002290|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,r+=(i&a|s&~a)+t[1]-165796510|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[6]-1069501632|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[11]+643717713|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[0]-373897302|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[5]-701558691|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[10]+38016083|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[15]-660478335|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[4]-405537848|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[9]+568446438|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[14]-1019803690|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[3]-187363961|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[2]-51403784|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[7]+1735328473|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,r+=(i^s^a)+t[5]-378558|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[8]-2022574463|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[11]+1839030562|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[14]-35309556|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[4]+1272893353|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[7]-155497632|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[13]+681279174|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[0]-358537222|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[3]-722521979|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[6]+76029189|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[9]-640364487|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[12]-421815835|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[15]+530742520|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[2]-995338651|0,i=(i<<23|i>>>9)+s|0,r+=(s^(i|~a))+t[0]-198630844|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[7]+1126891415|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[14]-1416354905|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[5]-57434055|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[3]-1894986606|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[10]-1051523|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[15]-30611744|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[6]-1560198380|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[4]-145523070|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[11]-1120210379|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[2]+718787259|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=r+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=a+e[3]|0},n.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this},n.prototype.appendStr=function(e){var t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a;for(a=0;a<e.length;a+=1){if(s=e.charCodeAt(a),s<128)t[i++]=s;else if(s<2048)t[i++]=(s>>>6)+192,t[i++]=s&63|128;else if(s<55296||s>56319)t[i++]=(s>>>12)+224,t[i++]=s>>>6&63|128,t[i++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++a)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=(s>>>18)+240,t[i++]=s>>>12&63|128,t[i++]=s>>>6&63|128,t[i++]=s&63|128}i>=64&&(this._dataLength+=64,n._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this},n.prototype.appendAsciiStr=function(e){for(var t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a=0;;){for(s=Math.min(e.length-a,64-i);s--;)t[i++]=e.charCodeAt(a++);if(i<64)break;this._dataLength+=64,n._md5cycle(this._state,r),i=0}return this._bufferLength=i,this},n.prototype.appendByteArray=function(e){for(var t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a=0;;){for(s=Math.min(e.length-a,64-i);s--;)t[i++]=e[a++];if(i<64)break;this._dataLength+=64,n._md5cycle(this._state,r),i=0}return this._bufferLength=i,this},n.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},n.prototype.setState=function(e){var t=e.buffer,r=e.state,i=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)},n.prototype.end=function(e){e===void 0&&(e=!1);var t=this._bufferLength,r=this._buffer8,i=this._buffer32,s=(t>>2)+1,a;if(this._dataLength+=t,r[t]=128,r[t+1]=r[t+2]=r[t+3]=0,i.set(n.buffer32Identity.subarray(s),s),t>55&&(n._md5cycle(this._state,i),i.set(n.buffer32Identity)),a=this._dataLength*8,a<=4294967295)i[14]=a;else{var l=a.toString(16).match(/(.*?)(.{0,8})$/);if(l===null)return;var u=parseInt(l[2],16),f=parseInt(l[1],16)||0;i[14]=u,i[15]=f}return n._md5cycle(this._state,i),e?this._state:n._hex(this._state)},n.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),n.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.hexChars="0123456789abcdef",n.hexOut=[],n.onePassHasher=new n,n}();wd.Md5=kb;kb.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.")});var Ec=pe(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.thenable=wt.typedArray=wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function CE(n){return n===!0||n===!1}wt.boolean=CE;function Lb(n){return typeof n=="string"||n instanceof String}wt.string=Lb;function SE(n){return typeof n=="number"||n instanceof Number}wt.number=SE;function EE(n){return n instanceof Error}wt.error=EE;function Db(n){return typeof n=="function"}wt.func=Db;function Fb(n){return Array.isArray(n)}wt.array=Fb;function RE(n){return Fb(n)&&n.every(e=>Lb(e))}wt.stringArray=RE;function kE(n,e){return Array.isArray(n)&&n.every(e)}wt.typedArray=kE;function wE(n){return n&&Db(n.then)}wt.thenable=wE});var Ai=pe(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var Ld;function Dd(){if(Ld===void 0)throw new Error("No runtime abstraction layer installed");return Ld}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Ld=t}n.install=e})(Dd||(Dd={}));Fd.default=Dd});var Md=pe(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.Disposable=void 0;var OE;(function(n){function e(t){return{dispose:t}}n.create=e})(OE=gl.Disposable||(gl.Disposable={}))});var Mb=pe(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.AbstractMessageBuffer=void 0;var LE=13,DE=10,FE=`\r
`,Vd=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,r=0,i=0;e:for(;t<this._chunks.length;){let u=this._chunks[t];r=0;t:for(;r<u.length;){switch(u[r]){case LE:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case DE:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=u.byteLength,t++}if(e!==4)return;let s=this._read(i+r),a=new Map,l=this.toString(s,"ascii").split(FE);if(l.length<2)return a;for(let u=0;u<l.length-2;u++){let f=l[u],d=f.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let h=f.substr(0,d),_=f.substr(d+1).trim();a.set(h,_)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);t.set(a,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};Rc.AbstractMessageBuffer=Vd});var qb=pe(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var ME=Ai(),Vb=ar("util"),Ds=Md(),VE=Mb(),jo=class extends VE.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return jo.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Vb.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};jo.emptyBuffer=Buffer.allocUnsafe(0);var Bd=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ds.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ds.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ds.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ds.Disposable.create(()=>this.stream.off("data",e))}},qd=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ds.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ds.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ds.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let s=a=>{a==null?r():i(a)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},Bb=Object.freeze({messageBuffer:Object.freeze({create:n=>new jo(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Vb.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Bd(n),asWritableStream:n=>new qd(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){return setTimeout(n,e,...t)},clearTimeout(n){clearTimeout(n)},setImmediate(n,...e){return setImmediate(n,...e)},clearImmediate(n){clearImmediate(n)}})});function Ud(){return Bb}(function(n){function e(){ME.default.install(Bb)}n.install=e})(Ud||(Ud={}));jd.default=Ud});var Go=pe(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.stringArray=sn.array=sn.func=sn.error=sn.number=sn.string=sn.boolean=void 0;function BE(n){return n===!0||n===!1}sn.boolean=BE;function Ub(n){return typeof n=="string"||n instanceof String}sn.string=Ub;function qE(n){return typeof n=="number"||n instanceof Number}sn.number=qE;function UE(n){return n instanceof Error}sn.error=UE;function jE(n){return typeof n=="function"}sn.func=jE;function jb(n){return Array.isArray(n)}sn.array=jb;function GE(n){return jb(n)&&n.every(e=>Ub(e))}sn.stringArray=GE});var fp=pe(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.isResponseMessage=me.isNotificationMessage=me.isRequestMessage=me.NotificationType9=me.NotificationType8=me.NotificationType7=me.NotificationType6=me.NotificationType5=me.NotificationType4=me.NotificationType3=me.NotificationType2=me.NotificationType1=me.NotificationType0=me.NotificationType=me.RequestType9=me.RequestType8=me.RequestType7=me.RequestType6=me.RequestType5=me.RequestType4=me.RequestType3=me.RequestType2=me.RequestType1=me.RequestType=me.RequestType0=me.AbstractMessageSignature=me.ParameterStructures=me.ResponseError=me.ErrorCodes=void 0;var Fs=Go(),Gb;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=n.jsonrpcReservedErrorRangeStart,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=n.jsonrpcReservedErrorRangeEnd})(Gb=me.ErrorCodes||(me.ErrorCodes={}));var Tl=class extends Error{constructor(e,t,r){super(t),this.code=Fs.number(e)?e:Gb.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Tl.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};me.ResponseError=Tl;var Yt=class{constructor(e){this.kind=e}static is(e){return e===Yt.auto||e===Yt.byName||e===Yt.byPosition}toString(){return this.kind}};me.ParameterStructures=Yt;Yt.auto=new Yt("auto");Yt.byPosition=new Yt("byPosition");Yt.byName=new Yt("byName");var ot=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Yt.auto}};me.AbstractMessageSignature=ot;var Gd=class extends ot{constructor(e){super(e,0)}};me.RequestType0=Gd;var Wd=class extends ot{constructor(e,t=Yt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};me.RequestType=Wd;var Hd=class extends ot{constructor(e,t=Yt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};me.RequestType1=Hd;var Yd=class extends ot{constructor(e){super(e,2)}};me.RequestType2=Yd;var $d=class extends ot{constructor(e){super(e,3)}};me.RequestType3=$d;var Kd=class extends ot{constructor(e){super(e,4)}};me.RequestType4=Kd;var zd=class extends ot{constructor(e){super(e,5)}};me.RequestType5=zd;var Qd=class extends ot{constructor(e){super(e,6)}};me.RequestType6=Qd;var Xd=class extends ot{constructor(e){super(e,7)}};me.RequestType7=Xd;var Jd=class extends ot{constructor(e){super(e,8)}};me.RequestType8=Jd;var Zd=class extends ot{constructor(e){super(e,9)}};me.RequestType9=Zd;var ep=class extends ot{constructor(e,t=Yt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};me.NotificationType=ep;var tp=class extends ot{constructor(e){super(e,0)}};me.NotificationType0=tp;var np=class extends ot{constructor(e,t=Yt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};me.NotificationType1=np;var rp=class extends ot{constructor(e){super(e,2)}};me.NotificationType2=rp;var ip=class extends ot{constructor(e){super(e,3)}};me.NotificationType3=ip;var sp=class extends ot{constructor(e){super(e,4)}};me.NotificationType4=sp;var op=class extends ot{constructor(e){super(e,5)}};me.NotificationType5=op;var ap=class extends ot{constructor(e){super(e,6)}};me.NotificationType6=ap;var lp=class extends ot{constructor(e){super(e,7)}};me.NotificationType7=lp;var cp=class extends ot{constructor(e){super(e,8)}};me.NotificationType8=cp;var up=class extends ot{constructor(e){super(e,9)}};me.NotificationType9=up;function WE(n){let e=n;return e&&Fs.string(e.method)&&(Fs.string(e.id)||Fs.number(e.id))}me.isRequestMessage=WE;function HE(n){let e=n;return e&&Fs.string(e.method)&&n.id===void 0}me.isNotificationMessage=HE;function YE(n){let e=n;return e&&(e.result!==void 0||!!e.error)&&(Fs.string(e.id)||Fs.number(e.id)||e.id===null)}me.isResponseMessage=YE});var Ho=pe(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Emitter=Ms.Event=void 0;var $E=Ai(),KE;(function(n){let e={dispose(){}};n.None=function(){return e}})(KE=Ms.Event||(Ms.Event={}));var dp=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=r.length;s<a;s++)try{t.push(r[s].apply(i[s],e))}catch(l){$E.default().console.error(l)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Wo=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new dp),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=Wo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ms.Emitter=Wo;Wo._noop=function(){}});var gp=pe(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.CancellationTokenSource=Vs.CancellationToken=void 0;var Wb=Ai(),zE=Go(),pp=Ho(),hp;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:pp.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:pp.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||zE.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(hp=Vs.CancellationToken||(Vs.CancellationToken={}));var QE=Object.freeze(function(n,e){let t=Wb.default().timer.setTimeout(n.bind(e),0);return{dispose(){Wb.default().timer.clearTimeout(t)}}}),kc=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?QE:(this._emitter||(this._emitter=new pp.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},mp=class{get token(){return this._token||(this._token=new kc),this._token}cancel(){this._token?this._token.cancel():this._token=hp.Cancelled}dispose(){this._token?this._token instanceof kc&&this._token.dispose():this._token=hp.None}};Vs.CancellationTokenSource=mp});var Hb=pe(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.ReadableStreamMessageReader=Pi.AbstractMessageReader=Pi.MessageReader=void 0;var wc=Ai(),Yo=Go(),Tp=Ho(),XE;(function(n){function e(t){let r=t;return r&&Yo.func(r.listen)&&Yo.func(r.dispose)&&Yo.func(r.onError)&&Yo.func(r.onClose)&&Yo.func(r.onPartialMessage)}n.is=e})(XE=Pi.MessageReader||(Pi.MessageReader={}));var Oc=class{constructor(){this.errorEmitter=new Tp.Emitter,this.closeEmitter=new Tp.Emitter,this.partialMessageEmitter=new Tp.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Yo.string(e.message)?e.message:"unknown"}`)}};Pi.AbstractMessageReader=Oc;var _p;(function(n){function e(t){var r;let i,s,a,l=new Map,u,f=new Map;if(t===void 0||typeof t=="string")i=t??"utf-8";else{if(i=(r=t.charset)!==null&&r!==void 0?r:"utf-8",t.contentDecoder!==void 0&&(a=t.contentDecoder,l.set(a.name,a)),t.contentDecoders!==void 0)for(let d of t.contentDecoders)l.set(d.name,d);if(t.contentTypeDecoder!==void 0&&(u=t.contentTypeDecoder,f.set(u.name,u)),t.contentTypeDecoders!==void 0)for(let d of t.contentTypeDecoders)f.set(d.name,d)}return u===void 0&&(u=wc.default().applicationJson.decoder,f.set(u.name,u)),{charset:i,contentDecoder:a,contentDecoders:l,contentTypeDecoder:u,contentTypeDecoders:f}}n.fromOptions=e})(_p||(_p={}));var yp=class extends Oc{constructor(e,t){super(),this.readable=e,this.options=_p.fromOptions(t),this.buffer=wc.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let a=parseInt(s);if(isNaN(a))throw new Error("Content-Length value must be a number.");this.nextMessageLength=a}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(t):r=Promise.resolve(t),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(wc.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=wc.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Pi.ReadableStreamMessageReader=yp});var Yb=pe(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.Semaphore=void 0;var JE=Ai(),bp=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||JE.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Lc.Semaphore=bp});var Qb=pe(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.WriteableStreamMessageWriter=vi.AbstractMessageWriter=vi.MessageWriter=void 0;var $b=Ai(),_l=Go(),ZE=Yb(),Kb=Ho(),eR="Content-Length: ",zb=`\r
`,tR;(function(n){function e(t){let r=t;return r&&_l.func(r.dispose)&&_l.func(r.onClose)&&_l.func(r.onError)&&_l.func(r.write)}n.is=e})(tR=vi.MessageWriter||(vi.MessageWriter={}));var Dc=class{constructor(){this.errorEmitter=new Kb.Emitter,this.closeEmitter=new Kb.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${_l.string(e.message)?e.message:"unknown"}`)}};vi.AbstractMessageWriter=Dc;var Np;(function(n){function e(t){var r,i;return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:$b.default().applicationJson.encoder}:{charset:(r=t.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:(i=t.contentTypeEncoder)!==null&&i!==void 0?i:$b.default().applicationJson.encoder}}n.fromOptions=e})(Np||(Np={}));var Ip=class extends Dc{constructor(e,t){super(),this.writable=e,this.options=Np.fromOptions(t),this.errorCount=0,this.writeSemaphore=new ZE.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(eR,r.byteLength.toString(),zb),i.push(zb),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};vi.WriteableStreamMessageWriter=Ip});var Xb=pe(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.LRUCache=Ci.LinkedMap=Ci.Touch=void 0;var mn;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(mn=Ci.Touch||(Ci.Touch={}));var Fc=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=mn.None){let r=this._map.get(e);if(!!r)return t!==mn.None&&this.touch(r,t),r.value}set(e,t,r=mn.None){let i=this._map.get(e);if(i)i.value=t,r!==mn.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case mn.None:this.addItemLast(i);break;case mn.First:this.addItemFirst(i);break;case mn.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==mn.First&&t!==mn.Last)){if(t===mn.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===mn.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Ci.LinkedMap=Fc;var xp=class extends Fc{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=mn.AsNew){return super.get(e,t)}peek(e){return super.get(e,mn.None)}set(e,t){return super.set(e,t,mn.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ci.LRUCache=xp});var nN=pe(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.createMessageConnection=Se.ConnectionOptions=Se.CancellationStrategy=Se.CancellationSenderStrategy=Se.CancellationReceiverStrategy=Se.ConnectionStrategy=Se.ConnectionError=Se.ConnectionErrors=Se.LogTraceNotification=Se.SetTraceNotification=Se.TraceFormat=Se.Trace=Se.NullLogger=Se.ProgressType=void 0;var Jb=Ai(),$t=Go(),ve=fp(),Zb=Xb(),yl=Ho(),Ap=gp(),bl;(function(n){n.type=new ve.NotificationType("$/cancelRequest")})(bl||(bl={}));var Vc;(function(n){n.type=new ve.NotificationType("$/progress")})(Vc||(Vc={}));var Pp=class{constructor(){}};Se.ProgressType=Pp;var vp;(function(n){function e(t){return $t.func(t)}n.is=e})(vp||(vp={}));Se.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Ot;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Verbose=2]="Verbose"})(Ot=Se.Trace||(Se.Trace={}));(function(n){function e(r){if(!$t.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Ot=Se.Trace||(Se.Trace={}));var Mr;(function(n){n.Text="text",n.JSON="json"})(Mr=Se.TraceFormat||(Se.TraceFormat={}));(function(n){function e(t){return t=t.toLowerCase(),t==="json"?n.JSON:n.Text}n.fromString=e})(Mr=Se.TraceFormat||(Se.TraceFormat={}));var eN;(function(n){n.type=new ve.NotificationType("$/setTrace")})(eN=Se.SetTraceNotification||(Se.SetTraceNotification={}));var Cp;(function(n){n.type=new ve.NotificationType("$/logTrace")})(Cp=Se.LogTraceNotification||(Se.LogTraceNotification={}));var Mc;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(Mc=Se.ConnectionErrors||(Se.ConnectionErrors={}));var Hi=class extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,Hi.prototype)}};Se.ConnectionError=Hi;var tN;(function(n){function e(t){let r=t;return r&&$t.func(r.cancelUndispatched)}n.is=e})(tN=Se.ConnectionStrategy||(Se.ConnectionStrategy={}));var Sp;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new Ap.CancellationTokenSource}});function e(t){let r=t;return r&&$t.func(r.createCancellationTokenSource)}n.is=e})(Sp=Se.CancellationReceiverStrategy||(Se.CancellationReceiverStrategy={}));var Ep;(function(n){n.Message=Object.freeze({sendCancellation(t,r){t.sendNotification(bl.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&$t.func(r.sendCancellation)&&$t.func(r.cleanup)}n.is=e})(Ep=Se.CancellationSenderStrategy||(Se.CancellationSenderStrategy={}));var Rp;(function(n){n.Message=Object.freeze({receiver:Sp.Message,sender:Ep.Message});function e(t){let r=t;return r&&Sp.is(r.receiver)&&Ep.is(r.sender)}n.is=e})(Rp=Se.CancellationStrategy||(Se.CancellationStrategy={}));var nR;(function(n){function e(t){let r=t;return r&&(Rp.is(r.cancellationStrategy)||tN.is(r.connectionStrategy))}n.is=e})(nR=Se.ConnectionOptions||(Se.ConnectionOptions={}));var Vr;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(Vr||(Vr={}));function rR(n,e,t,r){let i=t!==void 0?t:Se.NullLogger,s=0,a=0,l=0,u="2.0",f,d=Object.create(null),h,_=Object.create(null),b=new Map,g,v=new Zb.LinkedMap,O=Object.create(null),E=Object.create(null),C=Ot.Off,q=Mr.Text,Z,ue=Vr.New,de=new yl.Emitter,Ue=new yl.Emitter,_t=new yl.Emitter,Qt=new yl.Emitter,ft=new yl.Emitter,ke=r&&r.cancellationStrategy?r.cancellationStrategy:Rp.Message;function vr(F){if(F===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+F.toString()}function fo(F){return F===null?"res-unknown-"+(++l).toString():"res-"+F.toString()}function po(){return"not-"+(++a).toString()}function Ya(F,w){ve.isRequestMessage(w)?F.set(vr(w.id),w):ve.isResponseMessage(w)?F.set(fo(w.id),w):F.set(po(),w)}function $a(F){}function Mi(){return ue===Vr.Listening}function Kr(){return ue===Vr.Closed}function Xe(){return ue===Vr.Disposed}function Vi(){(ue===Vr.New||ue===Vr.Listening)&&(ue=Vr.Closed,Ue.fire(void 0))}function ho(F){de.fire([F,void 0,void 0])}function je(F){de.fire(F)}n.onClose(Vi),n.onError(ho),e.onClose(Vi),e.onError(je);function Ns(){g||v.size===0||(g=Jb.default().timer.setImmediate(()=>{g=void 0,mo()}))}function mo(){if(v.size===0)return;let F=v.shift();try{ve.isRequestMessage(F)?go(F):ve.isNotificationMessage(F)?Is(F):ve.isResponseMessage(F)?To(F):_o(F)}finally{Ns()}}let Ka=F=>{try{if(ve.isNotificationMessage(F)&&F.method===bl.type.method){let w=vr(F.params.id),y=v.get(w);if(ve.isRequestMessage(y)){let L=r?.connectionStrategy,B=L&&L.cancelUndispatched?L.cancelUndispatched(y,$a):void 0;if(B&&(B.error!==void 0||B.result!==void 0)){v.delete(w),B.id=y.id,hi(B,F.method,Date.now()),e.write(B);return}}}Ya(v,F)}finally{Ns()}};function go(F){if(Xe())return;function w(Y,ce,Te){let we={jsonrpc:u,id:F.id};Y instanceof ve.ResponseError?we.error=Y.toJson():we.result=Y===void 0?null:Y,hi(we,ce,Te),e.write(we)}function y(Y,ce,Te){let we={jsonrpc:u,id:F.id,error:Y.toJson()};hi(we,ce,Te),e.write(we)}function L(Y,ce,Te){Y===void 0&&(Y=null);let we={jsonrpc:u,id:F.id,result:Y};hi(we,ce,Te),e.write(we)}bo(F);let B=d[F.method],S,N;B&&(S=B.type,N=B.handler);let j=Date.now();if(N||f){let Y=String(F.id),ce=ke.receiver.createCancellationTokenSource(Y);E[Y]=ce;try{let Te;if(N)if(F.params===void 0){if(S!==void 0&&S.numberOfParams!==0){y(new ve.ResponseError(ve.ErrorCodes.InvalidParams,`Request ${F.method} defines ${S.numberOfParams} params but recevied none.`),F.method,j);return}Te=N(ce.token)}else if(Array.isArray(F.params)){if(S!==void 0&&S.parameterStructures===ve.ParameterStructures.byName){y(new ve.ResponseError(ve.ErrorCodes.InvalidParams,`Request ${F.method} defines parameters by name but received parameters by position`),F.method,j);return}Te=N(...F.params,ce.token)}else{if(S!==void 0&&S.parameterStructures===ve.ParameterStructures.byPosition){y(new ve.ResponseError(ve.ErrorCodes.InvalidParams,`Request ${F.method} defines parameters by position but received parameters by name`),F.method,j);return}Te=N(F.params,ce.token)}else f&&(Te=f(F.method,F.params,ce.token));let we=Te;Te?we.then?we.then(Je=>{delete E[Y],w(Je,F.method,j)},Je=>{delete E[Y],Je instanceof ve.ResponseError?y(Je,F.method,j):Je&&$t.string(Je.message)?y(new ve.ResponseError(ve.ErrorCodes.InternalError,`Request ${F.method} failed with message: ${Je.message}`),F.method,j):y(new ve.ResponseError(ve.ErrorCodes.InternalError,`Request ${F.method} failed unexpectedly without providing any details.`),F.method,j)}):(delete E[Y],w(Te,F.method,j)):(delete E[Y],L(Te,F.method,j))}catch(Te){delete E[Y],Te instanceof ve.ResponseError?w(Te,F.method,j):Te&&$t.string(Te.message)?y(new ve.ResponseError(ve.ErrorCodes.InternalError,`Request ${F.method} failed with message: ${Te.message}`),F.method,j):y(new ve.ResponseError(ve.ErrorCodes.InternalError,`Request ${F.method} failed unexpectedly without providing any details.`),F.method,j)}}else y(new ve.ResponseError(ve.ErrorCodes.MethodNotFound,`Unhandled method ${F.method}`),F.method,j)}function To(F){if(!Xe())if(F.id===null)F.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(F.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let w=String(F.id),y=O[w];if(No(F,y),y){delete O[w];try{if(F.error){let L=F.error;y.reject(new ve.ResponseError(L.code,L.message,L.data))}else if(F.result!==void 0)y.resolve(F.result);else throw new Error("Should never happen.")}catch(L){L.message?i.error(`Response handler '${y.method}' failed with message: ${L.message}`):i.error(`Response handler '${y.method}' failed unexpectedly.`)}}}}function Is(F){if(Xe())return;let w,y;if(F.method===bl.type.method)y=L=>{let B=L.id,S=E[String(B)];S&&S.cancel()};else{let L=_[F.method];L&&(y=L.handler,w=L.type)}if(y||h)try{Qa(F),y?F.params===void 0?(w!==void 0&&w.numberOfParams!==0&&w.parameterStructures!==ve.ParameterStructures.byName&&i.error(`Notification ${F.method} defines ${w.numberOfParams} params but recevied none.`),y()):Array.isArray(F.params)?(w!==void 0&&(w.parameterStructures===ve.ParameterStructures.byName&&i.error(`Notification ${F.method} defines parameters by name but received parameters by position`),w.numberOfParams!==F.params.length&&i.error(`Notification ${F.method} defines ${w.numberOfParams} params but received ${F.params.length} argumennts`)),y(...F.params)):(w!==void 0&&w.parameterStructures===ve.ParameterStructures.byPosition&&i.error(`Notification ${F.method} defines parameters by position but received parameters by name`),y(F.params)):h&&h(F.method,F.params)}catch(L){L.message?i.error(`Notification handler '${F.method}' failed with message: ${L.message}`):i.error(`Notification handler '${F.method}' failed unexpectedly.`)}else _t.fire(F)}function _o(F){if(!F){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(F,null,4)}`);let w=F;if($t.string(w.id)||$t.number(w.id)){let y=String(w.id),L=O[y];L&&L.reject(new Error("The received response has neither a result nor an error property."))}}function yo(F){if(!(C===Ot.Off||!Z))if(q===Mr.Text){let w;C===Ot.Verbose&&F.params&&(w=`Params: ${JSON.stringify(F.params,null,4)}

`),Z.log(`Sending request '${F.method} - (${F.id})'.`,w)}else Cr("send-request",F)}function za(F){if(!(C===Ot.Off||!Z))if(q===Mr.Text){let w;C===Ot.Verbose&&(F.params?w=`Params: ${JSON.stringify(F.params,null,4)}

`:w=`No parameters provided.

`),Z.log(`Sending notification '${F.method}'.`,w)}else Cr("send-notification",F)}function hi(F,w,y){if(!(C===Ot.Off||!Z))if(q===Mr.Text){let L;C===Ot.Verbose&&(F.error&&F.error.data?L=`Error data: ${JSON.stringify(F.error.data,null,4)}

`:F.result?L=`Result: ${JSON.stringify(F.result,null,4)}

`:F.error===void 0&&(L=`No result returned.

`)),Z.log(`Sending response '${w} - (${F.id})'. Processing request took ${Date.now()-y}ms`,L)}else Cr("send-response",F)}function bo(F){if(!(C===Ot.Off||!Z))if(q===Mr.Text){let w;C===Ot.Verbose&&F.params&&(w=`Params: ${JSON.stringify(F.params,null,4)}

`),Z.log(`Received request '${F.method} - (${F.id})'.`,w)}else Cr("receive-request",F)}function Qa(F){if(!(C===Ot.Off||!Z||F.method===Cp.type.method))if(q===Mr.Text){let w;C===Ot.Verbose&&(F.params?w=`Params: ${JSON.stringify(F.params,null,4)}

`:w=`No parameters provided.

`),Z.log(`Received notification '${F.method}'.`,w)}else Cr("receive-notification",F)}function No(F,w){if(!(C===Ot.Off||!Z))if(q===Mr.Text){let y;if(C===Ot.Verbose&&(F.error&&F.error.data?y=`Error data: ${JSON.stringify(F.error.data,null,4)}

`:F.result?y=`Result: ${JSON.stringify(F.result,null,4)}

`:F.error===void 0&&(y=`No result returned.

`)),w){let L=F.error?` Request failed: ${F.error.message} (${F.error.code}).`:"";Z.log(`Received response '${w.method} - (${F.id})' in ${Date.now()-w.timerStart}ms.${L}`,y)}else Z.log(`Received response ${F.id} without active response promise.`,y)}else Cr("receive-response",F)}function Cr(F,w){if(!Z||C===Ot.Off)return;let y={isLSPMessage:!0,type:F,message:w,timestamp:Date.now()};Z.log(y)}function mi(){if(Kr())throw new Hi(Mc.Closed,"Connection is closed.");if(Xe())throw new Hi(Mc.Disposed,"Connection is disposed.")}function Io(){if(Mi())throw new Hi(Mc.AlreadyListening,"Connection is already listening")}function xo(){if(!Mi())throw new Error("Call listen() first.")}function gi(F){return F===void 0?null:F}function xs(F){if(F!==null)return F}function As(F){return F!=null&&!Array.isArray(F)&&typeof F=="object"}function sr(F,w){switch(F){case ve.ParameterStructures.auto:return As(w)?xs(w):[gi(w)];case ve.ParameterStructures.byName:if(!As(w))throw new Error("Recevied parameters by name but param is not an object literal.");return xs(w);case ve.ParameterStructures.byPosition:return[gi(w)];default:throw new Error(`Unknown parameter structure ${F.toString()}`)}}function Ps(F,w){let y,L=F.numberOfParams;switch(L){case 0:y=void 0;break;case 1:y=sr(F.parameterStructures,w[0]);break;default:y=[];for(let B=0;B<w.length&&B<L;B++)y.push(gi(w[B]));if(w.length<L)for(let B=w.length;B<L;B++)y.push(null);break}return y}let zr={sendNotification:(F,...w)=>{mi();let y,L;if($t.string(F)){y=F;let S=w[0],N=0,j=ve.ParameterStructures.auto;ve.ParameterStructures.is(S)&&(N=1,j=S);let Y=w.length,ce=Y-N;switch(ce){case 0:L=void 0;break;case 1:L=sr(j,w[N]);break;default:if(j===ve.ParameterStructures.byName)throw new Error(`Recevied ${ce} parameters for 'by Name' notification parameter structure.`);L=w.slice(N,Y).map(Te=>gi(Te));break}}else{let S=w;y=F.method,L=Ps(F,S)}let B={jsonrpc:u,method:y,params:L};za(B),e.write(B)},onNotification:(F,w)=>{mi();let y;return $t.func(F)?h=F:w&&($t.string(F)?(y=F,_[F]={type:void 0,handler:w}):(y=F.method,_[F.method]={type:F,handler:w})),{dispose:()=>{y!==void 0?delete _[y]:h=void 0}}},onProgress:(F,w,y)=>{if(b.has(w))throw new Error(`Progress handler for token ${w} already registered`);return b.set(w,y),{dispose:()=>{b.delete(w)}}},sendProgress:(F,w,y)=>{zr.sendNotification(Vc.type,{token:w,value:y})},onUnhandledProgress:Qt.event,sendRequest:(F,...w)=>{mi(),xo();let y,L,B;if($t.string(F)){y=F;let Y=w[0],ce=w[w.length-1],Te=0,we=ve.ParameterStructures.auto;ve.ParameterStructures.is(Y)&&(Te=1,we=Y);let Je=w.length;Ap.CancellationToken.is(ce)&&(Je=Je-1,B=ce);let yt=Je-Te;switch(yt){case 0:L=void 0;break;case 1:L=sr(we,w[Te]);break;default:if(we===ve.ParameterStructures.byName)throw new Error(`Recevied ${yt} parameters for 'by Name' request parameter structure.`);L=w.slice(Te,Je).map(vt=>gi(vt));break}}else{let Y=w;y=F.method,L=Ps(F,Y);let ce=F.numberOfParams;B=Ap.CancellationToken.is(Y[ce])?Y[ce]:void 0}let S=s++,N;return B&&(N=B.onCancellationRequested(()=>{ke.sender.sendCancellation(zr,S)})),new Promise((Y,ce)=>{let Te={jsonrpc:u,id:S,method:y,params:L},we=vt=>{Y(vt),ke.sender.cleanup(S),N?.dispose()},Je=vt=>{ce(vt),ke.sender.cleanup(S),N?.dispose()},yt={method:y,timerStart:Date.now(),resolve:we,reject:Je};yo(Te);try{e.write(Te)}catch(vt){yt.reject(new ve.ResponseError(ve.ErrorCodes.MessageWriteError,vt.message?vt.message:"Unknown reason")),yt=null}yt&&(O[String(S)]=yt)})},onRequest:(F,w)=>{mi();let y=null;return vp.is(F)?(y=void 0,f=F):$t.string(F)?(y=null,w!==void 0&&(y=F,d[F]={handler:w,type:void 0})):w!==void 0&&(y=F.method,d[F.method]={type:F,handler:w}),{dispose:()=>{y!==null&&(y!==void 0?delete d[y]:f=void 0)}}},trace:(F,w,y)=>{let L=!1,B=Mr.Text;y!==void 0&&($t.boolean(y)?L=y:(L=y.sendNotification||!1,B=y.traceFormat||Mr.Text)),C=F,q=B,C===Ot.Off?Z=void 0:Z=w,L&&!Kr()&&!Xe()&&zr.sendNotification(eN.type,{value:Ot.toString(F)})},onError:de.event,onClose:Ue.event,onUnhandledNotification:_t.event,onDispose:ft.event,end:()=>{e.end()},dispose:()=>{if(Xe())return;ue=Vr.Disposed,ft.fire(void 0);let F=new Error("Connection got disposed.");Object.keys(O).forEach(w=>{O[w].reject(F)}),O=Object.create(null),E=Object.create(null),v=new Zb.LinkedMap,$t.func(e.dispose)&&e.dispose(),$t.func(n.dispose)&&n.dispose()},listen:()=>{mi(),Io(),ue=Vr.Listening,n.listen(Ka)},inspect:()=>{Jb.default().console.log("inspect")}};return zr.onNotification(Cp.type,F=>{C===Ot.Off||!Z||Z.log(F.message,C===Ot.Verbose?F.verbose:void 0)}),zr.onNotification(Vc.type,F=>{let w=b.get(F.token);w?w(F.value):Qt.fire(F)}),zr}Se.createMessageConnection=rR});var Op=pe(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.CancellationSenderStrategy=ee.CancellationReceiverStrategy=ee.ConnectionError=ee.ConnectionErrors=ee.LogTraceNotification=ee.SetTraceNotification=ee.TraceFormat=ee.Trace=ee.ProgressType=ee.createMessageConnection=ee.NullLogger=ee.ConnectionOptions=ee.ConnectionStrategy=ee.WriteableStreamMessageWriter=ee.AbstractMessageWriter=ee.MessageWriter=ee.ReadableStreamMessageReader=ee.AbstractMessageReader=ee.MessageReader=ee.CancellationToken=ee.CancellationTokenSource=ee.Emitter=ee.Event=ee.Disposable=ee.ParameterStructures=ee.NotificationType9=ee.NotificationType8=ee.NotificationType7=ee.NotificationType6=ee.NotificationType5=ee.NotificationType4=ee.NotificationType3=ee.NotificationType2=ee.NotificationType1=ee.NotificationType0=ee.NotificationType=ee.ErrorCodes=ee.ResponseError=ee.RequestType9=ee.RequestType8=ee.RequestType7=ee.RequestType6=ee.RequestType5=ee.RequestType4=ee.RequestType3=ee.RequestType2=ee.RequestType1=ee.RequestType0=ee.RequestType=ee.RAL=void 0;ee.CancellationStrategy=void 0;var at=fp();Object.defineProperty(ee,"RequestType",{enumerable:!0,get:function(){return at.RequestType}});Object.defineProperty(ee,"RequestType0",{enumerable:!0,get:function(){return at.RequestType0}});Object.defineProperty(ee,"RequestType1",{enumerable:!0,get:function(){return at.RequestType1}});Object.defineProperty(ee,"RequestType2",{enumerable:!0,get:function(){return at.RequestType2}});Object.defineProperty(ee,"RequestType3",{enumerable:!0,get:function(){return at.RequestType3}});Object.defineProperty(ee,"RequestType4",{enumerable:!0,get:function(){return at.RequestType4}});Object.defineProperty(ee,"RequestType5",{enumerable:!0,get:function(){return at.RequestType5}});Object.defineProperty(ee,"RequestType6",{enumerable:!0,get:function(){return at.RequestType6}});Object.defineProperty(ee,"RequestType7",{enumerable:!0,get:function(){return at.RequestType7}});Object.defineProperty(ee,"RequestType8",{enumerable:!0,get:function(){return at.RequestType8}});Object.defineProperty(ee,"RequestType9",{enumerable:!0,get:function(){return at.RequestType9}});Object.defineProperty(ee,"ResponseError",{enumerable:!0,get:function(){return at.ResponseError}});Object.defineProperty(ee,"ErrorCodes",{enumerable:!0,get:function(){return at.ErrorCodes}});Object.defineProperty(ee,"NotificationType",{enumerable:!0,get:function(){return at.NotificationType}});Object.defineProperty(ee,"NotificationType0",{enumerable:!0,get:function(){return at.NotificationType0}});Object.defineProperty(ee,"NotificationType1",{enumerable:!0,get:function(){return at.NotificationType1}});Object.defineProperty(ee,"NotificationType2",{enumerable:!0,get:function(){return at.NotificationType2}});Object.defineProperty(ee,"NotificationType3",{enumerable:!0,get:function(){return at.NotificationType3}});Object.defineProperty(ee,"NotificationType4",{enumerable:!0,get:function(){return at.NotificationType4}});Object.defineProperty(ee,"NotificationType5",{enumerable:!0,get:function(){return at.NotificationType5}});Object.defineProperty(ee,"NotificationType6",{enumerable:!0,get:function(){return at.NotificationType6}});Object.defineProperty(ee,"NotificationType7",{enumerable:!0,get:function(){return at.NotificationType7}});Object.defineProperty(ee,"NotificationType8",{enumerable:!0,get:function(){return at.NotificationType8}});Object.defineProperty(ee,"NotificationType9",{enumerable:!0,get:function(){return at.NotificationType9}});Object.defineProperty(ee,"ParameterStructures",{enumerable:!0,get:function(){return at.ParameterStructures}});var iR=Md();Object.defineProperty(ee,"Disposable",{enumerable:!0,get:function(){return iR.Disposable}});var rN=Ho();Object.defineProperty(ee,"Event",{enumerable:!0,get:function(){return rN.Event}});Object.defineProperty(ee,"Emitter",{enumerable:!0,get:function(){return rN.Emitter}});var iN=gp();Object.defineProperty(ee,"CancellationTokenSource",{enumerable:!0,get:function(){return iN.CancellationTokenSource}});Object.defineProperty(ee,"CancellationToken",{enumerable:!0,get:function(){return iN.CancellationToken}});var kp=Hb();Object.defineProperty(ee,"MessageReader",{enumerable:!0,get:function(){return kp.MessageReader}});Object.defineProperty(ee,"AbstractMessageReader",{enumerable:!0,get:function(){return kp.AbstractMessageReader}});Object.defineProperty(ee,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return kp.ReadableStreamMessageReader}});var wp=Qb();Object.defineProperty(ee,"MessageWriter",{enumerable:!0,get:function(){return wp.MessageWriter}});Object.defineProperty(ee,"AbstractMessageWriter",{enumerable:!0,get:function(){return wp.AbstractMessageWriter}});Object.defineProperty(ee,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return wp.WriteableStreamMessageWriter}});var Dn=nN();Object.defineProperty(ee,"ConnectionStrategy",{enumerable:!0,get:function(){return Dn.ConnectionStrategy}});Object.defineProperty(ee,"ConnectionOptions",{enumerable:!0,get:function(){return Dn.ConnectionOptions}});Object.defineProperty(ee,"NullLogger",{enumerable:!0,get:function(){return Dn.NullLogger}});Object.defineProperty(ee,"createMessageConnection",{enumerable:!0,get:function(){return Dn.createMessageConnection}});Object.defineProperty(ee,"ProgressType",{enumerable:!0,get:function(){return Dn.ProgressType}});Object.defineProperty(ee,"Trace",{enumerable:!0,get:function(){return Dn.Trace}});Object.defineProperty(ee,"TraceFormat",{enumerable:!0,get:function(){return Dn.TraceFormat}});Object.defineProperty(ee,"SetTraceNotification",{enumerable:!0,get:function(){return Dn.SetTraceNotification}});Object.defineProperty(ee,"LogTraceNotification",{enumerable:!0,get:function(){return Dn.LogTraceNotification}});Object.defineProperty(ee,"ConnectionErrors",{enumerable:!0,get:function(){return Dn.ConnectionErrors}});Object.defineProperty(ee,"ConnectionError",{enumerable:!0,get:function(){return Dn.ConnectionError}});Object.defineProperty(ee,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Dn.CancellationReceiverStrategy}});Object.defineProperty(ee,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Dn.CancellationSenderStrategy}});Object.defineProperty(ee,"CancellationStrategy",{enumerable:!0,get:function(){return Dn.CancellationStrategy}});var sR=Ai();ee.RAL=sR.default});var Ko=pe(Qe=>{"use strict";var oR=Qe&&Qe.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),aR=Qe&&Qe.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&oR(e,n,t)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createMessageConnection=Qe.createServerSocketTransport=Qe.createClientSocketTransport=Qe.createServerPipeTransport=Qe.createClientPipeTransport=Qe.generateRandomPipeName=Qe.StreamMessageWriter=Qe.StreamMessageReader=Qe.SocketMessageWriter=Qe.SocketMessageReader=Qe.IPCMessageWriter=Qe.IPCMessageReader=void 0;var $o=qb();$o.default.install();var ri=Op(),sN=ar("path"),lR=ar("os"),cR=ar("crypto"),Uc=ar("net");aR(Op(),Qe);var Lp=class extends ri.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),ri.Disposable.create(()=>this.process.off("message",e))}};Qe.IPCMessageReader=Lp;var Dp=class extends ri.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Qe.IPCMessageWriter=Dp;var Bs=class extends ri.ReadableStreamMessageReader{constructor(e,t="utf-8"){super($o.default().stream.asReadableStream(e),t)}};Qe.SocketMessageReader=Bs;var qs=class extends ri.WriteableStreamMessageWriter{constructor(e,t){super($o.default().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Qe.SocketMessageWriter=qs;var Bc=class extends ri.ReadableStreamMessageReader{constructor(e,t){super($o.default().stream.asReadableStream(e),t)}};Qe.StreamMessageReader=Bc;var qc=class extends ri.WriteableStreamMessageWriter{constructor(e,t){super($o.default().stream.asWritableStream(e),t)}};Qe.StreamMessageWriter=qc;var oN=process.env.XDG_RUNTIME_DIR,uR=new Map([["linux",107],["darwin",103]]);function fR(){let n=cR.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;oN?e=sN.join(oN,`vscode-ipc-${n}.sock`):e=sN.join(lR.tmpdir(),`vscode-${n}.sock`);let t=uR.get(process.platform);return t!==void 0&&e.length>=t&&$o.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}Qe.generateRandomPipeName=fR;function dR(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=Uc.createServer(l=>{a.close(),t([new Bs(l,e),new qs(l,e)])});a.on("error",s),a.listen(n,()=>{a.removeListener("error",s),i({onConnected:()=>r})})})}Qe.createClientPipeTransport=dR;function pR(n,e="utf-8"){let t=Uc.createConnection(n);return[new Bs(t,e),new qs(t,e)]}Qe.createServerPipeTransport=pR;function hR(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=Uc.createServer(l=>{a.close(),t([new Bs(l,e),new qs(l,e)])});a.on("error",s),a.listen(n,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>r})})})}Qe.createClientSocketTransport=hR;function mR(n,e="utf-8"){let t=Uc.createConnection(n,"127.0.0.1");return[new Bs(t,e),new qs(t,e)]}Qe.createServerSocketTransport=mR;function gR(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function TR(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function _R(n,e,t,r){t||(t=ri.NullLogger);let i=gR(n)?new Bc(n):n,s=TR(e)?new qc(e):e;return ri.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),ri.createMessageConnection(i,s,t,r)}Qe.createMessageConnection=_R});var Fp=pe((KB,aN)=>{"use strict";aN.exports=Ko()});var dt=pe((lN,jc)=>{(function(n){if(typeof jc=="object"&&typeof jc.exports=="object"){var e=n(ar,lN);e!==void 0&&(jc.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var t;(function(y){y.MIN_VALUE=-2147483648,y.MAX_VALUE=2147483647})(t=e.integer||(e.integer={}));var r;(function(y){y.MIN_VALUE=0,y.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(y){function L(S,N){return S===Number.MAX_VALUE&&(S=r.MAX_VALUE),N===Number.MAX_VALUE&&(N=r.MAX_VALUE),{line:S,character:N}}y.create=L;function B(S){var N=S;return w.objectLiteral(N)&&w.uinteger(N.line)&&w.uinteger(N.character)}y.is=B})(i=e.Position||(e.Position={}));var s;(function(y){function L(S,N,j,Y){if(w.uinteger(S)&&w.uinteger(N)&&w.uinteger(j)&&w.uinteger(Y))return{start:i.create(S,N),end:i.create(j,Y)};if(i.is(S)&&i.is(N))return{start:S,end:N};throw new Error("Range#create called with invalid arguments["+S+", "+N+", "+j+", "+Y+"]")}y.create=L;function B(S){var N=S;return w.objectLiteral(N)&&i.is(N.start)&&i.is(N.end)}y.is=B})(s=e.Range||(e.Range={}));var a;(function(y){function L(S,N){return{uri:S,range:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&s.is(N.range)&&(w.string(N.uri)||w.undefined(N.uri))}y.is=B})(a=e.Location||(e.Location={}));var l;(function(y){function L(S,N,j,Y){return{targetUri:S,targetRange:N,targetSelectionRange:j,originSelectionRange:Y}}y.create=L;function B(S){var N=S;return w.defined(N)&&s.is(N.targetRange)&&w.string(N.targetUri)&&(s.is(N.targetSelectionRange)||w.undefined(N.targetSelectionRange))&&(s.is(N.originSelectionRange)||w.undefined(N.originSelectionRange))}y.is=B})(l=e.LocationLink||(e.LocationLink={}));var u;(function(y){function L(S,N,j,Y){return{red:S,green:N,blue:j,alpha:Y}}y.create=L;function B(S){var N=S;return w.numberRange(N.red,0,1)&&w.numberRange(N.green,0,1)&&w.numberRange(N.blue,0,1)&&w.numberRange(N.alpha,0,1)}y.is=B})(u=e.Color||(e.Color={}));var f;(function(y){function L(S,N){return{range:S,color:N}}y.create=L;function B(S){var N=S;return s.is(N.range)&&u.is(N.color)}y.is=B})(f=e.ColorInformation||(e.ColorInformation={}));var d;(function(y){function L(S,N,j){return{label:S,textEdit:N,additionalTextEdits:j}}y.create=L;function B(S){var N=S;return w.string(N.label)&&(w.undefined(N.textEdit)||q.is(N))&&(w.undefined(N.additionalTextEdits)||w.typedArray(N.additionalTextEdits,q.is))}y.is=B})(d=e.ColorPresentation||(e.ColorPresentation={}));var h;(function(y){y.Comment="comment",y.Imports="imports",y.Region="region"})(h=e.FoldingRangeKind||(e.FoldingRangeKind={}));var _;(function(y){function L(S,N,j,Y,ce){var Te={startLine:S,endLine:N};return w.defined(j)&&(Te.startCharacter=j),w.defined(Y)&&(Te.endCharacter=Y),w.defined(ce)&&(Te.kind=ce),Te}y.create=L;function B(S){var N=S;return w.uinteger(N.startLine)&&w.uinteger(N.startLine)&&(w.undefined(N.startCharacter)||w.uinteger(N.startCharacter))&&(w.undefined(N.endCharacter)||w.uinteger(N.endCharacter))&&(w.undefined(N.kind)||w.string(N.kind))}y.is=B})(_=e.FoldingRange||(e.FoldingRange={}));var b;(function(y){function L(S,N){return{location:S,message:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&a.is(N.location)&&w.string(N.message)}y.is=B})(b=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var g;(function(y){y.Error=1,y.Warning=2,y.Information=3,y.Hint=4})(g=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var v;(function(y){y.Unnecessary=1,y.Deprecated=2})(v=e.DiagnosticTag||(e.DiagnosticTag={}));var O;(function(y){function L(B){var S=B;return S!=null&&w.string(S.href)}y.is=L})(O=e.CodeDescription||(e.CodeDescription={}));var E;(function(y){function L(S,N,j,Y,ce,Te){var we={range:S,message:N};return w.defined(j)&&(we.severity=j),w.defined(Y)&&(we.code=Y),w.defined(ce)&&(we.source=ce),w.defined(Te)&&(we.relatedInformation=Te),we}y.create=L;function B(S){var N,j=S;return w.defined(j)&&s.is(j.range)&&w.string(j.message)&&(w.number(j.severity)||w.undefined(j.severity))&&(w.integer(j.code)||w.string(j.code)||w.undefined(j.code))&&(w.undefined(j.codeDescription)||w.string((N=j.codeDescription)===null||N===void 0?void 0:N.href))&&(w.string(j.source)||w.undefined(j.source))&&(w.undefined(j.relatedInformation)||w.typedArray(j.relatedInformation,b.is))}y.is=B})(E=e.Diagnostic||(e.Diagnostic={}));var C;(function(y){function L(S,N){for(var j=[],Y=2;Y<arguments.length;Y++)j[Y-2]=arguments[Y];var ce={title:S,command:N};return w.defined(j)&&j.length>0&&(ce.arguments=j),ce}y.create=L;function B(S){var N=S;return w.defined(N)&&w.string(N.title)&&w.string(N.command)}y.is=B})(C=e.Command||(e.Command={}));var q;(function(y){function L(j,Y){return{range:j,newText:Y}}y.replace=L;function B(j,Y){return{range:{start:j,end:j},newText:Y}}y.insert=B;function S(j){return{range:j,newText:""}}y.del=S;function N(j){var Y=j;return w.objectLiteral(Y)&&w.string(Y.newText)&&s.is(Y.range)}y.is=N})(q=e.TextEdit||(e.TextEdit={}));var Z;(function(y){function L(S,N,j){var Y={label:S};return N!==void 0&&(Y.needsConfirmation=N),j!==void 0&&(Y.description=j),Y}y.create=L;function B(S){var N=S;return N!==void 0&&w.objectLiteral(N)&&w.string(N.label)&&(w.boolean(N.needsConfirmation)||N.needsConfirmation===void 0)&&(w.string(N.description)||N.description===void 0)}y.is=B})(Z=e.ChangeAnnotation||(e.ChangeAnnotation={}));var ue;(function(y){function L(B){var S=B;return typeof S=="string"}y.is=L})(ue=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var de;(function(y){function L(j,Y,ce){return{range:j,newText:Y,annotationId:ce}}y.replace=L;function B(j,Y,ce){return{range:{start:j,end:j},newText:Y,annotationId:ce}}y.insert=B;function S(j,Y){return{range:j,newText:"",annotationId:Y}}y.del=S;function N(j){var Y=j;return q.is(Y)&&(Z.is(Y.annotationId)||ue.is(Y.annotationId))}y.is=N})(de=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ue;(function(y){function L(S,N){return{textDocument:S,edits:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&Mi.is(N.textDocument)&&Array.isArray(N.edits)}y.is=B})(Ue=e.TextDocumentEdit||(e.TextDocumentEdit={}));var _t;(function(y){function L(S,N,j){var Y={kind:"create",uri:S};return N!==void 0&&(N.overwrite!==void 0||N.ignoreIfExists!==void 0)&&(Y.options=N),j!==void 0&&(Y.annotationId=j),Y}y.create=L;function B(S){var N=S;return N&&N.kind==="create"&&w.string(N.uri)&&(N.options===void 0||(N.options.overwrite===void 0||w.boolean(N.options.overwrite))&&(N.options.ignoreIfExists===void 0||w.boolean(N.options.ignoreIfExists)))&&(N.annotationId===void 0||ue.is(N.annotationId))}y.is=B})(_t=e.CreateFile||(e.CreateFile={}));var Qt;(function(y){function L(S,N,j,Y){var ce={kind:"rename",oldUri:S,newUri:N};return j!==void 0&&(j.overwrite!==void 0||j.ignoreIfExists!==void 0)&&(ce.options=j),Y!==void 0&&(ce.annotationId=Y),ce}y.create=L;function B(S){var N=S;return N&&N.kind==="rename"&&w.string(N.oldUri)&&w.string(N.newUri)&&(N.options===void 0||(N.options.overwrite===void 0||w.boolean(N.options.overwrite))&&(N.options.ignoreIfExists===void 0||w.boolean(N.options.ignoreIfExists)))&&(N.annotationId===void 0||ue.is(N.annotationId))}y.is=B})(Qt=e.RenameFile||(e.RenameFile={}));var ft;(function(y){function L(S,N,j){var Y={kind:"delete",uri:S};return N!==void 0&&(N.recursive!==void 0||N.ignoreIfNotExists!==void 0)&&(Y.options=N),j!==void 0&&(Y.annotationId=j),Y}y.create=L;function B(S){var N=S;return N&&N.kind==="delete"&&w.string(N.uri)&&(N.options===void 0||(N.options.recursive===void 0||w.boolean(N.options.recursive))&&(N.options.ignoreIfNotExists===void 0||w.boolean(N.options.ignoreIfNotExists)))&&(N.annotationId===void 0||ue.is(N.annotationId))}y.is=B})(ft=e.DeleteFile||(e.DeleteFile={}));var ke;(function(y){function L(B){var S=B;return S&&(S.changes!==void 0||S.documentChanges!==void 0)&&(S.documentChanges===void 0||S.documentChanges.every(function(N){return w.string(N.kind)?_t.is(N)||Qt.is(N)||ft.is(N):Ue.is(N)}))}y.is=L})(ke=e.WorkspaceEdit||(e.WorkspaceEdit={}));var vr=function(){function y(L,B){this.edits=L,this.changeAnnotations=B}return y.prototype.insert=function(L,B,S){var N,j;if(S===void 0?N=q.insert(L,B):ue.is(S)?(j=S,N=de.insert(L,B,S)):(this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(S),N=de.insert(L,B,j)),this.edits.push(N),j!==void 0)return j},y.prototype.replace=function(L,B,S){var N,j;if(S===void 0?N=q.replace(L,B):ue.is(S)?(j=S,N=de.replace(L,B,S)):(this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(S),N=de.replace(L,B,j)),this.edits.push(N),j!==void 0)return j},y.prototype.delete=function(L,B){var S,N;if(B===void 0?S=q.del(L):ue.is(B)?(N=B,S=de.del(L,B)):(this.assertChangeAnnotations(this.changeAnnotations),N=this.changeAnnotations.manage(B),S=de.del(L,N)),this.edits.push(S),N!==void 0)return N},y.prototype.add=function(L){this.edits.push(L)},y.prototype.all=function(){return this.edits},y.prototype.clear=function(){this.edits.splice(0,this.edits.length)},y.prototype.assertChangeAnnotations=function(L){if(L===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},y}(),fo=function(){function y(L){this._annotations=L===void 0?Object.create(null):L,this._counter=0,this._size=0}return y.prototype.all=function(){return this._annotations},Object.defineProperty(y.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),y.prototype.manage=function(L,B){var S;if(ue.is(L)?S=L:(S=this.nextId(),B=L),this._annotations[S]!==void 0)throw new Error("Id "+S+" is already in use.");if(B===void 0)throw new Error("No annotation provided for id "+S);return this._annotations[S]=B,this._size++,S},y.prototype.nextId=function(){return this._counter++,this._counter.toString()},y}(),po=function(){function y(L){var B=this;this._textEditChanges=Object.create(null),L!==void 0?(this._workspaceEdit=L,L.documentChanges?(this._changeAnnotations=new fo(L.changeAnnotations),L.changeAnnotations=this._changeAnnotations.all(),L.documentChanges.forEach(function(S){if(Ue.is(S)){var N=new vr(S.edits,B._changeAnnotations);B._textEditChanges[S.textDocument.uri]=N}})):L.changes&&Object.keys(L.changes).forEach(function(S){var N=new vr(L.changes[S]);B._textEditChanges[S]=N})):this._workspaceEdit={}}return Object.defineProperty(y.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),y.prototype.getTextEditChange=function(L){if(Mi.is(L)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B={uri:L.uri,version:L.version},S=this._textEditChanges[B.uri];if(!S){var N=[],j={textDocument:B,edits:N};this._workspaceEdit.documentChanges.push(j),S=new vr(N,this._changeAnnotations),this._textEditChanges[B.uri]=S}return S}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var S=this._textEditChanges[L];if(!S){var N=[];this._workspaceEdit.changes[L]=N,S=new vr(N),this._textEditChanges[L]=S}return S}},y.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new fo,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},y.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},y.prototype.createFile=function(L,B,S){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var N;Z.is(B)||ue.is(B)?N=B:S=B;var j,Y;if(N===void 0?j=_t.create(L,S):(Y=ue.is(N)?N:this._changeAnnotations.manage(N),j=_t.create(L,S,Y)),this._workspaceEdit.documentChanges.push(j),Y!==void 0)return Y},y.prototype.renameFile=function(L,B,S,N){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var j;Z.is(S)||ue.is(S)?j=S:N=S;var Y,ce;if(j===void 0?Y=Qt.create(L,B,N):(ce=ue.is(j)?j:this._changeAnnotations.manage(j),Y=Qt.create(L,B,N,ce)),this._workspaceEdit.documentChanges.push(Y),ce!==void 0)return ce},y.prototype.deleteFile=function(L,B,S){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var N;Z.is(B)||ue.is(B)?N=B:S=B;var j,Y;if(N===void 0?j=ft.create(L,S):(Y=ue.is(N)?N:this._changeAnnotations.manage(N),j=ft.create(L,S,Y)),this._workspaceEdit.documentChanges.push(j),Y!==void 0)return Y},y}();e.WorkspaceChange=po;var Ya;(function(y){function L(S){return{uri:S}}y.create=L;function B(S){var N=S;return w.defined(N)&&w.string(N.uri)}y.is=B})(Ya=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var $a;(function(y){function L(S,N){return{uri:S,version:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&w.string(N.uri)&&w.integer(N.version)}y.is=B})($a=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Mi;(function(y){function L(S,N){return{uri:S,version:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&w.string(N.uri)&&(N.version===null||w.integer(N.version))}y.is=B})(Mi=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Kr;(function(y){function L(S,N,j,Y){return{uri:S,languageId:N,version:j,text:Y}}y.create=L;function B(S){var N=S;return w.defined(N)&&w.string(N.uri)&&w.string(N.languageId)&&w.integer(N.version)&&w.string(N.text)}y.is=B})(Kr=e.TextDocumentItem||(e.TextDocumentItem={}));var Xe;(function(y){y.PlainText="plaintext",y.Markdown="markdown"})(Xe=e.MarkupKind||(e.MarkupKind={})),function(y){function L(B){var S=B;return S===y.PlainText||S===y.Markdown}y.is=L}(Xe=e.MarkupKind||(e.MarkupKind={}));var Vi;(function(y){function L(B){var S=B;return w.objectLiteral(B)&&Xe.is(S.kind)&&w.string(S.value)}y.is=L})(Vi=e.MarkupContent||(e.MarkupContent={}));var ho;(function(y){y.Text=1,y.Method=2,y.Function=3,y.Constructor=4,y.Field=5,y.Variable=6,y.Class=7,y.Interface=8,y.Module=9,y.Property=10,y.Unit=11,y.Value=12,y.Enum=13,y.Keyword=14,y.Snippet=15,y.Color=16,y.File=17,y.Reference=18,y.Folder=19,y.EnumMember=20,y.Constant=21,y.Struct=22,y.Event=23,y.Operator=24,y.TypeParameter=25})(ho=e.CompletionItemKind||(e.CompletionItemKind={}));var je;(function(y){y.PlainText=1,y.Snippet=2})(je=e.InsertTextFormat||(e.InsertTextFormat={}));var Ns;(function(y){y.Deprecated=1})(Ns=e.CompletionItemTag||(e.CompletionItemTag={}));var mo;(function(y){function L(S,N,j){return{newText:S,insert:N,replace:j}}y.create=L;function B(S){var N=S;return N&&w.string(N.newText)&&s.is(N.insert)&&s.is(N.replace)}y.is=B})(mo=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Ka;(function(y){y.asIs=1,y.adjustIndentation=2})(Ka=e.InsertTextMode||(e.InsertTextMode={}));var go;(function(y){function L(B){return{label:B}}y.create=L})(go=e.CompletionItem||(e.CompletionItem={}));var To;(function(y){function L(B,S){return{items:B||[],isIncomplete:!!S}}y.create=L})(To=e.CompletionList||(e.CompletionList={}));var Is;(function(y){function L(S){return S.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}y.fromPlainText=L;function B(S){var N=S;return w.string(N)||w.objectLiteral(N)&&w.string(N.language)&&w.string(N.value)}y.is=B})(Is=e.MarkedString||(e.MarkedString={}));var _o;(function(y){function L(B){var S=B;return!!S&&w.objectLiteral(S)&&(Vi.is(S.contents)||Is.is(S.contents)||w.typedArray(S.contents,Is.is))&&(B.range===void 0||s.is(B.range))}y.is=L})(_o=e.Hover||(e.Hover={}));var yo;(function(y){function L(B,S){return S?{label:B,documentation:S}:{label:B}}y.create=L})(yo=e.ParameterInformation||(e.ParameterInformation={}));var za;(function(y){function L(B,S){for(var N=[],j=2;j<arguments.length;j++)N[j-2]=arguments[j];var Y={label:B};return w.defined(S)&&(Y.documentation=S),w.defined(N)?Y.parameters=N:Y.parameters=[],Y}y.create=L})(za=e.SignatureInformation||(e.SignatureInformation={}));var hi;(function(y){y.Text=1,y.Read=2,y.Write=3})(hi=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var bo;(function(y){function L(B,S){var N={range:B};return w.number(S)&&(N.kind=S),N}y.create=L})(bo=e.DocumentHighlight||(e.DocumentHighlight={}));var Qa;(function(y){y.File=1,y.Module=2,y.Namespace=3,y.Package=4,y.Class=5,y.Method=6,y.Property=7,y.Field=8,y.Constructor=9,y.Enum=10,y.Interface=11,y.Function=12,y.Variable=13,y.Constant=14,y.String=15,y.Number=16,y.Boolean=17,y.Array=18,y.Object=19,y.Key=20,y.Null=21,y.EnumMember=22,y.Struct=23,y.Event=24,y.Operator=25,y.TypeParameter=26})(Qa=e.SymbolKind||(e.SymbolKind={}));var No;(function(y){y.Deprecated=1})(No=e.SymbolTag||(e.SymbolTag={}));var Cr;(function(y){function L(B,S,N,j,Y){var ce={name:B,kind:S,location:{uri:j,range:N}};return Y&&(ce.containerName=Y),ce}y.create=L})(Cr=e.SymbolInformation||(e.SymbolInformation={}));var mi;(function(y){function L(S,N,j,Y,ce,Te){var we={name:S,detail:N,kind:j,range:Y,selectionRange:ce};return Te!==void 0&&(we.children=Te),we}y.create=L;function B(S){var N=S;return N&&w.string(N.name)&&w.number(N.kind)&&s.is(N.range)&&s.is(N.selectionRange)&&(N.detail===void 0||w.string(N.detail))&&(N.deprecated===void 0||w.boolean(N.deprecated))&&(N.children===void 0||Array.isArray(N.children))&&(N.tags===void 0||Array.isArray(N.tags))}y.is=B})(mi=e.DocumentSymbol||(e.DocumentSymbol={}));var Io;(function(y){y.Empty="",y.QuickFix="quickfix",y.Refactor="refactor",y.RefactorExtract="refactor.extract",y.RefactorInline="refactor.inline",y.RefactorRewrite="refactor.rewrite",y.Source="source",y.SourceOrganizeImports="source.organizeImports",y.SourceFixAll="source.fixAll"})(Io=e.CodeActionKind||(e.CodeActionKind={}));var xo;(function(y){function L(S,N){var j={diagnostics:S};return N!=null&&(j.only=N),j}y.create=L;function B(S){var N=S;return w.defined(N)&&w.typedArray(N.diagnostics,E.is)&&(N.only===void 0||w.typedArray(N.only,w.string))}y.is=B})(xo=e.CodeActionContext||(e.CodeActionContext={}));var gi;(function(y){function L(S,N,j){var Y={title:S},ce=!0;return typeof N=="string"?(ce=!1,Y.kind=N):C.is(N)?Y.command=N:Y.edit=N,ce&&j!==void 0&&(Y.kind=j),Y}y.create=L;function B(S){var N=S;return N&&w.string(N.title)&&(N.diagnostics===void 0||w.typedArray(N.diagnostics,E.is))&&(N.kind===void 0||w.string(N.kind))&&(N.edit!==void 0||N.command!==void 0)&&(N.command===void 0||C.is(N.command))&&(N.isPreferred===void 0||w.boolean(N.isPreferred))&&(N.edit===void 0||ke.is(N.edit))}y.is=B})(gi=e.CodeAction||(e.CodeAction={}));var xs;(function(y){function L(S,N){var j={range:S};return w.defined(N)&&(j.data=N),j}y.create=L;function B(S){var N=S;return w.defined(N)&&s.is(N.range)&&(w.undefined(N.command)||C.is(N.command))}y.is=B})(xs=e.CodeLens||(e.CodeLens={}));var As;(function(y){function L(S,N){return{tabSize:S,insertSpaces:N}}y.create=L;function B(S){var N=S;return w.defined(N)&&w.uinteger(N.tabSize)&&w.boolean(N.insertSpaces)}y.is=B})(As=e.FormattingOptions||(e.FormattingOptions={}));var sr;(function(y){function L(S,N,j){return{range:S,target:N,data:j}}y.create=L;function B(S){var N=S;return w.defined(N)&&s.is(N.range)&&(w.undefined(N.target)||w.string(N.target))}y.is=B})(sr=e.DocumentLink||(e.DocumentLink={}));var Ps;(function(y){function L(S,N){return{range:S,parent:N}}y.create=L;function B(S){var N=S;return N!==void 0&&s.is(N.range)&&(N.parent===void 0||y.is(N.parent))}y.is=B})(Ps=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var zr;(function(y){function L(j,Y,ce,Te){return new F(j,Y,ce,Te)}y.create=L;function B(j){var Y=j;return!!(w.defined(Y)&&w.string(Y.uri)&&(w.undefined(Y.languageId)||w.string(Y.languageId))&&w.uinteger(Y.lineCount)&&w.func(Y.getText)&&w.func(Y.positionAt)&&w.func(Y.offsetAt))}y.is=B;function S(j,Y){for(var ce=j.getText(),Te=N(Y,function(Ti,Ao){var Xa=Ti.range.start.line-Ao.range.start.line;return Xa===0?Ti.range.start.character-Ao.range.start.character:Xa}),we=ce.length,Je=Te.length-1;Je>=0;Je--){var yt=Te[Je],vt=j.offsetAt(yt.range.start),qe=j.offsetAt(yt.range.end);if(qe<=we)ce=ce.substring(0,vt)+yt.newText+ce.substring(qe,ce.length);else throw new Error("Overlapping edit");we=vt}return ce}y.applyEdits=S;function N(j,Y){if(j.length<=1)return j;var ce=j.length/2|0,Te=j.slice(0,ce),we=j.slice(ce);N(Te,Y),N(we,Y);for(var Je=0,yt=0,vt=0;Je<Te.length&&yt<we.length;){var qe=Y(Te[Je],we[yt]);qe<=0?j[vt++]=Te[Je++]:j[vt++]=we[yt++]}for(;Je<Te.length;)j[vt++]=Te[Je++];for(;yt<we.length;)j[vt++]=we[yt++];return j}})(zr=e.TextDocument||(e.TextDocument={}));var F=function(){function y(L,B,S,N){this._uri=L,this._languageId=B,this._version=S,this._content=N,this._lineOffsets=void 0}return Object.defineProperty(y.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),y.prototype.getText=function(L){if(L){var B=this.offsetAt(L.start),S=this.offsetAt(L.end);return this._content.substring(B,S)}return this._content},y.prototype.update=function(L,B){this._content=L.text,this._version=B,this._lineOffsets=void 0},y.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var L=[],B=this._content,S=!0,N=0;N<B.length;N++){S&&(L.push(N),S=!1);var j=B.charAt(N);S=j==="\r"||j===`
`,j==="\r"&&N+1<B.length&&B.charAt(N+1)===`
`&&N++}S&&B.length>0&&L.push(B.length),this._lineOffsets=L}return this._lineOffsets},y.prototype.positionAt=function(L){L=Math.max(Math.min(L,this._content.length),0);var B=this.getLineOffsets(),S=0,N=B.length;if(N===0)return i.create(0,L);for(;S<N;){var j=Math.floor((S+N)/2);B[j]>L?N=j:S=j+1}var Y=S-1;return i.create(Y,L-B[Y])},y.prototype.offsetAt=function(L){var B=this.getLineOffsets();if(L.line>=B.length)return this._content.length;if(L.line<0)return 0;var S=B[L.line],N=L.line+1<B.length?B[L.line+1]:this._content.length;return Math.max(Math.min(S+L.character,N),S)},Object.defineProperty(y.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),y}(),w;(function(y){var L=Object.prototype.toString;function B(qe){return typeof qe<"u"}y.defined=B;function S(qe){return typeof qe>"u"}y.undefined=S;function N(qe){return qe===!0||qe===!1}y.boolean=N;function j(qe){return L.call(qe)==="[object String]"}y.string=j;function Y(qe){return L.call(qe)==="[object Number]"}y.number=Y;function ce(qe,Ti,Ao){return L.call(qe)==="[object Number]"&&Ti<=qe&&qe<=Ao}y.numberRange=ce;function Te(qe){return L.call(qe)==="[object Number]"&&-2147483648<=qe&&qe<=2147483647}y.integer=Te;function we(qe){return L.call(qe)==="[object Number]"&&0<=qe&&qe<=2147483647}y.uinteger=we;function Je(qe){return L.call(qe)==="[object Function]"}y.func=Je;function yt(qe){return qe!==null&&typeof qe=="object"}y.objectLiteral=yt;function vt(qe,Ti){return Array.isArray(qe)&&qe.every(Ti)}y.typedArray=vt})(w||(w={}))})});var Kt=pe(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.ProtocolNotificationType=Ir.ProtocolNotificationType0=Ir.ProtocolRequestType=Ir.ProtocolRequestType0=Ir.RegistrationType=void 0;var zo=Ko(),Mp=class{constructor(e){this.method=e}};Ir.RegistrationType=Mp;var Vp=class extends zo.RequestType0{constructor(e){super(e)}};Ir.ProtocolRequestType0=Vp;var Bp=class extends zo.RequestType{constructor(e){super(e,zo.ParameterStructures.byName)}};Ir.ProtocolRequestType=Bp;var qp=class extends zo.NotificationType0{constructor(e){super(e)}};Ir.ProtocolNotificationType0=qp;var Up=class extends zo.NotificationType{constructor(e){super(e,zo.ParameterStructures.byName)}};Ir.ProtocolNotificationType=Up});var fN=pe(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.objectLiteral=Lt.typedArray=Lt.stringArray=Lt.array=Lt.func=Lt.error=Lt.number=Lt.string=Lt.boolean=void 0;function yR(n){return n===!0||n===!1}Lt.boolean=yR;function cN(n){return typeof n=="string"||n instanceof String}Lt.string=cN;function bR(n){return typeof n=="number"||n instanceof Number}Lt.number=bR;function NR(n){return n instanceof Error}Lt.error=NR;function IR(n){return typeof n=="function"}Lt.func=IR;function uN(n){return Array.isArray(n)}Lt.array=uN;function xR(n){return uN(n)&&n.every(e=>cN(e))}Lt.stringArray=xR;function AR(n,e){return Array.isArray(n)&&n.every(e)}Lt.typedArray=AR;function PR(n){return n!==null&&typeof n=="object"}Lt.objectLiteral=PR});var dN=pe(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ImplementationRequest=void 0;var vR=Kt(),CR;(function(n){n.method="textDocument/implementation",n.type=new vR.ProtocolRequestType(n.method)})(CR=Nl.ImplementationRequest||(Nl.ImplementationRequest={}))});var pN=pe(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.TypeDefinitionRequest=void 0;var SR=Kt(),ER;(function(n){n.method="textDocument/typeDefinition",n.type=new SR.ProtocolRequestType(n.method)})(ER=Il.TypeDefinitionRequest||(Il.TypeDefinitionRequest={}))});var mN=pe(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.DidChangeWorkspaceFoldersNotification=Yi.WorkspaceFoldersRequest=void 0;var hN=Kt(),RR;(function(n){n.type=new hN.ProtocolRequestType0("workspace/workspaceFolders")})(RR=Yi.WorkspaceFoldersRequest||(Yi.WorkspaceFoldersRequest={}));var kR;(function(n){n.type=new hN.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(kR=Yi.DidChangeWorkspaceFoldersNotification||(Yi.DidChangeWorkspaceFoldersNotification={}))});var gN=pe(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.ConfigurationRequest=void 0;var wR=Kt(),OR;(function(n){n.type=new wR.ProtocolRequestType("workspace/configuration")})(OR=xl.ConfigurationRequest||(xl.ConfigurationRequest={}))});var _N=pe($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.ColorPresentationRequest=$i.DocumentColorRequest=void 0;var TN=Kt(),LR;(function(n){n.method="textDocument/documentColor",n.type=new TN.ProtocolRequestType(n.method)})(LR=$i.DocumentColorRequest||($i.DocumentColorRequest={}));var DR;(function(n){n.type=new TN.ProtocolRequestType("textDocument/colorPresentation")})(DR=$i.ColorPresentationRequest||($i.ColorPresentationRequest={}))});var yN=pe(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.FoldingRangeRequest=Ki.FoldingRangeKind=void 0;var FR=Kt(),MR;(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(MR=Ki.FoldingRangeKind||(Ki.FoldingRangeKind={}));var VR;(function(n){n.method="textDocument/foldingRange",n.type=new FR.ProtocolRequestType(n.method)})(VR=Ki.FoldingRangeRequest||(Ki.FoldingRangeRequest={}))});var bN=pe(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.DeclarationRequest=void 0;var BR=Kt(),qR;(function(n){n.method="textDocument/declaration",n.type=new BR.ProtocolRequestType(n.method)})(qR=Al.DeclarationRequest||(Al.DeclarationRequest={}))});var NN=pe(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.SelectionRangeRequest=void 0;var UR=Kt(),jR;(function(n){n.method="textDocument/selectionRange",n.type=new UR.ProtocolRequestType(n.method)})(jR=Pl.SelectionRangeRequest||(Pl.SelectionRangeRequest={}))});var xN=pe(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.WorkDoneProgressCancelNotification=Br.WorkDoneProgressCreateRequest=Br.WorkDoneProgress=void 0;var GR=Ko(),IN=Kt(),WR;(function(n){n.type=new GR.ProgressType;function e(t){return t===n.type}n.is=e})(WR=Br.WorkDoneProgress||(Br.WorkDoneProgress={}));var HR;(function(n){n.type=new IN.ProtocolRequestType("window/workDoneProgress/create")})(HR=Br.WorkDoneProgressCreateRequest||(Br.WorkDoneProgressCreateRequest={}));var YR;(function(n){n.type=new IN.ProtocolNotificationType("window/workDoneProgress/cancel")})(YR=Br.WorkDoneProgressCancelNotification||(Br.WorkDoneProgressCancelNotification={}))});var AN=pe(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.CallHierarchyOutgoingCallsRequest=qr.CallHierarchyIncomingCallsRequest=qr.CallHierarchyPrepareRequest=void 0;var jp=Kt(),$R;(function(n){n.method="textDocument/prepareCallHierarchy",n.type=new jp.ProtocolRequestType(n.method)})($R=qr.CallHierarchyPrepareRequest||(qr.CallHierarchyPrepareRequest={}));var KR;(function(n){n.method="callHierarchy/incomingCalls",n.type=new jp.ProtocolRequestType(n.method)})(KR=qr.CallHierarchyIncomingCallsRequest||(qr.CallHierarchyIncomingCallsRequest={}));var zR;(function(n){n.method="callHierarchy/outgoingCalls",n.type=new jp.ProtocolRequestType(n.method)})(zR=qr.CallHierarchyOutgoingCallsRequest||(qr.CallHierarchyOutgoingCallsRequest={}))});var PN=pe(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.SemanticTokensRefreshRequest=Ze.SemanticTokensRangeRequest=Ze.SemanticTokensDeltaRequest=Ze.SemanticTokensRequest=Ze.SemanticTokensRegistrationType=Ze.TokenFormat=Ze.SemanticTokens=Ze.SemanticTokenModifiers=Ze.SemanticTokenTypes=void 0;var vl=Kt(),QR;(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator"})(QR=Ze.SemanticTokenTypes||(Ze.SemanticTokenTypes={}));var XR;(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(XR=Ze.SemanticTokenModifiers||(Ze.SemanticTokenModifiers={}));var JR;(function(n){function e(t){let r=t;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(JR=Ze.SemanticTokens||(Ze.SemanticTokens={}));var ZR;(function(n){n.Relative="relative"})(ZR=Ze.TokenFormat||(Ze.TokenFormat={}));var ek;(function(n){n.method="textDocument/semanticTokens",n.type=new vl.RegistrationType(n.method)})(ek=Ze.SemanticTokensRegistrationType||(Ze.SemanticTokensRegistrationType={}));var tk;(function(n){n.method="textDocument/semanticTokens/full",n.type=new vl.ProtocolRequestType(n.method)})(tk=Ze.SemanticTokensRequest||(Ze.SemanticTokensRequest={}));var nk;(function(n){n.method="textDocument/semanticTokens/full/delta",n.type=new vl.ProtocolRequestType(n.method)})(nk=Ze.SemanticTokensDeltaRequest||(Ze.SemanticTokensDeltaRequest={}));var rk;(function(n){n.method="textDocument/semanticTokens/range",n.type=new vl.ProtocolRequestType(n.method)})(rk=Ze.SemanticTokensRangeRequest||(Ze.SemanticTokensRangeRequest={}));var ik;(function(n){n.method="workspace/semanticTokens/refresh",n.type=new vl.ProtocolRequestType0(n.method)})(ik=Ze.SemanticTokensRefreshRequest||(Ze.SemanticTokensRefreshRequest={}))});var vN=pe(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ShowDocumentRequest=void 0;var sk=Kt(),ok;(function(n){n.method="window/showDocument",n.type=new sk.ProtocolRequestType(n.method)})(ok=Cl.ShowDocumentRequest||(Cl.ShowDocumentRequest={}))});var CN=pe(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.LinkedEditingRangeRequest=void 0;var ak=Kt(),lk;(function(n){n.method="textDocument/linkedEditingRange",n.type=new ak.ProtocolRequestType(n.method)})(lk=Sl.LinkedEditingRangeRequest||(Sl.LinkedEditingRangeRequest={}))});var SN=pe(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.WillDeleteFilesRequest=Tt.DidDeleteFilesNotification=Tt.DidRenameFilesNotification=Tt.WillRenameFilesRequest=Tt.DidCreateFilesNotification=Tt.WillCreateFilesRequest=Tt.FileOperationPatternKind=void 0;var Qo=Kt(),ck;(function(n){n.file="file",n.folder="folder"})(ck=Tt.FileOperationPatternKind||(Tt.FileOperationPatternKind={}));var uk;(function(n){n.method="workspace/willCreateFiles",n.type=new Qo.ProtocolRequestType(n.method)})(uk=Tt.WillCreateFilesRequest||(Tt.WillCreateFilesRequest={}));var fk;(function(n){n.method="workspace/didCreateFiles",n.type=new Qo.ProtocolNotificationType(n.method)})(fk=Tt.DidCreateFilesNotification||(Tt.DidCreateFilesNotification={}));var dk;(function(n){n.method="workspace/willRenameFiles",n.type=new Qo.ProtocolRequestType(n.method)})(dk=Tt.WillRenameFilesRequest||(Tt.WillRenameFilesRequest={}));var pk;(function(n){n.method="workspace/didRenameFiles",n.type=new Qo.ProtocolNotificationType(n.method)})(pk=Tt.DidRenameFilesNotification||(Tt.DidRenameFilesNotification={}));var hk;(function(n){n.method="workspace/didDeleteFiles",n.type=new Qo.ProtocolNotificationType(n.method)})(hk=Tt.DidDeleteFilesNotification||(Tt.DidDeleteFilesNotification={}));var mk;(function(n){n.method="workspace/willDeleteFiles",n.type=new Qo.ProtocolRequestType(n.method)})(mk=Tt.WillDeleteFilesRequest||(Tt.WillDeleteFilesRequest={}))});var EN=pe(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.MonikerRequest=Ur.MonikerKind=Ur.UniquenessLevel=void 0;var gk=Kt(),Tk;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Tk=Ur.UniquenessLevel||(Ur.UniquenessLevel={}));var _k;(function(n){n.import="import",n.export="export",n.local="local"})(_k=Ur.MonikerKind||(Ur.MonikerKind={}));var yk;(function(n){n.method="textDocument/moniker",n.type=new gk.ProtocolRequestType(n.method)})(yk=Ur.MonikerRequest||(Ur.MonikerRequest={}))});var LN=pe(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.DocumentLinkRequest=k.CodeLensRefreshRequest=k.CodeLensResolveRequest=k.CodeLensRequest=k.WorkspaceSymbolRequest=k.CodeActionResolveRequest=k.CodeActionRequest=k.DocumentSymbolRequest=k.DocumentHighlightRequest=k.ReferencesRequest=k.DefinitionRequest=k.SignatureHelpRequest=k.SignatureHelpTriggerKind=k.HoverRequest=k.CompletionResolveRequest=k.CompletionRequest=k.CompletionTriggerKind=k.PublishDiagnosticsNotification=k.WatchKind=k.FileChangeType=k.DidChangeWatchedFilesNotification=k.WillSaveTextDocumentWaitUntilRequest=k.WillSaveTextDocumentNotification=k.TextDocumentSaveReason=k.DidSaveTextDocumentNotification=k.DidCloseTextDocumentNotification=k.DidChangeTextDocumentNotification=k.TextDocumentContentChangeEvent=k.DidOpenTextDocumentNotification=k.TextDocumentSyncKind=k.TelemetryEventNotification=k.LogMessageNotification=k.ShowMessageRequest=k.ShowMessageNotification=k.MessageType=k.DidChangeConfigurationNotification=k.ExitNotification=k.ShutdownRequest=k.InitializedNotification=k.InitializeError=k.InitializeRequest=k.WorkDoneProgressOptions=k.TextDocumentRegistrationOptions=k.StaticRegistrationOptions=k.FailureHandlingKind=k.ResourceOperationKind=k.UnregistrationRequest=k.RegistrationRequest=k.DocumentSelector=k.DocumentFilter=void 0;k.MonikerRequest=k.MonikerKind=k.UniquenessLevel=k.WillDeleteFilesRequest=k.DidDeleteFilesNotification=k.WillRenameFilesRequest=k.DidRenameFilesNotification=k.WillCreateFilesRequest=k.DidCreateFilesNotification=k.FileOperationPatternKind=k.LinkedEditingRangeRequest=k.ShowDocumentRequest=k.SemanticTokensRegistrationType=k.SemanticTokensRefreshRequest=k.SemanticTokensRangeRequest=k.SemanticTokensDeltaRequest=k.SemanticTokensRequest=k.TokenFormat=k.SemanticTokens=k.SemanticTokenModifiers=k.SemanticTokenTypes=k.CallHierarchyPrepareRequest=k.CallHierarchyOutgoingCallsRequest=k.CallHierarchyIncomingCallsRequest=k.WorkDoneProgressCancelNotification=k.WorkDoneProgressCreateRequest=k.WorkDoneProgress=k.SelectionRangeRequest=k.DeclarationRequest=k.FoldingRangeRequest=k.ColorPresentationRequest=k.DocumentColorRequest=k.ConfigurationRequest=k.DidChangeWorkspaceFoldersNotification=k.WorkspaceFoldersRequest=k.TypeDefinitionRequest=k.ImplementationRequest=k.ApplyWorkspaceEditRequest=k.ExecuteCommandRequest=k.PrepareRenameRequest=k.RenameRequest=k.PrepareSupportDefaultBehavior=k.DocumentOnTypeFormattingRequest=k.DocumentRangeFormattingRequest=k.DocumentFormattingRequest=k.DocumentLinkResolveRequest=void 0;var zi=fN(),Le=Kt(),bk=dN();Object.defineProperty(k,"ImplementationRequest",{enumerable:!0,get:function(){return bk.ImplementationRequest}});var Nk=pN();Object.defineProperty(k,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Nk.TypeDefinitionRequest}});var RN=mN();Object.defineProperty(k,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return RN.WorkspaceFoldersRequest}});Object.defineProperty(k,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return RN.DidChangeWorkspaceFoldersNotification}});var Ik=gN();Object.defineProperty(k,"ConfigurationRequest",{enumerable:!0,get:function(){return Ik.ConfigurationRequest}});var kN=_N();Object.defineProperty(k,"DocumentColorRequest",{enumerable:!0,get:function(){return kN.DocumentColorRequest}});Object.defineProperty(k,"ColorPresentationRequest",{enumerable:!0,get:function(){return kN.ColorPresentationRequest}});var xk=yN();Object.defineProperty(k,"FoldingRangeRequest",{enumerable:!0,get:function(){return xk.FoldingRangeRequest}});var Ak=bN();Object.defineProperty(k,"DeclarationRequest",{enumerable:!0,get:function(){return Ak.DeclarationRequest}});var Pk=NN();Object.defineProperty(k,"SelectionRangeRequest",{enumerable:!0,get:function(){return Pk.SelectionRangeRequest}});var Gp=xN();Object.defineProperty(k,"WorkDoneProgress",{enumerable:!0,get:function(){return Gp.WorkDoneProgress}});Object.defineProperty(k,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Gp.WorkDoneProgressCreateRequest}});Object.defineProperty(k,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Gp.WorkDoneProgressCancelNotification}});var Wp=AN();Object.defineProperty(k,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Wp.CallHierarchyIncomingCallsRequest}});Object.defineProperty(k,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Wp.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(k,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Wp.CallHierarchyPrepareRequest}});var Si=PN();Object.defineProperty(k,"SemanticTokenTypes",{enumerable:!0,get:function(){return Si.SemanticTokenTypes}});Object.defineProperty(k,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Si.SemanticTokenModifiers}});Object.defineProperty(k,"SemanticTokens",{enumerable:!0,get:function(){return Si.SemanticTokens}});Object.defineProperty(k,"TokenFormat",{enumerable:!0,get:function(){return Si.TokenFormat}});Object.defineProperty(k,"SemanticTokensRequest",{enumerable:!0,get:function(){return Si.SemanticTokensRequest}});Object.defineProperty(k,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Si.SemanticTokensDeltaRequest}});Object.defineProperty(k,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Si.SemanticTokensRangeRequest}});Object.defineProperty(k,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Si.SemanticTokensRefreshRequest}});Object.defineProperty(k,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Si.SemanticTokensRegistrationType}});var vk=vN();Object.defineProperty(k,"ShowDocumentRequest",{enumerable:!0,get:function(){return vk.ShowDocumentRequest}});var Ck=CN();Object.defineProperty(k,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Ck.LinkedEditingRangeRequest}});var Us=SN();Object.defineProperty(k,"FileOperationPatternKind",{enumerable:!0,get:function(){return Us.FileOperationPatternKind}});Object.defineProperty(k,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Us.DidCreateFilesNotification}});Object.defineProperty(k,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Us.WillCreateFilesRequest}});Object.defineProperty(k,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Us.DidRenameFilesNotification}});Object.defineProperty(k,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Us.WillRenameFilesRequest}});Object.defineProperty(k,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Us.DidDeleteFilesNotification}});Object.defineProperty(k,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Us.WillDeleteFilesRequest}});var Hp=EN();Object.defineProperty(k,"UniquenessLevel",{enumerable:!0,get:function(){return Hp.UniquenessLevel}});Object.defineProperty(k,"MonikerKind",{enumerable:!0,get:function(){return Hp.MonikerKind}});Object.defineProperty(k,"MonikerRequest",{enumerable:!0,get:function(){return Hp.MonikerRequest}});var wN;(function(n){function e(t){let r=t;return zi.string(r.language)||zi.string(r.scheme)||zi.string(r.pattern)}n.is=e})(wN=k.DocumentFilter||(k.DocumentFilter={}));var ON;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!zi.string(r)&&!wN.is(r))return!1;return!0}n.is=e})(ON=k.DocumentSelector||(k.DocumentSelector={}));var Sk;(function(n){n.type=new Le.ProtocolRequestType("client/registerCapability")})(Sk=k.RegistrationRequest||(k.RegistrationRequest={}));var Ek;(function(n){n.type=new Le.ProtocolRequestType("client/unregisterCapability")})(Ek=k.UnregistrationRequest||(k.UnregistrationRequest={}));var Rk;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(Rk=k.ResourceOperationKind||(k.ResourceOperationKind={}));var kk;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(kk=k.FailureHandlingKind||(k.FailureHandlingKind={}));var wk;(function(n){function e(t){let r=t;return r&&zi.string(r.id)&&r.id.length>0}n.hasId=e})(wk=k.StaticRegistrationOptions||(k.StaticRegistrationOptions={}));var Ok;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||ON.is(r.documentSelector))}n.is=e})(Ok=k.TextDocumentRegistrationOptions||(k.TextDocumentRegistrationOptions={}));var Lk;(function(n){function e(r){let i=r;return zi.objectLiteral(i)&&(i.workDoneProgress===void 0||zi.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&zi.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(Lk=k.WorkDoneProgressOptions||(k.WorkDoneProgressOptions={}));var Dk;(function(n){n.type=new Le.ProtocolRequestType("initialize")})(Dk=k.InitializeRequest||(k.InitializeRequest={}));var Fk;(function(n){n.unknownProtocolVersion=1})(Fk=k.InitializeError||(k.InitializeError={}));var Mk;(function(n){n.type=new Le.ProtocolNotificationType("initialized")})(Mk=k.InitializedNotification||(k.InitializedNotification={}));var Vk;(function(n){n.type=new Le.ProtocolRequestType0("shutdown")})(Vk=k.ShutdownRequest||(k.ShutdownRequest={}));var Bk;(function(n){n.type=new Le.ProtocolNotificationType0("exit")})(Bk=k.ExitNotification||(k.ExitNotification={}));var qk;(function(n){n.type=new Le.ProtocolNotificationType("workspace/didChangeConfiguration")})(qk=k.DidChangeConfigurationNotification||(k.DidChangeConfigurationNotification={}));var Uk;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(Uk=k.MessageType||(k.MessageType={}));var jk;(function(n){n.type=new Le.ProtocolNotificationType("window/showMessage")})(jk=k.ShowMessageNotification||(k.ShowMessageNotification={}));var Gk;(function(n){n.type=new Le.ProtocolRequestType("window/showMessageRequest")})(Gk=k.ShowMessageRequest||(k.ShowMessageRequest={}));var Wk;(function(n){n.type=new Le.ProtocolNotificationType("window/logMessage")})(Wk=k.LogMessageNotification||(k.LogMessageNotification={}));var Hk;(function(n){n.type=new Le.ProtocolNotificationType("telemetry/event")})(Hk=k.TelemetryEventNotification||(k.TelemetryEventNotification={}));var Yk;(function(n){n.None=0,n.Full=1,n.Incremental=2})(Yk=k.TextDocumentSyncKind||(k.TextDocumentSyncKind={}));var $k;(function(n){n.method="textDocument/didOpen",n.type=new Le.ProtocolNotificationType(n.method)})($k=k.DidOpenTextDocumentNotification||(k.DidOpenTextDocumentNotification={}));var Kk;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(Kk=k.TextDocumentContentChangeEvent||(k.TextDocumentContentChangeEvent={}));var zk;(function(n){n.method="textDocument/didChange",n.type=new Le.ProtocolNotificationType(n.method)})(zk=k.DidChangeTextDocumentNotification||(k.DidChangeTextDocumentNotification={}));var Qk;(function(n){n.method="textDocument/didClose",n.type=new Le.ProtocolNotificationType(n.method)})(Qk=k.DidCloseTextDocumentNotification||(k.DidCloseTextDocumentNotification={}));var Xk;(function(n){n.method="textDocument/didSave",n.type=new Le.ProtocolNotificationType(n.method)})(Xk=k.DidSaveTextDocumentNotification||(k.DidSaveTextDocumentNotification={}));var Jk;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(Jk=k.TextDocumentSaveReason||(k.TextDocumentSaveReason={}));var Zk;(function(n){n.method="textDocument/willSave",n.type=new Le.ProtocolNotificationType(n.method)})(Zk=k.WillSaveTextDocumentNotification||(k.WillSaveTextDocumentNotification={}));var e0;(function(n){n.method="textDocument/willSaveWaitUntil",n.type=new Le.ProtocolRequestType(n.method)})(e0=k.WillSaveTextDocumentWaitUntilRequest||(k.WillSaveTextDocumentWaitUntilRequest={}));var t0;(function(n){n.type=new Le.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(t0=k.DidChangeWatchedFilesNotification||(k.DidChangeWatchedFilesNotification={}));var n0;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(n0=k.FileChangeType||(k.FileChangeType={}));var r0;(function(n){n.Create=1,n.Change=2,n.Delete=4})(r0=k.WatchKind||(k.WatchKind={}));var i0;(function(n){n.type=new Le.ProtocolNotificationType("textDocument/publishDiagnostics")})(i0=k.PublishDiagnosticsNotification||(k.PublishDiagnosticsNotification={}));var s0;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(s0=k.CompletionTriggerKind||(k.CompletionTriggerKind={}));var o0;(function(n){n.method="textDocument/completion",n.type=new Le.ProtocolRequestType(n.method)})(o0=k.CompletionRequest||(k.CompletionRequest={}));var a0;(function(n){n.method="completionItem/resolve",n.type=new Le.ProtocolRequestType(n.method)})(a0=k.CompletionResolveRequest||(k.CompletionResolveRequest={}));var l0;(function(n){n.method="textDocument/hover",n.type=new Le.ProtocolRequestType(n.method)})(l0=k.HoverRequest||(k.HoverRequest={}));var c0;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(c0=k.SignatureHelpTriggerKind||(k.SignatureHelpTriggerKind={}));var u0;(function(n){n.method="textDocument/signatureHelp",n.type=new Le.ProtocolRequestType(n.method)})(u0=k.SignatureHelpRequest||(k.SignatureHelpRequest={}));var f0;(function(n){n.method="textDocument/definition",n.type=new Le.ProtocolRequestType(n.method)})(f0=k.DefinitionRequest||(k.DefinitionRequest={}));var d0;(function(n){n.method="textDocument/references",n.type=new Le.ProtocolRequestType(n.method)})(d0=k.ReferencesRequest||(k.ReferencesRequest={}));var p0;(function(n){n.method="textDocument/documentHighlight",n.type=new Le.ProtocolRequestType(n.method)})(p0=k.DocumentHighlightRequest||(k.DocumentHighlightRequest={}));var h0;(function(n){n.method="textDocument/documentSymbol",n.type=new Le.ProtocolRequestType(n.method)})(h0=k.DocumentSymbolRequest||(k.DocumentSymbolRequest={}));var m0;(function(n){n.method="textDocument/codeAction",n.type=new Le.ProtocolRequestType(n.method)})(m0=k.CodeActionRequest||(k.CodeActionRequest={}));var g0;(function(n){n.method="codeAction/resolve",n.type=new Le.ProtocolRequestType(n.method)})(g0=k.CodeActionResolveRequest||(k.CodeActionResolveRequest={}));var T0;(function(n){n.method="workspace/symbol",n.type=new Le.ProtocolRequestType(n.method)})(T0=k.WorkspaceSymbolRequest||(k.WorkspaceSymbolRequest={}));var _0;(function(n){n.method="textDocument/codeLens",n.type=new Le.ProtocolRequestType(n.method)})(_0=k.CodeLensRequest||(k.CodeLensRequest={}));var y0;(function(n){n.method="codeLens/resolve",n.type=new Le.ProtocolRequestType(n.method)})(y0=k.CodeLensResolveRequest||(k.CodeLensResolveRequest={}));var b0;(function(n){n.method="workspace/codeLens/refresh",n.type=new Le.ProtocolRequestType0(n.method)})(b0=k.CodeLensRefreshRequest||(k.CodeLensRefreshRequest={}));var N0;(function(n){n.method="textDocument/documentLink",n.type=new Le.ProtocolRequestType(n.method)})(N0=k.DocumentLinkRequest||(k.DocumentLinkRequest={}));var I0;(function(n){n.method="documentLink/resolve",n.type=new Le.ProtocolRequestType(n.method)})(I0=k.DocumentLinkResolveRequest||(k.DocumentLinkResolveRequest={}));var x0;(function(n){n.method="textDocument/formatting",n.type=new Le.ProtocolRequestType(n.method)})(x0=k.DocumentFormattingRequest||(k.DocumentFormattingRequest={}));var A0;(function(n){n.method="textDocument/rangeFormatting",n.type=new Le.ProtocolRequestType(n.method)})(A0=k.DocumentRangeFormattingRequest||(k.DocumentRangeFormattingRequest={}));var P0;(function(n){n.method="textDocument/onTypeFormatting",n.type=new Le.ProtocolRequestType(n.method)})(P0=k.DocumentOnTypeFormattingRequest||(k.DocumentOnTypeFormattingRequest={}));var v0;(function(n){n.Identifier=1})(v0=k.PrepareSupportDefaultBehavior||(k.PrepareSupportDefaultBehavior={}));var C0;(function(n){n.method="textDocument/rename",n.type=new Le.ProtocolRequestType(n.method)})(C0=k.RenameRequest||(k.RenameRequest={}));var S0;(function(n){n.method="textDocument/prepareRename",n.type=new Le.ProtocolRequestType(n.method)})(S0=k.PrepareRenameRequest||(k.PrepareRenameRequest={}));var E0;(function(n){n.type=new Le.ProtocolRequestType("workspace/executeCommand")})(E0=k.ExecuteCommandRequest||(k.ExecuteCommandRequest={}));var R0;(function(n){n.type=new Le.ProtocolRequestType("workspace/applyEdit")})(R0=k.ApplyWorkspaceEditRequest||(k.ApplyWorkspaceEditRequest={}))});var FN=pe(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.createProtocolConnection=void 0;var DN=Ko();function k0(n,e,t,r){return DN.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),DN.createMessageConnection(n,e,t,r)}Gc.createProtocolConnection=k0});var MN=pe(gn=>{"use strict";var w0=gn&&gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Wc=gn&&gn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&w0(e,n,t)};Object.defineProperty(gn,"__esModule",{value:!0});gn.LSPErrorCodes=gn.createProtocolConnection=void 0;Wc(Ko(),gn);Wc(dt(),gn);Wc(Kt(),gn);Wc(LN(),gn);var O0=FN();Object.defineProperty(gn,"createProtocolConnection",{enumerable:!0,get:function(){return O0.createProtocolConnection}});var L0;(function(n){n.lspReservedErrorRangeStart=-32899,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(L0=gn.LSPErrorCodes||(gn.LSPErrorCodes={}))});var Fn=pe(ii=>{"use strict";var D0=ii&&ii.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),VN=ii&&ii.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&D0(e,n,t)};Object.defineProperty(ii,"__esModule",{value:!0});ii.createProtocolConnection=void 0;var F0=Fp();VN(Fp(),ii);VN(MN(),ii);function M0(n,e,t,r){return F0.createMessageConnection(n,e,t,r)}ii.createProtocolConnection=M0});var Yp=pe(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.generateUuid=xr.parse=xr.isUUID=xr.v4=xr.empty=void 0;var El=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Ve=class extends El{constructor(){super([Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),"-",Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),"-","4",Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),"-",Ve._oneOf(Ve._timeHighBits),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),"-",Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex(),Ve._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Ve._oneOf(Ve._chars)}};Ve._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Ve._timeHighBits=["8","9","a","b"];xr.empty=new El("00000000-0000-0000-0000-000000000000");function BN(){return new Ve}xr.v4=BN;var V0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function qN(n){return V0.test(n)}xr.isUUID=qN;function B0(n){if(!qN(n))throw new Error("invalid uuid");return new El(n)}xr.parse=B0;function q0(){return BN().asHex()}xr.generateUuid=q0});var UN=pe(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.attachPartialResult=Xi.ProgressFeature=Xi.attachWorkDone=void 0;var Qi=Fn(),U0=Yp(),si=class{constructor(e,t){this._connection=e,this._token=t,si.Instances.set(this._token,this)}begin(e,t,r,i){let s={kind:"begin",title:e,percentage:t,message:r,cancellable:i};this._connection.sendProgress(Qi.WorkDoneProgress.type,this._token,s)}report(e,t){let r={kind:"report"};typeof e=="number"?(r.percentage=e,t!==void 0&&(r.message=t)):r.message=e,this._connection.sendProgress(Qi.WorkDoneProgress.type,this._token,r)}done(){si.Instances.delete(this._token),this._connection.sendProgress(Qi.WorkDoneProgress.type,this._token,{kind:"end"})}};si.Instances=new Map;var Hc=class extends si{constructor(e,t){super(e,t),this._source=new Qi.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Rl=class{constructor(){}begin(){}report(){}done(){}},Yc=class extends Rl{constructor(){super(),this._source=new Qi.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function j0(n,e){if(e===void 0||e.workDoneToken===void 0)return new Rl;let t=e.workDoneToken;return delete e.workDoneToken,new si(n,t)}Xi.attachWorkDone=j0;var G0=n=>class extends n{constructor(){super(),this._progressSupported=!1}initialize(e){var t;((t=e?.window)===null||t===void 0?void 0:t.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(Qi.WorkDoneProgressCancelNotification.type,r=>{let i=si.Instances.get(r.token);(i instanceof Hc||i instanceof Yc)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Rl:new si(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=U0.generateUuid();return this.connection.sendRequest(Qi.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Hc(this.connection,e))}else return Promise.resolve(new Yc)}};Xi.ProgressFeature=G0;var $p;(function(n){n.type=new Qi.ProgressType})($p||($p={}));var Kp=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress($p.type,this._token,e)}};function W0(n,e){if(e===void 0||e.partialResultToken===void 0)return;let t=e.partialResultToken;return delete e.partialResultToken,new Kp(n,t)}Xi.attachPartialResult=W0});var jN=pe($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.ConfigurationFeature=void 0;var H0=Fn(),Y0=Ec(),$0=n=>class extends n{getConfiguration(e){return e?Y0.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(H0.ConfigurationRequest.type,t).then(r=>Array.isArray(e)?r:r[0])}};$c.ConfigurationFeature=$0});var GN=pe(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.WorkspaceFoldersFeature=void 0;var Kc=Fn(),K0=n=>class extends n{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Kc.Emitter,this.connection.onNotification(Kc.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(Kc.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(Kc.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};zc.WorkspaceFoldersFeature=K0});var WN=pe(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.CallHierarchyFeature=void 0;var zp=Fn(),z0=n=>class extends n{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(zp.CallHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))},onIncomingCalls:e=>{let t=zp.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onOutgoingCalls:e=>{let t=zp.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Qc.CallHierarchyFeature=z0});var Jp=pe(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.SemanticTokensBuilder=Xo.SemanticTokensFeature=void 0;var Qp=Fn(),Q0=n=>class extends n{get semanticTokens(){return{on:e=>{let t=Qp.SemanticTokensRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onDelta:e=>{let t=Qp.SemanticTokensDeltaRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onRange:e=>{let t=Qp.SemanticTokensRangeRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Xo.SemanticTokensFeature=Q0;var Xp=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,r,i,s){let a=e,l=t;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){if(this._prevData!==void 0){let e=this._prevData.length,t=this._data.length,r=0;for(;r<t&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<t&&r<e){let i=0;for(;i<t&&i<e&&this._prevData[e-1-i]===this._data[t-1-i];)i++;let s=this._data.slice(r,t-i);return{resultId:this.id,edits:[{start:r,deleteCount:e-i-r,data:s}]}}else return r<t?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}else return this.build()}};Xo.SemanticTokensBuilder=Xp});var HN=pe(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.ShowDocumentFeature=void 0;var X0=Fn(),J0=n=>class extends n{showDocument(e){return this.connection.sendRequest(X0.ShowDocumentRequest.type,e)}};Xc.ShowDocumentFeature=J0});var YN=pe(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.FileOperationsFeature=void 0;var Jo=Fn(),Z0=n=>class extends n{onDidCreateFiles(e){this.connection.onNotification(Jo.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){this.connection.onNotification(Jo.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){this.connection.onNotification(Jo.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(Jo.WillCreateFilesRequest.type,(t,r)=>e(t,r))}onWillRenameFiles(e){return this.connection.onRequest(Jo.WillRenameFilesRequest.type,(t,r)=>e(t,r))}onWillDeleteFiles(e){return this.connection.onRequest(Jo.WillDeleteFilesRequest.type,(t,r)=>e(t,r))}};Jc.FileOperationsFeature=Z0});var $N=pe(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.LinkedEditingRangeFeature=void 0;var ew=Fn(),tw=n=>class extends n{onLinkedEditingRange(e){this.connection.onRequest(ew.LinkedEditingRangeRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))}};Zc.LinkedEditingRangeFeature=tw});var KN=pe(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.MonikerFeature=void 0;var nw=Fn(),rw=n=>class extends n{get moniker(){return{on:e=>{let t=nw.MonikerRequest.type;this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};eu.MonikerFeature=rw});var sh=pe(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConnection=Ye.combineFeatures=Ye.combineLanguagesFeatures=Ye.combineWorkspaceFeatures=Ye.combineWindowFeatures=Ye.combineClientFeatures=Ye.combineTracerFeatures=Ye.combineTelemetryFeatures=Ye.combineConsoleFeatures=Ye._LanguagesImpl=Ye.BulkUnregistration=Ye.BulkRegistration=Ye.ErrorMessageTracker=Ye.TextDocuments=void 0;var re=Fn(),Ar=Ec(),eh=Yp(),De=UN(),iw=jN(),sw=GN(),ow=WN(),aw=Jp(),lw=HN(),cw=YN(),uw=$N(),fw=KN();function Zp(n){if(n!==null)return n}var th=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new re.Emitter,this._onDidOpen=new re.Emitter,this._onDidClose=new re.Emitter,this._onDidSave=new re.Emitter,this._onWillSave=new re.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=re.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(t=>{let r=t.textDocument,i=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._documents[r.uri]=i;let s=Object.freeze({document:i});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)}),e.onDidChangeTextDocument(t=>{let r=t.textDocument,i=t.contentChanges;if(i.length===0)return;let s=this._documents[r.uri],{version:a}=r;if(a==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);s=this._configuration.update(s,i,a),this._documents[r.uri]=s,this._onDidChangeContent.fire(Object.freeze({document:s}))}),e.onDidCloseTextDocument(t=>{let r=this._documents[t.textDocument.uri];r&&(delete this._documents[t.textDocument.uri],this._onDidClose.fire(Object.freeze({document:r})))}),e.onWillSaveTextDocument(t=>{let r=this._documents[t.textDocument.uri];r&&this._onWillSave.fire(Object.freeze({document:r,reason:t.reason}))}),e.onWillSaveTextDocumentWaitUntil((t,r)=>{let i=this._documents[t.textDocument.uri];return i&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:t.reason}),r):[]}),e.onDidSaveTextDocument(t=>{let r=this._documents[t.textDocument.uri];r&&this._onDidSave.fire(Object.freeze({document:r}))})}};Ye.TextDocuments=th;var nh=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};Ye.ErrorMessageTracker=nh;var tu=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(re.MessageType.Error,e)}warn(e){this.send(re.MessageType.Warning,e)}info(e){this.send(re.MessageType.Info,e)}log(e){this.send(re.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(re.LogMessageNotification.type,{type:e,message:t})}},rh=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:re.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(re.ShowMessageRequest.type,r).then(Zp)}showWarningMessage(e,...t){let r={type:re.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(re.ShowMessageRequest.type,r).then(Zp)}showInformationMessage(e,...t){let r={type:re.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(re.ShowMessageRequest.type,r).then(Zp)}},zN=lw.ShowDocumentFeature(De.ProgressFeature(rh)),dw;(function(n){function e(){return new nu}n.create=e})(dw=Ye.BulkRegistration||(Ye.BulkRegistration={}));var nu=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let r=Ar.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=eh.generateUuid();this._registrations.push({id:i,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},pw;(function(n){function e(){return new kl(void 0,[])}n.create=e})(pw=Ye.BulkUnregistration||(Ye.BulkUnregistration={}));var kl=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let t={unregisterations:e};this._connection.sendRequest(re.UnregistrationRequest.type,t).then(void 0,r=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let t=Ar.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(re.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(t)},s=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},ru=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof nu?this.registerMany(e):e instanceof kl?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){let i=Ar.string(t)?t:t.method,s=eh.generateUuid(),a={registrations:[{id:s,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(re.RegistrationRequest.type,a).then(l=>(e.add({id:s,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,t){let r=Ar.string(e)?e:e.method,i=eh.generateUuid(),s={registrations:[{id:i,method:r,registerOptions:t||{}}]};return this.connection.sendRequest(re.RegistrationRequest.type,s).then(a=>re.Disposable.create(()=>{this.unregisterSingle(i,r)}),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(re.UnregistrationRequest.type,r).then(void 0,i=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(re.RegistrationRequest.type,t).then(()=>new kl(this._connection,t.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ih=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function t(i){return i&&!!i.edit}let r=t(e)?e:{edit:e};return this.connection.sendRequest(re.ApplyWorkspaceEditRequest.type,r)}},QN=cw.FileOperationsFeature(sw.WorkspaceFoldersFeature(iw.ConfigurationFeature(ih))),iu=class{constructor(){this._trace=re.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==re.Trace.Off&&this.connection.sendNotification(re.LogTraceNotification.type,{message:e,verbose:this._trace===re.Trace.Verbose?t:void 0})}},su=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(re.TelemetryEventNotification.type,e)}},ou=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return De.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return De.attachPartialResult(this.connection,t)}};Ye._LanguagesImpl=ou;var XN=fw.MonikerFeature(uw.LinkedEditingRangeFeature(aw.SemanticTokensFeature(ow.CallHierarchyFeature(ou))));function JN(n,e){return function(t){return e(n(t))}}Ye.combineConsoleFeatures=JN;function ZN(n,e){return function(t){return e(n(t))}}Ye.combineTelemetryFeatures=ZN;function eI(n,e){return function(t){return e(n(t))}}Ye.combineTracerFeatures=eI;function tI(n,e){return function(t){return e(n(t))}}Ye.combineClientFeatures=tI;function nI(n,e){return function(t){return e(n(t))}}Ye.combineWindowFeatures=nI;function rI(n,e){return function(t){return e(n(t))}}Ye.combineWorkspaceFeatures=rI;function hw(n,e){return function(t){return e(n(t))}}Ye.combineLanguagesFeatures=hw;function mw(n,e){function t(i,s,a){return i&&s?a(i,s):i||s}return{__brand:"features",console:t(n.console,e.console,JN),tracer:t(n.tracer,e.tracer,eI),telemetry:t(n.telemetry,e.telemetry,ZN),client:t(n.client,e.client,tI),window:t(n.window,e.window,nI),workspace:t(n.workspace,e.workspace,rI)}}Ye.combineFeatures=mw;function gw(n,e,t){let r=t&&t.console?new(t.console(tu)):new tu,i=n(r);r.rawAttach(i);let s=t&&t.tracer?new(t.tracer(iu)):new iu,a=t&&t.telemetry?new(t.telemetry(su)):new su,l=t&&t.client?new(t.client(ru)):new ru,u=t&&t.window?new(t.window(zN)):new zN,f=t&&t.workspace?new(t.workspace(QN)):new QN,d=t&&t.languages?new(t.languages(XN)):new XN,h=[r,s,a,l,u,f,d];function _(E){return E instanceof Promise?E:Ar.thenable(E)?new Promise((C,q)=>{E.then(Z=>C(Z),Z=>q(Z))}):Promise.resolve(E)}let b,g,v,O={listen:()=>i.listen(),sendRequest:(E,...C)=>i.sendRequest(Ar.string(E)?E:E.method,...C),onRequest:(E,C)=>i.onRequest(E,C),sendNotification:(E,C)=>{let q=Ar.string(E)?E:E.method;arguments.length===1?i.sendNotification(q):i.sendNotification(q,C)},onNotification:(E,C)=>i.onNotification(E,C),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:E=>g=E,onInitialized:E=>i.onNotification(re.InitializedNotification.type,E),onShutdown:E=>b=E,onExit:E=>v=E,get console(){return r},get telemetry(){return a},get tracer(){return s},get client(){return l},get window(){return u},get workspace(){return f},get languages(){return d},onDidChangeConfiguration:E=>i.onNotification(re.DidChangeConfigurationNotification.type,E),onDidChangeWatchedFiles:E=>i.onNotification(re.DidChangeWatchedFilesNotification.type,E),__textDocumentSync:void 0,onDidOpenTextDocument:E=>i.onNotification(re.DidOpenTextDocumentNotification.type,E),onDidChangeTextDocument:E=>i.onNotification(re.DidChangeTextDocumentNotification.type,E),onDidCloseTextDocument:E=>i.onNotification(re.DidCloseTextDocumentNotification.type,E),onWillSaveTextDocument:E=>i.onNotification(re.WillSaveTextDocumentNotification.type,E),onWillSaveTextDocumentWaitUntil:E=>i.onRequest(re.WillSaveTextDocumentWaitUntilRequest.type,E),onDidSaveTextDocument:E=>i.onNotification(re.DidSaveTextDocumentNotification.type,E),sendDiagnostics:E=>i.sendNotification(re.PublishDiagnosticsNotification.type,E),onHover:E=>i.onRequest(re.HoverRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),onCompletion:E=>i.onRequest(re.CompletionRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onCompletionResolve:E=>i.onRequest(re.CompletionResolveRequest.type,E),onSignatureHelp:E=>i.onRequest(re.SignatureHelpRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),onDeclaration:E=>i.onRequest(re.DeclarationRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onDefinition:E=>i.onRequest(re.DefinitionRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onTypeDefinition:E=>i.onRequest(re.TypeDefinitionRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onImplementation:E=>i.onRequest(re.ImplementationRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onReferences:E=>i.onRequest(re.ReferencesRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onDocumentHighlight:E=>i.onRequest(re.DocumentHighlightRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onDocumentSymbol:E=>i.onRequest(re.DocumentSymbolRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onWorkspaceSymbol:E=>i.onRequest(re.WorkspaceSymbolRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onCodeAction:E=>i.onRequest(re.CodeActionRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onCodeActionResolve:E=>i.onRequest(re.CodeActionResolveRequest.type,(C,q)=>E(C,q)),onCodeLens:E=>i.onRequest(re.CodeLensRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onCodeLensResolve:E=>i.onRequest(re.CodeLensResolveRequest.type,(C,q)=>E(C,q)),onDocumentFormatting:E=>i.onRequest(re.DocumentFormattingRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),onDocumentRangeFormatting:E=>i.onRequest(re.DocumentRangeFormattingRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),onDocumentOnTypeFormatting:E=>i.onRequest(re.DocumentOnTypeFormattingRequest.type,(C,q)=>E(C,q)),onRenameRequest:E=>i.onRequest(re.RenameRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),onPrepareRename:E=>i.onRequest(re.PrepareRenameRequest.type,(C,q)=>E(C,q)),onDocumentLinks:E=>i.onRequest(re.DocumentLinkRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onDocumentLinkResolve:E=>i.onRequest(re.DocumentLinkResolveRequest.type,(C,q)=>E(C,q)),onDocumentColor:E=>i.onRequest(re.DocumentColorRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onColorPresentation:E=>i.onRequest(re.ColorPresentationRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onFoldingRanges:E=>i.onRequest(re.FoldingRangeRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onSelectionRanges:E=>i.onRequest(re.SelectionRangeRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),De.attachPartialResult(i,C))),onExecuteCommand:E=>i.onRequest(re.ExecuteCommandRequest.type,(C,q)=>E(C,q,De.attachWorkDone(i,C),void 0)),dispose:()=>i.dispose()};for(let E of h)E.attach(O);return i.onRequest(re.InitializeRequest.type,E=>{e.initialize(E),Ar.string(E.trace)&&(s.trace=re.Trace.fromString(E.trace));for(let C of h)C.initialize(E.capabilities);if(g){let C=g(E,new re.CancellationTokenSource().token,De.attachWorkDone(i,E),void 0);return _(C).then(q=>{if(q instanceof re.ResponseError)return q;let Z=q;Z||(Z={capabilities:{}});let ue=Z.capabilities;ue||(ue={},Z.capabilities=ue),ue.textDocumentSync===void 0||ue.textDocumentSync===null?ue.textDocumentSync=Ar.number(O.__textDocumentSync)?O.__textDocumentSync:re.TextDocumentSyncKind.None:!Ar.number(ue.textDocumentSync)&&!Ar.number(ue.textDocumentSync.change)&&(ue.textDocumentSync.change=Ar.number(O.__textDocumentSync)?O.__textDocumentSync:re.TextDocumentSyncKind.None);for(let de of h)de.fillServerCapabilities(ue);return Z})}else{let C={capabilities:{textDocumentSync:re.TextDocumentSyncKind.None}};for(let q of h)q.fillServerCapabilities(C.capabilities);return C}}),i.onRequest(re.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,b)return b(new re.CancellationTokenSource().token)}),i.onNotification(re.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(re.SetTraceNotification.type,E=>{s.trace=re.Trace.fromString(E.value)}),O}Ye.createConnection=gw});var sI=pe(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.resolveModulePath=Tn.FileSystem=Tn.resolveGlobalYarnPath=Tn.resolveGlobalNodePath=Tn.resolve=Tn.uriToFilePath=void 0;var Tw=ar("url"),jr=ar("path"),oh=ar("fs"),ch=ar("child_process");function _w(n){let e=Tw.parse(n);if(e.protocol!=="file:"||!e.path)return;let t=e.path.split("/");for(var r=0,i=t.length;r<i;r++)t[r]=decodeURIComponent(t[r]);if(process.platform==="win32"&&t.length>1){let s=t[0],a=t[1];s.length===0&&a.length>1&&a[1]===":"&&t.shift()}return jr.normalize(t.join("/"))}Tn.uriToFilePath=_w;function ah(){return process.platform==="win32"}function au(n,e,t,r){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let u=process.env,f=Object.create(null);Object.keys(u).forEach(d=>f[d]=u[d]),e&&oh.existsSync(e)&&(f[i]?f[i]=e+jr.delimiter+f[i]:f[i]=e,r&&r(`NODE_PATH value is: ${f[i]}`)),f.ELECTRON_RUN_AS_NODE="1";try{let d=ch.fork("",[],{cwd:t,env:f,execArgv:["-e",s]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${n} failed`));return}d.on("error",_=>{l(_)}),d.on("message",_=>{_.c==="r"&&(d.send({c:"e"}),_.s?a(_.r):l(new Error(`Failed to resolve module: ${n}`)))});let h={c:"rs",a:n};d.send(h)}catch(d){l(d)}})}Tn.resolve=au;function lh(n){let e="npm",t=Object.create(null);Object.keys(process.env).forEach(s=>t[s]=process.env[s]),t.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:t};ah()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=ch.spawnSync(e,["config","get","prefix"],r).stdout;if(!s){n&&n("'npm config get prefix' didn't return a value.");return}let a=s.trim();return n&&n(`'npm config get prefix' value is: ${a}`),a.length>0?ah()?jr.join(a,"node_modules"):jr.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Tn.resolveGlobalNodePath=lh;function yw(n){let e="yarn",t={encoding:"utf8"};ah()&&(e="yarn.cmd",t.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=ch.spawnSync(e,["global","dir","--json"],t),s=i.stdout;if(!s){n&&(n("'yarn global dir' didn't return a value."),i.stderr&&n(i.stderr));return}let a=s.trim().split(/\r?\n/);for(let l of a)try{let u=JSON.parse(l);if(u.type==="log")return jr.join(u.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Tn.resolveGlobalYarnPath=yw;var iI;(function(n){let e;function t(){return e!==void 0||(process.platform==="win32"?e=!1:e=!oh.existsSync(__filename.toUpperCase())||!oh.existsSync(__filename.toLowerCase())),e}n.isCaseSensitive=t;function r(i,s){return t()?jr.normalize(s).indexOf(jr.normalize(i))===0:jr.normalize(s).toLowerCase().indexOf(jr.normalize(i).toLowerCase())===0}n.isParent=r})(iI=Tn.FileSystem||(Tn.FileSystem={}));function bw(n,e,t,r){return t?(jr.isAbsolute(t)||(t=jr.join(n,t)),au(e,t,t,r).then(i=>iI.isParent(t,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>au(e,lh(r),n,r))):au(e,lh(r),n,r)}Tn.resolveModulePath=bw});var uh=pe((Mq,oI)=>{"use strict";oI.exports=Fn()});var lI=pe(Xn=>{"use strict";var Nw=Xn&&Xn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),aI=Xn&&Xn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Nw(e,n,t)};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.ProposedFeatures=Xn.SemanticTokensBuilder=void 0;var Iw=Jp();Object.defineProperty(Xn,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Iw.SemanticTokensBuilder}});aI(Fn(),Xn);aI(sh(),Xn);var xw;(function(n){n.all={__brand:"features"}})(xw=Xn.ProposedFeatures||(Xn.ProposedFeatures={}))});var Gr=pe(Jn=>{"use strict";var Aw=Jn&&Jn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),uI=Jn&&Jn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Aw(e,n,t)};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.createConnection=Jn.Files=void 0;var fh=Ec(),Pw=sh(),wl=sI(),js=uh();uI(uh(),Jn);uI(lI(),Jn);var vw;(function(n){n.uriToFilePath=wl.uriToFilePath,n.resolveGlobalNodePath=wl.resolveGlobalNodePath,n.resolveGlobalYarnPath=wl.resolveGlobalYarnPath,n.resolve=wl.resolve,n.resolveModulePath=wl.resolveModulePath})(vw=Jn.Files||(Jn.Files={}));var cI;function lu(){if(cI!==void 0)try{cI.end()}catch{}}var Zo=!1,fI;function Cw(){let n="--clientProcessId";function e(t){try{let r=parseInt(t);isNaN(r)||(fI=setInterval(()=>{try{process.kill(r,0)}catch{lu(),process.exit(Zo?0:1)}},3e3))}catch{}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if(r===n&&t+1<process.argv.length){e(process.argv[t+1]);return}else{let i=r.split("=");i[0]===n&&e(i[1])}}}Cw();var Sw={initialize:n=>{let e=n.processId;fh.number(e)&&fI===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Zo?0:1)}},3e3)},get shutdownReceived(){return Zo},set shutdownReceived(n){Zo=n},exit:n=>{lu(),process.exit(n)}};function Ew(n,e,t,r){let i,s,a,l;return n!==void 0&&n.__brand==="features"&&(i=n,n=e,e=t,t=r),js.ConnectionStrategy.is(n)||js.ConnectionOptions.is(n)?l=n:(s=n,a=e,l=t),Rw(s,a,l,i)}Jn.createConnection=Ew;function Rw(n,e,t,r){if(!n&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let d=0;d<f.length;d++){let h=f[d];if(h==="--node-ipc"){n=new js.IPCMessageReader(process),e=new js.IPCMessageWriter(process);break}else if(h==="--stdio"){n=process.stdin,e=process.stdout;break}else if(h==="--socket"){l=parseInt(f[d+1]);break}else if(h==="--pipe"){u=f[d+1];break}else{var i=h.split("=");if(i[0]==="--socket"){l=parseInt(i[1]);break}else if(i[0]==="--pipe"){u=i[1];break}}}if(l){let d=js.createServerSocketTransport(l);n=d[0],e=d[1]}else if(u){let d=js.createServerPipeTransport(u);n=d[0],e=d[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!n)throw new Error("Connection input stream is not set. "+s);if(!e)throw new Error("Connection output stream is not set. "+s);if(fh.func(n.read)&&fh.func(n.on)){let l=n;l.on("end",()=>{lu(),process.exit(Zo?0:1)}),l.on("close",()=>{lu(),process.exit(Zo?0:1)})}let a=l=>js.createProtocolConnection(n,e,l,t);return Pw.createConnection(a,Sw,r)}});var ds=pe(Vn=>{"use strict";var Li={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."},Wl={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"},mD="tag:yaml.org,2002:",gD={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function JA(n){let e=[0],t=n.indexOf(`
`);for(;t!==-1;)t+=1,e.push(t),t=n.indexOf(`
`,t);return e}function ZA(n){let e,t;return typeof n=="string"?(e=JA(n),t=n):(Array.isArray(n)&&(n=n[0]),n&&n.context&&(n.lineStarts||(n.lineStarts=JA(n.context.src)),e=n.lineStarts,t=n.context.src)),{lineStarts:e,src:t}}function rm(n,e){if(typeof n!="number"||n<0)return null;let{lineStarts:t,src:r}=ZA(e);if(!t||!r||n>r.length)return null;for(let s=0;s<t.length;++s){let a=t[s];if(n<a)return{line:s,col:n-t[s-1]+1};if(n===a)return{line:s+1,col:1}}let i=t.length;return{line:i,col:n-t[i-1]+1}}function TD(n,e){let{lineStarts:t,src:r}=ZA(e);if(!t||!(n>=1)||n>t.length)return null;let i=t[n-1],s=t[n];for(;s&&s>i&&r[s-1]===`
`;)--s;return r.slice(i,s)}function _D({start:n,end:e},t,r=80){let i=TD(n.line,t);if(!i)return null;let{col:s}=n;if(i.length>r)if(s<=r-10)i=i.substr(0,r-1)+"\u2026";else{let d=Math.round(r/2);i.length>s+d&&(i=i.substr(0,s+d-1)+"\u2026"),s-=i.length-r,i="\u2026"+i.substr(1-r)}let a=1,l="";e&&(e.line===n.line&&s+(e.col-n.col)<=r+1?a=e.col-n.col:(a=Math.min(i.length+1,r)-s,l="\u2026"));let u=s>1?" ".repeat(s-1):"",f="^".repeat(a);return`${i}
${u}${f}${l}`}var fs=class{static copy(e){return new fs(e.start,e.end)}constructor(e,t){this.start=e,this.end=t||e}isEmpty(){return typeof this.start!="number"||!this.end||this.end<=this.start}setOrigRange(e,t){let{start:r,end:i}=this;if(e.length===0||i<=e[0])return this.origStart=r,this.origEnd=i,t;let s=t;for(;s<e.length&&!(e[s]>r);)++s;this.origStart=r+s;let a=s;for(;s<e.length&&!(e[s]>=i);)++s;return this.origEnd=i+s,a}},zt=class{static addStringTerminator(e,t,r){if(r[r.length-1]===`
`)return r;let i=zt.endOfWhiteSpace(e,t);return i>=e.length||e[i]===`
`?r+`
`:r}static atDocumentBoundary(e,t,r){let i=e[t];if(!i)return!0;let s=e[t-1];if(s&&s!==`
`)return!1;if(r){if(i!==r)return!1}else if(i!==Li.DIRECTIVES_END&&i!==Li.DOCUMENT_END)return!1;let a=e[t+1],l=e[t+2];if(a!==i||l!==i)return!1;let u=e[t+3];return!u||u===`
`||u==="	"||u===" "}static endOfIdentifier(e,t){let r=e[t],i=r==="<",s=i?[`
`,"	"," ",">"]:[`
`,"	"," ","[","]","{","}",","];for(;r&&s.indexOf(r)===-1;)r=e[t+=1];return i&&r===">"&&(t+=1),t}static endOfIndent(e,t){let r=e[t];for(;r===" ";)r=e[t+=1];return t}static endOfLine(e,t){let r=e[t];for(;r&&r!==`
`;)r=e[t+=1];return t}static endOfWhiteSpace(e,t){let r=e[t];for(;r==="	"||r===" ";)r=e[t+=1];return t}static startOfLine(e,t){let r=e[t-1];if(r===`
`)return t;for(;r&&r!==`
`;)r=e[t-=1];return t+1}static endOfBlockIndent(e,t,r){let i=zt.endOfIndent(e,r);if(i>r+t)return i;{let s=zt.endOfWhiteSpace(e,i),a=e[s];if(!a||a===`
`)return s}return null}static atBlank(e,t,r){let i=e[t];return i===`
`||i==="	"||i===" "||r&&!i}static nextNodeIsIndented(e,t,r){return!e||t<0?!1:t>0?!0:r&&e==="-"}static normalizeOffset(e,t){let r=e[t];return r?r!==`
`&&e[t-1]===`
`?t-1:zt.endOfWhiteSpace(e,t):t}static foldNewline(e,t,r){let i=0,s=!1,a="",l=e[t+1];for(;l===" "||l==="	"||l===`
`;){switch(l){case`
`:i=0,t+=1,a+=`
`;break;case"	":i<=r&&(s=!0),t=zt.endOfWhiteSpace(e,t+2)-1;break;case" ":i+=1,t+=1;break}l=e[t+1]}return a||(a=" "),l&&i<=r&&(s=!0),{fold:a,offset:t,error:s}}constructor(e,t,r){Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=t||[],this.type=e,this.value=null}getPropValue(e,t,r){if(!this.context)return null;let{src:i}=this.context,s=this.props[e];return s&&i[s.start]===t?i.slice(s.start+(r?1:0),s.end):null}get anchor(){for(let e=0;e<this.props.length;++e){let t=this.getPropValue(e,Li.ANCHOR,!0);if(t!=null)return t}return null}get comment(){let e=[];for(let t=0;t<this.props.length;++t){let r=this.getPropValue(t,Li.COMMENT,!0);r!=null&&e.push(r)}return e.length>0?e.join(`
`):null}commentHasRequiredWhitespace(e){let{src:t}=this.context;if(this.header&&e===this.header.end||!this.valueRange)return!1;let{end:r}=this.valueRange;return e!==r||zt.atBlank(t,r-1)}get hasComment(){if(this.context){let{src:e}=this.context;for(let t=0;t<this.props.length;++t)if(e[this.props[t].start]===Li.COMMENT)return!0}return!1}get hasProps(){if(this.context){let{src:e}=this.context;for(let t=0;t<this.props.length;++t)if(e[this.props[t].start]!==Li.COMMENT)return!0}return!1}get includesTrailingLines(){return!1}get jsonLike(){return[Wl.FLOW_MAP,Wl.FLOW_SEQ,Wl.QUOTE_DOUBLE,Wl.QUOTE_SINGLE].indexOf(this.type)!==-1}get rangeAsLinePos(){if(!this.range||!this.context)return;let e=rm(this.range.start,this.context.root);if(!e)return;let t=rm(this.range.end,this.context.root);return{start:e,end:t}}get rawValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:t}=this.valueRange;return this.context.src.slice(e,t)}get tag(){for(let e=0;e<this.props.length;++e){let t=this.getPropValue(e,Li.TAG,!1);if(t!=null){if(t[1]==="<")return{verbatim:t.slice(2,-1)};{let[r,i,s]=t.match(/^(.*!)([^!]*)$/);return{handle:i,suffix:s}}}}return null}get valueRangeContainsNewline(){if(!this.valueRange||!this.context)return!1;let{start:e,end:t}=this.valueRange,{src:r}=this.context;for(let i=e;i<t;++i)if(r[i]===`
`)return!0;return!1}parseComment(e){let{src:t}=this.context;if(t[e]===Li.COMMENT){let r=zt.endOfLine(t,e+1),i=new fs(e,r);return this.props.push(i),r}return e}setOrigRanges(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach(r=>r.setOrigRange(e,t)),t}toString(){let{context:{src:e},range:t,value:r}=this;if(r!=null)return r;let i=e.slice(t.start,t.end);return zt.addStringTerminator(e,t.end,i)}},Xs=class extends Error{constructor(e,t,r){if(!r||!(t instanceof zt))throw new Error(`Invalid arguments for new ${e}`);super(),this.name=e,this.message=r,this.source=t}makePretty(){if(!this.source)return;this.nodeType=this.source.type;let e=this.source.context&&this.source.context.root;if(typeof this.offset=="number"){this.range=new fs(this.offset,this.offset+1);let t=e&&rm(this.offset,e);if(t){let r={line:t.line,col:t.col+1};this.linePos={start:t,end:r}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){let{line:t,col:r}=this.linePos.start;this.message+=` at line ${t}, column ${r}`;let i=e&&_D(this.linePos,e);i&&(this.message+=`:

${i}
`)}delete this.source}},im=class extends Xs{constructor(e,t){super("YAMLReferenceError",e,t)}},Hl=class extends Xs{constructor(e,t){super("YAMLSemanticError",e,t)}},sm=class extends Xs{constructor(e,t){super("YAMLSyntaxError",e,t)}},om=class extends Xs{constructor(e,t){super("YAMLWarning",e,t)}};function yD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var La=class extends zt{static endOfLine(e,t,r){let i=e[t],s=t;for(;i&&i!==`
`&&!(r&&(i==="["||i==="]"||i==="{"||i==="}"||i===","));){let a=e[s+1];if(i===":"&&(!a||a===`
`||a==="	"||a===" "||r&&a===",")||(i===" "||i==="	")&&a==="#")break;s+=1,i=a}return s}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:t}=this.valueRange,{src:r}=this.context,i=r[t-1];for(;e<t&&(i===`
`||i==="	"||i===" ");)i=r[--t-1];let s="";for(let l=e;l<t;++l){let u=r[l];if(u===`
`){let{fold:f,offset:d}=zt.foldNewline(r,l,-1);s+=f,l=d}else if(u===" "||u==="	"){let f=l,d=r[l+1];for(;l<t&&(d===" "||d==="	");)l+=1,d=r[l+1];d!==`
`&&(s+=l>f?r.slice(f,l+1):u)}else s+=u}let a=r[e];switch(a){case"	":{let l="Plain value cannot start with a tab character";return{errors:[new Hl(this,l)],str:s}}case"@":case"`":{let l=`Plain value cannot start with reserved character ${a}`;return{errors:[new Hl(this,l)],str:s}}default:return s}}parseBlockValue(e){let{indent:t,inFlow:r,src:i}=this.context,s=e,a=e;for(let l=i[s];l===`
`&&!zt.atDocumentBoundary(i,s+1);l=i[s]){let u=zt.endOfBlockIndent(i,t,s+1);if(u===null||i[u]==="#")break;i[u]===`
`?s=u:(a=La.endOfLine(i,u,r),s=a)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=a,a}parse(e,t){this.context=e;let{inFlow:r,src:i}=e,s=t,a=i[s];return a&&a!=="#"&&a!==`
`&&(s=La.endOfLine(i,t,r)),this.valueRange=new fs(t,s),s=zt.endOfWhiteSpace(i,s),s=this.parseComment(s),(!this.hasComment||this.valueRange.isEmpty())&&(s=this.parseBlockValue(s)),s}};Vn.Char=Li;Vn.Node=zt;Vn.PlainValue=La;Vn.Range=fs;Vn.Type=Wl;Vn.YAMLError=Xs;Vn.YAMLReferenceError=im;Vn.YAMLSemanticError=Hl;Vn.YAMLSyntaxError=sm;Vn.YAMLWarning=om;Vn._defineProperty=yD;Vn.defaultTagPrefix=mD;Vn.defaultTags=gD});var tP=pe(eP=>{"use strict";var H=ds(),eo=class extends H.Node{constructor(){super(H.Type.BLANK_LINE)}get includesTrailingLines(){return!0}parse(e,t){return this.context=e,this.range=new H.Range(t,t+1),t+1}},Yl=class extends H.Node{constructor(e,t){super(e,t),this.node=null}get includesTrailingLines(){return!!this.node&&this.node.includesTrailingLines}parse(e,t){this.context=e;let{parseNode:r,src:i}=e,{atLineStart:s,lineStart:a}=e;!s&&this.type===H.Type.SEQ_ITEM&&(this.error=new H.YAMLSemanticError(this,"Sequence items must not have preceding content on the same line"));let l=s?t-a:e.indent,u=H.Node.endOfWhiteSpace(i,t+1),f=i[u],d=f==="#",h=[],_=null;for(;f===`
`||f==="#";){if(f==="#"){let g=H.Node.endOfLine(i,u+1);h.push(new H.Range(u,g)),u=g}else{s=!0,a=u+1;let g=H.Node.endOfWhiteSpace(i,a);i[g]===`
`&&h.length===0&&(_=new eo,a=_.parse({src:i},a)),u=H.Node.endOfIndent(i,a)}f=i[u]}if(H.Node.nextNodeIsIndented(f,u-(a+l),this.type!==H.Type.SEQ_ITEM)?this.node=r({atLineStart:s,inCollection:!1,indent:l,lineStart:a,parent:this},u):f&&a>t+1&&(u=a-1),this.node){if(_){let g=e.parent.items||e.parent.contents;g&&g.push(_)}h.length&&Array.prototype.push.apply(this.props,h),u=this.node.range.end}else if(d){let g=h[0];this.props.push(g),u=g.end}else u=H.Node.endOfLine(i,t+1);let b=this.node?this.node.valueRange.end:u;return this.valueRange=new H.Range(t,b),u}setOrigRanges(e,t){return t=super.setOrigRanges(e,t),this.node?this.node.setOrigRanges(e,t):t}toString(){let{context:{src:e},node:t,range:r,value:i}=this;if(i!=null)return i;let s=t?e.slice(r.start,t.range.start)+String(t):e.slice(r.start,r.end);return H.Node.addStringTerminator(e,r.end,s)}},Js=class extends H.Node{constructor(){super(H.Type.COMMENT)}parse(e,t){this.context=e;let r=this.parseComment(t);return this.range=new H.Range(t,r),r}};function am(n){let e=n;for(;e instanceof Yl;)e=e.node;if(!(e instanceof to))return null;let t=e.items.length,r=-1;for(let a=t-1;a>=0;--a){let l=e.items[a];if(l.type===H.Type.COMMENT){let{indent:u,lineStart:f}=l.context;if(u>0&&l.range.start>=f+u)break;r=a}else if(l.type===H.Type.BLANK_LINE)r=a;else break}if(r===-1)return null;let i=e.items.splice(r,t-r),s=i[0].range.start;for(;e.range.end=s,e.valueRange&&e.valueRange.end>s&&(e.valueRange.end=s),e!==n;)e=e.context.parent;return i}var to=class extends H.Node{static nextContentHasIndent(e,t,r){let i=H.Node.endOfLine(e,t)+1;t=H.Node.endOfWhiteSpace(e,i);let s=e[t];return s?t>=i+r?!0:s!=="#"&&s!==`
`?!1:to.nextContentHasIndent(e,t,r):!1}constructor(e){super(e.type===H.Type.SEQ_ITEM?H.Type.SEQ:H.Type.MAP);for(let r=e.props.length-1;r>=0;--r)if(e.props[r].start<e.context.lineStart){this.props=e.props.slice(0,r+1),e.props=e.props.slice(r+1);let i=e.props[0]||e.valueRange;e.range.start=i.start;break}this.items=[e];let t=am(e);t&&Array.prototype.push.apply(this.items,t)}get includesTrailingLines(){return this.items.length>0}parse(e,t){this.context=e;let{parseNode:r,src:i}=e,s=H.Node.startOfLine(i,t),a=this.items[0];a.context.parent=this,this.valueRange=H.Range.copy(a.valueRange);let l=a.range.start-a.context.lineStart,u=t;u=H.Node.normalizeOffset(i,u);let f=i[u],d=H.Node.endOfWhiteSpace(i,s)===u,h=!1;for(;f;){for(;f===`
`||f==="#";){if(d&&f===`
`&&!h){let g=new eo;if(u=g.parse({src:i},u),this.valueRange.end=u,u>=i.length){f=null;break}this.items.push(g),u-=1}else if(f==="#"){if(u<s+l&&!to.nextContentHasIndent(i,u,l))return u;let g=new Js;if(u=g.parse({indent:l,lineStart:s,src:i},u),this.items.push(g),this.valueRange.end=u,u>=i.length){f=null;break}}if(s=u+1,u=H.Node.endOfIndent(i,s),H.Node.atBlank(i,u)){let g=H.Node.endOfWhiteSpace(i,u),v=i[g];(!v||v===`
`||v==="#")&&(u=g)}f=i[u],d=!0}if(!f)break;if(u!==s+l&&(d||f!==":")){if(u<s+l){s>t&&(u=s);break}else if(!this.error){let g="All collection items must start at the same column";this.error=new H.YAMLSyntaxError(this,g)}}if(a.type===H.Type.SEQ_ITEM){if(f!=="-"){s>t&&(u=s);break}}else if(f==="-"&&!this.error){let g=i[u+1];if(!g||g===`
`||g==="	"||g===" "){let v="A collection cannot be both a mapping and a sequence";this.error=new H.YAMLSyntaxError(this,v)}}let _=r({atLineStart:d,inCollection:!0,indent:l,lineStart:s,parent:this},u);if(!_)return u;if(this.items.push(_),this.valueRange.end=_.valueRange.end,u=H.Node.normalizeOffset(i,_.range.end),f=i[u],d=!1,h=_.includesTrailingLines,f){let g=u-1,v=i[g];for(;v===" "||v==="	";)v=i[--g];v===`
`&&(s=g+1,d=!0)}let b=am(_);b&&Array.prototype.push.apply(this.items,b)}return u}setOrigRanges(e,t){return t=super.setOrigRanges(e,t),this.items.forEach(r=>{t=r.setOrigRanges(e,t)}),t}toString(){let{context:{src:e},items:t,range:r,value:i}=this;if(i!=null)return i;let s=e.slice(r.start,t[0].range.start)+String(t[0]);for(let a=1;a<t.length;++a){let l=t[a],{atLineStart:u,indent:f}=l.context;if(u)for(let d=0;d<f;++d)s+=" ";s+=String(l)}return H.Node.addStringTerminator(e,r.end,s)}},lm=class extends H.Node{constructor(){super(H.Type.DIRECTIVE),this.name=null}get parameters(){let e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}parseName(e){let{src:t}=this.context,r=e,i=t[r];for(;i&&i!==`
`&&i!=="	"&&i!==" ";)i=t[r+=1];return this.name=t.slice(e,r),r}parseParameters(e){let{src:t}=this.context,r=e,i=t[r];for(;i&&i!==`
`&&i!=="#";)i=t[r+=1];return this.valueRange=new H.Range(e,r),r}parse(e,t){this.context=e;let r=this.parseName(t+1);return r=this.parseParameters(r),r=this.parseComment(r),this.range=new H.Range(t,r),r}},Da=class extends H.Node{static startCommentOrEndBlankLine(e,t){let r=H.Node.endOfWhiteSpace(e,t),i=e[r];return i==="#"||i===`
`?r:t}constructor(){super(H.Type.DOCUMENT),this.directives=null,this.contents=null,this.directivesEndMarker=null,this.documentEndMarker=null}parseDirectives(e){let{src:t}=this.context;this.directives=[];let r=!0,i=!1,s=e;for(;!H.Node.atDocumentBoundary(t,s,H.Char.DIRECTIVES_END);)switch(s=Da.startCommentOrEndBlankLine(t,s),t[s]){case`
`:if(r){let a=new eo;s=a.parse({src:t},s),s<t.length&&this.directives.push(a)}else s+=1,r=!0;break;case"#":{let a=new Js;s=a.parse({src:t},s),this.directives.push(a),r=!1}break;case"%":{let a=new lm;s=a.parse({parent:this,src:t},s),this.directives.push(a),i=!0,r=!1}break;default:return i?this.error=new H.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s}return t[s]?(this.directivesEndMarker=new H.Range(s,s+3),s+3):(i?this.error=new H.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),s)}parseContents(e){let{parseNode:t,src:r}=this.context;this.contents||(this.contents=[]);let i=e;for(;r[i-1]==="-";)i-=1;let s=H.Node.endOfWhiteSpace(r,e),a=i===e;for(this.valueRange=new H.Range(s);!H.Node.atDocumentBoundary(r,s,H.Char.DOCUMENT_END);){switch(r[s]){case`
`:if(a){let l=new eo;s=l.parse({src:r},s),s<r.length&&this.contents.push(l)}else s+=1,a=!0;i=s;break;case"#":{let l=new Js;s=l.parse({src:r},s),this.contents.push(l),a=!1}break;default:{let l=H.Node.endOfIndent(r,s),f=t({atLineStart:a,indent:-1,inFlow:!1,inCollection:!1,lineStart:i,parent:this},l);if(!f)return this.valueRange.end=l;this.contents.push(f),s=f.range.end,a=!1;let d=am(f);d&&Array.prototype.push.apply(this.contents,d)}}s=Da.startCommentOrEndBlankLine(r,s)}if(this.valueRange.end=s,r[s]&&(this.documentEndMarker=new H.Range(s,s+3),s+=3,r[s])){if(s=H.Node.endOfWhiteSpace(r,s),r[s]==="#"){let l=new Js;s=l.parse({src:r},s),this.contents.push(l)}switch(r[s]){case`
`:s+=1;break;case void 0:break;default:this.error=new H.YAMLSyntaxError(this,"Document end marker line cannot have a non-comment suffix")}}return s}parse(e,t){e.root=this,this.context=e;let{src:r}=e,i=r.charCodeAt(t)===65279?t+1:t;return i=this.parseDirectives(i),i=this.parseContents(i),i}setOrigRanges(e,t){return t=super.setOrigRanges(e,t),this.directives.forEach(r=>{t=r.setOrigRanges(e,t)}),this.directivesEndMarker&&(t=this.directivesEndMarker.setOrigRange(e,t)),this.contents.forEach(r=>{t=r.setOrigRanges(e,t)}),this.documentEndMarker&&(t=this.documentEndMarker.setOrigRange(e,t)),t}toString(){let{contents:e,directives:t,value:r}=this;if(r!=null)return r;let i=t.join("");return e.length>0&&((t.length>0||e[0].type===H.Type.COMMENT)&&(i+=`---
`),i+=e.join("")),i[i.length-1]!==`
`&&(i+=`
`),i}},cm=class extends H.Node{parse(e,t){this.context=e;let{src:r}=e,i=H.Node.endOfIdentifier(r,t+1);return this.valueRange=new H.Range(t+1,i),i=H.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}},ps={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"},um=class extends H.Node{constructor(e,t){super(e,t),this.blockIndent=null,this.chomping=ps.CLIP,this.header=null}get includesTrailingLines(){return this.chomping===ps.KEEP}get strValue(){if(!this.valueRange||!this.context)return null;let{start:e,end:t}=this.valueRange,{indent:r,src:i}=this.context;if(this.valueRange.isEmpty())return"";let s=null,a=i[t-1];for(;a===`
`||a==="	"||a===" ";){if(t-=1,t<=e){if(this.chomping===ps.KEEP)break;return""}a===`
`&&(s=t),a=i[t-1]}let l=t+1;s&&(this.chomping===ps.KEEP?(l=s,t=this.valueRange.end):t=s);let u=r+this.blockIndent,f=this.type===H.Type.BLOCK_FOLDED,d=!0,h="",_="",b=!1;for(let g=e;g<t;++g){for(let O=0;O<u&&i[g]===" ";++O)g+=1;let v=i[g];if(v===`
`)_===`
`?h+=`
`:_=`
`;else{let O=H.Node.endOfLine(i,g),E=i.slice(g,O);g=O,f&&(v===" "||v==="	")&&g<l?(_===" "?_=`
`:!b&&!d&&_===`
`&&(_=`

`),h+=_+E,_=O<t&&i[O]||"",b=!0):(h+=_+E,_=f&&g<l?" ":`
`,b=!1),d&&E!==""&&(d=!1)}}return this.chomping===ps.STRIP?h:h+`
`}parseBlockHeader(e){let{src:t}=this.context,r=e+1,i="";for(;;){let s=t[r];switch(s){case"-":this.chomping=ps.STRIP;break;case"+":this.chomping=ps.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i+=s;break;default:return this.blockIndent=Number(i)||null,this.header=new H.Range(e,r),r}r+=1}}parseBlockValue(e){let{indent:t,src:r}=this.context,i=!!this.blockIndent,s=e,a=e,l=1;for(let u=r[s];u===`
`&&(s+=1,!H.Node.atDocumentBoundary(r,s));u=r[s]){let f=H.Node.endOfBlockIndent(r,t,s);if(f===null)break;let d=r[f],h=f-(s+t);if(this.blockIndent){if(d&&d!==`
`&&h<this.blockIndent){if(r[f]==="#")break;if(!this.error){let b=`Block scalars must not be less indented than their ${i?"explicit indentation indicator":"first line"}`;this.error=new H.YAMLSemanticError(this,b)}}}else if(r[f]!==`
`){if(h<l){let _="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";this.error=new H.YAMLSemanticError(this,_)}this.blockIndent=h}else h>l&&(l=h);r[f]===`
`?s=f:s=a=H.Node.endOfLine(r,f)}return this.chomping!==ps.KEEP&&(s=r[a]?a+1:a),this.valueRange=new H.Range(e+1,s),s}parse(e,t){this.context=e;let{src:r}=e,i=this.parseBlockHeader(t);return i=H.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i=this.parseBlockValue(i),i}setOrigRanges(e,t){return t=super.setOrigRanges(e,t),this.header?this.header.setOrigRange(e,t):t}},fm=class extends H.Node{constructor(e,t){super(e,t),this.items=null}prevNodeIsJsonLike(e=this.items.length){let t=this.items[e-1];return!!t&&(t.jsonLike||t.type===H.Type.COMMENT&&this.prevNodeIsJsonLike(e-1))}parse(e,t){this.context=e;let{parseNode:r,src:i}=e,{indent:s,lineStart:a}=e,l=i[t];this.items=[{char:l,offset:t}];let u=H.Node.endOfWhiteSpace(i,t+1);for(l=i[u];l&&l!=="]"&&l!=="}";){switch(l){case`
`:{a=u+1;let f=H.Node.endOfWhiteSpace(i,a);if(i[f]===`
`){let d=new eo;a=d.parse({src:i},a),this.items.push(d)}if(u=H.Node.endOfIndent(i,a),u<=a+s&&(l=i[u],u<a+s||l!=="]"&&l!=="}")){let d="Insufficient indentation in flow collection";this.error=new H.YAMLSemanticError(this,d)}}break;case",":this.items.push({char:l,offset:u}),u+=1;break;case"#":{let f=new Js;u=f.parse({src:i},u),this.items.push(f)}break;case"?":case":":{let f=i[u+1];if(f===`
`||f==="	"||f===" "||f===","||l===":"&&this.prevNodeIsJsonLike()){this.items.push({char:l,offset:u}),u+=1;break}}default:{let f=r({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:a,parent:this},u);if(!f)return this.valueRange=new H.Range(t,u),u;this.items.push(f),u=H.Node.normalizeOffset(i,f.range.end)}}u=H.Node.endOfWhiteSpace(i,u),l=i[u]}return this.valueRange=new H.Range(t,u+1),l&&(this.items.push({char:l,offset:u}),u=H.Node.endOfWhiteSpace(i,u+1),u=this.parseComment(u)),u}setOrigRanges(e,t){return t=super.setOrigRanges(e,t),this.items.forEach(r=>{if(r instanceof H.Node)t=r.setOrigRanges(e,t);else if(e.length===0)r.origOffset=r.offset;else{let i=t;for(;i<e.length&&!(e[i]>r.offset);)++i;r.origOffset=r.offset+i,t=i}}),t}toString(){let{context:{src:e},items:t,range:r,value:i}=this;if(i!=null)return i;let s=t.filter(u=>u instanceof H.Node),a="",l=r.start;return s.forEach(u=>{let f=e.slice(l,u.range.start);l=u.range.end,a+=f+String(u),a[a.length-1]===`
`&&e[l-1]!==`
`&&e[l]===`
`&&(l+=1)}),a+=e.slice(l,r.end),H.Node.addStringTerminator(e,r.end,a)}},$l=class extends H.Node{static endOfQuote(e,t){let r=e[t];for(;r&&r!=='"';)t+=r==="\\"?2:1,r=e[t];return t+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:t,end:r}=this.valueRange,{indent:i,src:s}=this.context;s[r-1]!=='"'&&e.push(new H.YAMLSyntaxError(this,'Missing closing "quote'));let a="";for(let l=t+1;l<r-1;++l){let u=s[l];if(u===`
`){H.Node.atDocumentBoundary(s,l+1)&&e.push(new H.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:f,offset:d,error:h}=H.Node.foldNewline(s,l,i);a+=f,l=d,h&&e.push(new H.YAMLSemanticError(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if(u==="\\")switch(l+=1,s[l]){case"0":a+="\0";break;case"a":a+="\x07";break;case"b":a+="\b";break;case"e":a+="\x1B";break;case"f":a+="\f";break;case"n":a+=`
`;break;case"r":a+="\r";break;case"t":a+="	";break;case"v":a+="\v";break;case"N":a+="\x85";break;case"_":a+="\xA0";break;case"L":a+="\u2028";break;case"P":a+="\u2029";break;case" ":a+=" ";break;case'"':a+='"';break;case"/":a+="/";break;case"\\":a+="\\";break;case"	":a+="	";break;case"x":a+=this.parseCharCode(l+1,2,e),l+=2;break;case"u":a+=this.parseCharCode(l+1,4,e),l+=4;break;case"U":a+=this.parseCharCode(l+1,8,e),l+=8;break;case`
`:for(;s[l+1]===" "||s[l+1]==="	";)l+=1;break;default:e.push(new H.YAMLSyntaxError(this,`Invalid escape sequence ${s.substr(l-1,2)}`)),a+="\\"+s[l]}else if(u===" "||u==="	"){let f=l,d=s[l+1];for(;d===" "||d==="	";)l+=1,d=s[l+1];d!==`
`&&(a+=l>f?s.slice(f,l+1):u)}else a+=u}return e.length>0?{errors:e,str:a}:a}parseCharCode(e,t,r){let{src:i}=this.context,s=i.substr(e,t),l=s.length===t&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;return isNaN(l)?(r.push(new H.YAMLSyntaxError(this,`Invalid escape sequence ${i.substr(e-2,t+2)}`)),i.substr(e-2,t+2)):String.fromCodePoint(l)}parse(e,t){this.context=e;let{src:r}=e,i=$l.endOfQuote(r,t+1);return this.valueRange=new H.Range(t,i),i=H.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}},Kl=class extends H.Node{static endOfQuote(e,t){let r=e[t];for(;r;)if(r==="'"){if(e[t+1]!=="'")break;r=e[t+=2]}else r=e[t+=1];return t+1}get strValue(){if(!this.valueRange||!this.context)return null;let e=[],{start:t,end:r}=this.valueRange,{indent:i,src:s}=this.context;s[r-1]!=="'"&&e.push(new H.YAMLSyntaxError(this,"Missing closing 'quote"));let a="";for(let l=t+1;l<r-1;++l){let u=s[l];if(u===`
`){H.Node.atDocumentBoundary(s,l+1)&&e.push(new H.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));let{fold:f,offset:d,error:h}=H.Node.foldNewline(s,l,i);a+=f,l=d,h&&e.push(new H.YAMLSemanticError(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if(u==="'")a+=u,l+=1,s[l]!=="'"&&e.push(new H.YAMLSyntaxError(this,"Unescaped single quote? This should not happen."));else if(u===" "||u==="	"){let f=l,d=s[l+1];for(;d===" "||d==="	";)l+=1,d=s[l+1];d!==`
`&&(a+=l>f?s.slice(f,l+1):u)}else a+=u}return e.length>0?{errors:e,str:a}:a}parse(e,t){this.context=e;let{src:r}=e,i=Kl.endOfQuote(r,t+1);return this.valueRange=new H.Range(t,i),i=H.Node.endOfWhiteSpace(r,i),i=this.parseComment(i),i}};function bD(n,e){switch(n){case H.Type.ALIAS:return new cm(n,e);case H.Type.BLOCK_FOLDED:case H.Type.BLOCK_LITERAL:return new um(n,e);case H.Type.FLOW_MAP:case H.Type.FLOW_SEQ:return new fm(n,e);case H.Type.MAP_KEY:case H.Type.MAP_VALUE:case H.Type.SEQ_ITEM:return new Yl(n,e);case H.Type.COMMENT:case H.Type.PLAIN:return new H.PlainValue(n,e);case H.Type.QUOTE_DOUBLE:return new $l(n,e);case H.Type.QUOTE_SINGLE:return new Kl(n,e);default:return null}}var Zs=class{static parseType(e,t,r){switch(e[t]){case"*":return H.Type.ALIAS;case">":return H.Type.BLOCK_FOLDED;case"|":return H.Type.BLOCK_LITERAL;case"{":return H.Type.FLOW_MAP;case"[":return H.Type.FLOW_SEQ;case"?":return!r&&H.Node.atBlank(e,t+1,!0)?H.Type.MAP_KEY:H.Type.PLAIN;case":":return!r&&H.Node.atBlank(e,t+1,!0)?H.Type.MAP_VALUE:H.Type.PLAIN;case"-":return!r&&H.Node.atBlank(e,t+1,!0)?H.Type.SEQ_ITEM:H.Type.PLAIN;case'"':return H.Type.QUOTE_DOUBLE;case"'":return H.Type.QUOTE_SINGLE;default:return H.Type.PLAIN}}constructor(e={},{atLineStart:t,inCollection:r,inFlow:i,indent:s,lineStart:a,parent:l}={}){H._defineProperty(this,"parseNode",(u,f)=>{if(H.Node.atDocumentBoundary(this.src,f))return null;let d=new Zs(this,u),{props:h,type:_,valueStart:b}=d.parseProps(f),g=bD(_,h),v=g.parse(d,b);if(g.range=new H.Range(f,v),v<=f&&(g.error=new Error("Node#parse consumed no characters"),g.error.parseEnd=v,g.error.source=g,g.range.end=f+1),d.nodeStartsCollection(g)){!g.error&&!d.atLineStart&&d.parent.type===H.Type.DOCUMENT&&(g.error=new H.YAMLSyntaxError(g,"Block collection must not have preceding content here (e.g. directives-end indicator)"));let O=new to(g);return v=O.parse(new Zs(d),v),O.range=new H.Range(f,v),O}return g}),this.atLineStart=t??(e.atLineStart||!1),this.inCollection=r??(e.inCollection||!1),this.inFlow=i??(e.inFlow||!1),this.indent=s??e.indent,this.lineStart=a??e.lineStart,this.parent=l??(e.parent||{}),this.root=e.root,this.src=e.src}nodeStartsCollection(e){let{inCollection:t,inFlow:r,src:i}=this;if(t||r)return!1;if(e instanceof Yl)return!0;let s=e.range.end;return i[s]===`
`||i[s-1]===`
`?!1:(s=H.Node.endOfWhiteSpace(i,s),i[s]===":")}parseProps(e){let{inFlow:t,parent:r,src:i}=this,s=[],a=!1;e=this.atLineStart?H.Node.endOfIndent(i,e):H.Node.endOfWhiteSpace(i,e);let l=i[e];for(;l===H.Char.ANCHOR||l===H.Char.COMMENT||l===H.Char.TAG||l===`
`;){if(l===`
`){let f=e,d;do d=f+1,f=H.Node.endOfIndent(i,d);while(i[f]===`
`);let h=f-(d+this.indent),_=r.type===H.Type.SEQ_ITEM&&r.context.atLineStart;if(i[f]!=="#"&&!H.Node.nextNodeIsIndented(i[f],h,!_))break;this.atLineStart=!0,this.lineStart=d,a=!1,e=f}else if(l===H.Char.COMMENT){let f=H.Node.endOfLine(i,e+1);s.push(new H.Range(e,f)),e=f}else{let f=H.Node.endOfIdentifier(i,e+1);l===H.Char.TAG&&i[f]===","&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(e+1,f+13))&&(f=H.Node.endOfIdentifier(i,f+5)),s.push(new H.Range(e,f)),a=!0,e=H.Node.endOfWhiteSpace(i,f)}l=i[e]}a&&l===":"&&H.Node.atBlank(i,e+1,!0)&&(e-=1);let u=Zs.parseType(i,e,t);return{props:s,type:u,valueStart:e}}};function ND(n){let e=[];n.indexOf("\r")!==-1&&(n=n.replace(/\r\n?/g,(i,s)=>(i.length>1&&e.push(s),`
`)));let t=[],r=0;do{let i=new Da,s=new Zs({src:n});r=i.parse(s,r),t.push(i)}while(r<n.length);return t.setOrigRanges=()=>{if(e.length===0)return!1;for(let s=1;s<e.length;++s)e[s]-=s;let i=0;for(let s=0;s<t.length;++s)i=t[s].setOrigRanges(e,i);return e.splice(0,e.length),!0},t.toString=()=>t.join(`...
`),t}eP.parse=ND});var Ma=pe(pt=>{"use strict";var z=ds();function ID(n,e,t){return t?`#${t.replace(/[\s\S]^/gm,`$&${e}#`)}
${e}${n}`:n}function Fa(n,e,t){return t?t.indexOf(`
`)===-1?`${n} #${t}`:`${n}
`+t.replace(/^/gm,`${e||""}#`):n}var nr=class{};function hs(n,e,t){if(Array.isArray(n))return n.map((r,i)=>hs(r,String(i),t));if(n&&typeof n.toJSON=="function"){let r=t&&t.anchors&&t.anchors.get(n);r&&(t.onCreate=s=>{r.res=s,delete t.onCreate});let i=n.toJSON(e,t);return r&&t.onCreate&&t.onCreate(i),i}return(!t||!t.keep)&&typeof n=="bigint"?Number(n):n}var an=class extends nr{constructor(e){super(),this.value=e}toJSON(e,t){return t&&t.keep?this.value:hs(this.value,e,t)}toString(){return String(this.value)}};function nP(n,e,t){let r=t;for(let i=e.length-1;i>=0;--i){let s=e[i];if(Number.isInteger(s)&&s>=0){let a=[];a[s]=r,r=a}else{let a={};Object.defineProperty(a,s,{value:r,writable:!0,enumerable:!0,configurable:!0}),r=a}}return n.createNode(r,!1)}var sP=n=>n==null||typeof n=="object"&&n[Symbol.iterator]().next().done,Mt=class extends nr{constructor(e){super(),z._defineProperty(this,"items",[]),this.schema=e}addIn(e,t){if(sP(e))this.add(t);else{let[r,...i]=e,s=this.get(r,!0);if(s instanceof Mt)s.addIn(i,t);else if(s===void 0&&this.schema)this.set(r,nP(this.schema,i,t));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn([e,...t]){if(t.length===0)return this.delete(e);let r=this.get(e,!0);if(r instanceof Mt)return r.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],r){let i=this.get(e,!0);return t.length===0?!r&&i instanceof an?i.value:i:i instanceof Mt?i.getIn(t,r):void 0}hasAllNullValues(){return this.items.every(e=>{if(!e||e.type!=="PAIR")return!1;let t=e.value;return t==null||t instanceof an&&t.value==null&&!t.commentBefore&&!t.comment&&!t.tag})}hasIn([e,...t]){if(t.length===0)return this.has(e);let r=this.get(e,!0);return r instanceof Mt?r.hasIn(t):!1}setIn([e,...t],r){if(t.length===0)this.set(e,r);else{let i=this.get(e,!0);if(i instanceof Mt)i.setIn(t,r);else if(i===void 0&&this.schema)this.set(e,nP(this.schema,t,r));else throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}}toJSON(){return null}toString(e,{blockItem:t,flowChars:r,isMap:i,itemIndent:s},a,l){let{indent:u,indentStep:f,stringify:d}=e,h=this.type===z.Type.FLOW_MAP||this.type===z.Type.FLOW_SEQ||e.inFlow;h&&(s+=f);let _=i&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:_,indent:s,inFlow:h,type:null});let b=!1,g=!1,v=this.items.reduce((E,C,q)=>{let Z;C&&(!b&&C.spaceBefore&&E.push({type:"comment",str:""}),C.commentBefore&&C.commentBefore.match(/^.*$/gm).forEach(de=>{E.push({type:"comment",str:`#${de}`})}),C.comment&&(Z=C.comment),h&&(!b&&C.spaceBefore||C.commentBefore||C.comment||C.key&&(C.key.commentBefore||C.key.comment)||C.value&&(C.value.commentBefore||C.value.comment))&&(g=!0)),b=!1;let ue=d(C,e,()=>Z=null,()=>b=!0);return h&&!g&&ue.includes(`
`)&&(g=!0),h&&q<this.items.length-1&&(ue+=","),ue=Fa(ue,s,Z),b&&(Z||h)&&(b=!1),E.push({type:"item",str:ue}),E},[]),O;if(v.length===0)O=r.start+r.end;else if(h){let{start:E,end:C}=r,q=v.map(Z=>Z.str);if(g||q.reduce((Z,ue)=>Z+ue.length+2,2)>Mt.maxFlowStringSingleLineLength){O=E;for(let Z of q)O+=Z?`
${f}${u}${Z}`:`
`;O+=`
${u}${C}`}else O=`${E} ${q.join(" ")} ${C}`}else{let E=v.map(t);O=E.shift();for(let C of E)O+=C?`
${u}${C}`:`
`}return this.comment?(O+=`
`+this.comment.replace(/^/gm,`${u}#`),a&&a()):b&&l&&l(),O}};z._defineProperty(Mt,"maxFlowStringSingleLineLength",60);function vf(n){let e=n instanceof an?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),Number.isInteger(e)&&e>=0?e:null}var ms=class extends Mt{add(e){this.items.push(e)}delete(e){let t=vf(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){let r=vf(e);if(typeof r!="number")return;let i=this.items[r];return!t&&i instanceof an?i.value:i}has(e){let t=vf(e);return typeof t=="number"&&t<this.items.length}set(e,t){let r=vf(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);this.items[r]=t}toJSON(e,t){let r=[];t&&t.onCreate&&t.onCreate(r);let i=0;for(let s of this.items)r.push(hs(s,String(i++),t));return r}toString(e,t,r){return e?super.toString(e,{blockItem:i=>i.type==="comment"?i.str:`- ${i.str}`,flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},t,r):JSON.stringify(this)}},xD=(n,e,t)=>e===null?"":typeof e!="object"?String(e):n instanceof nr&&t&&t.doc?n.toString({anchors:Object.create(null),doc:t.doc,indent:"",indentStep:t.indentStep,inFlow:!0,inStringifyKey:!0,stringify:t.stringify}):JSON.stringify(e),tt=class extends nr{constructor(e,t=null){super(),this.key=e,this.value=t,this.type=tt.Type.PAIR}get commentBefore(){return this.key instanceof nr?this.key.commentBefore:void 0}set commentBefore(e){if(this.key==null&&(this.key=new an(null)),this.key instanceof nr)this.key.commentBefore=e;else{let t="Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.";throw new Error(t)}}addToJSMap(e,t){let r=hs(this.key,"",e);if(t instanceof Map){let i=hs(this.value,r,e);t.set(r,i)}else if(t instanceof Set)t.add(r);else{let i=xD(this.key,r,e),s=hs(this.value,i,e);i in t?Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[i]=s}return t}toJSON(e,t){let r=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,r)}toString(e,t,r){if(!e||!e.doc)return JSON.stringify(this);let{indent:i,indentSeq:s,simpleKeys:a}=e.doc.options,{key:l,value:u}=this,f=l instanceof nr&&l.comment;if(a){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(l instanceof Mt){let ue="With simple keys, collection cannot be used as a key value";throw new Error(ue)}}let d=!a&&(!l||f||(l instanceof nr?l instanceof Mt||l.type===z.Type.BLOCK_FOLDED||l.type===z.Type.BLOCK_LITERAL:typeof l=="object")),{doc:h,indent:_,indentStep:b,stringify:g}=e;e=Object.assign({},e,{implicitKey:!d,indent:_+b});let v=!1,O=g(l,e,()=>f=null,()=>v=!0);if(O=Fa(O,e.indent,f),!d&&O.length>1024){if(a)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(e.allNullValues&&!a)return this.comment?(O=Fa(O,e.indent,this.comment),t&&t()):v&&!f&&r&&r(),e.inFlow&&!d?O:`? ${O}`;O=d?`? ${O}
${_}:`:`${O}:`,this.comment&&(O=Fa(O,e.indent,this.comment),t&&t());let E="",C=null;u instanceof nr?(u.spaceBefore&&(E=`
`),u.commentBefore&&(E+=`
${u.commentBefore.replace(/^/gm,`${e.indent}#`)}`),C=u.comment):u&&typeof u=="object"&&(u=h.schema.createNode(u,!0)),e.implicitKey=!1,!d&&!this.comment&&u instanceof an&&(e.indentAtStart=O.length+1),v=!1,!s&&i>=2&&!e.inFlow&&!d&&u instanceof ms&&u.type!==z.Type.FLOW_SEQ&&!u.tag&&!h.anchors.getName(u)&&(e.indent=e.indent.substr(2));let q=g(u,e,()=>C=null,()=>v=!0),Z=" ";return E||this.comment?Z=`${E}
${e.indent}`:!d&&u instanceof Mt?(!(q[0]==="["||q[0]==="{")||q.includes(`
`))&&(Z=`
${e.indent}`):q[0]===`
`&&(Z=""),v&&!C&&r&&r(),Fa(O+Z+q,e.indent,C)}};z._defineProperty(tt,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Cf=(n,e)=>{if(n instanceof Di){let t=e.get(n.source);return t.count*t.aliasCount}else if(n instanceof Mt){let t=0;for(let r of n.items){let i=Cf(r,e);i>t&&(t=i)}return t}else if(n instanceof tt){let t=Cf(n.key,e),r=Cf(n.value,e);return Math.max(t,r)}return 1},Di=class extends nr{static stringify({range:e,source:t},{anchors:r,doc:i,implicitKey:s,inStringifyKey:a}){let l=Object.keys(r).find(f=>r[f]===t);if(!l&&a&&(l=i.anchors.getName(t)||i.anchors.newName()),l)return`*${l}${s?" ":""}`;let u=i.anchors.getName(t)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${u} [${e}]`)}constructor(e){super(),this.source=e,this.type=z.Type.ALIAS}set tag(e){throw new Error("Alias nodes cannot have tags")}toJSON(e,t){if(!t)return hs(this.source,e,t);let{anchors:r,maxAliasCount:i}=t,s=r.get(this.source);if(!s||s.res===void 0){let a="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new z.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}if(i>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=Cf(this.source,r)),s.count*s.aliasCount>i)){let a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new z.YAMLReferenceError(this.cstNode,a):new ReferenceError(a)}return s.res}toString(e){return Di.stringify(this,e)}};z._defineProperty(Di,"default",!0);function zl(n,e){let t=e instanceof an?e.value:e;for(let r of n)if(r instanceof tt&&(r.key===e||r.key===t||r.key&&r.key.value===t))return r}var Ql=class extends Mt{add(e,t){e?e instanceof tt||(e=new tt(e.key||e,e.value)):e=new tt(e);let r=zl(this.items,e.key),i=this.schema&&this.schema.sortMapEntries;if(r)if(t)r.value=e.value;else throw new Error(`Key ${e.key} already set`);else if(i){let s=this.items.findIndex(a=>i(e,a)<0);s===-1?this.items.push(e):this.items.splice(s,0,e)}else this.items.push(e)}delete(e){let t=zl(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){let r=zl(this.items,e),i=r&&r.value;return!t&&i instanceof an?i.value:i}has(e){return!!zl(this.items,e)}set(e,t){this.add(new tt(e,t),!0)}toJSON(e,t,r){let i=r?new r:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(i);for(let s of this.items)s.addToJSMap(t,i);return i}toString(e,t,r){if(!e)return JSON.stringify(this);for(let i of this.items)if(!(i instanceof tt))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return super.toString(e,{blockItem:i=>i.str,flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},t,r)}},oP="<<",Rf=class extends tt{constructor(e){if(e instanceof tt){let t=e.value;t instanceof ms||(t=new ms,t.items.push(e.value),t.range=e.value.range),super(e.key,t),this.range=e.range}else super(new an(oP),new ms);this.type=tt.Type.MERGE_PAIR}addToJSMap(e,t){for(let{source:r}of this.value.items){if(!(r instanceof Ql))throw new Error("Merge sources must be maps");let i=r.toJSON(null,e,Map);for(let[s,a]of i)t instanceof Map?t.has(s)||t.set(s,a):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0})}return t}toString(e,t){let r=this.value;if(r.items.length>1)return super.toString(e,t);this.value=r.items[0];let i=super.toString(e,t);return this.value=r,i}},AD={defaultType:z.Type.BLOCK_LITERAL,lineWidth:76},PD={trueStr:"true",falseStr:"false"},vD={asBigInt:!1},CD={nullStr:"null"},ro={defaultType:z.Type.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function pm(n,e,t){for(let{format:r,test:i,resolve:s}of e)if(i){let a=n.match(i);if(a){let l=s.apply(null,a);return l instanceof an||(l=new an(l)),r&&(l.format=r),l}}return t&&(n=t(n)),new an(n)}var aP="flow",dm="block",Sf="quoted",rP=(n,e)=>{let t=n[e+1];for(;t===" "||t==="	";){do t=n[e+=1];while(t&&t!==`
`);t=n[e+1]}return e};function kf(n,e,t,{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:a,onOverflow:l}){if(!i||i<0)return n;let u=Math.max(1+s,1+i-e.length);if(n.length<=u)return n;let f=[],d={},h=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?f.push(0):h=i-r);let _,b,g=!1,v=-1,O=-1,E=-1;t===dm&&(v=rP(n,v),v!==-1&&(h=v+u));for(let q;q=n[v+=1];){if(t===Sf&&q==="\\"){switch(O=v,n[v+1]){case"x":v+=3;break;case"u":v+=5;break;case"U":v+=9;break;default:v+=1}E=v}if(q===`
`)t===dm&&(v=rP(n,v)),h=v+u,_=void 0;else{if(q===" "&&b&&b!==" "&&b!==`
`&&b!=="	"){let Z=n[v+1];Z&&Z!==" "&&Z!==`
`&&Z!=="	"&&(_=v)}if(v>=h)if(_)f.push(_),h=_+u,_=void 0;else if(t===Sf){for(;b===" "||b==="	";)b=q,q=n[v+=1],g=!0;let Z=v>E+1?v-2:O-1;if(d[Z])return n;f.push(Z),d[Z]=!0,h=Z+u,_=void 0}else g=!0}b=q}if(g&&l&&l(),f.length===0)return n;a&&a();let C=n.slice(0,f[0]);for(let q=0;q<f.length;++q){let Z=f[q],ue=f[q+1]||n.length;Z===0?C=`
${e}${n.slice(0,ue)}`:(t===Sf&&d[Z]&&(C+=`${n[Z]}\\`),C+=`
${e}${n.slice(Z+1,ue)}`)}return C}var hm=({indentAtStart:n})=>n?Object.assign({indentAtStart:n},ro.fold):ro.fold,wf=n=>/^(%|---|\.\.\.)/m.test(n);function SD(n,e,t){if(!e||e<0)return!1;let r=e-t,i=n.length;if(i<=r)return!1;for(let s=0,a=0;s<i;++s)if(n[s]===`
`){if(s-a>r)return!0;if(a=s+1,i-a<=r)return!1}return!0}function no(n,e){let{implicitKey:t}=e,{jsonEncoding:r,minMultiLineLength:i}=ro.doubleQuoted,s=JSON.stringify(n);if(r)return s;let a=e.indent||(wf(n)?"  ":""),l="",u=0;for(let f=0,d=s[f];d;d=s[++f])if(d===" "&&s[f+1]==="\\"&&s[f+2]==="n"&&(l+=s.slice(u,f)+"\\ ",f+=1,u=f,d="\\"),d==="\\")switch(s[f+1]){case"u":{l+=s.slice(u,f);let h=s.substr(f+2,4);switch(h){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:h.substr(0,2)==="00"?l+="\\x"+h.substr(2):l+=s.substr(f,6)}f+=5,u=f+1}break;case"n":if(t||s[f+2]==='"'||s.length<i)f+=1;else{for(l+=s.slice(u,f)+`

`;s[f+2]==="\\"&&s[f+3]==="n"&&s[f+4]!=='"';)l+=`
`,f+=2;l+=a,s[f+2]===" "&&(l+="\\"),f+=1,u=f+1}break;default:f+=1}return l=u?l+s.slice(u):s,t?l:kf(l,a,Sf,hm(e))}function lP(n,e){if(e.implicitKey){if(/\n/.test(n))return no(n,e)}else if(/[ \t]\n|\n[ \t]/.test(n))return no(n,e);let t=e.indent||(wf(n)?"  ":""),r="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?r:kf(r,t,aP,hm(e))}function Ef({comment:n,type:e,value:t},r,i,s){if(/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return no(t,r);let a=r.indent||(r.forceBlockIndent||wf(t)?"  ":""),l=a?"2":"1",u=e===z.Type.BLOCK_FOLDED?!1:e===z.Type.BLOCK_LITERAL?!0:!SD(t,ro.fold.lineWidth,a.length),f=u?"|":">";if(!t)return f+`
`;let d="",h="";if(t=t.replace(/[\n\t ]*$/,b=>{let g=b.indexOf(`
`);return g===-1?f+="-":(t===b||g!==b.length-1)&&(f+="+",s&&s()),h=b.replace(/\n$/,""),""}).replace(/^[\n ]*/,b=>{b.indexOf(" ")!==-1&&(f+=l);let g=b.match(/ +$/);return g?(d=b.slice(0,-g[0].length),g[0]):(d=b,"")}),h&&(h=h.replace(/\n+(?!\n|$)/g,`$&${a}`)),d&&(d=d.replace(/\n+/g,`$&${a}`)),n&&(f+=" #"+n.replace(/ ?[\r\n]+/g," "),i&&i()),!t)return`${f}${l}
${a}${h}`;if(u)return t=t.replace(/\n+/g,`$&${a}`),`${f}
${a}${d}${t}${h}`;t=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);let _=kf(`${d}${t}${h}`,a,dm,ro.fold);return`${f}
${a}${_}`}function ED(n,e,t,r){let{comment:i,type:s,value:a}=n,{actualString:l,implicitKey:u,indent:f,inFlow:d}=e;if(u&&/[\n[\]{},]/.test(a)||d&&/[[\]{},]/.test(a))return no(a,e);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return u||d||a.indexOf(`
`)===-1?a.indexOf('"')!==-1&&a.indexOf("'")===-1?lP(a,e):no(a,e):Ef(n,e,t,r);if(!u&&!d&&s!==z.Type.PLAIN&&a.indexOf(`
`)!==-1)return Ef(n,e,t,r);if(f===""&&wf(a))return e.forceBlockIndent=!0,Ef(n,e,t,r);let h=a.replace(/\n+/g,`$&
${f}`);if(l){let{tags:b}=e.doc.schema;if(typeof pm(h,b,b.scalarFallback).value!="string")return no(a,e)}let _=u?h:kf(h,f,aP,hm(e));return i&&!d&&(_.indexOf(`
`)!==-1||i.indexOf(`
`)!==-1)?(t&&t(),ID(_,f,i)):_}function RD(n,e,t,r){let{defaultType:i}=ro,{implicitKey:s,inFlow:a}=e,{type:l,value:u}=n;typeof u!="string"&&(u=String(u),n=Object.assign({},n,{value:u}));let f=h=>{switch(h){case z.Type.BLOCK_FOLDED:case z.Type.BLOCK_LITERAL:return Ef(n,e,t,r);case z.Type.QUOTE_DOUBLE:return no(u,e);case z.Type.QUOTE_SINGLE:return lP(u,e);case z.Type.PLAIN:return ED(n,e,t,r);default:return null}};(l!==z.Type.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(u)||(s||a)&&(l===z.Type.BLOCK_FOLDED||l===z.Type.BLOCK_LITERAL))&&(l=z.Type.QUOTE_DOUBLE);let d=f(l);if(d===null&&(d=f(i),d===null))throw new Error(`Unsupported default string type ${i}`);return d}function kD({format:n,minFractionDigits:e,tag:t,value:r}){if(typeof r=="bigint")return String(r);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(r);if(!n&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let s=i.indexOf(".");s<0&&(s=i.length,i+=".");let a=e-(i.length-s-1);for(;a-- >0;)i+="0"}return i}function cP(n,e){let t,r;switch(e.type){case z.Type.FLOW_MAP:t="}",r="flow map";break;case z.Type.FLOW_SEQ:t="]",r="flow sequence";break;default:n.push(new z.YAMLSemanticError(e,"Not a flow collection!?"));return}let i;for(let s=e.items.length-1;s>=0;--s){let a=e.items[s];if(!a||a.type!==z.Type.COMMENT){i=a;break}}if(i&&i.char!==t){let s=`Expected ${r} to end with ${t}`,a;typeof i.offset=="number"?(a=new z.YAMLSemanticError(e,s),a.offset=i.offset+1):(a=new z.YAMLSemanticError(i,s),i.range&&i.range.end&&(a.offset=i.range.end-i.range.start)),n.push(a)}}function uP(n,e){let t=e.context.src[e.range.start-1];if(t!==`
`&&t!=="	"&&t!==" "){let r="Comments must be separated from other tokens by white space characters";n.push(new z.YAMLSemanticError(e,r))}}function fP(n,e){let t=String(e),r=t.substr(0,8)+"..."+t.substr(-8);return new z.YAMLSemanticError(n,`The "${r}" key is too long`)}function dP(n,e){for(let{afterKey:t,before:r,comment:i}of e){let s=n.items[r];s?(t&&s.value&&(s=s.value),i===void 0?(t||!s.commentBefore)&&(s.spaceBefore=!0):s.commentBefore?s.commentBefore+=`
`+i:s.commentBefore=i):i!==void 0&&(n.comment?n.comment+=`
`+i:n.comment=i)}}function mm(n,e){let t=e.strValue;return t?typeof t=="string"?t:(t.errors.forEach(r=>{r.source||(r.source=e),n.errors.push(r)}),t.str):""}function wD(n,e){let{handle:t,suffix:r}=e.tag,i=n.tagPrefixes.find(s=>s.handle===t);if(!i){let s=n.getDefaults().tagPrefixes;if(s&&(i=s.find(a=>a.handle===t)),!i)throw new z.YAMLSemanticError(e,`The ${t} tag handle is non-default and was not declared.`)}if(!r)throw new z.YAMLSemanticError(e,`The ${t} tag has no suffix.`);if(t==="!"&&(n.version||n.options.version)==="1.0"){if(r[0]==="^")return n.warnings.push(new z.YAMLWarning(e,"YAML 1.0 ^ tag expansion is not supported")),r;if(/[:/]/.test(r)){let s=r.match(/^([a-z0-9-]+)\/(.*)/i);return s?`tag:${s[1]}.yaml.org,2002:${s[2]}`:`tag:${r}`}}return i.prefix+decodeURIComponent(r)}function OD(n,e){let{tag:t,type:r}=e,i=!1;if(t){let{handle:s,suffix:a,verbatim:l}=t;if(l){if(l!=="!"&&l!=="!!")return l;let u=`Verbatim tags aren't resolved, so ${l} is invalid.`;n.errors.push(new z.YAMLSemanticError(e,u))}else if(s==="!"&&!a)i=!0;else try{return wD(n,e)}catch(u){n.errors.push(u)}}switch(r){case z.Type.BLOCK_FOLDED:case z.Type.BLOCK_LITERAL:case z.Type.QUOTE_DOUBLE:case z.Type.QUOTE_SINGLE:return z.defaultTags.STR;case z.Type.FLOW_MAP:case z.Type.MAP:return z.defaultTags.MAP;case z.Type.FLOW_SEQ:case z.Type.SEQ:return z.defaultTags.SEQ;case z.Type.PLAIN:return i?z.defaultTags.STR:null;default:return null}}function iP(n,e,t){let{tags:r}=n.schema,i=[];for(let a of r)if(a.tag===t)if(a.test)i.push(a);else{let l=a.resolve(n,e);return l instanceof Mt?l:new an(l)}let s=mm(n,e);return typeof s=="string"&&i.length>0?pm(s,i,r.scalarFallback):null}function LD({type:n}){switch(n){case z.Type.FLOW_MAP:case z.Type.MAP:return z.defaultTags.MAP;case z.Type.FLOW_SEQ:case z.Type.SEQ:return z.defaultTags.SEQ;default:return z.defaultTags.STR}}function DD(n,e,t){try{let r=iP(n,e,t);if(r)return t&&e.tag&&(r.tag=t),r}catch(r){return r.source||(r.source=e),n.errors.push(r),null}try{let r=LD(e);if(!r)throw new Error(`The tag ${t} is unavailable`);let i=`The tag ${t} is unavailable, falling back to ${r}`;n.warnings.push(new z.YAMLWarning(e,i));let s=iP(n,e,r);return s.tag=t,s}catch(r){let i=new z.YAMLReferenceError(e,r.message);return i.stack=r.stack,n.errors.push(i),null}}var FD=n=>{if(!n)return!1;let{type:e}=n;return e===z.Type.MAP_KEY||e===z.Type.MAP_VALUE||e===z.Type.SEQ_ITEM};function MD(n,e){let t={before:[],after:[]},r=!1,i=!1,s=FD(e.context.parent)?e.context.parent.props.concat(e.props):e.props;for(let{start:a,end:l}of s)switch(e.context.src[a]){case z.Char.COMMENT:{if(!e.commentHasRequiredWhitespace(a)){let h="Comments must be separated from other tokens by white space characters";n.push(new z.YAMLSemanticError(e,h))}let{header:u,valueRange:f}=e;(f&&(a>f.start||u&&a>u.start)?t.after:t.before).push(e.context.src.slice(a+1,l));break}case z.Char.ANCHOR:if(r){let u="A node can have at most one anchor";n.push(new z.YAMLSemanticError(e,u))}r=!0;break;case z.Char.TAG:if(i){let u="A node can have at most one tag";n.push(new z.YAMLSemanticError(e,u))}i=!0;break}return{comments:t,hasAnchor:r,hasTag:i}}function VD(n,e){let{anchors:t,errors:r,schema:i}=n;if(e.type===z.Type.ALIAS){let a=e.rawValue,l=t.getNode(a);if(!l){let f=`Aliased anchor not found: ${a}`;return r.push(new z.YAMLReferenceError(e,f)),null}let u=new Di(l);return t._cstAliases.push(u),u}let s=OD(n,e);if(s)return DD(n,e,s);if(e.type!==z.Type.PLAIN){let a=`Failed to resolve ${e.type} node here`;return r.push(new z.YAMLSyntaxError(e,a)),null}try{let a=mm(n,e);return pm(a,i.tags,i.tags.scalarFallback)}catch(a){return a.source||(a.source=e),r.push(a),null}}function gs(n,e){if(!e)return null;e.error&&n.errors.push(e.error);let{comments:t,hasAnchor:r,hasTag:i}=MD(n.errors,e);if(r){let{anchors:a}=n,l=e.anchor,u=a.getNode(l);u&&(a.map[a.newName(l)]=u),a.map[l]=e}if(e.type===z.Type.ALIAS&&(r||i)){let a="An alias node must not specify any properties";n.errors.push(new z.YAMLSemanticError(e,a))}let s=VD(n,e);if(s){s.range=[e.range.start,e.range.end],n.options.keepCstNodes&&(s.cstNode=e),n.options.keepNodeTypes&&(s.type=e.type);let a=t.before.join(`
`);a&&(s.commentBefore=s.commentBefore?`${s.commentBefore}
${a}`:a);let l=t.after.join(`
`);l&&(s.comment=s.comment?`${s.comment}
${l}`:l)}return e.resolved=s}function BD(n,e){if(e.type!==z.Type.MAP&&e.type!==z.Type.FLOW_MAP){let a=`A ${e.type} node cannot be resolved as a mapping`;return n.errors.push(new z.YAMLSyntaxError(e,a)),null}let{comments:t,items:r}=e.type===z.Type.FLOW_MAP?GD(n,e):jD(n,e),i=new Ql;i.items=r,dP(i,t);let s=!1;for(let a=0;a<r.length;++a){let{key:l}=r[a];if(l instanceof Mt&&(s=!0),n.schema.merge&&l&&l.value===oP){r[a]=new Rf(r[a]);let u=r[a].value.items,f=null;u.some(d=>{if(d instanceof Di){let{type:h}=d.source;return h===z.Type.MAP||h===z.Type.FLOW_MAP?!1:f="Merge nodes aliases can only point to maps"}return f="Merge nodes can only have Alias nodes as values"}),f&&n.errors.push(new z.YAMLSemanticError(e,f))}else for(let u=a+1;u<r.length;++u){let{key:f}=r[u];if(l===f||l&&f&&Object.prototype.hasOwnProperty.call(l,"value")&&l.value===f.value){let d=`Map keys must be unique; "${l}" is repeated`;n.errors.push(new z.YAMLSemanticError(e,d));break}}}if(s&&!n.options.mapAsMap){let a="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";n.warnings.push(new z.YAMLWarning(e,a))}return e.resolved=i,i}var qD=({context:{lineStart:n,node:e,src:t},props:r})=>{if(r.length===0)return!1;let{start:i}=r[0];if(e&&i>e.valueRange.start||t[i]!==z.Char.COMMENT)return!1;for(let s=n;s<i;++s)if(t[s]===`
`)return!1;return!0};function UD(n,e){if(!qD(n))return;let t=n.getPropValue(0,z.Char.COMMENT,!0),r=!1,i=e.value.commentBefore;if(i&&i.startsWith(t))e.value.commentBefore=i.substr(t.length+1),r=!0;else{let s=e.value.comment;!n.node&&s&&s.startsWith(t)&&(e.value.comment=s.substr(t.length+1),r=!0)}r&&(e.comment=t)}function jD(n,e){let t=[],r=[],i,s=null;for(let a=0;a<e.items.length;++a){let l=e.items[a];switch(l.type){case z.Type.BLANK_LINE:t.push({afterKey:!!i,before:r.length});break;case z.Type.COMMENT:t.push({afterKey:!!i,before:r.length,comment:l.comment});break;case z.Type.MAP_KEY:i!==void 0&&r.push(new tt(i)),l.error&&n.errors.push(l.error),i=gs(n,l.node),s=null;break;case z.Type.MAP_VALUE:{if(i===void 0&&(i=null),l.error&&n.errors.push(l.error),!l.context.atLineStart&&l.node&&l.node.type===z.Type.MAP&&!l.node.context.atLineStart){let d="Nested mappings are not allowed in compact mappings";n.errors.push(new z.YAMLSemanticError(l.node,d))}let u=l.node;if(!u&&l.props.length>0){u=new z.PlainValue(z.Type.PLAIN,[]),u.context={parent:l,src:l.context.src};let d=l.range.start+1;if(u.range={start:d,end:d},u.valueRange={start:d,end:d},typeof l.range.origStart=="number"){let h=l.range.origStart+1;u.range.origStart=u.range.origEnd=h,u.valueRange.origStart=u.valueRange.origEnd=h}}let f=new tt(i,gs(n,u));UD(l,f),r.push(f),i&&typeof s=="number"&&l.range.start>s+1024&&n.errors.push(fP(e,i)),i=void 0,s=null}break;default:i!==void 0&&r.push(new tt(i)),i=gs(n,l),s=l.range.start,l.error&&n.errors.push(l.error);e:for(let u=a+1;;++u){let f=e.items[u];switch(f&&f.type){case z.Type.BLANK_LINE:case z.Type.COMMENT:continue e;case z.Type.MAP_VALUE:break e;default:{let d="Implicit map keys need to be followed by map values";n.errors.push(new z.YAMLSemanticError(l,d));break e}}}if(l.valueRangeContainsNewline){let u="Implicit map keys need to be on a single line";n.errors.push(new z.YAMLSemanticError(l,u))}}}return i!==void 0&&r.push(new tt(i)),{comments:t,items:r}}function GD(n,e){let t=[],r=[],i,s=!1,a="{";for(let l=0;l<e.items.length;++l){let u=e.items[l];if(typeof u.char=="string"){let{char:f,offset:d}=u;if(f==="?"&&i===void 0&&!s){s=!0,a=":";continue}if(f===":"){if(i===void 0&&(i=null),a===":"){a=",";continue}}else if(s&&(i===void 0&&f!==","&&(i=null),s=!1),i!==void 0&&(r.push(new tt(i)),i=void 0,f===",")){a=":";continue}if(f==="}"){if(l===e.items.length-1)continue}else if(f===a){a=":";continue}let h=`Flow map contains an unexpected ${f}`,_=new z.YAMLSyntaxError(e,h);_.offset=d,n.errors.push(_)}else u.type===z.Type.BLANK_LINE?t.push({afterKey:!!i,before:r.length}):u.type===z.Type.COMMENT?(uP(n.errors,u),t.push({afterKey:!!i,before:r.length,comment:u.comment})):i===void 0?(a===","&&n.errors.push(new z.YAMLSemanticError(u,"Separator , missing in flow map")),i=gs(n,u)):(a!==","&&n.errors.push(new z.YAMLSemanticError(u,"Indicator : missing in flow map entry")),r.push(new tt(i,gs(n,u))),i=void 0,s=!1)}return cP(n.errors,e),i!==void 0&&r.push(new tt(i)),{comments:t,items:r}}function WD(n,e){if(e.type!==z.Type.SEQ&&e.type!==z.Type.FLOW_SEQ){let s=`A ${e.type} node cannot be resolved as a sequence`;return n.errors.push(new z.YAMLSyntaxError(e,s)),null}let{comments:t,items:r}=e.type===z.Type.FLOW_SEQ?YD(n,e):HD(n,e),i=new ms;if(i.items=r,dP(i,t),!n.options.mapAsMap&&r.some(s=>s instanceof tt&&s.key instanceof Mt)){let s="Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this.";n.warnings.push(new z.YAMLWarning(e,s))}return e.resolved=i,i}function HD(n,e){let t=[],r=[];for(let i=0;i<e.items.length;++i){let s=e.items[i];switch(s.type){case z.Type.BLANK_LINE:t.push({before:r.length});break;case z.Type.COMMENT:t.push({comment:s.comment,before:r.length});break;case z.Type.SEQ_ITEM:if(s.error&&n.errors.push(s.error),r.push(gs(n,s.node)),s.hasProps){let a="Sequence items cannot have tags or anchors before the - indicator";n.errors.push(new z.YAMLSemanticError(s,a))}break;default:s.error&&n.errors.push(s.error),n.errors.push(new z.YAMLSyntaxError(s,`Unexpected ${s.type} node in sequence`))}}return{comments:t,items:r}}function YD(n,e){let t=[],r=[],i=!1,s,a=null,l="[",u=null;for(let f=0;f<e.items.length;++f){let d=e.items[f];if(typeof d.char=="string"){let{char:h,offset:_}=d;if(h!==":"&&(i||s!==void 0)&&(i&&s===void 0&&(s=l?r.pop():null),r.push(new tt(s)),i=!1,s=void 0,a=null),h===l)l=null;else if(!l&&h==="?")i=!0;else if(l!=="["&&h===":"&&s===void 0){if(l===","){if(s=r.pop(),s instanceof tt){let b="Chaining flow sequence pairs is invalid",g=new z.YAMLSemanticError(e,b);g.offset=_,n.errors.push(g)}if(!i&&typeof a=="number"){let b=d.range?d.range.start:d.offset;b>a+1024&&n.errors.push(fP(e,s));let{src:g}=u.context;for(let v=a;v<b;++v)if(g[v]===`
`){let O="Implicit keys of flow sequence pairs need to be on a single line";n.errors.push(new z.YAMLSemanticError(u,O));break}}}else s=null;a=null,i=!1,l=null}else if(l==="["||h!=="]"||f<e.items.length-1){let b=`Flow sequence contains an unexpected ${h}`,g=new z.YAMLSyntaxError(e,b);g.offset=_,n.errors.push(g)}}else if(d.type===z.Type.BLANK_LINE)t.push({before:r.length});else if(d.type===z.Type.COMMENT)uP(n.errors,d),t.push({comment:d.comment,before:r.length});else{if(l){let _=`Expected a ${l} in flow sequence`;n.errors.push(new z.YAMLSemanticError(d,_))}let h=gs(n,d);s===void 0?(r.push(h),u=d):(r.push(new tt(s,h)),s=void 0),a=d.range.start,l=","}}return cP(n.errors,e),s!==void 0&&r.push(new tt(s)),{comments:t,items:r}}pt.Alias=Di;pt.Collection=Mt;pt.Merge=Rf;pt.Node=nr;pt.Pair=tt;pt.Scalar=an;pt.YAMLMap=Ql;pt.YAMLSeq=ms;pt.addComment=Fa;pt.binaryOptions=AD;pt.boolOptions=PD;pt.findPair=zl;pt.intOptions=vD;pt.isEmptyPath=sP;pt.nullOptions=CD;pt.resolveMap=BD;pt.resolveNode=gs;pt.resolveSeq=WD;pt.resolveString=mm;pt.strOptions=ro;pt.stringifyNumber=kD;pt.stringifyString=RD;pt.toJSON=hs});var Of=pe($r=>{"use strict";var rr=ds(),We=Ma(),$D={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve:(n,e)=>{let t=We.resolveString(n,e);if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}else{let r="This environment does not support reading binary tags; either Buffer or atob is required";return n.errors.push(new rr.YAMLReferenceError(e,r)),null}},options:We.binaryOptions,stringify:({comment:n,type:e,value:t},r,i,s)=>{let a;if(typeof Buffer=="function")a=t instanceof Buffer?t.toString("base64"):Buffer.from(t.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let u=0;u<t.length;++u)l+=String.fromCharCode(t[u]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=We.binaryOptions.defaultType),e===rr.Type.QUOTE_DOUBLE)t=a;else{let{lineWidth:l}=We.binaryOptions,u=Math.ceil(a.length/l),f=new Array(u);for(let d=0,h=0;d<u;++d,h+=l)f[d]=a.substr(h,l);t=f.join(e===rr.Type.BLOCK_LITERAL?`
`:" ")}return We.stringifyString({comment:n,type:e,value:t},r,i,s)}};function hP(n,e){let t=We.resolveSeq(n,e);for(let r=0;r<t.items.length;++r){let i=t.items[r];if(!(i instanceof We.Pair)){if(i instanceof We.YAMLMap){if(i.items.length>1){let a="Each pair must have its own sequence indicator";throw new rr.YAMLSemanticError(e,a)}let s=i.items[0]||new We.Pair;i.commentBefore&&(s.commentBefore=s.commentBefore?`${i.commentBefore}
${s.commentBefore}`:i.commentBefore),i.comment&&(s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment),i=s}t.items[r]=i instanceof We.Pair?i:new We.Pair(i)}}return t}function mP(n,e,t){let r=new We.YAMLSeq(n);r.tag="tag:yaml.org,2002:pairs";for(let i of e){let s,a;if(Array.isArray(i))if(i.length===2)s=i[0],a=i[1];else throw new TypeError(`Expected [key, value] tuple: ${i}`);else if(i&&i instanceof Object){let u=Object.keys(i);if(u.length===1)s=u[0],a=i[s];else throw new TypeError(`Expected { key: value } tuple: ${i}`)}else s=i;let l=n.createPair(s,a,t);r.items.push(l)}return r}var KD={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:hP,createNode:mP},Ts=class extends We.YAMLSeq{constructor(){super(),rr._defineProperty(this,"add",We.YAMLMap.prototype.add.bind(this)),rr._defineProperty(this,"delete",We.YAMLMap.prototype.delete.bind(this)),rr._defineProperty(this,"get",We.YAMLMap.prototype.get.bind(this)),rr._defineProperty(this,"has",We.YAMLMap.prototype.has.bind(this)),rr._defineProperty(this,"set",We.YAMLMap.prototype.set.bind(this)),this.tag=Ts.tag}toJSON(e,t){let r=new Map;t&&t.onCreate&&t.onCreate(r);for(let i of this.items){let s,a;if(i instanceof We.Pair?(s=We.toJSON(i.key,"",t),a=We.toJSON(i.value,s,t)):s=We.toJSON(i,"",t),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,a)}return r}};rr._defineProperty(Ts,"tag","tag:yaml.org,2002:omap");function zD(n,e){let t=hP(n,e),r=[];for(let{key:i}of t.items)if(i instanceof We.Scalar)if(r.includes(i.value)){let s="Ordered maps must not include duplicate keys";throw new rr.YAMLSemanticError(e,s)}else r.push(i.value);return Object.assign(new Ts,t)}function QD(n,e,t){let r=mP(n,e,t),i=new Ts;return i.items=r.items,i}var XD={identify:n=>n instanceof Map,nodeClass:Ts,default:!1,tag:"tag:yaml.org,2002:omap",resolve:zD,createNode:QD},_s=class extends We.YAMLMap{constructor(){super(),this.tag=_s.tag}add(e){let t=e instanceof We.Pair?e:new We.Pair(e);We.findPair(this.items,t.key)||this.items.push(t)}get(e,t){let r=We.findPair(this.items,e);return!t&&r instanceof We.Pair?r.key instanceof We.Scalar?r.key.value:r.key:r}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let r=We.findPair(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new We.Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return super.toString(e,t,r);throw new Error("Set items must all have null values")}};rr._defineProperty(_s,"tag","tag:yaml.org,2002:set");function JD(n,e){let t=We.resolveMap(n,e);if(!t.hasAllNullValues())throw new rr.YAMLSemanticError(e,"Set items must all have null values");return Object.assign(new _s,t)}function ZD(n,e,t){let r=new _s;for(let i of e)r.items.push(n.createPair(i,null,t));return r}var e1={identify:n=>n instanceof Set,nodeClass:_s,default:!1,tag:"tag:yaml.org,2002:set",resolve:JD,createNode:ZD},gm=(n,e)=>{let t=e.split(":").reduce((r,i)=>r*60+Number(i),0);return n==="-"?-t:t},gP=({value:n})=>{if(isNaN(n)||!isFinite(n))return We.stringifyNumber(n);let e="";n<0&&(e="-",n=Math.abs(n));let t=[n%60];return n<60?t.unshift(0):(n=Math.round((n-t[0])/60),t.unshift(n%60),n>=60&&(n=Math.round((n-t[0])/60),t.unshift(n))),e+t.map(r=>r<10?"0"+String(r):String(r)).join(":").replace(/000000\d*$/,"")},t1={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:(n,e,t)=>gm(e,t.replace(/_/g,"")),stringify:gP},n1={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:(n,e,t)=>gm(e,t.replace(/_/g,"")),stringify:gP},r1={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:(n,e,t,r,i,s,a,l,u)=>{l&&(l=(l+"00").substr(1,3));let f=Date.UTC(e,t-1,r,i||0,s||0,a||0,l||0);if(u&&u!=="Z"){let d=gm(u[0],u.slice(1));Math.abs(d)<30&&(d*=60),f-=6e4*d}return new Date(f)},stringify:({value:n})=>n.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};function Tm(n){let e=typeof process<"u"&&process.env||{};return n?typeof YAML_SILENCE_DEPRECATION_WARNINGS<"u"?!YAML_SILENCE_DEPRECATION_WARNINGS:!e.YAML_SILENCE_DEPRECATION_WARNINGS:typeof YAML_SILENCE_WARNINGS<"u"?!YAML_SILENCE_WARNINGS:!e.YAML_SILENCE_WARNINGS}function _m(n,e){if(Tm(!1)){let t=typeof process<"u"&&process.emitWarning;t?t(n,e):console.warn(e?`${e}: ${n}`:n)}}function i1(n){if(Tm(!0)){let e=n.replace(/.*yaml[/\\]/i,"").replace(/\.js$/,"").replace(/\\/g,"/");_m(`The endpoint 'yaml/${e}' will be removed in a future release.`,"DeprecationWarning")}}var pP={};function s1(n,e){if(!pP[n]&&Tm(!0)){pP[n]=!0;let t=`The option '${n}' will be removed in a future release`;t+=e?`, use '${e}' instead.`:".",_m(t,"DeprecationWarning")}}$r.binary=$D;$r.floatTime=n1;$r.intTime=t1;$r.omap=XD;$r.pairs=KD;$r.set=e1;$r.timestamp=r1;$r.warn=_m;$r.warnFileDeprecation=i1;$r.warnOptionDeprecation=s1});var Bf=pe(EP=>{"use strict";var Ff=ds(),Ce=Ma(),bn=Of();function o1(n,e,t){let r=new Ce.YAMLMap(n);if(e instanceof Map)for(let[i,s]of e)r.items.push(n.createPair(i,s,t));else if(e&&typeof e=="object")for(let i of Object.keys(e))r.items.push(n.createPair(i,e[i],t));return typeof n.sortMapEntries=="function"&&r.items.sort(n.sortMapEntries),r}var Jl={createNode:o1,default:!0,nodeClass:Ce.YAMLMap,tag:"tag:yaml.org,2002:map",resolve:Ce.resolveMap};function a1(n,e,t){let r=new Ce.YAMLSeq(n);if(e&&e[Symbol.iterator])for(let i of e){let s=n.createNode(i,t.wrapScalars,null,t);r.items.push(s)}return r}var Mf={createNode:a1,default:!0,nodeClass:Ce.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:Ce.resolveSeq},l1={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce.resolveString,stringify(n,e,t,r){return e=Object.assign({actualString:!0},e),Ce.stringifyString(n,e,t,r)},options:Ce.strOptions},bm=[Jl,Mf,l1],Vf=n=>typeof n=="bigint"||Number.isInteger(n),Nm=(n,e,t)=>Ce.intOptions.asBigInt?BigInt(n):parseInt(e,t);function yP(n,e,t){let{value:r}=n;return Vf(r)&&r>=0?t+r.toString(e):Ce.stringifyNumber(n)}var bP={identify:n=>n==null,createNode:(n,e,t)=>t.wrapScalars?new Ce.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:Ce.nullOptions,stringify:()=>Ce.nullOptions.nullStr},NP={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>n[0]==="t"||n[0]==="T",options:Ce.boolOptions,stringify:({value:n})=>n?Ce.boolOptions.trueStr:Ce.boolOptions.falseStr},IP={identify:n=>Vf(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:(n,e)=>Nm(n,e,8),options:Ce.intOptions,stringify:n=>yP(n,8,"0o")},xP={identify:Vf,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:n=>Nm(n,n,10),options:Ce.intOptions,stringify:Ce.stringifyNumber},AP={identify:n=>Vf(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:(n,e)=>Nm(n,e,16),options:Ce.intOptions,stringify:n=>yP(n,16,"0x")},PP={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(n,e)=>e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ce.stringifyNumber},vP={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify:({value:n})=>Number(n).toExponential()},CP={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve(n,e,t){let r=e||t,i=new Ce.Scalar(parseFloat(n));return r&&r[r.length-1]==="0"&&(i.minFractionDigits=r.length),i},stringify:Ce.stringifyNumber},c1=bm.concat([bP,NP,IP,xP,AP,PP,vP,CP]),TP=n=>typeof n=="bigint"||Number.isInteger(n),Lf=({value:n})=>JSON.stringify(n),SP=[Jl,Mf,{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:Ce.resolveString,stringify:Lf},{identify:n=>n==null,createNode:(n,e,t)=>t.wrapScalars?new Ce.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Lf},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:n=>n==="true",stringify:Lf},{identify:TP,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:n=>Ce.intOptions.asBigInt?BigInt(n):parseInt(n,10),stringify:({value:n})=>TP(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:Lf}];SP.scalarFallback=n=>{throw new SyntaxError(`Unresolved plain scalar ${JSON.stringify(n)}`)};var _P=({value:n})=>n?Ce.boolOptions.trueStr:Ce.boolOptions.falseStr,Xl=n=>typeof n=="bigint"||Number.isInteger(n);function Df(n,e,t){let r=e.replace(/_/g,"");if(Ce.intOptions.asBigInt){switch(t){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}let s=BigInt(r);return n==="-"?BigInt(-1)*s:s}let i=parseInt(r,t);return n==="-"?-1*i:i}function ym(n,e,t){let{value:r}=n;if(Xl(r)){let i=r.toString(e);return r<0?"-"+t+i.substr(1):t+i}return Ce.stringifyNumber(n)}var u1=bm.concat([{identify:n=>n==null,createNode:(n,e,t)=>t.wrapScalars?new Ce.Scalar(null):null,default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>null,options:Ce.nullOptions,stringify:()=>Ce.nullOptions.nullStr},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>!0,options:Ce.boolOptions,stringify:_P},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>!1,options:Ce.boolOptions,stringify:_P},{identify:Xl,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:(n,e,t)=>Df(e,t,2),stringify:n=>ym(n,2,"0b")},{identify:Xl,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:(n,e,t)=>Df(e,t,8),stringify:n=>ym(n,8,"0")},{identify:Xl,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:(n,e,t)=>Df(e,t,10),stringify:Ce.stringifyNumber},{identify:Xl,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:(n,e,t)=>Df(e,t,16),stringify:n=>ym(n,16,"0x")},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:(n,e)=>e?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ce.stringifyNumber},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify:({value:n})=>Number(n).toExponential()},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve(n,e){let t=new Ce.Scalar(parseFloat(n.replace(/_/g,"")));if(e){let r=e.replace(/_/g,"");r[r.length-1]==="0"&&(t.minFractionDigits=r.length)}return t},stringify:Ce.stringifyNumber}],bn.binary,bn.omap,bn.pairs,bn.set,bn.intTime,bn.floatTime,bn.timestamp),f1={core:c1,failsafe:bm,json:SP,yaml11:u1},d1={binary:bn.binary,bool:NP,float:CP,floatExp:vP,floatNaN:PP,floatTime:bn.floatTime,int:xP,intHex:AP,intOct:IP,intTime:bn.intTime,map:Jl,null:bP,omap:bn.omap,pairs:bn.pairs,seq:Mf,set:bn.set,timestamp:bn.timestamp};function p1(n,e,t){if(e){let r=t.filter(s=>s.tag===e),i=r.find(s=>!s.format)||r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return t.find(r=>(r.identify&&r.identify(n)||r.class&&n instanceof r.class)&&!r.format)}function h1(n,e,t){if(n instanceof Ce.Node)return n;let{defaultPrefix:r,onTagObj:i,prevObjects:s,schema:a,wrapScalars:l}=t;e&&e.startsWith("!!")&&(e=r+e.slice(2));let u=p1(n,e,a.tags);if(!u){if(typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object")return l?new Ce.Scalar(n):n;u=n instanceof Map?Jl:n[Symbol.iterator]?Mf:Jl}i&&(i(u),delete t.onTagObj);let f={value:void 0,node:void 0};if(n&&typeof n=="object"&&s){let d=s.get(n);if(d){let h=new Ce.Alias(d);return t.aliasNodes.push(h),h}f.value=n,s.set(n,f)}return f.node=u.createNode?u.createNode(t.schema,n,t):l?new Ce.Scalar(n):n,e&&f.node instanceof Ce.Node&&(f.node.tag=e),f.node}function m1(n,e,t,r){let i=n[r.replace(/\W/g,"")];if(!i){let s=Object.keys(n).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${r}"; use one of ${s}`)}if(Array.isArray(t))for(let s of t)i=i.concat(s);else typeof t=="function"&&(i=t(i.slice()));for(let s=0;s<i.length;++s){let a=i[s];if(typeof a=="string"){let l=e[a];if(!l){let u=Object.keys(e).map(f=>JSON.stringify(f)).join(", ");throw new Error(`Unknown custom tag "${a}"; use one of ${u}`)}i[s]=l}}return i}var g1=(n,e)=>n.key<e.key?-1:n.key>e.key?1:0,io=class{constructor({customTags:e,merge:t,schema:r,sortMapEntries:i,tags:s}){this.merge=!!t,this.name=r,this.sortMapEntries=i===!0?g1:i||null,!e&&s&&bn.warnOptionDeprecation("tags","customTags"),this.tags=m1(f1,d1,e||s,r)}createNode(e,t,r,i){let s={defaultPrefix:io.defaultPrefix,schema:this,wrapScalars:t},a=i?Object.assign(i,s):s;return h1(e,r,a)}createPair(e,t,r){r||(r={wrapScalars:!0});let i=this.createNode(e,r.wrapScalars,null,r),s=this.createNode(t,r.wrapScalars,null,r);return new Ce.Pair(i,s)}};Ff._defineProperty(io,"defaultPrefix",Ff.defaultTagPrefix);Ff._defineProperty(io,"defaultTags",Ff.defaultTags);EP.Schema=io});var OP=pe(jf=>{"use strict";var Nn=ds(),Re=Ma(),RP=Bf(),T1={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},_1={get binary(){return Re.binaryOptions},set binary(n){Object.assign(Re.binaryOptions,n)},get bool(){return Re.boolOptions},set bool(n){Object.assign(Re.boolOptions,n)},get int(){return Re.intOptions},set int(n){Object.assign(Re.intOptions,n)},get null(){return Re.nullOptions},set null(n){Object.assign(Re.nullOptions,n)},get str(){return Re.strOptions},set str(n){Object.assign(Re.strOptions,n)}},wP={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:Nn.defaultTagPrefix},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Nn.defaultTagPrefix}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:Nn.defaultTagPrefix}]}};function kP(n,e){if((n.version||n.options.version)==="1.0"){let i=e.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(i)return"!"+i[1];let s=e.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return s?`!${s[1]}/${s[2]}`:`!${e.replace(/^tag:/,"")}`}let t=n.tagPrefixes.find(i=>e.indexOf(i.prefix)===0);if(!t){let i=n.getDefaults().tagPrefixes;t=i&&i.find(s=>e.indexOf(s.prefix)===0)}if(!t)return e[0]==="!"?e:`!<${e}>`;let r=e.substr(t.prefix.length).replace(/[!,[\]{}]/g,i=>({"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"})[i]);return t.handle+r}function y1(n,e){if(e instanceof Re.Alias)return Re.Alias;if(e.tag){let i=n.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)||i[0]}let t,r;if(e instanceof Re.Scalar){r=e.value;let i=n.filter(s=>s.identify&&s.identify(r)||s.class&&r instanceof s.class);t=i.find(s=>s.format===e.format)||i.find(s=>!s.format)}else r=e,t=n.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!t){let i=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${i} value`)}return t}function b1(n,e,{anchors:t,doc:r}){let i=[],s=r.anchors.getName(n);return s&&(t[s]=n,i.push(`&${s}`)),n.tag?i.push(kP(r,n.tag)):e.default||i.push(kP(r,e.tag)),i.join(" ")}function qf(n,e,t,r){let{anchors:i,schema:s}=e.doc,a;if(!(n instanceof Re.Node)){let f={aliasNodes:[],onTagObj:d=>a=d,prevObjects:new Map};n=s.createNode(n,!0,null,f);for(let d of f.aliasNodes){d.source=d.source.node;let h=i.getName(d.source);h||(h=i.newName(),i.map[h]=d.source)}}if(n instanceof Re.Pair)return n.toString(e,t,r);a||(a=y1(s.tags,n));let l=b1(n,a,e);l.length>0&&(e.indentAtStart=(e.indentAtStart||0)+l.length+1);let u=typeof a.stringify=="function"?a.stringify(n,e,t,r):n instanceof Re.Scalar?Re.stringifyString(n,e,t,r):n.toString(e,t,r);return l?n instanceof Re.Scalar||u[0]==="{"||u[0]==="["?`${l} ${u}`:`${l}
${e.indent}${u}`:u}var Zl=class{static validAnchorNode(e){return e instanceof Re.Scalar||e instanceof Re.YAMLSeq||e instanceof Re.YAMLMap}constructor(e){Nn._defineProperty(this,"map",Object.create(null)),this.prefix=e}createAlias(e,t){return this.setAnchor(e,t),new Re.Alias(e)}createMergePair(...e){let t=new Re.Merge;return t.value.items=e.map(r=>{if(r instanceof Re.Alias){if(r.source instanceof Re.YAMLMap)return r}else if(r instanceof Re.YAMLMap)return this.createAlias(r);throw new Error("Merge sources must be Map nodes or their Aliases")}),t}getName(e){let{map:t}=this;return Object.keys(t).find(r=>t[r]===e)}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);let t=Object.keys(this.map);for(let r=1;;++r){let i=`${e}${r}`;if(!t.includes(i))return i}}resolveNodes(){let{map:e,_cstAliases:t}=this;Object.keys(e).forEach(r=>{e[r]=e[r].resolved}),t.forEach(r=>{r.source=r.source.resolved}),delete this._cstAliases}setAnchor(e,t){if(e!=null&&!Zl.validAnchorNode(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(t&&/[\x00-\x19\s,[\]{}]/.test(t))throw new Error("Anchor names must not contain whitespace or control characters");let{map:r}=this,i=e&&Object.keys(r).find(s=>r[s]===e);if(i)if(t)i!==t&&(delete r[i],r[t]=e);else return i;else{if(!t){if(!e)return null;t=this.newName()}r[t]=e}return t}},Uf=(n,e)=>{if(n&&typeof n=="object"){let{tag:t}=n;n instanceof Re.Collection?(t&&(e[t]=!0),n.items.forEach(r=>Uf(r,e))):n instanceof Re.Pair?(Uf(n.key,e),Uf(n.value,e)):n instanceof Re.Scalar&&t&&(e[t]=!0)}return e},N1=n=>Object.keys(Uf(n,{}));function I1(n,e){let t={before:[],after:[]},r,i=!1;for(let s of e)if(s.valueRange){if(r!==void 0){let l="Document contains trailing content not separated by a ... or --- line";n.errors.push(new Nn.YAMLSyntaxError(s,l));break}let a=Re.resolveNode(n,s);i&&(a.spaceBefore=!0,i=!1),r=a}else s.comment!==null?(r===void 0?t.before:t.after).push(s.comment):s.type===Nn.Type.BLANK_LINE&&(i=!0,r===void 0&&t.before.length>0&&!n.commentBefore&&(n.commentBefore=t.before.join(`
`),t.before=[]));if(n.contents=r||null,!r)n.comment=t.before.concat(t.after).join(`
`)||null;else{let s=t.before.join(`
`);if(s){let a=r instanceof Re.Collection&&r.items[0]?r.items[0]:r;a.commentBefore=a.commentBefore?`${s}
${a.commentBefore}`:s}n.comment=t.after.join(`
`)||null}}function x1({tagPrefixes:n},e){let[t,r]=e.parameters;if(!t||!r){let i="Insufficient parameters given for %TAG directive";throw new Nn.YAMLSemanticError(e,i)}if(n.some(i=>i.handle===t)){let i="The %TAG directive must only be given at most once per handle in the same document.";throw new Nn.YAMLSemanticError(e,i)}return{handle:t,prefix:r}}function A1(n,e){let[t]=e.parameters;if(e.name==="YAML:1.0"&&(t="1.0"),!t){let r="Insufficient parameters given for %YAML directive";throw new Nn.YAMLSemanticError(e,r)}if(!wP[t]){let i=`Document will be parsed as YAML ${n.version||n.options.version} rather than YAML ${t}`;n.warnings.push(new Nn.YAMLWarning(e,i))}return t}function P1(n,e,t){let r=[],i=!1;for(let s of e){let{comment:a,name:l}=s;switch(l){case"TAG":try{n.tagPrefixes.push(x1(n,s))}catch(u){n.errors.push(u)}i=!0;break;case"YAML":case"YAML:1.0":if(n.version){let u="The %YAML directive must only be given at most once per document.";n.errors.push(new Nn.YAMLSemanticError(s,u))}try{n.version=A1(n,s)}catch(u){n.errors.push(u)}i=!0;break;default:if(l){let u=`YAML only supports %TAG and %YAML directives, and not %${l}`;n.warnings.push(new Nn.YAMLWarning(s,u))}}a&&r.push(a)}if(t&&!i&&(n.version||t.version||n.options.version)==="1.1"){let s=({handle:a,prefix:l})=>({handle:a,prefix:l});n.tagPrefixes=t.tagPrefixes.map(s),n.version=t.version}n.commentBefore=r.join(`
`)||null}function Va(n){if(n instanceof Re.Collection)return!0;throw new Error("Expected a YAML collection as document contents")}var so=class{constructor(e){this.anchors=new Zl(e.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=e,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}add(e){return Va(this.contents),this.contents.add(e)}addIn(e,t){Va(this.contents),this.contents.addIn(e,t)}delete(e){return Va(this.contents),this.contents.delete(e)}deleteIn(e){return Re.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):(Va(this.contents),this.contents.deleteIn(e))}getDefaults(){return so.defaults[this.version]||so.defaults[this.options.version]||{}}get(e,t){return this.contents instanceof Re.Collection?this.contents.get(e,t):void 0}getIn(e,t){return Re.isEmptyPath(e)?!t&&this.contents instanceof Re.Scalar?this.contents.value:this.contents:this.contents instanceof Re.Collection?this.contents.getIn(e,t):void 0}has(e){return this.contents instanceof Re.Collection?this.contents.has(e):!1}hasIn(e){return Re.isEmptyPath(e)?this.contents!==void 0:this.contents instanceof Re.Collection?this.contents.hasIn(e):!1}set(e,t){Va(this.contents),this.contents.set(e,t)}setIn(e,t){Re.isEmptyPath(e)?this.contents=t:(Va(this.contents),this.contents.setIn(e,t))}setSchema(e,t){if(!e&&!t&&this.schema)return;typeof e=="number"&&(e=e.toFixed(1)),e==="1.0"||e==="1.1"||e==="1.2"?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&typeof e=="string"&&(this.options.schema=e),Array.isArray(t)&&(this.options.customTags=t);let r=Object.assign({},this.getDefaults(),this.options);this.schema=new RP.Schema(r)}parse(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");let{directives:r=[],contents:i=[],directivesEndMarker:s,error:a,valueRange:l}=e;if(a&&(a.source||(a.source=this),this.errors.push(a)),P1(this,r,t),s&&(this.directivesEndMarker=!0),this.range=l?[l.start,l.end]:null,this.setSchema(),this.anchors._cstAliases=[],I1(this,i),this.anchors.resolveNodes(),this.options.prettyErrors){for(let u of this.errors)u instanceof Nn.YAMLError&&u.makePretty();for(let u of this.warnings)u instanceof Nn.YAMLError&&u.makePretty()}return this}listNonDefaultTags(){return N1(this.contents).filter(e=>e.indexOf(RP.Schema.defaultPrefix)!==0)}setTagPrefix(e,t){if(e[0]!=="!"||e[e.length-1]!=="!")throw new Error("Handle must start and end with !");if(t){let r=this.tagPrefixes.find(i=>i.handle===e);r?r.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter(r=>r.handle!==e)}toJSON(e,t){let{keepBlobsInJSON:r,mapAsMap:i,maxAliasCount:s}=this.options,a=r&&(typeof e!="string"||!(this.contents instanceof Re.Scalar)),l={doc:this,indentStep:"  ",keep:a,mapAsMap:a&&!!i,maxAliasCount:s,stringify:qf},u=Object.keys(this.anchors.map);u.length>0&&(l.anchors=new Map(u.map(d=>[this.anchors.map[d],{alias:[],aliasCount:0,count:1}])));let f=Re.toJSON(this.contents,e,l);if(typeof t=="function"&&l.anchors)for(let{count:d,res:h}of l.anchors.values())t(h,d);return f}toString(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");let e=this.options.indent;if(!Number.isInteger(e)||e<=0){let u=JSON.stringify(e);throw new Error(`"indent" option must be a positive integer, not ${u}`)}this.setSchema();let t=[],r=!1;if(this.version){let u="%YAML 1.2";this.schema.name==="yaml-1.1"&&(this.version==="1.0"?u="%YAML:1.0":this.version==="1.1"&&(u="%YAML 1.1")),t.push(u),r=!0}let i=this.listNonDefaultTags();this.tagPrefixes.forEach(({handle:u,prefix:f})=>{i.some(d=>d.indexOf(f)===0)&&(t.push(`%TAG ${u} ${f}`),r=!0)}),(r||this.directivesEndMarker)&&t.push("---"),this.commentBefore&&((r||!this.directivesEndMarker)&&t.unshift(""),t.unshift(this.commentBefore.replace(/^/gm,"#")));let s={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:qf},a=!1,l=null;if(this.contents){this.contents instanceof Re.Node&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&t.push(""),this.contents.commentBefore&&t.push(this.contents.commentBefore.replace(/^/gm,"#")),s.forceBlockIndent=!!this.comment,l=this.contents.comment);let u=l?null:()=>a=!0,f=qf(this.contents,s,()=>l=null,u);t.push(Re.addComment(f,"",l))}else this.contents!==void 0&&t.push(qf(this.contents,s));return this.comment&&((!a||l)&&t[t.length-1]!==""&&t.push(""),t.push(this.comment.replace(/^/gm,"#"))),t.join(`
`)+`
`}};Nn._defineProperty(so,"defaults",wP);jf.Document=so;jf.defaultOptions=T1;jf.scalarOptions=_1});var FP=pe(DP=>{"use strict";var Im=tP(),oo=OP(),v1=Bf(),C1=ds(),S1=Of();Ma();function E1(n,e=!0,t){t===void 0&&typeof e=="string"&&(t=e,e=!0);let r=Object.assign({},oo.Document.defaults[oo.defaultOptions.version],oo.defaultOptions);return new v1.Schema(r).createNode(n,e,t)}var Ba=class extends oo.Document{constructor(e){super(Object.assign({},oo.defaultOptions,e))}};function R1(n,e){let t=[],r;for(let i of Im.parse(n)){let s=new Ba(e);s.parse(i,r),t.push(s),r=s}return t}function LP(n,e){let t=Im.parse(n),r=new Ba(e).parse(t[0]);if(t.length>1){let i="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.unshift(new C1.YAMLSemanticError(t[1],i))}return r}function k1(n,e){let t=LP(n,e);if(t.warnings.forEach(r=>S1.warn(r)),t.errors.length>0)throw t.errors[0];return t.toJSON()}function w1(n,e){let t=new Ba(e);return t.contents=n,String(t)}var O1={createNode:E1,defaultOptions:oo.defaultOptions,Document:Ba,parse:k1,parseAllDocuments:R1,parseCST:Im.parse,parseDocument:LP,scalarOptions:oo.scalarOptions,stringify:w1};DP.YAML=O1});var xm=pe((zZ,MP)=>{MP.exports=FP().YAML});var VP=pe(In=>{"use strict";var ir=Ma(),L1=Bf();ds();Of();In.Alias=ir.Alias;In.Collection=ir.Collection;In.Merge=ir.Merge;In.Node=ir.Node;In.Pair=ir.Pair;In.Scalar=ir.Scalar;In.YAMLMap=ir.YAMLMap;In.YAMLSeq=ir.YAMLSeq;In.binaryOptions=ir.binaryOptions;In.boolOptions=ir.boolOptions;In.intOptions=ir.intOptions;In.nullOptions=ir.nullOptions;In.strOptions=ir.strOptions;In.Schema=L1.Schema});var GP=pe((zf,jP)=>{(function(n,e){typeof zf=="object"&&typeof jP<"u"?e(zf,ar("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],e):e(((n=typeof globalThis<"u"?globalThis:n||self).prettierPlugins=n.prettierPlugins||{},n.prettierPlugins.php={}),n.prettier)})(zf,function(n,e){"use strict";var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var i={name:"PHP",type:"programming",tmScope:"text.html.php",aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",color:"#4F5D95",extensions:[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],interpreters:["php"],aliases:["inc"],languageId:272},s={name:"HTML+PHP",type:"markup",color:"#4f5d95",tmScope:"text.html.php",group:"HTML",extensions:[".phtml"],aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",languageId:151},a={exports:{}},l={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let o=this.input();if(this.is_WHITESPACE()){do o=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(o){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":case".":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||o==="\\"){for(;this.offset<this.size;){let c=this.input();if(!this.is_LABEL()&&c!=="\\"){c&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${o}" at line ${this.yylineno} (offset ${this.offset})`)}},u={consume_NUM:function(){let o=this.yytext[0],c=o===".";if(o==="0")if(o=this.input(),o==="x"||o==="X"){if(o=this.input(),o!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(o?2:1)}else if(o==="b"||o==="B"){if(o=this.input(),o!=="_"&&o==="0"||o==="1")return this.consume_BNUM();this.unput(o?2:1)}else if(o==="o"||o==="O"){if(o=this.input(),o!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(o?2:1)}else this.is_NUM()||o&&this.unput(1);for(;this.offset<this.size;){let p=o;if(o=this.input(),o==="_"){if(p==="_"){this.unput(2);break}if(p==="."){this.unput(1);break}if(p==="e"||p==="E"){this.unput(2);break}}else{if(o==="."){if(c){this.unput(1);break}if(p==="_"){this.unput(2);break}c=!0;continue}if(o==="e"||o==="E"){if(p==="_"){this.unput(1);break}let m=2;if(o=this.input(),o!=="+"&&o!=="-"||(m=3,o=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(o?m:m-1);break}}if(!this.is_NUM()){o&&this.unput(1);break}}return c?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let o=this.input();if(!this.is_HEX()){o&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let o=this.input();if(!this.is_NUM()){o&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let o;for(;this.offset<this.size;)if(o=this.input(),o!=="0"&&o!=="1"&&o!=="_"){o&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){let o=this.input();if(!this.is_OCTAL()){o&&this.unput(1);break}}return this.tok.T_LNUMBER}},f={matchST_LOOKING_FOR_PROPERTY:function(){let o=this.input();if(o==="-"){if(o=this.input(),o===">")return this.tok.T_OBJECT_OPERATOR;o&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),o&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let o=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),o=this.input(),o==="["||o==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else o&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let o=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(o==="]")return this.popState(),"]";if(o==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||o==="\\"||o==="'"||o==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(o==="["||o==="{"||o==="}"||o==='"'||o==="`"||this.is_TOKEN())return o;throw new Error("Unexpected terminal")}},d={matchST_IN_SCRIPTING:function(){let o=this.input();switch(o){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let c=this._input[this.offset];return c!==`
`&&c!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),o=this._input[this.offset],o!==`
`&&o!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(o==="."){if(o=this.input(),this.is_NUM_START())return this.consume_NUM();o&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+o+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let o=this.input();if(o!==" "&&o!=="	"&&o!==`
`&&o!=="\r"){o&&this.unput(1);break}}return this.tok.T_WHITESPACE}};let h=[`
`,"\r"],_=[`
`,"\r",";"],b=_.concat(["	"," ",",","]",")","/","=","!"]);var g={T_CONSTANT_ENCAPSED_STRING:function(){let o;for(;this.offset<this.size;)if(o=this.input(),o=="\\")this.input();else if(o=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let o=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););let c=this._input[this.offset-1];if(c==="'"||c==='"'?this.offset++:c=null,this.is_LABEL_START()){let p=this.offset-1;for(;this.offset<this.size&&(this.offset++,this.is_LABEL()););let m=this._input.substring(p,this.offset-1);if((!c||c===this._input[this.offset-1])&&(c&&this.offset++,h.includes(this._input[this.offset-1])))return this.heredoc_label.label=m,this.heredoc_label.length=m.length,this.heredoc_label.finished=!1,p=this.offset-o,this.offset=o,this.consume(p),c==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=o,!1},ST_DOUBLE_QUOTES:function(){let o;for(;this.offset<this.size;)if(o=this.input(),o=="\\")this.input();else{if(o=='"')break;if(o=="$"){if(o=this.input(),o=="{"||this.is_LABEL_START()){this.unput(2);break}o&&this.unput(1)}else if(o=="{"){if(o=this.input(),o=="$"){this.unput(2);break}o&&this.unput(1)}}if(o=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let c=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(c=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-c),this.unput(this.yytext.length-c),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(o,c){let p=this._input[o-2];if(!h.includes(p))return!1;let m=!1,T=!1,I=0,R=this._input[o-1];if(this.version>=703){for(;R==="	"||R===" ";)R===" "?m=!0:R==="	"&&(T=!0),R=this._input[o+I],I++;if(o+=I,h.includes(this._input[o-1]))return!1}if(this._input.substring(o-1,o-1+this.heredoc_label.length)===this.heredoc_label.label){let x=this._input[o-1+this.heredoc_label.length];if((this.version>=703?b:_).includes(x)){if(c){if(this.consume(I),m&&T)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=I,this.heredoc_label.indentation_uses_spaces=m,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let o=this.offset+1;for(;o<this._input.length;){if(this.isDOC_MATCH(o,!1))return;if(!h.includes(this._input[o-1]))for(;!h.includes(this._input[o++])&&o<this._input.length;);o++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let o=this._input[this.offset-1];for(;this.offset<this.size;)if(h.includes(o)){if(o=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else o=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let o=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(o==="\\"&&(o=this.input(),h.includes(o)||(o=this.input())),h.includes(o)){if(o=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(o==="$"){if(o=this.input(),o==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let c=this.offset,p=this.consume_VARIABLE();return this.yytext.length>this.offset-c+2?(this.appendToken(p,this.offset-c+2),this.unput(this.offset-c+2),this.tok.T_ENCAPSED_AND_WHITESPACE):p}}else if(o==="{"){if(o=this.input(),o==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else o=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let o=this.input();if(o=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(o==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else o&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let o=this.input();if(o==="$"){if(o=this.input(),o==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(o==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(o==="`")return this.popState(),"`";for(;this.offset<this.size;){if(o==="\\")this.input();else{if(o==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(o==="$"){if(o=this.input(),o==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let c=this.offset,p=this.consume_VARIABLE();return this.yytext.length>this.offset-c+2?(this.appendToken(p,this.offset-c+2),this.unput(this.offset-c+2),this.tok.T_ENCAPSED_AND_WHITESPACE):p}continue}if(o==="{"){if(o=this.input(),o==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}o=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let o=this.input();if(o==="$"){if(o=this.input(),o==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(o==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(o==='"')return this.popState(),'"';for(;this.offset<this.size;){if(o==="\\")this.input();else{if(o==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(o==="$"){if(o=this.input(),o==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let c=this.offset,p=this.consume_VARIABLE();return this.yytext.length>this.offset-c+2?(this.appendToken(p,this.offset-c+2),this.unput(this.offset-c+2),this.tok.T_ENCAPSED_AND_WHITESPACE):p}o&&this.unput(1)}else if(o==="{"){if(o=this.input(),o==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);o&&this.unput(1)}}o=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}},v={is_NUM:function(){let o=this._input.charCodeAt(this.offset-1);return o>47&&o<58||o===95},is_NUM_START:function(){let o=this._input.charCodeAt(this.offset-1);return o>47&&o<58},is_LABEL:function(){let o=this._input.charCodeAt(this.offset-1);return o>96&&o<123||o>64&&o<91||o===95||o>47&&o<58||o>126},is_LABEL_START:function(){let o=this._input.charCodeAt(this.offset-1);return o>64&&o<91||o>96&&o<123||o===95||o>126},consume_LABEL:function(){for(;this.offset<this.size;){let o=this.input();if(!this.is_LABEL()){o&&this.unput(1);break}}return this},is_TOKEN:function(){let o=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(o)!==-1},is_WHITESPACE:function(){let o=this._input[this.offset-1];return o===" "||o==="	"||o===`
`||o==="\r"},is_TABSPACE:function(){let o=this._input[this.offset-1];return o===" "||o==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let o=this.input();if(!this.is_TABSPACE()){o&&this.unput(1);break}}return this},is_HEX:function(){let o=this._input.charCodeAt(this.offset-1);return o>47&&o<58||o>64&&o<71||o>96&&o<103||o===95},is_OCTAL:function(){let o=this._input.charCodeAt(this.offset-1);return o>47&&o<56||o===95}};let O=function(o){this.engine=o,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};O.prototype.setInput=function(o){return this._input=o,this.size=o.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},O.prototype.input=function(){let o=this._input[this.offset];return o?(this.yytext+=o,this.offset++,o==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),o===`
`||o==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,o):""},O.prototype.unput=function(o){if(o===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,o++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-o);else if(o>0)if(this.offset-=o,o<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-o),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let c=0;c<this.yytext.length;c++){let p=this.yytext[c];p==="\r"?(p=this.yytext[++c],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,p!==`
`&&(p==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):p===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},O.prototype.tryMatch=function(o){return o===this.ahead(o.length)},O.prototype.tryMatchCaseless=function(o){return o===this.ahead(o.length).toLowerCase()},O.prototype.ahead=function(o){let c=this._input.substring(this.offset,this.offset+o);return c[c.length-1]==="\r"&&this._input[this.offset+o+1]===`
`&&(c+=`
`),c},O.prototype.consume=function(o){for(let c=0;c<o;c++){let p=this._input[this.offset];if(!p)break;this.yytext+=p,this.offset++,p==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,c++),p===`
`||p==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},O.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},O.prototype.setState=function(o){return this.yytext=o.yytext,this.offset=o.offset,this.yylineno=o.yylineno,this.yyprevcol=o.yyprevcol,this.yylloc=o.yylloc,o.heredoc_label&&(this.heredoc_label=o.heredoc_label),this},O.prototype.appendToken=function(o,c){return this.tokens.push([o,c]),this},O.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let o=this.next()||this.lex();if(!this.all_tokens){for(;o===this.tok.T_WHITESPACE||!this.comment_tokens&&(o===this.tok.T_COMMENT||o===this.tok.T_DOC_COMMENT)||o===this.tok.T_OPEN_TAG;)o=this.next()||this.lex();if(o==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(o===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),o},O.prototype.begin=function(o){if(this.conditionStack.push(o),this.curCondition=o,this.stateCb=this["match"+o],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+o+'"');return this},O.prototype.popState=function(){let o=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return o},O.prototype.next=function(){let o;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(o=this.tokens.shift(),typeof o[1]=="object"?this.setState(o[1]):this.consume(o[1]),o=o[0]):o=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let c=o;c=typeof c=="number"?this.engine.tokens.values[c]:'"'+c+'"';let p=new Error(c+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(p.stack)}return o},[l,{T_COMMENT:function(){for(;this.offset<this.size;){let o=this.input();if(o===`
`||o==="\r")return this.tok.T_COMMENT;if(o==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(o==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let o=this.input(),c=this.tok.T_COMMENT;if(o==="*"){if(o=this.input(),this.is_WHITESPACE()&&(c=this.tok.T_DOC_COMMENT),o==="/")return c;this.unput(1)}for(;this.offset<this.size;)if(o=this.input(),o==="*"&&this._input[this.offset]==="/"){this.input();break}return c}},{nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let o=this.input();if(o=="<"){if(o=this.ahead(1),o=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&(o=this._input[this.offset+4],o===" "||o==="	"||o===`
`||o==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&o=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}},u,f,d,g,{T_STRING:function(){let o=this.yytext.toLowerCase(),c=this.keywords[o];if(typeof c!="number"){if(o==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),c=this.tok.T_YIELD_FROM):c=this.tok.T_YIELD;else if(c=this.tok.T_STRING,o==="b"||o==="B"){let p=this.input();if(p==='"')return this.ST_DOUBLE_QUOTES();if(p==="'")return this.T_CONSTANT_ENCAPSED_STRING();p&&this.unput(1)}}if(c===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let p=this.offset,m=this.input();for(;m==" ";)m=this.input();let T=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)m+=this.input();let I=m.slice(0,-1).toLowerCase();T=I!=="extends"&&I!=="implements"}return this.unput(this.offset-p),T?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&c!==this.tok.T_YIELD_FROM){let p=this.input();if(p==="\\"){c=o==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),p=this.input()}while(p==="\\")}p&&this.unput(1)}return c},consume_TOKEN:function(){let o=this._input[this.offset-1],c=this.tokenTerminals[o];return c?c.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let o=this._input[this.offset];return o===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):o==="-"?(this.input(),this.tok.T_DEC):o==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){let o;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),o=this.input()}while(o==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let o=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let c=this.yytext.length;this.consume_LABEL();let p=this.yytext.substring(c-1).toLowerCase(),m=this.castKeywords[p];if(typeof m=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return m}return this.unput(this.offset-o),"("},"=":function(){let o=this._input[this.offset];return o===">"?(this.input(),this.tok.T_DOUBLE_ARROW):o==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let o=this._input[this.offset];return o==="+"?(this.input(),this.tok.T_INC):o==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let o=this._input[this.offset];return o==="<"?(o=this._input[this.offset+1],o==="="?(this.consume(2),this.tok.T_SL_EQUAL):o==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):o==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):o===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let o=this._input[this.offset];return o==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):o===">"?(o=this._input[this.offset+1],o==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let o=this._input[this.offset];return o==="="?(this.input(),this.tok.T_MUL_EQUAL):o==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let o=this._input[this.offset];return o==="="?(this.input(),this.tok.T_CONCAT_EQUAL):o==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let o=this._input[this.offset];return o==="="?(this.input(),this.tok.T_AND_EQUAL):o==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let o=this._input[this.offset];return o==="="?(this.input(),this.tok.T_OR_EQUAL):o==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}},v].forEach(function(o){for(let c in o)O.prototype[c]=o[c]});var E=O,C=function(o,c,p){this.line=o,this.column=c,this.offset=p},q={read_expr:function(o){let c=this.node();if(this.token==="@")return o||(o=this.next().read_expr()),c("silent",o);if(o||(o=this.read_expr_item()),this.token==="|")return c("bin","|",o,this.next().read_expr());if(this.token==="&")return c("bin","&",o,this.next().read_expr());if(this.token==="^")return c("bin","^",o,this.next().read_expr());if(this.token===".")return c("bin",".",o,this.next().read_expr());if(this.token==="+")return c("bin","+",o,this.next().read_expr());if(this.token==="-")return c("bin","-",o,this.next().read_expr());if(this.token==="*")return c("bin","*",o,this.next().read_expr());if(this.token==="/")return c("bin","/",o,this.next().read_expr());if(this.token==="%")return c("bin","%",o,this.next().read_expr());if(this.token===this.tok.T_POW)return c("bin","**",o,this.next().read_expr());if(this.token===this.tok.T_SL)return c("bin","<<",o,this.next().read_expr());if(this.token===this.tok.T_SR)return c("bin",">>",o,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return c("bin","||",o,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return c("bin","or",o,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return c("bin","&&",o,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return c("bin","and",o,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return c("bin","xor",o,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return c("bin","===",o,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return c("bin","!==",o,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return c("bin","==",o,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return c("bin","!=",o,this.next().read_expr());if(this.token==="<")return c("bin","<",o,this.next().read_expr());if(this.token===">")return c("bin",">",o,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return c("bin","<=",o,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return c("bin",">=",o,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return c("bin","<=>",o,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(o=c("bin","instanceof",o,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(o=this.read_expr(o))),this.token===this.tok.T_COALESCE)return c("bin","??",o,this.next().read_expr());if(this.token==="?"){let p=null;return this.next().token!==":"&&(p=this.read_expr()),this.expect(":")&&this.next(),c("retif",o,p,this.read_expr())}return c.destroy(o),o},read_expr_cast:function(o){return this.node("cast")(o,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let o=null;switch(this.token){case this.tok.T_ISSET:{o=this.node("isset"),this.next().expect("(")&&this.next();let c=this.read_isset_variables();this.expect(")")&&this.next(),o=o(c)}break;case this.tok.T_EMPTY:{o=this.node("empty"),this.next().expect("(")&&this.next();let c=this.read_expr();this.expect(")")&&this.next(),o=o(c)}break;case this.tok.T_INCLUDE:o=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:o=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{o=this.node("eval"),this.next().expect("(")&&this.next();let c=this.read_expr();this.expect(")")&&this.next(),o=o(c)}break;case this.tok.T_REQUIRE:o=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:o=this.node("include")(!0,!0,this.next().read_expr())}return o},read_optional_expr:function(o){return this.token!==o?this.read_expr():null},read_exit_expr:function(){let o=null;return this.token==="("&&(this.next(),o=this.read_optional_expr(")"),this.expect(")")&&this.next()),o},read_expr_item:function(){let o,c,p=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return c=this.next().read_expr(),c.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(c);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let m=null,T=this.innerList;o=this.node("list"),T||(m=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let I=this.read_array_pair_list(!1);this.expect(")")&&this.next();let R=!1;for(let x=0;x<I.length;x++)if(I[x]!==null&&I[x].kind!=="noop"){R=!0;break}return R||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),T?o(I,!1):(this.innerList=!1,this.expect("=")?m(o(I,!1),this.next().read_expr(),"="):o(I,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(p=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:{let m=this.lexer.yytext.toLowerCase()==="die";return o=this.node("exit"),this.next(),o(this.read_exit_expr(),m)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let m=null,T=null;return o=this.node("yield"),this.next().is("EXPR")&&(m=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(T=m,m=this.next().read_expr())),o(m,T)}case this.tok.T_YIELD_FROM:return o=this.node("yieldfrom"),c=this.next().read_expr(),o(c);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,p);case this.tok.T_STATIC:{let m=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],p);this.lexer.tokens.push(m),this.next()}}if(this.is("VARIABLE")){o=this.node(),c=this.read_variable(!1,!1);let m=c.kind==="identifier"||c.kind==="staticlookup"&&c.offset.kind==="identifier";switch(this.token){case"=":return m&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(o,c):o("assign",c,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return m&&this.error("VARIABLE"),o("assign",c,this.next().read_expr(),"??=");case this.tok.T_INC:return m&&this.error("VARIABLE"),this.next(),o("post","+",c);case this.tok.T_DEC:return m&&this.error("VARIABLE"),this.next(),o("post","-",c);default:o.destroy(c)}}else{if(this.is("SCALAR")){if(o=this.node(),c=this.read_scalar(),c.kind==="array"&&c.shortForm&&this.token==="="){let m=this.convertToList(c);return c.loc&&(m.loc=c.loc),o("assign",m,this.next().read_expr(),"=")}return o.destroy(c),this.handleDereferencable(c)}this.error("EXPR"),this.next()}return c},convertToList:function(o){let c=o.items.map(m=>(m.value&&m.value.kind==="array"&&m.value.shortForm&&(m.value=this.convertToList(m.value)),m)),p=this.node("list")(c,!0);return o.loc&&(p.loc=o.loc),o.leadingComments&&(p.leadingComments=o.leadingComments),o.trailingComments&&(p.trailingComments=o.trailingComments),p},read_assignref:function(o,c){let p;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),p=this.read_new_expr()):p=this.read_variable(!1,!1),o("assignref",c,p)},read_inline_function:function(o,c){if(this.token===this.tok.T_FUNCTION){let M=this.read_function(!0,o,c);return M.attrGroups=c,M}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let p=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let m=this.is_reference();this.expect("(")&&this.next();let T=this.read_parameter_list();this.expect(")")&&this.next();let I=!1,R=null;this.token===":"&&(this.next().token==="?"&&(I=!0,this.next()),R=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let x=p(T,m,this.read_expr(),R,I,!!o);return x.attrGroups=c,x},read_match_expression:function(){let o=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let c=null,p=[];return this.expect("(")&&this.next(),c=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),p=this.read_match_arms(),this.expect("}")&&this.next(),o(c,p)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let o=[];if(this.token===this.tok.T_DEFAULT)o=null,this.next();else for(o.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),o;o.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),o},read_attribute(){let o=this.text(),c=[];return this.next(),this.token==="("&&(c=this.read_argument_list()),this.node("attribute")(o,c)},read_attr_list(){let o=[];if(this.token===this.tok.T_ATTRIBUTE)do{let c=this.node("attrgroup")([]);for(this.next(),c.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&c.attrs.push(this.read_attribute());o.push(c),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return o},read_new_expr:function(){let o=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let c=[];if(this.token==="("){this.next();let T=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(c=this.read_argument_list()),o(T,c)}let p=this.read_attr_list();if(this.token===this.tok.T_CLASS){let T=this.node("class");this.next().token==="("&&(c=this.read_argument_list());let I=this.read_extends_from(),R=this.read_implements_list(),x=null;this.expect("{")&&(x=this.next().read_class_body(!0,!1));let M=T(null,I,R,x,[0,0,0]);return M.attrGroups=p,o(M,c)}let m=this.read_new_class_name();for(;this.token==="[";){let T=this.node("offsetlookup"),I=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),m=T(m,I)}return this.token==="("&&(c=this.read_argument_list()),o(m,c)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let o=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(o=this.read_static_getter(o)),o}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(o){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)o=this.recursive_variable_chain_scan(o,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")o=this.read_dereferencable(o);else{if(this.token!=="(")return o;o=this.node("call")(o,this.read_argument_list())}return o}},Z={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(o,c,p,m){let T=this.read_function_declaration(o?1:c?2:0,c&&c[1]===1,p||[],m);return c&&c[2]==1?(T.parseFlags(c),this.expect(";")&&this.next()):(this.expect("{")&&(T.body=this.read_code_block(!1),T.loc&&T.body.loc&&(T.loc.end=T.body.loc.end)),!o&&c&&T.parseFlags(c)),T},read_function_declaration:function(o,c,p,m){let T="function";o===1?T="closure":o===2&&(T="method");let I=this.node(T);this.expect(this.tok.T_FUNCTION)&&this.next();let R=this.is_reference(),x=!1,M=[],D=null,A=!1;if(o!==1){let K=this.node("identifier");o===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(x=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(x=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(x=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(x=this.text()),this.next()),x=K(x)}this.expect("(")&&this.next();let U=this.read_parameter_list(x.name==="__construct");return this.expect(")")&&this.next(),o===1&&(M=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(A=!0,this.next()),D=this.read_types()),(K=>(K.attrGroups=p||[],m&&K.loc&&(K.loc.start=m,K.loc.source&&(K.loc.source=this.lexer._input.substr(K.loc.start.offset,K.loc.end.offset-K.loc.start.offset))),K))(o===1?I(U,R,M,D,A,c):I(x,U,R,D,A))},read_lexical_vars:function(){let o=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),o=this.read_lexical_var_list(),this.expect(")")&&this.next()),o},read_list_with_dangling_comma:function(o){let c=[];for(;this.token!=this.EOF;){if(c.push(o()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return c}return c},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let o=this.node("variable");this.expect(this.tok.T_VARIABLE);let c=this.text().substring(1);return this.next(),o(c,!1)},read_parameter_list:function(o){if(this.token!==")"){let c=!1;return this.read_list_with_dangling_comma(function(){let p=this.read_parameter(o);return p&&(c&&this.raiseError("Unexpected parameter after a variadic parameter"),p.variadic&&(c=!0)),p}.bind(this),",")}return[]},read_parameter:function(o){let c=this.node("parameter"),p=null,m=null,T=null,I=!1,R=!1,x=[];this.token===this.tok.T_ATTRIBUTE&&(x=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(o?(this.next(),R=!0):this.raiseError("readonly properties can be used only on class constructor"));let M=this.read_promoted();!R&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(o?(this.next(),R=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),I=!0),T=this.read_types(),I&&!T&&this.raiseError("Expecting a type definition combined with nullable operator");let D=this.is_reference(),A=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){p=this.node("identifier");let $=this.text().substring(1);this.next(),p=p($)}this.token=="="&&(m=this.next().read_expr());let U=c(p,T,m,D,A,R,I,M);return x&&(U.attrGroups=x),U},read_types(){let o="unset",c="union",p="intersection",m=[],T=o,I=this.read_type();if(!I)return null;for(m.push(I);this.token==="|"||this.version>=801&&this.token==="&";){let R=this.peek();if(R===this.tok.T_ELLIPSIS||R===this.tok.T_VARIABLE)break;T===o?T=this.token==="|"?c:p:(T===c&&this.token!=="|"||T===p&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),m.push(this.read_type())}return m.length===1?m[0]:T===p?this.node("intersectiontype")(m):this.node("uniontype")(m)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let o=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(o.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(o=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),o},read_non_empty_argument_list:function(){let o=!1;return this.read_function_list(function(){let c=this.read_argument();if(c){let p=c.kind==="variadic";o&&!p&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),p&&(o=!0)}return c}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let o=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let c=this.text();return this.next(),o("typereference",c.toLowerCase(),c)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let c=this.text(),p=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(c.toLowerCase())>-1?o("typereference",c.toLowerCase(),c):(this.lexer.tokens.push(p),this.next(),o.destroy(),this.read_namespace_name())}return o.destroy(),null}};let ue={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};var de={resolve_special_chars:function(o,c){return c?o.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(p,m,T)=>ue[m]?ue[m]:m[0]==="x"||m[0]==="X"?String.fromCodePoint(parseInt(m.substr(1),16)):m[0]==="u"?String.fromCodePoint(parseInt(T,16)):String.fromCodePoint(parseInt(m,8))):o.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(o,c,p,m){if(c===0)return o;this.check_heredoc_indentation_level(o,c,p,m);let T=p?" ":"	",I=new RegExp(`\\n${T}{${c}}`,"g"),R=new RegExp(`^${T}{${c}}`);return m&&(o=o.replace(R,"")),o.replace(I,`
`)},check_heredoc_indentation_level:function(o,c,p,m){let T=o.length,I=0,R=0,x=!0,M=p?" ":"	",D=!1;if(!m){if(I=o.indexOf(`
`),I===-1)return;I++}for(;I<T;)x?o[I]===M?R++:D=!0:x=!1,o[I]!==`
`&&D&&R<c?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${c})`):D=!1,o[I]===`
`&&(x=!0,R=0),I++},read_dereferencable_scalar:function(){let o=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let c=this.node("string"),p=this.text(),m=0;p[0]!=="b"&&p[0]!=="B"||(m=1);let T=p[m]==='"';this.next(),c=c(T,this.resolve_special_chars(p.substring(m+1,p.length-1),T),m===1,p),o=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(c):c}break;case this.tok.T_ARRAY:case"[":o=this.read_array()}return o},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let o,c;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let p=this.node("number");return o=this.text(),this.next(),p(o,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let p=this.lexer.yylloc.first_offset;c=this.node("nowdoc"),o=this.next().text(),this.lexer.heredoc_label.indentation>0&&(o=o.substring(0,o.length-this.lexer.heredoc_label.indentation));let m=o[o.length-1];m===`
`?o=o[o.length-2]==="\r"?o.substring(0,o.length-2):o.substring(0,o.length-1):m==="\r"&&(o=o.substring(0,o.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let T=this.lexer._input.substring(p,this.lexer.yylloc.first_offset);return c=c(this.remove_heredoc_leading_whitespace_chars(o,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),T,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,c}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let p=this.error("SCALAR");return this.next(),p}}}},read_dereferencable:function(o){let c,p,m=this.node("offsetlookup");return this.token==="["?(p=this.next().read_expr(),this.expect("]")&&this.next(),c=m(o,p)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(p=this.read_encapsed_string_item(!1),c=m(o,p)),c},read_encapsed_string_item:function(o){let c=this.node("encapsedpart"),p,m,T,I=null,R=!1,x=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let M=this.text();this.next(),x=x("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(M,o),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):M,!1,M)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(I="simple",R=!0,T=null,this.next().token===this.tok.T_STRING_VARNAME){T=this.node("variable");let M=this.text();this.next(),x.destroy(),this.token==="["?(T=T(M,!1),m=this.node("offsetlookup"),p=this.next().read_expr(),this.expect("]")&&this.next(),x=m(T,p)):x=T(M,!1)}else x=x("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)I="complex",x.destroy(),x=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(I="simple",x.destroy(),x=this.read_simple_variable(),this.token==="["&&(m=this.node("offsetlookup"),p=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),x=m(x,p)),this.token===this.tok.T_OBJECT_OPERATOR){m=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let M=this.node("identifier");T=this.text(),this.next(),x=m(x,M(T))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let M=this.text();this.next(),x.destroy(),x=x("string",!1,M,!1,M)}return this.lexer.heredoc_label.first_encaps_node=!1,c(x,I,R)},read_encapsed_string:function(o){let c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=this.lexer.yylloc.first_offset,m=this.node("encapsed");this.next();let T=this.lexer.yylloc.prev_offset-(c?1:0),I=[],R=null;for(R=o==="`"?this.ast.encapsed.TYPE_SHELL:o==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==o&&this.token!==this.EOF;)I.push(this.read_encapsed_string_item(!0));if(I.length>0&&I[I.length-1].kind==="encapsedpart"&&I[I.length-1].expression.kind==="string"){let x=I[I.length-1].expression,M=x.value[x.value.length-1];M===`
`?x.value[x.value.length-2]==="\r"?x.value=x.value.substring(0,x.value.length-2):x.value=x.value.substring(0,x.value.length-1):M==="\r"&&(x.value=x.value.substring(0,x.value.length-1))}return this.expect(o)&&this.next(),m=m(I,this.lexer._input.substring(R==="heredoc"?p:T-1,this.lexer.yylloc.first_offset),R),o===this.tok.T_END_HEREDOC&&(m.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),m},get_magic_constant:function(){let o=this.node("magic"),c=this.text();return this.next(),o(c.toUpperCase(),c)}},Ue={read_top_statements:function(){let o=[];for(;this.token!==this.EOF&&this.token!=="}";){let c=this.read_top_statement();c&&(Array.isArray(c)?o=o.concat(c):o.push(c))}return o},read_top_statement:function(){let o=[];switch(this.token===this.tok.T_ATTRIBUTE&&(o=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,o);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(o);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(o);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(o);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let c=this.node("constantstatement"),p=this.next().read_const_list();return this.expectEndOfStatement(),c(null,p)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let c=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,c(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let o=[];for(;this.token!=this.EOF&&this.token!=="}";){let c=this.read_inner_statement();c&&(Array.isArray(c)?o=o.concat(c):o.push(c))}return o},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let o=this.node("constant"),c=this.node("identifier"),p=this.text();return this.next(),c=c(p),this.expect("=")?o(c,this.next().read_expr()):o(c,null)},",",!1)},read_declare_list:function(){let o=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let c=this.node("declaredirective"),p=this.node("identifier"),m=this.text();this.next(),p=p(m);let T=null;if(this.expect("=")&&(T=this.next().read_expr()),o.push(c(p,T)),this.token!==",")break;this.next()}return o},read_inner_statement:function(){let o=[];switch(this.token===this.tok.T_ATTRIBUTE&&(o=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let c=this.read_function(!1,!1);return c.attrGroups=o,c}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let c=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),c=c(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),c}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let o=this.node("return");this.next();let c=this.read_optional_expr(";");return this.expectEndOfStatement(),o(c)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let o=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let c=this.read_optional_expr(";");return this.expectEndOfStatement(),o(c)}case this.tok.T_GLOBAL:{let o=this.node("global"),c=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),o(c)}case this.tok.T_STATIC:{let o=[this.token,this.lexer.getState()],c=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(o);let m=this.next().read_expr();return this.expectEndOfStatement(m),c("expressionstatement",m)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let p=this.read_variable_declarations();return this.expectEndOfStatement(),c("static",p)}case this.tok.T_ECHO:{let o=this.node("echo"),c=this.text(),p=c==="<?="||c==="<%=",m=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),o(m,p)}case this.tok.T_INLINE_HTML:{let o=this.text(),c=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,p=c==="\r"||c===`
`;p&&c===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(c=`\r
`);let m=this.node("inline");return this.next(),m(o,p?c+o:o)}case this.tok.T_UNSET:{let o=this.node("unset");this.next().expect("(")&&this.next();let c=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),o(c)}case this.tok.T_DECLARE:{let o=this.node("declare"),c=[],p;this.next().expect("(")&&this.next();let m=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)c.push(this.read_top_statement());c.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&c.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),p=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)c.push(this.read_top_statement());c.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&c.push(this.node("noop")()),this.expect("}")&&this.next(),p=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),p=this.ast.declare.MODE_NONE;return o(m,c,p)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let o=this.node("throw"),c=this.next().read_expr();return this.expectEndOfStatement(),o(c)}case";":return this.next(),null;case this.tok.T_STRING:{let o=this.node(),c=[this.token,this.lexer.getState()],p=this.text(),m=this.node("identifier");if(this.next().token===":")return m=m(p),this.next(),o("label",m);m.destroy(),o.destroy(),this.lexer.tokens.push(c);let T=this.node("expressionstatement"),I=this.next().read_expr();return this.expectEndOfStatement(I),T(I)}case this.tok.T_GOTO:{let o=this.node("goto"),c=null;if(this.next().expect(this.tok.T_STRING)){c=this.node("identifier");let p=this.text();this.next(),c=c(p),this.expectEndOfStatement()}return o(c)}default:{let o=this.node("expressionstatement"),c=this.read_expr();return this.expectEndOfStatement(c),o(c)}}},read_code_block:function(o){let c=this.node("block");this.expect("{")&&this.next();let p=o?this.read_top_statements():this.read_inner_statements();return p.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&p.push(this.node("noop")()),this.expect("}")&&this.next(),c(null,p)}},_t={read_variable:function(o,c){let p;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,o,c));if(this.is([this.tok.T_VARIABLE,"$"]))p=this.read_reference_variable(c);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){p=this.node();let m=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(m.kind)===-1){let T=m.name.toLowerCase();T==="true"?p=m.destroy(p("boolean",!0,m.name)):T==="false"?p=m.destroy(p("boolean",!1,m.name)):T==="null"?p=m.destroy(p("nullkeyword",m.name)):(p.destroy(m),p=m)}else p.destroy(m),p=m}else if(this.token===this.tok.T_STATIC){p=this.node("staticreference");let m=this.text();this.next(),p=p(m)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(p=this.read_static_getter(p,c)),this.recursive_variable_chain_scan(p,o,c)},read_static_getter:function(o,c){let p=this.node("staticlookup"),m,T;return this.next().is([this.tok.T_VARIABLE,"$"])?m=this.read_reference_variable(c):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(m=this.node("identifier"),T=this.text(),this.next(),m=m(T)):this.token==="{"?(m=this.node("literal"),T=this.next().read_expr(),this.expect("}")&&this.next(),m=m("literal",T,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),m=this.node("identifier"),T=this.text(),this.next(),m=m(T)),p(o,m)},read_what:function(){let o=arguments.length>0&&arguments[0]!==void 0&&arguments[0],c=null,p=null;switch(this.next().token){case this.tok.T_STRING:c=this.node("identifier"),p=this.text(),this.next(),c=c(p),o&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:c=this.node("variable"),p=this.text().substring(1),this.next(),c=c(p,!1);break;case"$":c=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(p=this.next().read_expr(),this.expect("}")&&this.next(),c=c("variable",p,!0)):(p=this.read_expr(),c=c("variable",p,!1));break;case"{":c=this.node("encapsedpart"),p=this.next().read_expr(),this.expect("}")&&this.next(),c=c(p,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),c=this.node("identifier"),p=this.text(),this.next(),c=c(p)}return c},recursive_variable_chain_scan:function(o,c,p){let m,T;e:for(;this.token!=this.EOF;)switch(this.token){case"(":if(c)return o;o=this.node("call")(o,this.read_argument_list());break;case"[":case"{":{let I=this.token==="[";m=this.node("offsetlookup"),this.next(),T=!1,p?(T=this.read_encaps_var_offset(),this.expect(I?"]":"}")&&this.next()):(I?this.token!=="]":this.token!=="}")?(T=this.read_expr(),this.expect(I?"]":"}")&&this.next()):this.next(),o=m(o,T);break}case this.tok.T_DOUBLE_COLON:o.kind==="staticlookup"&&o.offset.kind==="identifier"&&this.error(),m=this.node("staticlookup"),o=m(o,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:m=this.node("propertylookup"),o=m(o,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:m=this.node("nullsafepropertylookup"),o=m(o,this.read_what());break;default:break e}return o},read_encaps_var_offset:function(){let o=this.node();if(this.token===this.tok.T_STRING){let c=this.text();this.next(),o=o("identifier",c)}else if(this.token===this.tok.T_NUM_STRING){let c=this.text();this.next(),o=o("number",c,null)}else if(this.token==="-"){this.next();let c=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),o=o("number",c,null)}else if(this.token===this.tok.T_VARIABLE){let c=this.text().substring(1);this.next(),o=o("variable",c,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let c=this.text();this.next(),o=o("identifier",c)}return o},read_reference_variable:function(o){let c,p=this.read_simple_variable();for(;this.token!=this.EOF;){let m=this.node();if(this.token!="{"||o){m.destroy();break}c=this.next().read_expr(),this.expect("}")&&this.next(),p=m("offsetlookup",p,c)}return p},read_simple_variable:function(){let o,c=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)o=this.text().substring(1),this.next(),c=c(o,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let p=this.next().read_expr();this.expect("}")&&this.next(),c=c(p,!0);break}case"$":c=c(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{o=this.text().substring(1);let p=this.node("variable");this.next(),c=c(p(o,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),o=this.text(),this.next(),c=c(o,!1)}return c}};let Qt=C;function ft(o){return o!="."&&o!=","&&!isNaN(parseFloat(o))&&isFinite(o)}let ke=function(o,c){this.lexer=o,this.ast=c,this.tok=o.tok,this.EOF=o.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let p=function(m){return[m,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(p)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(p)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(p)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(p)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(p)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(p)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(p))}};ke.prototype.getTokenName=function(o){return ft(o)?o==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[o]:"'"+o+"'"},ke.prototype.parse=function(o,c){this._errors=[],this.filename=c||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(o),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let p=this.node("program"),m=[];for(this.next();this.token!=this.EOF;)m.push(this.read_start());m.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&m.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let T=p(m,this._errors,this._docs,this._tokens);if(this.debug){let I=this.ast.checkNodes();if(I.length>0)throw I.forEach(function(R){R.position&&console.log("Node at line "+R.position.line+", column "+R.position.column),console.log(R.stack.join(`
`))}),new Error("Some nodes are not closed")}return T},ke.prototype.raiseError=function(o,c,p,m){if(o+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let I=new SyntaxError(o,this.filename,this.lexer.yylloc.first_line);throw I.lineNumber=this.lexer.yylloc.first_line,I.fileName=this.filename,I.columnNumber=this.lexer.yylloc.first_column,I}let T=this.ast.prepare("error",null,this)(o,m,this.lexer.yylloc.first_line,p);return this._errors.push(T),T},ke.prototype.error=function(o){let c="Parse Error : syntax error",p=this.getTokenName(this.token),m="";if(this.token!==this.EOF){if(ft(this.token)){let T=this.text();T.length>10&&(T=T.substring(0,7)+"..."),p="'"+T+"' ("+p+")"}c+=", unexpected "+p}return o&&!Array.isArray(o)&&((ft(o)||o.length===1)&&(m=", expecting "+this.getTokenName(o)),c+=m),this.raiseError(c,m,o,p)},ke.prototype.position=function(){return new Qt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},ke.prototype.node=function(o){if(this.extractDoc){let c=null;this._docIndex<this._docs.length&&(c=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+o)),console.log(c)));let p=this.ast.prepare(o,c,this);return p.postBuild=function(m){if(this._docIndex<this._docs.length)if(this._lastNode){let T=this.prev[2],I=this._docIndex;for(;I<this._docs.length&&!(this._docs[I].offset>T);I++);I>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,I)),this._docIndex=I)}else this.token===this.EOF&&(m.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=m}.bind(this),p}return this.ast.prepare(o,null,this)},ke.prototype.expectEndOfStatement=function(o){if(this.token===";")o&&this.lexer.yytext===";"&&o.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};let vr=["parser.next","parser.node","parser.showlog"];ke.prototype.showlog=function(){let o=new Error().stack.split(`
`),c;for(let p=2;p<o.length;p++){c=o[p].trim();let m=!1;for(let T=0;T<vr.length;T++)if(c.substring(3,3+vr[T].length)===vr[T]){m=!0;break}if(!m)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+c),this},ke.prototype.expect=function(o){if(Array.isArray(o)){if(o.indexOf(this.token)===-1)return this.error(o),!1}else if(this.token!=o)return this.error(o),!1;return!0},ke.prototype.text=function(){return this.lexer.yytext},ke.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},ke.prototype.peek=function(){let o=this.lexer.getState(),c=this.lexer.lex();return this.lexer.setState(o),c},ke.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let o=this.lexer.yytext;if(o=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],o,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,o,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(o),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},ke.prototype.is=function(o){return Array.isArray(o)?o.indexOf(this.token)!==-1:this.entries[o].has(this.token)},[{read_array:function(){let o=null,c=!1,p=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),o=")"):(c=!0,o="]");let m=[];return this.next().token!==o&&(m=this.read_array_pair_list(c)),this.expect(o),this.next(),p(c,m)},read_array_pair_list:function(o){let c=this;return this.read_list(function(){return c.read_array_pair(o)},",",!0)},read_array_pair:function(o){if(!o&&this.token===")"||o&&this.token==="]")return;if(this.token===",")return this.node("noop")();let c=this.node("entry"),p=null,m=null,T=!1,I=!1;if(this.token==="&")this.next(),T=!0,m=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),I=!0,m=this.read_expr();else{let R=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),p=R,this.token==="&"?(this.next(),T=!0,m=this.read_variable(!0,!1)):m=this.read_expr()):m=R}return c(p,m,T,I)}},{read_class_declaration_statement:function(o){let c=this.node("class"),p=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let m=this.node("identifier"),T=this.text();this.next(),m=m(T);let I=this.read_extends_from(),R=this.read_implements_list();this.expect("{");let x=c(m,I,R,this.next().read_class_body(!0,!1),p);return o&&(x.attrGroups=o),x},read_class_modifiers:function(){let o=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,o.final_or_abstract,o.readonly]},read_class_modifier:function(o){return this.token===this.tok.T_READ_ONLY?(this.next(),o.readonly=1,o=this.read_class_modifier(o)):o.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),o.final_or_abstract=1,o=this.read_class_modifier(o)):o.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),o.final_or_abstract=2,o=this.read_class_modifier(o)),o},read_class_body:function(o,c){let p=[],m=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){p.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){p.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){p=p.concat(this.read_trait_use_statement());continue}if(c&&this.token===this.tok.T_CASE){let R=this.read_enum_case();this.expect(";")&&this.next(),p=p.concat(R);continue}this.token===this.tok.T_ATTRIBUTE&&(m=this.read_attr_list());let T=this.position(),I=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(o&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),I[0]=null,I[1]=0),this.token===this.tok.T_FUNCTION)p.push(this.read_function(!1,I,m,T)),m=[];else if(o&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){let R=this.read_variable_list(I,m);m=[],this.expect(";"),this.next(),p=p.concat(R)}else this.error([this.tok.T_CONST,...o?[this.tok.T_VARIABLE]:[],...c?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next();else{let R=this.read_constant_list(I,m);this.expect(";")&&this.next(),p=p.concat(R)}}return this.expect("}"),this.next(),p},read_variable_list:function(o,c){let p=this.node("propertystatement"),m=this.read_list(function(){let T=this.node("property"),I=!1;this.token===this.tok.T_READ_ONLY&&(I=!0,this.next());let[R,x]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let M=this.node("identifier"),D=this.text().substring(1);return this.next(),M=M(D),this.token===";"||this.token===","?T(M,null,I,R,x,c||[]):this.token==="="?T(M,this.next().read_expr(),I,R,x,c||[]):(this.expect([",",";","="]),T(M,null,R,x,c||[]))},",");return p(null,m,o)},read_constant_list:function(o,c){this.expect(this.tok.T_CONST)&&this.next();let p=this.node("classconstant"),m=this.read_list(function(){let T=this.node("constant"),I=null,R=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){I=this.node("identifier");let x=this.text();this.next(),I=I(x)}else this.expect("IDENTIFIER");return this.expect("=")&&(R=this.next().read_expr()),T(I,R)},",");return p(null,m,o,c||[])},read_member_flags:function(o){let c=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let p=0,m=0;do{switch(this.token){case this.tok.T_PUBLIC:p=0,m=0;break;case this.tok.T_PROTECTED:p=0,m=1;break;case this.tok.T_PRIVATE:p=0,m=2;break;case this.tok.T_STATIC:p=1,m=1;break;case this.tok.T_ABSTRACT:p=2,m=1;break;case this.tok.T_FINAL:p=2,m=2}o&&(p==0&&m==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),m=-1):p==2&&m==1&&(this.error(),m=-1)),c[p]!==-1?this.error():m!==-1&&(c[p]=m)}while(this.next().is("T_MEMBER_FLAGS"))}return c[1]==-1&&(c[1]=0),c[2]==-1&&(c[2]=0),c},read_optional_type:function(){let o=!1;this.token==="?"&&(o=!0,this.next());let c=this.read_types();if(o&&!c&&this.raiseError("Expecting a type definition combined with nullable operator"),!o&&!c)return[!1,null];if(this.token==="|"){c=[c];do{this.next();let p=this.read_type();if(!p){this.raiseError("Expecting a type definition");break}c.push(p)}while(this.token==="|")}return[o,c]},read_interface_declaration_statement:function(o){let c=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let p=this.node("identifier"),m=this.text();this.next(),p=p(m);let T=this.read_interface_extends_list();return this.expect("{"),c(p,T,this.next().read_interface_body(),o||[])},read_interface_body:function(){let o=[],c=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){o.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){o.push(this.read_doc_comment());continue}let p=this.position();c=this.read_attr_list();let m=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let T=this.read_constant_list(m,c);this.expect(";")&&this.next(),o=o.concat(T),c=[]}else if(this.token===this.tok.T_FUNCTION){let T=this.read_function_declaration(2,m,c,p);T.parseFlags(m),o.push(T),this.expect(";")&&this.next(),c=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),o},read_trait_declaration_statement:function(){let o=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let c=this.node("identifier"),p=this.text();return this.next(),c=c(p),this.expect("{"),o(c,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){let o=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let c=[this.read_namespace_name()],p=null;for(;this.token===",";)c.push(this.next().read_namespace_name());if(this.token==="{"){for(p=[];this.next().token!==this.EOF&&this.token!=="}";)p.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return o(c,p)},read_trait_use_alias:function(){let o=this.node(),c,p=null;if(this.is("IDENTIFIER")){c=this.node("identifier");let m=this.text();this.next(),c=c(m)}else if(c=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){p=c,c=this.node("identifier");let m=this.text();this.next(),c=c(m)}else this.expect(this.tok.T_STRING);else c=c.name;if(this.token===this.tok.T_INSTEADOF)return o("traitprecedence",p,c,this.next().read_name_list());if(this.token===this.tok.T_AS){let m=null,T=null;if(this.next().is("T_MEMBER_FLAGS")&&(m=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){T=this.node("identifier");let I=this.text();this.next(),T=T(I)}else m===!1&&this.expect(this.tok.T_STRING);return o("traitalias",p,c,T,m)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),o("traitalias",p,c,null,null)}},{read_comment:function(){let o=this.text(),c=this.ast.prepare(o.substring(0,2)==="/*"?"commentblock":"commentline",null,this),p=this.lexer.yylloc.first_offset,m=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),c=c(o),c.offset=p,this.prev=m,c},read_doc_comment:function(){let o=this.ast.prepare("commentblock",null,this),c=this.lexer.yylloc.first_offset,p=this.text(),m=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),o=o(p),o.offset=c,this.prev=m,o}},q,{read_enum_declaration_statement:function(o){let c=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let p=this.node("identifier"),m=this.text();this.next(),p=p(m);let T=this.read_enum_value_type(),I=this.read_implements_list();this.expect("{");let R=c(p,T,I,this.next().read_class_body(!1,!0));return o&&(R.attrGroups=o),R},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let o=this.node("enumcase"),c=this.node("identifier"),p=this.next().text();this.next(),c=c(p);let m=this.token==="="?this.next().read_expr():null;return this.expect(";"),o(c,m)}},Z,{read_if:function(){let o=this.node("if"),c=this.next().read_if_expr(),p=null,m=null,T=!1;if(this.token===":"){T=!0,this.next(),p=this.node("block");let I=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){m=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){m=this.read_else_short();break}I.push(this.read_inner_statement())}p=p(null,I),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else p=this.read_statement(),this.token===this.tok.T_ELSEIF?m=this.read_if():this.token===this.tok.T_ELSE&&(m=this.next().read_statement());return o(c,p,m,T)},read_if_expr:function(){this.expect("(")&&this.next();let o=this.read_expr();return this.expect(")")&&this.next(),o},read_elseif_short:function(){let o=null,c=this.node("if"),p=this.next().read_if_expr();this.expect(":")&&this.next();let m=this.node("block"),T=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){o=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){o=this.read_else_short();break}T.push(this.read_inner_statement())}return c(p,m(null,T),o,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let o=this.node("block"),c=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)c.push(this.read_inner_statement());return o(null,c)}},{read_while:function(){let o=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let c=null,p=null,m=!1;return this.expect("(")&&this.next(),c=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(m=!0,p=this.read_short_form(this.tok.T_ENDWHILE)):p=this.read_statement(),o(c,p,m)},read_do:function(){let o=this.node("do");this.expect(this.tok.T_DO)&&this.next();let c=null,p=null;return p=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),c=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),o(c,p)},read_for:function(){let o=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let c=[],p=[],m=[],T=null,I=!1;return this.expect("(")&&this.next(),this.token!==";"?(c=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(p=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(m=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(I=!0,T=this.read_short_form(this.tok.T_ENDFOR)):T=this.read_statement(),o(c,p,m,T,I)},read_foreach:function(){let o=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let c=null,p=null,m=null,T=null,I=!1;return this.expect("(")&&this.next(),c=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),m=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(p=m,m=this.next().read_foreach_variable())),p&&p.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(I=!0,T=this.read_short_form(this.tok.T_ENDFOREACH)):T=this.read_statement(),o(c,p,m,T,I)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let o=this.token==="[",c=this.node("list");this.next(),!o&&this.expect("(")&&this.next();let p=this.read_array_pair_list(o);return this.expect(o?"]":")")&&this.next(),c(p,o)}return this.read_variable(!1,!1)}},{read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}},{read_namespace:function(){let o=this.node("namespace"),c,p;return this.expect(this.tok.T_NAMESPACE)&&this.next(),p=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=p,this.token===";"?(this.currentNamespace=p,c=this.next().read_top_statements(),this.expect(this.EOF),o(p.name,c,!1)):this.token==="{"?(this.currentNamespace=p,c=this.next().read_top_statements(),this.expect("}")&&this.next(),c.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&c.push(this.node("noop")()),o(p.name,c,!0)):(this.error(["{",";"]),this.currentNamespace=p,c=this.read_top_statements(),this.expect(this.EOF),o(p,c,!1))},read_namespace_name:function(o){let c=this.node(),p,m=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:p=this.ast.name.RELATIVE_NAME,m=m.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:p=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:p=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(p=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return c("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),o||this.token!=="("){if(m.toLowerCase()==="parent")return c("parentreference",m);if(m.toLowerCase()==="self")return c("selfreference",m)}return c("name",m,p)},read_use_statement:function(){let o=this.node("usegroup"),c=[],p=null;this.expect(this.tok.T_USE)&&this.next();let m=this.read_use_type();return c.push(this.read_use_declaration(!1)),this.token===","?c=c.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(p=c[0].name,c=this.next().read_use_declarations(m===null),this.expect("}")&&this.next()),o=o(p,m,c),this.expect(";")&&this.next(),o},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(o){let c=this.node("useitem"),p=null;o&&(p=this.read_use_type());let m=this.read_namespace_name(),T=this.read_use_alias();return c(m.name,T,p)},read_use_declarations:function(o){let c=[this.read_use_declaration(o)];for(;this.token===",";){if(this.next(),o){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;c.push(this.read_use_declaration(o))}return c},read_use_alias:function(){let o=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let c=this.node("identifier"),p=this.text();this.next(),o=c(p)}return o},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}},de,Ue,{read_switch:function(){let o=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let c=this.read_expr();this.expect(")")&&this.next();let p=this.token===":";return o(c,this.read_switch_case_list(),p)},read_switch_case_list:function(){let o=null,c=this.node("block"),p=[];for(this.token==="{"?o="}":this.token===":"?o=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==o;)p.push(this.read_case_list(o));return p.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&p.push(this.node("noop")()),this.expect(o)&&this.next(),o===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),c(null,p)},read_case_list:function(o){let c=this.node("case"),p=null;this.token===this.tok.T_CASE?p=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let m=this.node("block"),T=[];for(;this.token!==this.EOF&&this.token!==o&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)T.push(this.read_inner_statement());return c(p,m(null,T))}},{read_try:function(){this.expect(this.tok.T_TRY);let o=this.node("try"),c=null,p=[],m=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let T=this.node("catch");this.next().expect("(")&&this.next();let I=this.read_list(this.read_namespace_name,"|",!1),R=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(R=this.read_variable(!0,!1)),this.expect(")"),p.push(T(this.next().read_statement(),I,R))}return this.token===this.tok.T_FINALLY&&(c=this.next().read_statement()),o(m,p,c)}},{read_short_form:function(o){let c=this.node("block"),p=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==o;)p.push(this.read_inner_statement());return p.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&p.push(this.node("noop")()),this.expect(o)&&this.next(),this.expectEndOfStatement(),c(null,p)},read_function_list:function(o,c){let p=[];do{if(this.token==c&&this.version>=703&&p.length>0){p.push(this.node("noop")());break}if(p.push(o.apply(this,[])),this.token!=c||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return p},read_list:function(o,c,p){let m=[];if(this.token==c&&(p&&m.push(typeof o=="function"?this.node("noop")():null),this.next()),typeof o=="function")do{let T=o.apply(this,[]);if(T&&m.push(T),this.token!=c)break}while(this.next().token!=this.EOF);else{if(!this.expect(o))return[];for(m.push(this.text());this.next().token!=this.EOF&&this.token==c&&this.next().token==o;)m.push(this.text())}return m},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(o){let c=this.node("byref");this.next(),c=c(null);let p=o();return p&&(this.ast.swapLocations(p,c,p,this),p.byref=!0),p},read_variable_declarations:function(){return this.read_list(function(){let o=this.node("staticvariable"),c=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let p=this.text().substring(1);this.next(),c=c(p,!1)}else c=c("#ERR",!1);return this.token==="="?o(c,this.next().read_expr()):c},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}},_t].forEach(function(o){for(let c in o){if(Object.prototype.hasOwnProperty.call(ke.prototype,c))throw new Error("Function "+c+" is already defined - collision");ke.prototype[c]=o[c]}});var fo=ke;let po={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},Ya={values:Object.entries(po).reduce((o,c)=>{let[p,m]=c;return{...o,[m]:p}},{}),names:po};var $a=Object.freeze(Ya),Mi=function(o,c,p){this.source=o,this.start=c,this.end=p};let Kr=function(o,c,p){this.kind=o,c&&(this.leadingComments=c),p&&(this.loc=p)};Kr.prototype.setTrailingComments=function(o){this.trailingComments=o},Kr.prototype.destroy=function(o){if(!o)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(o.leadingComments?o.leadingComments=Array.concat(this.leadingComments,o.leadingComments):o.leadingComments=this.leadingComments),this.trailingComments&&(o.trailingComments?o.trailingComments=Array.concat(this.trailingComments,o.trailingComments):o.trailingComments=this.trailingComments),o},Kr.prototype.includeToken=function(o){return this.loc&&(this.loc.end&&(this.loc.end.line=o.lexer.yylloc.last_line,this.loc.end.column=o.lexer.yylloc.last_column,this.loc.end.offset=o.lexer.offset),o.ast.withSource&&(this.loc.source=o.lexer._input.substring(this.loc.start.offset,o.lexer.offset))),this},Kr.extends=function(o,c){return c.prototype=Object.create(this.prototype),c.extends=this.extends,c.prototype.constructor=c,c.kind=o,c};var Xe=Kr;let Vi=Xe,ho="expression";var je=Vi.extends(ho,function(o,c,p){Vi.apply(this,[o||ho,c,p])});let Ns=je,mo="array";var Ka=Ns.extends(mo,function(o,c,p,m){Ns.apply(this,[mo,p,m]),this.items=c,this.shortForm=o});let go=je,To="arrowfunc";var Is=go.extends(To,function(o,c,p,m,T,I,R,x){go.apply(this,[To,R,x]),this.arguments=o,this.byref=c,this.body=p,this.type=m,this.nullable=T,this.isStatic=I||!1});let _o=je,yo="assign";var za=_o.extends(yo,function(o,c,p,m,T){_o.apply(this,[yo,m,T]),this.left=o,this.right=c,this.operator=p});let hi=je,bo="assignref";var Qa=hi.extends(bo,function(o,c,p,m){hi.apply(this,[bo,p,m]),this.left=o,this.right=c});let No=Xe,Cr="attribute";var mi=No.extends(Cr,function(o,c,p,m){No.apply(this,[Cr,p,m]),this.name=o,this.args=c});let Io=Xe,xo="attrgroup";var gi=Io.extends(xo,function(o,c,p){Io.apply(this,[xo,c,p]),this.attrs=o||[]});let xs=je,As="operation";var sr=xs.extends(As,function(o,c,p){xs.apply(this,[o||As,c,p])});let Ps=sr;var zr=Ps.extends("bin",function(o,c,p,m,T){Ps.apply(this,["bin",m,T]),this.type=o,this.left=c,this.right=p});let F=Xe,w="statement";var y=F.extends(w,function(o,c,p){F.apply(this,[o||w,c,p])});let L=y,B="block";var S=L.extends(B,function(o,c,p,m){L.apply(this,[o||B,p,m]),this.children=c.filter(Boolean)});let N=je,j="literal";var Y=N.extends(j,function(o,c,p,m,T){N.apply(this,[o||j,m,T]),this.value=c,p&&(this.raw=p)});let ce=Y,Te="boolean";var we=ce.extends(Te,function(o,c,p,m){ce.apply(this,[Te,o,c,p,m])});let Je=y,yt="break";var vt=Je.extends(yt,function(o,c,p){Je.apply(this,[yt,c,p]),this.level=o});let qe=je,Ti="byref";var Ao=qe.extends(Ti,function(o,c,p){qe.apply(this,[Ti,c,p]),this.what=o});let Xa=je,Bm="call";var Bv=Xa.extends(Bm,function(o,c,p,m){Xa.apply(this,[Bm,p,m]),this.what=o,this.arguments=c});let qm=y,Um="case";var qv=qm.extends(Um,function(o,c,p,m){qm.apply(this,[Um,p,m]),this.test=o,this.body=c});let jm=sr,Gm="cast";var Uv=jm.extends(Gm,function(o,c,p,m,T){jm.apply(this,[Gm,m,T]),this.type=o,this.raw=c,this.expr=p});let Wm=y,Hm="catch";var jv=Wm.extends(Hm,function(o,c,p,m,T){Wm.apply(this,[Hm,m,T]),this.body=o,this.what=c,this.variable=p});let Ym=y,$m="declaration",Km=Ym.extends($m,function(o,c,p,m){Ym.apply(this,[o||$m,p,m]),this.name=c});Km.prototype.parseFlags=function(o){this.isAbstract=o[2]===1,this.isFinal=o[2]===2,this.isReadonly=o[3]===1,this.kind!=="class"&&(o[0]===-1?this.visibility="":o[0]===null?this.visibility=null:o[0]===0?this.visibility="public":o[0]===1?this.visibility="protected":o[0]===2&&(this.visibility="private"),this.isStatic=o[1]===1)};var _i=Km;let zm=_i,Qm="class";var Gv=zm.extends(Qm,function(o,c,p,m,T,I,R){zm.apply(this,[Qm,o,I,R]),this.isAnonymous=!o,this.extends=c,this.implements=p,this.body=m,this.attrGroups=[],this.parseFlags(T)});let Xm=y,Jm="constantstatement";var Zm=Xm.extends(Jm,function(o,c,p,m){Xm.apply(this,[o||Jm,p,m]),this.constants=c});let eg=Zm,tg="classconstant",ng=eg.extends(tg,function(o,c,p,m,T,I){eg.apply(this,[o||tg,c,T,I]),this.parseFlags(p),this.attrGroups=m});ng.prototype.parseFlags=function(o){o[0]===-1?this.visibility="":o[0]===null?this.visibility=null:o[0]===0?this.visibility="public":o[0]===1?this.visibility="protected":o[0]===2&&(this.visibility="private"),this.final=o[2]===2};var Wv=ng;let rg=je,ig="clone";var Hv=rg.extends(ig,function(o,c,p){rg.apply(this,[ig,c,p]),this.what=o});let sg=je,og="closure";var Yv=sg.extends(og,function(o,c,p,m,T,I,R,x){sg.apply(this,[og,R,x]),this.uses=p,this.arguments=o,this.byref=c,this.type=m,this.nullable=T,this.isStatic=I||!1,this.body=null,this.attrGroups=[]});let ag=Xe;var od=ag.extends("comment",function(o,c,p,m){ag.apply(this,[o,p,m]),this.value=c});let lg=od,cg="commentblock";var $v=lg.extends(cg,function(o,c,p){lg.apply(this,[cg,o,c,p])});let ug=od,fg="commentline";var Kv=ug.extends(fg,function(o,c,p){ug.apply(this,[fg,o,c,p])});let dg=Xe,pg="constant";var zv=dg.extends(pg,function(o,c,p,m){dg.apply(this,[pg,p,m]),this.name=o,this.value=c});let hg=y,mg="continue";var Qv=hg.extends(mg,function(o,c,p){hg.apply(this,[mg,c,p]),this.level=o});let gg=S,Tg="declare",ac=gg.extends(Tg,function(o,c,p,m,T){gg.apply(this,[Tg,c,m,T]),this.directives=o,this.mode=p});ac.MODE_SHORT="short",ac.MODE_BLOCK="block",ac.MODE_NONE="none";var Xv=ac;let _g=Xe,yg="declaredirective";var Jv=_g.extends(yg,function(o,c,p,m){_g.apply(this,[yg,p,m]),this.key=o,this.value=c});let bg=y;var Zv=bg.extends("do",function(o,c,p,m){bg.apply(this,["do",p,m]),this.test=o,this.body=c});let Ng=y,Ig="echo";var eC=Ng.extends(Ig,function(o,c,p,m){Ng.apply(this,[Ig,p,m]),this.shortForm=c,this.expressions=o});let xg=je,Ag="empty";var tC=xg.extends(Ag,function(o,c,p){xg.apply(this,[Ag,c,p]),this.expression=o});let Pg=Y,vg="encapsed",Ja=Pg.extends(vg,function(o,c,p,m,T){Pg.apply(this,[vg,o,c,m,T]),this.type=p});Ja.TYPE_STRING="string",Ja.TYPE_SHELL="shell",Ja.TYPE_HEREDOC="heredoc",Ja.TYPE_OFFSET="offset";var nC=Ja;let Cg=je,Sg="encapsedpart";var rC=Cg.extends(Sg,function(o,c,p,m,T){Cg.apply(this,[Sg,m,T]),this.expression=o,this.syntax=c,this.curly=p});let Eg=je,Rg="entry";var iC=Eg.extends(Rg,function(o,c,p,m,T,I){Eg.apply(this,[Rg,T,I]),this.key=o,this.value=c,this.byRef=p,this.unpack=m});let kg=_i,wg="enum";var sC=kg.extends(wg,function(o,c,p,m,T,I){kg.apply(this,[wg,o,T,I]),this.valueType=c,this.implements=p,this.body=m,this.attrGroups=[]});let Og=Xe,Lg="enumcase";var oC=Og.extends(Lg,function(o,c,p,m){Og.apply(this,[Lg,p,m]),this.name=o,this.value=c});let Dg=Xe,Fg="error";var aC=Dg.extends(Fg,function(o,c,p,m,T,I){Dg.apply(this,[Fg,T,I]),this.message=o,this.token=c,this.line=p,this.expected=m});let Mg=je,Vg="eval";var lC=Mg.extends(Vg,function(o,c,p){Mg.apply(this,[Vg,c,p]),this.source=o});let Bg=je,qg="exit";var cC=Bg.extends(qg,function(o,c,p,m){Bg.apply(this,[qg,p,m]),this.expression=o,this.useDie=c});let Ug=y,jg="expressionstatement";var uC=Ug.extends(jg,function(o,c,p){Ug.apply(this,[jg,c,p]),this.expression=o});let Gg=y;var fC=Gg.extends("for",function(o,c,p,m,T,I,R){Gg.apply(this,["for",I,R]),this.init=o,this.test=c,this.increment=p,this.shortForm=T,this.body=m});let Wg=y,Hg="foreach";var dC=Wg.extends(Hg,function(o,c,p,m,T,I,R){Wg.apply(this,[Hg,I,R]),this.source=o,this.key=c,this.value=p,this.shortForm=T,this.body=m});let Yg=_i,$g="function";var Kg=Yg.extends($g,function(o,c,p,m,T,I,R){Yg.apply(this,[$g,o,I,R]),this.arguments=c,this.byref=p,this.type=m,this.nullable=T,this.body=null,this.attrGroups=[]});let zg=y,Qg="global";var pC=zg.extends(Qg,function(o,c,p){zg.apply(this,[Qg,c,p]),this.items=o});let Xg=y,Jg="goto";var hC=Xg.extends(Jg,function(o,c,p){Xg.apply(this,[Jg,c,p]),this.label=o});let Zg=y,eT="halt";var mC=Zg.extends(eT,function(o,c,p){Zg.apply(this,[eT,c,p]),this.after=o});let tT=Xe,nT="identifier";var gC=tT.extends(nT,function(o,c,p){tT.apply(this,[nT,c,p]),this.name=o});let rT=y;var TC=rT.extends("if",function(o,c,p,m,T,I){rT.apply(this,["if",T,I]),this.test=o,this.body=c,this.alternate=p,this.shortForm=m});let iT=je,sT="include";var _C=iT.extends(sT,function(o,c,p,m,T){iT.apply(this,[sT,m,T]),this.once=o,this.require=c,this.target=p});let oT=Y,aT="inline";var yC=oT.extends(aT,function(o,c,p,m){oT.apply(this,[aT,o,c,p,m])});let lT=_i,cT="interface";var bC=lT.extends(cT,function(o,c,p,m,T,I){lT.apply(this,[cT,o,T,I]),this.extends=c,this.body=p,this.attrGroups=m});let uT=_i,fT="intersectiontype";var NC=uT.extends(fT,function(o,c,p){uT.apply(this,[fT,null,c,p]),this.types=o});let dT=je,pT="isset";var IC=dT.extends(pT,function(o,c,p){dT.apply(this,[pT,c,p]),this.variables=o});let hT=y,mT="label";var xC=hT.extends(mT,function(o,c,p){hT.apply(this,[mT,c,p]),this.name=o});let gT=je,TT="list";var AC=gT.extends(TT,function(o,c,p,m){gT.apply(this,[TT,p,m]),this.items=o,this.shortForm=c});let _T=je,yT="lookup";var Za=_T.extends(yT,function(o,c,p,m,T){_T.apply(this,[o||yT,m,T]),this.what=c,this.offset=p});let bT=Y,NT="magic";var PC=bT.extends(NT,function(o,c,p,m){bT.apply(this,[NT,o,c,p,m])});let IT=je,xT="match";var vC=IT.extends(xT,function(o,c,p,m){IT.apply(this,[xT,p,m]),this.cond=o,this.arms=c});let AT=je,PT="matcharm";var CC=AT.extends(PT,function(o,c,p,m){AT.apply(this,[PT,p,m]),this.conds=o,this.body=c});let vT=Kg,CT="method";var SC=vT.extends(CT,function(){vT.apply(this,arguments),this.kind=CT});let ST=Xe,ET="reference";var Po=ST.extends(ET,function(o,c,p){ST.apply(this,[o||ET,c,p])});let RT=Po,kT="name",el=RT.extends(kT,function(o,c,p,m){RT.apply(this,[kT,p,m]),this.name=o.replace(/\\$/,""),this.resolution=c});el.UNQUALIFIED_NAME="uqn",el.QUALIFIED_NAME="qn",el.FULL_QUALIFIED_NAME="fqn",el.RELATIVE_NAME="rn";var EC=el;let wT=S,OT="namespace";var RC=wT.extends(OT,function(o,c,p,m,T){wT.apply(this,[OT,c,m,T]),this.name=o,this.withBrackets=p||!1});let LT=je,DT="namedargument";var kC=LT.extends(DT,function(o,c,p,m){LT.apply(this,[DT,p,m]),this.name=o,this.value=c});let FT=je;var wC=FT.extends("new",function(o,c,p,m){FT.apply(this,["new",p,m]),this.what=o,this.arguments=c});let MT=Xe,VT="noop";var OC=MT.extends(VT,function(o,c){MT.apply(this,[VT,o,c])});let BT=Y,qT="nowdoc";var LC=BT.extends(qT,function(o,c,p,m,T){BT.apply(this,[qT,o,c,m,T]),this.label=p});let UT=Xe,jT="nullkeyword";var DC=UT.extends(jT,function(o,c,p){UT.apply(this,[jT,c,p]),this.raw=o});let GT=Za,WT="nullsafepropertylookup";var FC=GT.extends(WT,function(o,c,p,m){GT.apply(this,[WT,o,c,p,m])});let HT=Y,YT="number";var MC=HT.extends(YT,function(o,c,p,m){HT.apply(this,[YT,o,c,p,m])});let $T=Za,KT="offsetlookup";var VC=$T.extends(KT,function(o,c,p,m){$T.apply(this,[KT,o,c,p,m])});let zT=_i,QT="parameter";var BC=zT.extends(QT,function(o,c,p,m,T,I,R,x,M,D){zT.apply(this,[QT,o,M,D]),this.value=p,this.type=c,this.byref=m,this.variadic=T,this.readonly=I,this.nullable=R,this.flags=x||0,this.attrGroups=[]});let XT=Po,JT="parentreference";var qC=XT.extends(JT,function(o,c,p){XT.apply(this,[JT,c,p]),this.raw=o});let ZT=sr,e_="post";var UC=ZT.extends(e_,function(o,c,p,m){ZT.apply(this,[e_,p,m]),this.type=o,this.what=c});let t_=sr;var jC=t_.extends("pre",function(o,c,p,m){t_.apply(this,["pre",p,m]),this.type=o,this.what=c});let n_=je,r_="print";var GC=n_.extends(r_,function(o,c,p){n_.apply(this,[r_,c,p]),this.expression=o});let i_=S,s_="program";var WC=i_.extends(s_,function(o,c,p,m,T,I){i_.apply(this,[s_,o,T,I]),this.errors=c,p&&(this.comments=p),m&&(this.tokens=m)});let o_=y,a_="property";var HC=o_.extends(a_,function(o,c,p,m,T,I,R,x){o_.apply(this,[a_,R,x]),this.name=o,this.value=c,this.readonly=p,this.nullable=m,this.type=T,this.attrGroups=I});let l_=Za,c_="propertylookup";var YC=l_.extends(c_,function(o,c,p,m){l_.apply(this,[c_,o,c,p,m])});let u_=y,f_="propertystatement",d_=u_.extends(f_,function(o,c,p,m,T){u_.apply(this,[f_,m,T]),this.properties=c,this.parseFlags(p)});d_.prototype.parseFlags=function(o){o[0]===-1?this.visibility="":o[0]===null?this.visibility=null:o[0]===0?this.visibility="public":o[0]===1?this.visibility="protected":o[0]===2&&(this.visibility="private"),this.isStatic=o[1]===1};var $C=d_;let p_=je,h_="retif";var KC=p_.extends(h_,function(o,c,p,m,T){p_.apply(this,[h_,m,T]),this.test=o,this.trueExpr=c,this.falseExpr=p});let m_=y,g_="return";var zC=m_.extends(g_,function(o,c,p){m_.apply(this,[g_,c,p]),this.expr=o});let T_=Po,__="selfreference";var QC=T_.extends(__,function(o,c,p){T_.apply(this,[__,c,p]),this.raw=o});let y_=je,b_="silent";var XC=y_.extends(b_,function(o,c,p){y_.apply(this,[b_,c,p]),this.expr=o});let N_=y,I_="static";var JC=N_.extends(I_,function(o,c,p){N_.apply(this,[I_,c,p]),this.variables=o});let x_=Xe,A_="staticvariable";var ZC=x_.extends(A_,function(o,c,p,m){x_.apply(this,[A_,p,m]),this.variable=o,this.defaultValue=c});let P_=Za,v_="staticlookup";var eS=P_.extends(v_,function(o,c,p,m){P_.apply(this,[v_,o,c,p,m])});let C_=Po,S_="staticreference";var tS=C_.extends(S_,function(o,c,p){C_.apply(this,[S_,c,p]),this.raw=o});let E_=Y,R_="string";var nS=E_.extends(R_,function(o,c,p,m,T,I){E_.apply(this,[R_,c,m,T,I]),this.unicode=p,this.isDoubleQuote=o});let k_=y,w_="switch";var rS=k_.extends(w_,function(o,c,p,m,T){k_.apply(this,[w_,m,T]),this.test=o,this.body=c,this.shortForm=p});let O_=y,L_="throw";var iS=O_.extends(L_,function(o,c,p){O_.apply(this,[L_,c,p]),this.what=o});let D_=_i,F_="trait";var sS=D_.extends(F_,function(o,c,p,m){D_.apply(this,[F_,o,p,m]),this.body=c});let M_=Xe,V_="traitalias";var oS=M_.extends(V_,function(o,c,p,m,T,I){M_.apply(this,[V_,T,I]),this.trait=o,this.method=c,this.as=p,this.visibility="",m&&(m[0]===0?this.visibility="public":m[0]===1?this.visibility="protected":m[0]===2&&(this.visibility="private"))});let B_=Xe,q_="traitprecedence";var aS=B_.extends(q_,function(o,c,p,m,T){B_.apply(this,[q_,m,T]),this.trait=o,this.method=c,this.instead=p});let U_=Xe,j_="traituse";var lS=U_.extends(j_,function(o,c,p,m){U_.apply(this,[j_,p,m]),this.traits=o,this.adaptations=c});let G_=y;var cS=G_.extends("try",function(o,c,p,m,T){G_.apply(this,["try",m,T]),this.body=o,this.catches=c,this.always=p});let W_=Po,H_="typereference",Y_=W_.extends(H_,function(o,c,p,m){W_.apply(this,[H_,p,m]),this.name=o,this.raw=c});Y_.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var uS=Y_;let $_=sr,K_="unary";var fS=$_.extends(K_,function(o,c,p,m){$_.apply(this,[K_,p,m]),this.type=o,this.what=c});let z_=_i,Q_="uniontype";var dS=z_.extends(Q_,function(o,c,p){z_.apply(this,[Q_,null,c,p]),this.types=o});let X_=y,J_="unset";var pS=X_.extends(J_,function(o,c,p){X_.apply(this,[J_,c,p]),this.variables=o});let Z_=y,ey="usegroup";var hS=Z_.extends(ey,function(o,c,p,m,T){Z_.apply(this,[ey,m,T]),this.name=o,this.type=c,this.items=p});let ty=y,ny="useitem",ad=ty.extends(ny,function(o,c,p,m,T){ty.apply(this,[ny,m,T]),this.name=o,this.alias=c,this.type=p});ad.TYPE_CONST="const",ad.TYPE_FUNCTION="function";var mS=ad;let ry=je,iy="variable";var gS=ry.extends(iy,function(o,c,p,m){ry.apply(this,[iy,p,m]),this.name=o,this.curly=c||!1});let sy=je,oy="variadic";var TS=sy.extends(oy,function(o,c,p){sy.apply(this,[oy,c,p]),this.what=o});let ay=Xe,ly="variadicplaceholder";var _S=ay.extends(ly,function(o,c){ay.apply(this,[ly,o,c])});let cy=y,uy="while";var yS=cy.extends(uy,function(o,c,p,m,T){cy.apply(this,[uy,m,T]),this.test=o,this.body=c,this.shortForm=p});let fy=je,dy="yield";var bS=fy.extends(dy,function(o,c,p,m){fy.apply(this,[dy,p,m]),this.value=o,this.key=c});let py=je,hy="yieldfrom";var NS=py.extends(hy,function(o,c,p){py.apply(this,[hy,c,p]),this.value=o});let IS=Mi,xS=C,en=function(o,c){this.withPositions=o,this.withSource=c};en.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(o,c){o.forEach(function(p){en.precedence[p]=c+1})}),en.prototype.isRightAssociative=function(o){return o==="**"||o==="??"},en.prototype.swapLocations=function(o,c,p,m){this.withPositions&&(o.loc.start=c.loc.start,o.loc.end=p.loc.end,this.withSource&&(o.loc.source=m.lexer._input.substring(o.loc.start.offset,o.loc.end.offset)))},en.prototype.resolveLocations=function(o,c,p,m){this.withPositions&&(o.loc.start.offset>c.loc.start.offset&&(o.loc.start=c.loc.start),o.loc.end.offset<p.loc.end.offset&&(o.loc.end=p.loc.end),this.withSource&&(o.loc.source=m.lexer._input.substring(o.loc.start.offset,o.loc.end.offset)))},en.prototype.resolvePrecedence=function(o,c){let p,m,T;return o.kind==="call"?this.resolveLocations(o,o.what,o,c):o.kind==="propertylookup"||o.kind==="staticlookup"||o.kind==="offsetlookup"&&o.offset?this.resolveLocations(o,o.what,o.offset,c):o.kind==="bin"?o.right&&!o.right.parenthesizedExpression&&(o.right.kind==="bin"?(m=en.precedence[o.type],T=en.precedence[o.right.type],m&&T&&T<=m&&(o.type!==o.right.type||!this.isRightAssociative(o.type))&&(p=o.right,o.right=o.right.left,this.swapLocations(o,o.left,o.right,c),p.left=this.resolvePrecedence(o,c),this.swapLocations(p,p.left,p.right,c),o=p)):o.right.kind==="retif"&&(m=en.precedence[o.type],T=en.precedence["?"],m&&T&&T<=m&&(p=o.right,o.right=o.right.test,this.swapLocations(o,o.left,o.right,c),p.test=this.resolvePrecedence(o,c),this.swapLocations(p,p.test,p.falseExpr,c),o=p))):o.kind!=="silent"&&o.kind!=="cast"||!o.expr||o.expr.parenthesizedExpression?o.kind==="unary"?o.what&&!o.what.parenthesizedExpression&&(o.what.kind==="bin"?(p=o.what,o.what=o.what.left,this.swapLocations(o,o,o.what,c),p.left=this.resolvePrecedence(o,c),this.swapLocations(p,p.left,p.right,c),o=p):o.what.kind==="retif"&&(p=o.what,o.what=o.what.test,this.swapLocations(o,o,o.what,c),p.test=this.resolvePrecedence(o,c),this.swapLocations(p,p.test,p.falseExpr,c),o=p)):o.kind==="retif"?o.falseExpr&&o.falseExpr.kind==="retif"&&!o.falseExpr.parenthesizedExpression&&(p=o.falseExpr,o.falseExpr=p.test,this.swapLocations(o,o.test,o.falseExpr,c),p.test=this.resolvePrecedence(o,c),this.swapLocations(p,p.test,p.falseExpr,c),o=p):o.kind==="assign"?o.right&&o.right.kind==="bin"&&!o.right.parenthesizedExpression&&(m=en.precedence["="],T=en.precedence[o.right.type],m&&T&&T<m&&(p=o.right,o.right=o.right.left,p.left=o,this.swapLocations(p,p.left,o.right,c),o=p)):o.kind==="expressionstatement"&&this.swapLocations(o,o.expression,o,c):o.expr.kind==="bin"?(p=o.expr,o.expr=o.expr.left,this.swapLocations(o,o,o.expr,c),p.left=this.resolvePrecedence(o,c),this.swapLocations(p,p.left,p.right,c),o=p):o.expr.kind==="retif"&&(p=o.expr,o.expr=o.expr.test,this.swapLocations(o,o,o.expr,c),p.test=this.resolvePrecedence(o,c),this.swapLocations(p,p.test,p.falseExpr,c),o=p),o},en.prototype.prepare=function(o,c,p){let m=null;(this.withPositions||this.withSource)&&(m=p.position());let T=this,I=function(){let R=null,x=Array.prototype.slice.call(arguments);if(x.push(c),T.withPositions||T.withSource){let A=null;T.withSource&&(A=p.lexer._input.substring(m.offset,p.prev[2])),R=new IS(A,m,new xS(p.prev[0],p.prev[1],p.prev[2])),x.push(R)}o||(o=x.shift());let M=T[o];if(typeof M!="function")throw new Error('Undefined node "'+o+'"');let D=Object.create(M.prototype);return M.apply(D,x),I.instance=D,I.trailingComments&&(D.trailingComments=I.trailingComments),typeof I.postBuild=="function"&&I.postBuild(D),p.debug&&delete T.stack[I.stackUid],T.resolvePrecedence(D,p)};return p.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:m,stack:new Error().stack.split(`
`).slice(3,5)},I.stackUid=this.stackUid),I.setTrailingComments=function(R){I.instance?I.instance.setTrailingComments(R):I.trailingComments=R},I.destroy=function(R){c&&(R?R.leadingComments?R.leadingComments=c.concat(R.leadingComments):R.leadingComments=c:p._docIndex=p._docs.length-c.length),p.debug&&delete T.stack[I.stackUid]},I},en.prototype.checkNodes=function(){let o=[];for(let c in this.stack)Object.prototype.hasOwnProperty.call(this.stack,c)&&(this.stack[c].key=c,o.push(this.stack[c]));return this.stack={},o},[Ka,Is,za,Qa,mi,gi,zr,S,we,vt,Ao,Bv,qv,Uv,jv,Gv,Wv,Hv,Yv,od,$v,Kv,zv,Zm,Qv,_i,Xv,Jv,Zv,eC,tC,nC,rC,iC,sC,oC,aC,lC,cC,je,uC,fC,dC,Kg,pC,hC,mC,gC,TC,_C,yC,bC,NC,IC,xC,AC,Y,Za,PC,vC,CC,SC,EC,RC,kC,wC,Xe,OC,LC,DC,FC,MC,VC,sr,BC,qC,UC,jC,GC,WC,HC,YC,$C,Po,KC,zC,QC,XC,y,JC,ZC,eS,tS,nS,rS,iS,sS,oS,aS,lS,cS,uS,fS,dS,pS,hS,mS,gS,TS,_S,yS,bS,NS].forEach(function(o){en.prototype[o.kind]=o});let my=E,gy=fo,Ty=$a,_y=en;function ld(o,c){let p=Object.keys(o),m=p.length;for(;m--;){let T=p[m],I=o[T];I===null?delete c[T]:typeof I=="function"?c[T]=I.bind(c):Array.isArray(I)?c[T]=Array.isArray(c[T])?c[T].concat(I):I:c[T]=typeof I=="object"&&typeof c[T]=="object"?ld(I,c[T]):I}return c}let An=function(o){if(typeof this=="function")return new this(o);if(this.tokens=Ty,this.lexer=new my(this),this.ast=new _y,this.parser=new gy(this.lexer,this.ast),o&&typeof o=="object"){if(o.parser&&(o.lexer||(o.lexer={}),o.parser.version)){if(typeof o.parser.version=="string"){let c=o.parser.version.split(".");if(c=100*parseInt(c[0])+parseInt(c[1]),isNaN(c))throw new Error("Bad version number : "+o.parser.version);o.parser.version=c}else if(typeof o.parser.version!="number")throw new Error("Expecting a number for version");if(o.parser.version<500||o.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}ld(o,this),this.lexer.version=this.parser.version}},cd=function(o){return typeof o.write=="function"?o.toString():o};An.create=function(o){return new An(o)},An.parseEval=function(o,c){return new An(c).parseEval(o)},An.prototype.parseEval=function(o){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,o=cd(o),this.parser.parse(o,"eval")},An.parseCode=function(o,c,p){return typeof c!="object"||p||(p=c,c="unknown"),new An(p).parseCode(o,c)},An.prototype.parseCode=function(o,c){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,o=cd(o),this.parser.parse(o,c)},An.tokenGetAll=function(o,c){return new An(c).tokenGetAll(o)},An.prototype.tokenGetAll=function(o){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,o=cd(o);let c=this.lexer.EOF,p=this.tokens.values;this.lexer.setInput(o);let m=this.lexer.lex()||c,T=[];for(;m!=c;){let I=this.lexer.yytext;Object.prototype.hasOwnProperty.call(p,m)&&(I=[p[m],I,this.lexer.yylloc.first_line]),T.push(I),m=this.lexer.lex()||c}return T},a.exports=An,a.exports.tokens=Ty,a.exports.lexer=my,a.exports.AST=_y,a.exports.parser=gy,a.exports.combine=ld,a.exports.Engine=An,a.exports.default=An;var AS=r(a.exports);function yy(o,c){let p=c&&c.parentParser==="markdown";if(!o&&p)return"";o=o.replace(/\?>\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);let m=new AS({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),T=o.indexOf("<?php")!==-1,I=p&&!T,R;try{R=I?m.parseEval(o):m.parseCode(o)}catch(x){throw x instanceof SyntaxError&&"lineNumber"in x&&(x.loc={start:{line:x.lineNumber,column:x.columnNumber}},delete x.lineNumber,delete x.columnNumber),x}return R.extra={parseAsEval:I},R.comments.forEach(x=>{x.value[x.value.length-1]===`
`&&(x.value=x.value.slice(0,-1),x.loc.end.offset=x.loc.end.offset-1)}),R}let by=o=>c=>c.loc?.[o]?.offset,Pn=by("start"),st=by("end"),{hasNewline:PS,skipEverythingButNewLine:vS,skipNewline:CS}=e.util;function Ny(o){return o.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")}let SS=new Map([["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].flatMap((o,c)=>o.map(p=>[p,c])));function lc(o){return SS.get(o)}let Iy=["==","!=","===","!==","<>","<=>"],cc=["*","/","%"],ud=[">>","<<"];function fd(o,c){return lc(c)===lc(o)&&o!=="**"&&(!Iy.includes(o)||!Iy.includes(c))&&!(c==="%"&&cc.includes(o)||o==="%"&&cc.includes(c))&&(c===o||!cc.includes(c)||!cc.includes(o))&&(!ud.includes(o)||!ud.includes(c))}function tl(o){let c=o.children||o.body||o.adaptations;return Array.isArray(c)?c:null}function Sr(o){return o.length>0?o[o.length-1]:null}function nl(o){let{node:c}=o;if(c.kind==="program"){let m=tl(c);return!(!m||m.length===0)&&m[0].kind==="inline"}if(c.kind==="switch"){if(!c.body)return!1;let m=tl(c.body);if(m.length===0)return!1;let[T]=m;if(!T.body)return!1;let I=tl(T.body);return I.length!==0&&I[0].kind==="inline"}let p=function(m){let{body:T}=m;return T?(T.kind==="block"&&(T=T.children),T[0]):null}(c);return!!p&&p.kind==="inline"}function dd(o){return o.kind==="nowdoc"||o.kind==="encapsed"&&o.type==="heredoc"}function uc(o){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=o.getNode(c),m=o.getNode(c+1),T=o.getNode(c+2);if(!m)return!1;if(T&&["call","new","echo"].includes(T.kind)&&!["call","array"].includes(m.kind)||m.kind==="parameter"){let I=T.arguments.length-1;return T.arguments.indexOf(m)!==I}if(T&&T.kind==="for"){let I=T.init.indexOf(m);if(I!==-1)return I!==T.init.length-1;let R=T.test.indexOf(m);if(R!==-1)return R!==T.test.length-1;let x=T.increment.indexOf(m);if(x!==-1)return x!==T.increment.length-1}if(m.kind==="bin")return m.left===p||uc(o,c+1);if(m.kind==="case"&&m.test===p)return!0;if(m.kind==="staticvariable"){let I=T.variables.length-1;return T.variables.indexOf(m)!==I}if(m.kind==="entry"){if(m.key===p)return!0;let I=T.items.length-1;return T.items.indexOf(m)!==I}if(["call","new"].includes(m.kind)){let I=m.arguments.length-1;return m.arguments.indexOf(p)!==I}if(m.kind==="echo"){let I=m.expressions.length-1;return m.expressions.indexOf(p)!==I}if(m.kind==="array"){let I=m.items.length-1;return m.items.indexOf(p)!==I}return m.kind==="retif"&&uc(o,c+1)}function xy(o){let c=o.replace(/^\\/,"");return c.indexOf("\\")!==-1?c:o}function Un(o){return o.comments&&o.comments.some(c=>!c.leading&&!c.trailing)}function un(o){return o.kind==="propertylookup"||o.kind==="nullsafepropertylookup"||o.kind==="staticlookup"||o.kind==="offsetlookup"}function ES(o){let{node:c}=o;return!["try","catch"].includes(c.kind)&&nl(o)}function RS(o){let{node:c}=o;if(["try","catch"].includes(c.kind))return!0;if(c.kind==="switch"){let p=tl(c.body);if(p.length===0)return!0;let m=Sr(p);if(!m.body)return!0;let T=tl(m.body);return T.length===0||T[0].kind!=="inline"}return!nl(o)}function pd(o){return["program","declare","namespace"].includes(o.kind)}function hd(o){return["name","parentreference","selfreference","staticreference"].includes(o.kind)}function vo(o){return o.kind==="bin"&&["||","&&"].includes(o.type)?"logical":o.kind}function Ay(o){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",{node:p}=o;return p[c]&&p[c].children&&p[c].children.length===0&&(!p[c].comments||p[c].comments.length===0)}function kS(o,c){let p=Pn(c);return p=vS(o,p),p=CS(o,p),PS(o,p)}function Py(o){return o.kind==="nowdoc"||o.kind==="encapsed"&&o.type==="heredoc"||o.kind==="entry"&&(o.value.kind==="nowdoc"||o.value.kind==="encapsed"&&o.value.type==="heredoc")}function md(o,c){let p=function(m,T){let I=[].concat(T),R,x=-1;for(;R=m.getParentNode(++x);)if(I.indexOf(R.kind)!==-1)return x;return-1}(o,c);return p===-1?null:o.getParentNode(p)}let vy=new Map(["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].map(o=>[o.toLowerCase(),o]));function Cy(o){let c=o.toLowerCase();return vy.has(c)?vy.get(c):o}let{addLeadingComment:Er,addDanglingComment:vn,addTrailingComment:Rr,skipNewline:wS,hasNewline:fc,hasNewlineInRange:OS,getNextNonSpaceNonCommentCharacterIndex:rl,isNextLineEmpty:LS,isPreviousLineEmpty:DS}=e.util,{join:Sy,indent:FS,hardline:Qr,cursor:Ey,lineSuffix:Ry,breakParent:MS}=e.doc.builders;function dc(o,c){let{children:p}=o;p.length===0?vn(o,c):Er(p[0],c)}function gd(o,c){o.kind==="block"?dc(o,c):Er(o,c)}function ky(o,c,p,m,T){let I=rl(o,st(T)),R=o.charAt(I);return c&&c.kind==="identifier"&&p&&(p.kind==="function"||p.kind==="method")&&R===")"?(Rr(p,T),!0):!(!p||p.kind!=="function"&&p.kind!=="method"||!m||m.kind!=="block")&&(dc(m,T),!0)}function Td(o,c,p,m,T){if(!p||p.kind!=="if"||!m)return!1;let I=rl(o,st(T));return o.charAt(I)===")"?(Rr(c,T),!0):c===p.body&&m===p.alternate?(vn(p,T),!0):m.kind==="if"?(gd(m.body,T),!0):p.body===m&&(Er(m,T),!0)}function _d(o,c,p){if(o&&["class","interface","trait"].includes(o.kind)){if(o.__parent_new_arguments?.includes(c))return!1;if(c&&o.extends){if(Array.isArray(o.extends)){if(o.extends.some(m=>{if(c&&c===m)return vn(c,p),!0}))return!0}else if(c===o.extends)return vn(c,p),!0}if(c&&o.implements&&o.implements.some(m=>{if(c&&c===m)return vn(c,p),!0}))return!0;if(!(o.body&&o.body.length>0))return vn(o,p),!0}return!!(c&&c.kind==="class"&&c.isAnonymous&&c.leadingComments&&p.kind==="commentblock")}function yd(o,c,p,m){if(c&&(c.kind==="function"||c.kind==="method")){let T=0;for(let x=0;x<c.arguments.length;x++)T=st(c.arguments[x])>T?st(c.arguments[x]):T;let I=c.body&&Pn(m)>T&&st(m)<Pn(c.body),R=rl(o,st(m));if(c.type&&I&&o.charAt(R)!==")")return st(m)<Pn(c.type)?(vn(c.type,m),!0):(Rr(c.type,m),!0)}return!1}function bd(o,c,p,m,T){return!(!p||!["function","method","parameter"].includes(p.kind))&&c.kind==="typereference"&&m.kind==="identifier"&&(Rr(c,T),!0)}function wy(o,c){return!(!o||!["label","goto"].includes(o.kind))&&(Rr(o,c),!0)}function Nd(o,c,p,m){return p&&p.kind==="inline"?(p.leadingComments||(p.leadingComments=[]),p.leadingComments.includes(m)||p.leadingComments.push(m),!0):!(o||p||!c||c.kind!=="inline")&&(vn(c,m),!0)}function Oy(o,c,p){return!(!o||o.kind!=="try"||!c)&&(c.kind==="block"?(dc(c,p),!0):c.kind==="try"?(gd(c.always,p),!0):c.kind==="catch"&&(gd(c.body,p),!0))}function Ly(o,c,p,m){return p||c||!o||o.kind!=="namespace"||o.withBrackets?!(c||!o||o.kind!=="namespace"||o.withBrackets)&&(vn(o,m),!0):(Rr(o,m),!0)}function Dy(o,c,p,m){return!(!o||o.kind!=="declare")&&(!c||c.kind!=="noop")&&(p&&o.directives[0]!==p?!(!p||!c)&&(Er(p,m),!0):(o.mode==="none"?Rr(o,m):vn(o,m),!0))}function Id(o,c,p,m,T){if(!p||p.kind!=="while"||!m)return!1;let I=rl(o,st(T));return o.charAt(I)===")"?(Rr(c,T),!0):m.kind==="block"&&(dc(m,T),!0)}function xd(o,c){return o.node.printed=!0,c.printer.printComment(o,c)}function Ct(o,c,p,m){let T=[],I=o.getValue();return I&&I.comments?(o.each(()=>{let R=o.node;!R||R.leading||R.trailing||m&&!m(R)||T.push(xd(o,c))},"comments"),T.length===0?"":p?Sy(Qr,T):FS([Qr,Sy(Qr,T)])):""}function il(o){return o.comments&&o.comments.some(c=>c.leading)}function sl(o){return o.comments&&o.comments.some(c=>c.trailing)}function vs(o,c){let p=[];return o.forEach((m,T,I)=>{m.printed=!0;let R=I.length===T+1;p.push(m.value),R||p.push(Qr),LS(c.originalText,st(m))&&!R&&p.push(Qr)}),p}function Ad(o){return o.kind==="commentblock"}function Fy(o,c,p){let{node:m}=o;return m&&m===c.cursorNode?[Ey,p,Ey]:p}function Pd(o,c,p,m){let{node:T}=o,I=c(o),R=T&&T.comments;if(!R||R.length===0)return Fy(o,p,I);let x=[],M=[m?";":"",I];return o.each(D=>{let{node:A}=D,{leading:U,trailing:$}=A;if(U){let K=function(ne,ae,Ne){let ge=xd(ne,Ne);if(!ge)return"";let Ae=ne.node;return Ne.printer.isBlockComment&&Ne.printer.isBlockComment(Ae)?[ge,fc(Ne.originalText,st(Ae))?Qr:" "]:[ge,Qr]}(o,0,p);if(!K)return;x.push(K);let G=p.originalText;fc(G,wS(G,st(A)))&&x.push(Qr)}else $&&M.push(function(K,G,ne){let ae=xd(K,ne);if(!ae)return"";let Ne=K.node,ge=ne.printer.isBlockComment&&ne.printer.isBlockComment(Ne);if(fc(ne.originalText,Pn(Ne),{backwards:!0})){let Ae=DS(ne.originalText,Pn(Ne));return Ry([Qr,Ae?Qr:"",ae])}return ge?[" ",ae]:[Ry([" ",ae]),ge?"":MS]}(o,0,p))},"comments"),Fy(o,p,x.concat(M))}function My(o){let{parent:c}=o;if(!c)return!1;let{key:p,node:m}=o;if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(c.kind))return!1;switch(m.kind){case"pre":case"post":if(c.kind==="unary")return m.kind==="pre"&&(m.type==="+"&&c.type==="+"||m.type==="-"&&c.type==="-");case"unary":switch(c.kind){case"unary":return m.type===c.type&&(m.type==="+"||m.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return p==="what";case"bin":return c.type==="**"&&p==="left";default:return!1}case"bin":switch(c.kind){case"assign":case"retif":return["and","xor","or"].includes(m.type);case"silent":case"cast":return m.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return p==="what";case"bin":{let I=c.type,R=lc(I),x=m.type,M=lc(x);return R>M||I==="||"&&x==="&&"||R===M&&p==="right"||R===M&&!fd(I,x)||(R<M&&x==="%"?I==="+"||I==="-":!(!ud[T=I]&&T!=="|"&&T!=="^"&&T!=="&"))}default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return c.kind==="call"&&p==="what"&&m.parenthesizedExpression;case"clone":case"new":switch(c.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return p==="what";default:return!1}case"yield":switch(c.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return p==="what";case"retif":return p==="test";default:return!(!m.key&&!m.value)}case"assign":return(c.kind!=="for"||!c.init.includes(m)&&!c.increment.includes(m))&&c.kind!=="assign"&&c.kind!=="static"&&!["if","do","while","foreach","switch"].includes(c.kind)&&c.kind!=="silent"&&c.kind!=="call";case"retif":switch(c.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(p==="test"&&!c.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return p==="what";default:return!1}case"closure":switch(c.kind){case"call":return p==="what";case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return m.parenthesizedExpression;case"string":case"array":switch(c.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(m.kind)||c.kind!=="offsetlookup")&&p==="what";default:return!1}case"print":case"include":return c.kind==="bin"}var T;return!1}let{breakParent:Vy,join:Bt,line:ze,lineSuffix:VS,group:fe,conditionalGroup:Co,indent:he,dedent:BS,ifBreak:Cs,hardline:oe,softline:Fe,literalline:So,align:qS,dedentToRoot:US}=e.doc.builders,{willBreak:Bi}=e.doc.utils,{isNextLineEmptyAfterIndex:jS,hasNewline:GS,hasNewlineInRange:By,getNextNonSpaceNonCommentCharacterIndex:WS,isNextLineEmpty:Ss,isPreviousLineEmpty:HS}=e.util;function Eo(o,c){return parseFloat(o)>=parseFloat(c)}function ol(o,c){return!!o.trailingCommaPHP&&Eo(o.phpVersion,c)}function vd(o){return o.braceStyle!=="1tbs"}function Cd(o,c,p){return[arguments.length>3&&arguments[3]!==void 0&&arguments[3]?"?":"","->",p("offset")]}function qy(o,c,p){return Cd(o,c,p,!0)}function Uy(o,c,p){let{node:m}=o,T=!["variable","identifier"].includes(m.offset.kind);return["::",T?"{":"",p("offset"),T?"}":""]}function jy(o,c,p){let{node:m}=o,T=m.offset&&m.offset.kind==="number"||md(o,"encapsed");return["[",m.offset?fe([he([T?"":Fe,p("offset")]),T?"":Fe]):"","]"]}function Gy(o){return o.kind==="array"&&(o.items.length>0||o.comments)||o.kind==="function"||o.kind==="method"||o.kind==="closure"}function Xr(o,c,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",T=o.node[m];if(T.length===0)return["(",Ct(o,c,!0),")"];let I=!1,R=!1,x=o.map(K=>{let{node:G,isLast:ne,isFirst:ae}=K,Ne=[p()];return ne||(Ss(c.originalText,st(G))?(ae&&(R=!0),I=!0,Ne.push(",",oe,oe)):Ne.push(",",ze)),Ne},m),{node:M}=o,D=Sr(T),A=ol(c,"7.3")&&["call","new","unset","isset"].includes(M.kind)||ol(c,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(M.kind)?he([D&&Py(D)?oe:"",","]):"",U=function(K){if(K.length!==2)return!1;let[G,ne]=K;return!(G.comments&&G.comments.length||G.kind!=="function"&&G.kind!=="method"&&G.kind!=="closure"||ne.kind==="retif"||Gy(ne))}(T),$=function(K){let G=Sr(K),ne=(ae=K).length>1?ae[ae.length-2]:null;var ae;return!il(G)&&!sl(G)&&Gy(G)&&(!ne||ne.kind!==G.kind)}(T);if(U||$){let K=(U?x.slice(1).some(Bi):x.slice(0,-1).some(Bi))||I,G;o.each(Ne=>{let{isLast:ge,isFirst:Ae}=Ne;U&&Ae&&(G=[p([],{expandFirstArg:!0}),x.length>1?",":"",R?oe:ze,R?oe:"",x.slice(1)]),$&&ge&&(G=[...x.slice(0,-1),p([],{expandLastArg:!0})])},m);let ne=x.some(Bi),ae=["(",...G,")"];return[ne?Vy:"",Co([ne?Cs(fe(["(",he([ze,...x]),A,ze,")"],{shouldBreak:!0}),ae):ae,U?["(",fe(G[0],{shouldBreak:!0}),...G.slice(1),")"]:["(",...x.slice(0,-1),fe(Sr(G),{shouldBreak:!0}),")"],fe(["(",he([ze,...x]),Cs(A),ze,")"],{shouldBreak:!0})],{shouldBreak:K})]}return fe(["(",he([Fe,...x]),Cs(A),Fe,")"],{shouldBreak:x.some(Bi)||I})}function Wy(o){return o.kind==="array"&&o.items.length!==0}function al(o){return o.right.kind==="array"&&o.right.items.length!==0}function Hy(o,c,p,m,T){let I=[],{node:R}=o;if(R.kind==="bin"){fd(R.type,R.left.type)?I=I.concat(o.call(()=>Hy(o,c,p,!0,T),"left")):I.push(c("left"));let x=al(R)?[R.type," ",c("right")]:[R.type,ze,c("right")],{parent:M}=o,D=!(T&&["||","&&"].includes(R.type))&&vo(M)!==vo(R)&&vo(R.left)!==vo(R)&&vo(R.right)!==vo(R),A=dd(R.left)||R.left.kind==="bin"&&dd(R.left.right);I.push(A?"":" ",D?fe(x):x),m&&R.comments&&(I=Pd(o,()=>I,p))}else I.push(c());return I}function Yy(o,c,p){let{node:m}=o;switch(m.kind){case"propertylookup":return Cd(o,c,p);case"nullsafepropertylookup":return qy(o,c,p);case"staticlookup":return Uy(o,0,p);case"offsetlookup":return jy(o,0,p);default:throw new Error(`Have not implemented lookup kind ${m.kind} yet.`)}}function $y(o){let{opening:c=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.type==="heredoc")return c?`<<<${o.label}`:o.label;let p={string:'"',shell:"`"};if(p[o.type])return p[o.type];throw new Error(`Unimplemented encapsed type ${o.type}`)}function YS(o,c,p){let m=[],T=[];return o.each(I=>{let{node:R}=I;m.push(T),m.push(fe(p())),T=[",",ze],R&&Ss(c.originalText,st(R))&&T.push(Fe)},"items"),m}function ll(o,c,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",{node:T,parent:I}=o,R=-1,x=[],M=[];o.map(()=>{let{node:A,next:U,isFirst:$,isLast:K,index:G}=o,ne=A.kind==="inline",ae=p(),Ne=!K&&!ne&&(U&&U.kind==="case"?!nl(o):U&&U.kind!=="inline"),ge=[ae,Ne?oe:"",Ne&&Ss(c.originalText,st(A))?oe:""],Ae=T.kind==="block"&&I&&["function","closure","method","try","catch"].includes(I.kind),Oe=Ae&&$?"":" ";if(ne||!ne&&K&&R>=0){let Cn=R;if(ne&&(R=G),ne&&!$||!ne&&K){let kr=(ne?Cn:R)+1,Sn=K&&!ne?G+1:G,Jr=o.siblings[ne?Cn:R],Ro=Jr?function(ko){let fl=ko.split(`
`).pop();return fl.length-fl.trimLeft().length+1}(Jr.raw):"",cl=Sn-kr>1,gc=cl?Ae&&!Jr||pd(T)&&kr===0?"":oe:"",ul=cl&&A.kind!=="halt"?Ae&&K?"":oe:"";cl&&(Oe=""),M.push({start:kr,end:Sn,alignment:Ro,before:gc,after:ul})}}if(ne){let Cn=U&&U.kind==="echo"&&U.shortForm?"<?=":"<?php",kr=A.leadingComments&&A.leadingComments.length?[$&&T.kind!=="namespace"&&!Ae?"<?php":"",T.kind!=="namespace"&&Ae?"":oe,vs(A.leadingComments,c),oe,"?>"]:pd(T)&&$&&T.kind!=="namespace"?"":[Oe,"?>"],Sn=o.getNode(G+1),Jr=Sn&&Sn.children&&Sn.children.length;ge=[kr,ge,A.comments&&A.comments.length?[Cn,oe,Jr?vs(A.comments,c):"",oe]:pd(T)&&K?"":[Cn," "]]}x.push(ge)},m);let D=function(A,U){if(U.length===0)return A;let $=0;return U.reduce((K,G)=>{let{start:ne,end:ae,alignment:Ne,before:ge,after:Ae}=G,Oe=[ge||"",...A.slice(ne,ae),Ae||""],Cn=K.concat(A.slice($,ne),Ne?US(fe(qS(new Array(Ne).join(" "),Oe))):fe(Oe),ae===A.length-1?A.slice(ae):"");return $=ae,Cn},[])}(x,M);if(T.kind==="program"&&!T.extra.parseAsEval){let A=[],[U]=T.children;if(!U||U.kind!=="inline"){let $=c.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),K=[$&&$[2]&&$[2].includes(`
`)?[oe,$[2].split(`
`).length>2?oe:""]:" ",T.comments?vs(T.comments,c):""],G=U&&U.kind==="echo"&&U.shortForm;A.push([G?"<?=":"<?php",K])}if(A.push(D),/\?>\n?$/.test(c.originalText)){let $=Sr(T.children),K=$?[By(c.originalText.trimEnd(),st($),st(T))?$.kind==="inline"&&$.comments&&$.comments.length?"":oe:" ",Ss(c.originalText,st($))?oe:""]:T.comments?oe:"";A.push(VS([K,"?>"]))}return A}return D}function Ky(o,c,p,m){return o.map(T=>{let{node:I,isLast:R}=T,x=[];return x.push(p()),R||(x.push(oe),Ss(c.originalText,st(I))&&x.push(oe)),x},m)}function or(o,c,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",I=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",R=o.node[m],x=Un(R)?[oe,o.call(()=>Ct(o,c,!0),m),oe]:T,M=Array.isArray(R)?fe(Bt(",",o.map(D=>{let{node:A}=D,U=p();return Un(A)?[oe,Ct(o,c,!0),oe,U]:[I,U]},m))):[I,p(m)];return he([x,m,Bi(x)?he(M):M])}function qi(o,c,p){let{inline:m=!1}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},T=[];return o.node.attrGroups?(o.each(()=>{let I=["#["];!m&&T.length>0&&T.push(oe),I.push(Fe),o.each(()=>{let R=o.node;I.length>2&&I.push(",",ze);let x=[R.name];R.args.length>0&&x.push(Xr(o,c,p,"args")),I.push(fe(x))},"attrs"),T.push(fe([he(I),Cs(ol(c,"8.0")?",":""),Fe,"]",m?Cs(Fe," "):""]))},"attrGroups"),T.length===0?[]:[...T,m?"":oe]):[]}function yi(o,c,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",{node:T}=o;if(!T[m])return";";let I=p(m);return[T.shortForm?":":" {",he(T[m].kind!=="block"||T[m].children&&T[m].children.length>0||T[m].comments&&T[m].comments.length>0?[ES(o)?T.kind==="switch"?" ":"":oe,I]:""),T.kind==="if"&&m==="body"?"":[RS(o)?oe:"",T.shortForm?["end",T.kind,";"]:"}"]]}function pc(o,c,p,m,T,I,R){if(!m)return c;let x=hc(o,m,T,I,R);return fe([c,p,x])}function zy(o){return!!un(o)&&(!(o.what.kind!=="variable"&&!hd(o.what))||zy(o.what))}function hc(o,c,p,m,T){let I=m?"&":"";if(function(x,M){return M.comments&&M.comments.some(D=>D.leading&&fc(x,st(D)))}(T.originalText,c))return he([oe,I,p]);let R=c.kind==="cast"?c.expr:c;return R.kind==="bin"&&!al(R)||R.kind==="retif"&&(!R.trueExpr&&!Wy(R.falseExpr)||R.test.kind==="bin"&&!al(R.test))||(o.kind==="variable"||o.kind==="string"||un(o))&&(R.kind==="string"&&!Qy(R)||zy(R))?fe(he([ze,I,p])):[" ",I,p]}function Qy(o){return o.raw.includes(`
`)}function mc(o,c){return(o.kind==="string"||o.kind==="encapsed"&&(o.type==="string"||o.type==="shell"))&&Qy(o)&&!GS(c,Pn(o),{backwards:!0})}function Xy(o,c,p){return fe(o.map(m=>{let{isFirst:T}=m;return T?[c()]:[p,c()]},"types"))}let $S=new Set(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"]);function Jy(o,c){if(o.kind==="string"&&delete c.isDoubleQuote,["array","list"].includes(o.kind)&&delete c.shortForm,o.kind==="inline"){if(o.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;c.value=c.value.replace(/\n/g,"")}if((o.kind==="continue"||o.kind==="break")&&o.level){let{level:p}=c;p.kind==="number"&&(c.level=p.value==="1"?null:p)}if(o.kind==="block"&&o.children.length===1&&o.children[0].kind==="block")for(;c.children[0].kind==="block";)c.children=c.children[0].children;if(o.kind==="number"&&(c.value=Ny(o.value)),["foreach","for","if","while","do"].includes(o.kind)&&(o.body&&o.body.kind!=="block"?c.body={kind:"block",children:[c.body]}:c.body=c.body?c.body:null,o.alternate&&o.alternate.kind!=="block"?c.alternate={kind:"block",children:[c.alternate]}:c.alternate=c.alternate?c.alternate:null),o.kind==="usegroup"&&typeof o.name=="string"&&(c.name=c.name.replace(/^\\/,"")),o.kind==="useitem"&&(c.name=c.name.replace(/^\\/,"")),o.kind==="method"&&o.name.kind==="identifier"&&(c.name.name=Cy(c.name.name)),o.kind==="noop")return null}Jy.ignoredProperties=$S;let Sd="PHP";var KS={phpVersion:{since:"0.13.0",category:Sd,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"},{value:"8.2"}]},trailingCommaPHP:{since:"0.0.0",category:Sd,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:Sd,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}};let zS=(o,c,p,m)=>{if(p==="length"||p==="prototype"||p==="arguments"||p==="caller")return;let T=Object.getOwnPropertyDescriptor(o,p),I=Object.getOwnPropertyDescriptor(c,p);!QS(T,I)&&m||Object.defineProperty(o,p,I)},QS=function(o,c){return o===void 0||o.configurable||o.writable===c.writable&&o.enumerable===c.enumerable&&o.configurable===c.configurable&&(o.writable||o.value===c.value)},XS=(o,c)=>{let p=Object.getPrototypeOf(c);p!==Object.getPrototypeOf(o)&&Object.setPrototypeOf(o,p)},JS=(o,c)=>`/* Wrapped ${o}*/
${c}`,ZS=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),eE=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),tE=(o,c,p)=>{let m=p===""?"":`with ${p.trim()}() `,T=JS.bind(null,m,c.toString());Object.defineProperty(T,"name",eE),Object.defineProperty(o,"toString",{...ZS,value:T})};var Ed={exports:{}},nE=()=>{let o={};return o.promise=new Promise((c,p)=>{o.resolve=c,o.reject=p}),o};(function(o,c){var p=t&&t.__awaiter||function(R,x,M,D){return new(M||(M=Promise))(function(A,U){function $(ne){try{G(D.next(ne))}catch(ae){U(ae)}}function K(ne){try{G(D.throw(ne))}catch(ae){U(ae)}}function G(ne){ne.done?A(ne.value):new M(function(ae){ae(ne.value)}).then($,K)}G((D=D.apply(R,x||[])).next())})},m=t&&t.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(c,"__esModule",{value:!0});let T=m(nE);function I(R){let x,M,D,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",U=()=>p(this,void 0,void 0,function*(){if(x!==void 0)return;let K=G=>p(this,void 0,void 0,function*(){D=T.default();let ne=G[1][A]-Date.now();return ne<=0?(R.delete(G[0]),void D.resolve()):(x=G[0],M=setTimeout(()=>{R.delete(G[0]),D&&D.resolve()},ne),typeof M.unref=="function"&&M.unref(),D.promise)});try{for(let G of R)yield K(G)}catch{}x=void 0}),$=R.set.bind(R);return R.set=(K,G)=>{R.has(K)&&R.delete(K);let ne=$(K,G);return x&&x===K&&(x=void 0,M!==void 0&&(clearTimeout(M),M=void 0),D!==void 0&&(D.reject(void 0),D=void 0)),U(),ne},U(),R}c.default=I,o.exports=I,o.exports.default=I})(Ed,Ed.exports);var rE=r(Ed.exports);let iE=new WeakMap,Zy=/@prettier|@format/,eb=function(o){let{cacheKey:c,cache:p=new Map,maxAge:m}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof m=="number"&&rE(p);let T=function(){for(var I=arguments.length,R=new Array(I),x=0;x<I;x++)R[x]=arguments[x];let M=c?c(R):R[0],D=p.get(M);if(D)return D.data;let A=o.apply(this,R);return p.set(M,{data:A,maxAge:m?Date.now()+m:Number.POSITIVE_INFINITY}),A};return function(I,R){let{ignoreNonConfigurable:x=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{name:M}=I;for(let D of Reflect.ownKeys(R))zS(I,R,D,x);XS(I,R),tE(I,R,M)}(T,o,{ignoreNonConfigurable:!0}),iE.set(T,p),T}(o=>{let c=yy(o),[p]=c.children,[m]=c.comments.filter(T=>T.kind==="commentblock");if(p&&m&&m.loc.start.line<p.loc.start.line)return m}),{join:sE,hardline:oE}=e.doc.builders;function tb(o,c){let{extend:p,override:m}=c,T={};for(let I in o)T[I==="languageId"?"linguistLanguageId":I]=o[I];if(p)for(let I in p)T[I]=(T[I]||[]).concat(p[I]);for(let I in m)T[I]=m[I];return T}let aE=[tb(i,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),tb(s,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],lE={php:{parse:yy,astFormat:"php",locStart:Pn,locEnd:st,hasPragma:function(o){if(!Zy.test(o))return!1;let c=eb(o);if(c){let{value:p}=c;return Zy.test(p)}return!1}}},cE=new Set(["kind","loc","errors","extra","comments","leadingComments","enclosingNode","precedingNode","followingNode"]),uE={php:{print:function(o,c,p){let{node:m}=o;if(typeof m=="string")return m;let T=function(x,M,D){let{node:A}=x;switch(A.kind){case"program":return fe([ll(x,M,D),Ct(x,M,!0,U=>!U.printed)]);case"expressionstatement":return D("expression");case"block":return[ll(x,M,D),Ct(x,M,!0)];case"declare":{let U=$=>Bt(", ",$.map(D,"directives"));return["block","short"].includes(A.mode)?["declare(",U(x),")",A.mode==="block"?" {":":",A.children.length>0?he([oe,ll(x,M,D)]):"",Ct(x,M),oe,A.mode==="block"?"}":"enddeclare;"]:["declare(",U(x),")",x.next?.kind==="inline"?"":";"]}case"declaredirective":return[D("key"),"=",D("value")];case"namespace":return["namespace ",A.name&&typeof A.name=="string"?[A.name,A.withBrackets?" ":""]:"",A.withBrackets?"{":";",Un(A)?[" ",Ct(x,M,!0)]:"",A.children.length>0?A.withBrackets?he([oe,ll(x,M,D)]):[A.children[0].kind==="inline"?"":[oe,kS(M.originalText,A)?oe:""],ll(x,M,D)]:"",A.withBrackets?[oe,"}"]:""];case"usegroup":return fe(["use ",A.type?[A.type," "]:"",he([A.name?[xy(A.name),"\\{",Fe]:"",Bt([",",ze],x.map(D,"items"))]),A.name?[Cs(ol(M,"7.2")?",":""),Fe,"}"]:""]);case"useitem":return[A.type?[A.type," "]:"",xy(A.name),Un(A)?[" ",Ct(x,M,!0)]:"",A.alias?[" as ",D("alias")]:""];case"class":case"enum":case"interface":case"trait":return function(U,$,K){let{node:G}=U,ne=G.kind==="class"&&G.isAnonymous,ae=qi(U,$,K,{inline:ne}),Ne=ne?[]:[...ae];G.isFinal&&Ne.push("final "),G.isAbstract&&Ne.push("abstract "),G.isReadonly&&Ne.push("readonly "),Ne.push(ne?"":G.kind),G.name&&Ne.push(" ",K("name")),G.kind==="enum"&&G.valueType&&Ne.push(": ",K("valueType")),G.extends&&G.implements?Ne.push(Co([[or(U,$,K,"extends"),or(U,$,K,"implements")],[or(U,$,K,"extends"),or(U,$,K,"implements"," ",oe)],[or(U,$,K,"extends",oe," "),or(U,$,K,"implements",oe,G.implements.length>1?oe:" ")]],{shouldBreak:Un(G.extends)})):(G.extends&&Ne.push(Co([or(U,$,K,"extends"),or(U,$,K,"extends"," ",oe),or(U,$,K,"extends",oe,G.extends.length>1?oe:" ")])),G.implements&&Ne.push(Co([or(U,$,K,"implements"),or(U,$,K,"implements"," ",oe),or(U,$,K,"implements",oe,G.implements.length>1?oe:" ")])));let ge=fe([fe(Ne),vd($)?ne?ze:oe:" "]),Ae=G.body&&G.body.length===0&&!Un(G),Oe=["{",he([Ae?"":oe,Ky(U,$,K,"body")]),Ct(U,$,!0),ne&&Ae?Fe:oe,"}"];return[ge,Oe]}(x,M,D);case"traitprecedence":return[D("trait"),"::",D("method")," insteadof ",Bt(", ",x.map(D,"instead"))];case"traitalias":return[A.trait?[D("trait"),"::"]:"",A.method?D("method"):""," as ",Bt(" ",[...A.visibility?[A.visibility]:[],...A.as?[D("as")]:[]])];case"traituse":return fe(["use ",he(fe(Bt([",",ze],x.map(D,"traits")))),A.adaptations?[" {",A.adaptations.length>0?[he([oe,Ky(x,M,D,"adaptations")]),oe]:Un(A)?[ze,Ct(x,M,!0),ze]:"","}"]:""]);case"function":case"closure":case"method":return function(U,$,K){let{node:G}=U,ne=qi(U,$,K,{inline:G.kind==="closure"}),ae=[];G.isFinal&&ae.push("final "),G.isAbstract&&ae.push("abstract "),G.visibility&&ae.push(G.visibility," "),G.isStatic&&ae.push("static "),ae.push("function "),G.byref&&ae.push("&"),G.name&&ae.push(K("name")),ae.push(Xr(U,$,K)),G.uses&&G.uses.length>0&&ae.push(fe([" use ",Xr(U,$,K,"uses")])),G.type&&ae.push([": ",Un(G.type)?[U.call(()=>Ct(U,$,!0),"type")," "]:"",G.nullable?"?":"",K("type")]);let Ne=ae;if(!G.body)return[...ne,Ne];let ge=G.kind==="closure",Ae=["{",he([Ay(U)?"":oe,K("body")]),ge&&Ay(U)?"":oe,"}"];return ge?[...ne,Ne," ",Ae]:G.arguments.length===0?[...ne,Ne,vd($)?oe:" ",Ae]:ae.some(Bi)?[Ne," ",Ae]:[...ne,Co([[Ne,vd($)?oe:" ",Ae],[Ne," ",Ae]])]}(x,M,D);case"arrowfunc":return[A.parenthesizedExpression?"(":"",...qi(x,M,D,{inline:!0}),A.isStatic?"static ":"","fn",Xr(x,M,D),A.type?[": ",A.nullable?"?":"",D("type")]:""," => ",D("body"),A.parenthesizedExpression?")":""];case"parameter":{let U="";A.flags===1?U="public ":A.flags===2?U="protected ":A.flags===4&&(U="private ");let $=[...qi(x,M,D,{inline:!0}),U,A.readonly?"readonly ":"",A.nullable?"?":"",A.type?[D("type")," "]:"",A.byref?"&":"",A.variadic?"...":"","$",D("name")];return A.value?fe([$,Un(A)?" ":"",Ct(x,M,!0)," =",hc(A.name,A.value,D("value"),!1,M)]):$}case"variadic":return["...",D("what")];case"property":return fe([A.readonly?"readonly ":"",A.type?[A.nullable?"?":"",D("type")," "]:"","$",D("name"),A.value?[" =",hc(A.name,A.value,D("value"),!1,M)]:""]);case"propertystatement":{let U=[];x.each(()=>{U.push(...qi(x,M,D))},"properties");let $=x.map(D,"properties"),K=A.properties.some(ae=>ae.value),G;$.length!==1||A.properties[0].comments?$.length>0&&(G=he($[0])):[G]=$;let ne=A.visibility||A.visibility===null;return fe([...U,ne?[A.visibility===null?"var":A.visibility,""]:"",A.isStatic?[ne?" ":"","static"]:"",G?[" ",G]:"",he($.slice(1).map(ae=>[",",K?oe:ze,ae]))])}case"if":{let U=[],$=yi(x,M,D,"body"),K=fe(["if (",fe([he([Fe,D("test")]),Fe]),")",$]);if(U.push(K,nl(x)||!A.body?"":oe),A.alternate){U.push(A.shortForm?"":"} ");let G=sl(A.body)&&A.body.comments.some(ae=>ae.trailing&&!Ad(ae))||function(ae){if(!ae.comments)return!1;let Ne=Sr(ae.comments.filter(ge=>!ge.leading&&!ge.trailing));return Ne&&!Ad(Ne)}(A),ne=!G;U.push(ne?"":oe),Un(A)&&U.push(Ss(M.originalText,st(A.body))?oe:"",Ct(x,M,!0),G?oe:" "),U.push("else",fe(A.alternate.kind==="if"?D("alternate"):yi(x,M,D,"alternate")))}else U.push(A.body?A.shortForm?"endif;":"}":"");return U}case"do":return["do",yi(x,M,D,"body")," while (",fe([he([Fe,D("test")]),Fe]),")"];case"while":case"switch":return fe([A.kind," (",fe([he([Fe,D("test")]),Fe]),")",yi(x,M,D,"body")]);case"for":{let U=yi(x,M,D,"body"),$=Ct(x,M,!0),K=$?[$,Fe]:"";return A.init.length||A.test.length||A.increment.length?[K,fe(["for (",fe([he([Fe,fe(Bt([",",ze],x.map(D,"init"))),";",ze,fe(Bt([",",ze],x.map(D,"test"))),";",ze,fe(Bt([",",ze],x.map(D,"increment")))]),Fe]),")",U])]:[K,fe(["for (;;)",U])]}case"foreach":{let U=yi(x,M,D,"body"),$=Ct(x,M,!0);return[$?[$,Fe]:"",fe(["foreach (",fe([he([Fe,D("source"),ze,"as ",fe(A.key?he(Bt([" =>",ze],[D("key"),D("value")])):D("value"))]),Fe]),")",U])]}case"try":{let U=[];return U.push("try",yi(x,M,D,"body")),A.catches&&U.push(x.map(D,"catches")),A.always&&U.push(" finally",yi(x,M,D,"always")),U}case"catch":return[" catch",A.what?[" (",Bt(" | ",x.map(D,"what")),A.variable?[" ",D("variable")]:"",")"]:"",yi(x,M,D,"body")];case"case":return[A.test?["case ",A.test.comments?he(D("test")):D("test"),":"]:"default:",A.body&&A.body.children&&A.body.children.length?he([nl(x)?"":oe,D("body")]):""];case"break":case"continue":return A.level&&A.level.kind==="number"&&A.level.value!=="1"?[`${A.kind} `,D("level")]:A.kind;case"call":return A.arguments.length===1&&mc(A.arguments[0],M.originalText)?[D("what"),"(",Bt(", ",x.map(D,"arguments")),")"]:un(A.what)?function(U,$,K){let G=[];function ne(Pe){let{originalText:bt}=$,Gt=WS(bt,st(Pe));return bt.charAt(Gt)===")"?jS(bt,Gt+1,$):Ss(bt,st(Pe))}function ae(Pe){let{node:bt}=Pe;if(bt.kind!=="call"||!un(bt.what)&&bt.what.kind!=="call")if(un(bt)){let Gt=null;Gt=bt.kind==="propertylookup"?Cd(Pe,$,K):bt.kind==="nullsafepropertylookup"?qy(Pe,$,K):bt.kind==="staticlookup"?Uy(Pe,$,K):jy(Pe,$,K),G.unshift({node:bt,needsParens:My(Pe),printed:Pd(Pe,()=>Gt,$)}),Pe.call(dl=>ae(dl),"what")}else G.unshift({node:bt,printed:K()});else G.unshift({node:bt,printed:[Pd(Pe,()=>Xr(Pe,$,K),$),ne(bt)?oe:""]}),Pe.call(Gt=>ae(Gt),"what")}let{node:Ne}=U;G.unshift({node:Ne,printed:Xr(U,$,K)}),U.call(Pe=>ae(Pe),"what");for(let Pe=0;Pe<G.length;++Pe)G[Pe].node.kind==="call"&&G[Pe-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(G[Pe-1].node.kind)&&G[Pe-1].needsParens&&(G[0].printed=["(",G[0].printed],G[Pe-1].printed=[G[Pe-1].printed,")"]);let ge=[],Ae=[G[0]],Oe=1;for(;Oe<G.length&&(G[Oe].node.kind==="call"||un(G[Oe].node)&&G[Oe].node.offset&&G[Oe].node.offset.kind==="number");++Oe)Ae.push(G[Oe]);if(G[0].node.kind!=="call")for(;Oe+1<G.length&&un(G[Oe].node)&&un(G[Oe+1].node);++Oe)Ae.push(G[Oe]);ge.push(Ae),Ae=[];let Cn=!1;for(;Oe<G.length;++Oe){if(Cn&&un(G[Oe].node)){if(G[Oe].node.kind==="offsetlookup"&&G[Oe].node.offset&&G[Oe].node.offset.kind==="number"){Ae.push(G[Oe]);continue}ge.push(Ae),Ae=[],Cn=!1}G[Oe].node.kind==="call"&&(Cn=!0),Ae.push(G[Oe]),G[Oe].node.comments&&sl(G[Oe].node)&&(ge.push(Ae),Ae=[],Cn=!1)}Ae.length>0&&ge.push(Ae);function kr(Pe){let bt=Pe[1].length&&Pe[1][0].node.kind==="offsetlookup";if(Pe[0].length===1){let wo=Pe[0][0].node;return wo.kind==="variable"&&(wo.name==="this"||Sn&&Gt(wo.name))||hd(wo)}function Gt(wo){return wo.length<$.tabWidth}let dl=Sr(Pe[0]).node;return un(dl)&&(dl.offset.kind==="identifier"||dl.offset.kind==="variable")&&bt}let Sn=U.parent.kind==="expressionstatement",Jr=ge.length>=2&&!ge[1][0].node.comments&&kr(ge);function Ro(Pe){let bt=[];for(let Gt=0;Gt<Pe.length;Gt++)Pe[Gt+1]&&Pe[Gt+1].needsParens?(bt.push("(",Pe[Gt].printed,Pe[Gt+1].printed,")"),Gt++):bt.push(Pe[Gt].printed);return bt}function cl(Pe){return Pe.length===0?"":he(fe([oe,Bt(oe,Pe.map(Ro))]))}let gc=ge.map(Ro),ul=gc,ko=Jr?3:2,fl=ge.slice(0,ko).flat(),nb=fl.slice(1,-1).some(Pe=>il(Pe.node))||fl.slice(0,-1).some(Pe=>sl(Pe.node))||ge[ko]&&il(ge[ko][0].node),fE=md(U,"encapsed");if(ge.length<=ko&&!nb||fE)return fe(ul);let rb=Sr(Jr?ge.slice(1,2)[0]:ge[0]).node,ib=rb.kind!=="call"&&ne(rb),sb=[Ro(ge[0]),Jr?ge.slice(1,2).map(Ro):"",ib?oe:"",cl(ge.slice(Jr?2:1))],dE=G.filter(Pe=>Pe.node.kind==="call").length;return nb||dE>=3||gc.slice(0,-1).some(Bi)?fe(sb):[Bi(ul)||ib?Vy:"",Co([ul,sb])]}(x,M,D):[D("what"),Xr(x,M,D)];case"new":{let U=A.what&&A.what.kind==="class"&&A.what.isAnonymous;if(!U&&A.arguments.length===1&&mc(A.arguments[0],M.originalText))return["new ",...x.call(qi,"what"),D("what"),"(",Bt(", ",x.map(D,"arguments")),")"];let $=[];if($.push("new "),U)$.push(A.what.leadingComments&&A.what.leadingComments[0].kind==="commentblock"?[vs(A.what.leadingComments,M)," "]:"",...x.call(()=>qi(x,M,D,{inline:!0}),"what"),"class",A.arguments.length>0?[" ",Xr(x,M,D)]:"",fe(D("what")));else{let K=["call","offsetlookup"].includes(A.what.kind),G=[K?"(":"",D("what"),K?")":"",Xr(x,M,D)];$.push(il(A.what)?he(G):G)}return $}case"clone":return["clone ",A.what.comments?he(D("what")):D("what")];case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":{let{parent:U}=x,$,K=0;do $=x.getParentNode(K),K++;while($&&un($));let G=md(x,"encapsed")||$&&($.kind==="new"||$.kind==="assign"&&$.left.kind!=="variable")||A.kind==="offsetlookup"||(hd(A.what)||A.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(A.offset.kind)&&U&&!un(U);return[D("what"),G?Yy(x,M,D):fe(he([Fe,Yy(x,M,D)]))]}case"exit":return fe([A.useDie?"die":"exit","(",A.expression?mc(A.expression,M.originalText)?D("expression"):[he([Fe,D("expression")]),Fe]:Ct(x,M),")"]);case"global":return fe(["global ",he(Bt([",",ze],x.map(D,"items")))]);case"include":return[A.require?"require":"include",A.once?"_once":""," ",A.target.comments?he(D("target")):D("target")];case"label":return[D("name"),":"];case"goto":return["goto ",D("label")];case"throw":return["throw ",A.what.comments?he(D("what")):D("what")];case"silent":return["@",D("expr")];case"halt":return[Un(A)?[Ct(x,M,!0),oe]:"","__halt_compiler();",A.after];case"eval":return fe(["eval(",mc(A.source,M.originalText)?D("source"):[he([Fe,D("source")]),Fe],")"]);case"echo":{let U=x.map(D,"expressions"),$;return U.length!==1||A.expressions[0].comments?U.length>0&&($=dd(A.expressions[0])||A.expressions[0].comments?he(U[0]):BS(U[0])):[$]=U,fe([A.shortForm?"":"echo ",$||"",he(U.slice(1).map(K=>[",",ze,K]))])}case"print":return["print ",A.expression.comments?he(D("expression")):D("expression")];case"return":{let U=[];if(U.push("return"),A.expr){let $=D("expr");U.push(" ",A.expr.comments?he($):$)}return Un(A)&&U.push(" ",Ct(x,M,!0)),U}case"isset":case"unset":return fe([A.kind,Xr(x,M,D,"variables")]);case"empty":return fe(["empty(",he([Fe,D("expression")]),Fe,")"]);case"variable":{let{parent:U,grandparent:$}=x,K=U.kind==="assign"?"":A.byref?"&":"",G=U.kind==="encapsedpart"&&U.syntax==="simple"&&U.curly||$&&U.kind==="offsetlookup"&&$.kind==="encapsedpart"&&$.syntax==="simple"&&$.curly?"":"$",ne=A.curly?"{":"",ae=A.curly?"}":"";return[K,G,ne,D("name"),ae]}case"constantstatement":case"classconstant":{let U=qi(x,M,D),$=x.map(D,"constants"),K;return $.length!==1||A.constants[0].comments?$.length>0&&(K=he($[0])):[K]=$,fe([...U,A.final?"final ":"",A.visibility?[A.visibility," "]:"","const",K?[" ",K]:"",he($.slice(1).map(G=>[",",oe,G]))])}case"constant":return pc(A.name,D("name")," =",A.value,D("value"),!1,M);case"static":{let U=x.map(D,"variables"),$=A.variables.some(G=>G.defaultValue),K;return U.length!==1||A.variables[0].comments?U.length>0&&(K=he(U[0])):[K]=U,fe(["static",K?[" ",K]:"",he(U.slice(1).map(G=>[",",$?oe:ze,G]))])}case"staticvariable":return pc(A.variable,D("variable")," =",A.defaultValue,D("defaultValue"),!1,M);case"list":case"array":{let U=A.kind==="array"&&Eo(M.phpVersion,"5.4")||A.kind==="list"&&(A.shortForm||Eo(M.phpVersion,"7.1")),$=U?"[":[A.kind,"("],K=U?"]":")";if(A.items.length===0)return Un(A)?fe([$,Ct(x,M),Fe,K]):[$,K];let G=Sr(A.items),ne=G&&G.kind==="noop",[ae]=A.items.filter(ge=>ge.kind!=="noop").sort((ge,Ae)=>Pn(ge)-Pn(Ae)),Ne=!(!ae||!ae.key)&&ae&&By(M.originalText,Pn(A),Pn(ae));return fe([$,he([Fe,YS(x,M,D)]),ne?",":"",Cs(!ne&&ol(M,"5.0")?[G&&Py(G)?oe:"",","]:""),Ct(x,M,!0),Fe,K],{shouldBreak:Ne})}case"entry":{let U=A.byRef?"&":"",$=A.unpack?"...":"";return A.key?pc(A.key,D("key")," =>",A.value,D("value"),U,M):[U,$,D("value")]}case"yield":{let U=[A.key?[D("key")," => "]:"",D("value")];return["yield",A.key||A.value?" ":"",A.value&&A.value.comments?he(U):U]}case"yieldfrom":return["yield from ",A.value.comments?he(D("value")):D("value")];case"unary":return[A.type,D("what")];case"pre":return[A.type+A.type,D("what")];case"post":return[D("what"),A.type+A.type];case"cast":return["(",A.type,") ",A.expr.comments?he(D("expr")):D("expr")];case"assignref":case"assign":{let U=A.kind==="assignref";return pc(A.left,D("left"),[" ",U?"=":A.operator],A.right,D("right"),U,M)}case"bin":{let{parent:U,grandparent:$}=x,K=A!==U.body&&(U.kind==="if"||U.kind==="while"||U.kind==="switch"||U.kind==="do"),G=Hy(x,D,M,!1,K);if(K)return G;if(U.kind==="unary"||un(U)&&U.kind!=="offsetlookup")return fe([he([Fe,...G]),Fe]);let ne=A!==U.body&&U.kind==="for"||U.kind==="retif"&&$&&$.kind!=="return",ae=["assign","property","constant","staticvariable","entry"].includes(U.kind),Ne=A.left.kind==="bin"&&fd(A.type,A.left.type);if(ne||al(A)&&!Ne||!al(A)&&ae)return fe(G);let ge=G.slice(1);return fe([G.length>0?G[0]:"",he(ge)])}case"retif":{let U=[],{parent:$}=x,K,G=0;do K=x.getParentNode(G),G++;while(K&&K.kind==="retif");let ne=K||$,ae=A.falseExpr.kind==="bin"?he(D("falseExpr")):D("falseExpr"),Ne=[A.trueExpr?ze:" ","?",A.trueExpr?[" ",A.trueExpr.kind==="bin"?he(D("trueExpr")):D("trueExpr"),ze]:"",":",A.trueExpr?[" ",ae]:[Wy(A.falseExpr)?" ":ze,ae]];U.push(Ne);let ge=Sn=>$===ne?fe(Sn):Sn,Ae=x.grandparent,Oe=$.kind==="cast"&&Ae?Ae:$,Cn=["propertylookup","nullsafepropertylookup","staticlookup"].includes(Oe.kind),kr=D("test");if(!A.trueExpr){let Sn=[kr,Oe.kind==="bin"||["print","echo","return","include"].includes(ne.kind)?he(U):U];return Oe.kind==="call"&&Oe.what===A||Oe.kind==="unary"||un(Oe)&&Oe.kind!=="offsetlookup"?fe([he([Fe,Sn]),Fe]):ge(Sn)}return ge([A.test.kind==="retif"?he(kr):kr,he(U),Cn?Fe:""])}case"boolean":return A.value?"true":"false";case"number":return Ny(A.value);case"string":{let{parent:U}=x;if(U.kind==="encapsedpart"){let G=x.grandparent,ne=0,ae=Eo(M.phpVersion,"7.3"),Ne=So;if(G.type==="heredoc"){Ne=ae?oe:So;let ge=G.raw.split(`
`);ne=ge[ge.length-1].search(/\S/),ne===-1&&(ne=ge[ge.length-2].search(/\S/))}return Bt(Ne,A.raw.split(`
`).map((ge,Ae)=>Ae>0||A.loc.start.column===0?ge.substring(ne):ge))}let $=function(G,ne){if(G.isDoubleQuote===ne.singleQuote){let ae=G.raw.slice(G.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return G.isDoubleQuote?ae:!ae}return G.isDoubleQuote}(A,M)?'"':"'",K=A.raw;return A.raw[0]==="b"&&(K=K.slice(1)),['"',"'"].includes(K[0])&&(K=K.substr(1)),['"',"'"].includes(K[K.length-1])&&(K=K.substr(0,K.length-1)),[A.raw[0]==="b"?"b":"",$,Bt(So,K.split(`
`)),$]}case"intersectiontype":return Xy(x,D,"&");case"uniontype":return Xy(x,D,"|");case"encapsedpart":{let U=A.syntax==="simple"&&A.curly||A.syntax==="complex"?[A.curly?"$":"","{"]:"",$=A.syntax==="simple"&&A.curly||A.syntax==="complex"?"}":"";return[U,D("expression"),$]}case"encapsed":switch(A.type){case"string":case"shell":case"heredoc":{let U=Eo(M.phpVersion,"7.3")?oe:So;return[$y(A),A.type==="heredoc"?U:"",...x.map(D,"value"),$y(A,{opening:!1}),A.type==="heredoc"&&uc(x)?oe:""]}default:throw new Error(`Have not implemented kind ${A.type} yet.`)}case"inline":return Bt(So,A.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(`
`));case"magic":return A.value;case"nowdoc":{let U=Eo(M.phpVersion,"7.3")?oe:So;return["<<<'",A.label,"'",U,Bt(U,A.value.split(`
`)),U,A.label,uc(x)?oe:""]}case"name":return[A.resolution==="rn"?"namespace\\":"",A.name];case"literal":return D("value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return A.name;case"nullkeyword":return"null";case"identifier":{let{parent:U}=x;return U.kind==="method"&&(A.name=Cy(A.name)),D("name")}case"match":{let U=x.map(()=>{let $=x.node,K=il($)?[vs($.leadingComments,M),oe]:[],G=!x.isLast||M.trailingCommaPHP?",":"",ne=sl($)?[" ",vs($.comments.filter(Ae=>Ae.trailing),M)]:[],ae=$.conds===null?"default":x.map(Ae=>{let{isFirst:Oe}=Ae;return[",",ze,D()].slice(Oe?2:0)},"conds"),Ne=D("body"),ge=!x.isFirst&&HS(M.originalText,Pn($))?oe:"";return["",oe,ge,...K,fe([fe([ae,he(ze)]),"=> ",Ne,G,...ne])].slice(x.isFirst?1:0)},"arms");return fe(["match (",fe([he([Fe,D("cond")]),Fe]),") {",fe(he([...U]))," ",Fe,"}"])}case"noop":return A.comments?vs(A.comments,M):"";case"namedargument":return[A.name,": ",D("value")];case"enumcase":return fe(["case ",D("name"),A.value?[" =",hc(A.name,A.value,D("value"),!1,M)]:""]);case"variadicplaceholder":return"...";default:throw new Error(`Have not implemented kind '${A.kind}' yet.`)}}(o,c,p),I=[],R=My(o);return R&&I.unshift("("),I.push(T),R&&I.push(")"),function(x){let{node:M,parent:D}=x;if(!D)return!1;if(["for","foreach","while","do","if","switch"].includes(D.kind)&&M.kind!=="block"&&M.kind!=="if"&&(D.body===M||D.alternate===M))return!0;if(!function(A){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(A.kind)}(D)||M.kind==="echo"&&M.shortForm)return!1;if(M.kind==="traituse")return!M.adaptations;if(M.kind==="method"&&M.isAbstract)return!0;if(M.kind==="method"){let{parent:A}=x;if(A&&A.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(M.kind)}(o)&&I.push(";"),function(x){let{node:M}=x,D=M.kind==="program",A=M.children&&Sr(M.children);if(!D||A&&["halt","inline"].includes(A.kind))return!1;if(A&&(A.kind==="declare"||A.kind==="namespace")){let U=A.children.length>0&&Sr(A.children);if(U&&["halt","inline"].includes(U.kind))return!1}return!0}(o)&&I.push(oe),I},getVisitorKeys:function(o,c){return Object.keys(o).filter(p=>!c.has(p)&&!cE.has(p))},insertPragma:function(o){let c=eb(o);if(c){let{start:{offset:m},end:{offset:T}}=c.loc,I=o.substring(0,m),R=o.substring(T);return`${I}${function(x){let M=x.split(`
`);if(M.length===1){let[,A]=/\/*\*\*(.*)\*\//.exec(M[0]);M=["/**",` * ${A.trim()}`," */"]}let D=M.findIndex(A=>/@\S/.test(A))||1;return M.splice(D,0," * @format"),M.join(`
`)}(c.value)}${R}`}let p="<?php";return o.startsWith(p)?`${o.substring(0,5)}
/** 
 * @format 
 */
${o.substring(5)}`:o},massageAstNode:Jy,getCommentChildNodes:function(o){if(o.kind==="new"&&o.what.kind==="class")return o.what.__parent_new_arguments=[...o.arguments],[o.what]},canAttachComment:function(o){return o.kind&&o.kind!=="commentblock"&&o.kind!=="commentline"},isBlockComment:Ad,handleComments:{ownLine:function(o,c,p){let{precedingNode:m,enclosingNode:T,followingNode:I}=o;return ky(c,m,T,I,o)||function(R,x,M){return R&&un(R)&&x&&["identifier","variable","encapsed"].includes(x.kind)?(Er(R,M),!0):!1}(T,I,o)||Td(c,m,T,I,o)||Id(c,m,T,I,o)||Oy(T,I,o)||_d(T,I,o)||bd(c,m,T,I,o)||yd(c,T,I,o)||function(R,x,M,D){return!M&&R&&(R.kind==="for"||R.kind==="foreach")?(R.body&&R.body.kind!=="block"?Er(M,D):Er(R,D),!0):!1}(T,0,I,o)||Nd(T,m,I,o)||Dy(T,m,I,o)},endOfLine:function(o,c,p){let{precedingNode:m,enclosingNode:T,followingNode:I}=o;return function(R,x,M,D,A){return!x&&!D&&M&&M.kind==="array"?(Rr(M,A),!0):!1}(0,m,T,I,o)||function(R,x,M,D,A){return M&&M.kind==="return"&&!M.expr?(Rr(M,A),!0):!1}(0,0,T,0,o)||ky(c,m,T,I,o)||function(R,x,M,D,A){let U=x&&!OS(A,st(x),Pn(D));return(!x||!U)&&R&&R.kind==="retif"&&M?(Er(M,D),!0):!1}(T,m,I,o,c)||Td(c,m,T,I,o)||Id(c,m,T,I,o)||Oy(T,I,o)||_d(T,I,o)||bd(c,m,T,I,o)||yd(c,T,I,o)||function(R,x){return R&&R.kind==="entry"?(Er(R,x),!0):!1}(T,o)||function(R,x,M){return x&&x.kind==="call"&&R&&x.what===R&&x.arguments.length>0?(Er(x.arguments[0],M),!0):!1}(m,T,o)||function(R,x,M){if(R&&R.kind==="assign"&&x){let D=R.loc.start.offset+R.loc.source.indexOf("=");if(M.loc.start.offset>D)return Er(x,M),!0}return!1}(T,I,o)||Nd(T,m,I,o)||Ly(T,m,I,o)||Dy(T,m,I,o)||wy(T,o)},remaining:function(o,c,p){let{precedingNode:m,enclosingNode:T,followingNode:I}=o;return Td(c,m,T,I,o)||Id(c,m,T,I,o)||function(R,x,M){let D=rl(R,st(M));return R.charAt(D)!==")"?!1:x&&(x.kind==="function"||x.kind==="closure"||x.kind==="method"||x.kind==="call"||x.kind==="new")&&x.arguments.length===0?(vn(x,M),!0):!1}(c,T,o)||_d(T,I,o)||function(R,x,M){return R&&R.kind==="traituse"&&R.adaptations&&!R.adaptations.length?(vn(R,M),!0):!1}(T,0,o)||bd(c,m,T,I,o)||yd(c,T,I,o)||wy(T,o)||function(R,x,M,D){return x&&x.kind==="halt"?(vn(x,D),!0):R&&R.kind==="halt"?(vn(R,D),!0):!1}(m,T,0,o)||function(R,x){return R&&(R.kind==="continue"||R.kind==="break")&&!R.label?(Rr(R,x),!0):!1}(T,o)||Nd(T,m,I,o)||Ly(T,m,I,o)}},willPrintOwnComments(o){let{node:c}=o;return c&&c.kind==="noop"},printComment(o){let c=o.node;switch(c.kind){case"commentblock":{if(!c.value.includes(`
`))return c.value;let p=c.value.split(`
`);return p.slice(1,p.length-1).every(m=>m.trim()[0]==="*")?sE(oE,p.map((m,T)=>(T>0?" ":"")+(T<p.length-1?m.trim():m.trimLeft()))):c.value}case"commentline":return c.value.trimRight();default:throw new Error(`Not a comment: ${JSON.stringify(c)}`)}},hasPrettierIgnore(o){let c=T=>T.value.includes("prettier-ignore")&&!T.value.includes("prettier-ignore-start")&&!T.value.includes("prettier-ignore-end"),{node:p,parent:m}=o;return p&&p.kind!=="classconstant"&&p.comments&&p.comments.length>0&&p.comments.some(c)||p&&p.kind==="constant"&&m&&m.kind==="classconstant"&&m.comments&&m.comments.length>0&&m.comments.some(c)}}};n.defaultOptions={tabWidth:4},n.languages=aE,n.options=KS,n.parsers=lE,n.printers=uE})});var Ui=class{constructor(){this.currentStructure=null;this.isReloading=!1;this.isDirtyState=!0;this.structuredProject=null}setStructuredProject(e){this.structuredProject=e}hasStructuredBlueprints(){return this.structuredProject!=null}getAllStructuredBlueprints(){return this.structuredProject==null?[]:this.structuredProject.assets.concat(this.structuredProject.collections).concat(this.structuredProject.forms).concat(this.structuredProject.general).concat(this.structuredProject.navigations).concat(this.structuredProject.taxonomies)}getStructuredProject(){return this.structuredProject}setActiveProject(e){this.currentStructure=e}getStructure(){return this.currentStructure}hasStructure(){return this.currentStructure!=null}setDirtyState(e){this.isDirtyState=e}reloadDetails(){this.isReloading||this.isDirtyState!=!1&&this.currentStructure!=null&&(this.isReloading=!0,this.currentStructure=this.currentStructure.reloadDetails(),this.isReloading=!1,this.isDirtyState=!1)}};Ui.instance=null;(typeof Ui.instance>"u"||Ui.instance==null)&&(Ui.instance=new Ui);var St=Ui;var wr=class{static registerDetails(e,t){this.documentDetails.set(e,t)}static hasDetails(e){return this.documentDetails.has(e)}};wr.documentDetails=new Map;var yE={documentDescription:"",documentName:"",collectionInjections:[],blueprints:[],variableHelper:null,injectsParameters:[],varReferenceNames:new Map,formatterEnabled:!0},ab="@name",lb="@description",cb="@desc",ub="@entry",fb="@collection",db="@blueprint",pb="@var",hb="@set",mb="@param",gb="@param*",bE="@front",Tb="@format";function pl(n,e){if(e==null||e.isComment==!1)return yE;let t=e.content.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`).map(g=>g.trim()),r=[],i=new Map,s="",a="",l=[],u=[],f="",d=null,h=!1,_=!0;for(let g=0;g<t.length;g++){let v=t[g];if(v.startsWith(ub))l=l.concat(v.slice(ub.length).split(",").map(O=>O.trim())),h=!1;else if(v.startsWith(fb))l=l.concat(v.slice(fb.length).split(",").map(O=>O.trim())),h=!1;else if(v.startsWith(db))u=u.concat(v.slice(db.length).split(",").map(O=>O.trim())),h=!1;else if(v.startsWith(ab))s=v.slice(ab.length).trim(),h=!1;else if(v.startsWith(lb))a=v.slice(lb.length).trim(),h=!0;else if(v.startsWith(cb))a=v.slice(cb.length).trim(),h=!0;else if(v.startsWith(pb))f=v.slice(pb.length).trim(),h=!1;else if(v.startsWith(hb))f="@page "+v.slice(hb.length).trim(),h=!1;else if(v.startsWith(mb)){let O=mb.length,E=!1;v.startsWith(gb)&&(O=gb.length,E=!0);let q=v.slice(O).trim().split(" ");if(q.length>0)if(q[0]==bE&&q.length>=4){q.shift();let Z=q.shift(),ue=q.shift(),de=q.join(" ");r.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:de,expectsTypes:["*"],isDynamic:!0,isRequired:E,name:ue}),i.set(ue,Z)}else{let Z=q.shift(),ue=q.join(" ");r.push({acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:ue,expectsTypes:["*"],isDynamic:!0,isRequired:E,name:Z})}}else v.startsWith(Tb)?v.slice(Tb.length).trim().toLowerCase()=="true"?_=!0:_=!1:h&&(a+=`
`+v.trim())}if(f.length>0){let g=f.split(" ");if(g.length==2){let v=g[0],O=g[1];if(O.includes(".")){let E=O.split(".");if(E.length==2){let C=E[0],q=E[1];d={variableName:v,collectionName:C,fieldHandle:q,setHandle:""}}else if(E.length==3){let C=E[0],q=E[1],Z=E[2];d={variableName:v,collectionName:C,fieldHandle:q,setHandle:Z}}}else d={variableName:v,setHandle:"",collectionName:"",fieldHandle:O}}}if(n.trim().length>0&&St.instance!=null&&St.instance.hasStructure()){let g=St.instance.getStructure().findView(n);g!=null&&(g.injectsParameters=r,g.varReferenceNames=i)}let b={documentName:s,documentDescription:a,collectionInjections:l,blueprints:u,variableHelper:d,injectsParameters:r,varReferenceNames:i,formatterEnabled:_};return n.trim().length>0&&e.startPosition!=null&&(e.startPosition.line<=1||e.index<=1)&&wr.registerDetails(n,b),b}var NE=["markdown","text","textarea","slug","button_group","code","color","date","form","link","structures","select","taxonomies","terms","template","time","video","users","user_groups","user_roles"],IE=["array","assets","bard","blueprints","collections","entries","list","grid","replicator","structures_multiple","sites","select_multiple","form_multiple","table","tags","terms_multiple","taxonomies_multiple","users_multiple","checkboxes","select_multiple","yaml","user_groups_multiple","user_roles_multiple"],xE=["integer","range"],AE=["toggle"];function Tc(n){return NE.includes(n)?"string":IE.includes(n)?"array":xE.includes(n)?"number":AE.includes(n)?"boolean":n}var ji=class{constructor(){this.partialReferences=new Map;this.cacheReferences=new Map;this.removesPageScope=new Map}clearAllReferences(e){this.clearPartialReferences(e),this.clearCacheReferences(e)}registerPartialReferences(e,t){this.partialReferences.has(e)==!1&&this.partialReferences.set(e,[]),this.partialReferences.set(e,t)}registerCacheReferences(e,t){this.cacheReferences.has(e)==!1&&this.cacheReferences.set(e,[]),this.cacheReferences.set(e,t)}clearPartialReferences(e){this.partialReferences.has(e)&&this.partialReferences.set(e,[])}clearRemovesPageScope(e){this.removesPageScope.has(e)&&this.removesPageScope.delete(e)}pageScopeDisabled(e){return this.removesPageScope.has(e)}clearCacheReferences(e){this.cacheReferences.has(e)&&this.cacheReferences.set(e,[])}setRemovesPageScope(e,t){this.removesPageScope.set(e,t)}getPartialReferences(e){return this.partialReferences.has(e)==!1?[]:this.partialReferences.get(e)}getCacheReferencnes(e){return this.cacheReferences.has(e)==!1?[]:this.cacheReferences.get(e)}hasPartialReferences(e){return this.partialReferences.has(e)}hasCacheReferences(e){return this.cacheReferences.has(e)}};ji.instance=null;(typeof ji.instance>"u"||ji.instance==null)&&(ji.instance=new ji);var _b=ji;var fn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(e){let t=new fn;return t.offset=this.offset+e,t.index=this.index+e,t.line=this.line,t.char=this.char+e,t}isBefore(e){return e==null?!1:e.line>this.line||e.line==this.line&&this.offset<e.offset}isWithin(e,t,r=0){return e==null||t==null?!1:this.index>=e.index&&this.index<=t.index+r}isWithinRange(e){return e==null?!1:e.start!=null&&e.end!=null?this.isWithin(e.start,e.end):!1}};var Rd=class{constructor(){this.start=null;this.end=null}},Oo=Rd;Oo.Empty=new Rd;function yb(n,e){let t=e.copy(),r=e.copy();return r.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"group",introducedBy:n}),r.addVariable({sourceName:"*internal.group_by",sourceField:null,dataType:"string",name:"key",introducedBy:n}),r.addScopeList("items",t),e.addScopeList("groups",r),e}function bb(n,e){let t=e.copy();return e.addScopeList("items",t),e}var Nb=[{name:"key_by",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Re-keys the array or collection using the provided field name.",docLink:null,parameters:[{name:"field",description:"The field to re-key the array or collection by."}],canBeParameter:!0,isDeprecated:!1},{name:"as",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Alias the array variable with a key.",docLink:"https://statamic.dev/modifiers/as",parameters:[{name:"alias",description:"The alias name."}],canBeParameter:!0,isDeprecated:!1},{name:"ampersand_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts the array into a comma delimited string, with an ampersand before the last item.",docLink:"https://statamic.dev/modifiers/ampersand_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Collapses an array of arrays into a single, flat, array.",docLink:"https://statamic.dev/modifiers/collapse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"contains",acceptsType:["array","string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the value contains another value.",docLink:"https://statamic.dev/modifiers/contains",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"count",acceptsType:["array"],returnsType:["number"],forFieldType:[],description:"Returns the number of items in the array.",docLink:"https://statamic.dev/modifiers/count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dl",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an associative array into an HTML definition list.",docLink:"https://statamic.dev/modifiers/dl",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Breaks a string into an array on a given delimiter.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The delimiter to break the string apart on."}],canBeParameter:!0,isDeprecated:!1},{name:"flatten",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Flattens a multi-dimensional array.",docLink:"https://statamic.dev/modifiers/flatten",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"flip",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Swaps the array keys with their values.",docLink:"https://statamic.dev/modifiers/flip",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"group_by",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Groups the array items by the given key.",docLink:"https://statamic.dev/modifiers/group_by",parameters:[{name:"key",description:"The key to group by."}],canBeParameter:!0,augmentScope:yb,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value to check for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_empty",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if the array is empty.",docLink:"https://statamic.dev/modifiers/is_empty",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"join",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turn an array into a string by gluing together all the data.",docLink:"https://statamic.dev/modifiers/join",parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"joinplode",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turn an array into a string by gluing together all the data.",docLink:null,parameters:[{name:"glue",description:"The string to combine the parts by."}],canBeParameter:!0,isDeprecated:!1},{name:"limit",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Limits the number of items returned in the array",docLink:"https://statamic.dev/modifiers/limit",parameters:[{name:"count",description:"The maximum number of items to return."}],canBeParameter:!0,isDeprecated:!1},{name:"list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts the array into a comma-separated string.",docLink:"https://statamic.dev/modifiers/list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"offset",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Offsets the items returned in the array.",docLink:"https://statamic.dev/modifiers/offset",parameters:[{name:"offset",description:"The one-based index to start retrieving items."}],canBeParameter:!0,isDeprecated:!1},{name:"ol",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns the array into an HTML ordered list.",docLink:"https://statamic.dev/modifiers/ol",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"option_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/option_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"pluck",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Plucks a value from a collection of items.",parameters:[{name:"value",description:"The value to pluck from the array or collection."}],canBeParameter:!0,docLink:null,isDeprecated:!1},{name:"pad",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Pads the array to a specified length with the given value.",docLink:"https://statamic.dev/modifiers/pad",parameters:[{name:"length",description:"The desired length of the array."},{name:"value",description:"The value to pad the array with."}],canBeParameter:!0,isDeprecated:!1},{name:"piped",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns an array into a pipe-delimited string.",docLink:"https://statamic.dev/modifiers/piped",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sentence_list",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:'Turns the array into a comma-delimited list, with the word "and" before the last item.',docLink:"https://statamic.dev/modifiers/sentence_list",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"shuffle",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Randomizes the order of array elements.",docLink:"https://statamic.dev/modifiers/shuffle",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"sort",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Sorts the array by a key in ascending or descending order.",docLink:"https://statamic.dev/modifiers/sort",parameters:[{name:"key",description:"The key to sort by."},{name:"order",description:"The sort direction. `asc` or `desc`."}],canBeParameter:!0,isDeprecated:!1},{name:"sum",acceptsType:["array"],returnsType:["number"],forFieldType:[],description:"Returns the sum of all items in the array.",docLink:"https://statamic.dev/modifiers/sum",parameters:[{name:"key",description:"The value to sum."}],canBeParameter:!1,isDeprecated:!1},{name:"ul",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Turns the array into an HTML unordered list.",docLink:"https://statamic.dev/modifiers/ul",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"unique",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Returns all unique items in the array.",docLink:"https://statamic.dev/modifiers/unique",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"where",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Filters the array by a given key and value.",docLink:"https://statamic.dev/modifiers/where",parameters:[{name:"key",description:"The property to filter by."},{name:"value",description:"The value to compare to."}],canBeParameter:!0,isDeprecated:!1},{name:"split",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Splits an array into smaller arrays with the provided size.",canBeParameter:!0,docLink:"",parameters:[{name:"size",description:"The size of each new array"}],augmentScope:bb,isDeprecated:!1},{name:"compact",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Accepts a comma-delimited list of variable names and return an array with their values.",canBeParameter:!0,docLink:"",parameters:[{name:"variables",description:"A comma-delimited list of variable names."}],isDeprecated:!1},{name:"classes",acceptsType:["array"],returnsType:["string"],forFieldType:[],description:"Converts an array of conditional class names to a CSS class list.",canBeParameter:!0,docLink:"",parameters:[],isDeprecated:!1}];var Ib=[{name:"background_position",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Converts an asset focal point into a background-position CSS property.",docLink:"https://statamic.dev/modifiers/background_position",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"image",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Generates an HTML image element with the variable's value as the src.",docLink:"https://statamic.dev/modifiers/image",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"output",acceptsType:["string"],returnsType:["string"],forFieldType:["assets"],description:"Returns the string output of an Asset file's contents.",docLink:"https://statamic.dev/modifiers/output",parameters:[],canBeParameter:!1,isDeprecated:!1}];var xb=[{name:"contains_all",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_all",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"contains_any",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string contains all of the provided needles.",docLink:"https://statamic.dev/modifiers/contains_any",parameters:[{name:"needle",description:"The string(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"ends_with",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a string ends with another string.",docLink:"https://statamic.dev/modifiers/ends_with",parameters:[{name:"value",description:"The value to check against."}],canBeParameter:!1,isDeprecated:!1},{name:"has_lower_case",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains any lowercase characters.",docLink:"https://statamic.dev/modifiers/has_lower_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"has_upper_case",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains any uppercase characters.",docLink:"https://statamic.dev/modifiers/has_upper_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"in_array",acceptsType:["array"],returnsType:["boolean"],forFieldType:[],description:"Tests if an array contains a specific value.",docLink:"https://statamic.dev/modifiers/in_array",parameters:[{name:"needle",description:"The value(s) to search for."}],canBeParameter:!1,isDeprecated:!1},{name:"is_after",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is after another date.",docLink:"https://statamic.dev/modifiers/is_after",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_alphanumeric",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only alphanumeric characters.",docLink:"https://statamic.dev/modifiers/is_alphanumeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_before",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if a date is before another date.",docLink:"https://statamic.dev/modifiers/is_before",parameters:[{name:"date",description:"The date to compare to."}],canBeParameter:!1,isDeprecated:!1},{name:"is_between",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if a date is between two other dates.",docLink:"https://statamic.dev/modifiers/is_between",parameters:[{name:"start_date",description:"The start date to compare."},{name:"end_date",description:"The end date to compare."}],canBeParameter:!1,isDeprecated:!1},{name:"is_blank",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only whitespace characters.",docLink:"https://statamic.dev/modifiers/is_blank",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],forFieldType:["text","textarea"],description:"Tests if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_future",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is in the future.",docLink:"https://statamic.dev/modifiers/is_future",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_json",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string is valid JSON.",docLink:"https://statamic.dev/modifiers/is_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_leap_year",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a leap year.",docLink:"https://statamic.dev/modifiers/is_leap_year",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_numeric",acceptsType:["string","number"],returnsType:["boolean"],forFieldType:[],description:"Tests if the value is a number or numeric string.",docLink:"https://statamic.dev/modifiers/is_numeric",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_past",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is in the past.",docLink:"https://statamic.dev/modifiers/is_past",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_today",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is today.",docLink:"https://statamic.dev/modifiers/is_today",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_uppercase",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string contains only uppercase characters.",docLink:"https://statamic.dev/modifiers/is_uppercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if the string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekday",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a week day.",docLink:"https://statamic.dev/modifiers/is_weekday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_weekend",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is a weekend day.",docLink:"https://statamic.dev/modifiers/is_weekend",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_yesterday",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is yesterday.",docLink:"https://statamic.dev/modifiers/is_yesterday",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_tomorrow",acceptsType:["string","date"],returnsType:["boolean"],forFieldType:["date"],description:"Tests if the date is tomorrow.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"starts_with",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Tests if a value starts with the provided value.",docLink:"https://statamic.dev/modifiers/starts_with",parameters:[{name:"value",description:"The value to test for."}],canBeParameter:!1,isDeprecated:!1}];var Ab=[{name:"days_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of days since a given date.",docLink:"https://statamic.dev/modifiers/days_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"format_translated",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Returns a formatted Carbon datetime/string.",docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using the provided format using PHP's [date variables](https://www.php.net/date).",hoverDescription:`Formats the date using the provided format using PHP's [date variables](https://www.php.net/date).

## Formatting Options

See [PHP: DateTimeInterface::format](https://www.php.net/manual/en/datetime.format.php) for all available options.

| Format Character | Description | Example |
|:----|----|---|
| Day | --- | --- |
| d | Day of the month, 2 digits with leading zeros | 01 to 31 |
| D |A textual representation of a day | Mon - Sun |
| j | Day of the month, without leading zeros | 1 - 31 |
| l | The day of the week | Sunday - Saturday |
| N | ISO 8601 representation of the day of the week | 1 (Monday) - 7 (Sunday) |
| S | English ordinal suffix for the day | st, nd, rt, or th |
| w | Numeric day of the week | 0 (Sunday) - 6 (Saturday) |
| z | Day of the year, starting at 0 | 0 - 365 |
| Week | --- | --- |
| W | ISO 8601 week number of the year, starting on Monday | 42 |
| Month | --- | --- |
| F | Text representation of the month | January - December |
| m | Numeric representation of the month, with leading zeros | 01 - 12 |
| M | A short text representation of the month | Jan - Dec |
| n | Numeric representation of the month | 1 - 12 |
| t | Number of days in the month | 28 - 31 |
| Year | --- | --- |
| L | Indicates if it's a leap year | 1 if true, 0 otherwise |
| Y | Four digit representation of the year | 2022 |
| y | Two digit representation of the year | 22 |
| Time | --- | --- |
| a | Lowercase Anti meridiem and Post meridiem | am or pm |
| A | Uppercase Anti meridiem and Post meridiem | AM or PM |
| g | 12-hour hour format without leading zeros | 1 - 12 |
| G | 24-hour hour format without leading zeros | 0 - 23 |
| h | 12-hour hour format with leading zeros | 01 - 12 |
| H | 24-hour hour format with leading zeros | 00 - 23 |
| i | Minutes with leading zeros | 00 - 59 |
| s | Seconds with leading zeros | 00 - 59 |
| Timezone | --- | --- |
| e | Timezone identifier | UTC, GMT |
| I | Indicates if date is in daylight saving time | 1 if true, 0 otherwise |
| T | Timezone appreviation | EST, MDT, +05 |
`,docLink:"https://statamic.dev/modifiers/format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!1},{name:"format_localized",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using server's locale, using PHP's [strftime format variables](https://www.php.net/strftime).",docLink:"https://statamic.dev/modifiers/format_localized",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!0,isDeprecated:!0,getDeprecatedMessage(){return"The format_localized modifier is deprecated. Alternatives, such as the iso_format modifier, should be used instead."}},{name:"hours_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of hours since the date.",docLink:"https://statamic.dev/modifiers/hours_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"iso_format",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Formats the date using an ISO format.",docLink:"https://statamic.dev/modifiers/iso_format",parameters:[{name:"format",description:"The format to use."}],canBeParameter:!1,isDeprecated:!1},{name:"minutes_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of minutes since the date.",docLink:"https://statamic.dev/modifiers/minutes_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"modify_date",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Alters the date by incrementing or decrementing it in a format accepted by PHP's [strtotime](https://www.php.net/strtotime) function.",docLink:"https://statamic.dev/modifiers/modify_date",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"months_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of months since the date.",docLink:"https://statamic.dev/modifiers/months_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"relative",acceptsType:["string","date"],returnsType:["string"],forFieldType:["date"],description:"Returns a human readable date difference.",docLink:"https://statamic.dev/modifiers/relative",parameters:[{name:"add_ago",description:"Whether to add the relative suffix words at the end of the string."}],canBeParameter:!1,isDeprecated:!1},{name:"seconds_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of seconds since the date.",docLink:"https://statamic.dev/modifiers/seconds_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"timezone",acceptsType:["string","date"],returnsType:["string","date"],forFieldType:["date"],description:"Applies a timezone to the date.",docLink:"https://statamic.dev/modifiers/timezone",parameters:[{name:"timezone",description:"The timezone to apply."}],canBeParameter:!1,isDeprecated:!1},{name:"weeks_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of weeks since the date.",docLink:"https://statamic.dev/modifiers/weeks_ago",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"years_ago",acceptsType:["string","date"],returnsType:["number"],forFieldType:["date"],description:"Returns the number of years since the date.",docLink:"https://statamic.dev/modifiers/years_ago",parameters:[],canBeParameter:!1,isDeprecated:!1}];var Pb=[{name:"chunk",acceptsType:["array"],returnsType:["array"],forFieldType:[],description:"Breaks the array or collection into smaller arrays of a given size.",docLink:"https://statamic.dev/modifiers/chunk",parameters:[{name:"chunk_size",description:"The maximum length of each new chunk."}],canBeParameter:!0,isDeprecated:!1},{name:"favicon",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates a favicon HTML meta tag for the given value.",docLink:"https://statamic.dev/modifiers/favicon",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"first",acceptsType:["string","array"],returnsType:["*"],forFieldType:[],description:"Returns the specified number of characters/items from the beginning of the string/array.",docLink:"https://statamic.dev/modifiers/first",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"last",acceptsType:["string","array"],returnsType:["*"],forFieldType:[],description:"Returns the specified number of characters/items from the end of the string/array.",docLink:"https://statamic.dev/modifiers/last",parameters:[{name:"count",description:"The number of characters to return."}],canBeParameter:!0,isDeprecated:!1},{name:"link",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates an HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/link",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"mailto",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Generates a mailto HTML link for the provided value.",docLink:"https://statamic.dev/modifiers/mailto",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"markdown",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses the value as Markdown and returns the HTML.",docLink:"https://statamic.dev/modifiers/markdown",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"nl2br",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces line breaks with HTML `<br>` tags.",docLink:"https://statamic.dev/modifiers/nl2br",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Modifies the input string by replacing it with special characters, making it harder for bots but remains readable to site visitors.",docLink:"https://statamic.dev/modifiers/obfuscate",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"obfuscate_email",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Obfuscates an email address with special HTML characters.",docLink:"https://statamic.dev/modifiers/obfuscate_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"strip_tags",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes HTML tags from the string.",docLink:"https://statamic.dev/modifiers/strip_tags",parameters:[{name:"tags",description:"The HTML tag(s) to remove from the string."}],canBeParameter:!1,isDeprecated:!1},{name:"table",acceptsType:["array"],returnsType:["string"],forFieldType:["table"],description:"Turns a [Table FieldType](https://statamic.dev/fieldtypes/table) array into an HTML table.",docLink:"https://statamic.dev/modifiers/table",parameters:[{name:"content_markdown",description:"Whether to parse cell contents as Markdown."}],canBeParameter:!1,isDeprecated:!1},{name:"textile",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses a string with [Textile](http://demo.textilewiki.com/theme-default/) and returns the HTML.",docLink:"https://statamic.dev/modifiers/textile",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"wrap",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps a string with a given HTML tag.",docLink:"https://statamic.dev/modifiers/wrap",parameters:[{name:"expression",description:"The HTML tag or Emmet-style expression to wrap the value in."}],canBeParameter:!1,isDeprecated:!1}];var vb=[{name:"add",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!0,isDeprecated:!1},{name:"+",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Adds two values together.",docLink:"https://statamic.dev/modifiers/add",parameters:[{name:"value",description:"The value to add."}],canBeParameter:!1,isDeprecated:!1},{name:"ceil",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds the value to the next whole number.",docLink:"https://statamic.dev/modifiers/ceil",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"divide",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Divides two values.",docLink:"https://statamic.dev/modifiers/divide",parameters:[{name:"value",description:"The value to divide."}],canBeParameter:!0,isDeprecated:!1},{name:"floor",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds a number down to the next whole number.",docLink:"https://statamic.dev/modifiers/floor",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"format_number",acceptsType:["number"],returnsType:["string"],forFieldType:[],description:"Formats a number.",docLink:"https://statamic.dev/modifiers/format_number",parameters:[{name:"precision",description:"Number of decimal places before rounding."},{name:"decimal_separator",description:"The decimal separator (defaults to `.`)."},{name:"thousands_separator",description:"The thousands separator (default `,`)."}],canBeParameter:!0,isDeprecated:!1},{name:"mode",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"",docLink:"",parameters:[],canBeParameter:!0,isDeprecated:!1},{name:"multiply",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!0,isDeprecated:!1},{name:"*",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Multiplies two values.",docLink:"https://statamic.dev/modifiers/multiply",parameters:[{name:"value",description:"The value to multiply."}],canBeParameter:!1,isDeprecated:!1},{name:"round",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Rounds a number to a specified precision.",docLink:"https://statamic.dev/modifiers/round",parameters:[{name:"precision",description:"The number of digits after the decimal point."}],canBeParameter:!0,isDeprecated:!1},{name:"subtract",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!0,isDeprecated:!1},{name:"-",acceptsType:["number"],returnsType:["number"],forFieldType:[],description:"Subtracts two values.",docLink:"https://statamic.dev/modifiers/subtract",parameters:[{name:"value",description:"The value to subtract."}],canBeParameter:!1,isDeprecated:!1}];var Cb=[{name:"partial",acceptsType:["*"],returnsType:["*view*"],forFieldType:[],description:"Injects data into a partial and renders it.",docLink:"https://statamic.dev/modifiers/partial",parameters:[{name:"partial",description:"The name of the partial."}],canBeParameter:!1,isDeprecated:!1},{name:"macro",acceptsType:["*"],returnsType:["*"],forFieldType:[],description:"Runs a pre-configured macro on the data.",docLink:"https://statamic.dev/modifiers/macro",parameters:[{name:"macro",description:"The macro name."}],canBeParameter:!1,isDeprecated:!1},{name:"url",acceptsType:["string","*"],returnsType:["string"],forFieldType:[],description:"Locates the URL of an asset, page, entry, or taxonomy term based on the variable contents.",docLink:"https://statamic.dev/modifiers/url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"bool_string",acceptsType:["boolean","*"],returnsType:["string"],canBeParameter:!1,description:'Converts the provided value to a "true" or "false" string',docLink:null,forFieldType:["toggle"],isDeprecated:!1,parameters:[{name:"value",description:"The truthy value to convert to a string."}]}];var Sb=[{name:"ascii",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all non-ASCII characters with their closest ASCII counterparts.",docLink:"https://statamic.dev/modifiers/ascii",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"at",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns the character at a given zero-based position.",docLink:"https://statamic.dev/modifiers/at",parameters:[{name:"position",description:"The zero-based position to retrieve a character from."}],canBeParameter:!0,isDeprecated:!1},{name:"backspace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes a specified number of characters from the end of a string.",docLink:"https://statamic.dev/modifiers/backspace",parameters:[{name:"character_count",description:"The number of characters to remove from the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"camelize",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the string into camelCase.",docLink:"https://statamic.dev/modifiers/camelize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"cdata",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps the string in CDATA XML tags.",docLink:"https://statamic.dev/modifiers/cdata",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"collapse_whitespace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Trims a string and replaces consecutive whitespace characters with a single space.",docLink:"https://statamic.dev/modifiers/collapse_whitespace",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"count_substring",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Counts the number of occurrences of a term within the string.",docLink:"https://statamic.dev/modifiers/count_substring",parameters:[{name:"term",description:"The sub-string to search for."}],canBeParameter:!0,isDeprecated:!1},{name:"dashify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a lower-cased and trimmed string, separated by dashes.",docLink:"https://statamic.dev/modifiers/dashify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"deslugify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all hyphens and underscores with spaces.",docLink:"https://statamic.dev/modifiers/deslugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"embed_url",acceptsType:["string"],returnsType:["string"],forFieldType:["video"],description:"Converts a YouTube or Viemo link into their embed URLs.",docLink:"https://statamic.dev/modifiers/embed_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trackable_embed_url",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Get the embed URL when given a YouTube or Vimeo link that's direct to the page.",docLink:null,parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"ensure_left",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string begins with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_left",parameters:[{name:"start_string",description:"The value that should be at the start of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"ensure_right",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string ends with the specified string.",docLink:"https://statamic.dev/modifiers/ensure_right",parameters:[{name:"end_string",description:"The value that should be at the end of the string."}],canBeParameter:!0,isDeprecated:!1},{name:"entities",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Encode a string with HTML entities.",docLink:"https://statamic.dev/modifiers/entities",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"excerpt",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Breaks a string at a given marker.",docLink:"https://statamic.dev/modifiers/excerpt",parameters:[{name:"marker",description:"The substring to break on."}],canBeParameter:!1,isDeprecated:!1},{name:"explode",acceptsType:["string"],returnsType:["array"],forFieldType:[],description:"Breaks a string into an array of strings.",docLink:"https://statamic.dev/modifiers/explode",parameters:[{name:"delimiter",description:"The string to split the larger string by."}],canBeParameter:!0,isDeprecated:!1},{name:"gravatar",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts an email string to a Gravatar image URL.",docLink:"https://statamic.dev/modifiers/gravatar",parameters:[{name:"image size",description:"The desired image size."}],canBeParameter:!0,isDeprecated:!1},{name:"insert",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Inserts a string at the position provided.",docLink:"https://statamic.dev/modifiers/insert",parameters:[{name:"value",description:"The value to insert."},{name:"position",description:"The zero based position to insert the text at."}],canBeParameter:!0,isDeprecated:!1},{name:"is_email",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if the string is a valid email address.",docLink:"https://statamic.dev/modifiers/is_email",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_embeddable",acceptsType:["string"],returnsType:["boolean"],forFieldType:["video"],description:"Checks to see if a video URL is embeddable.",docLink:"https://statamic.dev/modifiers/is_embeddable",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_lowercase",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if the string contains only lowercase characters.",docLink:"https://statamic.dev/modifiers/is_lowercase",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"is_url",acceptsType:["string"],returnsType:["boolean"],forFieldType:[],description:"Returns true if a string is a valid URL.",docLink:"https://statamic.dev/modifiers/is_url",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lcfirst",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the first character of the value to lower case.",docLink:"https://statamic.dev/modifiers/lcfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"length",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Returns the number of items in an array or number of characters in a string.",docLink:"https://statamic.dev/modifiers/length",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"lower",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all characters to lowercase.",docLink:"https://statamic.dev/modifiers/lower",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"md5",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Creates an MD5 hash of the variable.",docLink:"https://statamic.dev/modifiers/md5",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"rawurlencode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-encode a variable according to RFC-3986.",docLink:"https://statamic.dev/modifiers/rawurlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"read_time",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns an estimated read time, in minutes.",docLink:"https://statamic.dev/modifiers/read_time",parameters:[{name:"words per minute",description:"The words per minute to use as an estimate."}],canBeParameter:!0,isDeprecated:!1},{name:"regex_replace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all regex matches within a string.",docLink:"https://statamic.dev/modifiers/regex_replace",parameters:[{name:"pattern",description:"The regex pattern."},{name:"replace",description:"The replacement value."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_left",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that the string never begins with a specified string.",docLink:"https://statamic.dev/modifiers/remove_left/",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"remove_right",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Ensures that a string never ends with a specified string.",docLink:"https://statamic.dev/modifiers/remove_right",parameters:[{name:"value",description:"The value to remove."}],canBeParameter:!0,isDeprecated:!1},{name:"replace",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces all occurrences of a string with a different value.",docLink:"https://statamic.dev/modifiers/replace",parameters:[{name:"needle",description:"The string to search for."},{name:"value",description:"The value to replace all occurrences with."}],canBeParameter:!0,isDeprecated:!1},{name:"reverse",acceptsType:["string","array"],returnsType:["string","array"],forFieldType:[],description:"Reverses all characters in a string, or all items in an array.",docLink:"https://statamic.dev/modifiers/reverse",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"safe_truncate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/safe_truncate",parameters:[{name:"length",description:"The desired string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"sanitize",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts special characters to HTML entities.",docLink:"https://statamic.dev/modifiers/sanitize",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"segment",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a segment by number from any valid URL or URI.",docLink:"https://statamic.dev/modifiers/segment",parameters:[{name:"segment",description:"The one-based segment to return."}],canBeParameter:!0,isDeprecated:!1},{name:"singular",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns the singular form of an English word.",docLink:"https://statamic.dev/modifiers/singular",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"slugify",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts the string into an URL slug.",docLink:"https://statamic.dev/modifiers/slugify",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"smartypants",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Translates plain ASCII punctuation characters into typographic punctuation HTML entities.",docLink:"https://statamic.dev/modifiers/smartypants",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"spaceless",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes excess whitespace and line breaks from a string.",docLink:"https://statamic.dev/modifiers/spaceless",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"substr",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a portion of a string based on provided a start index, and optional length.",docLink:"https://statamic.dev/modifiers/substr",parameters:[{name:"start",description:"The 0-based index to start searching."},{name:"length",description:"An optional length for the string to find."}],canBeParameter:!1,isDeprecated:!1},{name:"surround",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Surrounds a string with another string.",docLink:"https://statamic.dev/modifiers/surround",parameters:[{name:"value",description:"The value to surround the string with."}],canBeParameter:!1,isDeprecated:!1},{name:"swap_case",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a case swapped version of the string.",docLink:"https://statamic.dev/modifiers/swap_case",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"tidy",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a string with smart quotes, ellipsis characters, and dashes from Windows-1252 replaced by ASCII equivalents.",docLink:"https://statamic.dev/modifiers/tidy",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"title",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a Title Cased version of the string.",docLink:"https://statamic.dev/modifiers/title",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"trim",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Removes whitespace from the start and end of the string.",docLink:"https://statamic.dev/modifiers/trim",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"truncate",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Truncates a string to a given length.",docLink:"https://statamic.dev/modifiers/truncate",parameters:[{name:"length",description:"The maximum string length."},{name:"suffix",description:"An optional suffix to append to the string if truncation occurs."}],canBeParameter:!1,isDeprecated:!1},{name:"ucfirst",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Upper cases the first character in the string.",docLink:"https://statamic.dev/modifiers/ucfirst",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"underscored",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Returns a lower-cased and trimmed version of the string, separated by underscores.",docLink:"https://statamic.dev/modifiers/underscored",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"upper",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Transforms the string to uppercase.",docLink:"https://statamic.dev/modifiers/upper",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urldecode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-decodes the string.",docLink:"https://statamic.dev/modifiers/urldecode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"urlencode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"URL-encodes the string.",docLink:"https://statamic.dev/modifiers/urlencode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"widont",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Attempts to prevent lines with single words.",docLink:"https://statamic.dev/modifiers/widont",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"word_count",acceptsType:["string"],returnsType:["number"],forFieldType:[],description:"Returns the number of words in the string.",docLink:"https://statamic.dev/modifiers/word_count",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"add_slashes",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Adds slashes before characters that need to be escaped.",docLink:"https://statamic.dev/modifiers/add_slashes",canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"antlers",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Parses the provided value as Antlers, and returns the result.",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_items",acceptsType:["string"],returnsType:["array"],forFieldType:["bard"],description:"Converts a Bard value to a flat array of nodes and marks.",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_text",acceptsType:["array","string"],returnsType:["string"],forFieldType:["bard"],description:"Converts a Bard value to plain text (excluding sets).",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"bard_html",acceptsType:["array","string"],returnsType:["string"],forFieldType:["bard"],description:"Converts a Bard value to HTML (excluding sets).",docLink:null,canBeParameter:!1,parameters:[],isDeprecated:!1},{name:"mark",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps matched words and phrases in <mark> tags.",docLink:null,canBeParameter:!1,parameters:[{name:"search",description:"The search word or phrase to wrap in <mark> tags."}],isDeprecated:!1},{name:"regex_mark",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Wraps matched words and phrases in <mark> tags using regular expressions.",docLink:null,canBeParameter:!1,parameters:[{name:"pattern",description:"The search pattern used to wrap content in <mark> tags."}],isDeprecated:!1}];var Eb=[{name:"console_log",acceptsType:["*"],returnsType:["null"],forFieldType:[],description:"Displays variable data in the browser's JavaScript console.",docLink:"https://statamic.dev/modifiers/console_log",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"decode",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all HTML entities to their character codes.",docLink:"https://statamic.dev/modifiers/decode",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"dump",acceptsType:["*"],returnsType:["null"],forFieldType:[],description:"Displays variable data in the browser.",docLink:"https://statamic.dev/modifiers/dump",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"full_urls",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Replaces root-relative URLs with absolute URLs.",docLink:"https://statamic.dev/modifiers/full_urls",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"repeat",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Repeats a value a given number of times.",docLink:"https://statamic.dev/modifiers/repeat",parameters:[{name:"times",description:"The number of times to repeat the value."}],canBeParameter:!0,isDeprecated:!1},{name:"to_spaces",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts all tabs to spaces.",docLink:"https://statamic.dev/modifiers/to_spaces",parameters:[{name:"space_count",description:"The number of spaces to replace tabs with."}],canBeParameter:!1,isDeprecated:!1},{name:"to_tabs",acceptsType:["string"],returnsType:["string"],forFieldType:[],description:"Converts spaces to tabs.",docLink:"https://statamic.dev/modifiers/to_tabs",parameters:[{name:"space_count",description:"The number of spaces to convert to tabs."}],canBeParameter:!1,isDeprecated:!1},{name:"to_json",acceptsType:["*"],returnsType:["string"],forFieldType:[],description:"Converts the data to JSON",docLink:"https://statamic.dev/modifiers/to_json",parameters:[],canBeParameter:!1,isDeprecated:!1},{name:"to_bool",acceptsType:["*"],returnsType:["boolean"],forFieldType:[],description:"Converts the data to a boolean/truthy value.",parameters:[],canBeParameter:!1,docLink:null,isDeprecated:!1}];var bi=class{constructor(){this.registeredModifiers=new Map;this.acceptTypedModifierReference=new Map;this.returnTypeModifierReference=new Map;this.macros=new Map;this.modifierNameCache=[]}reset(){this.modifierNameCache=[],this.registeredModifiers.clear(),this.acceptTypedModifierReference.clear(),this.returnTypeModifierReference.clear()}getRegisteredModifiers(){return this.registeredModifiers}resetMacros(){this.macros.clear()}loadCoreModifiers(){this.registerModifiers(Nb),this.registerModifiers(Ib),this.registerModifiers(xb),this.registerModifiers(Ab),this.registerModifiers(Pb),this.registerModifiers(vb),this.registerModifiers(Eb),this.registerModifiers(Sb),this.registerModifiers(Cb)}getModifierNames(){return this.modifierNameCache}registerMacro(e){this.macros.set(e.name,e)}registerMacros(e){for(let t=0;t<e.length;t++)this.registerMacro(e[t])}hasMacro(e){if(this.macros.has(e)){let t=this.macros.get(e);return!(typeof t>"u"||t===null)}return!1}getMacro(e){if(this.macros.has(e)){let t=this.macros.get(e);return typeof t>"u"||t===null?null:t}return null}getMacroManifestingType(e){let t=this.getMacro(e);return t==null?"":t.manifestsType}getRegisteredModifier(e){return this.registeredModifiers.has(e)?this.registeredModifiers.get(e):null}getModifiersForType(e){let t=Tc(e);return this.acceptTypedModifierReference.has(t)?this.acceptTypedModifierReference.get(t):[]}getProbableReturnType(e,t){return e==null||e.returnsType.length==0?"":t&&e.returnsType.includes("array")?"array":e.returnsType[0]}registerModifiers(e){for(let t=0;t<e.length;t++){let r=e[t];this.modifierNameCache.push(r.name);for(let i=0;i<r.acceptsType.length;i++){let s=r.acceptsType[i];this.acceptTypedModifierReference.has(s)==!1&&this.acceptTypedModifierReference.set(s,[]),this.acceptTypedModifierReference.get(s)?.push(r)}for(let i=0;i<r.returnsType.length;i++){let s=r.returnsType[i];this.returnTypeModifierReference.has(s)==!1&&this.returnTypeModifierReference.set(s,[]),this.returnTypeModifierReference.get(s)?.push(r)}this.registeredModifiers.set(e[t].name,e[t])}}registerModifier(e){let t=[];t.push(e),this.registerModifiers(t)}getModifier(e){if(this.registeredModifiers.has(e)==!1)return null;let t=this.registeredModifiers.get(e);return typeof t>"u"||t==null?null:t}hasModifier(e){if(!this.registeredModifiers.has(e))return!1;let t=this.registeredModifiers.get(e);return!(typeof t>"u"||t==null)}};bi.instance=null;(typeof bi.instance>"u"||bi.instance==null)&&(bi.instance=new bi,bi.instance.loadCoreModifiers());var ht=bi;var _c=class{constructor(e){this.parameterModifiers=[];this.hasMixedModifierStyles=!1;this.modifierNames=[];this.node=e}isPaired(){return this.node instanceof X?this.node.isPaired():!1}getModifierValue(e){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let t=0;t<this.node.modifierChain.modifierChain.length;t++){let r=this.node.modifierChain.modifierChain[t];if(r.nameNode?.name==e)return r.valueNodes.length>0?r.valueNodes[0].content:""}if(this.hasParameterModifiers())for(let t=0;t<this.parameterModifiers.length;t++){let r=this.parameterModifiers[t];if(r.name==e)return r.value}return null}getModifierRange(e){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0)for(let t=0;t<this.node.modifierChain.modifierChain.length;t++){let r=this.node.modifierChain.modifierChain[t];if(r.nameNode?.name==e)return r.valueNodes.length>0?{start:r.startPosition,end:r.endPosition}:null}if(this.hasParameterModifiers())for(let t=0;t<this.parameterModifiers.length;t++){let r=this.parameterModifiers[t];if(r.name==e&&r.namePosition!=null&&r.valuePosition!=null)return{start:r.namePosition.start,end:r.valuePosition.end}}return null}getLastManifestedModifierRuntimeType(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null){if(this.node.modifierChain.lastManifestedModifier.parameters.length>0&&this.node.modifierChain.lastManifestedModifier.modifier!=null&&ht.instance!=null){let e=this.node.modifierChain.lastManifestedModifier.modifier;return ht.instance.getProbableReturnType(e,this.isPaired())}return"*"}if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let t=0;t<e.length;t++)if(e[t].modifier!=null&&ht.instance!=null){let r=e[t].modifier;return ht.instance.getProbableReturnType(r,this.isPaired())}}return"*"}getLastManifestedModifierValue(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastManifestedModifier!=null)return this.node.modifierChain.lastManifestedModifier.parameters.length>0?this.node.modifierChain.lastManifestedModifier.parameters[0].value:"";if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let t=0;t<e.length;t++)if(e[t].modifier!=null)return e[t].value}return""}getLastManifestedModifier(){if(this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0&&this.node.modifierChain.lastModifier!=null)return this.node.modifierChain.lastModifier;if(this.parameterModifiers.length>0){let e=this.parameterModifiers.reverse();for(let t=0;t<e.length;t++)if(e[t].modifier!=null)return e[t].modifier}return null}hasModifiers(){return this.node.modifierChain==null||this.node.modifierChain.modifierChain.length==0?this.parameterModifiers.length>0:!0}hasParameterModifiers(){return this.parameterModifiers.length>0}hasShorthandModifiers(){return this.node.modifierChain!=null&&this.node.modifierChain.modifierChain.length>0}hasModifier(e){return this.modifierNames.includes(e)}};function kd(n){let e=[];return n.forEach(t=>{t instanceof X?e.push(t):t instanceof Xt&&t.logicBranches.length>0&&t.logicBranches.forEach(r=>{if(r.head!=null){let i=r.head;i.originalNode!=null?e.push(i.originalNode):e.push(i)}})}),e}var PE=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("");function Rb(n){return(typeof n=="number"||typeof n=="string"&&PE.indexOf(n.slice(-1))===-1)&&n!==""&&!isNaN(n)}var J=class{static boolLabel(e){return e?"true":"false"}static normalizeLineEndings(e,t=`
`){return e.replace(/\r?\n/g,t)}static breakByNewLine(e){return e.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static split(e){return e.split("")}static substring(e,t,r){return e.substr(t,r)}static ctypeSpace(e){return e?.search(/^[\f\n\r\t\v ]+$/g)!==-1}static ctypeAlpha(e){return e?.search(/^[A-Za-z]+$/g)!==-1}static ctypeDigit(e){return e?.search(/^[\d]+$/g)!==-1}static ctypePunct(e){return e?.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g)!==-1}static trimLeft(e,t="\\s"){return e.replace(new RegExp("^["+t+"]+"),"")}static trimRight(e,t="\\s"){return e.replace(new RegExp("["+t+"]+$"),"")}static isNumeric(e){return Rb(e)}static substringCount(e,t){let r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(e.match(new RegExp(r,"gi"))||[]).length}static getLastLine(e){let t=J.breakByNewLine(e);return t.length==0?"":t[t.length-1]}static getFirstLine(e){let t=J.breakByNewLine(e);return t.length==0?"":t[0]}static snakeCase(e){return e.replace(/([A-Z])/g,t=>`_${t.toLowerCase()}`).replace(/^_/,"")}static makeSlug(e){e<=2&&(e=7);let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=r.length;for(let a=0;a<e-1;a++)t+=r.charAt(Math.floor(Math.random()*i));return("A"+t+"A").toLowerCase()}};var yc=class{constructor(e){this.node=e}findParentWithName(e){let t=this.node.getParser();return t==null?null:t.structure.findParentWithName(e,this.node)}};var wb=Me(bc(),1);var Q=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null;this.actions=[];this.lsRange=null;this.data=null}hash(){let e="";return this.node!=null&&(e=(this.node.endPosition?.offset??0).toString()+"|"+(this.node.startPosition?.offset??0).toString()+"|"),wb.Md5.hashStr(e+"|"+this.errorCode)}static makeSyntaxError(e,t,r,i){i==null&&(i=0);let s=new Q;return s.errorCode=e,s.node=t,s.message=r,s.level=i,s}};var P=class{};P.TYPE_EXPECTING_OPERAND="ANTLR_001",P.TYPE_UNEXPECTED_END_OF_INPUT="ANTLR_002",P.TYPE_RUNTIME_TYPE_MISMATCH="ANTLR_003",P.TYPE_RUNTIME_DIVIDE_BY_ZERO="ANTLR_004",P.TYPE_RUNTIME_UNKNOWN_LANG_OPERATOR="ANTLR_005",P.TYPE_RUNTIME_UNEXPECTED_STACK_CONDITION="ANTLR_006",P.TYPE_RUNTIME_PARSE_VALUE_VIOLATION="ANTLR_007",P.TYPE_PARSE_UNCLOSED_CONDITIONAL="ANTLR_008",P.TYPE_PARSE_EMPTY_CONDITIONAL="ANTLR_009",P.TYPE_PARSE_UNPAIRED_CONDITIONAL="ANTLR_008",P.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE="ANTLR_009",P.TYPE_INCOMPLETE_ANTLERS_REGION="ANTLR_010",P.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION="ANTLR_011",P.TYPE_ILLEGAL_VARPATH_RIGHT="ANTLR_012",P.TYPE_ILLEGAL_DOTVARPATH_RIGHT="ANTLR_013",P.TYPE_ILLEGAL_VARPATH_SUBPATH_START="ANTLR_014",P.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT="ANTLR_015",P.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR="ANTLR_016",P.TYPE_ILLEGAL_VARIABLE_NAME="ANTLR_017",P.TYPE_UNSET_MODIFIER_DETAILS="ANTLR_018",P.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS="ANTLR_019",P.TYPE_MODIFIER_UNEXPECTED_VALUE="ANTLR_020",P.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST="ANTLR_021",P.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR="ANTLR_022",P.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH="ANTLR_023",P.TYPE_RECURSIVE_UNPAIRED_NODE="ANTLR_024",P.TYPE_RECURSIVE_NODE_INVALID_POSITION="ANTLR_025",P.TYPE_NO_PARSE_UNASSOCIATED="ANTLR_026",P.TYPE_RECURSIVE_NODE_UNASSOCIATED_PARENT="ANTLR_027",P.TYPE_LOGIC_GROUP_NO_END="ANTLR_028",P.TYPE_LOGIC_GROUP_NO_START="ANTLR_029",P.TYPE_UNEXPECTED_BRANCH_SEPARATOR="ANTLR_030",P.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE="ANTLR_031",P.TYPE_UNEXPECTED_MODIFIER_SEPARATOR="ANTLR_032",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS="ANTLR_033",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE="ANTLR_034",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER="ANTLR_035",P.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE="ANTLR_036",P.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS="ANTLR_037",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SEMANTIC_GROUP="ANTLR_038",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP="ANTLR_039",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP="ANTLR_040",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH="ANTLR_041",P.TYPE_UNEXPECTED_EOI_WHILE_EXITING_TERNARY_GROUP="ANTLR_042",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET="ANTLR_043",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION="ANTLR_044",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END="ANTLR_045",P.TYPE_RUNTIME_UNKNOWN_LIBRARY="ANTLR_046",P.TYPE_RUNTIME_LIBRARY_BAD_METHOD_CALL="ANTLR_047",P.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS="ANTLR_048",P.TYPE_UNEXPECTED_FACTORIAL_OPERAND="ANTLR_049",P.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR="ANTLR_050",P.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED="ANTLR_051",P.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT="ANTLR_052",P.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP="ANTLR_053",P.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT="ANTLR_054",P.TYPE_LIBRARY_CALL_NO_ARGS_PROVIDED="ANTLR_055",P.TYPE_LIBRARY_CALL_MISSING_REQUIRED_FORMAL_ARG="ANTLR_056",P.TYPE_LIBRARY_CALL_RUNTIME_TYPE_MISMATCH="ANTLR_057",P.TYPE_LIBRARY_CALL_UNEXPECTED_ARG_RESOLVE_FAULT="ANTLR_058",P.TYPE_LIBRARY_CALL_TOO_MANY_ARGUMENTS="ANTLR_059",P.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD="ANTLR_060",P.TYPE_INVALID_NAMED_ARG_IDENTIFIER="ANTLR_061",P.TYPE_LIBRARY_CALL_INVALID_ARGUMENT_NAME="ANTLR_062",P.TYPE_RUNTIME_ATTEMPT_TO_OVERWRITE_LOADED_LIBRARY="ANTLR_063",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP="ANTLR_064",P.TYPE_EXPECTING_ARGUMENT_GROUP="ANTLR_065",P.TYPE_RUNTIME_PROTECTED_LIBRARY_ACCESS_VIOLATION="ANTLR_066",P.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END="ANTLR_067",P.TYPE_UNEXPECTED_OPERATOR="ANTLR_068",P.TYPE_OPERATOR_INVALID_ON_RIGHT="ANTLR_069",P.TYPE_INVALID_ASSIGNMENT_LOOP_PAIR="ANTLR_070",P.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP="ANTLR_071",P.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND="ANTLR_072",P.TYPE_QUERY_UNSUPPORTED_VALUE_TYPE="ANTLR_073",P.TYPE_UNEXPECTED_RUNTIME_RESULT_FOR_ORDER_BY_CLAUSE="ANTLR_074",P.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP="ANTLR_075",P.TYPE_INVALID_ORDER_BY_NAME_VALUE="ANTLR_076",P.TYPE_INVALID_ORDER_BY_SORT_VALUE="ANTLR_077",P.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY="ANTLR_78",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY="ANTLR_079",P.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE="ANTLR_080",P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP="ANTLR_081",P.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP="ANTLR_082",P.TYPE_UNEXPECTED_SWITCH_START_VALUE="ANTLR_083",P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE="ANTLR_084",P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_SEMANTIC_VALUE="ANTLR_085",P.TYPE_SWITCH_DEFAULT_MUST_BE_LAST="ANTLR_086",P.TYPE_PARSER_INVALID_SWITCH_TOKEN="ANTLR_087",P.TYPE_ORDER_BY_INVALID_RETURN_TYPE="ANTLR_088",P.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED="ANTLR_089",P.TYPE_PLUCK_INTO_MISSING_VARIABLE_TARGET="ANTLR_090",P.TYPE_PLUCK_INTO_INVALID_VARIABLE_TARGET="ANTLR_091",P.TYPE_PLUCK_INTO_NO_PREDICATE="ANTLR_092",P.TYPE_PLUCK_INTO_INVALID_PREDICATE_VALUE="ANTLR_093",P.TYPE_PLUCK_INTO_EMPTY_LOGIC_GROUP="ANTLR_094",P.TYPE_PLUCK_INTO_INVALID_NUMBER_OF_TUPLE_VARIABLES="ANTLR_095",P.TYPE_PLUCK_INTO_UNKNOWN_ALIAS_VARNAME="ANTLR_096",P.TYPE_PLUCK_INTO_UNEXPECTED_EMPTY_T_LOGIC_GROUP="ANTLR_097",P.TYPE_PLUCK_INTO_REFERENCE_TYPE_DYNAMIC="ANTLR_098",P.TYPE_PLUCK_INTO_REFERENCE_AMBIGUOUS="ANTLR_099",P.TYPE_RUNTIME_ASSIGNMENT_TO_NON_VAR="ANTLR_100",P.TYPE_ARR_MAKE_MISSING_TARGET="ANTLR_101",P.TYPE_ARR_MAKE_UNEXPECTED_TYPE="ANTLR_102",P.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE="ANTLR_103",P.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE="ANTLR_104",P.TYPE_ARR_UNEXPECT_ARG_SEPARATOR="ANTLR_105",P.TYPE_ARR_KEY_PAIR_MISSING_KEY="ANTLR_106",P.RUNTIME_PROTECTED_VAR_ACCESS="ANTLR_107",P.RUNTIME_PROTECTED_TAG_ACCESS="ANTLR_108",P.RUNTIME_PROTECTED_MODIFIER_ACCESS="ANTLR_109",P.TYPE_INCOMPLETE_PHP_EVALUATION_REGION="ANTLR_110",P.RUNTIME_PHP_NODE_WHEN_PHP_DISABLED="ANTLR_111",P.RUNTIME_PHP_NODE_USER_CONTENT_TAG="ANTLR_112",P.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST="ANTLR_113",P.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST="ANTLR_114",P.TYPE_MISSING_BODY_TUPLE_LIST="ANTLR_115",P.TYPE_MISSING_NAMES_TUPLE_LIST="ANTLR_116",P.TYPE_VALUE_NAME_LENGTH_MISMATCH_TUPLE_LIST="ANTLR_117",P.TYPE_INVALID_TUPLE_LIST_NAME_TYPE="ANTLR_118",P.TYPE_INVALID_MANIFESTED_NAME_GROUP="ANTLR_119",P.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP="ANTLR_120",P.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE="ANTLR_121",P.TYPE_RUNTIME_BAD_METHOD_CALL="ANTLR_122",P.TYPE_METHOD_CALL_MISSING_ARG_GROUP="ANTLR_123",P.TYPE_INVALID_METHOD_CALL_ARG_GROUP="ANTLR_124",P.TYPE_METHOD_CALL_MISSING_METHOD="ANTLR_125",P.TYPE_MODIFIER_NOT_FOUND="ANTLR_126",P.TYPE_RUNTIME_GENERAL_FAULT="ANTLR_127",P.TYPE_MODIFIER_INCORRECT_VALUE_POSITION="ANTLR_128",P.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX="ANTLR_129",P.TYPE_RUNTIME_ATTEMPTING_TO_RENDER_OBJECT_AS_STRING="ANTLR_130",P.TYPE_UNPAIRED_CLOSING_TAG="ANTLR_131",P.PARSER_CANNOT_PARSE_PATH_RECURSIVE="ANTLR_200",P.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR="ANTLR_201",P.LINT_UNKNOWN_PARAMETER="ANTLR_500",P.LINT_GENERAL_INVALID_PARAMETER_CONTENTS="ANTLR_501",P.LINT_PARAMETER_CONTENT_INVALID_INTEGER="ANTLR_502",P.LINT_PARAMETER_CONTENT_INVALID_BOOLEAN="ANT LR_503",P.LINT_PAGINATE_INVALID_VALUE="ANTLR_504",P.LINT_DEBUG_DATA_EXPOSED="ANTLR_505",P.LINT_DOUBLE_COLON_IN_TAG_IDENTIFIER="ANTLR_506",P.LINT_MIXED_MODIFIERS="ANTLR_507",P.LINT_MODIFIER_UNEXPECTED_TYPE="ANTLR_508",P.LINT_REMOVE_RELATE_TAG="ANTLR_509",P.LINT_SET_PRODUCES_RUNTIME_ERROR="ANTLR_510",P.LINT_FRONT_MATTER_EMPTY_DOCUMENT="ANTLR_511",P.LINT_SHORTHAND_MODIFIER_TAG_MUST_MATCH="ANTLR_512",P.LINT_INVALID_FRONT_MATTER="ANTLR_513",P.LINT_DUPLICATE_CODE="ANTLR_514",P.LINT_VERSION_NOT_COMPATIBLE="ANTLR_515",P.LINT_INTERLEAVED_TAG_PAIRS="ANTLR_516",P.LINT_MISSING_REQUIRED_PARAMETER="ANTLR_517",P.LINT_POSSIBLE_PARTIAL_RECURSION="ANTLR_518",P.LINT_URL_VARIABLE_WITHOUT_SANITIZE="ANTLR_519",P.LINT_DYNAMIC_CLASS_NAMES_POSSIBLE_PURGE="ANTLER_520",P.LINT_DEPRECATED_MODIFIER="ANTLER_521",P.LINT_INVALID_VARIABLE_ACCESS="ANTLR_522",P.LINT_SELECT_FIELD_JOIN_RAW="ANTLR_523",P.LINT_INVALID_PARAMETER_VALUE_DELIMITER="ANTLR_524",P.LINT_MODIFIERS_ON_QUERY_BUILDERS_REQUIRE_AS="ANTLR_525";var rt=class{static distance(e,t){return e.endPosition==null||t.startPosition==null?this.DistMax:t.startPosition.index-e.endPosition.index}static getTrueName(e){return e.originalNode!=null?e.originalNode.name?.name??"":e.name?.name??""}static getSimpleVarName(e){return e.variableReference!=null&&e.variableReference.pathParts.length==1&&e.variableReference.pathParts[0]instanceof tn?e.variableReference.pathParts[0].name:""}static isVariableMatching(e,t){return e instanceof ye?e.name==t:!1}static mergeVarContentLeft(e,t,r){return r.mergeRefName=r.name,r.endPosition=t.endPosition,r.name=r.name+e,r}static mergeVarContentRight(e,t,r){return r.mergeRefName=r.name,r.startPosition=t.startPosition,r.name=e+r.name,r}static mergeVarRight(e,t){return t.mergeRefName=t.name,t.startPosition=e.startPosition,t.name=e.name+t.name,t}static getUnrefName(e){return J.trimLeft(e,":.")}};rt.DistMax=65e3;var lr=class{static isConditionalStructure(e){if(e.isComment)return!1;let t=e.name?.name??"";return t=="if"||t=="elseif"||t=="else"}static requiresClose(e){let t=e.name?.name??"";return t=="elseif"||t=="else"?e.isClosedBy==null:!(e.isClosingTag||e.isClosedBy!=null)}static getValidClosingPairs(e){return e=="if"||e=="elseif"?lr.conditionClosingPairs:[]}static findClosestStructurePair(e,t,r){let i=[],s=e.length,a=new Map,l=null;i.push({node:t,index:r});for(let f=0;f<s;f+=1){let d=e[f];if(d instanceof X){let h=d.name?.name??"";if(d.isClosingTag&&h=="if"){a.set(f,f);continue}else if(h=="elseif"||h=="else"){a.set(f,f);continue}}}let u=a.size;for(;i.length>0;){let f=i.pop();if(f==null)continue;if(f.node._conditionParserAbandonPairing)break;let d=f.node,h=lr.getValidClosingPairs(d.name?.name??""),_=f.index,b=!1;if(u>50&&l!=null){for(let[g,v]of a)if(g>_){_=g;break}}for(let g=_;g<s;g++){let v=e[g];if(v instanceof X&&lr.isConditionalStructure(v)){if(lr.requiresClose(v)){i.push(f),i.push({node:v,index:g+1}),b=!0;break}if(d.isClosedBy!=null)continue;let O=v.name?.name??"",E=!1;if(v.ref==0&&(v.isClosingTag&&O=="if"||h.includes(O))&&(E=!0),v.refId==d.refId&&(E=!1),E){l=g,a.delete(g),d.isClosedBy=v,v.isOpenedBy=d,v.ref+=1,b=!0;break}}}if(!b&&d instanceof X){let g=d.name?.name??"";if((g=="elseif"||g=="else")&&d.isOpenedBy==null){let v='Unpaired "'+rt.getTrueName(d)+'" control structure.';d.isInterpolationNode&&(v+=" Tag pairs are not supported within Antlers tags."),d.pushError(Q.makeSyntaxError(P.TYPE_PARSE_UNPAIRED_CONDITIONAL,d,v)),d._conditionParserAbandonPairing=!0}if(d.isClosedBy==null&&lr.requiresClose(d)){let v='Unclosed "'+rt.getTrueName(d)+'" control structure.';d.isInterpolationNode&&(v+=" Tag pairs are not supported within Antlers tags."),d.pushError(Q.makeSyntaxError(P.TYPE_PARSE_UNCLOSED_CONDITIONAL,d,v)),d._conditionParserAbandonPairing=!0}}}}static pairConditionals(e){for(let t=0;t<e.length;t+=1){let r=e[t];r instanceof X&&lr.isConditionalStructure(r)&&lr.requiresClose(r)&&lr.findClosestStructurePair(e,r,t+1)}return e.forEach(t=>{if(t instanceof X&&lr.isConditionalStructure(t)){let r=t.name?.name??"";if((r=="elseif"||r=="else")&&t.isOpenedBy==null){t.pushError(Q.makeSyntaxError(P.TYPE_PARSE_UNPAIRED_CONDITIONAL,t,'Unpaired "'+rt.getTrueName(t)+'" control structure.'));return}if(t.isClosedBy==null&&lr.requiresClose(t)){t.pushError(Q.makeSyntaxError(P.TYPE_PARSE_UNCLOSED_CONDITIONAL,t,"Unclosed "+rt.getTrueName(t)+" control structure."));return}}}),e}},dn=lr;dn.conditionClosingPairs=["elseif","else"];function Es(n,e){return e==null&&(e="s"),n.replace(new RegExp("^["+e+"]+"),"")}function pn(n,e,t){return n.replace(new RegExp(e,"g"),t)}function Od(n,e){return e==null&&(e="s"),n.replace(new RegExp("["+e+"]+$"),"")}function Lo(){return(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,"")}function Ob(){return pn(Lo(),"-","_")}var hl=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=Ob()}},Nc=class{constructor(){this.startPosition=null;this.endPosition=null;this.content="";this.name=""}};function vE(n){let e=[],t=[];for(let r=0;r<n.length;r++){let i=n[r],s=i.refId;if(t.includes(s))break;e.push(i),t.push(s)}return e}var se=class{constructor(){this.refId=null;this.index=0;this.parent=null;this.content="";this.rawLexContent="";this.sourceContent="";this.startPosition=null;this.endPosition=null;this.modifierChain=null;this.originalAbstractNode=null;this.positionContexts=[];this.addedContexts=new Map;this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.isInScriptTag=!1;this.isInStyleTag=!1;this.isVirtual=!0;this.isPartOfMethodChain=!1;this.isVirtualGroupMember=!1;this.isVirtualGroupOperatorResolve=!1;this.isSwitchGroupMember=!1;this.isListGroupMember=!1;this.producesVirtualStatementTerminator=!1;this.convertedToOperator=!1;this.scopeVariable=null;this.currentScope=null;this.manifestType="";this.scopeName=null;this.sourceType="";this.runtimeType=null;this.modifiers=new _c(this);this.prev=null;this.next=null;this.methodTarget=null;this.libraryTarget=null;this.antlersErrors=[];this.parser=null;this.refId=Ob()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getContexts(){return this.positionContexts}addContext(e){this.addedContexts.has(e.refId)==!1&&(this.addedContexts.set(e.refId,!0),this.positionContexts.push(e))}getRange(){if(this.originalAbstractNode!=null)return this.originalAbstractNode.getRange();if(this.startPosition==null||this.endPosition==null)return Oo.Empty;let e=new Oo;return e.start=this.startPosition,e.end=this.endPosition,e}withParser(e){this.parser=e}getParser(){return this.parser}pushError(e){this.parent!=null&&this.parent.pushError(e),this.antlersErrors.push(e),this.parent==null&&this.parser!=null&&this.parser.pushError(e)}mergeErrors(e){e.forEach(t=>{t.node==null&&(t.node=this),this.antlersErrors.push(t)})}getErrors(){return this.antlersErrors}innerContent(){return this.content}rawContent(){return this.content}},Ic=class extends se{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.documentText="";this.childDocument=null}getImmediateChildren(){return this.head==null?[]:this.head.getImmediateChildren()}},Xt=class extends se{constructor(){super(...arguments);this.logicBranches=[];this.chain=[];this.nodeContent="";this.fragment=null;this.fragmentParameter=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1}},X=class extends se{constructor(){super(...arguments);this.isNodeAbanonded=!1;this.isComment=!1;this.isTagNode=!1;this.isConditionNode=!1;this.runtimeContent="";this.name=null;this.pathReference=null;this.isClosingTag=!1;this.isInterpolationNode=!1;this.isOpenedBy=null;this.isClosedBy=null;this.isSelfClosing=!1;this.children=[];this.runtimeNodes=[];this.parsedRuntimeNodes=[];this.hasParsedRuntimeNodes=!1;this.parameters=[];this.hasParameters=!1;this.contentOffset=null;this.cachedContent=null;this.cachedInnerContent=null;this.hasRecursiveNode=!1;this.recursiveReference=null;this.rawStart="";this.rawEnd="";this.originalNode=null;this.interpolationRegions=new Map;this.processedInterpolationRegions=new Map;this.hasProcessedInterpolationRegions=!1;this.ref=0;this.contentStartRelativeIndex=null;this.antlersNodeIndex=0;this.nameStartsOn=null;this.nameEndsOn=null;this.nameMethodPartStartsOn=null;this.documentText="";this.nodeContent="";this.childDocument=null;this.structure=new yc(this);this.isInlineAntlers=!1;this.mustClose=!1;this.reference=null;this._conditionParserAbandonPairing=!1;this._isEndVirtual=!1}getOriginalContent(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.isClosedBy!=null?this.isClosedBy.startPosition==null||this.isClosedBy.endPosition==null?"":this.parser.getText(this.startPosition.index,this.isClosedBy.endPosition.index+1):this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getNodeDocumentText(){return this.startPosition==null||this.endPosition==null||this.parser==null?"":this.parser.getText(this.startPosition.index,this.endPosition.index+1)}getImmediateChildren(){let t=[];for(let r=0;r<this.children.length;r++){let i=this.children[r];if(i.parent==this){if(i==this.isClosedBy)break;t.push(i)}}return vE(t)}getChildren(){if(this.isClosedBy==null)return[];let t=[];for(let r=0;r<this.children.length;r++){let i=this.children[r];if(i instanceof X&&i.refId==this.isClosedBy.refId)break;t.push(i)}return t}getInnerDocumentText(){if(this.startPosition==null||this.endPosition==null||this.parser==null)return"";if(this.isClosedBy==null)return this.getNodeDocumentText();let t=this.isClosedBy.startPosition;return t==null?"":this.parser.getText(this.endPosition.index+1,t.index)}nodeAtIndex(t){if(this.runtimeNodes.length==0)return null;for(let r=0;r<this.runtimeNodes.length;r++)if(this.runtimeNodes[r].index==t)return this.runtimeNodes[r];return null}getDepthCount(){if(this.parent==null)return 1;let t=this.parent,r=1;for(;t!=null;){if(r+=1,t.parent===t){t=null;break}t=t.parent}return r}isEmpty(){return this.content.trim().length==0}nameMatches(t){return this.name==null?!1:this.name.content==t}copyBasicDetails(){return this.copyBasicDetailsTo(new X)}copyBasicDetailsTo(t){return t.refId=this.refId,t.isComment=this.isComment,t.isTagNode=this.isTagNode,t.children=this.children,t.parent=this.parent,t.parameters=this.parameters,t.isClosingTag=this.isClosingTag,t.rawStart=this.rawStart,t.rawEnd=this.rawEnd,t.startPosition=this.startPosition,t.endPosition=this.endPosition,t.originalAbstractNode=this,t.containsAnyFragments=this.containsAnyFragments,t.containsChildStructures=this.containsChildStructures,t.isInScriptTag=this.isInScriptTag,t.isInStyleTag=this.isInStyleTag,t}id(){return this.refId}innerContent(){return this.cachedInnerContent==null&&(this.cachedInnerContent=this.content.replace('"','\\"')),this.cachedInnerContent}resetContentCache(){this.cachedContent=null,this.cachedInnerContent=null}hasMethodPart(){return this.name==null?!1:this.name.getMethodName()!=null}runtimeName(){return this.name==null?"":this.name.getCompoundTagName()}getTagName(){return this.name==null?"":this.name.name}getNameContent(){return this.name==null?"":this.name.content}getMethodNameValue(){if(this.name==null)return"";let t=this.name.getMethodName();return t??""}methodIsEmptyOrMatches(t){return this.getMethodNameValue()==t}hasParameter(t){return this.findParameter(t)!=null}hasParameterWithValue(t,r){let i=this.findParameter(t);return i==null?!1:i.value==r}findParameterValue(t,r){let i=this.findParameter(t);return i==null?r:i.value}findParameterValueOrNull(t){let r=this.findParameter(t);return r==null?null:r.value}findParameter(t){if(this.parameters.length==0)return null;for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name==t)return this.parameters[r];return null}findAnyParameter(t){for(let r=0;r<t.length;r++){let i=this.findParameter(t[r]);if(i!=null)return i}return null}getContentRelativeStartIndex(){if(this.contentStartRelativeIndex==null){let t=this.content.split("");for(let r=0;r<t.length;r++)if(!J.ctypeSpace(t[r])){this.contentStartRelativeIndex=r;break}this.contentStartRelativeIndex==null&&(this.contentStartRelativeIndex=t.length),this.contentStartRelativeIndex+=this.rawStart.length}return this.contentStartRelativeIndex}getContentAfterName(){let t=0;return this.nameEndsOn!=null&&(t=this.nameEndsOn.char-this.rawStart.length-1),this.content.substring(t)}getContent(){if(this.cachedContent==null)if(this.isComment)this.cachedContent=this.content,this.contentOffset=this.startPosition;else if(this.isTagNode){let t=this.content;t=J.trimLeft(t);let r=0;if(this.name!=null&&(r=this.name.compound.length),this.parameters.length>0){let l=0,u=this.parameters[0];u.startPosition!=null&&(l=u.startPosition.index-1);let f=t,d=f.trimLeft(),h=f.length-d.length,_=r;t=t.substr(0,l)}let i=t.trimLeft(),s=t.length-i.length,a=r+s+2;if(this.parser!=null){let l=0;this.startPosition!=null&&(l=this.startPosition.offset),this.contentOffset==this.parser.positionFromOffset(l+a,0)}this.name!=null?this.name.name=="if"||this.name.name=="elseif"||this.name.name=="unless"||this.name.name=="elseunless"?(t=" "+t.trimLeft(),this.cachedContent=t.substr(this.name.compound.length+1)):this.cachedContent=t:this.cachedContent=t}else if(this.parameters.length>0){let t=this.parameters[0],r=0;t.startPosition!=null&&(r=t.startPosition.index-1),this.contentOffset=this.startPosition,this.cachedContent=this.content.substr(0,r)}else this.contentOffset=this.startPosition,this.cachedContent=this.content;return this.cachedContent}relativePositionFromOffset(t,r){return this.parser==null?null:this.parser.positionFromOffset((this.contentOffset?.offset??0)+t,r)}getInterpolationNode(t){if(this.processedInterpolationRegions.has(t)){let r=this.processedInterpolationRegions.get(t);if(r.length>0&&r[0]instanceof X)return r[0]}return null}_lexerRelativeOffset(t,r=null){let i=t;if(r!=null&&(i=r),this.parser==null){let l=new fn;return l.index=t,l.offset=t,l}let s=t+this.rawStart.length+(this.startPosition?.index??0);return this.isTagNode&&this.nameStartsOn!=null&&(s=this.nameStartsOn.index+t,dn.isConditionalStructure(this)||(s-=this.rawStart.length),this.name?.name=="unless"&&(s+=6)),this.parser.positionFromOffset(s,s,!0)}relativeOffset(t,r=null){let i=t;if(r!=null&&(i=r),this.parser==null){let l=new fn;return l.index=t,l.offset=t,l}let s=t+this.rawStart.length+(this.startPosition?.index??0);return this.parser.positionFromOffset(s,s,!0)}isPaired(){return this.isClosingTag&&this.isSelfClosing==!1&&this.isOpenedBy!=null?!0:!(this.isClosedBy==null||this.isSelfClosing)}getFinalClosingTag(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingTag()}rawContent(){return this.rawStart+this.content+this.rawEnd}getTrueRuntimeNodes(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRuntimeNodes():this.runtimeNodes}getTrueRawContent(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueRawContent():this.rawContent()}getTrueNode(){return this.originalNode!=null&&this.originalNode!=this?this.originalNode.getTrueNode():this}getStructuralChildren(){return this.isClosedBy!=null?kd(this.children.slice(0,-1)):kd(this.children)}findParentOfType(t){return this.parent==null?null:this.parent instanceof X?this.parent.name!=null&&t.includes(this.parent.getTagName())?this.parent:this.parent.findParentOfType(t):null}},En=class extends X{static makeWithStartPosition(e){let t=new En;return t.startPosition=e,t.endPosition=e,t}},it=class extends En{},jn=class extends X{constructor(){super(...arguments);this.recursiveParent=null;this.isNestedRecursive=!1}},Rs=class extends X{constructor(){super(...arguments);this.isEchoNode=!1}},Do=class extends En{},xc=class extends En{},qt=class extends X{constructor(){super(...arguments);this.isNoParseRegion=!1}},Fo=class extends se{constructor(){super(...arguments);this.modifier=null;this.isModifierParameter=!1;this.nameDelimiter='"';this.isVariableReference=!1;this.name="";this.value="";this.containsEscapedContent=!1;this.interpolations=[];this.parent=null;this.blockPosition=null;this.namePosition=null;this.valuePosition=null;this.hasValidValueDelimiter=!0}containsSimpleValue(){return this.hasInterpolations()==!1&&this.isVariableReference==!1}hasInterpolations(){return this.interpolations.length>0}getArrayValue(){return this.value.split("|")}getValue(){return this.value}},Mo=class{constructor(){this.modifierTarget=null;this.modifierChain=[];this.startPosition=null;this.endPosition=null;this.lastManifestedModifier=null;this.lastModifier=null}updateValues(){if(this.modifierChain.length==0)this.startPosition=null,this.endPosition=null;else{let e=this.modifierChain[0],t=this.modifierChain[this.modifierChain.length-1];this.startPosition=e.startPosition,this.endPosition=t.endPosition}}},ks=class extends se{constructor(){super(...arguments);this.modifier=null;this.methodStyleArguments=null;this.nameNode=null;this.name="";this.valueNodes=[];this.parameters=[]}getParameterValues(){let t=[];return this.parameters.forEach(r=>{t.push(r.value)}),t}},Vo=class extends se{constructor(){super(...arguments);this.order=0;this.name=null;this.directionNode=null}},Ac=class extends se{constructor(){super(...arguments);this.value=""}},cr=class extends se{},Gn=class extends se{},ur=class extends se{},Rn=class extends se{},kn=class extends se{},Or=class extends se{},Ni=class extends se{constructor(){super(...arguments);this.repeat=1}},Wn=class extends se{},wn=class extends se{},nn=class extends se{},fr=class extends se{},dr=class extends se{},On=class extends se{},pr=class extends se{},hr=class extends se{},Lr=class extends se{},hn=class extends se{},Hn=class extends se{},Zr=class extends se{},mr=class extends se{},gr=class extends se{},Tr=class extends se{},_r=class extends se{},yr=class extends se{},br=class extends se{},ei=class extends se{},Nr=class extends se{},Wt=class extends se{},Gi=class extends se{constructor(){super(...arguments);this.orderClauses=[]}},mt=class extends se{},Jt=class extends se{},Bo=class extends se{constructor(){super(...arguments);this.left=null;this.right=null}},rn=class extends se{constructor(){super(...arguments);this.isTenaryBranchSeparator=!1}},Ln=class extends se{},Yn=class extends se{},Ht=class extends se{},$n=class extends se{},Dr=class extends se{},Kn=class extends se{},Zt=class extends se{},Fr=class extends se{},Et=class extends se{},Rt=class extends se{},ws=class extends se{constructor(){super(...arguments);this.values=[];this.isNamedNode=!1;this.parsedName=null}},Be=class extends se{constructor(){super(...arguments);this.start=null;this.end=null;this.nodes=[];this.scopeOperator=null}},Os=class extends se{constructor(){super(...arguments);this.condition=null;this.expression=null}},Wi=class extends se{constructor(){super(...arguments);this.cases=[]}},Pc=class extends se{constructor(){super(...arguments);this.left=null;this.right=null}},ti=class extends se{constructor(){super(...arguments);this.nodes=[]}},qo=class extends se{constructor(){super(...arguments);this.head=null;this.truthBranch=null;this.falseBranch=null}},Nt=class extends se{},xt=class extends se{constructor(){super(...arguments);this.nodes=[];this.separatorToken=null}},zn=class extends Be{constructor(){super(...arguments);this.scope=null}extract(){let t=null;this.scope!=null&&(t=this.scope.name);let r=this.nodes[0];return[t,r.nodes]}},ni=class extends zn{constructor(){super(...arguments);this.alias=null}},Ls=class extends se{constructor(){super(...arguments);this.args=[];this.hasNamedArguments=!1;this.numberOfNamedArguments=0}},Qn=class extends se{},vc=class extends se{};var Ii=class extends se{constructor(){super(...arguments);this.libraryName="";this.methodName="";this.arguments=null}},nt=class extends se{constructor(){super(...arguments);this.sourceContent=""}},At=class extends se{constructor(){super(...arguments);this.method=null;this.args=null}},Ut=class extends se{constructor(){super(...arguments);this.name=""}},kt=class extends se{constructor(){super(...arguments);this.value="";this.name=""}},ml=class extends se{constructor(){super(...arguments);this.name=null;this.value=null}},Uo=class extends se{constructor(){super(...arguments);this.name=null;this.value=null}},Pt=class extends se{constructor(){super(...arguments);this.value=null}},gt=class extends se{constructor(){super(...arguments);this.value="";this.sourceTerminator="";this.sourceContent=""}},ye=class extends se{constructor(){super(...arguments);this.name="";this.mergeRefName="";this.variableReference=null;this.interpolationNodes=[];this.isInterpolationReference=!1}},Cc=class extends se{constructor(){super(...arguments);this.name=""}},tn=class extends se{constructor(){super(...arguments);this.delimiter="";this.name="";this.isStringVar=!1;this.isFinal=!1}},xi=class{constructor(){this.originalContent="";this.normalizedReference="";this.isStrictTagReference=!1;this.isStrictVariableReference=!1;this.isExplicitVariableReference=!1;this.isVariableVariable=!1;this.pathParts=[];this.isFinal=!1;this._isFromEmptyFailState=!1}clone(){let e=new xi;return e.originalContent=this.originalContent,e.normalizedReference=this.normalizedReference,e.isStrictVariableReference=this.isStrictVariableReference,e.isExplicitVariableReference=this.isExplicitVariableReference,e.pathParts=this.pathParts,e.isFinal=this.isFinal,e}implodePaths(){let e=[];return this.pathParts.forEach(t=>{t instanceof tn?e.push(t.name):t instanceof xi&&e.push(t.implodePaths())}),e.join(".")}},Sc=class{constructor(e,t,r){this.target=e,this.value=t,this.operator=r}};var $h=Me(Gr(),1);var ea=Me(dt(),1);function dh(n,e){let t=[];if(n.currentNode==null)return t;let r={start:{line:n.position.line,character:n.position.character-0},end:n.position};for(let i=0;i<e.length;i++){let s=e[i];if(!n.currentNode.hasParameter(s.name)){let a=s.name;n.leftWord!=null&&a.startsWith(n.leftWord)&&(a=a.substring(n.leftWord.length));let l=a+'="$1"';t.push({label:s.name,kind:ea.CompletionItemKind.Value,insertTextFormat:ea.InsertTextFormat.Snippet,textEdit:ea.TextEdit.replace(r,l),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return t}var cu=Me(dt(),1);function ta(n,e,t){return{label:n,insertText:n,kind:cu.CompletionItemKind.Field,detail:t+": "+e}}function uu(n){let e=[];for(let t=0;t<n.length;t++)typeof n[t].name>"u"||e.push(ph(n[t]));return e}function ph(n){let e="",t=n.name;return n.instructionText!=null&&(e=n.instructionText),n.displayName!=null&&(t=n.displayName+" ("+n.name+")"),n.blueprintName!=null&&(e.trim().length>0&&(e+=`
`),e+="Blueprint: "+n.blueprintName),n.type!=null&&(t+=": "+n.type),{label:n.name,insertText:n.name,kind:cu.CompletionItemKind.Field,documentation:e,detail:t}}function Ee(n,e,t,r){let i="**"+n+"**  ";return i+=`
`,i+=e+"  ",i+="\n```antlers\n",i+=t,i+="\n```",r!=null&&(i+=`

`,i+="[Documentation Reference]("+r+")"),i}function W(n,e,t){let r="**"+n+"**  ";return r+=`
`,r+=e+"  ",t!=null&&(r+=`

`,r+="[Documentation Reference]("+t+")"),r}function na(n){let e=[];return n=="order"&&e.push("sort"),e}function kw(n){return{blueprintName:n.sourceName,displayName:n.name,instructionText:"",maxItems:-1,name:n.name,refFieldSetField:null,type:n.dataType,sets:null,import:null}}function fu(n){let e=[];for(let t=0;t<n.length;t++)e.push(kw(n[t]));return e}function $e(n){return[{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:n},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.loop",introducedBy:n},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:n},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:n},{name:"order",dataType:"integer",sourceField:null,sourceName:"*internal.loop",introducedBy:n}]}function dI(n,e,t){if(typeof t>"u"||t===null)return;let r=n.findParameter("as"),i=n.findParameter("scope");t=t.concat(fu($e(n))),r!=null&&i!=null?e.introduceScopedAliasScope(n,i.value,r.value,t):r!=null?e.introduceAliasScope(n,r.value,t):i!=null?e.introduceDynamicScopeList(n,i.value,t):e.addBlueprintFields(n,t)}function pI(n){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.collection.context",introducedBy:n},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.collection.context",introducedBy:n}]}var Wr=Me(dt(),1);var Ji=[{isRequired:!1,name:"from",description:"The collection name to retrieve entries from",aliases:["folder","use"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"not_from",aliases:["not_folder","dont_use"],description:"The collections to exclude when retrieving entries",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"show_unpublished",aliases:null,description:"Controls whether unpbulished entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_published",aliases:null,description:"Controls whether published entries are returned",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"show_past",aliases:null,description:"Controls whether to display entries with a past date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"since",aliases:null,description:"Sets the minimum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"until",aliases:null,description:"Sets the maximum date an entry can have to be returned",acceptsVariableInterpolation:!0,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the entry sort order",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",aliases:null,description:"Sets the maximum number of entries to return",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["integer"],isDynamic:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope",expectsTypes:["string"],isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets the amount that entry results should be offset by",expectsTypes:["integer"],isRequired:!1,name:"offset",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether not to paginate entry results",expectsTypes:["boolean","number"],isRequired:!1,name:"paginate",isDynamic:!1},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies a name to give to a new entries array variable",expectsTypes:["string"],isRequired:!1,name:"as",isDynamic:!1},{name:"scope",aliases:null,acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Sets a prefix on all entry variables",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"locale",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Specifies the locale in which to retrieve entry content",expectsTypes:["string"],isRequired:!1,isDynamic:!1},{name:"redirects",aliases:["links"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Controls whether entries with redirects are returned",expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"page_name",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"Allows you to customise the name of the URL query parameter used for pagination.",expectsTypes:["string"],isRequired:!1,isDynamic:!1}],hI=["from","folder","use"],mI=["not_from","not_folder","dont_use"],gI=["draft","scheduled","expired","published"];function TI(n){let e=[];if(n.project!=null){let t={start:{line:n.position.line,character:n.position.character-n.originalLeftWord.length},end:n.position},r=n.project.getUniqueTaxonomyNames();for(let i=0;i<r.length;i++){let s=r[i],a=n.originalLeftWord+s+'="$1"';e.push({label:n.originalLeftWord+s,insertTextFormat:Wr.InsertTextFormat.Snippet,kind:Wr.CompletionItemKind.Field,textEdit:Wr.TextEdit.replace(t,a),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}return e}function ra(n,e){let t=[];if(n.reference!=null){let r=n.reference,i=e.statamicProject.getBlueprintFields(r.collectionNames);typeof i<"u"&&i!=null&&(t=i)}return t}function _I(n){let e=[],t=gI.filter(r=>!n.includes(r));for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Wr.CompletionItemKind.Variable});return e}function yI(n,e,t){let r=[],i=t.getTaxonomyTerms(e),s=i.filter(a=>!n.includes(a));for(let a=0;a<s.length;a++)r.push({label:s[a],kind:Wr.CompletionItemKind.Variable});return r}function bI(n){let e=[],t=n.getCollectionNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Wr.CompletionItemKind.Variable});return e}function ia(n,e){let t=[],r=e.getCollectionNames().filter(i=>!n.includes(i));for(let i=0;i<r.length;i++)t.push({label:r[i],kind:Wr.CompletionItemKind.Variable});return t}function du(n){let e=[],t=n.getCollectionQueryScopes();for(let r=0;r<t.length;r++)e.push({label:`${t[r].handle} (${t[r].name})`,detail:t[r].description,insertText:t[r].handle,kind:Wr.CompletionItemKind.EnumMember});return e}function sa(n,e){if(n.isClosingTag)return e;if(n.hasMethodPart()&&n.getMethodNameValue()!="count"&&e.addVariables(pI(n)),n.reference!=null){let t=ra(n,e),r=n.reference;t.length==0&&r.collectionNames.length>0&&(t.push({blueprintName:r.collectionNames[0],displayName:"Title",import:null,instructionText:"",maxItems:null,name:"title",type:"string",refFieldSetField:null,sets:[]}),t.push({blueprintName:r.collectionNames[0],displayName:"Slug",import:null,instructionText:"",maxItems:null,name:"slug",type:"string",refFieldSetField:null,sets:[]}),t.push({blueprintName:r.collectionNames[0],displayName:"Date",import:null,instructionText:"",maxItems:null,name:"date",type:"string",refFieldSetField:null,sets:[]})),dI(n,e,t)}return e}var Ll=Me(Gr(),1);var pu=Me(dt(),1);var hh=[{name:"is",description:"Tests if a field is equal to a value"},{name:"equals",description:"Tests if a field is equal to a value"},{name:"not",description:"Tests if a field is not equal to a value"},{name:"isnt",description:"Tests if a field is not equal to a value"},{name:"exists",description:"Tests if a field exists"},{name:"isset",description:"Tests if a field exists"},{name:"doesnt_exist",description:"Tests if a field does not exist"},{name:"is_empty",description:"Tests if a field does not exist"},{name:"null",description:"Tests if a field does not exist"},{name:"contains",description:"Tests if a field contains a value"},{name:"doesnt_contain",description:"Tests if a field does not contain a value"},{name:"in",description:"Tests if a value is in an array"},{name:"not_in",description:"Tests if an array does not contain a value"},{name:"starts_with",description:"Tests if a field starts with a value"},{name:"doesnt_start_with",description:"Tests if a field does not start with a value"},{name:"ends_with",description:"Tests if a field ends with a value"},{name:"doesnt_end_with",description:"Tests if a field does not end with a value"},{name:"gt",description:"Tests if a field is greater than a value"},{name:"lt",description:"Tests if a field is less than a value"},{name:"gte",description:"Tests if a field is greater than or equal to a value"},{name:"lte",description:"Tests if a field is less than or equal to a value"},{name:"matches",description:"Tests if a field matches a case insensitive regex"},{name:"regex",description:"Tests if a field matches a case insensitive regex"},{name:"doesnt_match",description:"Tests if a field does not match a case insensitive regex"},{name:"is_alpha",description:"Tests if a field contains only alphabetical characters"},{name:"is_numeric",description:"Tests if a field contains only numeric characters"},{name:"is_alpha_numeric",description:"Tests if a field contains only alpha-numeric characters"},{name:"is_url",description:"Tests if a field is a valid URL"},{name:"is_embeddable",description:"Tests if a field is an embeddable video URL"},{name:"is_email",description:"Tests if a field is a valid email address"},{name:"is_after",description:"Tests if a field is after a given date"},{name:"is_before",description:"Tests if a field is before a given date"}];function Zi(n){let e=[],t={start:{line:n.position.line,character:n.position.character-n.originalLeftWord.length},end:n.position};for(let r=0;r<hh.length;r++){let i=hh[r],s=n.originalLeftWord+i.name+'="$1"';e.push({label:i.name,insertTextFormat:pu.InsertTextFormat.PlainText,kind:pu.CompletionItemKind.Field})}return e}var Gs=Me(Fn(),1);var hu=class{static clear(e){this.unclosedNodes.delete(e)}static registerNodes(e,t){this.unclosedNodes.set(e,t)}static getUnclosedTags(e,t){let r=[];if(this.unclosedNodes.has(e)==!1)return r;let i=this.unclosedNodes.get(e);if(i.length==0)return r;let s=t.line+1;for(let a=0;a<i.length;a++){let l=i[a];(l.endPosition?.line==s&&t.character>l.endPosition.char||s>(l.endPosition?.line??0))&&r.push(l)}return r}static hasUnclosedTags(e,t){return this.unclosedNodes.has(e)==!1?!1:this.getUnclosedTags(e,t).length>0}};hu.unclosedNodes=new Map;function es(n){return[{name:"edit_url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"id",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"last_modified",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"permalink",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"published",dataType:"boolean",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"slug",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"template",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n},{name:"url",dataType:"string",sourceName:"*internal.entry",sourceField:null,introducedBy:n}]}var Zn=Me(Gr(),1),ww=[{label:"name",kind:Zn.CompletionItemKind.Property},{label:"description",kind:Zn.CompletionItemKind.Property},{label:"desc",kind:Zn.CompletionItemKind.Property},{label:"entry",kind:Zn.CompletionItemKind.Property},{label:"collection",kind:Zn.CompletionItemKind.Property},{label:"blueprint",kind:Zn.CompletionItemKind.Property},{label:"var",kind:Zn.CompletionItemKind.Property},{label:"set",kind:Zn.CompletionItemKind.Property},{label:"param",kind:Zn.CompletionItemKind.Property},{label:"param*",kind:Zn.CompletionItemKind.Property},{label:"front",kind:Zn.CompletionItemKind.Property},{label:"format",kind:Zn.CompletionItemKind.Property}];var mu=Me(dt(),1),TU=[{label:"if",kind:mu.CompletionItemKind.Keyword},{label:"elseif",kind:mu.CompletionItemKind.Keyword},{label:"else",kind:mu.CompletionItemKind.Keyword}];var mh=Me(Gr(),1),Ow=Me(dt(),1);var gh=Me(dt(),1),Ol=[];Ol.push({label:"true",kind:gh.CompletionItemKind.Keyword});Ol.push({label:"false",kind:gh.CompletionItemKind.Keyword});function He(n){return[{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"value",introducedBy:n},{sourceName:"*internal.array",sourceField:null,dataType:"*",name:"key",introducedBy:n}]}var Lw={name:"array",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},NI=Lw;function oa(n){return[{name:"id",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"title",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"path",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"filename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"basename",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"extension",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_asset",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_audio",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_previewable",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_image",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_svg",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"is_video",dataType:"boolean",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"edit_url",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"url",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"permalink",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_bytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_megabytes",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_b",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_kb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_mb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"size_gb",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"focus",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"focus_css",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"height",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"width",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"orientation",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"ratio",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"mime_type",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"duration",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"duration_seconds",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"duration_sec",dataType:"number",sourceName:"*internal.asset",sourceField:null,introducedBy:n},{name:"playtime",dataType:"string",sourceName:"*internal.asset",sourceField:null,introducedBy:n}]}var Dw={name:"assets",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables(oa(n))}},II=Dw;var Fw={name:"bard",augmentScope:(n,e)=>{e.addVariable({name:"type",dataType:"string",sourceField:null,sourceName:"*internal.bard",introducedBy:n})},injectCompletions:(n,e,t)=>[]},xI=Fw;var Mw={name:"form_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},AI=Mw;var Vw={name:"list",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},PI=Vw;function vI(n){return[{name:"type",dataType:"string",sourceName:"*internal.replicator",sourceField:null,introducedBy:n}]}var Bw={name:"replicator",augmentScope:(n,e)=>{e.addVariables(vI(n)),e.addVariables($e(n))},injectCompletions:(n,e,t)=>[]},CI=Bw;var qw={name:"select_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},SI=qw;var Uw={name:"sites_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},EI=Uw;var jw={name:"structures_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},RI=jw;var Gw={name:"table",augmentScope:(n,e)=>{e.addVariable({name:"cells",dataType:"array",sourceName:"*internal.fieldtype.table",sourceField:null,introducedBy:n})}},kI=Gw;var Ww={name:"tags",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},wI=Ww;function gu(n){return es(n).concat([{name:"entries_count",dataType:"number",sourceName:"*internal.term",sourceField:null,introducedBy:n},{name:"is_term",dataType:"boolean",sourceName:"*internal.term",sourceField:null,introducedBy:n},{name:"taxonomy",dataType:"string",sourceName:"*internal.term",sourceField:null,introducedBy:n}])}var Hw={name:"taxonomies_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n)),e.addVariables(gu(n))}},OI=Hw;var Yw={name:"terms_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n)),e.addVariables(gu(n))}},LI=Yw;var $w={name:"user_groups_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},DI=$w;var Kw={name:"user_roles_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},FI=Kw;var zw={name:"users_multiple",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n)),e.injectBlueprint(n,"user")}},MI=zw;var Qw={name:"yaml",augmentScope:(n,e)=>{e.addVariables(He(n)),e.addVariables($e(n))}},VI=Qw;var Xw=[NI,II,xI,AI,PI,CI,SI,EI,RI,VI,kI,OI,wI,LI,MI,DI,FI],BI=Xw;var Ei=class{constructor(){this.fieldTypes=new Map}getFieldTypes(){return this.fieldTypes}getFieldType(e){return this.fieldTypes.get(e)}registerFieldtypes(e){for(let t=0;t<e.length;t++)this.fieldTypes.set(e[t].name,e[t])}loadCoreFieldtypes(){this.registerFieldtypes(BI)}hasFieldtype(e){return this.fieldTypes.has(e)}};Ei.instance=null;(typeof Ei.instance>"u"||Ei.instance==null)&&(Ei.instance=new Ei,Ei.instance.loadCoreFieldtypes());var aa=Ei;function Tu(n){let e="";return n.currentNode!=null&&(e=n.currentNode.getMethodNameValue()),e}function Ri(n){if(n.includes(":")==!1)return n;let e=n.split(":");return e.length>1?e[e.length-1]:e[0].trim()}function _u(n){return n.includes(":")==!1?n:n.split(":")[0]}function qI(n){if(n.nodesInScope.length==0)return[];let e=n.nodesInScope[n.nodesInScope.length-1];return n.context?.node!=null&&(e=n.context.node),e.currentScope==null?[]:Jw(n,e.currentScope)}function Jw(n,e){let t=[];return e.values.forEach(r=>{if(r.sourceField!=null?t.push({label:r.name,detail:r.sourceField.blueprintName,documentation:r.sourceField.instructionText??"",kind:Gs.CompletionItemKind.Field}):t.push(ta(r.name,"","")),r.dataType.trim().length>0&&r.dataType=="array"){let i=r.name+` }}
    $1
{{ /`+r.name+" ",s={start:{line:n.position.line,character:n.position.character-n.originalLeftWord.length},end:n.position};t.push({label:r.name+" loop",insertTextFormat:Gs.InsertTextFormat.Snippet,kind:Gs.CompletionItemKind.Snippet,textEdit:Gs.TextEdit.replace(s,i),command:{title:"Suggest",command:"editor.action.triggerSuggest"}})}}),e.lists.forEach((r,i)=>{t.push(ta(i,"",""))}),t}var UI=Me(Gr(),1);function _e(n){let e="";typeof n<"u"&&typeof n.resolveDocumentation<"u"&&n.resolveDocumentation!=null&&(e=n.resolveDocumentation());let t=n.tagName;if(t.includes(":")){let r=t.split(":");t=r[r.length-1]}return{label:t,kind:UI.CompletionItemKind.Text,sortText:"1",documentation:{kind:"markdown",value:e}}}var Th=Me(dt(),1);function jI(n,e,t){return{name:n,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:e,expectsTypes:["string"],isDynamic:!0,isRequired:!1,documentationLink:t,docLinkName:"MDN Reference"}}var GI=jI("class","A space-separated list of the classes of the element.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class"),WI=jI("style","Contains CSS styling declarations to be applied to the element. Note that it is recommended for styles to be defined in a separate file or files.","https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/style");function yu(n){return n=="class"?GI:n=="style"?WI:{name:n,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"",expectsTypes:["string","number","array"],isRequired:!1,isDynamic:!0}}function HI(n){let e=[];for(let t=0;t<n.length;t++)e.push({label:n[t],kind:Th.CompletionItemKind.Field});return ie(e)}function lt(n){let e=[];for(let t=0;t<n.length;t++)e.push({label:n[t],kind:Th.CompletionItemKind.Field});return ie(e)}function ie(n){return{items:n,isExclusiveResult:!0,analyzeDefaults:!1}}function on(n){return{items:n,isExclusiveResult:!1,analyzeDefaults:!0}}var Ie={items:[],isExclusiveResult:!1,analyzeDefaults:!0};function et(n,e){let t=Zw(n);return t.tagName=e,t}function Zw(n){return{allowsArbitraryParameters:n.allowsArbitraryParameters,allowsContentClose:n.allowsContentClose,injectParentScope:n.injectParentScope,parameters:n.parameters,requiresClose:n.requiresClose,tagName:n.tagName,introducedIn:n.introducedIn,hideFromCompletions:n.hideFromCompletions,augmentScope:n.augmentScope,requiresCloseResolver:n.requiresCloseResolver,resolveCompletionItems:n.resolveCompletionItems,resolveDynamicParameter:n.resolveDynamicParameter,resolveSpecialType:n.resolveSpecialType,resovleParameterCompletionItems:n.resovleParameterCompletionItems,suggestAlternativeParams:n.suggestAlternativeParams,resolveDocumentation:n.resolveDocumentation}}function YI(n){return n.findParameterValueOrNull("scope")}function $I(n){n.getAllNodes().forEach(t=>{t instanceof X&&t.manifestType==="array"&&(t.mustClose=!0)})}function eO(n){return n.findParameterValueOrNull("as")}var tO=["count","next","previous"];function nO(n,e){let t=[];if(n.hasMethodPart()){let l=n.getMethodNameValue();if(tO.includes(l)==!1)return t.push(l),t}let r=n.findAnyParameter(hI),i=n.findAnyParameter(mI),s=[],a=[];return typeof r<"u"&&r!==null&&(r.value.trim()==="*"?(s=e.getUniqueCollectionNames(),typeof i<"u"&&i!==null&&i.isVariableReference==!1&&i.hasInterpolations()==!1&&(a=i.getArrayValue())):r.isVariableReference==!1&&r.hasInterpolations()==!1&&(s=r.getArrayValue())),a.length>0?t=s.filter(function(l){return a.includes(l)==!1}):t=s,t}function ts(n,e){let t=nO(n,e),r=!1,i=!1,s=!1,a=null,l="";if(n.isClosingTag==!1){let f=eO(n),d=YI(n);f!=null&&(r=!0,l=f),d!=null&&(s=!0,a=d),i=n.hasParameter("paginate")}return{context:{collectionNames:t??[],endPosition:n.endPosition?.char??0,aliasName:l,isAliased:r,isScoped:s,scopeName:a,isStartOfScope:!n.isClosingTag,line:n.startPosition?.line??0,startPosition:n.startPosition?.char??0,isPaginated:i,excludeCollections:[],includeCollections:[]},issues:[]}}function la(n,e){if(n==null)return null;let t=Es(e,":");return t.includes(":")&&(t=t.split(":")[0]),t=="status"||t=="taxonomy"||n.currentScope!=null&&n.currentScope.containsReference(t)?yu(e):null}var rO=["from","folder","use","not_from","not_folder"],iO=["previous","next"],sO=["in","collection"];function ns(n,e){if(n.isDynamic){let t=_u(n.name);if(e.nodesInScope.length>0){let r=e.nodesInScope[e.nodesInScope.length-1];if(r!=null&&r.currentScope!=null){let i=ra(r,r.currentScope),s=i.map(l=>l.name),a=Ri(e.leftWord);if(s.includes(a))return ie(Zi(e))}}if(t=="status"&&e.context?.parameterContext!=null)return ie(_I(e.context.parameterContext.parameter?.getArrayValue()??[]));if(t=="taxonomy"){let r=Ri(n.name);if(e.project.hasTaxonomy(r)&&e.context?.parameterContext!=null)return ie(yI(e.context.parameterContext.parameter?.getArrayValue()??[],r,e.project))}}if(n.name=="filter"||n.name=="query_scope")return ie(du(e.project));if(e.nodesInScope.length>0){let t=e.nodesInScope[e.nodesInScope.length-1];if(t.hasMethodPart()&&iO.includes(t.getMethodNameValue())&&sO.includes(n.name))return ie(bI(e.project))}return rO.includes(n.name)&&e.context?.parameterContext!=null?ie(ia(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null}var oO={tagName:"collection:previous",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ji,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:sa,resolveDynamicParameter:la,resolveSpecialType:ts,suggestAlternativeParams:na,resovleParameterCompletionItems:ns,resolveCompletionItems:ca,resolveDocumentation:n=>Ee("collection:previous Tag","The `collection:previous` tag is used to show the entries that appear before the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the previous two entries, based on dates in ascending order. #}}
{{ collection:previous in="articles" limit="2" sort="date:asc" }}

{{ /collection:previous }}`,"https://statamic.dev/tags/collection-previous")},Ws=oO;var bu=et(Ws,"collection:older"),Nu=et(Ws,"collection:newer");var aO={tagName:"collection:count",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ji,{isRequired:!0,name:"in",aliases:["from"],description:"The collection from which to count entries",acceptsVariableInterpolation:!0,allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:ts,resovleParameterCompletionItems:ns,resolveDocumentation:n=>Ee("collection:count Tag","The `collection:count` tag returns the total number of entries in the specified collection(s). The collection count tag accepts the same parameters as the collection tag, allowing developers to count entries that meet specific conditions.",`Total entry count: {{ collection:count in="collection-name" }}
Draft count: {{ collection:count in="collection-name" status:in="draft" }}`,"https://statamic.dev/tags/collection-count")},Iu=aO;var lO={tagName:"collection:next",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[...Ji,{name:"in",aliases:["collection"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The collection to search in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"current",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets the current entry by ID",expectsTypes:["string"],isDynamic:!1,isRequired:!1}],augmentScope:sa,resolveDynamicParameter:la,resolveSpecialType:ts,suggestAlternativeParams:na,resovleParameterCompletionItems:ns,resolveCompletionItems:ca,resolveDocumentation:n=>Ee("collection:next Tag","The `collection:next` tag is used to show the entries that will appear after the current entry, based on some entry order (publish date, alphabetical, or manual).",`{{# Retrieve the next two entries, based on dates in ascending order. #}}
{{ collection:next in="articles" limit="2" sort="date:asc" }}

{{ /collection:next }}`,"https://statamic.dev/tags/collection-next")},xu=lO;function ca(n){let e=[];if(n.isPastTagPart==!1&&(n.leftWord=="collection"||n.leftWord=="/collection")&&n.leftChar==":"){let t=n.project.getCollectionNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Ll.CompletionItemKind.Field,sortText:"0"});return e.push(_e(Iu)),e.push(_e(xu)),e.push(_e(Ws)),e.push(_e(bu)),e.push(_e(Nu)),{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}if(n.currentNode!=null&&n.currentNode.currentScope!=null){let t=ra(n.currentNode,n.currentNode.currentScope),r=t.map(s=>s.name),i=Ri(n.leftWord);if(i==="taxonomy")return ie(TI(n));if(r.includes(i))return e=Zi(n),ie(e);if(n.isCaretInTag&&!n.context?.isInParameter&&["collection","/collection"].includes(n.leftWord)==!1&&n.leftChar!=" "){let s=[];for(let a=0;a<t.length;a++){let l=t[a];s.includes(l.name)==!1&&(e.push({label:l.name,detail:l.blueprintName,documentation:l.instructionText??"",kind:Ll.CompletionItemKind.Field}),s.push(l.name))}if(e.push({label:"taxonomy",insertText:"taxonomy:",kind:Ll.CompletionItemKind.Field}),e.push({label:"status",insertText:"status:",kind:Ll.CompletionItemKind.Field}),e.length>0)return on(e)}}return Ie}var cO={tagName:"collection",hideFromCompletions:!1,introducedIn:null,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Ji,augmentScope:sa,resolveDynamicParameter:la,resolveSpecialType:ts,suggestAlternativeParams:na,resovleParameterCompletionItems:ns,resolveCompletionItems:ca,resolveDocumentation:n=>Ee("collection Tag","The `collection` tag provides access to entry data such as blog posts, products, etc.",`{{ collection:articles as="posts" }}

	{{ posts }}
		{{ title }}
	{{ /posts }}

{{ /collection:articles }}`,"https://statamic.dev/tags/collection")},KI=cO;var uO={tagName:"cache",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,allowsContentClose:!1,allowsArbitraryParameters:!1,resovleParameterCompletionItems:(n,e)=>n.name=="scope"?lt(["page","site","user"]):null,parameters:[{isRequired:!1,name:"for",description:"The duration the cache is valid for.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"key",description:"An arbitrary name the cache entry may be referenced by.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"scope",description:" The scope of the cached value. Either site or page.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveSpecialType:(n,e)=>{let t=n.findParameter("key"),r=null;if(t!=null){let i=t.value;i.trim().length>0&&(r={key:i,reference:n})}return{context:r,issues:[]}},resolveDocumentation:n=>Ee("cache Tag","The `cache` tag can be used to save the results of an expensive template operation. The duration of the cache can be configured.",`{{ cache for="10 minutes" }}
    {{# Template code that won't be re-rendered for at least 10 minutes. #}}
{{ /cache }}`,"https://statamic.dev/tags/cache")},zI=uO;var fO={tagName:"dump",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveCompletionItems:n=>n.leftWord=="dump"&&n.leftChar==":"?ie(qI(n)):Ie,resolveDocumentation:n=>Ee("dump Tag","The `dump` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered.",`{{ collection:articles }}
	{{# View all data available, for each entry. #}}
    {{ dump }}
{{ /collection:articles }}`,"https://statamic.dev/tags/dump")},QI=fO;var dO={tagName:"404",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>Ee("404 (Not Found) Tag","The `404` (Not Found) tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ 404 }}
{{ /unless }}`,"https://statamic.dev/tags/404")},XI=dO;var pO={tagName:"link",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The relative path",expectsTypes:["string"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!0,isDynamic:!1},{name:"absolute",description:"Whether to generate absolute URLs. Default false",expectsTypes:["boolean"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1},{name:"id",description:"The ID of the entry to link to",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1},{name:"in",description:"The handle of the site to link to.",expectsTypes:["string"],allowsVariableReference:!0,acceptsVariableInterpolation:!0,aliases:[],isDynamic:!1,isRequired:!1}],resolveDocumentation:n=>W("link Tag","The `link` tag accepts relative URLs or entry IDs and generates fully-qualified URLs to the desired content.","https://statamic.dev/tags/link")},JI=pO;var ZI={tagName:"loop",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(n,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:n}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:n=>W("loop Tag","The `loop` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")},ex={tagName:"range",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,augmentScope:(n,e)=>(e.addVariable({name:"value",dataType:"*",sourceName:"*internal.loop.value",sourceField:null,introducedBy:n}),e),parameters:[{name:"times",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The number of iterations",isRequired:!1,isDynamic:!1},{name:"from",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to start iterating from. Default 1",isRequired:!1,isDynamic:!1},{name:"to",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["number"],description:"The value to stop iterating at",isRequired:!1,isDynamic:!1}],resolveDocumentation:n=>W("range Tag","The `range` tag is used to create an array of items between two values, and then iterate the created array. Alternatively, a max value can be set using the `times` parameter to loop that number of times.","https://statamic.dev/tags/loop")};var er=Me(Gr(),1);var rs=class{constructor(){this.loadedDocuments=new Map;this.activeProject=null}getDocuments(){let e=[];return this.loadedDocuments.forEach(t=>{e.push(t)}),e}setProject(e){this.activeProject=e,this.loadedDocuments.forEach(t=>{this.activeProject!=null&&t.updateProject(this.activeProject)})}refreshDocumentState(){this.activeProject!=null&&this.setProject(this.activeProject)}hasDocument(e){return this.loadedDocuments.has(e)}createDocument(e){if(!this.loadedDocuments.has(e)){let t=new Dt;t.documentUri=e,this.loadedDocuments.set(e,t)}}loadDocument(e,t){this.loadedDocuments.set(e,Dt.fromText(t))}getDocument(e){return this.loadedDocuments.get(e)}updateDocument(e,t){if(this.loadedDocuments.has(e)){let r=this.loadedDocuments.get(e);r.loadString(t);let i=St.instance?.getStructure()?.findView(e);i!=null&&(i.document=r)}}createOrUpdate(e,t){this.createDocument(e),this.updateDocument(e,t)}getDocumentErrors(e){return this.loadedDocuments.has(e)?this.loadedDocuments.get(e).errors.all():[]}};rs.instance=null;(typeof rs.instance>"u"||rs.instance==null)&&(rs.instance=new rs);var tx=rs;var _h=new tx;function Ge(n,e){return e.trim().length>0?yu(e):null}var ua=[{isRequired:!1,name:"src",description:"The name of the partial view.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"when",description:"A condition to control whether the partial renders. The partial will not render unless it receives a truthy value.",allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["*"],isDynamic:!1},{isRequired:!1,name:"unless",description:"A condition to control whether the partial renders. The partial will not render unless it receives a falsey value.",allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["*"],isDynamic:!1}];var Dl=Me(Gr(),1);function fa(n,e){if(n.isDynamic&&e.currentNode!=null&&e.currentNode.getTagName()=="partial"&&e.currentNode.hasMethodPart()){let t=e.currentNode.getMethodNameValue();if(t.trim().length>0&&St.instance?.hasStructure()){let r=St.instance.getStructure().findRelativeView(t);if(r!=null&&r.varReferenceNames.has(n.name)){let i=r.varReferenceNames.get(n.name);if(r.document!=null&&r.document.hasFrontMatter()){let s=r.document.getFrontMatterScope();if(s!=null){let a=s.getList(i);if(a!=null)return HI(a.getVariableNames())}}}}}if(n.name=="src"){let t=e.project.getViews(),r=[];return t.forEach(i=>{if(wr.hasDetails(i.documentUri)){let s=wr.documentDetails.get(i.documentUri);r.push({label:s.documentName+"("+i.relativeDisplayName+")",insertText:i.relativeDisplayName,detail:s.documentName,documentation:{kind:Dl.MarkupKind.Markdown,value:s.documentDescription},kind:Dl.CompletionItemKind.File})}else r.push({label:i.relativeDisplayName,kind:Dl.CompletionItemKind.File})}),ie(r)}return null}var hO={tagName:"partial:exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:ua,introducedIn:"3.2.7",resovleParameterCompletionItems:fa,resolveDocumentation:n=>W("partial:exists Tag","The `partial:exists` can be used within conditional statements to test if a partial exists.","https://statamic.dev/tags/partial-exists")},Au=hO;var mO={tagName:"partial:if_exists",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,parameters:ua,introducedIn:"3.2.7",resovleParameterCompletionItems:fa,resolveDocumentation:n=>W("partial:if_exists Tag","The `partial:if_exists` can be used to output the contents of a partial if it exists.","https://statamic.dev/tags/partial-if-exists")},Pu=mO;function nx(n){if(n.getTagName()!="partial")return null;let e="";if(n.hasMethodPart())e=n.getMethodNameValue();else{let t=n.findParameter("src");t!=null&&(e=t.value)}return e}var gO=[_e(Au),_e(Pu)],TO={tagName:"partial",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!0,parameters:ua,requiresClose:!1,allowsContentClose:!0,introducedIn:null,resolveDocumentation:n=>`**Partial Tag**  
Includes another view into the current template.  

[Documentation Reference](https://statamic.dev/tags/partial)
`,resolveDynamicParameter:Ge,resovleParameterCompletionItems:fa,resolveCompletionItems:n=>{let e=[];if(n.leftChar=='"'&&n.leftWord==':src="')return{items:[],analyzeDefaults:!0,isExclusiveResult:!1};if((n.leftWord=="partial"||n.leftWord=="/partial")&&n.leftChar==":"||n.leftWord=='src="'&&n.leftChar=='"')return n.project.getViews().forEach(r=>{let i=decodeURIComponent(r.documentUri);if(wr.hasDetails(i)){let s=wr.documentDetails.get(i);e.push({label:s.documentName+"("+r.relativeDisplayName+")",insertText:r.relativeDisplayName,detail:s.documentName,documentation:{kind:er.MarkupKind.Markdown,value:s.documentDescription},kind:er.CompletionItemKind.File})}else e.push({label:r.relativeDisplayName,kind:er.CompletionItemKind.File})}),n.leftWord!='src="'&&(e=e.concat(gO)),{analyzeDefaults:!1,isExclusiveResult:!0,items:e};if(n.currentNode!=null&&n.project!=null){let t=nx(n.currentNode);if(t!=null&&t.trim().length>0){let r=n.project.findRelativeView(t);if(r!=null&&_h.hasDocument(r.documentUri)){let i=_h.getDocument(r.documentUri);if(i!=null){let s=i.getAllAntlersNodes(),a=_O(s),l=[];r.varReferenceNames!=null&&r.varReferenceNames.forEach((f,d)=>{a.push(d)});let u=[];if(r.injectsParameters.length>0){let f={start:{line:n.position.line,character:n.position.character-0},end:n.position};r.injectsParameters.forEach(d=>{let h=d.name+'="$1"';l.includes(d.name)||(l.push(d.name),u.push({label:d.name,kind:er.CompletionItemKind.Value,insertTextFormat:er.InsertTextFormat.Snippet,textEdit:er.TextEdit.replace(f,h),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}if(a.length>0){let f={start:{line:n.position.line,character:n.position.character-0},end:n.position};a.forEach(d=>{let h=d+'="$1"';l.includes(d)||(l.push(d),u.push({label:d,kind:er.CompletionItemKind.Value,insertTextFormat:er.InsertTextFormat.Snippet,textEdit:er.TextEdit.replace(f,h),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}))})}return on(u)}}}}return{analyzeDefaults:!0,isExclusiveResult:!1,items:[]}}};function _O(n){let e=[];return n.forEach(t=>{if(t.isTagNode||t.isClosingTag||t.isComment||t.hasMethodPart()&&t.getMethodNameValue().length>0||t.name!=null&&t.name.content.includes("["))return;let r=t.getTagName();!e.includes(r)&&r!="#"&&r!="slot"&&e.push(r)}),e}var rx=TO;var yO={tagName:"increment:reset",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:"3.2.28",parameters:[{isRequired:!0,name:"counter",aliases:[],description:"The incrementing counter to reset",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"to",aliases:[],description:"An optional value to reset the counter to before incrementing starts again",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveDocumentation:n=>Ee("increment:reset Tag","The `increment:reset` tag can be used to reset the value of an incrementing counter.",`{{ array_variable }}
    {{ increment:counter_name }}
{{ /array_variable }}

{{ increment:reset counter="counter_name" }}
`,null)},vu=yO;var bO=[_e(vu)],NO={tagName:"increment",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!1,name:"from",aliases:[],description:"The number to start incrementing by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"by",aliases:[],description:"The number to increment by",acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resolveCompletionItems:n=>n.leftWord=="increment"||n.leftWord=="/increment"&&n.leftChar==":"?ie(bO):Ie,resolveDocumentation:n=>W("increment Tag","The `increment` tag can be used to increment a value each time the tag is encountered.","https://statamic.dev/tags/increment")},ix=NO;var Cu=class{constructor(e){this.node=e}},sx={tagName:"yields",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(n,e)=>({context:new Cu(n),issues:[]})},ox={tagName:"yield",hideFromCompletions:!1,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,parameters:[],introducedIn:null,requiresClose:!1,resolveSpecialType:(n,e)=>({context:new Cu(n),issues:[]}),resolveDocumentation:n=>W("yield Tag","The `yield` tag may be used to push rendered content to named regions within a template's structure.","https://statamic.dev/tags/yield")};var Su=Me(dt(),1);var ax=[{handle:"access cp"},{handle:"configure collections"},{handle:"[view edit create delete publish reorder] {collection} entries"},{handle:"configure structures"},{handle:"[view edit] {structure} structure"},{handle:"edit {global} globals"},{handle:"[view upload edit move rename delete] {container} assets"},{handle:"[view perform] updates"},{handle:"[view edit create delete] users"},{handle:"change passwords"},{handle:"edit roles"},{handle:"configure forms"},{handle:"[view delete] {form} submissions"}];var ki=class{constructor(){this.contextItems=new Map;this.triggerNames=[];this.collectionTriggers=[];this.collectionTriggerCaps=[];this.globalTriggers=[];this.globalTriggerCaps=[];this.formTriggers=[];this.formTriggerCaps=[];this.structureTriggers=[];this.structureTriggerCaps=[];this.assetTriggers=[];this.assetTriggerCaps=[]}getCollectionTriggerCaps(){return this.collectionTriggerCaps}getGlobalTriggerCaps(){return this.globalTriggerCaps}getFormTriggerCaps(){return this.formTriggerCaps}getStructureTriggerCaps(){return this.structureTriggerCaps}getAssetTriggerCaps(){return this.assetTriggerCaps}loadCorePermissions(){this.registerPermissions(ax)}getTriggerNames(){return this.triggerNames}isCollectionTrigger(e){return this.collectionTriggers.includes(e)}isGlobalTrigger(e){return this.globalTriggers.includes(e)}isFormTrigger(e){return this.formTriggers.includes(e)}isStructureTrigger(e){return this.structureTriggers.includes(e)}isAssetTrigger(e){return this.assetTriggers.includes(e)}getTriggerContextItems(e){return this.contextItems.has(e)?this.contextItems.get(e):[]}registerSpecialTrigger(e,t,r){t=="{collection}"?(this.collectionTriggerCaps.includes(r)==!1&&this.collectionTriggerCaps.push(r),this.collectionTriggers.includes(e)==!1&&this.collectionTriggers.push(e)):t=="{structure}"?(this.structureTriggerCaps.includes(r)==!1&&this.structureTriggerCaps.push(r),this.structureTriggers.includes(e)==!1&&this.structureTriggers.push(e)):t=="{container}"?(this.assetTriggerCaps.includes(r)==!1&&this.assetTriggerCaps.push(r),this.assetTriggers.includes(e)==!1&&this.assetTriggers.push(e)):t=="{global}"?(this.globalTriggerCaps.includes(r)==!1&&this.globalTriggerCaps.push(r),this.globalTriggers.includes(e)==!1&&this.globalTriggers.push(e)):t=="{form}"&&(this.formTriggerCaps.includes(r)==!1&&this.formTriggerCaps.push(r),this.formTriggers.includes(e)==!1&&this.formTriggers.push(e))}addContextToTrigger(e,t){this.triggerNames.includes(e)==!1&&this.triggerNames.push(e),this.contextItems.has(e)==!1?this.contextItems.set(e,[t]):this.contextItems.get(e)?.push(t)}registerPermissions(e){for(let t=0;t<e.length;t++){let r=e[t],i=[],s="",a="";if(r.handle.includes("[")&&r.handle.includes("]")){let l=r.handle.indexOf("["),u=r.handle.indexOf("]"),f=u-l,d=r.handle.substr(l+1,f-1).split(" ").filter(_=>_.trim().length>0),h=r.handle.substr(u+1).split(" ").filter(_=>_.trim().length>0);i=d,h.length==2?(s=h[0],a=h[1]):h.length==1&&(s="",a=h[0])}else{let l=r.handle.split(" ").filter(u=>u.trim().length>0);l.length==2&&(i=[l[0]],a=l[1])}for(let l=0;l<i.length;l++){let u=i[l];s.trim().length>0?this.registerSpecialTrigger(u,s,a):this.addContextToTrigger(u,a)}}}};ki.instance=null;(typeof ki.instance>"u"||ki.instance==null)&&(ki.instance=new ki,ki.instance.loadCorePermissions());var tr=ki;function lx(n,e){let t=[];if(n.trim().length==0){let r=tr.instance?.getTriggerNames()??[];for(let i=0;i<r.length;i++)t.push({label:r[i],kind:Su.CompletionItemKind.Value})}else{let r=n.split(" ").filter(_=>_.trim().length>0),i=r[0],s=tr.instance?.getTriggerContextItems(i)??[],a=tr.instance?.isCollectionTrigger(i),l=tr.instance?.isGlobalTrigger(i),u=tr.instance?.isFormTrigger(i),f=tr.instance?.isStructureTrigger(i),d=tr.instance?.isAssetTrigger(i),h=[];if(r.length<=2){a?h=h.concat(e.project.getUniqueCollectionNames()):l?h=h.concat(e.project.getUniqueGlobalsNames()):u?h=h.concat(e.project.getUniqueFormNames()):f?h=h.concat(e.project.getUniqueNavigationMenuNames()):d&&(h=h.concat(e.project.getUniqueAssetNames())),s.length>0&&(h=h.concat(s)),h=[...new Set(h)];for(let _=0;_<h.length;_++)t.push({label:h[_],kind:Su.CompletionItemKind.Value})}else{let _=[];a?_=_.concat(tr.instance?.getCollectionTriggerCaps()??[]):l?_=_.concat(tr.instance?.getGlobalTriggerCaps()??[]):u?_=_.concat(tr.instance?.getFormTriggerCaps()??[]):f?_=_.concat(tr.instance?.getStructureTriggerCaps()??[]):d&&(_=_.concat(tr.instance?.getAssetTriggerCaps()??[])),_=[...new Set(_)];for(let b=0;b<_.length;b++)t.push({label:_[b],kind:Su.CompletionItemKind.Value})}}return t}function Eu(n,e){let t=_u(n.name);return e.context?.parameterContext!=null&&["do","permission"].includes(t)?ie(lx(e.context?.parameterContext.parameter?.value??"",e)):null}var IO={tagName:"user:can",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:Eu,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:n=>W("user:can Tag","The `user:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can")},da=IO;var xO={tagName:"user:logout",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:n=>W("user:logout Tag","The `user:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout")},pa=xO;var AO={tagName:"user:logout_url",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"redirect",description:"An optional URL to redirect the user after being logged out",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:n=>Ee("user:logout_url","The `user:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ user:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url")},ha=AO;var cx={tagName:"switch",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:n=>W("switch Tag","The `switch` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")},ux={tagName:"rotate",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,introducedIn:null,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[{name:"between",description:"A set of values to iterate over",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string","array"]},{name:"for",description:"A unique name for the switch instance",aliases:[],isRequired:!1,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:n=>W("rotate Tag","The `rotate` tag can be used to alternate between a set of values each time the tag is evaluated.","https://statamic.dev/tags/switch")};var PO={tagName:"oauth",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"provider",description:"The OAuth provider to be used.",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]},{name:"redirect",description:"The URL to be redirected to after authenticating.",aliases:[],isRequired:!0,acceptsVariableInterpolation:!0,allowsVariableReference:!1,isDynamic:!1,expectsTypes:["string"]}],resovleParameterCompletionItems:(n,e)=>n.name=="provider"?lt(e.project.getOAuthProviders()):null,resolveDocumentation:n=>Ee("oauth Tag","The `oauth` tag can be used to generate login URls for various third-party services.",'<a href="{{ oauth provider="github" }}">Sign In with Github</a>',"https://statamic.dev/tags/oauth")},fx=PO;var vO={tagName:"session:dump",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:n=>W("session:dump Tag","The `session:dump` tag will display the contents of the user's session to the browser. This tag behaves similarly to the `dd` helper functions, but returns just the session data.","https://statamic.dev/tags/session-dump")},Ru=vO;var ma=class{constructor(e){this.node=e}};var CO={tagName:"session:set",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:null,resolveDynamicParameter:Ge,resolveSpecialType:(n,e)=>({context:new ma(n),issues:[]}),resolveDocumentation:n=>W("session:set Tag","The `session:set` tag is used to add new data to the user's session.","https://statamic.dev/tags/session-set")},ku=CO;var is=class{constructor(){this.knownVariables=new Map}registerDocumentSessionVariables(e,t){this.knownVariables.has(e)||this.knownVariables.set(e,new Map);let r=this.knownVariables.get(e);r.clear();for(let i=0;i<t.length;i++){let s=t[i].node;if(s.hasParameters)for(let a=0;a<s.parameters.length;a++){let l=s.parameters[a];r.set(l.name,t[i])}}}getKnownSessionVariableNames(){let e=[];return this.knownVariables.forEach(t=>{t.forEach((r,i)=>{e.includes(i)==!1&&e.push(i)})}),e}};is.instance=null;(typeof is.instance>"u"||is.instance==null)&&(is.instance=new is);var Fl=is;var dx=Me(dt(),1);function px(n,e){let t=[],r=n.getArrayValue(),i=e.filter(s=>!r.includes(s));for(let s=0;s<i.length;s++)t.push({label:i[s],kind:dx.CompletionItemKind.Variable});return ie(t)}var SO={tagName:"session:forget",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"keys",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The session keys to clear",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>{if(n.name=="keys"&&e.context?.parameterContext!=null){let t=Fl.instance?.getKnownSessionVariableNames()??[];if(e.context.parameterContext.parameter!=null)return px(e.context.parameterContext.parameter,t)}return null},resolveDocumentation:n=>W("session:forget Tag","The `session:forget` tag is used to remove variables from the user's session.","https://statamic.dev/tags/session-forget")},wu=SO;var EO={tagName:"session:flush",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDocumentation:n=>W("session:flush Tag","The `session:flush` tag will clear all values from the visitor's session. If the visitor is currently signed in they will also be signed out.","https://statamic.dev/tags/session-flush")},Ou=EO;var RO={tagName:"session:flash",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:Ge,resolveSpecialType:(n,e)=>({context:new ma(n),issues:[]}),resolveDocumentation:n=>W("session:flash Tag","The `session:flash` tag can be used to add a value to the user's session. Flashed values only persist for a single request, and are then removed.","https://statamic.dev/tags/session-flash")},Lu=RO;var kO={tagName:"markdown:indent",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>W("markdown:indent Tag","The `markdown:indent` tag is similar to the markdown tag, but will ignore leading whitepsace while rendering the tag's content as markdown.","https://statamic.dev/tags/markdown-indent")},Du=kO;var wO=[_e(Du)],OO={tagName:"markdown",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:n=>n.isPastTagPart==!1&&(n.leftWord=="markdown"||n.leftWord=="/markdown")&&n.leftChar==":"?ie(wO):Ie,resolveDocumentation:n=>W("markdown Tag","The `markdown` tag can be used to render the tags contents as markdown.","https://statamic.dev/tags/markdown")},hx=OO;var mx=Me(Gr(),1);function Fu(n,e){let t=[],r=e;if(n.trim().length>0&&n.includes(".")&&n.endsWith(".")){let i=n.substr(0,n.length-1);r=r.filter(s=>s.startsWith(i))}for(let i=0;i<r.length;i++){let s=r[i],a=!0;n.includes(".")&&(s.startsWith(n)==!1?a=!1:s=s.substr(n.length)),a&&t.push({label:s,insertText:s,kind:mx.CompletionItemKind.Text})}return t}function gx(n,e){return Fu(n,e.getRouteNames())}var LO={tagName:"route",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,parameters:[],introducedIn:null,resolveDynamicParameter:Ge,resolveCompletionItems:n=>{if(n.leftMeaningfulWord=="route"){let e=Tu(n);return ie(gx(e,n.project))}return Ie},resolveDocumentation:n=>W("route Tag","The `route` tag can be used to generate a full URL [to a named route](https://laravel.com/docs/8.x/routing#named-routes), including any defined route parameters.","https://statamic.dev/tags/route")},Tx=LO;var Mu=Me(dt(),1),_x=[{label:"301 Permanent",insertText:"301",kind:Mu.CompletionItemKind.EnumMember},{label:"302 Temporary",insertText:"302",kind:Mu.CompletionItemKind.EnumMember},{label:"404 Not Found",insertText:"404",kind:Mu.CompletionItemKind.EnumMember}];var DO={tagName:"redirect",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{name:"to",description:"The destination URL.",aliases:["url"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!0},{name:"response",description:"The HTTP response code to use.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:n=>n.name=="response"?ie(_x):Ie,resolveDocumentation:n=>W("redirect Tag","The `redirect` tag can be used to redirect the site visitor to a URL or named route. An optional HTTP status code can also be specified on the response using the `response` parameter.","https://statamic.dev/tags/redirect")},yx=DO;var Nx=Me(dt(),1);var ss=class{constructor(){this.knownSections=new Map}registerDocumentSections(e,t){this.knownSections.has(e)||this.knownSections.set(e,new Map);let r=this.knownSections.get(e);r.clear();for(let i=0;i<t.length;i++){let s=t[i];s.node.hasMethodPart()&&r.set(s.node.getMethodNameValue(),s)}}getKnownSectionNames(){let e=[];return this.knownSections.forEach(t=>{t.forEach((r,i)=>{e.includes(i)==!1&&e.push(i)})}),e}};ss.instance=null;(typeof ss.instance>"u"||ss.instance==null)&&(ss.instance=new ss);var bx=ss;var FO={tagName:"section",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[],resolveCompletionItems:n=>{if((n.leftWord=="section"||n.leftWord=="/section")&&n.leftChar==":"){let e=[],t=bx.instance?.getKnownSectionNames()??[];for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Nx.CompletionItemKind.Field});return on(e)}return Ie},resolveDocumentation:n=>W("section Tag","The `section` tag is used to push content to a named region defined by the `yield` tag.","https://statamic.dev/tags/section")},Ix=FO;var MO={tagName:"obfuscate",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>W("obfuscate Tag","The `obfuscate` tag converts the tags's content into a format that is difficult for bots to read, but can easily be viewed by users within their browser.","https://statamic.dev/tags/obfuscate")},xx=MO;var VO={tagName:"parent",hideFromCompletions:!1,requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:n=>W("parent Tag","The `parent` tag provides access to data from the current page's parent (the URL one level above the current page).","https://statamic.dev/tags/parent")},Ax=VO;function yh(n,e){return Fu(n,e.getTranslationKeys())}var BO=["translate","trans","trans_choice"],Vu={tagName:"translate",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!0,parameters:[{isRequired:!1,name:"key",description:"The key of the translation string to find.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"locale",description:"The locale to be used when translating.",acceptsVariableInterpolation:!1,aliases:["site"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"count",description:"The number of items to use for pluralization.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>{if(n.name=="key"){let t="";return e.context?.parameterContext!=null&&e.context.parameterContext.parameter!=null&&(t=e.context.parameterContext.parameter.value),ie(yh(t,e.project))}return Ie},resolveDynamicParameter:Ge,resolveCompletionItems:n=>{if(n.leftMeaningfulWord!=null&&BO.includes(n.leftMeaningfulWord)){let e=Tu(n);return ie(yh(e,n.project))}return Ie},resolveDocumentation:n=>W("trans Tag","The `trans` tag can be used to retrieve a string for the current locale's language file.","https://statamic.dev/tags/trans")},Px=et(Vu,"trans"),bh=et(Vu,"trans_choice");bh.resolveDocumentation=n=>W("trans_choice Tag","The `trans_choice` tag can be used to retrieve a pluralized string for the current locale's language file.","https://statamic.dev/tags/trans#pluralization");var qO={tagName:"svg",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The SVG filename relative to the project root",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"title",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"desc",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"sanitize",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"Determines whether the rendered SVG will be sanitized.",expectsTypes:["bool"],isDynamic:!1},{isRequired:!1,name:"allow_attrs",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"A list of allowed attributes when sanitizing.",expectsTypes:["array","string"],isDynamic:!1},{isRequired:!1,name:"allow_tags",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"A list of allowed tags when sanitizing.",expectsTypes:["array","string"],isDynamic:!1}],resolveDynamicParameter:Ge,resolveDocumentation:n=>W("svg Tag","The `svg` tag can be used to render inline SVGs, as well as set attributes on the rendered `<svg>` element.","https://statamic.dev/tags/svg")},vx=qO;var UO={tagName:"asset",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The path to the file",expectsTypes:["string"],isDynamic:!1,name:"url"}],augmentScope:(n,e)=>(e.addVariables(oa(n)),e),resolveDocumentation:n=>Ee("asset Tag","The `asset` tag can be used to retrive Assets by supplying a URL.",`{{ asset url="/url/for/asset.png" }}
    <img src="{{ url }}" alt="{{ alt }}" />
{{ /asset }}`,"https://statamic.dev/tags/asset")},Cx=UO;var Sx=Me(dt(),1);function Nh(n){let e=[],t=n.getUniqueAssetNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Sx.CompletionItemKind.Field});return e}var Ex=["container","id","handle"],jO={tagName:"assets",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"container",aliases:["id","handle"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The handle of the asset container.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"folder",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Filters the resulting assets by specific folder.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"recursive",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Returns all assets in all subdirectories.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"limit",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Limits the total results",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sort entries by any asset variable.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>Ex.includes(n.name)?ie(Nh(e.project)):Ie,augmentScope:(n,e)=>{e.addVariables(oa(n));let t="";if(n.name!=null&&n.name.getMethodName()!=null)t=n.name.getMethodName();else{let r=n.findAnyParameter(Ex);r!=null&&r.containsSimpleValue()&&(t=r.value)}return t.length>0&&e.injectAssetContainer(n,t),e},resolveCompletionItems:n=>(n.leftWord=="assets"||n.leftWord=="/assets")&&n.leftChar==":"?ie(Nh(n.project)):Ie,resolveDocumentation:n=>Ee("assets Tag","The `assets` tag can be used to retrieve multiple Assets from an Asset container.",`{{ assets container="container-name" }}
    {{# Loop over all assets in the container. #}}
	<img src="{{ url }}" alt="{{ alt }}" />
{{ /assets }}`,"https://statamic.dev/tags/assets")},Rx=jO;var GO={tagName:"get_content",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,introducedIn:null,allowsArbitraryParameters:!1,parameters:[{isRequired:!1,name:"from",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"The ID to retrieve data for.",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"locale",aliases:["site"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The locale to show the content in.",expectsTypes:["string"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>n.name=="locale"||n.name=="site"?lt(e.project.getSiteNames()):null,resolveDocumentation:n=>Ee("get_content Tag","The `get_content` tag can be used to retrieve content from other entries. This tag accepts the ID of another entry, and will return access to all data for that entry.",`{{ get_content from="the-entry-id" }}
{{ /get_content }}`,"https://statamic.dev/tags/get_content")},kx=GO;function wx(n){return[{name:"basename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"extension",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"filename",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"is_image",dataType:"boolean",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"file",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"file",dataType:"last_modified",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size",dataType:"string",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_bytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_b",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_gigabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_gb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_kilobytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_kb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_megabytes",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n},{name:"size_mb",dataType:"number",sourceName:"*internal.file",sourceField:null,introducedBy:n}]}var WO={tagName:"get_files",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"in",aliases:["from"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The directory to find files in relative to the public directory",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"depth",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The depth of the subdirectories",expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"not_in",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"The subdirectories or pattern to exclude",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_size",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],description:"The file size filter to use",isDynamic:!1},{isRequired:!1,name:"ext",aliases:["extension"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The extension(s) to filter by",expectsTypes:["string","array"],isDynamic:!1},{isRequired:!1,name:"include",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:["match"],description:"Filter files by a regular expression",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"exclude",description:"Excludes files by a regular expression",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"file_date",description:"Filters files by last modified date",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"limit",description:"Limits the total number of results",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"offset",description:"The number of entries the results should be offset by",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1},{isRequired:!1,name:"sort",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sorts the listing by extension, size, last_modified, or random",expectsTypes:["string"],isDynamic:!1}],augmentScope:(n,e)=>(e.addVariables(wx(n)),e),resolveDocumentation:n=>W("get_files Tag","The `get_files` tag can be used to display information about files on the site's local filesystem.","https://statamic.dev/tags/get_files")},Ox=WO;function Bu(n){return[{name:"width",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:n},{name:"height",dataType:"number",sourceName:"*internal.glide",sourceField:null,introducedBy:n},{name:"url",dataType:"string",sourceName:"*internal.glide",sourceField:null,introducedBy:n}]}var Lx=Me(dt(),1);function Hr(n,e,t){return{endLine:t.valuePosition?.end?.line??0,startLine:t.namePosition?.start?.line??0,endPos:t.valuePosition?.end?.char??0,startPos:t.namePosition?.start?.char??0,message:n,severity:Lx.DiagnosticSeverity.Error}}var Ih=["greyscale","sepia"],xh=["jpg","pjpg","png","gif","webp","avif","tif","bmp","psd"],Dx=["auto","0","90","180","270"],ga=[{isRequired:!1,name:"src",aliases:["path","id"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"The URL of the image when not using shorthand syntax.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"tag",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Outputs an image tag when set to true.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"alt",description:"The alt attribute value to use when generating tags.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"absolute",description:"Whether to output full URLs.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{name:"width",expectsTypes:["number"],isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The width of the image, in pixels.",isDynamic:!1},{name:"height",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],description:"The height of the image, in pixels.",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"square",expectsTypes:["number"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Sets both then height and width of the image.",isDynamic:!1,isRequired:!1},{name:"fit",expectsTypes:["string"],acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"How the image is fitted to its target dimensions.",isDynamic:!1,isRequired:!1},{name:"crop",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Crops the image to the specific dimensions.",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"orient",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Rotates the image.",expectsTypes:["*"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Dx.includes(e.value)&&t.push(Hr("Invalid orient value",n,e)),t}},{name:"quality",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Defines the quality of the image",expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"dpr",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],description:"Defines the device pixel ratio.",expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<1||t>8)&&r.push(Hr("dpr must be an integer between 1 and 8.",n,e)),r}},{name:"format",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Encodes the image to a specific format.",expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!xh.includes(e.value)&&t.push(Hr("Format must be one of: "+xh.join(","),n,e)),t}},{name:"bg",description:"Sets the background color for transparent images.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"blur",description:"Adds a blur effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<0||t>100)&&r.push(Hr("blur must be a value between 0 and 100.",n,e)),r}},{name:"brightness",description:"Adjusts the image brightness.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<-100||t>100)&&r.push(Hr("brightness must be a value between -100 and 100.",n,e)),r}},{name:"contrast",description:"Adjusts the image contrast.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<-100||t>100)&&r.push(Hr("contrast must be a value between -100 and 100.",n,e)),r}},{name:"gamma",description:"Adjusts the image gamma.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseFloat(e.value),r=[];return e.containsSimpleValue()&&(t<.1||t>9.99)&&r.push(Hr("gamma must be a value between 0.1 and 9.99.",n,e)),r}},{name:"sharpen",description:"Sharpens the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<0||t>100)&&r.push(Hr("sharpen must be a value between 0 and 100.",n,e)),r}},{name:"pixelate",description:"Applies a pixelation effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=parseInt(e.value),r=[];return e.containsSimpleValue()&&(t<0||t>100)&&r.push(Hr("pixelate must be a value between 0 and 100.",n,e)),r}},{name:"filter",description:"Applies a filter effect to the image.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1,validate:(n,e)=>{let t=[];return e.containsSimpleValue()&&e.value.trim().length>0&&!Ih.includes(e.value)&&t.push(Hr("Filter must be one of: "+Ih.join(","),n,e)),t}},{name:"preset",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],description:"A collection of pre-configured image manipulation parameters.",isDynamic:!1,isRequired:!1}];function Ta(n,e){return n.name=="orient"?lt(Dx):n.name=="format"?lt(xh):n.name=="filter"?lt(Ih):n.name=="preset"?lt(e.project.getAssetPresets()):Ie}var HO={tagName:"glide:batch",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:ga,introducedIn:null,augmentScope:(n,e)=>(e.addVariables(Bu(n)),e),resovleParameterCompletionItems:Ta,resolveDocumentation:n=>W("glide:batch Tag","The `glide:batch` tag is similar to the glide tag, but can be used to apply image manipulations to multiple images within a piece of content.","https://statamic.dev/tags/glide-batch")},qu=HO;var YO={tagName:"glide:data_url",hideFromCompletions:!1,requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,injectParentScope:!1,parameters:ga,introducedIn:null,resovleParameterCompletionItems:Ta,resolveDocumentation:n=>W("glide:data_url Tag","The `glide:data_url` tag returns manipulated image datas as a data URI.",null)},Uu=YO;var $O=[_e(qu),_e(Uu)],KO={tagName:"glide",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!1,parameters:ga,introducedIn:null,augmentScope:(n,e)=>(e.addVariables(Bu(n)),e),resovleParameterCompletionItems:Ta,resolveCompletionItems:n=>n.isPastTagPart==!1&&(n.leftWord=="glide"||n.leftWord=="/glide")&&n.leftChar==":"?ie($O):Ie,resolveDocumentation:n=>W("glide Tag","The `glide` tag is used to manipulate images on the fly. Image manipulations may include resizing, cropping, or adjusting sharpness and constrast, amongst many others.","https://statamic.dev/tags/glide")},Fx=KO;var Mx={tagName:"iterate",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:n=>W("iterate Tag","The `iterate` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")},Vx={tagName:"foreach",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"Optionally rename the key/value variables",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"array",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The array to iterate",expectsTypes:["array"],isDynamic:!1,isRequired:!1}],resolveDocumentation:n=>W("foreach Tag","The `foreach` tag can be used to iterate over arbitrary arrays.","https://statamic.dev/tags/foreach")};function Bx(n){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:n},{name:"name",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:n}]}var ju=[{isRequired:!1,name:"id",description:"The ID of the content to localize.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"sort",description:"Sort by a site's key.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"current_first",description:"When true, ensures that the current locale is first.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"all",description:"When true, all locale data will be returned.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!0,name:"self",description:"When true, the current locale will be included.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,name:"collection_term_workaround",description:"Disables the behavior introduced in https://github.com/statamic/cms/pull/6466.",acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,expectsTypes:["boolean"],isDynamic:!1}];var zO={tagName:"locales:count",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:ju,introducedIn:"3.0.36",resolveDocumentation:n=>W("locales:count Tag","The `locales:count` tag can be used to count the number of locales the current content is available in.","https://statamic.dev/tags/locales-count")},Gu=zO;var QO=[_e(Gu)],XO={tagName:"locales",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,parameters:ju,introducedIn:null,augmentScope:(n,e)=>(e.addVariableArray("locale",Bx(n)),e.addVariable({name:"current",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:n}),e.addVariable({name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:n}),e.addVariable({name:"exists",dataType:"boolean",sourceField:null,sourceName:"*internal.locale",introducedBy:n}),e.addVariable({name:"permalink",dataType:"string",sourceField:null,sourceName:"*internal.locale",introducedBy:n}),e),resolveDocumentation:n=>W("locales Tag","The `locales` tag can be used to access all the locales the current content is available in.","https://statamic.dev/tags/locales"),resolveCompletionItems:n=>n.isPastTagPart==!1&&(n.leftWord=="locale"||n.leftWord=="/locale")&&n.leftChar==":"?ie(QO):Ie},qx=XO;var JO={tagName:"mix",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,name:"src",description:"The path to the versioned file, relative to the public directory",acceptsVariableInterpolation:!1,aliases:["path"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,name:"in",description:"The location of the mix manifest file",acceptsVariableInterpolation:!1,aliases:["from"],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:n=>W("mix Tag","The `mix` tag is used to return the path of CSS and JavaScript files versioned with [Laravel Mix](https://laravel.com/docs/8.x/mix).","https://statamic.dev/tags/mix")},Ux=JO;var Ml=Me(dt(),1);function jx(n){let e=[],t=n.getUniqueUserGroupNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Ml.CompletionItemKind.Field});return e}function Gx(n){let e=[],t=n.getUniqueUserRoleNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Ml.CompletionItemKind.Field});return e}function _a(n,e){let t=[],r=e.getUniqueUserGroupNames(),i=r.filter(s=>!n.includes(s));for(let s=0;s<i.length;s++)t.push({label:i[s],kind:Ml.CompletionItemKind.Field});return t}function ya(n,e){let t=[],r=e.getUniqueUserRoleNames(),i=r.filter(s=>!n.includes(s));for(let s=0;s<i.length;s++)t.push({label:i[s],kind:Ml.CompletionItemKind.Field});return t}var ZO={tagName:"user:in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="groups"||n.name=="group")&&e.context?.parameterContext!=null?ie(_a(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:n=>W("user:in Tag","The `user:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in")},Wu=ZO;var eL={tagName:"user:not_in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="groups"||n.name=="group")&&e.context?.parameterContext!=null?ie(_a(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:n=>W("user:not_in Tag","The `user:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in")},ba=eL;var tL={tagName:"user:is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="roles"||n.name=="role")&&e.context?.parameterContext!=null?ie(ya(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:n=>W("user:is Tag","The `user:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is")},Na=tL;var nL={tagName:"user:isnt",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="roles"||n.name=="role")&&e.context?.parameterContext!=null?ie(ya(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveDocumentation:n=>W("user:isnt Tag","The `user:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt")},Ia=nL;var rL={tagName:"in",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["groups"],allowsVariableReference:!1,name:"group",description:"The groups to check against",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="groups"||n.name=="group")&&e.context?.parameterContext!=null?ie(_a(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:n=>(n.leftWord=="in"||n.leftWord=="/in")&&n.leftChar==":"?ie(jx(n.project)):Ie,resolveDocumentation:n=>W("in Tag","The `in` tag can be used to check if the authenticated user belongs to one or more groups. This tag operates similarly to the `user:in` tag.","https://statamic.dev/tags/user-in")},Wx=rL;var iL={tagName:"not_found",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:[],introducedIn:null,resolveDocumentation:n=>Ee("404 (Not Found) Tag","The `not_found` tag will trigger a 404 status code, and display the 404 template to the site visitor.",`{{ unless logged_in }}
	{{# Display the 404 Not Found page. #}}
	{{ not_found }}
{{ /unless }}`,"https://statamic.dev/tags/404")},Hx=iL;var sL={tagName:"is",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:["roles"],allowsVariableReference:!1,name:"role",description:"The roles to check against.",expectsTypes:["string","array"],isDynamic:!1}],resovleParameterCompletionItems:(n,e)=>(n.name=="roles"||n.name=="role")&&e.context?.parameterContext!=null?ie(ya(e.context.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:n=>(n.leftWord=="is"||n.leftWord=="/is")&&n.leftChar==":"?ie(Gx(n.project)):Ie,resolveDocumentation:n=>W("is Tag","The `is` tag can be used to check whether the currently authenticated user has one or more roles. This tag behaves the same as the `user:is` tag.","https://statamic.dev/tags/user-is")},Yx=sL;var oL={tagName:"widont",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>Ee("widont Tag","The `widont` tag is similar to the [widont modifier](https://statamic.dev/modifiers/widont), and will attempt to prevent lines with a single word from appearing within the tags rendered output.",`{{ widont }}
    {{ content }}
{{ /widont }}`,null)},$x=oL;var Hu=[{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"id",description:"The user ID to fetch.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"email",description:"The email address to find the user by.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"field",description:"The field to fetch the user by",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],name:"value",description:"The value to search for.",expectsTypes:["string"],isDynamic:!1}];var aL={tagName:"user:profile",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Hu,introducedIn:null,augmentScope:(n,e)=>(e.injectBlueprint(n,"user"),e),resovleParameterCompletionItems:(n,e)=>n.name=="field"?ie(uu(e.project.getUserFields())):Ie,resolveDocumentation:n=>W("user:profile Tag","The `user:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter.",null)},xa=aL;var Kx={tagName:"dd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>Ee("dd Tag","The `dd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the dd tag.
	#}}
    {{ dd }}
{{ /collection:articles }}`,null)},zx={tagName:"ddd",hideFromCompletions:!1,requiresClose:!1,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>Ee("ddd Tag","The `ddd` tag is a useful tag for debugging, and will display the raw data available at the point the tag is rendered. This tag will stop the template from rendering after it is encountered.  If Ignition is available, this tag will use the [ddd](https://flareapp.io/blog/1-introducing-ddd-a-new-global-helper-for-laravel) method.",`{{ collection:articles }}
	{{#
		View all data available, for the first
		entry that renders the ddd tag.
	#}}
    {{ ddd }}
{{ /collection:articles }}`,null)};var lL={tagName:"path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["src"],allowsVariableReference:!0,description:"The path source",name:"to",isDynamic:!1,expectsTypes:["string"]},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],description:"Whether to generate absolute paths",expectsTypes:["boolean"],isDynamic:!1,name:"absolute"}],resolveDocumentation:n=>W("path Tag","The `path` tag can be used to generate URLs from relative URLs, or an entry ID.",null)},Qx=lL;var cL={tagName:"user:cant",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,resovleParameterCompletionItems:Eu,parameters:[{name:"do",acceptsVariableInterpolation:!1,aliases:["permission"],allowsVariableReference:!1,description:"The permissions to check against",expectsTypes:["string"],isRequired:!0,isDynamic:!1}],resolveDocumentation:n=>W("user:cant Tag","The `user:cant` tag is used to check if the currently authenticated user does not have a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user does not have the specified permissions.","https://statamic.dev/tags/user-can#cant")},Yu=cL;var uL={tagName:"query",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!0,introducedIn:null,parameters:[{name:"builder",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,description:"The query to evaluate",expectsTypes:["string"],isRequired:!0,isDynamic:!1}]},Xx=uL;var Hs=Me(dt(),1);var oi=[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"src",description:"The relative path to the file.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"cache_bust",description:"Whether to output the last modified date.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"version",description:"Whether to check a versioning manifest to produce the final URL.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"absolute",description:"Generate absolute URLs or not.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,name:"locale",description:"The locale the path should be generated in.",expectsTypes:["string"],isDynamic:!1}];var fL=[{label:"asset",kind:Hs.CompletionItemKind.Text},{label:"css",kind:Hs.CompletionItemKind.Text},{label:"img",kind:Hs.CompletionItemKind.Text},{label:"js",kind:Hs.CompletionItemKind.Text},{label:"output",kind:Hs.CompletionItemKind.Text},{label:"path",kind:Hs.CompletionItemKind.Text}],dL={tagName:"theme",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,introducedIn:null,injectParentScope:!1,parameters:oi,resolveCompletionItems:n=>n.isPastTagPart==!1&&(n.leftWord=="theme"||n.leftWord=="/theme")&&n.leftChar==":"?ie(fL):Ie},Jx=dL;var Ah={tagName:"theme:path",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:oi,resolveDocumentation:n=>W("theme:path Tag","The `theme:path` tag may be used to generate URLs for public assets. This tag may also optionally add the current locale, generate relative URLs, or add cache busting URL parameters to the end of the generated URL.",null)},Zx=et(Ah,"theme:asset");var pL={tagName:"theme:css",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...oi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:n=>W("theme:css Tag","The `theme:css` tag may be used to generate a CSS path relative to a public `css/` directory for any arbitrary file path. This tag may also optionally create the HTML `link` tag.",null)},eA=pL;var hL={tagName:"theme:img",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...oi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]},{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"alt",description:"The alt text to use when generating the HTML tag",expectsTypes:["string"]}],resolveDocumentation:n=>W("theme:img Tag","The `theme:img` tag may be used to generate an image path relative to a public `img/` directory for any arbitrary file path. This tag may also optionally create the HTML `img` tag.",null)},tA=hL;var mL={tagName:"theme:js",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[...oi,{isRequired:!1,isDynamic:!1,aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!0,name:"tag",description:"Whether to generate an HTML tag",expectsTypes:["boolean"]}],resolveDocumentation:n=>W("theme:js Tag","The `theme:js` tag may be used to generate a JavaScript path relative to a public `js/` directory for any arbitrary file path. This tag may also optionally create the HTML `script` tag.",null)},nA=mL;var gL={tagName:"theme:output",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,requiresClose:!1,injectParentScope:!1,introducedIn:null,parameters:[{isRequired:!0,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"src",description:"The path to the file",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,allowsVariableReference:!0,acceptsVariableInterpolation:!1,aliases:[],name:"as",description:"An optional alias for the contents variable",expectsTypes:["string"],isDynamic:!1}],augmentScope:(n,e)=>{if(n.isClosedBy!=null){let t=n.findParameter("as");t!=null?e.addVariable({name:t.value,dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:n}):e.addVariable({name:"output_contents",dataType:"string",sourceField:null,sourceName:"*internal.theme.context",introducedBy:n})}return e},resolveDocumentation:n=>W("theme:output Tag","The `theme:output` tag may be used to output the contents of any arbitrary file, relative to the site's `resources/` directory.",null)},rA=gL;var TL={tagName:"scope",hideFromCompletions:!1,requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveDocumentation:n=>Ee("scope Tag","The `scope` tag creates a copy of all available variables, and saves them to a new  *array* variable defined by the tag's method part.",`{{ scope:scope_name }}
    {{ scope_name:title }}
{{ /scope:scope_name }}
`,null)},iA=TL;var _L={tagName:"if",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ge,resolveDocumentation:n=>W("if Conditional Control Structure","The contents of the `if` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},sA=_L;var yL={tagName:"elseif",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ge,resolveDocumentation:n=>W("elseif Conditional Control Structure","The contents of the `elseif` tag will be rendered when it's expression evaluates to `true`.","https://statamic.dev/antlers#conditions")},oA=yL;var bL={tagName:"else",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDocumentation:n=>W("else Conditional Control Structure","The contents of the `else` control structure will be evaluated when all previous conditional branch conditions were not met.","https://statamic.dev/antlers#conditions")},aA=bL;var lA=Me(dt(),1);var NL={tagName:"session:has",hideFromCompletions:!1,injectParentScope:!1,requiresClose:!1,allowsArbitraryParameters:!0,allowsContentClose:!0,parameters:[],introducedIn:"3.1.28",resolveDynamicParameter:Ge,resolveDocumentation:n=>W("session:has Tag","The `session:has` tag can be used to determine of the user's session contains a specific variable.","https://statamic.dev/tags/session-has")},$u=NL;var IL=[_e(ku),_e(Lu),_e(wu),_e(Ou),_e($u),_e(Ru)],xL={tagName:"session",requiresClose:!1,allowsContentClose:!0,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"as",description:"An optional alias for the session data",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveCompletionItems:n=>{if(n.isPastTagPart==!1&&(n.leftWord=="session"||n.leftWord=="/session")&&n.leftChar==":"){let e=Fl.instance?.getKnownSessionVariableNames()??[],t=[];t=t.concat(IL);for(let r=0;r<e.length;r++)t.push({label:e[r],kind:lA.CompletionItemKind.Variable});return ie(t)}return Ie},augmentScope:(n,e)=>{let t=n.findParameter("as"),r=Fl.instance?.getKnownSessionVariableNames()??[],i=[];for(let s=0;s<r.length;s++)i.push({dataType:"*",name:r[s],sourceField:null,sourceName:"project.session",introducedBy:n});return t==null?e.addVariables(i):e.addVariableArray(t.value,i),e}},cA=xL;var Vl={tagName:"user:forgot_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ge,augmentScope:(n,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:n},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:n},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.reset_password",introducedBy:n}]),e),resolveDocumentation:n=>W("user:forgot_password_form Tag",'The `user:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form")},Ph=et(Vl,"member:forgot_password_form");Ph.resolveDocumentation=n=>W("member:forgot_password_form Tag",'The `member:forgot_password_form` tag is used to quickly create a "forgot password" form for site users.',"https://statamic.dev/tags/user-forgot_password_form");function os(n){return[{name:"handle",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"display",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"type",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"field",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"error",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"instructions",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n},{name:"old",dataType:"string",sourceName:"*internal.forms.fields",sourceField:null,introducedBy:n}]}function Aa(n){return[{name:"success",dataType:"string",sourceField:null,sourceName:"*internal.forms",introducedBy:n},{name:"submission_created",dataType:"boolean",sourceField:null,sourceName:"*internal.forms",introducedBy:n}]}function AL(n){return[{name:"current_password",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:n},{name:"password",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:n},{name:"password_confirmation",dataType:"string",sourceName:"*internal.user_password_form",sourceField:null,introducedBy:n}]}var PL={tagName:"user:password_form",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!0,parameters:[{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],introducedIn:"3.3.61",allowsArbitraryParameters:!0,augmentScope:(n,e)=>{e.addVariables(Aa(n)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:n}),e.addVariableArray("fields",os(n));let t=AL(n);return e.addVariableArray("old",t),e.addVariableArray("error",t),e}},Ku=PL;var Bl={tagName:"user:reset_password_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",description:"Where the user should be taken after submitting the form",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ge,augmentScope:(n,e)=>(e.addVariables([{name:"success",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:n},{name:"url_invalid",dataType:"boolean",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:n},{name:"errors",dataType:"array",sourceField:null,sourceName:"*internal.user.password_reset",introducedBy:n}]),e),resolveDocumentation:n=>W("user:reset_password_form Tag","The `user:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form")},vh=et(Bl,"member:reset_password_form");vh.resolveDocumentation=n=>W("member:reset_password_form Tag","The `member:reset_password_form` tag is used to quickly create password reset forms. Forms created with this tag should be displayed after a user has received and clicked a password reset email link.","https://statamic.dev/tags/user-reset_password_form");function Ch(n,e){return{sourceName:e.blueprintName,dataType:e.type,name:e.name,sourceField:e,introducedBy:n}}function uA(n){let e=new Map;for(let t=0;t<n.length;t++)e.set(n[t].name,n[t]);return e}function as(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r];t.push({sourceName:i.blueprintName,dataType:i.type,name:i.name,sourceField:i,introducedBy:n})}return t}var vL={tagName:"user:profile_form",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!0,parameters:[{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],introducedIn:"3.3.61",allowsArbitraryParameters:!0,augmentScope:(n,e)=>{e.addVariables(Aa(n)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:n}),e.addVariableArray("fields",os(n));let t=e.statamicProject.getUserFields(),r=as(n,t);return e.addVariableArray("old",r),e.addVariableArray("error",r),e}},zu=vL;var ql={tagName:"user:register_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after registering",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed registration attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ge,augmentScope:(n,e)=>{e.addVariableArray("fields",os(n)),e.addVariable({name:"errors",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:n}),e.addVariable({name:"old",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:n}),e.addVariable({name:"error",dataType:"array",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:n}),e.addVariable({name:"success",dataType:"string",sourceName:"*internal.user.register_form",sourceField:null,introducedBy:n});let t=e.statamicProject.getUserFields();if(t.length>0){let r=as(n,t);e.addVariableArray("old",r),e.addVariableArray("error",r)}return e},resolveDocumentation:n=>W("user:register_form  Form Tag","The `user:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form")},Sh=et(ql,"member:register_form");Sh.resolveDocumentation=n=>W("member:register_form Tag","The `member:register_form` tag can be used to build out public registration forms for new users.","https://statamic.dev/tags/user-register_form");var CL=[_e(Na),_e(ba),_e(Ia),_e(xa),_e(da),_e(Yu),_e(Vl),_e(pa),_e(ha),_e(ql),_e(Bl),_e(zu),_e(Ku)],SL={tagName:"user",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,parameters:Hu,introducedIn:null,resovleParameterCompletionItems:(n,e)=>e.isPastTagPart==!1&&e.currentNode!=null&&e.currentNode.methodIsEmptyOrMatches("profile")&&n.name=="field"?ie(uu(e.project.getUserFields())):Ie,augmentScope:(n,e)=>(n.methodIsEmptyOrMatches("profile")&&e.injectUserFields(n),e),resolveCompletionItems:n=>(n.leftWord=="user"||n.leftWord=="/user"||n.leftWord=="member"||n.leftWord=="/member")&&n.leftChar==":"?ie(CL):Ie,resolveDocumentation:n=>W("user Tag","The `user` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter.",null)},Qu=SL;var Xu=et(Qu,"member"),Eh=et(Na,"member:is"),Rh=et(Ia,"member:isnt"),kh=et(xa,"member:profile"),wh=et(da,"member:can"),Oh=et(pa,"member:logout"),Lh=et(ha,"member:logout_url"),Dh=et(Wu,"member:in"),Fh=et(ba,"member:not_in");Xu.hideFromCompletions=!0;Xu.resolveDocumentation=n=>W("member Tag","The `member` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);Eh.resolveDocumentation=n=>W("member:is Tag","The `member:is` tag can be used to check whether the currently authenticated user has one or more roles.","https://statamic.dev/tags/user-is");Rh.resolveDocumentation=n=>W("member:isnt Tag","The `member:isnt` tag can be used to check whether the currently authenticated user does not have one or more roles.","https://statamic.dev/tags/user-is#isnt");kh.resolveDocumentation=n=>W("member:profile Tag","The `member:profile` tag provides access to the currently logged in user information, or for a specific user when using the `id`, `email`, or `field` parameter",null);wh.resolveDocumentation=n=>W("member:can Tag","The `member:can` tag is used to check if the currently authenticated user has a specific set of permissions. When used as a tag pair, the tag contents will only be rendered if the user has the specified permissions.","https://statamic.dev/tags/user-can");Oh.resolveDocumentation=n=>W("member:logout Tag","The `member:logout` tag will sign out the currently authenticated user. An optional `redirect` parameter may be used to redirect the visitor to a different page after being logged out.","https://statamic.dev/tags/user-logout");Lh.resolveDocumentation=n=>Ee("member:logout_url","The `member:logout_url` tag can be used to retrieve the URL that will sign the current user out.",'<a href="{{ member:logout_url }}">Log out</a>',"https://statamic.dev/tags/user-logout_url");Dh.resolveDocumentation=n=>W("member:in Tag","The `member:in` tag can be used to check if the currently authenticated user belongs to one or more user groups. When used as a tag pair, the tag contents will only be rendered if the user belongs to the specified groups.","https://statamic.dev/tags/user-in");Fh.resolveDocumentation=n=>W("member:not_in Tag","The `member:not_in` tag can be used to check if the currently authenticated user does not belong to one or more user groups. When used as a tag pair, the tag contents will be rendered if the user does not belong to the specified groups.","https://statamic.dev/tags/user-in#not-in");function ls(n){return[{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:n},{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.routeable",introducedBy:n}]}var pA=Me(dt(),1);var Vh=["from","taxonomy","is","use","folder"],Bh=["not_from","not_in","dont_use","not_taxonomy"];var Mh=Vh;Mh=Mh.concat(Bh);function fA(n,e){if(e.nodesInScope.length>0){let t=e.nodesInScope[e.nodesInScope.length-1];if(t!=null&&t.currentScope!=null){let r=Pa(t,e.project),i=e.project.getTaxonomyBlueprintFields(r),s=i.map(l=>l.name),a=Ri(e.leftWord);if(s.includes(a))return ie(Zi(e))}}return n.name=="collection"&&e.context?.parameterContext!=null?ie(ia(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):n.name=="filter"||n.name=="query_scope"?ie(du(e.project)):Mh.includes(n.name)&&e.context?.parameterContext!=null?ie(dA(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null}function Pa(n,e){let t=[];if(n.hasMethodPart())return t.push(n.getMethodNameValue()),t;let r=n.findAnyParameter(Vh),i=n.findAnyParameter(Bh),s=[],a=[];return typeof r<"u"&&r!==null&&(r.value.trim()==="*"?(s=e.getUniqueTaxonomyNames(),typeof i<"u"&&i!==null&&i.isVariableReference==!1&&i.hasInterpolations()==!1&&(a=i.getArrayValue())):r.isVariableReference==!1&&r.hasInterpolations()==!1&&(s=r.getArrayValue())),a.length>0?t=s.filter(function(l){return a.includes(l)==!1}):t=s,t}function dA(n,e){let t=[],r=e.getUniqueTaxonomyNames().filter(i=>!n.includes(i));for(let i=0;i<r.length;i++)t.push({label:r[i],kind:pA.CompletionItemKind.Variable});return t}function hA(n,e){let t=Pa(n,e.statamicProject),r=e.statamicProject.getTaxonomyBlueprintFields(t),i=n.findParameter("collection");if(e.addBlueprintFields(n,r),e.addVariables([{name:"first",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n},{name:"last",dataType:"boolean",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n},{name:"count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n},{name:"index",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n},{name:"total_results",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n},{name:"entries_count",dataType:"number",sourceName:"*internal.taxonomy",sourceField:null,introducedBy:n}]),e.addVariables(ls(n)),typeof i<"u"&&i!==null){let s=i.getArrayValue();if(s.length>0){let a=e.statamicProject.getBlueprintFields(s);e.introduceScopedAliasScope(n,"entries","entries",a).addVariables(es(n))}else e.addVariableArray("entries",ls(n).concat(es(n)))}else e.addVariableArray("entries",ls(n).concat(es(n)));return e}var EL=[{name:"from",description:"The taxonomy to use.",aliases:["taxonomy","is","use","folder"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"not_from",description:"Taxonomies to exclude.",aliases:["not_in","not_folder","dont_use","not_taxonomy"],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["string","array"],isRequired:!1,isDynamic:!1},{name:"min_count",description:"The minimum number of entries a taxonomy term must have to be returned.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["number"],isDynamic:!1,isRequired:!1},{name:"collection",description:"Filter the terms to those that appear in the specified collections.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["string","array"],isDynamic:!1,isRequired:!1},{name:"sort",description:"The field to sort the terms by.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{isRequired:!1,name:"filter",aliases:["query_scope"],acceptsVariableInterpolation:!1,allowsVariableReference:!1,description:"Specifies a custom query scope.",expectsTypes:["string"],isDynamic:!1}],mA=EL;var qh=Me(dt(),1);function gA(n){let e=[];if(n.currentNode!=null&&n.currentNode.currentScope!=null){let t=Pa(n.currentNode,n.project),r=n.project.getTaxonomyBlueprintFields(t),i=r.map(a=>a.name),s=Ri(n.leftWord);if(i.includes(s))return ie(Zi(n));if(n.isCaretInTag&&!n.context?.interpolatedContext&&["taxonomy","/taxonomy"].includes(n.leftWord)==!1){let a=[];for(let l=0;l<r.length;l++){let u=r[l];a.includes(u.name)==!1&&(e.push({label:u.name,detail:u.blueprintName,documentation:u.instructionText??"",kind:qh.CompletionItemKind.Field}),a.push(u.name))}if(e.length>0)return on(e)}}if((n.leftWord=="taxonomy"||n.leftWord=="/taxonomy")&&n.leftChar==":"){let t=n.project.getUniqueTaxonomyNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:qh.CompletionItemKind.Field});return on(e)}return Ie}var RL={tagName:"taxonomy",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:mA,resolveDynamicParameter:Ge,resolveCompletionItems:gA,resovleParameterCompletionItems:fA,augmentScope:hA,resolveDocumentation:n=>W("taxonomy Tag","The `taxonomy` tag may be used to retrieve taxonomy entries. The taxonomy tag can also be used to access entries associated with any given taxonomy term.","https://statamic.dev/tags/taxonomy")},TA=RL;var Uh=Me(dt(),1);function _A(n,e){e.addVariables([{name:"is_published",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"is_page",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"has_entries",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"is_parent",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"is_current",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"is_external",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"depth",dataType:"number",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"children",dataType:"array",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"count",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:n},{name:"index",dataType:"integer",sourceField:null,sourceName:"*internal.nav",introducedBy:n}]);let t=e.statamicProject.getUniqueCollectionNames(),r=[],i=!1;if(n.hasMethodPart()){let s=n.getMethodNameValue().trim().toLowerCase();if(s.startsWith("collection:")){let a=s.split(":").pop();i=!0,r.push(a)}else s=="pages"?(i=!0,r.push("pages")):(i=!1,r.push(s))}else{let s=n.findParameter("handle");s!=null&&(t.includes(s.value)?i=!0:i=!1,r.push(s.value))}if(i){let s=e.statamicProject.getBlueprintFields(r);e.addBlueprintFields(n,s),e.expandScopedAliasScope(n,"page","page",s)}else{let s=fu(ls(n));e.addBlueprintFields(n,s),e.expandScopedAliasScope(n,"page","page",s)}return e}var kL={tagName:"nav:breadcrumbs",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,introducedIn:null,injectParentScope:!1,parameters:[{name:"include_home",description:"Whether to include the home page in the first level",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"reverse",description:"Whether to reverse the order of links",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isRequired:!1,isDynamic:!1},{name:"trim",description:"Whether to trim the whitespace after each iteration of the loop",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],augmentScope:(n,e)=>(e.addVariables([{name:"is_current",dataType:"boolean",sourceName:"*internal.nav.breadcrumbs",sourceField:null,introducedBy:n}]),e.addVariables(ls(n)),e),resolveDocumentation:n=>W("nav:breadcrumbs Tag","The `nav:breadcrumbs` tag can be used to retrieve the URLs of all pages that make up the current URL back to the site's home page.","https://statamic.dev/tags/nav-breadcrumbs")},Ju=kL;function yA(n,e){if(n.name=="handle"){let t=e.project.getUniqueCollectionNames(),r=e.project.getUniqueNavigationMenuNames(),i=[];return i=t,i=i.concat(r),i=[...new Set(i)],lt(i)}return null}var wL=[{isRequired:!1,acceptsVariableInterpolation:!1,aliases:["handle"],allowsVariableReference:!1,name:"for",description:"The navigation or collection to use.",expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],name:"from",description:"The starting point for the navigation.",allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"show_unpublished",description:"Whether to include unpublished content.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"include_home",description:"Whether to include the home page in the tree.",expectsTypes:["boolean"],isDynamic:!1},{isRequired:!1,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"max_depth",description:"The maximum depth of the navigation or structure.",expectsTypes:["number"],isDynamic:!1}],bA=wL;var jh={tagName:"structure",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,introducedIn:null,injectParentScope:!1,parameters:bA,augmentScope:_A,resovleParameterCompletionItems:yA,resolveCompletionItems:n=>{let e=[];if(n.isPastTagPart==!1&&(n.leftWord=="nav"||n.leftWord=="/nav"||n.leftWord=="structure"||n.leftWord=="/structure")&&n.leftChar==":"){let t=n.project.getUniqueNavigationMenuNames();for(let r=0;r<t.length;r++)e.push(ta(t[r],"",""));return(n.leftWord=="nav"||n.leftWord=="/nav")&&e.push(_e(Ju)),e.push(ta("collection","","")),e.push({label:"collection",kind:Uh.CompletionItemKind.Text}),on(e)}if((n.leftWord=="nav:collection"||n.leftWord=="/nav:collection"||n.leftWord=="collection"||n.leftWord=="/collection"||n.leftWord=="structure:collection"||n.leftWord=="/structure:collection")&&n.leftChar==":"){let t=n.project.getUniqueCollectionNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:Uh.CompletionItemKind.Field});return on(e)}return Ie},resolveDocumentation:n=>W("nav Tag","The `nav` tag can be used to iterate structured collections or navigation menus.","https://statamic.dev/tags/nav")},NA=et(jh,"nav");var xA=Me(dt(),1);var OL={name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},ai=OL;var Gh=Me(dt(),1),LL=[{label:"GET",kind:Gh.CompletionItemKind.EnumMember},{label:"POST",kind:Gh.CompletionItemKind.EnumMember}],IA=LL;var Yr=["in","handle","is","form","formset"];function va(n,e){return Yr.includes(n.name)?lt(e.project.getUniqueFormNames()):n.name=="method"?ie(IA):n.name=="files"?ie(Ol):null}function li(n,e){let t=n.structure.findParentWithName("form:set");return t!=null?{context:t,issues:[]}:{context:null,issues:[]}}var DL=["set","create","errors","success","submissions","submission"];function Ys(n){if(n.reference!=null&&"tagPart"in n.reference){let r=n.reference;if(r.nameMatches("form:set"))return Ys(r)}let e=n.findAnyParameter(Yr),t=n.getMethodNameValue();return t!=null&&DL.includes(t)==!1?t:typeof e<"u"&&e!==null&&e.containsSimpleValue()?e.value:""}var FL={tagName:"form:create",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[ai,{name:"method",description:"The HTTP method to use",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"files",description:"Indicates if the form sends file data",aliases:[],allowsVariableReference:!1,acceptsVariableInterpolation:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1},{name:"redirect",description:"The location to redirect users after a successful form submission",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",description:"The location to redirect users to after a failed form submission",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override redirect or error_redirect",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveSpecialType:li,resovleParameterCompletionItems:va,resolveDynamicParameter:Ge,augmentScope:(n,e)=>{e.addVariables(Aa(n)),e.addVariable({dataType:"array",name:"errors",sourceField:null,sourceName:"*internal.forms",introducedBy:n}),e.addVariableArray("fields",os(n));let t=Ys(n);if(t.length>0){let r=e.statamicProject.getFormBlueprintFields(t),i=as(n,r);e.addVariableArray("old",i),e.addVariableArray("error",i)}return e},resolveDocumentation:n=>W("form:create Tag","The `form:create` tag can be used to access form data, generate field HTML markup, and handle form validation errors.","https://statamic.dev/tags/form-create")},Zu=FL;var ML={tagName:"form:errors",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[ai],resolveSpecialType:li,resovleParameterCompletionItems:(n,e)=>Yr.includes(n.name)?lt(e.project.getUniqueFormNames()):null,resolveDocumentation:n=>W("form:errors Tag","The `form:errors` tag can be used to retrieve validation errors after a user has submitted a form.","https://statamic.dev/tags/form-errors")},ef=ML;var VL={tagName:"form:set",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"in",description:"The form to use",acceptsVariableInterpolation:!0,aliases:["handle","is","form","formset"],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!0}],resovleParameterCompletionItems:va,resolveDocumentation:n=>W("form:set Tag","The `form:set` tag can be used to set the form handle on all nested form tags.","https://statamic.dev/tags/form-set")},tf=VL;var BL={tagName:"form:submission",requiresClose:!0,allowsContentClose:!1,allowsArbitraryParameters:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[ai],resolveSpecialType:li,resovleParameterCompletionItems:(n,e)=>Yr.includes(n.name)?lt(e.project.getUniqueFormNames()):null,augmentScope:(n,e)=>{let t=Ys(n);if(t.length>0){let r=e.statamicProject.getFormBlueprintFields(t);e.addBlueprintFields(n,r)}return e},resolveDocumentation:n=>W("form:submission Tag","The `form:submission` tag can be used to access the form submission submitted by the current user.","https://statamic.dev/tags/form-submission")},nf=BL;var qL={tagName:"form:submissions",allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[ai],resolveSpecialType:li,resovleParameterCompletionItems:(n,e)=>Yr.includes(n.name)?lt(e.project.getUniqueFormNames()):null,augmentScope:(n,e)=>{if(n.isClosingTag)return e;let t=Ys(n);if(t.length>0){let r=e.statamicProject.getFormBlueprintFields(t);e.addBlueprintFields(n,r)}return e.addVariable({name:"date",dataType:"date",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:n}),e.addVariable({name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:n}),e.addVariable({name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.forms.submissions",introducedBy:n}),e},resolveDocumentation:n=>W("form:submissions Tag","The `form:submissions` tag can be used to fetch previously saved submissions for a form.","https://statamic.dev/tags/form-submissions")},rf=qL;var UL={tagName:"form:success",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[ai],resolveSpecialType:li,resovleParameterCompletionItems:(n,e)=>Yr.includes(n.name)?lt(e.project.getUniqueFormNames()):null,resolveDocumentation:n=>W("form:success Tag","The `form:success` tag can be used to check if a form submission was successful or not.","https://statamic.dev/tags/form-success")},sf=UL;var jL=[_e(tf),_e(Zu),_e(ef),_e(sf),_e(rf),_e(nf)],GL={tagName:"form",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resovleParameterCompletionItems:va,resolveCompletionItems:n=>{let e=[];if(n.isPastTagPart==!1&&(n.leftWord=="form"||n.leftWord=="/form")&&n.leftChar==":"){let t=n.project.getUniqueFormNames();e=e.concat(jL);for(let r=0;r<t.length;r++)e.push({label:t[r],kind:xA.CompletionItemKind.Field});return on(e)}return Ie}},AA=GL;var Wh={tagName:"search:results",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"index",description:"The index to search in.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"query",description:"The query string parameter to use.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"limit",description:"The maximum number of search results to return.",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{name:"offset",description:"The number of results to skip.",allowsVariableReference:!1,acceptsVariableInterpolation:!1,aliases:[],isRequired:!1,isDynamic:!1,expectsTypes:["number"]},{acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:null,description:"Sets whether or not to paginate entry results.",expectsTypes:["boolean"],isRequired:!1,name:"paginate",isDynamic:!1},{name:"as",description:"Specifies an alias for search results.",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"supplement_data",description:"Controls whether non-indexed fields are returned.",acceptsVariableInterpolation:!1,allowsVariableReference:!1,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resovleParameterCompletionItems:(n,e)=>n.name=="index"?lt(e.project.getSearchIndexes()):null,augmentScope:(n,e)=>{e.addVariables([{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"total_results",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:n}]);let t=n.findParameter("as");return t!=null&&t.value.trim().length>0?e.addVariableArray(t.value,PA(n)):e.addVariables(PA(n)),e},resolveDocumentation:n=>W("search:results Tag","The `search:results` tag provides access to all data that was returned as a result of a user's search.","https://statamic.dev/tags/search")},WL=[_e(Wh)];function PA(n){return[{name:"url",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"title",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"content",dataType:"string",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"first",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"last",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"is_entry",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"is_term",dataType:"boolean",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"count",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"index",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"search_score",dataType:"number",sourceField:null,sourceName:"*internal.search.results",introducedBy:n},{name:"_highlightResult",dataType:"array",sourceField:null,sourceName:"*internal.search.results",introducedBy:n}]}var vA={tagName:"search",allowsArbitraryParameters:!1,requiresClose:!0,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[],resolveCompletionItems:n=>n.isPastTagPart==!1&&(n.leftWord=="search"||n.leftWord=="/search")&&n.leftChar==":"?on(WL):Ie};function Hh(n){return[{name:"email",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:n},{name:"password",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:n}]}var Yh={tagName:"user:login_form",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,hideFromCompletions:!1,injectParentScope:!1,introducedIn:null,parameters:[{name:"redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after logging in",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"error_redirect",acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!0,description:"Where the user should be redirected after failed login attempts",expectsTypes:["string"],isDynamic:!1,isRequired:!1},{name:"allow_request_redirect",description:"Indicates if query parameters can override the redirect and error_redirect parameters",acceptsVariableInterpolation:!1,allowsVariableReference:!0,aliases:[],expectsTypes:["boolean"],isDynamic:!1,isRequired:!1}],resolveDynamicParameter:Ge,augmentScope:(n,e)=>(e.addVariables([{name:"errors",dataType:"array",sourceName:"*internal.user.login",sourceField:null,introducedBy:n},{name:"success",dataType:"string",sourceName:"*internal.user.login",sourceField:null,introducedBy:n}]),e.addVariables(Hh(n)),e.addVariableArray("old",Hh(n)),e.addVariableArray("error",Hh(n)),e),resolveDocumentation:n=>W("user:login_form Tag","The `user:login_form` tag can be used to quickly create a form that users can use to authenticate with the site.","https://statamic.dev/tags/user-login_form")},CA=et(Yh,"member:login_form");var HL={tagName:"noparse",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:n=>W("noparse Tag","The `noparse` tag is used prevent blocks of Antlers code from being parsed, removing the need to escape individual Antlers code regions.","https://statamic.dev/antlers#the-noparse-tag")},SA=HL;var YL={tagName:"unless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ge,resolveDocumentation:n=>W("unless Conditional Control Structure","The `unless` control structure operates the same as an `if` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},EA=YL;var $L={tagName:"elseunless",hideFromCompletions:!0,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!0,injectParentScope:!0,introducedIn:null,parameters:[],resolveDynamicParameter:Ge,resolveDocumentation:n=>W("elseunless Conditional Control Structure","The `elseunless` control structure operates the same as an `elseif` statement, but has it's logic inverted.","https://statamic.dev/antlers#conditions")},RA=$L;var kA=Me(Gr(),1);var wA={tagName:"installed",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!0,introducedIn:"3.1.19",parameters:[],resolveCompletionItems:n=>{if(n.project!=null){let e=n.project.getComposerPackages(),t=[];return e.forEach((r,i)=>{t.push({label:r.name,kind:kA.CompletionItemKind.Text})}),ie(t)}return Ie},resolveDocumentation:n=>Ee("installed Tag","The `installed` tag is used to check if the site has a specific Composer package available.",`{{ if {installed:composer/package-name} }}
    {{# Package is availabl.e #}}
{{ else }}
    {{# Something else. #}}
{{ /if }}`,"https://statamic.dev/tags/installed")};var KL={tagName:"relate",hideFromCompletions:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,injectParentScope:!1,requiresClose:!0,introducedIn:null,parameters:[]},OA=KL;var Ca=[{name:"bag",description:"The error message bag to retrieve errors from.",aliases:[],acceptsVariableInterpolation:!1,allowsVariableReference:!1,expectsTypes:["string"],isDynamic:!1,isRequired:!1}];var zL={tagName:"get_errors",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Ca,introducedIn:"3.2.23",augmentScope:(n,e)=>{if(n.isClosingTag)return e;if(n.name?.methodPart==null){let t=e.copy();t.addVariable({dataType:"string",introducedBy:n,name:"field",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"field",refFieldSetField:null,sets:null,type:"string"}});let r=t.copy();r.addVariable({dataType:"string",introducedBy:n,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),t.addScopeList("messages",r),e.addScopeList("fields",t)}else{let t=e.copy();t.addVariable({dataType:"string",introducedBy:n,name:"message",sourceName:"*internal.tag.get_errors",sourceField:{blueprintName:"*internal.tag.get_errors",displayName:"get_errors",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",t)}return e},resolveDocumentation:n=>W("get_errors Tag","The `get_errors` tag can be used to retrieve form validation errors.","https://statamic.dev/tags/get_errors")},LA=zL;var QL={tagName:"get_errors:all",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Ca,introducedIn:null,augmentScope:(n,e)=>{if(n.isClosingTag)return e;let t=e.copy();return t.addVariable({dataType:"string",introducedBy:n,name:"message",sourceName:"*internal.tag.get_errors.all",sourceField:{blueprintName:"*internal.tag.get_errors.all",displayName:"get_errors:all",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e.addScopeList("messages",t),e},resolveDocumentation:n=>W("get_errors:all Tag","The `get_errors:all` tag can be used to retrieve all form validation errors.","https://statamic.dev/tags/get_errors#list-all-validation-errors")},DA=QL;var XL={tagName:"get_error",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsArbitraryParameters:!1,allowsContentClose:!1,parameters:Ca,introducedIn:null,augmentScope:(n,e)=>(n.isClosingTag||e.addVariable({dataType:"string",introducedBy:n,name:"message",sourceName:"*internal.tag.get_error",sourceField:{blueprintName:"*internal.tag.get_error",displayName:"get_error",import:null,instructionText:null,maxItems:null,name:"message",refFieldSetField:null,sets:null,type:"string"}}),e),resolveDocumentation:n=>W("get_error Tag","The `get_error` tag can be used to retrieve the first error message for a specific field.","https://statamic.dev/tags/get_errors#get-the-first-error-for-a-specific-field")},FA=XL;var JL={tagName:"set",hideFromCompletions:!0,allowsArbitraryParameters:!0,requiresClose:!1,allowsContentClose:!1,injectParentScope:!1,introducedIn:null,parameters:[]},MA=JL;var VA=Me(Gr(),1);var ZL={tagName:"mount_url",hideFromCompletions:!1,allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,injectParentScope:!1,introducedIn:"3.3.15",parameters:[{isRequired:!1,acceptsVariableInterpolation:!0,aliases:[],allowsVariableReference:!0,description:"The collection handle.",name:"handle",isDynamic:!1,expectsTypes:["string"]}],resolveDocumentation:n=>W("mount Tag","The `mount` tag can be used to retrieve the mount URL for a given collection.",null),resovleParameterCompletionItems:(n,e)=>n.name=="handle"&&e.context?.parameterContext!=null?ie(ia(e.context?.parameterContext.parameter?.getArrayValue()??[],e.project)):null,resolveCompletionItems:n=>{let e=[];if(n.isPastTagPart==!1&&(n.leftWord=="mount_url"||n.leftWord=="/mount_url")&&n.leftChar==":"){let t=n.project.getCollectionNames();for(let r=0;r<t.length;r++)e.push({label:t[r],kind:VA.CompletionItemKind.Field,sortText:"0"})}return{items:e,analyzeDefaults:!1,isExclusiveResult:!1}}},BA=ZL;var eD={tagName:"vite:asset",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:"3.4.4",parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"src",description:"The asset's path",expectsTypes:["string"],isDynamic:!1}],resolveDocumentation:n=>Ee("vite Tag","Generates Vite asset URL for the provided resource.",'<img src="{{ vite:asset src="resources/images/logo.svg" /}}" />',null)},of=eD;var tD=[_e(of)],nD={tagName:"vite",hideFromCompletions:!1,requiresClose:!0,injectParentScope:!1,allowsContentClose:!1,allowsArbitraryParameters:!1,introducedIn:null,parameters:[{isRequired:!0,acceptsVariableInterpolation:!1,aliases:[],allowsVariableReference:!1,name:"src",description:"The entry point",expectsTypes:["string"],isDynamic:!1}],resolveCompletionItems:n=>(n.leftWord=="vite"||n.leftWord=="/vite")&&n.leftChar==":"?ie(tD):Ie,resolveDocumentation:n=>Ee("vite Tag","Generates Vite tags for an entrypoint.",'{{ vite src="entry/point" }}',null)},qA=nD;var rD={tagName:"nocache",requiresClose:!0,allowsArbitraryParameters:!1,allowsContentClose:!1,hideFromCompletions:!1,injectParentScope:!1,parameters:[],introducedIn:null,resolveDocumentation:n=>Ee("nocache Tag","The `nocache` tag is used to mark regions of a template. These regions will continue to update even when using caching strategies such as the full or half-measure cache.",`{{ nocache }} 
    <!-- This content will remain dynamic. -->
{{ /nocache }}`,"https://statamic.dev/tags/nocache")},UA=rD;function af(n){return[{name:"no_results",dataType:"boolean",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:n},{name:"total_results",dataType:"integer",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:n},{name:"handle",dataType:"string",sourceField:null,sourceName:"*internal.user.permissions",introducedBy:n}]}var iD={tagName:"user_roles",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of role handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(n,e)=>(n.isClosingTag||e.addVariables(af(n)),e),resolveDocumentation:n=>W("user_roles Tag","The `user_roles` tag can be used to return information about a site's user roles.",null)},jA=iD;var sD={tagName:"user_groups",hideFromCompletions:!1,allowsArbitraryParameters:!1,allowsContentClose:!0,injectParentScope:!1,introducedIn:"3.3.31",requiresClose:!1,parameters:[{name:"handle",description:"A list of group handles to include",aliases:[],allowsVariableReference:!0,expectsTypes:["string"],isDynamic:!1,isRequired:!1,acceptsVariableInterpolation:!0}],augmentScope:(n,e)=>(n.isClosingTag||e.addVariables(af(n)),e),resolveDocumentation:n=>W("user_groups Tag","The `user_groups` tag can be used to return information about a site's user groups.",null)},GA=sD;var oD={tagName:"cookie:forget",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"keys",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The keys to forget",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},lf=oD;var aD={tagName:"cookie:has",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to check for existence",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},cf=aD;var lD={tagName:"cookie:set",allowsArbitraryParameters:!0,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"minutes",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The lifetime of the cookie, in minutes",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},uf=lD;var cD={tagName:"cookie:value",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[{name:"key",aliases:[],acceptsVariableInterpolation:!0,allowsVariableReference:!0,description:"The cookie name to retrieve the value for",expectsTypes:["string"],isDynamic:!1,isRequired:!0}]},ff=cD;var uD=[_e(lf),_e(ff),_e(uf),_e(cf)],fD={tagName:"cookie",allowsArbitraryParameters:!1,allowsContentClose:!1,requiresClose:!1,hideFromCompletions:!1,injectParentScope:!1,introducedIn:"3.3.38",parameters:[],resolveCompletionItems:n=>(n.leftWord=="cookie"||n.leftWord=="/cookie")&&n.leftChar==":"?ie(uD):Ie},WA=fD;var HA=[sA,oA,aA,EA,RA,Cx,Rx,KI,Iu,Ws,xu,Nu,bu,WA,lf,cf,uf,ff,OA,AA,Zu,nf,rf,tf,sf,ef,MA,LA,FA,DA,vA,Wh,rx,Au,Pu,XI,Hx,QI,zx,Kx,zI,kx,Ox,Fx,qu,Uu,JI,ZI,ex,Mx,Vx,ix,vu,qx,Gu,Ux,BA,NA,jh,Ju,ox,sx,Wu,Wx,ba,Na,Yx,wA,jA,GA,Qu,Ia,da,Yu,pa,ha,xa,Yh,Bl,Vl,zu,Ku,ql,Xu,Eh,Rh,kh,wh,Oh,Lh,Dh,Fh,CA,vh,Ph,Sh,SA,UA,cx,ux,fx,xx,Ax,Qx,yx,Tx,iA,Ix,cA,Lu,Ou,wu,ku,$u,Ru,vx,TA,Jx,Ah,Zx,eA,tA,nA,rA,Vu,Px,bh,Xx,hx,Du,$x,qA,of];var wi=class{constructor(){this.tags=new Map;this.parameters=new Map}reset(){this.tags.clear(),this.parameters.clear(),this.loadCoreTags()}getVisibleTagsWithDocumentation(){let e=[];return this.tags.forEach((t,r)=>{if(t.hideFromCompletions==!1){let i="";t.resolveDocumentation!=null&&(i=t.resolveDocumentation()),e.push({label:r,documentation:i})}}),St.instance?.getStructure()?.getCustomAntlersTags().forEach(t=>{e.push({label:t.tagName,documentation:""})}),e}getCustomTagMethodsForTag(e){let t=[],r=e.length+1;return St.instance?.getStructure()?.getCustomAntlersTags().forEach(i=>{if(i.tagName.startsWith(`${e}:`)){let s=i.tagName.substr(r).trim();s.length>0&&t.push(s)}}),t}getVisibleTagNames(){let e=[];return this.tags.forEach((t,r)=>{t.hideFromCompletions==!1&&e.push(r)}),St.instance?.getStructure()?.getCustomAntlersTags().forEach(t=>{e.push(t.tagName)}),[...new Set(e)]}getPossibleTagMethods(e){let t=[],r=e.length+1;return this.tags.forEach((i,s)=>{if(s.startsWith(e)){let a=s.substr(r).trim();a.length>0&&t.push(a)}}),St.instance?.getStructure()?.getCustomAntlersTags().forEach(i=>{if(i.tagName.startsWith(`${e}:`)){let s=e.substr(r).trim();s.length>0&&t.push(s)}}),[...new Set(t)]}getTagNames(){let e=[];return this.tags.forEach((t,r)=>{e.push(r)}),St.instance?.getStructure()?.getCustomAntlersTags().forEach(t=>{e.push(t.tagName)}),[...new Set(e)]}loadCoreTags(){this.registerTags(HA)}cleanTagName(e){return Es(e,"/")}findTag(e){return this.tags.get(this.resolveTagName(e))}findCustomTag(e){let t=St.instance?.getStructure()?.getCustomAntlersTags()??[];for(let r=0;r<t.length;r++)if(t[r].tagName==e)return t[r]}isKnownTag(e){return this.tags.has(this.resolveTagName(e))||this.isCustomTag(e)}isSymbolKnownTag(e){return this.isKnownTag(e.runtimeName())}resolveTagName(e){return e=this.cleanTagName(e.trim()),this.tags.has(e)||e.includes(":")&&(e=e.split(":")[0]),e}canResolveSpecialTypes(e){e=this.resolveTagName(e);let t=this.tags.get(e);return!(typeof t>"u"||t==null||t.resolveSpecialType==null)}resolveSpecialType(e,t,r){e=this.resolveTagName(e);let i=this.findTag(e);if(i.resolveSpecialType==null)throw new Error(e+" does not support special types.");return i.resolveSpecialType(t,r)}isCustomTag(e){let t=St.instance?.getStructure()?.getCustomAntlersTags()??[];for(var r=0;r<t.length;r++)if(t[r].tagName==e)return!0;return!1}getCompletionItems(e){let t=null,r=[],i=!0;if(e.context!=null&&e.context.node!=null&&(e.currentNode=e.context.node),e.nodesInScope.length>0&&(t=e.nodesInScope[e.nodesInScope.length-1]),e.currentNode!=null&&(this.isKnownTag(e.currentNode.runtimeName())||this.isCustomTag(e.currentNode.getTagName()))){let s=this.findTag(e.currentNode.runtimeName());if(typeof s>"u"&&(s=this.findCustomTag(e.currentNode.getTagName()),typeof s>"u"))return{isExclusive:!1,items:[]};let a=[];if(s.resolveCompletionItems!=null){let l=s.resolveCompletionItems(e),u=this.getCustomTagMethodsForTag(s.tagName);if(u.length>0&&u.forEach(f=>{l.items.push({label:f,kind:$h.CompletionItemKind.Text,insertText:f})}),l.isExclusiveResult)return{isExclusive:!0,items:l.items};i=l.analyzeDefaults,r=r.concat(l.items)}if(e.isPastTagPart==!1){let l=this.getPossibleTagMethods(s.tagName);for(let u=0;u<l.length;u++)r.push({label:l[u],kind:$h.CompletionItemKind.Text})}if(i){if(e.isCaretInTag==!0&&s.parameters.length>0&&(r=r.concat(dh(e,s.parameters)),s.tagName=="partial"&&t?.hasMethodPart())){let l=t.getMethodNameValue();if(l.trim().length>0&&St.instance?.hasStructure()){let u=St.instance.getStructure().findPartial(l);u!=null&&u.injectsParameters.length>0&&(r=r.concat(dh(e,u.injectsParameters)))}}for(let l=0;l<e.nodesInScope.length;l++)if(e.nodesInScope[l].runtimeType!==null){let u=e.nodesInScope[l].runtimeType;if(u!=null&&u.assumedType=="structure_ref"&&u.supplementedFields!=null)for(let f=0;f<u.supplementedFields.length;f++)r.push(ph(u.supplementedFields[f]))}}return{items:r,isExclusive:!1}}return{items:r,isExclusive:!1}}injectParentScope(e){let t=this.findTag(e);return typeof t>"u"||t==null?!0:t.injectParentScope}resolveParameterCompletions(e,t,r){let i=this.findTag(e);return typeof i<"u"&&i!==null&&typeof i.resovleParameterCompletionItems<"u"&&i.resovleParameterCompletionItems!==null?i.resovleParameterCompletionItems(t,r):null}canResolveDynamicParameter(e){let t=this.resolveTagName(e);if(this.isKnownTag(t)){let r=this.tags.get(t);if(typeof r>"u")return!1;if(typeof r.resolveDynamicParameter<"u"&&r.resolveDynamicParameter!=null)return!0}return!1}getParameter(e,t){let r=this.resolveTagName(e);if(this.parameters.has(r)==!1)return null;let i=this.parameters.get(r);if(i==null)return null;if(i.has(t)==!1){let a=this.findTag(e);if(a!=null&&typeof a.resolveDynamicParameter<"u"&&a.resolveDynamicParameter!=null){let l=a.resolveDynamicParameter(null,t);if(l!==null)return l}return null}let s=i.get(t);return typeof s>"u"||i==null?null:s}registerTags(e){for(let t=0;t<e.length;t++)this.registerTag(e[t])}registerTag(e){if(this.tags.set(e.tagName,e),this.parameters.has(e.tagName)==!1&&this.parameters.set(e.tagName,new Map),e.parameters.length>0){let t=this.parameters.get(e.tagName);for(let r=0;r<e.parameters.length;r++){let i=e.parameters[r];t?.set(i.name,i)}}}requiresClose(e){let t=e.getTagName();if(this.tags.has(t)){let r=this.findTag(t);if(r!=null)return r.requiresCloseResolver!=null?r.requiresCloseResolver(e):r.requiresClose}return!1}};wi.instance=null;(typeof wi.instance>"u"||wi.instance==null)&&(wi.instance=new wi,wi.instance.loadCoreTags());var _n=wi;var Pr=class{constructor(e){this.generation=0;this.id="";this.name="";this.values=new Map;this.lists=new Map;this.pristine=new Map;this.parentScope=null;this.statamicProject=e,Pr.generationCounter+=1,this.generation=Pr.generationCounter,this.id=Lo()}makeNew(){return new Pr(this.statamicProject)}ancestor(){return this.parentScope!=null?this.parentScope:this}canShiftScope(e){return!!this.pristine.has(e)}shiftScope(e,t,r){if(this.pristine.has(t)){let i=this.pristine.get(t),s=i.parentCopy.copy();return s.introduceAliasScope(e,r,i.introducedFields),s}return this}containsPath(e){if(e.includes(":")){let t=e.split(":"),r=t.shift(),i=t.join(":");if(typeof r>"u")return!1;let s=this.lists.get(r);return typeof s>"u"?!1:s.containsPath(i)}return!!this.lists.has(e)}findReference(e){if(e.includes(":")){let t=e.split(":"),r=t.pop(),i=t.join(":"),s=this.findNestedScope(i);if(s!=null)return s.findReference(r)}return this.values.has(e)?this.values.get(e):null}findReferenceWithField(e){if(e.includes(":")){let t=e.split(":"),r=t.pop(),i=t.join(":"),s=this.findNestedScope(i);if(s!=null)return s.findReference(r)}if(this.values.has(e)){let t=this.values.get(e);if(t.sourceField==null){if(t.introducedBy!=null&&t.introducedBy.currentScope!=null&&t.introducedBy.currentScope!=this)return t.introducedBy.currentScope.findReferenceWithField(t.introducedBy.getTagName());if(this.parentScope!=null&&this.parentScope!=this)return this.parentScope.findReferenceWithField(e)}return t}return null}containsReference(e){return this.findReference(e)!=null}findNestedScope(e){if(e.includes(":")){let t=e.split(":"),r=t.shift(),i=t.join(":");if(typeof r>"u")return null;let s=this.lists.get(r);return typeof s>"u"?null:s.findNestedScope(i)}return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this&&this.parentScope.hasList(e)?this.parentScope.lists.get(e):null}liftList(e){if(this.lists.has(e)){let t=this.lists.get(e);return typeof t>"u"||t===null?null:(this.lists.delete(e),t)}return null}hasPristineReference(e){return!!this.pristine.has(e)}hasListInHistory(e){return this.hasList(e)?!0:this.parentScope!=null?this.name=="*root*"?!1:this.parentScope.hasList(e):!1}hasList(e){if(this.lists.has(e)){let t=this.lists.get(e);return!(typeof t>"u"||t===null)}return!1}bringListIntoMainScope(e){if(e.includes(":")){let r=e.split(":"),i=r.shift(),s=r.join(":");if(typeof i>"u")return this;let a=this.lists.get(i);return typeof a>"u"?this:a.bringListIntoMainScope(s)}let t=this.lists.get(e);return this.lists.delete(e),this.mergeScope(t)}getListNames(){let e=[];return this.lists.forEach((t,r)=>{e.push(r)}),e}getVariableNames(){let e=[];return this.values.forEach(t=>{e.push(t.name)}),e}getList(e){return this.lists.has(e)?this.lists.get(e):this.parentScope!=null&&this.parentScope!=this?this.parentScope.getList(e):null}hasValue(e){return this.values.has(e)}findAncestorWithList(e){return this.hasList(e)?this:this.parentScope!=null&&this.parentScope!=this?this.parentScope.findAncestorWithList(e):null}findReferenceNotIntroducedBy(e,t){if(this.hasValue(e)){let r=this.values.get(e);if(r.introducedBy!=null&&r.introducedBy!=t)return r}return this.parentScope!=null&&this.parentScope!=this?this.parentScope.findReferenceNotIntroducedBy(e,t):null}removeThroughIntroduction(e,t){if(this.values.delete(e),this.parentScope!=null){let r=this.findReferenceNotIntroducedBy(e,t);r!=null&&this.addVariable(r)}}wasIntroducedBySymbol(e,t){if(this.values.has(e)==!1)return!1;let r=this.values.get(e);return r.introducedBy!=null?r.introducedBy==t:!1}referencesArray(e){return this.values.has(e)==!1?!1:this.values.get(e).dataType=="array"}addScopeList(e,t){return this.lists.set(e,t),this}mergeAndList(e,t){let r=new Pr(this.statamicProject);return r.values=uA(t),this.lists.set(e,r),this.mergeVariableScope(t),this}mergeScope(e){return e==this||e==null?this:(typeof e.values<"u"&&e.values!==null&&e.values.forEach((t,r)=>{this.values.set(r,t)}),typeof e.lists<"u"&&e.lists!==null&&e.lists.forEach((t,r)=>{this.lists.set(r,t)}),this)}mergeVariableScope(e){for(let t=0;t<e.length;t++)this.values.set(e[t].name,e[t]);return this}addVariable(e){this.values.set(e.name,e)}addVariables(e){for(let t=0;t<e.length;t++)this.addVariable(e[t])}addVariableArray(e,t){this.values.has(e)&&this.values.delete(e);let r=new Pr(this.statamicProject);r.addVariables(t),this.addScopeList(e,r)}injectAssetContainer(e,t){this.addBlueprintFields(e,this.statamicProject.getAssetBlueprintFields(t))}injectUserFields(e){this.addBlueprintFields(e,this.statamicProject.getUserFields())}addBlueprintField(e,t){this.addVariable({dataType:t.type,name:t.name,sourceField:t,sourceName:t.blueprintName,introducedBy:e})}introduceScopedAliasScope(e,t,r,i){this.pristine.set(r,{introducedFields:i,introducedScope:r,parentCopy:this.copy()});let s=new Pr(this.statamicProject),a=new Pr(this.statamicProject);return a.addBlueprintFields(e,i),s.name=r,s.addScopeList(t,a),this.addScopeList(r,s),s}expandScopedAliasScope(e,t,r,i){this.lists.has(r)==!1?this.introduceScopedAliasScope(e,t,r,i):this.lists.get(r).addBlueprintFields(e,i)}introduceAliasScope(e,t,r){this.pristine.set(t,{introducedFields:r,introducedScope:t,parentCopy:this.copy()});let i=new Pr(this.statamicProject);i.addBlueprintFields(e,r),i.name=t,this.addScopeList(t,i)}introduceDynamicScopeList(e,t,r){this.pristine.set(t,{introducedFields:r,introducedScope:t,parentCopy:this.copy()});let i=new Pr(this.statamicProject);i.name=t,i.addBlueprintFields(e,r),this.addScopeList(t,i)}addBlueprintFields(e,t){for(let r=0;r<t.length;r++)this.addBlueprintField(e,t[r])}injectBlueprint(e,t){let r=this.statamicProject.getBlueprintDetails(t);r.length>0&&this.addBlueprintFields(e,r)}copy(){let e=new Pr(this.statamicProject);return e.pristine=new Map(this.pristine),e.values=new Map(this.values),e.lists=new Map(this.lists),e.parentScope=this,e}},Mn=Pr;Mn.generationCounter=0;function Kh(n){let e=new Mn(n);return e.addVariable({dataType:"string",name:"handle",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"name",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"short_locale",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e.addVariable({dataType:"string",name:"url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),e}function YA(){let n=[];return n.push({dataType:"number",name:"response_code",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"csrf_field",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"csrf_token",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"environment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"xml_header",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"last_segment",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"current_uri",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"current_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"amp_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"api_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"current_full_url",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"template_content",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"current_template",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"string",name:"current_layout",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"boolean",name:"logged_in",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"boolean",name:"logged_out",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"boolean",name:"is_homepage",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"date",name:"now",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"date",name:"today",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"date",name:"current_date",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"array",name:"get",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"array",name:"get_post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"array",name:"post",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n.push({dataType:"array",name:"old",sourceField:null,sourceName:"*internal.system",introducedBy:null}),n}function $A(n,e){let t=n.findParameter("paginate");if(t!=null&&(t.value.toLowerCase()=="true"||parseInt(t.value).toString()==t.value)){let r=e.makeNew(),i=e.makeNew(),s=e.makeNew(),a=e.makeNew();r.addVariable({name:"next_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),r.addVariable({name:"prev_page",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),r.addVariable({name:"total_items",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),r.addVariable({name:"total_pages",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),r.addVariable({name:"current_page",dataType:"integer",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),r.addVariable({name:"auto_links",dataType:"string",sourceName:"*internal.pagination",sourceField:null,introducedBy:n}),s.addVariable({name:"url",dataType:"string",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:n}),s.addVariable({name:"page",dataType:"integer",sourceField:null,sourceName:"*internal.pagination.all",introducedBy:n}),a.addVariable({name:"first",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:n}),a.addVariable({name:"last",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:n}),a.addVariable({name:"slider",dataType:"boolean",sourceName:"*internal.pagination.segments",sourceField:null,introducedBy:n}),i.addScopeList("all",s),i.addScopeList("segments",a),r.addScopeList("links",i),e.addScopeList("paginate",r)}}var cs=class{constructor(){this.fileInjections=new Map;this.project=null}updateProject(e){this.project=e}registerInjections(e,t){if(t.length==0)return;let r=[];for(let i=0;i<t.length;i++){let s=t[i];s.hasParameters&&r.push(s)}if(r.length>0){let i=r[0].getMethodNameValue();if(i!=null&&this.project!=null){let s=this.project.findPartial(i);s!=null&&(this.fileInjections.has(s.documentUri)||this.fileInjections.set(s.documentUri,new Map),this.fileInjections.get(s.documentUri).set(e,r))}}}hasAvailableInjections(e){return this.fileInjections.has(e)}getScopeInjection(e,t){let r=new Mn(t);return r.name="*injection*",this.fileInjections.get(e).forEach((s,a)=>{for(let l=0;l<s.length;l++){let u=s[l];if(u.hasParameters)for(let f=0;f<u.parameters.length;f++){let d=u.parameters[f];if(d.containsSimpleValue())r.addVariable({dataType:"string",name:d.name,sourceField:null,sourceName:"scope.injection",introducedBy:u});else if(d.isVariableReference&&u.currentScope!=null&&u.currentScope.hasListInHistory(d.value)){let h=u.currentScope.findNestedScope(d.value);if(h!=null){let _=Es(d.name,":"),b=h.copy();b.name=_,r.addScopeList(_,h)}}}}}),r}};cs.instance=null;(typeof cs.instance>"u"||cs.instance==null)&&(cs.instance=new cs);var zh=cs;var dD=["collection"],pD=["if","elseif","unless","elseunless"],df=class{constructor(e,t,r){this.pageVars=[];this.viewDataVars=null;this.documentUri="";this.lastSymbolId="";this.ideHelperMap=new Map;this.statamicProject=e,this.documentUri=t,this.document=r,this.makePageScope(),this.makeViewDataScope()}makeViewDataScope(){this.document.hasFrontMatter()&&(this.viewDataVars=this.document.getFrontMatterScope())}makePageScope(){let e=[],t=this.statamicProject.getFields();if(t.has("pages")){let r=t.get("pages");for(let i=0;i<r.length;i++){let s=r[i];e.push({name:s.name,dataType:s.type,sourceField:s,sourceName:s.blueprintName,introducedBy:null})}}this.pageVars=e}analyzeScope(e){let t=new Mn(this.statamicProject);t.name="*root*",t.parentScope=t,t.addScopeList("site",Kh(this.statamicProject)),t.addScopeList("sites",Kh(this.statamicProject)),t.addVariables(YA());let r=new Mn(this.statamicProject);r.name="*root_user*",r.parentScope=t,this.statamicProject.getUserFields().forEach(d=>{r.addBlueprintField(null,d)}),t.addScopeList("current_user",r),_b.instance?.pageScopeDisabled(this.documentUri)?this.viewDataVars!=null&&t.addScopeList("view",this.viewDataVars):this.viewDataVars!=null?t.mergeAndList("page",this.pageVars).addScopeList("view",this.viewDataVars):t.mergeAndList("page",this.pageVars);let i=null;e.length>0&&e[0].isComment&&(i=pl(this.documentUri,e[0]));for(let d=0;d<e.length;d++)if(e[d].isComment){let h=pl(this.documentUri,e[d]);h.variableHelper!=null&&this.ideHelperMap.set(e[d].id(),h.variableHelper)}let s=this.statamicProject.getCollectionNamesForView(this.documentUri);if(i!=null&&(i.collectionInjections.length>0&&(s=s.concat(i.collectionInjections)),i.blueprints.length>0&&(s=s.concat(i.blueprints)),i.variableHelper!=null&&i.variableHelper.variableName=="@page")){let d=this.statamicProject.getBlueprintField(i.variableHelper.collectionName,i.variableHelper.fieldHandle);if(d!=null)if(i.variableHelper.setHandle.length>0){if(d.sets!=null){for(let h=0;h<d.sets.length;h++)if(d.sets[h].handle==i.variableHelper.setHandle){t.addVariables(as(e[0],d.sets[h].fields));break}}}else t.addBlueprintField(e[0],d)}if(s.length>0){for(let d=0;d<s.length;d++)t.injectBlueprint(e[0],s[d]);t.addVariables(es(e[0]))}zh.instance?.hasAvailableInjections(this.documentUri)&&t.mergeScope(zh.instance?.getScopeInjection(this.documentUri,this.statamicProject));let a=[],l=[],u=[],f=[];f.push(t);for(let d=0;d<e.length;d++){let h=e[d];this.lastSymbolId.length>0&&l.includes(h.id())&&(a.pop(),f.pop(),f.length==0&&f.push(t));let _=f[f.length-1];if(h.hasParameters){for(let g=0;g<h.parameters.length;g++)if(h.parameters[g].interpolations.length>0)for(let v=0;v<h.parameters[g].interpolations.length;v++){let O=h.parameters[g].interpolations[v];h.processedInterpolationRegions.has(O)&&h.processedInterpolationRegions.get(O).forEach(C=>{C instanceof X&&(C.currentScope=_)})}}if(_n.instance?.isKnownTag(h.getTagName())==!1){if(h.scopeVariable=_.findReference(h.runtimeName()),d>0){let g=e[d-1];if(g.isComment&&this.ideHelperMap.has(g.id())&&!g.isClosingTag&&!h.isClosingTag){let v=this.ideHelperMap.get(g.id());if(v.variableName==h.getTagName()){let O=this.statamicProject.getBlueprintField(v.collectionName,v.fieldHandle);O!=null&&(h.scopeVariable=Ch(h,O))}}}if(h.scopeVariable==null){let g=h.runtimeName().trim();if(_.hasList(g)||h.currentScope?.hasListInHistory(g)){h.sourceType="array";let E=_.getList(g);if(E!=null&&E.values.size>0){let C=E.values.entries().next().value[1];h.scopeVariable={dataType:"array",introducedBy:C.introducedBy,name:g,sourceField:null,sourceName:C.sourceName}}}let v=h.name?.name??"";v.includes(".")?v=v.split(".")[0]:v.includes(":")&&(v=v.split(":")[0]);let O=this.statamicProject.findAnyBlueprintField(v);if(O!=null){let E=Ch(h,O);h.scopeVariable=E,h.scopeVariable.sourceField!=null&&aa.instance?.hasFieldtype(h.scopeVariable.sourceField.type)&&(aa.instance?.getFieldType(h.scopeVariable.sourceField.type)).augmentScope(h,_)}}else h.sourceType=Tc(h.scopeVariable.dataType),h.scopeVariable.sourceField!=null&&aa.instance?.hasFieldtype(h.scopeVariable.sourceField.type)&&(aa.instance?.getFieldType(h.scopeVariable.sourceField.type)).augmentScope(h,_)}if(h.hasParameters&&$A(h,_),h.modifiers!=null&&h.modifiers.hasModifiers()?h.manifestType=h.modifiers.getLastManifestedModifierRuntimeType():h.manifestType=h.sourceType,h.isClosedBy!=null&&(a.push(h.id()),l.push(h.isClosedBy.id()),_=_.copy(),f.push(_)),h.getTagName()=="scope"&&h.hasMethodPart()&&f.length>2){let g=f[f.length-2].copy();_.addScopeList(h.getMethodNameValue(),g)}if(_.containsPath(h.runtimeName())&&(a.push(h.id()),h.isClosedBy!=null&&l.push(h.isClosedBy.id()),_=_.copy().bringListIntoMainScope(h.runtimeName()),f.push(_)),h.currentScope=_,h.getTagName()!="cache"){let g=h.findParameter("scope");g!=null&&_.canShiftScope(h.runtimeName())&&(_=_.shiftScope(h,h.runtimeName(),g.value),h.currentScope=_,f.pop(),f.push(_))}if(_n.instance?.isKnownTag(h.runtimeName())){let g=_n.instance?.findTag(h.runtimeName());typeof g<"u"&&g.augmentScope!=null&&g.augmentScope(h,_)}if(h.modifierChain!=null&&h.modifierChain.modifierChain.length>0&&h.modifierChain.modifierChain.forEach(g=>{g.modifier!=null&&typeof g.modifier.augmentScope<"u"&&g.modifier.augmentScope!=null&&g.modifier.augmentScope(h,_)}),h.modifiers.hasParameterModifiers()&&h.modifiers.parameterModifiers.forEach(g=>{g.modifier!=null&&typeof g.modifier.augmentScope<"u"&&g.modifier.augmentScope!=null&&g.modifier.augmentScope(h,_)}),h.sourceType=="array"){let g=h.findParameter("chunk"),v=!0;if(h.parent!=null&&h.parent instanceof X&&dD.includes(h.parent.runtimeName())&&(v=!1),typeof g<"u"&&g!==null)if(h.currentScope.parentScope!=null&&(h.currentScope.parentScope.hasList(h.runtimeName())||_.referencesArray(h.runtimeName()))){let O=h.currentScope.parentScope.copy(),E=O.liftList(h.runtimeName());if(E==null&&_.referencesArray(h.runtimeName())){if(E=new Mn(_.statamicProject),v){let C=He(h);for(let q=0;q<C.length;q++){let Z=C[q];O.wasIntroducedBySymbol(Z.name,h)&&O.removeThroughIntroduction(Z.name,h)}E.addVariables(C)}}else v&&O.addVariables(He(h));O.addScopeList("chunk",E),_=O,f.pop(),f.push(_),h.currentScope=O}else{let O=h.findParameter("scope");if(typeof O<"u"&&O!==null&&h.currentScope!=null&&h.currentScope.hasList(O.value)&&h.scopeName!=null){let E=h.currentScope.copy(),C=E.ancestor().copy(),q=E.liftList(h.scopeName);v&&E.addVariables(He(h)),C.liftList(h.scopeName),E.addScopeList(h.scopeName,q),C.addScopeList("chunk",E),_=C,f.pop(),f.push(_),h.currentScope=C}}else h.scopeVariable!=null&&h.scopeVariable.sourceField==null&&v&&(_.addVariables(He(h)),_.addVariables($e(h)))}if(l.includes(h.id())&&h.parent!=null&&h.parent instanceof X){let g=h.currentScope.findAncestorWithList(h.getTagName());g!=null?(h.currentScope=g,_=g.copy(),f.pop(),f.length==0&&f.push(t),f.push(_)):h.parent.parent!=null?h.currentScope=h.parent.parent.currentScope:h.currentScope=h.parent.currentScope}if(h.currentScope!=null&&h.runtimeNodes.length>0&&h.runtimeNodes.forEach(g=>{if(g instanceof ye&&h.currentScope?.hasValue(g.name)){let v=h.currentScope.findReferenceWithField(g.name);g.currentScope=h.currentScope,g.scopeName=h.scopeName,g.scopeVariable=v}}),pD.includes(h.runtimeName())&&h.runtimeNodes.length==3&&h.runtimeNodes[0]instanceof ye&&h.runtimeNodes[1]instanceof hn&&h.runtimeNodes[2]instanceof gt&&h.runtimeNodes[0].scopeVariable!=null&&h.runtimeNodes[0].scopeVariable.sourceField!=null){let g=h.runtimeNodes[0].scopeVariable,v=h.runtimeNodes[2].value,O=g.sourceField;if(O.sets!=null)for(let E=0;E<O.sets.length;E++){let C=O.sets[E];if(C.handle==v&&C.fields!=null){_=_.copy(),_.addBlueprintFields(h,C.fields),h.isClosedBy!=null&&!h.isSelfClosing&&(a.push(h.id()),l.push(h.isClosedBy.id()),f.push(_));break}}}this.lastSymbolId=h.id();let b=a.join("/");u.push(b)}}};var Oi=class{};Oi.globalTagEnterStack=[],Oi.interpolatedVariables=[];var XA=Me(bc(),1);var yn=class{constructor(){this.name="";this.compound="";this.methodPart="";this.content="";this.cachedCompoundTagName=null}tagPartIs(e){return e=e.toLowerCase().trim(),this.name.toLowerCase().trim()==e}isCompound(){return this.methodPart==null?!1:this.methodPart.length>0}getMethodName(){return this.methodPart==""?"index":this.methodPart=="null"?"":this.methodPart}getRuntimeMethodName(){}getCompoundTagName(){if(this.cachedCompoundTagName==null){let e=this.getMethodName();this.cachedCompoundTagName=this.name,e!=null&&e!=""&&(this.cachedCompoundTagName=this.cachedCompoundTagName+":"+e)}return this.cachedCompoundTagName}};var Qh=class{constructor(){this.tagNames=[];this.modifierNames=[]}getModifierNames(){return this.modifierNames.concat(ht.instance?.getModifierNames()??[])}getTagNames(){return this.tagNames.concat(_n.instance?.getTagNames()??[])}setTagNames(e){this.tagNames=e}setModifierNames(e){this.modifierNames=e}isTag(e){return Qh.alwaysLikeTag.includes(e)||_n.instance?.isKnownTag(e)?!0:this.tagNames.includes(e)}isModifier(e){return ht.instance?.hasModifier(e)?!0:this.modifierNames.includes(e)}},$s=Qh;$s.alwaysLikeTag=["if","endif","elseif","else","unless","elseunless"];var Sa=class{static analyze(e,t){e.forEach(r=>{if(r instanceof X){if(r.pathReference!=null&&r.pathReference.isStrictVariableReference){r.isTagNode=!1;return}r.name!=null&&(r.isTagNode=t.isTag(r.name.name))}})}static analyzeNode(e){if(e.pathReference!=null&&e.pathReference.isStrictVariableReference){e.isTagNode=!1;return}Sa.environmentDetails!=null&&e.name!=null&&(e.isTagNode=Sa.environmentDetails.isTag(e.name.name)),e.name!=null&&(e.isConditionNode=$s.alwaysLikeTag.includes(e.name.name))}static analyzeParametersForModifiers(e){e.parameters.forEach(t=>{Sa.environmentDetails!=null&&(t.isModifierParameter=Sa.environmentDetails.isModifier(t.name))})}},Ks=Sa;Ks.environmentDetails=null;(typeof Ks.environmentDetails>"u"||Ks.environmentDetails==null)&&(Ks.environmentDetails=new $s);var Xh=Ks;var pf=class{static getIdentifier(e){let t=new yn;t.content=e.trim();let r=e.split(":");if(r.length==1)t.name=r[0].trim(),t.methodPart=null,t.compound=t.name;else if(r.length>1){let i=r.shift()??"",s=r.join(":");t.name=i.trim(),t.methodPart=s.trim(),t.compound=t.name+":"+t.methodPart}else t.name=e.trim(),t.methodPart="";return t.name.startsWith("/")&&(t.name=t.name.substr(1),t.compound=t.compound.substr(1)),t}};var le=class{static getPrettyTypeName(e){return e instanceof Nr?le.TOKEN_LANG_OPERATOR:e instanceof Rn?le.TOKEN_OP_A_ADD:e instanceof ye?le.TOKEN_VARIABLE:e instanceof gt?le.TOKEN_STRING:e instanceof Pt?le.TOKEN_NUMBER:e instanceof cr?le.TOKEN_CONSTANT_FALSE:e instanceof Gn?le.TOKEN_CONSTANT_NULL:e instanceof ur?le.TOKEN_CONSTANT_TRUE:e instanceof ks?le.TOKEN_MODIFIER_NODE:e instanceof Mo?le.TOKEN_MODIFIER_CHAIN:e instanceof Ac?le.TOKEN_MODIFIER_PARAMETER:e instanceof kn?le.TOKEN_OP_A_DIVIDE:e instanceof Or?le.TOKEN_OP_A_EXPONENTIATION:e instanceof Wn?le.TOKEN_OP_A_MODULUS:e instanceof wn?le.TOKEN_OP_A_MULTIPLY:e instanceof nn?le.TOKEN_OP_A_SUBTRACT:e instanceof fr?le.TOKEN_ASG_ADD:e instanceof dr?le.TOKEN_ASG_DIVIDE:e instanceof pr?le.TOKEN_ASG_MODULUS:e instanceof hr?le.TOKEN_ASG_MULTIPLY:e instanceof On?le.TOKEN_ASG_ASSIGN:e instanceof Lr?le.TOKEN_ASG_SUBTRACT:e instanceof hn?le.TOKEN_CMP_EQUAL:e instanceof br?le.TOKEN_CMP_SEQUAL:e instanceof Hn?le.TOKEN_CMP_GT:e instanceof Zr?le.TOKEN_CMP_GTE:e instanceof mr?le.TOKEN_CMP_LT:e instanceof gr?le.TOKEN_CMP_LTE:e instanceof Tr?le.TOKEN_CMP_NEQ:e instanceof _r?le.TOKEN_CMP_SNEQ:e instanceof yr?le.TOKEN_CMP_SPACESHIP:e instanceof ei?le.TOKEN_OP_VARIABLE_FALLBACK:e instanceof Pc?le.TOKEN_COND_FALLBACK_GROUP:e instanceof mt?le.TOKEN_BRANCH_SEPARATOR:e instanceof Ln?le.TOKEN_TERNARY_SEPARATOR:e instanceof Rt?le.TOKEN_GROUP_BEGIN:e instanceof Et?le.TOKEN_GROUP_END:e instanceof Jt?le.TOKEN_MODIFIER_SEPARATOR:e instanceof Ut?le.TOKEN_MODIFIER_NAME:e instanceof kt?le.TOKEN_MODIFIER_VALUE:e instanceof rn?le.TOKEN_MODIFIER_VALUE_SEPARATOR:e instanceof Bo?le.TOKEN_NULL_COALESCE_GROUP:e instanceof xt?le.TOKEN_SEMANTIC_GROUP:e instanceof Wt?le.TOKEN_STATEMENT_SEPARATOR:e instanceof qo?le.TOKEN_TERNARY_CONDITION:e instanceof Yn?le.TOKEN_OP_AND:e instanceof Ht?le.TOKEN_OP_LOGIC_NEGATION:e instanceof $n?le.TOKEN_OP_OR:e instanceof Dr?le.TOKEN_OP_XOR:e instanceof Kn?le.TOKEN_OP_NULL_COALESCE:e instanceof Fo?le.TOKEN_PARAM:e instanceof tn?le.TOKEN_PATH_ACCESSOR:e instanceof Ni?le.TOKEN_OP_A_FACTORIAL:e instanceof jn?le.TOKEN_RECURSIVE:e instanceof Ls?le.TOKEN_ARG_GROUP:e instanceof Nt?le.TOKEN_ARG_SEPARATOR:e instanceof Fr?le.TOKEN_OP_STRING_CONCAT:e instanceof Zt?le.TOKEN_OP_SCOPE_REASSIGNMENT:e instanceof Os?le.TOKEN_STRUCT_SWITCH_CASE:e instanceof Wi?le.TOKEN_STRUCT_SWITCH_GROUP:e instanceof Gi?le.TOKEN_STRUCT_DIRECTION_GROUP:e instanceof zn?le.TOKEN_STRUCT_SCOPED_LOGIC_GROUP:e instanceof Be?le.TOKEN_STRUCT_LOGIC_GROUP:e instanceof Vo?le.TOKEN_STRUCT_VALUE_DIRECTION:e instanceof ti?le.TOKEN_STRUCT_ARRAY:e instanceof Qn?le.TOKEN_STRUCT_T_LIST_START:e instanceof vc?le.TOKEN_STRUCT_TUPLE_LIST:e instanceof At?le.TOKEN_STRUCT_METHOD_CALL:typeof e}},te=le;te.TOKEN_LANG_OPERATOR="T_LANG_OPERATOR",te.TOKEN_VARIABLE="T_VAR",te.TOKEN_NUMBER="T_NUMERIC",te.TOKEN_STRING="T_STRING",te.TOKEN_RECURSIVE="T_RECURSIVE",te.TOKEN_CONSTANT_FALSE="T_FALSE",te.TOKEN_CONSTANT_NULL="T_NULL",te.TOKEN_CONSTANT_TRUE="T_TRUE",te.TOKEN_MODIFIER_NODE="T_MODIFIER",te.TOKEN_MODIFIER_CHAIN="T_MODIFIER_CHAIN",te.TOKEN_MODIFIER_PARAMETER="T_MODIFIER_PARAM",te.TOKEN_OP_A_ADD="T_AOP_ADD",te.TOKEN_OP_A_DIVIDE="T_AOP_DIVIDE",te.TOKEN_OP_A_EXPONENTIATION="T_AOP_EXP",te.TOKEN_OP_A_MODULUS="T_AOP_MOD",te.TOKEN_OP_A_MULTIPLY="T_AOP_MULTIPLY",te.TOKEN_OP_A_SUBTRACT="T_AOP_SUBTRACT",te.TOKEN_OP_A_FACTORIAL="T_AOP_FACTORIAL",te.TOKEN_ASG_ADD="T_ASG_ADD",te.TOKEN_ASG_DIVIDE="T_ASG_DIVIDE",te.TOKEN_ASG_ASSIGN="T_ASG",te.TOKEN_ASG_MODULUS="T_ASG_MODULUS",te.TOKEN_ASG_MULTIPLY="T_ASG_MULTIPLY",te.TOKEN_ASG_SUBTRACT="T_ASG_SUBTRACT",te.TOKEN_CMP_EQUAL="T_CMP_EQ",te.TOKEN_CMP_SEQUAL="T_CMP_SEQ",te.TOKEN_CMP_GT="T_CMP_GT",te.TOKEN_CMP_GTE="T_CMP_GTE",te.TOKEN_CMP_LT="T_CMP_LT",te.TOKEN_CMP_LTE="T_CMP_LTE",te.TOKEN_CMP_NEQ="T_CMP_NEQ",te.TOKEN_CMP_SNEQ="T_CMP_SNEQ",te.TOKEN_CMP_SPACESHIP="T_CMP_SPSHP",te.TOKEN_OP_VARIABLE_FALLBACK="T_VFBK",te.TOKEN_COND_FALLBACK_GROUP="T_VFBK_GROUP",te.TOKEN_BRANCH_SEPARATOR="T_BRANCH_SEPARATOR",te.TOKEN_TERNARY_SEPARATOR="T_TERNARY_SEPARATOR",te.TOKEN_GROUP_BEGIN="T_LOGIC_BEGIN",te.TOKEN_GROUP_END="T_LOGIC_END",te.TOKEN_MODIFIER_SEPARATOR="T_MODIFIER_SEPARATOR",te.TOKEN_MODIFIER_NAME="T_MODIFIER_NAME",te.TOKEN_MODIFIER_VALUE="T_MODIFIER_VALUE",te.TOKEN_MODIFIER_VALUE_SEPARATOR="T_MODIFIER_VALUE_SEPARATOR",te.TOKEN_NULL_COALESCE_GROUP="T_NULL_COALESCE_GROUP",te.TOKEN_SEMANTIC_GROUP="T_SEMANTIC_GROUP",te.TOKEN_STATEMENT_SEPARATOR="T_STATEMENT_SEPARATOR",te.TOKEN_TERNARY_CONDITION="T_TERNARY_CONDITION",te.TOKEN_OP_AND="T_AND",te.TOKEN_OP_LOGIC_NEGATION="T_LOGIC_INVERSE",te.TOKEN_OP_OR="T_OR",te.TOKEN_OP_XOR="T_XOR",te.TOKEN_OP_NULL_COALESCE="T_NULL_COALESCE",te.TOKEN_PARAM="T_PARAM",te.TOKEN_PATH_ACCESSOR="T_VAR_SEPARATOR",te.TOKEN_ARG_GROUP="T_ARG_GROUP",te.TOKEN_ARG_SEPARATOR="T_ARG_SEPARATOR",te.TOKEN_OP_STRING_CONCAT="T_STR_CONCAT",te.TOKEN_OP_SCOPE_REASSIGNMENT="T_SCOPE_ASSIGNMENT",te.TOKEN_STRUCT_SWITCH_CASE="T_SWITCH_CASE",te.TOKEN_STRUCT_SWITCH_GROUP="T_SWITCH_GROUP",te.TOKEN_STRUCT_DIRECTION_GROUP="T_DIRECTION_GROUP",te.TOKEN_STRUCT_VALUE_DIRECTION="T_ORDER_DIRECTION",te.TOKEN_STRUCT_SCOPED_LOGIC_GROUP="T_SCOPED_LOGIC_GROUP",te.TOKEN_STRUCT_LOGIC_GROUP="T_LOGIC_GROUP",te.TOKEN_STRUCT_ARRAY="T_ARRAY",te.TOKEN_STRUCT_T_LIST_START="T_LIST_START",te.TOKEN_STRUCT_TUPLE_LIST="T_LIST",te.TOKEN_STRUCT_METHOD_CALL="T_METHOD_CALL";var Ke=class{static isLanguageLogicalKeyword(e){return e==this.LogicalAnd||e==this.LogicalNot||e==this.LogicalOr||e==this.LogicalXor}};Ke.LogicalAnd="and",Ke.LogicalNot="not",Ke.LogicalOr="or",Ke.LogicalXor="xor",Ke.ConstTrue="true",Ke.ConstFalse="false",Ke.ConstNull="null",Ke.ArrList="list",Ke.ScopeAs="as";var hf=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.currentContent=[];this.rawContent=[];this.startIndex=0;this.cur=null;this.next=null;this.prev=null;this.isParsingString=!1;this.isParsingModifierName=!1;this.isInModifierParameterValue=!1;this.runtimeNodes=[];this.ignorePrevious=!1;this.lastNode=null;this.referenceParser=null;this.activeNode=null}reset(){this.ignorePrevious=!1,this.runtimeNodes=[],this.chars=[],this.inputLen=0,this.currentIndex=0,this.currentContent=[],this.rawContent=[],this.startIndex=0,this.cur=null,this.next=null,this.prev=null,this.isParsingString=!1,this.isParsingModifierName=!1,this.isInModifierParameterValue=!1,this.referenceParser=null,this.activeNode=null}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.ignorePrevious?(this.prev="",this.ignorePrevious=!1):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}isValidChar(e){return e==null||e==V.Punctuation_Semicolon?!1:this.isParsingString==!1&&e=="]"?!0:this.isParsingString==!1&&e==")"?!1:(e=="["||e=="]")&&e==this.cur||(e=="_"||e=="."||e=="["||e=="]")&&(!(this.currentContent.length>0)||J.ctypeAlpha(this.cur)||J.ctypeDigit(this.cur))?!0:J.ctypeSpace(e)?!1:this.isParsingModifierName&&(e==V.Punctuation_Minus||e==V.Punctuation_Underscore)?!0:!J.ctypePunct(e)}isRightOfInterpolationRegion(){if(this.activeNode==null||this.referenceParser==null)return!1;let e=this.activeNode._lexerRelativeOffset(this.currentIndex);return this.referenceParser.bordersInterpolationRegion(e)}scanForwardTo(e,t=0){let r=[];for(let i=this.currentIndex+1+t;i<this.inputLen;i++){let s=this.chars[i];if(s==e){r.push(s);break}else r.push(s)}return r}nextNonWhitespace(){for(let e=this.currentIndex+1;e<this.inputLen;e++){let t=this.chars[e];if(!J.ctypeSpace(t))return t}return null}pushError(e){this.referenceParser!=null&&this.referenceParser.addAntlersError(e)}guardAgainstNeighboringTypesInModifier(e){return this.lastNode instanceof kt&&this.pushError(Q.makeSyntaxError(P.TYPE_MODIFIER_INCORRECT_VALUE_POSITION,this.lastNode,"Incorrect type ["+te.getPrettyTypeName(e)+"] near ["+te.getPrettyTypeName(this.lastNode)+"]")),!1}appendContent(e){e!=null&&this.currentContent.push(e)}tokenize(e,t){this.reset(),this.referenceParser=e.getParser(),this.activeNode=e,this.chars=t.split(""),this.inputLen=this.chars.length,this.runtimeNodes=[],this.lastNode=null;let r=null;this.isParsingString=!1,this.isParsingModifierName=!1;let i=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){this.checkCurrentOffsets();let a=!0;if(this.cur!=null&&this.rawContent.push(this.cur),this.isParsingString==!1&&(this.cur==V.String_Terminator_DoubleQuote||this.cur==V.String_Terminator_SingleQuote)){if(this.prev==V.String_EscapeCharacter){this.pushError(Q.makeSyntaxError(P.TYPE_ILLEGAL_STRING_ESCAPE_SEQUENCE,e,"Illegal string escape sequence outside string parsing."));continue}this.rawContent=[],this.rawContent.push(this.cur),i=this.cur,this.isParsingString=!0,r=this.currentIndex;continue}if(this.isInModifierParameterValue&&!this.isParsingString){let l=!1;if(!this.isParsingString&&J.ctypeSpace(this.next)){let u=this.scanForwardTo(" ",1).join("").trim().toLowerCase();u.length>0&&Ke.isLanguageLogicalKeyword(u)&&(l=!0)}if(this.next==V.String_Terminator_SingleQuote||this.next==V.String_Terminator_DoubleQuote||this.next==null||l){this.appendContent(this.cur);let u=this.currentContent.join("");if(u.length>0){let f=u;if(this.currentContent=[],this.rawContent=[],f.trimRight().length==0){let h=this.nextNonWhitespace();if(h==V.String_Terminator_SingleQuote||h==V.String_Terminator_DoubleQuote){this.currentContent=[],this.rawContent=[];continue}}let d=new kt;d.isVirtual=!1,d.name=f,d.value=f.trimRight(),d.startPosition=e._lexerRelativeOffset(this.currentIndex-f.length),d.endPosition=e._lexerRelativeOffset(this.currentIndex),d.parent=this.activeNode,this.guardAgainstNeighboringTypesInModifier(d),this.runtimeNodes.push(d),this.lastNode=d}if(u.length==0)continue;this.currentContent=[],this.rawContent=[],this.isInModifierParameterValue=!1;continue}if(this.next==V.Punctuation_Pipe||this.next==V.Punctuation_Colon||this.next==V.RightParent){this.isInModifierParameterValue=!1,this.appendContent(this.cur);let u=0,f=!1;if(this.currentContent[0]==V.String_Terminator_SingleQuote||this.currentContent[0]==V.String_Terminator_DoubleQuote){let _=this.scanForwardTo(this.currentContent[0]);_.length>0&&(this.currentContent=this.currentContent.concat(_),u=_.length,f=!0)}let d=this.currentContent.join("");f&&(d=d.substr(1),d=d.slice(0,-1)),this.currentContent=[],this.rawContent=[];let h=new kt;h.isVirtual=!1,h.name=d,h.value=d,h.startPosition=e._lexerRelativeOffset(this.currentIndex-d.length),h.endPosition=e._lexerRelativeOffset(this.currentIndex),h.parent=this.activeNode,this.runtimeNodes.push(h),this.guardAgainstNeighboringTypesInModifier(h),this.lastNode=h,this.currentIndex+=u}else this.appendContent(this.cur);continue}if(this.isParsingString&&this.cur==i){if(this.prev==V.String_EscapeCharacter)this.appendContent(i);else{if(this.isInModifierParameterValue){let u=this.currentContent.join(""),f=new kt;f.isVirtual=!1,f.name=u,f.value=u,f.startPosition=e._lexerRelativeOffset(r??0),f.endPosition=e._lexerRelativeOffset(this.currentIndex),f.parent=this.activeNode,this.runtimeNodes.push(f),this.guardAgainstNeighboringTypesInModifier(f),this.lastNode=f,this.currentContent=[],this.rawContent=[],this.isParsingString=!1,this.isInModifierParameterValue=!1;continue}let l=new gt;l.isVirtual=!1,l.startPosition=e._lexerRelativeOffset(r??0),l.endPosition=e._lexerRelativeOffset(this.currentIndex),this.referenceParser!=null&&(l.sourceContent=this.referenceParser.getText(l.startPosition.index,l.endPosition.index+1)),l.parent=this.activeNode,i!=null&&(l.sourceTerminator=i),i=null,this.isParsingString=!1,l.value=this.currentContent.join(""),l.rawLexContent=this.rawContent.join("").trim(),this.currentContent=[],this.rawContent=[],this.guardAgainstNeighboringTypesInModifier(l),this.runtimeNodes.push(l),this.lastNode=l}continue}if(this.isParsingString&&this.cur==V.String_EscapeCharacter){if(this.next==V.String_EscapeCharacter){this.appendContent(V.String_EscapeCharacter),this.ignorePrevious=!0,this.currentIndex+=1;continue}else if(this.next==V.String_Terminator_SingleQuote){this.appendContent(V.String_Terminator_SingleQuote),this.rawContent.push(V.String_EscapeCharacter),this.rawContent.push(V.String_Terminator_SingleQuote),this.currentIndex+=1;continue}else if(this.next==V.String_Terminator_DoubleQuote){this.appendContent(V.String_Terminator_DoubleQuote),this.rawContent.push(V.String_EscapeCharacter),this.rawContent.push(V.String_Terminator_DoubleQuote),this.currentIndex+=1;continue}else if(this.next=="n"){this.appendContent(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){this.appendContent("	"),this.currentIndex+=1;continue}else if(this.next=="r"){this.appendContent("\r"),this.currentIndex+=1;continue}}if(this.isParsingString==!1){if(this.isValidChar(this.cur)&&this.isValidChar(this.next)==!1&&this.currentContent.length==0&&(this.appendContent(this.cur),a=!1),(this.next==null||this.isValidChar(this.next)==!1)&&this.currentContent.length>0){a&&this.appendContent(this.cur);let l=this.currentContent.join("").trim(),u=l.length,f=this.currentIndex-u,d=e._lexerRelativeOffset(f),h=e._lexerRelativeOffset(this.currentIndex);if(this.currentContent=[],this.rawContent=[],l==Ke.LogicalAnd){let b=new Yn;b.isVirtual=!1,b.content=Ke.LogicalAnd,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.LogicalOr){let b=new $n;b.isVirtual=!1,b.content=Ke.LogicalOr,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.LogicalXor){let b=new Dr;b.isVirtual=!1,b.content=Ke.LogicalXor,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.ConstNull){let b=new Gn;b.isVirtual=!1,b.content=Ke.ConstNull,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.ConstTrue){let b=new ur;b.isVirtual=!1,b.content=Ke.ConstTrue,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.ConstFalse){let b=new cr;b.isVirtual=!1,b.content=Ke.ConstFalse,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.LogicalNot){let b=new Ht;b.isVirtual=!1,b.content=Ke.LogicalNot,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}else if(l==Ke.ArrList&&this.next==V.LeftParen){let b=new Qn;b.isVirtual=!1,b.content=Ke.ArrList,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,this.runtimeNodes.push(b),this.lastNode=b;continue}if(J.isNumeric(l)){let b=new Pt;b.isVirtual=!1,b.startPosition=d,b.endPosition=h,b.parent=this.activeNode,l.includes(".")?b.value=parseFloat(l):b.value=parseInt(l),b.rawLexContent=l,this.guardAgainstNeighboringTypesInModifier(b),this.runtimeNodes.push(b),this.lastNode=b;continue}if(this.runtimeNodes.length>0){let b=this.runtimeNodes[this.runtimeNodes.length-1];if(b instanceof Jt){let g=new Ut;g.isVirtual=!1,g.name=l,g.content=l,g.startPosition=d,g.endPosition=h,g.parent=this.activeNode,this.runtimeNodes.push(g),this.lastNode=g;continue}else if(b instanceof rn){let g=new kt;g.isVirtual=!1,g.name=l,g.value=l,g.startPosition=d,g.endPosition=h,g.parent=this.activeNode,this.runtimeNodes.push(g),this.lastNode=g,this.isParsingModifierName=!1;continue}}let _=new ye;_.isVirtual=!1,_.name=l,_.startPosition=d,_.endPosition=h,_.parent=this.activeNode,this.runtimeNodes.push(_),this.lastNode=_;continue}}else{this.appendContent(this.cur);continue}if(!J.ctypeSpace(this.cur)){if(this.isParsingString==!1){if(this.cur==V.Punctuation_Equals&&this.next==V.Punctuation_GreaterThan){let l=new Zt;l.isVirtual=!1,l.content="=>",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentContent=[],this.rawContent=[],this.currentIndex+=1;continue}if(this.cur==V.Punctuation_Comma){let l=new Nt;l.isVirtual=!1,l.content=V.Punctuation_Comma,l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Semicolon){let l=new Wt;l.isVirtual=!1,l.content=V.Punctuation_Semicolon,l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Plus){if(this.next==V.Punctuation_Equals){let u=new fr;u.isVirtual=!1,u.content="+=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new Rn;l.isVirtual=!1,l.content="+",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.isParsingModifierName==!1&&this.cur==V.Punctuation_Minus){if(J.ctypeDigit(this.next)&&J.ctypeDigit(this.prev)==!1&&this.prev!=V.RightParent&&this.isRightOfInterpolationRegion()==!1){this.appendContent(this.cur);continue}if(this.next==V.Punctuation_Equals){let u=new Lr;u.isVirtual=!1,u.content="-=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}else if(this.next==V.Punctuation_GreaterThan){let u=new At;u.isVirtual=!1,u.content="->",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new nn;l.isVirtual=!1,l.content="-",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Asterisk){if(this.next==V.Punctuation_Asterisk){let u=new Or;u.isVirtual=!1,u.content="**",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}else if(this.next==V.Punctuation_Equals){let u=new hr;u.isVirtual=!1,u.content="*=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new wn;l.isVirtual=!1,l.content="*",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_ForwardSlash){if(this.next==V.Punctuation_Equals){let u=new dr;u.isVirtual=!1,u.content="/=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new kn;l.isVirtual=!1,l.content="/",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Percent){if(this.next==V.Punctuation_Equals){let u=new pr;u.isVirtual=!1,u.content="%=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new Wn;l.isVirtual=!1,l.content="%",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_LessThan){if(this.next==V.Punctuation_Equals){let u=null;if(this.currentIndex+2<this.inputLen&&(u=this.chars[this.currentIndex+2]),u==V.Punctuation_GreaterThan){let d=new yr;d.isVirtual=!1,d.content="<=>",d.startPosition=e._lexerRelativeOffset(this.currentIndex),d.endPosition=e._lexerRelativeOffset(this.currentIndex+3),d.parent=this.activeNode,this.runtimeNodes.push(d),this.lastNode=d,this.currentIndex+=2;continue}let f=new gr;f.isVirtual=!1,f.content="<=",f.startPosition=e._lexerRelativeOffset(this.currentIndex),f.endPosition=e._lexerRelativeOffset(this.currentIndex+2),f.parent=this.activeNode,this.runtimeNodes.push(f),this.lastNode=f,this.currentIndex+=1;continue}let l=new mr;l.isVirtual=!1,l.content="<",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_GreaterThan){if(this.next==V.Punctuation_Equals){let u=new Hn;u.isVirtual=!1,u.content=">=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}let l=new Hn;l.isVirtual=!1,l.content=">",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Equals&&this.next!=V.Punctuation_Equals){let l=new On;l.isVirtual=!1,l.content="=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Equals&&this.next==V.Punctuation_Equals){let l=null;if(this.currentIndex+2<this.inputLen&&(l=this.chars[this.currentIndex+2]),l==V.Punctuation_Equals){let u=new br;u.isVirtual=!1,u.content="===",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+3),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=2}else{let u=new hn;u.isVirtual=!1,u.content="==",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1}continue}if(this.cur==V.Punctuation_Ampersand){if(this.next==V.Punctuation_Ampersand){let u=new Yn;u.isVirtual=!1,u.content="&&",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+2),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u,this.currentIndex+=1;continue}if(this.next==V.Punctuation_Equals){let u=new Fr;u.isVirtual=!1,u.content="&=",u.startPosition=e._lexerRelativeOffset(this.currentIndex),u.endPosition=e._lexerRelativeOffset(this.currentIndex+1),u.parent=this.activeNode,this.runtimeNodes.push(u),this.lastNode=u;continue}let l=new Yn;l.isVirtual=!1,l.content="&",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Pipe&&this.next!=V.Punctuation_Pipe){let l=new Jt;l.isVirtual=!1,l.content="|",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.isParsingModifierName=!0;continue}if(this.cur==V.Punctuation_Pipe&&this.next==V.Punctuation_Pipe){let l=new $n;l.isVirtual=!1,l.content="||",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.cur==V.Punctuation_Exclamation){if(this.next==V.Punctuation_Equals){let u=null;if(this.currentIndex+2<this.inputLen&&(u=this.chars[this.currentIndex+2]),u==V.Punctuation_Equals){let d=new _r;d.isVirtual=!1,d.content="!==",d.startPosition=e._lexerRelativeOffset(this.currentIndex),d.endPosition=e._lexerRelativeOffset(this.currentIndex+3),d.parent=this.activeNode,this.runtimeNodes.push(d),this.lastNode=d,this.currentIndex+=2;continue}let f=new Tr;f.isVirtual=!1,f.content="!=",f.startPosition=e._lexerRelativeOffset(this.currentIndex),f.endPosition=e._lexerRelativeOffset(this.currentIndex+2),f.parent=this.activeNode,this.runtimeNodes.push(f),this.lastNode=f,this.currentIndex+=1;continue}let l=new Ht;l.isVirtual=!1,l.content="!",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Question&&this.next==V.Punctuation_Equals){let l=new ei;l.isVirtual=!1,l.content="?=",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.cur==V.Punctuation_Question&&this.next==V.Punctuation_Question){let l=new Kn;l.isVirtual=!1,l.content="??",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.cur==V.Punctuation_Question&&this.next==V.Punctuation_Colon){let l=new Kn;l.isVirtual=!1,l.content="?:",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+2),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.currentIndex+=1;continue}if(this.cur==V.Punctuation_Question){let l=new Ln;l.isVirtual=!1,l.content="?",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.LeftParen){let l=new Rt;l.isVirtual=!1,l.content="(",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.RightParent){let l=new Et;l.isVirtual=!1,l.content=")",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l;continue}if(this.cur==V.Punctuation_Colon){if(this.runtimeNodes.length>0&&this.runtimeNodes[this.runtimeNodes.length-1]instanceof Ut){let f=new rn;f.isVirtual=!1,f.content=":",f.startPosition=e._lexerRelativeOffset(this.currentIndex),f.endPosition=e._lexerRelativeOffset(this.currentIndex+1),f.parent=this.activeNode,this.runtimeNodes.push(f),this.isInModifierParameterValue==!1?this.isInModifierParameterValue=!0:this.isInModifierParameterValue=!1;continue}let l=new mt;l.isVirtual=!1,l.content=":",l.startPosition=e._lexerRelativeOffset(this.currentIndex),l.endPosition=e._lexerRelativeOffset(this.currentIndex+1),l.parent=this.activeNode,this.runtimeNodes.push(l),this.lastNode=l,this.isParsingModifierName=!1;continue}}a&&this.appendContent(this.cur)}}let s=this.runtimeNodes.length-1;for(let a=0;a<this.runtimeNodes.length;a++){let l=null,u=null;a>0&&(l=this.runtimeNodes[a-1]),a!=s&&(u=this.runtimeNodes[a+1]);let f=this.runtimeNodes[a];f.prev=l,f.next=u}return this.runtimeNodes}};var Ft=class{constructor(){this.chars=[];this.currentIndex=0;this.lastIndex=0;this.inputLength=0;this.prev=null;this.cur=null;this.next=null;this.isParsingString=!1;this.isStringKeyPath=!1;this.antlersErrors=[];this._recusriveEntryCheck=new Map}isValidChar(e){return!(this.isParsingString==!1&&J.ctypeSpace(e)||this.isParsingString==!1&&e==Ft.LeftBracket||this.isParsingString==!1&&e==Ft.RightBracket)}normalizePath(e){return e=e.replace(":","_"),e=e.replace(".","_"),e=e.replace("[","_"),e=e.replace("]","_"),e.replace("]","_")}getAntlersErrors(){return this.antlersErrors}mergeErrors(e){e.forEach(t=>{this.antlersErrors.push(t)})}parse(e){this.antlersErrors=[],this._recusriveEntryCheck.clear();let t=e,r=!1,i=!1,s=!1,a=!1;e.startsWith(V.AtChar)&&(s=!0,e=e.substr(1)),e.startsWith(V.Punctuation_Percent)?(a=!0,e=e.substr(1)):(e.startsWith(V.Punctuation_Dollar)&&(r=!0,e=e.substr(1)),e.startsWith(V.Punctuation_Dollar)&&(i=!0,e=e.substr(1))),this.chars=[],this.currentIndex=0,this.lastIndex=0,this.inputLength=0,this.cur=null,this.prev=null,this.next=null,this.chars=e.split(""),this.inputLength=this.chars.length,this.lastIndex=this.inputLength-1;let l=[],u=!1,f=[],d=Ft.ColonSeparator,h=!1,_=null,b=!1,g=!0;if(this.isParsingString=!1,this.inputLength==0){let E=new xi;return E._isFromEmptyFailState=!0,E}for(this.currentIndex;this.currentIndex<this.inputLength;this.currentIndex+=1){if(this.cur=this.chars[this.currentIndex],this.next=null,h?(h=!1,this.prev=""):this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLength&&(this.next=this.chars[this.currentIndex+1]),this.isParsingString==!1&&this.cur==Ft.ColonSeparator&&(d=Ft.ColonSeparator),this.isParsingString==!1&&this.cur==Ft.DotPathSeparator&&(d=Ft.DotPathSeparator),this.isParsingString&&this.cur==V.String_EscapeCharacter&&this.next==_){_!=null&&l.push(_),this.currentIndex+=1;continue}if(this.cur==V.String_Terminator_SingleQuote||this.cur==V.String_Terminator_DoubleQuote)if(this.isParsingString)if(this.cur==_)if(this.prev==V.String_EscapeCharacter){l.push(this.cur);continue}else this.isParsingString=!1,g=!1;else{l.push(this.cur);continue}else{this.prev!=null&&this.prev!=V.LeftBracket&&(J.ctypeAlpha(this.prev)||J.ctypeDigit(this.prev))&&this.antlersErrors.push(Q.makeSyntaxError(P.PATH_STRING_NOT_INSIDE_ARRAY_ACCESSOR,null,"Unexpected string start while parsing variable path. String literals must be within array accessors.")),this.isParsingString=!0,b=!0,_=this.cur,this.isStringKeyPath=!0;continue}if(this.isParsingString){if(J.ctypeSpace(this.cur)){l.push(this.cur);continue}else if(this.cur==V.String_EscapeCharacter){if(this.next==V.String_EscapeCharacter){l.push(V.String_EscapeCharacter),this.currentIndex+=1,h=!0;continue}else if(this.next=="n"){l.push(`
`),this.currentIndex+=1;continue}else if(this.next=="t"){l.push("	"),this.currentIndex+=1;continue}else if(this.next=="r"){l.push("\r"),this.currentIndex+=1;continue}}}if(this.isParsingString==!1&&this.cur==Ft.LeftBracket){if(l.length>0){let q=new tn;q.name=l.join(""),q.delimiter=d,f.push(q),l=[]}if(this.next==null||J.ctypeSpace(this.next)){this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_ILLEGAL_VARPATH_SPACE_RIGHT,null,"Unexpected end of input or whitespace while parsing variable accessor path."));continue}let E=this.locateEndOfAccessor();this.currentIndex=E.foundOn;let C=new Ft;if(f.push(C.parse(E.nestedContent)),this.mergeErrors(C.getAntlersErrors()),u=!0,this.currentIndex==-1){this.antlersErrors.push(Q.makeSyntaxError(P.PARSER_CANNOT_PARSE_PATH_RECURSIVE,null,"Cannot parse variable path.")),u=!1;break}continue}if(this.isParsingString==!1&&this.next==Ft.RightBracket&&u){g?l.push(this.cur):g=!0;let E=new Cc;E.name=l.join(""),f.push(E),l=[],d=Ft.ColonSeparator,this.currentIndex+=1,u=!1;continue}if(this.isParsingString==!1&&(this.cur==Ft.LeftBracket||this.cur==Ft.ColonSeparator||this.cur==Ft.DotPathSeparator||this.currentIndex==this.lastIndex)){if(this.next==null||J.ctypeSpace(this.next)){if(this.cur==Ft.ColonSeparator){if(l.length==0){this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_UNEXPECTED_BRANCH_SEPARATOR,null,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_ILLEGAL_VARPATH_RIGHT,null,'Variable paths cannot end with the ":" character.'));continue}if(this.cur==Ft.LeftBracket){this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_ILLEGAL_VARPATH_SUBPATH_START,null,"Illegal variable sub-path start."));continue}}this.currentIndex==this.lastIndex&&this.isValidChar(this.cur)&&(g?l.push(this.cur):g=!0);let E=new tn;E.delimiter=d,E.name=l.join(""),b&&(E.isStringVar=b,E.name=t.substr(1),E.name=E.name.slice(0,-1),b=!1),f.push(E),l=[];continue}else{l.push(this.cur);continue}}let v=f.length;if(v>0){let E=f[v-1];(E instanceof tn||E instanceof xi)&&(E.isFinal=!0)}let O=new xi;return O.isStrictTagReference=a,O.isStrictVariableReference=r,O.isExplicitVariableReference=i,O.pathParts=f,O.originalContent=e,O.isVariableVariable=s,O.normalizedReference=e.replace(":","."),O}locateEndOfAccessor(){let e=[],t=1,r=-1,i="",s=!1,a=null;if(this._recusriveEntryCheck.has(this.currentIndex+1)==!1)this._recusriveEntryCheck.set(this.currentIndex+1,!0);else return{foundOn:r,nestedContent:""};for(let l=this.currentIndex+1;l<this.inputLength;l++){let u=this.chars[l],f=null,d=null;if(l>0&&(d=this.chars[l-1]),l+1<this.inputLength&&(f=this.chars[l+1]),s==!1&&(u==V.String_Terminator_SingleQuote||u==V.String_Terminator_DoubleQuote)){s=!0,a=u,e.push(u);continue}if(s==!1&&u==Ft.LeftBracket){t+=1,e.push(u);continue}if(s&&u==a&&d!=V.String_EscapeCharacter){e.push(u),s=!1,a=null;continue}if(s==!1&&u==Ft.RightBracket)if(t-=1,t==0){r=l,i=e.join("");break}else{e.push(u);continue}else e.push(u);s==!1&&J.ctypeSpace(f)&&this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path.")),f==null&&this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_VARPATH_ACCESSOR,null,"Unexpected end of input or whitespace while parsing inner variable accessor path."))}return{foundOn:r,nestedContent:i}}},ci=Ft;ci.ColonSeparator=":",ci.LeftBracket="[",ci.RightBracket="]",ci.DotPathSeparator=".";var mf=class{constructor(){this.chars=[];this.inputLen=0;this.currentIndex=0;this.cur=null;this.prev=null;this.pathParser=new ci;this.lexer=new hf;this.activeNode=null}reset(){this.chars=[],this.inputLen=0,this.currentIndex=0,this.cur=null,this.prev=null}canBeClosingTag(e){let t=e.name?.name;return t=="elseif"||t=="else"?!0:e.name==null?!1:e.name.content.startsWith("/")}parseNode(e){if(this.activeNode=e,this.reset(),e.content.startsWith("*subrecursive")){let d=e.content;d=d.trim(),d=J.trimRight(d,"*"),d=d.substr(13);let h=new jn;return e.copyBasicDetailsTo(h),h.originalNode=e,h.name=new yn,h.name.name=d,h.isNestedRecursive=!0,d.trim().startsWith("[")||(h.pathReference=this.pathParser.parse(d)),h.mergeErrors(this.pathParser.getAntlersErrors()),h.content=d,h.runtimeContent=d,h}if(e.content.trim().startsWith("*recursive")){let d=e.content;d=d.trim(),d=J.trimRight(d,"*"),d=d.substr(10).trim();let h=new jn;return e.copyBasicDetailsTo(h),h.originalNode=e,h.name=new yn,h.name.name=d,h.pathReference=this.pathParser.parse(d),h.mergeErrors(this.pathParser.getAntlersErrors()),h.content=d,h.runtimeContent=d,h}this.chars=e.content.split(""),this.inputLen=this.chars.length;let t=[],r=!1,i="",s=!1,a=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.cur=this.chars[this.currentIndex],this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),r==!1){if(s==!1&&(this.cur==V.String_Terminator_DoubleQuote||this.cur==V.String_Terminator_SingleQuote)){a=this.cur,s=!0,t.push(this.cur);continue}if(s&&J.ctypeSpace(this.cur)){t.push(this.cur);continue}if(s&&this.cur==a&&this.prev!=V.String_EscapeCharacter){a=null,s=!1,t.push(this.cur);continue}if(J.ctypeSpace(this.cur)||this.currentIndex==this.inputLen-1||this.cur==V.Punctuation_Pipe){if(t.length==0)continue;J.ctypeSpace(this.cur)||this.cur!=V.Punctuation_Pipe&&t.push(this.cur),i=t.join(""),r=!0;break}t.push(this.cur)}let l=e.getContentRelativeStartIndex();if(e.nameStartsOn=e.relativeOffset(l,l),e.nameStartsOn!=null&&(e.nameEndsOn=e.nameStartsOn.shiftRight(i.length-1),i.includes(V.Punctuation_Colon))){let d=i.indexOf(V.Punctuation_Colon);e.nameMethodPartStartsOn=e.nameStartsOn.shiftRight(d+1)}e.name=pf.getIdentifier(i),Xh.analyzeNode(e),e.parameters=this.getParameters(e),e.hasParameters=e.parameters.length>0,e.hasParameters&&(Xh.analyzeParametersForModifiers(e),e.resetContentCache()),i.startsWith("[")==!1&&(e.pathReference=this.pathParser.parse(i)),e.mergeErrors(this.pathParser.getAntlersErrors()),e.pathReference!=null&&e.pathReference.isStrictTagReference&&(e.name.name=e.name.name.substr(1),e.name.content=e.name.content.substr(1)),e.isClosingTag=this.canBeClosingTag(e);let u=[];e.isClosingTag==!1&&(u=this.lexer.tokenize(e,e.getContent())),e.runtimeNodes=u;let f=e.content.trim();if(dn.isConditionalStructure(e)&&e.name.name!="else"&&u.length==0&&f!="/if"&&f!="/unless"&&f!="/endunless"&&f!="endif"&&f!="endunless"&&f!="/endif"&&e.getContent().trim().length==0&&this.pushConditionWithoutExpression(e),e.name.name=="endif"){let d=e.copyBasicDetails(),h=e.getParser();return h!=null&&d.withParser(h),d.name=new yn,d.name.name="if",d.name.compound="if",d.isClosingTag=!0,d.content=" /if ",d.originalNode=e,d}if(e.name.name=="unless"){let d=e.copyBasicDetails(),h=e.getParser();if(h!=null&&d.withParser(h),d.name=new yn,d.name.name="if",d.name.compound="if",e.isClosingTag==!1){let _=e.getContent()??"",b=" if !("+_+") ";d.content=b,d.originalNode=e,d.resetContentCache(),d.runtimeNodes=this.lexer.tokenize(d,d.getContent()??""),this.testUnlessContent(d)}else d.originalNode=e,d.content=" /if ";return d}else if(e.name.name=="elseunless"){let d=e.copyBasicDetails(),h=e.getParser();h!=null&&d.withParser(h),d.name=new yn,d.name.name="elseif",d.name.compound="elseif";let _=e.getContent()??"",b=" elseif !("+_+") ";return d.content=b,d.originalNode=e,d.resetContentCache(),d.runtimeNodes=this.lexer.tokenize(d,d.getContent()??""),this.testUnlessContent(d),d}else if(e.name.name=="endunless"){let d=e.copyBasicDetails(),h=e.getParser();return h!=null&&d.withParser(h),d.name=new yn,d.name.name="if",d.name.compound="if",d.isClosingTag=!0,d.content=" /if ",d.originalNode=e,d}return e}pushError(e){this.activeNode!=null&&this.activeNode.pushError(e)}testUnlessContent(e){let t=e.getContent()??"";if(t=t.replace("!",""),t=t.replace("(",""),t=t.replace(")","").trim(),t.length==0){this.pushConditionWithoutExpression(e);return}}pushConditionWithoutExpression(e){this.pushError(Q.makeSyntaxError(P.TYPE_PARSE_EMPTY_CONDITIONAL,e,"Condition structure lacks comparison expression."))}getParameters(e){let t=e.getContent()??"",r=t.split(""),i=[],s=[],a=r.length,l=0;if(e.name!=null){let de=J.trimLeft(e.content," "),Ue=e.content.length-de.length,_t=e.name.content.length;Ue>0?l=Ue+_t:l=_t}let u=!1,f=[],d="",h=0,_=0,b=!1,g=null,v=-1,O=-1,E=-1,C=-1,q=-1,Z=-1,ue=null;for(let de=0;de<a;de++){let Ue=r[de],_t=null,Qt=null;if(de+1<a&&(Qt=r[de+1]),b?(_t="",b=!1):de>0&&(_t=r[de-1]),u==!1&&J.ctypeSpace(Ue)){f=[],v=-1,O=-1,E=-1,C=-1,q=-1,Z=-1;continue}if(u==!1&&Ue==V.Punctuation_Equals){if(f.length>0&&(J.ctypeAlpha(f[0])||J.ctypeDigit(f[0])||f[0]==V.Punctuation_Colon||f[0]==V.AtChar||f[0]==V.String_EscapeCharacter)==!1){f=[];continue}if(de+1>=a){this.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_END_OF_INPUT,e,"Unexpected end of input"));continue}let ft=null;if(de+1<a&&(ft=r[de+1]),_t==V.Punctuation_Equals){f=[],v=-1,O=-1,E=-1,C=-1,q=-1,Z=-1;continue}if(J.ctypeSpace(ft)||ft==V.Punctuation_Equals){f=[],v=-1,O=-1,E=-1,C=-1,q=-1,Z=-1;continue}f.length>0&&(C=de,q=de,d=f.join(""),h=_,u=!0,f=[]),Qt==V.String_Terminator_DoubleQuote&&(g=V.String_Terminator_DoubleQuote,ue=V.String_Terminator_DoubleQuote,de+=1),Qt==V.String_Terminator_SingleQuote&&(g=V.String_Terminator_SingleQuote,ue=V.String_Terminator_SingleQuote,de+=1);continue}if(u&&Ue==V.String_EscapeCharacter){let ft=null;if(de+1<a&&(ft=r[de+1]),ft==V.String_EscapeCharacter){f.push(V.String_EscapeCharacter),de+=1,b=!0;continue}if(ft==V.String_Terminator_DoubleQuote){f.push(V.String_Terminator_DoubleQuote),de+=1;continue}if(ft==V.String_Terminator_SingleQuote){f.push(V.String_Terminator_SingleQuote),de+=1;continue}if(ft=="n"){f.push(`
`),de+=1;continue}if(ft=="r"){f.push("\r"),de+=1;continue}}if(u==!1&&(g!=null&&Ue==g||g==null&&J.ctypeSpace(Ue))&&i.push(f.join("")),u&&(g!=null&&Ue==g||g==null&&J.ctypeSpace(Ue))){let ft=f.join("");Z=de,O=de,u=!1,g=null,f=[];let ke=new Fo;if(d.startsWith(V.Punctuation_Colon)&&(ke.isVariableReference=!0,d=d.substr(1)),ke.nameDelimiter=ue,ke.name=d,ke.value=ft,d.startsWith(V.String_EscapeCharacter)&&(ke.containsEscapedContent=!0),ke.nameDelimiter==null&&(ke.hasValidValueDelimiter=!1,ke.nameDelimiter='"'),ke.startPosition=e.relativePositionFromOffset(_,h)??null,de+1>a){this.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NODE_PARAMETER,e,"Unexpected end of input while parsing parameter content.")),ke.parent=e,s.push(ke),d="";continue}ke.endPosition=e.relativePositionFromOffset(de+1,de+1)??null,ke.parent=e,ke.blockPosition={start:e.relativeOffset(v,v)??null,end:e.relativeOffset(O,O)??null},ke.namePosition={start:e.relativeOffset(E,E)??null,end:e.relativeOffset(C,C)??null},ke.valuePosition={start:e.relativeOffset(q+2,q+2)??null,end:e.relativeOffset(Z,Z)??null},s.push(ke),d="",v=-1,O=-1,E=-1,C=-1,q=-1,Z=-1;continue}if(u==!1&&(Ue==V.String_Terminator_DoubleQuote||Ue==V.String_Terminator_SingleQuote)&&de>l)break;f.push(Ue),v==-1&&(v=de),E==-1&&(E=de),f.length==1&&(_=de+1)}if(g!=null){let de=e;if(i.length>0){let Ue=i[i.length-1],_t=e.content.indexOf(Ue);if(_t>=0){let Qt=new se;Qt.startPosition=e.relativeOffset(_t-2,_t-2),Qt.endPosition=e.relativeOffset(_t+Ue.length,_t+Ue.length),de=Qt}}this.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_END_OF_INPUT,de,"Unexpected string literal while parsing parameters."))}return s}};function Ul(n){return n.length==0?null:n[0].startPosition}var KA=Me(bc(),1),jl=class{static regions(){return this.noParseRegions}static clear(){this.noParseRegions.clear()}static registerNoParseContent(e){let t=KA.Md5.hashStr(e);return this.noParseRegions.set(t,e),t}};jl.noParseRegions=new Map;function Jh(n,e){let t=new Set(n),r=new Set(e),i=new Set([...t].filter(s=>r.has(s)));return Array.from(i)}var Zh=class{constructor(){this.closingTagIndex=new Map;this.closingTagIndexCount=new Map;this.openTagIndexCount=new Map;this.closingTagNames=new Map;this.parentNode=null;this.stackCount=0;this.createdExecutionBranches=[];this.document=null}getClosingCandidates(e){if((e instanceof X||e instanceof it)&&e.isClosingTag==!1){let t=e.name?.compound??"";return t=="if"?["if","elseif","else"]:t=="elseif"?["elseif","else","if"]:t=="else"?["if"]:[t]}return[]}buildCloseIndex(e){e.forEach(t=>{if(!(t instanceof jn)&&!((t instanceof X||t instanceof it)&&t.isSelfClosing)&&(t instanceof X||t instanceof it)&&t.isClosingTag){this.closingTagIndex.has(this.stackCount)==!1&&this.closingTagIndex.set(this.stackCount,new Map),this.closingTagIndexCount.has(this.stackCount)==!1&&this.closingTagIndexCount.set(this.stackCount,new Map);let r=t.name?.compound??"";this.closingTagIndex.get(this.stackCount)?.has(r)==!1&&(this.closingTagIndex.get(this.stackCount)?.set(r,[]),this.closingTagIndexCount.get(this.stackCount)?.set(r,0)),this.closingTagIndex.get(this.stackCount)?.get(r)?.push(t);let i=this.closingTagIndexCount.get(this.stackCount)?.get(r)??0;this.closingTagIndexCount.get(this.stackCount)?.set(r,i+1)}}),this.closingTagNames.has(this.stackCount)==!1&&this.closingTagNames.set(this.stackCount,[]),this.closingTagIndex.has(this.stackCount)&&(this.closingTagNames.set(this.stackCount,Array.from(this.closingTagIndex.get(this.stackCount)?.keys()??[])),this.closingTagIndex.get(this.stackCount)?.forEach((t,r)=>{let i=t.length;if(i==0)return;let s=t[i-1];for(let a=0;a<i;a++){let l=e[a];if(l instanceof X||l instanceof it){if(l instanceof jn)continue;if(l.index>=s.index)break;let u=l.name?.compound??"";if(l.isClosingTag==!1&&r==u&&!l.isSelfClosing){this.openTagIndexCount.has(this.stackCount)==!1&&this.openTagIndexCount.set(this.stackCount,new Map),this.openTagIndexCount.get(this.stackCount)?.has(r)==!1&&this.openTagIndexCount.get(this.stackCount)?.set(r,0);let f=this.openTagIndexCount.get(this.stackCount)?.get(r)??0;this.openTagIndexCount.get(this.stackCount)?.set(r,f+1)}}}}))}getScanForList(e){if(e instanceof X||e instanceof it){let t=e.name?.compound;if(t=="else")return["if"];if(t=="elseif")return["elseif","else","if"];if(e.isClosingTag==!1){let r=this.getClosingCandidates(e),i=this.closingTagNames.get(this.stackCount);return Jh(r,i)}}return[]}canPossiblyClose(e){if(e instanceof jn)return!1;if(e instanceof it||e instanceof X){if(e.isComment||e.isSelfClosing)return!1;let t=e.name?.compound??"";if(t=="else"||t=="elseif")return!0;if(e.isClosingTag==!1){let r=this.getClosingCandidates(e),i=this.closingTagNames.get(this.stackCount);return Jh(r,i).length>0}}return!1}findClosingPair(e,t,r){let i=t.runtimeNodes.length,s=e.length,a=0;for(let l=0;l<s;l++){let u=e[l];if(u instanceof X||u instanceof it)if(t.endPosition!=null&&u.startPosition!=null){if(t.endPosition.isBefore(u.startPosition)){if(u.isClosingTag&&u.isOpenedBy!=null||u.isSelfClosing)continue;let f=u.name?.compound??"";if(u.isClosingTag==!1){if(r.includes(f)){let d=this.openTagIndexCount.get(this.stackCount)?.get(f),h=this.closingTagIndexCount.get(this.stackCount)?.get(f);d!=h&&u.runtimeNodes.length>=i,a+=1}continue}if(r.includes(f)&&a>0){a-=1;continue}if(a==0&&r.includes(f)){u.isOpenedBy=t,t.isClosedBy=u;break}}}else continue}}associate(e,t){this.document=t;let r=[{documentNodes:e,parent:null}],i=[];for(;r.length>0;){let s=r.pop();if(s==null)continue;let a=s.documentNodes;this.parentNode=s.parent,this.stackCount+=1,this.buildCloseIndex(a),a=dn.pairConditionals(a),a.forEach(d=>{if((d instanceof X||d instanceof it)&&this.canPossiblyClose(d)){if(dn.isConditionalStructure(d))return;let h=this.getScanForList(d);this.findClosingPair(a,d,h)}});let l=a.length;for(let d=0;d<l;d++){let h=a[d];if((h instanceof X||h instanceof it)&&h.isClosedBy!=null)for(let _=d+1;_<l;_++){let b=a[_];if(b.index>h.isClosedBy.index)break;if(b.parent=h,h.children.push(b),b instanceof X&&b.index==h.index){b.parent=h;break}}}a.forEach(d=>{if((d instanceof X||d instanceof it)&&d.children.length>0){let h=[];d.children.forEach(_=>{_.parent!=null&&_.parent.index==d.index&&(_.parent=d,h.push(_))}),r.push({documentNodes:h,parent:d})}});let u=[];a.forEach(d=>{this.parentNode==null?d.parent==null&&u.push(d):d.parent==this.parentNode&&u.push(d)}),u=this.reduceConditionals(u,t);let f=new Map;a.forEach(d=>{if((d instanceof X||d instanceof it)&&d.isClosedBy!=null&&this.document!=null){let h=this.document.getText((d.endPosition?.index??0)+1,d.isClosedBy.startPosition?.index??0);d.runtimeContent=h}});for(let d=0;d<u.length;d++){let h=u[d],_=h.refId??"";if(f.set(_,1),(h instanceof X||h instanceof it)&&h.isComment==!1&&h.name?.name=="noparse"&&!(h instanceof qt)&&h.isClosingTag==!1){if(h.isClosedBy==null){h.pushError(Q.makeSyntaxError(P.TYPE_NO_PARSE_UNASSOCIATED,h,"Encountered noparse region without a closing tag. All noparse regions must be closed."));continue}let b=h.content;this.document!=null&&(b=this.document.getText((h.endPosition?.index??0)+1,h.isClosedBy?.startPosition?.index??0));let g=new qt,v=h.getParser();v!=null&&g.withParser(v),h.copyBasicDetailsTo(g),g.name=new yn,g.name.name="noparse",g.name.compound="noparse",g.content=jl.registerNoParseContent(b),g.originalNode=h,g.isClosedBy=h.isClosedBy,g.parent=h.parent,u[d]=g}}if(this.parentNode!=null&&(this.parentNode instanceof it||this.parentNode instanceof X)&&(this.parentNode.children=this.cleanNodes(u),this.parentNode.parent!=null&&this.parentNode.parent instanceof X)){let d=this.parentNode.parent.children,h=[];d.forEach(_=>{f.has(_.refId??"")==!1&&h.push(_)}),this.parentNode.parent.children=this.cleanNodes(h)}this.stackCount<=1&&(i=u)}return this.createdExecutionBranches.length>0&&this.createdExecutionBranches.forEach(s=>{s.head!=null&&(s.nodes=s.head.children)}),i}cleanNodes(e){let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i],a=s.refId;if(r.includes(a))break;t.push(s),r.push(a)}return t}findEndOfBranch(e,t,r){let i=[],s=r,a=null;for(let l=0;l<e.length;l++){let u=e[l];if((u instanceof X||u instanceof it)&&u.isOpenedBy!=null&&u.isOpenedBy==t){a=u;break}else i.push(u)}return{children:i,tail:a,offset:s}}reduceConditionals(e,t){let r=[];for(let i=0;i<e.length;i++){let s=e[i];if((s instanceof X||s instanceof it)&&s.isComment==!1&&s.isClosingTag==!1&&s.isClosedBy!=null)if((s.name?.compound??"")=="if"){let l=new Xt;l.index=s.index,l.chain.push(s.index),l.fragment=s.fragment,l.fragmentPosition=s.fragmentPosition,l.containsAnyFragments=s.containsAnyFragments,l.containsChildStructures=s.containsChildStructures;let u=s.startPosition?.offset??0,f=s.getFinalClosingTag(),d=(f.endPosition?.offset??0)+1;l.nodeContent=t.getText(u,d),this.parentNode!=null&&(l.parent=this.parentNode);let h=null,_=!0,b=0;for(;_;){if(b+=1,b>Zh.ForceBreakLimit){_=!1;break}if(s instanceof X||s instanceof it){let g=this.findEndOfBranch(e.slice(i+1),s,i),v=new Ic,O=g.tail;v.head=s,v.tail=O,v.nodes=this.cleanNodes(s.children);let E=(s.endPosition?.offset??0)+1,C=s.isClosedBy?.startPosition?.offset??0,q=t.getText(E,C);if(v.documentText=q,t.shouldParseChildDocument()&&(v.childDocument=Dt.childFromText(v.documentText,Ul(v.nodes))),O==null&&(O=v.head.isClosedBy),O!=null&&O.startPosition!=null&&(v.startPosition=O.startPosition),O!=null&&(v.index=O.index),v.nodes.length>0){let Z=v.nodes[v.nodes.length-1];Z.endPosition!=null&&(v.endPosition=Z.endPosition)}else O!=null&&O.endPosition!=null&&(v.endPosition=O.endPosition);if(this.createdExecutionBranches.push(v),l.logicBranches.push(v),O?.isClosingTag&&O.name?.compound=="if"){h=g.offset,_=!1;break}else O!=null&&l.chain.push(O.index),i=g.offset,O instanceof X&&(s=O)}else _=!1}if(l.logicBranches.length>0){let g=l.logicBranches[0],v=l.logicBranches[l.logicBranches.length-1];g.startPosition!=null&&(l.startPosition=g.startPosition),v.endPosition!=null&&(l.endPosition=v.endPosition)}if(r.push(l),h!=null&&h==e.length)break}else r.push(s);else r.push(s)}return r}},Gl=Zh;Gl.ForceBreakLimit=1e5;var gf=class{static associateRecursiveParent(e){for(let t=0;t<e.length;t++){let r=e[t];if(r instanceof jn){let i="*recursive "+r.name?.name;if(t-1<0){r.pushError(Q.makeSyntaxError(P.TYPE_RECURSIVE_NODE_INVALID_POSITION,r,"Unpaired recursive node. All recursive nodes must have a parent node introducing them."));continue}let s=null;for(let a=t-1;a>=0;a-=1){let l=e[a];if(!(l instanceof nt)&&l instanceof X&&l.isClosedBy!=null){if(r.isNestedRecursive){if(l.content.trim()==r.name?.name){s=l;break}}else if(l.runtimeContent.includes(i)&&J.substringCount(r.runtimeContent,"*recursive")==1){s=l;continue}else if(s!=null)break}}if(s==null)continue;r.isNestedRecursive?(s.hasRecursiveNode=!0,r.recursiveParent=s,s.recursiveReference=r):s.parent!=null?s.parent instanceof X&&(s.parent.hasRecursiveNode=!0,s.parent.recursiveReference=r,r.recursiveParent=s.parent):(s.hasRecursiveNode=!0,r.recursiveParent=s,s.recursiveReference=r)}}}};var zs=class{static getNearText(e){if(e instanceof ye)return e.name;if(e instanceof Pt)return e.value?.toString()??"";if(e instanceof gt)return e.value;if(e instanceof Ut)return e.name;if(e instanceof kt)return e.value;if(e instanceof Qn||e instanceof Dr||e instanceof Gn||e instanceof ur||e instanceof cr||e instanceof Ht||e instanceof Nr||e instanceof Nt||e instanceof Wt||e instanceof fr||e instanceof Rn||e instanceof Lr||e instanceof nn||e instanceof Or||e instanceof hr||e instanceof wn||e instanceof dr||e instanceof kn||e instanceof pr||e instanceof Wn||e instanceof yr||e instanceof gr||e instanceof mr||e instanceof Zr||e instanceof Hn||e instanceof On||e instanceof br||e instanceof hn||e instanceof Yn||e instanceof Jt||e instanceof $n||e instanceof _r||e instanceof Tr||e instanceof ei||e instanceof Kn||e instanceof Ln||e instanceof Rt||e instanceof Et||e instanceof rn||e instanceof mt||e instanceof Ni||e instanceof Zt||e instanceof Fr||e instanceof At)return e.content;let t="";return e instanceof X?e.originalNode!=null?t=e.originalNode.getContent():t=e.startPosition?.line.toString()??"":e.originalAbstractNode!=null?t=e.originalAbstractNode.rawContent():t=e.rawContent(),t.length>15&&(t=t.substr(0,-15)),t}};var Qs=class{};Qs.deferredCoreLibraries=["arr","array","str","string","method","math","sys","convert","scope","stopwatch","file","path","url","request","json","datetime"];var ct=class{};ct.ARR_PLUCK="pluck",ct.ARR_TAKE="take",ct.ARR_SKIP="skip",ct.ARR_MAKE="arr",ct.ARR_ORDERBY="orderby",ct.ARR_GROUPBY="groupby",ct.ARR_MERGE="merge",ct.QUERY_WHERE="where",ct.STRUCT_SWITCH="switch",ct.BITWISE_AND="bwa",ct.BITWISE_OR="bwo",ct.BITWISE_XOR="bxor",ct.BITWISE_NOT="bnot",ct.BITWISE_SHIFT_LEFT="bsl",ct.BITWISE_SHIFT_RIGHT="bsr",ct.operators=["pluck","take","arr","skip","orderby","groupby","merge","where","switch","bwa","bwo","bxor","bsl","bsr"];var It=class{constructor(){this.pathParser=new ci;this.tokens=[];this.createdVariables=[];this.createdModifierChains=[];this.createdLanguageOperators=[];this.createdArrays=[];this.tracedAssignments=[];this.mergedVariablePaths=[];this.mergedComponents=new Map;this.modifierNameMapping=new Map;this.isRealModifierSeparator=new Map;this.isRoot=!0;this.retriggerNonVirtualGroupMembers=[]}hasModifierConstruct(e){return this.modifierNameMapping.has(e)}getModifierConstruct(e){return this.modifierNameMapping.get(e)}isActualModifierSeparator(e){return this.isRealModifierSeparator.has(e)}isMergedVariableComponent(e){return this.mergedComponents.has(e)}getMergedVariable(e){return this.mergedComponents.get(e)}getMergedVariablePaths(){return this.mergedVariablePaths}getCreatedModifierChains(){return this.createdModifierChains}getCreatedLangaugeOperators(){return this.createdLanguageOperators}getCreatedArrays(){return this.createdArrays}getCreatedVariables(){return this.createdVariables}getRuntimeAssignments(){return this.tracedAssignments}getAssignedVariables(){let e=[],t=[];for(let r=0;r<this.tracedAssignments.length;r++){let i=this.tracedAssignments[r];i.target instanceof ye&&t.includes(i.target.name)==!1&&(t.push(i.target.name),e.push(i.target))}return e}getAssignedVariableNames(){let e=[];for(let t=0;t<this.tracedAssignments.length;t++){let r=this.tracedAssignments[t];r.target instanceof ye&&e.includes(r.target.name)==!1&&e.push(r.target.name)}return e}reset(){this.tokens=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.createdArrays=[],this.createdModifierChains=[],this.createdLanguageOperators=[],this.tracedAssignments=[],this.createdArrays=[],this.mergedVariablePaths=[],this.mergedComponents.clear(),this.modifierNameMapping.clear()}parse(e){return this.tokens=e,this.tokens=this.combineVariablePaths(this.tokens),this.tokens=this.createLanguageOperators(this.tokens),this.tokens=this.createLogicalGroups(this.tokens),this.tokens=this.associateMethodCalls(this.tokens),this.tokens=this.createTupleLists(this.tokens),this.tokens=this.createLibraryInvocations(this.tokens),this.tokens=this.associateModifiers(this.tokens),this.tokens=this.createNullCoalescenceGroups(this.tokens),this.tokens=this.correctTypes(this.tokens),this.tokens=this.createTernaryGroups(this.tokens),this.tokens=this.applyOperationOrder(this.tokens),this.validateNeighboringOperators(this.tokens),this.tokens=this.createLogicGroupsToRemoveMethodInvocationAmbiguity(this.tokens),this.tokens=this.createLogicGroupsToResolveOperatorAmbiguity(this.tokens),this.validateNoDanglingLogicGroupEnds(this.tokens),this.isRoot&&(this.tokens=this.insertAutomaticStatementSeparators(this.tokens),this.retriggerNonVirtualGroupMembers.length>0&&this.retriggerNonVirtualGroupMembers.forEach(t=>{this.markAllNonVirtualAsListGroupMember(t)})),this.createSemanticGroups(this.tokens)}setIsRoot(e){return this.isRoot=e,this}validateNeighboringOperators(e){let t=e.length;for(let r=0;r<t;r++){let i=e[r];if(It.isOperatorType(i)){if(r+1>=t){i.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_OPERATOR,i,"Unexpected operator while parsing input text."));return}let s=e[r+1];if(It.isOperatorType(s)){s.pushError(Q.makeSyntaxError(P.TYPE_OPERATOR_INVALID_ON_RIGHT,s,"Unexpected operator while parsing input text."));continue}}}}static isAssignmentOperator(e){return e instanceof fr||e instanceof dr||e instanceof On||e instanceof pr||e instanceof hr||e instanceof Lr}static isOperatorType(e){return e instanceof fr||e instanceof dr||e instanceof On||e instanceof pr||e instanceof hr||e instanceof Lr||e instanceof ei||e instanceof Nr||e instanceof Yn||e instanceof Ht||e instanceof $n||e instanceof Dr||e instanceof Kn||e instanceof Fr||e instanceof Rn||e instanceof kn||e instanceof Or||e instanceof Wn||e instanceof wn||e instanceof nn||e instanceof hn||e instanceof Hn||e instanceof Zr||e instanceof mr||e instanceof gr||e instanceof Tr||e instanceof _r||e instanceof yr||e instanceof br}markAllNonVirtualAsListGroupMember(e){e.forEach(t=>{if(t instanceof Be||t instanceof zn||t instanceof ni){t.start!=null&&t.start.isVirtual==!1&&(t.start.isListGroupMember=!0),t.end!=null&&t.end.isVirtual==!1&&(t.end.isListGroupMember=!0),t.scopeOperator!=null&&(t.scopeOperator.isListGroupMember=!0),t.nodes.forEach(r=>{this.markAllNonVirtualAsListGroupMember([r])});return}else t instanceof xt&&(t.separatorToken!=null&&t.separatorToken.isVirtual==!1&&(t.separatorToken.isListGroupMember=!0),this.markAllNonVirtualAsListGroupMember(t.nodes));t.isVirtual==!1&&(t.isListGroupMember=!0),t.originalAbstractNode!=null&&t.originalAbstractNode!=t&&this.markAllNonVirtualAsListGroupMember([t.originalAbstractNode])})}markAllNonVirtualAsSwitch(e){e.forEach(t=>{if(t instanceof Be||t instanceof zn||t instanceof ni){t.start!=null&&t.start.isVirtual==!1&&(t.start.isSwitchGroupMember=!0),t.end!=null&&t.end.isVirtual==!1&&(t.end.isSwitchGroupMember=!0),t.scopeOperator!=null&&(t.scopeOperator.isSwitchGroupMember=!0),t.nodes.forEach(r=>{this.markAllNonVirtualAsSwitch([r])});return}else t instanceof xt&&(t.separatorToken!=null&&t.separatorToken.isVirtual==!1&&(t.separatorToken.isSwitchGroupMember=!0),this.markAllNonVirtualAsSwitch(t.nodes));t.isVirtual==!1&&(t.isSwitchGroupMember=!0),t.originalAbstractNode!=null&&t.originalAbstractNode!=t&&this.markAllNonVirtualAsSwitch([t.originalAbstractNode])})}validateNoDanglingLogicGroupEnds(e){e.forEach(t=>{t instanceof Et&&t.pushError(Q.makeSyntaxError(P.TYPE_LOGIC_GROUP_NO_START,t,"Unexpected [T_LOGIC_END] while parsing input text."))})}isValidModifierValue(e){return e instanceof kt||e instanceof ye||e instanceof ur||e instanceof cr||e instanceof Gn||e instanceof Pt||e instanceof gt}wrapNumberInVariable(e){let t=new ye;return t.startPosition=e.startPosition,t.endPosition=e.endPosition,t.name=e.value?.toString()??"",t.content=e.value?.toString()??"",t.originalAbstractNode=e,t.refId=e.refId,t.modifierChain=e.modifierChain,t.index=e.index,this.createdVariables.push(t),t}wrapArithmeticModifier(e,t){let r=new Ut;return r.startPosition=e.startPosition,r.endPosition=e.endPosition,r.originalAbstractNode=e,r.content=t,r.name=t,r.index=e.index,r}combineVariablePaths(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i],a=t.length;if(s instanceof mt){if(a==0){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_BRANCH_SEPARATOR_FOR_VARCOMBINE,s,"Unexpected [T_BRANCH_SEPARATOR] while parsing input text."));continue}if(i+1>r){let f="";if(i>0){let d=e[i-1];f=zs.getNearText(d)}s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_PARSING_BRANCH_GROUP,s,'Unexpected end of input while parsing input text near "'+f+zs.getNearText(s)+'".'));continue}let l=t[a-1],u=e[i+1];if(u instanceof Pt&&rt.distance(l,u)==1&&(u=this.wrapNumberInVariable(u)),l instanceof ye&&u instanceof ye&&rt.distance(l,u)==1){t.pop(),rt.mergeVarContentRight(":",s,u),rt.mergeVarRight(l,u),t.push(u),this.createdVariables.push(u),this.mergedVariablePaths.push(u),this.mergedComponents.set(s,u),this.mergedComponents.set(l,u),this.mergedComponents.set(u,u),i+=1;continue}else{t.push(s);continue}}else if(s instanceof gt&&a>0){if(i+1>=r){t.push(s);continue}let l=t[a-1],u=e[i+1];if(l instanceof ye&&u instanceof ye&&rt.distance(l,s)<=1&&rt.distance(s,u)<=1){t.pop(),i+=1;continue}else t.push(s)}else if(s instanceof nn&&a>0){let l=t[a-1],u=e[i+1];if(l instanceof ye&&(u instanceof ye||u instanceof $n)){let f=rt.distance(l,s),d=rt.distance(s,u);f<=1&&d<=1?(l.endPosition=u.endPosition,this.mergedComponents.set(s,l),this.mergedComponents.set(l,l),this.mergedComponents.set(u,l),i+=1):t.push(s)}else t.push(s)}else t.push(s)}return t.forEach(i=>{i instanceof ye&&!i.name.trim().startsWith("[")&&(i.variableReference=this.pathParser.parse(i.name),i.mergeErrors(this.pathParser.getAntlersErrors()))}),t}convertVarNodeToOperator(e){let t=new Nr;return t.content=e.name,t.startPosition=e.startPosition,t.endPosition=e.endPosition,t.originalAbstractNode=e,e.convertedToOperator=!0,this.createdLanguageOperators.push(t),t}convertOperatorToVarNode(e){let t=new ye;return t.startPosition=e.startPosition,t.endPosition=e.endPosition,t.content=e.content,t.name=e.content,t.originalAbstractNode=e,this.createdVariables.push(t),t}createLanguageOperators(e){let t=e.length;for(let r=0;r<t;r++){let i=e[r];if(i instanceof ye){if(i.name.includes(V.Punctuation_FullStop)){let s=i.name.split(V.Punctuation_FullStop);if(ct.operators.includes(s[0])||Qs.deferredCoreLibraries.includes(s[0])){e[r]=this.convertVarNodeToOperator(i);continue}}if(ct.operators.includes(i.name)){e[r]=this.convertVarNodeToOperator(i);continue}}if(i instanceof Nr){if(r+1>=t){e[r]=this.convertOperatorToVarNode(i);continue}if(e[r+1]instanceof Wt){e[r]=this.convertOperatorToVarNode(i);continue}}}return e}createLogicalGroups(e){let t=[],r=e.length,i=[];for(let a=0;a<r;a++){let l=e[a];if(l instanceof Ht){let u=this.countTypeRight(e,a,Ht);if(i.length==0&&e.length==u){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_LOGIC_NEGATION_OPERATOR,l,"Unexpected [T_LOGIC_INVERSE] while parsing input text."));continue}if(a>0&&i.length>0){let h=i[i.length-1];if(h instanceof Pt||h instanceof Et||h instanceof Be){if(h instanceof Be&&h.start instanceof Ht){h.start.pushError(Q.makeSyntaxError(P.TYPE_FACTORIAL_MATERIALIZED_BOOL_DETECTED,h.start,"[T_AOP_FACTORIAL] operand will always materialize boolean type."));continue}let _=new Ni;_.startPosition=l.startPosition,_.endPosition=l.endPosition,_.content="!".repeat(u),_.originalAbstractNode=l,_.repeat=u,i.push(_),u>0&&(a+=u-1);continue}}if(u%2==0){a+=u-1;continue}let f=e[a+u];if(f instanceof Rt){let h=a+u+1;if(h>=r){f.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_NEGATION_OFFSET,f,"Unexpected end of input while parsing input text."));continue}let _=this.findLogicalGroupEnd(e[a+u],e.slice(h));if(_.found){let b=_.logicalGroup,g=new Be;g.start=l,g.end=b,g.nodes.push(l),g.nodes.push(b),g.startPosition=l.startPosition,g.endPosition=b.endPosition,i.push(g),a+=_.skipCount+u}continue}let d=this.resolveValueRight(e,a);d.value!=null&&i.push(d.value),a+=d.negationCount}else i.push(l)}let s=i.length;for(let a=0;a<s;a++){let l=i[a];if(l instanceof Rt){if(a+1>=s){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END_DUE_TO_NEGATION,l,"Unexpected end of input while parsing input text."));continue}let u=this.findLogicalGroupEnd(l,i.slice(a+1));u.found&&u.logicalGroup!=null&&t.push(u.logicalGroup),a+=u.skipCount}else if(l instanceof Ni){if(t.length==0){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_FACTORIAL_WHILE_CREATING_GROUPS,l,"Unexpected [T_AOP_FACTORIAL] while parsing input text."));continue}let u=t[t.length-1];if(!(u instanceof Be)&&!(u instanceof Pt)){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_FACTORIAL_OPERAND,l,"Unexpected left operand encountered for [T_AOP_FACTORIAL] while parsing input text."));continue}u=t.pop();let f=new Be;f.startPosition=u.startPosition,f.endPosition=l.endPosition,f.originalAbstractNode=l,f.nodes.push(u),f.nodes.push(l),t.push(f)}else t.push(l)}return t}makeArgGroup(e){let t=new Ls,r=e.length;for(let s=0;s<r;s++){let a=e[s];if(this.isOperand(a)==!1){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_TOKEN_WHILE_PARSING_METHOD,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing argument group."));continue}let l=null;if(s+1<r&&(l=e[s+1]),l==null||l instanceof Nt){t.args.push(e[s]),s+=1;continue}else if(l instanceof mt){if(s+2>=r){a.pushError(Q.makeSyntaxError(P.TYPE_ARG_UNEXPECTED_NAMED_ARGUMENT,a,"Unexpected end of input while parsing named argument."));continue}let u=e[s+2],f=new ml;f.startPosition=a.startPosition,f.endPosition=u.endPosition,f.content=a.content+u.content,f.name=a,f.value=u,a instanceof ye||a.pushError(Q.makeSyntaxError(P.TYPE_INVALID_NAMED_ARG_IDENTIFIER,a,"Invalid type ["+te.getPrettyTypeName(a)+"] supplied for named argument name.")),t.hasNamedArguments=!0,t.numberOfNamedArguments+=1,t.args.push(f),s+3<r&&e[s+3]instanceof Nt?s+=3:s+=2;continue}}let i=!1;return t.args.forEach(s=>{s instanceof ml?i=!0:i&&s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_UNNAMED_METHOD_ARGUMENT,s,"Unnamed arguments are not allowed to appear after a named argument."))}),t.args.length>0&&(t.startPosition=t.args[0].startPosition,t.endPosition=t.args[t.args.length-1].endPosition),t}cleanVariableForMethodInvocation(e){(e.name.startsWith(":")||e.name.startsWith("."))&&(e.name=e.name.substr(1),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(1),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(1)),e.startPosition!=null&&(e.startPosition.offset+=1,e.startPosition.char+=1))}reduceVariableReferenceForObjectAccessor(e){let t=e.variableReference?.pathParts.pop(),r=t.name,i=r.length+1;return e.name=e.name.substr(0,-i),e.variableReference!=null&&(e.variableReference.originalContent=e.variableReference.originalContent.substr(0,-i),e.variableReference.normalizedReference=e.variableReference.normalizedReference.substr(0,-i),e.variableReference.pathParts[e.variableReference.pathParts.length-1].isFinal=!0),e.endPosition!=null&&(e.endPosition.offset-=i,e.endPosition.char-=i),{accessor:r,accessorLen:i}}associateMethodCalls(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i],a=null,l=null;if(t.length>0&&(a=t[t.length-1]),i+1<r&&(l=e[i+1]),s instanceof ye&&l instanceof Be&&a!=null&&(this.isProperMethodChainTargetStrict(a)||a instanceof mt)){let u=l,f=[];u.nodes.length>0&&(u.nodes[0]instanceof xt?f=u.nodes[0].nodes:f=u.nodes);let d=new At;if(d.startPosition=s.startPosition,a instanceof mt){let h=t.pop();d.startPosition=h.startPosition}this.cleanVariableForMethodInvocation(s),d.endPosition=u.endPosition,d.args=this.makeArgGroup(f),d.method=s,a.methodTarget=d,a instanceof ye&&a.mergeRefName.length>0&&(a.name=rt.getUnrefName(a.mergeRefName)),t.push(d),i+=1;continue}else if(s instanceof Be&&a instanceof ye&&a.variableReference!=null&&a.variableReference.pathParts.length>=2){let u=[];if(s.nodes.length>0&&(s.nodes[0]instanceof xt?u=s.nodes[0].nodes:u=s.nodes),a.variableReference.pathParts[0]instanceof tn&&Qs.deferredCoreLibraries.includes(a.variableReference.pathParts[0].name)){let b=t.pop(),g=new Ii;g.startPosition=b.startPosition,g.endPosition=s.endPosition,g.content=b.content,g.originalAbstractNode=s;let O=(b.variableReference?.pathParts.shift()).name,E=b.variableReference?.implodePaths();g.libraryName=O,g.methodName=E,g.arguments=this.makeArgGroup(u),t.push(g),i+=1;continue}let f=this.reduceVariableReferenceForObjectAccessor(a),d=new At;d.startPosition=s.startPosition,d.endPosition=s.endPosition,a.methodTarget=d,a instanceof ye&&a.mergeRefName.length>0&&(a.name=rt.getUnrefName(a.mergeRefName)),s.start!=null&&(s.start.isPartOfMethodChain=!0),s.end!=null&&(s.end.isPartOfMethodChain=!0);let h=new ye;h.name=f.accessor,h.isPartOfMethodChain=!0;let _=this.makeArgGroup(u);if(d.startPosition!=null&&(d.startPosition.offset-=f.accessorLen,d.startPosition.char-=f.accessorLen),d.method=h,d.args=_,J.isNumeric(a.name)){let b=t.pop();t.push(this.convertOperatorToVarNode(b))}t.push(d);continue}else if(s instanceof ye&&a instanceof At){if(this.cleanVariableForMethodInvocation(s),i+1>r){s.pushError(Q.makeSyntaxError(P.TYPE_METHOD_CALL_MISSING_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let u=e[i+1];if(!(u instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+te.getPrettyTypeName(u)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let f=u,d=[];f.nodes.length>0&&(f.nodes[0]instanceof xt?d=f.nodes[0].nodes:d=f.nodes);let h=new At;h.startPosition=s.startPosition,h.endPosition=f.endPosition,h.args=this.makeArgGroup(d),h.method=s,a.methodTarget=h,t.push(h),i+=1;continue}else if(s instanceof mt&&a instanceof At){if(i+1>r){s.pushError(Q.makeSyntaxError(P.TYPE_METHOD_CALL_MISSING_METHOD,s,"Unexpected end of input while parsing method call."));continue}let u=e[i+1];if(i+2>r){s.pushError(Q.makeSyntaxError(P.TYPE_METHOD_CALL_MISSING_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let f=e[i+2];if(!(f instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+te.getPrettyTypeName(f)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let d=f,h=[];d.nodes.length>0&&(d.nodes[0]instanceof xt?h=d.nodes[0].nodes:h=d.nodes);let _=new At;_.startPosition=s.startPosition,_.endPosition=f.endPosition,_.args=this.makeArgGroup(h),_.method=u,a.methodTarget=_,t.push(_),i+=2;continue}else if(s instanceof At){if(i+1>r){s.pushError(Q.makeSyntaxError(P.TYPE_METHOD_CALL_MISSING_METHOD,s,"Unexpected end of input while parsing method call."));continue}let u=e[i+1];if(i+2>r){s.pushError(Q.makeSyntaxError(P.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected end of input while parsing method call."));continue}let f=e[i+2];if(!(f instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_INVALID_METHOD_CALL_ARG_GROUP,s,"Unexpected ["+te.getPrettyTypeName(f)+"] while parsing [T_METHOD_CALL]; expecting [T_ARG_GROUP]."));continue}let d=f,h=[];d.nodes.length>0&&(d.nodes[0]instanceof xt?h=d.nodes[0].nodes:h=d.nodes);let _=this.makeArgGroup(h);if(a instanceof ye&&Qs.deferredCoreLibraries.includes(a.name)){let b=t.pop(),g=new Ii;g.startPosition=b.startPosition,g.endPosition=d.endPosition,g.libraryName=b.name,g.methodName=u.name,g.content=g.libraryName+"->"+g.methodName,g.arguments=_,a.libraryTarget=g,t.push(g),i+=2;continue}s.method=u,s.args=_,t.length>0&&(t[t.length-1].methodTarget=s),i+=2,t.push(s);continue}else t.push(s)}return t}convertVariableToStringNode(e){let t=new gt;return t.content=e.name,t.value=e.name,t.originalAbstractNode=e,t.startPosition=e.startPosition,t.endPosition=e.endPosition,t.index=e.index,t}createTupleLists(e){let t=e.length,r=[];for(let i=0;i<t;i++){let s=e[i];if(s instanceof Qn){if(s.isListGroupMember=!0,i+1>=t){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_PARSING_TUPLE_LIST,s,"Unexpected end of input while parsing tuple list."));continue}let a=e[i+1];if(!(a instanceof Be)){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_TYPE_FOR_TUPLE_LIST,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing tuple list."));continue}let l=a;if(this.markAllNonVirtualAsListGroupMember([l]),this.retriggerNonVirtualGroupMembers.push([l]),l.nodes.length==0){l.pushError(Q.makeSyntaxError(P.TYPE_MISSING_BODY_TUPLE_LIST,l,"Missing tuple list body while parsing tuple list."));continue}let f=l.nodes.shift(),d=f.nodes.length,h=[];for(let g=0;g<d;g++){let v=f.nodes[g];if(!(v instanceof Nt)){let O=!1;if(v instanceof ye&&(v.variableReference==null&&(O=!0),v.variableReference!=null&&v.variableReference.pathParts.length>1&&(O=!0),v.name.trim().length==0&&(O=!0)),O||!(v instanceof ye)){l.pushError(Q.makeSyntaxError(P.TYPE_INVALID_TUPLE_LIST_NAME_TYPE,l,"Invalid ["+te.getPrettyTypeName(v)+"] name type found while parsing tuple list."));continue}let E=v;h.push(this.convertVariableToStringNode(E))}}let _=h.length;if(_==0){l.pushError(Q.makeSyntaxError(P.TYPE_INVALID_MANIFESTED_NAME_GROUP,l,"Invalid Name expression produced an invalid name group while parsing tuple list."));continue}let b=new ti;this.createdArrays.push(b),b.startPosition=s.startPosition,b.endPosition=s.endPosition,l.nodes.forEach(g=>{if(!(g instanceof xt)){g.pushError(Q.makeSyntaxError(P.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE_GROUP,g,"Invalid ["+te.getPrettyTypeName(g)+"] name type found while parsing tuple list value expression."));return}let v=g,O=new ti;this.createdArrays.push(O),O.startPosition=v.startPosition;let E=[];for(let C=0;C<d;C++){let q=v.nodes[C];if(typeof q>"u"||q==null)break;if(!(q instanceof Nt)){if(this.isOperand(q)==!1){q.pushError(Q.makeSyntaxError(P.TYPE_INVALID_TUPLE_LIST_VALUE_TYPE,q,"Unexpected ["+te.getPrettyTypeName(q)+"]  while parsing tuple list value."));continue}E.push(q)}}for(let C=0;C<_&&!(C>E.length);C++){let q=E[C],Z=new Uo;Z.startPosition=q.startPosition,Z.endPosition=q.endPosition,Z.name=h[C],Z.value=q,O.nodes.push(Z),b.endPosition=q.endPosition,O.endPosition=q.endPosition}b.nodes.push(O)}),r.push(b),i+=1;continue}else r.push(s)}return e}makeOrderGroup(e){let t=[],r=e.length,i=0;for(let s=0;s<r;s++){let a=e[s],l=null;if(s+1<r&&(l=e[s+1]),s>0&&(l==null||l instanceof Nt)){i+=1;let u=new Vo;u.order=i,u.name=e[s-1],u.directionNode=a,this.isOperand(u.name)==!1&&u.name.pushError(Q.makeSyntaxError(P.TYPE_INVALID_ORDER_BY_NAME_VALUE,u.name,"Invalid value or expression supplied for order by name.")),this.isOperand(u.directionNode)==!1&&u.directionNode.pushError(Q.makeSyntaxError(P.TYPE_INVALID_ORDER_BY_SORT_VALUE,u.directionNode,"Invalid value or expression supplied for order by direction.")),u.startPosition=u.name.startPosition,u.endPosition=u.directionNode.endPosition,t.push(u),s+=1;continue}}return t}getValues(e){let t=new ws,r=e.length,i=[];for(let s=0;s<r;s++){let a=e[s],l=null;if(s+1<r&&(l=e[s+1]),l==null||l instanceof Nt){i.push(a),s+=1;continue}}return t.values=i,t}createLibraryInvocations(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i];if(s instanceof Nr)if(s.content.includes(".")){let a=s.content.split("."),l=a.shift(),u=a.join("."),f=new Ii;if(f.startPosition=s.startPosition,f.endPosition=s.endPosition,f.content=s.content,f.libraryName=l,f.methodName=u,f.originalAbstractNode=s,i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_ARG_GROUP,s,"Unexpected end of input while parsing argument group."));continue}if(!(e[i+1]instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_EXPECTING_ARGUMENT_GROUP,s,"Unexpected token while parsing method call. Expecting [T_ARG_SEPARATOR] got ["+te.getPrettyTypeName(s)+"]."));continue}let d=e[i+1],h=null;if(d.nodes.length>0){let _=d.nodes[0];h=this.makeArgGroup(_.nodes)}h==null&&(h=new Ls,h.startPosition=d.startPosition,h.endPosition=d.endPosition,h.originalAbstractNode=d),f.arguments=h,t.push(f),i+=1;continue}else if(s.content==ct.ARR_ORDERBY){if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_PARSING_ORDER_GROUP,s,"Unexpected end of input while parsing order group."));continue}let a=e[i+1];if(!(a instanceof Be)){a.pushError(Q.makeSyntaxError(P.TYPE_EXPECTING_ORDER_GROUP_FOR_ORDER_BY_OPERAND,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing order group."));continue}let u=a.nodes;u[0]instanceof xt&&(u=u[0].nodes);let f=this.makeOrderGroup(u);f.length==0&&s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EMPTY_DIRECTION_GROUP,s,"Unexpected empty [T_DIRECTION_GROUP]. Must have at least one order clause, and each property must have a direction specified."));let d=new Gi;if(d.orderClauses=f,f.length>0){f[0].directionNode!=null&&(d.startPosition=f[0].directionNode.startPosition);let h=f[f.length-1].directionNode;h!=null&&(d.endPosition=h.endPosition)}t.push(s),t.push(d),i+=1;continue}else if(s.content==ct.ARR_GROUPBY){if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_GROUP_BY,s,"Unexpected end of input while parsing group by clause."));continue}let a=e[i+1];if(a instanceof ni||a instanceof zn){a.pushError(Q.makeSyntaxError(P.TYPE_GROUP_BY_SCOPED_GROUP_MUST_BE_ENCLOSED,a,"Type ["+te.getPrettyTypeName(a)+"] must be enclosed with parenthesis to be used with groupby."));continue}if(!(a instanceof Be)){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_TOKEN_FOR_GROUP_BY,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing group by."));continue}let u=a.nodes;u[0]instanceof xt&&(u=u[0].nodes);let f=this.getValues(u);if(t.push(s),t.push(f),i+2<r&&i+3<r){let d=e[i+2],h=e[i+3];if(rt.isVariableMatching(d,Ke.ScopeAs))if(h instanceof gt){f.isNamedNode=!0,f.parsedName=h,i+=3;continue}else h.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_GROUP_BY_AS_ALIAS_TYPE,h,"Expecting [T_STRING] for group by collection alias; got ["+te.getPrettyTypeName(h)+"]."))}i+=1;continue}else if(s.content==ct.STRUCT_SWITCH){if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_SWITCH_GROUP,s,"Unexpected end of input while parsing [T_SWITCH_GROUP]."));continue}let a=e[i+1];if(!(a instanceof zn)){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_TOKEN_FOR_SWITCH_GROUP,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing [T_SWITCH_GROUP]."));continue}let l=a;if(this.markAllNonVirtualAsSwitch([a]),l.scope==null||!(l.scope instanceof Be)){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_SWITCH_START_VALUE,l,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let u=l.scope;if(u.nodes.length==0||!(u.nodes[0]instanceof xt)){l.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,l,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let f=u.nodes[0];if(this.markAllNonVirtualAsSwitch([u]),f.nodes.length==0||!(f.nodes[0]instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}this.markAllNonVirtualAsSwitch([s]),this.markAllNonVirtualAsSwitch(f.nodes);let d=f.nodes;if(l.nodes.length==0&&s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP].")),!(u.nodes[0]instanceof xt)){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_SWITCH_START_VALUE_NO_VALUE,s,"Unexpected input while parsing [T_SWITCH_GROUP]."));continue}let _=u.nodes[0];this.markAllNonVirtualAsSwitch(_.nodes);let b=_.nodes,g=new Wi,v=new Be;v.nodes=d,v.startPosition=v.nodes[0].startPosition,v.endPosition=v.nodes[v.nodes.length-1].endPosition;let O=new Os;O.condition=v;let E=new Be;E.nodes.push(b.shift()),E.startPosition=E.nodes[0].startPosition,E.endPosition=E.nodes[E.nodes.length-1].endPosition,O.expression=E,O.startPosition=O.condition.startPosition,O.endPosition=O.expression.nodes[O.expression.nodes.length-1].endPosition,b.shift(),g.cases.push(O);let C=b.length;if(C>0){if(!(b[0]instanceof Be)){s.pushError(Q.makeSyntaxError(P.TYPE_PARSER_INVALID_SWITCH_TOKEN,s,"Invalid ["+te.getPrettyTypeName(b[0])+"] while parsing case statement."));continue}for(let q=0;q<C;q++){let Z=b[q],ue=null;if(Z instanceof Nt){Z.isSwitchGroupMember=!0;continue}if(q+1<C&&(ue=b[q+1]),ue instanceof Zt){ue.isSwitchGroupMember=!0;let de=new Os;de.condition=Z,this.markAllNonVirtualAsSwitch([de.condition]);let Ue=new Be;if(Ue.nodes.push(b[q+2]),Ue.startPosition=Ue.nodes[0].startPosition,Ue.endPosition=Ue.nodes[Ue.nodes.length-1].endPosition,de.expression=Ue,this.markAllNonVirtualAsSwitch([Ue]),de.startPosition=de.condition.startPosition,de.endPosition=de.expression.nodes[de.expression.nodes.length-1].endPosition,g.cases.push(de),q+3<C&&!(b[q+3]instanceof Nt)){b[q+3].pushError(Q.makeSyntaxError(P.TYPE_PARSER_INVALID_SWITCH_TOKEN,b[q+3],"Invalid ["+te.getPrettyTypeName(b[q+3])+"] while parsing case statement; expecting [T_ARG_SEPARATOR]."));continue}b[q+3].isSwitchGroupMember=!0,q+=2;continue}}}t.push(new Gn),t.push(s),t.push(g),i+=1;continue}else if(s.content==ct.ARR_MAKE){if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_ARR_MAKE_MISSING_TARGET,s,"Missing target variable for arr operator."));continue}let a=e[i+1];if(!(a instanceof Be)){a.pushError(Q.makeSyntaxError(P.TYPE_ARR_MAKE_UNEXPECTED_TYPE,a,"Unexpected ["+te.getPrettyTypeName(a)+"] while parsing array."));continue}let l=a instanceof zn,u=a,f=u.nodes;if(f[0]instanceof xt&&(f=f[0].nodes),l){let b=a;f.unshift(new Zt),f.unshift(b.scope)}let d=this.getArrayValues(f),h=new ti;h.startPosition=s.startPosition;let _=d.values.length;_>0?h.endPosition=d.values[_-1].endPosition:h.endPosition=s.endPosition,u.end!=null&&(h.endPosition=u.end.endPosition),h.nodes=d.values,this.createdArrays.push(h),t.push(h),i+=1}else t.push(s);else t.push(s)}return t}getArrayValues(e){let t=new ws,r=e.length,i=[];for(let s=0;s<r;s++){let a=e[s];if(a instanceof Nt){a.pushError(Q.makeSyntaxError(P.TYPE_ARR_UNEXPECT_ARG_SEPARATOR,a,"Unexpected [T_ARG_SEPARATOR] while parsing array."));continue}if(a instanceof Zt){if(s==0){a.pushError(Q.makeSyntaxError(P.TYPE_ARR_KEY_PAIR_MISSING_KEY,a,"Missing key for key/value pair while parsing array."));continue}else if(e[s-1]instanceof Nt){a.pushError(Q.makeSyntaxError(P.TYPE_ARR_KEY_PAIR_MISSING_KEY,a,"Missing key for key/value pair while parsing array."));continue}}let l=null;if(s+1<r&&(l=e[s+1]),l instanceof Zt){if(s+2>=r){l.pushError(Q.makeSyntaxError(P.TYPE_ARR_MAKE_MISSING_ARR_KEY_PAIR_VALUE,l,"Missing key/pair value while parsing array."));continue}let u=e[s+2],f=new Uo;if(this.isValidArrayKeyNode(a)==!1){a.pushError(Q.makeSyntaxError(P.TYPE_ARR_KEY_PAIR_INVALID_KEY_TYPE,a,"Invalid ["+te.getPrettyTypeName(a)+"] type for key/value key."));continue}f.name=a,f.value=u,f.startPosition=a.startPosition,f.endPosition=u.endPosition,i.push(f),s+=3;continue}if(l==null||l instanceof Nt){let u=new Uo;u.value=a,u.startPosition=a.startPosition,u.endPosition=a.endPosition,i.push(u),s+=1;continue}}return t.values=i,t}isValidArrayKeyNode(e){return e instanceof Pt||e instanceof gt}associateModifiers(e){let t=[],r=e.length,i=null;for(let s=0;s<r;s++){let a=e[s];if(a instanceof Jt){let l=t.length;if(l==0){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_MODIFIER_SEPARATOR,a,"Unexpected [T_MODIFIER_SEPARATOR] while parsing input text."));continue}if(this.isRealModifierSeparator.set(a,!0),i=t[l-1],i.modifierChain==null&&(i.modifierChain=new Mo,i.modifierChain.modifierTarget=i,this.createdModifierChains.push(i.modifierChain)),s+1>=r){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_DETAILS,a,"Unexpected end of input while preparing to gather modifier details."));continue}let u=this.scanToEndOfModifier(e.slice(s+1)),f=u.length;if(f>1&&u[1]instanceof mt){this.isRealModifierSeparator.set(u[1],!0);let h=u[0];h instanceof Rn?u[0]=this.wrapArithmeticModifier(h,"add"):h instanceof nn?u[0]=this.wrapArithmeticModifier(h,"subtract"):h instanceof kn?u[0]=this.wrapArithmeticModifier(h,"divide"):h instanceof wn?u[0]=this.wrapArithmeticModifier(h,"multiply"):h instanceof Wn&&(u[0]=this.wrapArithmeticModifier(h,"mod"))}if(f==0){a.pushError(Q.makeSyntaxError(P.TYPE_UNSET_MODIFIER_DETAILS,a,"Invalid or missing modifier details."));continue}if(!(u[0]instanceof Ut)){a.pushError(Q.makeSyntaxError(P.TYPE_MODIFIER_NAME_NOT_START_OF_DETAILS,a,"Invalid ["+te.getPrettyTypeName(u[0])+"]; expecting [T_MODIFIER_NAME]"));continue}let d=this.createModifier(u);d.nameNode!=null&&this.modifierNameMapping.set(d.nameNode,d),s+=f,i.modifierChain.modifierChain.push(d),i.modifierChain.updateValues();continue}else t.push(a)}return t}createNullCoalescenceGroups(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i];if(s instanceof Kn){let a=t.pop();if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_NULL_COALESCENCE_GROUP,s,"Unexpected end of input while parsing input text."));continue}let l=e[i+1],u=new Bo;u.left=a,u.right=l,t.push(u),i+=1;continue}else t.push(s)}return t}isOperand(e){return e instanceof ye||e instanceof Be||e instanceof gt||e instanceof Pt||e instanceof cr||e instanceof Gn||e instanceof ur||e instanceof Ii||e instanceof Gi||e instanceof ws||e instanceof Wi||e instanceof ti||e instanceof Qn||e instanceof Zt}isProperMethodChainTargetStrict(e){return e instanceof Be||e instanceof gt||e instanceof Pt||e instanceof cr||e instanceof Gn||e instanceof ur||e instanceof Ii||e instanceof Gi||e instanceof ws||e instanceof Wi||e instanceof ti}assertOperandRight(e,t){if(t+1>e.length-1)return e[t].pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_END_OF_INPUT,e[t],"Unexpected end of input; expecting operand for operator "+te.getPrettyTypeName(e[t])+' near "'+zs.getNearText(e[t])+'".')),!1;let r=e[t+1];return this.isOperand(r)?!0:(r.pushError(Q.makeSyntaxError(P.TYPE_EXPECTING_OPERAND,e[t],"Expecting operand, found "+te.getPrettyTypeName(r)+' near "'+zs.getNearText(e[t])+'".')),!1)}resolveValueRight(e,t){let r=null,i=0,s=null;if(e.length>0){let a=!0;for(;a;){let l=e[t];if(l instanceof Ht){s=l,i+=1,t+=1,a=!1;continue}else if(this.isOperand(l)){r=l,a=!1;break}else{a=!1;break}}}if(i%2!=0){let a=new Be;return a.nodes=[],s!=null&&r!=null&&(a.nodes.push(s),a.nodes.push(r)),{value:a,negationCount:i}}return{value:r,negationCount:i}}correctTypes(e){let t=[];return e.forEach(r=>{if(r instanceof rn){let i=new mt;i.startPosition=r.startPosition,i.endPosition=r.endPosition,i.originalAbstractNode=r,t.push(i)}else if(r instanceof kt){let i=new ye;i.name=r.value,i.startPosition=r.startPosition,i.endPosition=r.endPosition,i.modifierChain=r.modifierChain,i.originalAbstractNode=r,this.createdVariables.push(i),t.push(i)}else t.push(r)}),t}createTernaryGroups(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i];if(s instanceof Ln){let a=this.seek(mt,i+1);if(a.node?.originalAbstractNode!=null&&a.node.originalAbstractNode instanceof rn&&(a.node.originalAbstractNode.isTenaryBranchSeparator=!0),a.found==!1){s.pushError(Q.makeSyntaxError(P.TYPE_TERNARY_EXPECTING_BRANCH_SEPARATOR,s,"Unexpected end of input; expecting [T_BRANCH_SEPARATOR]."));continue}let l=this.collectUntil(t);t=l.tokens;let u=l.collectedTokens[0],f=a.foundAt??0;if(f>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP,s,"Unexpected end of input while parsing ternary group."));continue}let d=e.slice(i+1,f);if(d.length>1||d.length==0){s.pushError(Q.makeSyntaxError(P.TYPE_TERNARY_UNEXPECTED_EXPRESSION_LENGTH,s,"Unexpected number of operations within ternary truth branch."));continue}let h=d[0],_=(a.foundAt??0)+1;if(_>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_TERNARY_GROUP_FALSE_BRANCH,s,"Unexpected end of input while parsing ternary false execution branch."));continue}let b=e[_],g=new qo;g.head=u,g.truthBranch=h,g.falseBranch=b,t.push(g),i=(a.foundAt??0)+1;continue}else t.push(s)}return t}groupNodesByType(e,t){let r=[],i=e.length;for(let s=0;s<i;s++){let a=e[s];if(s>0&&a instanceof t){let l=[],u=r.pop();if(l.push(u),!this.assertOperandRight(e,s))continue;if(s+1>=i){a.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,a,"Unexpected end of input while parsing input text."));continue}let f=e[s+1];typeof f<"u"&&(f.isVirtualGroupMember=!0),typeof u<"u"&&(u.isVirtualGroupMember=!0),a.isVirtualGroupMember=!0;let d=new Be;d.nodes=l,d.nodes.push(a),d.nodes.push(f),s+=1,r.push(d);continue}else r.push(a)}return r}flagNodeAsOperatorResolve(e){if(e instanceof Be){if(e.nodes.length==0)return;this.flagNodeAsOperatorResolve(e.nodes[e.nodes.length-1])}e.isVirtualGroupOperatorResolve=!0,e.next instanceof Wt||(e.producesVirtualStatementTerminator=!0)}groupNodesByOperatorType(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i];if(i>0&&It.isOperatorType(s)){let a=[],l=t.pop();if(a.push(l),!this.assertOperandRight(e,i))continue;if(i+1>=r){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_REDUCING_NEGATION_OPERATORS,s,"Unexpected end of input while parsing input text."));continue}let u=e[i+1];this.flagNodeAsOperatorResolve(u),It.isAssignmentOperator(s)&&this.tracedAssignments.push(new Sc(l,u,s)),typeof l<"u"&&(l.isVirtualGroupMember=!0),typeof u<"u"&&(u.isVirtualGroupMember=!0),s.isVirtualGroupMember=!0;let f=new Be;f.nodes=a,f.nodes.push(s),f.nodes.push(u),i+=1,t.push(f);continue}else t.push(s)}return t}applyOperationOrder(e){return e=this.groupNodesByType(e,Or),e=this.groupNodesByType(e,wn),e=this.groupNodesByType(e,kn),e=this.groupNodesByType(e,Rn),e=this.groupNodesByType(e,nn),e}createLogicGroupsToRemoveMethodInvocationAmbiguity(e){let t=[],r=e.length,i=r-1;for(let s=0;s<r;s++){let a=e[s];if(a instanceof At){let l=t.pop(),u=new Be;if(u.startPosition=l.startPosition,typeof l<"u"&&(l.isVirtualGroupMember=!0),typeof a<"u"&&(a.isVirtualGroupMember=!0),u.nodes.push(l),u.nodes.push(a),s!=i)for(let f=s+1;f<r;f++)if(e[f]instanceof At){if(typeof e[f]>"u")continue;if(e[f].isVirtualGroupMember=!0,u.nodes.push(e[f]),f==i){f+=1;break}}else{if(f==i){f+=1;break}s=f-1;break}u.endPosition=u.nodes[u.nodes.length-1].endPosition,t.push(u)}else t.push(a)}return t}countTypeRight(e,t,r){let i=0;for(let s=t;s<e.length&&e[s]instanceof r;s++)i+=1;return i}createLogicGroupsToResolveOperatorAmbiguity(e){return e=this.groupNodesByType(e,Zr),e=this.groupNodesByType(e,Hn),e=this.groupNodesByType(e,gr),e=this.groupNodesByType(e,mr),e=this.groupNodesByType(e,br),e=this.groupNodesByType(e,hn),e=this.groupNodesByType(e,_r),e=this.groupNodesByType(e,Tr),e=this.groupNodesByType(e,yr),e=this.groupNodesByOperatorType(e),e}createModifier(e){let t=e.shift(),r=[],i=e.length;if(e.length>0&&e[0]instanceof Be){let a=this.unpack(e[0].nodes),l=this.makeArgGroup(a);l.endPosition=e[0].endPosition;let u=new ks;if(u.nameNode=t,u.methodStyleArguments=l,e.length>1)for(let f=1;f<i;f++)e[f].pushError(Q.makeSyntaxError(P.TYPE_MODIFIER_UNEXPECTED_TOKEN_METHOD_SYNTAX,e[f],"Unexpected ["+te.getPrettyTypeName(e[f])+"] while parsing modifier argument group. Expecting [T_MODIFIER_SEPARATOR] or end of current expression."));return u.startPosition=t.startPosition,u.endPosition=l.endPosition,u}for(let a=0;a<i;a++)if(e[a]instanceof rn||e[a]instanceof mt){if(a+1>=i)return e[a].pushError(Q.makeSyntaxError(P.TYPE_MODIFIER_UNEXPECTED_END_OF_VALUE_LIST,e[a],"Unexpected end of modifier value list while parsing modifier.")),e;let l=e[a+1];if(this.isValidModifierValue(l)){if(l instanceof ye)if(l.variableReference!=null&&l.variableReference.pathParts.length>0)l.variableReference.pathParts.forEach(u=>{if(u instanceof tn){let f=new kt;f.startPosition=u.startPosition,f.endPosition=u.endPosition,f.value=u.name,f.name=u.name,f.originalAbstractNode=u,f.endPosition==null&&f.startPosition==null&&(f.startPosition=l.startPosition,f.endPosition=l.endPosition),r.push(f)}});else{let u=new kt;u.startPosition=l.startPosition,u.endPosition=l.endPosition,u.value=l.name,u.name=l.name,u.originalAbstractNode=l,r.push(u)}else r.push(l);a+=1;continue}else return l.pushError(Q.makeSyntaxError(P.TYPE_MODIFIER_UNEXPECTED_VALUE,l,"Unexpected ["+te.getPrettyTypeName(l)+"] while parsing modifier value.")),e}let s=new ks;return s.nameNode=t,s.valueNodes=r,s.startPosition=s.nameNode.startPosition,s.valueNodes.length>0?s.endPosition=s.valueNodes[s.valueNodes.length-1].endPosition:s.endPosition=s.nameNode.endPosition,s}scanToEndOfModifier(e){let t=[],r=e.length;for(let i=0;i<r;i++){let s=e[i];if(s instanceof rn){let a=t.length;if(a==0){s.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_MODIFIER_VALUE,s,"Unexpected end of input while parsing modifier value."));continue}this.isRealModifierSeparator.set(s,!0);let l=t[a-1];if(rt.distance(l,s)>1)break}if(s instanceof gt||s instanceof ye||s instanceof Pt){let a=t.length;if(a>0&&t[a-1]instanceof Be)break}if(s instanceof Jt||s instanceof Et||s instanceof Rt||s instanceof hn||s instanceof Hn||s instanceof Zr||s instanceof mr||s instanceof gr||s instanceof Tr||s instanceof _r||s instanceof yr||s instanceof br||s instanceof Yn||s instanceof $n||s instanceof Dr||s instanceof Kn||s instanceof Fr||s instanceof Nr||s instanceof Ii||s instanceof At||s instanceof Ht)break;t.push(s)}return t}static isAssignmentOperatorNode(e){return e instanceof fr||e instanceof dr||e instanceof On||e instanceof pr||e instanceof hr||e instanceof nn}insertAutomaticStatementSeparators(e){let t=e.length,r=[];for(let i=0;i<t;i++){let s=e[i];if(It.isAssignmentOperatorNode(s))if(i+2<t)if(e[i+2]instanceof Wt){r.push(s),r.push(e[i+1]),r.push(e[i+2]),i+=2;continue}else{r.push(s),r.push(e[i+1]),r.push(new Wt),i+=1;continue}else{r.push(s),r.push(e[i+1]),r.push(new Wt);break}else r.push(s)}return e}createSemanticGroups(e){let t=[],r=e.length,i=[];for(let s=0;s<r;s++)if(e[s]instanceof Wt){let a=new xt;a.nodes=i,a.separatorToken=e[s],t.push(a),i=[];continue}else if(i.push(e[s]),s+1>=r){let a=new xt;a.nodes=i,t.push(a);break}return t}findLogicalGroupEnd(e,t){let r=[],i=t.length,s=null,a=0,l=0;for(l;l<i;l++){let d=t[l];if(a+=1,d instanceof Et){s=d;break}else if(d instanceof Rt){if(l+1>=i)return d.pushError(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_PARSING_LOGIC_GROUP_END,d,"Unexpected end of input while parsing input text.")),{found:!1,logicalGroup:null,skipCount:a};let h=this.findLogicalGroupEnd(d,t.slice(l+1));if(h.found){h.logicalGroup!=null&&r.push(h.logicalGroup),a+=h.skipCount,l+=h.skipCount;continue}else continue}else r.push(d)}if(s==null)return e.pushError(Q.makeSyntaxError(P.TYPE_LOGIC_GROUP_NO_END,e,"Unexpected end of input while parsing logic group.")),{found:!1,logicalGroup:null,skipCount:a};let u=new It;u.setIsRoot(!1);let f=new Be;if(r.length>=2&&r[1]instanceof Zt){if(f=new zn,f.scopeOperator=r[1],l+2<i&&t[l+1]instanceof ye&&t[l+2]instanceof gt&&t[l+1].name==Ke.ScopeAs){let _=t[l+2];f=new ni,f instanceof ni&&(f.alias=_),a+=2}let d=r.splice(0,2);(f instanceof zn||f instanceof ni)&&(f.scope=d[0])}return f.nodes=u.parse(r),f.start=e,f.end=s,f.startPosition=e.startPosition,f.endPosition=s.endPosition,f instanceof ni&&f.alias!=null&&(f.endPosition=f.alias.endPosition),{found:!0,logicalGroup:f,skipCount:a}}unpack(e){if(e.length==0)return[];if(e[0]instanceof xt){let t=e[0];return this.unpack(t.nodes)}return e}collectUntil(e){let t=e.length,r=[];for(let i=t-1;i>=0&&!It.isAssignmentOperator(e[i]);i--){let s=e.pop();r.push(s)}if(r=r.reverse(),r.length>=3){let i=new It;return i.setIsRoot(!1),{collectedTokens:this.unpack(i.parse(r)),tokens:e}}return{collectedTokens:r,tokens:e}}seek(e,t){for(let r=t;r<this.tokens.length;r++)if(this.tokens[r]instanceof e)return{found:!0,foundAt:r,node:this.tokens[r]};return{found:!1,foundAt:null,node:null}}};var ui=class{static findRightBeighboringNextPunctuation(e,t,r=4){t=t.replace("	"," ".repeat(r));let i=!1;for(let s=e+1;s<t.length;s++){let a=t[s];if(J.ctypeSpace(a)&&(i=!0),i&&(J.ctypeAlpha(a)||J.ctypeDigit(a)))return null;if(J.ctypePunct(a)||a==V.String_Terminator_SingleQuote||a==V.String_Terminator_DoubleQuote)return a}return null}static findRightNeighboringNextAlphaNumeric(e,t,r=4){t=t.replace("	"," ".repeat(r));let i=!1;for(let s=e+1;s<t.length;s++){let a=t[s];if((J.ctypeSpace(a)||J.ctypePunct(a)&&a!=V.Punctuation_Underscore)&&(i=!0),i&&(J.ctypeAlpha(a)||J.ctypeDigit(a)))return s+1}return null}static findLeftNeighboringNextPunctuation(e,t,r=4){t=t.replace("	"," ".repeat(r));let i=!1;for(let s=e-2;s>=0;s--){let a=t[s];if(J.ctypeSpace(a)&&(i=!0),i&&(J.ctypeAlpha(a)||J.ctypeDigit(a)))return null;if(J.ctypePunct(a))return a}return null}static findLeftNeighboringNextAlphaNumeric(e,t,r=4){t=t.replace("	"," ".repeat(r));let i=!1;for(let s=e-1;s>=0;s--){let a=t[s];if((J.ctypeSpace(a)||J.ctypePunct(a)&&a!=V.Punctuation_Underscore)&&(i=!0),i&&(J.ctypeAlpha(a)||J.ctypeDigit(a)))return s+1}return null}static scanWordAt(e,t,r=4){if(t=t.replace("	"," ".repeat(r)),e<0||e>t.length)return null;let i=[],s=[];for(let a=e-1;a>=0;a--){let l=t[a];if(J.ctypePunct(l)&&l!=V.Punctuation_Underscore||J.ctypeSpace(l))break;i.push(l)}for(let a=e;a<t.length;a++){let l=t[a];if(J.ctypePunct(l)&&l!=V.Punctuation_Underscore||J.ctypeSpace(l))break;s.push(l)}return i.reverse().join("")+s.join("")}};var Tf=class{constructor(e){this.parser=e}findParentWithName(e,t){let r=t.parent;for(;r!=null;){if(r instanceof X&&r.nameMatches(e))return r;if(r.parent==r)break;r=r.parent}return null}};var _f=class{static analyzeModifierNodeParameters(e){if(e.parameters.forEach(r=>{r.isModifierParameter=ht.instance?.hasModifier(r.name)??!1,r.isModifierParameter&&(e.modifiers.parameterModifiers.push(r),r.modifier=ht.instance?.getModifier(r.name)??null,e.modifiers.modifierNames.includes(r.name)==!1&&e.modifiers.modifierNames.push(r.name))}),e.modifierChain!=null&&e.modifierChain.modifierChain.length>0){let r=null;e.modifierChain.modifierChain.forEach(i=>{i.nameNode!=null&&(i.modifier=ht.instance?.getModifier(i.nameNode.content)??null,e.modifiers.modifierNames.includes(i.nameNode.content)==!1&&e.modifiers.modifierNames.push(i.nameNode.content),i.modifier!=null&&(r=i.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=i)))}),e.modifierChain.lastModifier=r,e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}e.runtimeNodes.length>0&&e.runtimeNodes.forEach(r=>{if(r.modifierChain!=null&&r.modifierChain.modifierChain.length>0){let i=null;r.modifierChain.modifierChain.forEach(s=>{s.nameNode!=null&&(s.modifier=ht.instance?.getModifier(s.nameNode.content)??null,e.modifiers.modifierNames.includes(s.nameNode.content)==!1&&e.modifiers.modifierNames.push(s.nameNode.content),s.modifier!=null&&(i=s.modifier,e.modifierChain!=null&&(e.modifierChain.lastManifestedModifier=s)))}),e.modifierChain!=null&&(e.modifierChain.lastModifier=i),e.modifiers.parameterModifiers.length>0&&(e.modifiers.hasMixedModifierStyles=!0)}});let t=e.modifiers.getLastManifestedModifier();if(t!=null)if(t.name=="macro"){let r=e.modifiers.getLastManifestedModifierValue();e.manifestType=ht.instance?.getMacroManifestingType(r)??""}else e.manifestType=ht.instance?.getProbableReturnType(t,e.isPaired())??""}};function em(n){return n==null?!1:n=='"'||n=="'"}function zA(n,e){for(n.getCurrentIndex();n.getCurrentIndex()<n.inputLength()&&(n.checkCurrentOffsets(),e&&n.pushChar(n.getCurrent()),n.getCurrent()!=V.NewLine);n.incrementIndex());}function QA(n,e){for(n.getCurrentIndex();n.getCurrentIndex()<n.inputLength();n.incrementIndex())if(n.checkCurrentOffsets(),e&&n.pushChar(n.getCurrent()),n.getCurrent()==V.Punctuation_Asterisk&&n.getNext()==V.Punctuation_ForwardSlash){e&&n.pushChar(V.Punctuation_ForwardSlash),n.incrementIndex(),n.checkCurrentOffsets();break}}function tm(n){let e=n.getCurrent();for(n.incrementIndex(),n.getCurrentIndex();n.getCurrentIndex()<n.inputLength()&&(n.checkCurrentOffsets(),!(n.getCurrent()==e&&n.getPrev()!=V.String_EscapeCharacter));n.incrementIndex());}var yf=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(e){this.currentIndex=e}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(e){}getChar(e){return this.chars[e]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(e,t){return this.documentOffsets=e,this.lastDocumentOffsetKey=t,this}getClosingFragmentAfter(e){if(typeof e>"u")return null;let t=e.name.toLowerCase();for(let r=0;r<this.fragments.length;r++){let i=this.fragments[r];if(i.isClosingFragment&&!i.isSelfClosing&&i.name.toLowerCase()==t&&i.index>e.index)return i}return null}getContentSubstring(e,t){return this.content.substr(e,t)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(e,t,r=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let l=this.documentOffsets.get(e);i=l.line,s=l.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let l=null,u=null,f=null,d=null;for(let h of this.documentOffsets.keys()){if(h>=e){d!=null&&e>d?(l=f,u=d):(l=this.documentOffsets.get(h),u=h);break}f=this.documentOffsets.get(h),d=h}l==null&&(l=f,u=d),l!=null?(s=e-(u??0),i=l.line,e<=(u??0)?(i=l.line,s=e+1):i=l.line+1):this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new fn;return a.index=t,a.offset=e,a.line=i+this.shiftLine,a.char=s,a}getFragments(){return this.fragments}getFragmentsBetween(e,t){let r=[];return this.fragments.forEach(i=>{let s=i.startPosition?.index??0,a=i.endPosition?.index??0;s>e&&a<t&&r.push(i)}),r}getFragmentContaining(e){for(let t=0;t<this.fragments.length;t++){let r=this.fragments[t];if((r.startPosition?.index??0)<e.index&&(r.endPosition?.index??0)>e.index)return r}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let t=J.split(J.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),t.forEach(r=>{this.chars.push(r),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(e){this.content=e,this.inputLen=this.content.length;let t=[...this.content.matchAll(/(<(?!\?[php|?=]))/gm)],r=[];t.forEach(i=>{let s=i.index??0;for(let a=0;a<this.nodeIndex.length;a++){let l=this.nodeIndex[a];if(s>=l.start&&s<=l.end)return}r.push(s)}),this.fragmentStartIndex=r}setIndexRanges(e){return this.nodeIndex=e,this}fetchAt(e,t){return this.content.substr(e,t)}getFragmentsContainingStructures(){let e=[],t=!1;return this.fragments.forEach(r=>{r.containsStructures&&(t=!0)}),this.fragments.forEach(r=>{let i=r.name.toLowerCase();if(!(i!="script"&&i!="style")&&!r.isClosingFragment&&!r.isSelfClosing&&(t||r.containsStructures)){let s=this.getClosingFragmentAfter(r);if(s!=null){let a=this.content.substring((r.endPosition?.offset??0)+1,s?.startPosition?.offset??0),l=this.content.substring(r.startPosition?.offset??0,(s?.endPosition?.offset??0)+1);e.push({start:r,end:s,content:a,outerContent:l})}}}),e}parse(e){if(this.resetState().processInputText(e),this.fragmentStartIndex.length==0)return[];for(let s=0;s<this.fragmentStartIndex.length;s++){let a=this.fragmentStartIndex[s];if(this.resetIntermediateState(),this.seedOffset=a,this.currentChunkOffset=a,this.parseIntermediateText(),this.isScript){let l=!1;for(let u=s+1;u<this.fragmentStartIndex.length;u++){let f=this.fragmentStartIndex[u];if(this.fetchAt(f,8).toLowerCase()=="<\/script"){s=u-1,this.isScript=!1,l=!0;break}}if(!l)break}}let r=0,i=0;return this.fragments.forEach(s=>{let a=s.name.toLowerCase();(a=="script"||a=="style")&&(s.embeddedIndex=i,this.embeddedIndexedFragments.set(i,s),i+=1),s.index=r,this.indexedFragments.set(r,s),r+=1}),this.fragments}getFragment(e){return this.indexedFragments.get(e)}getEmbeddedFragment(e){return this.embeddedIndexedFragments.has(e)?this.embeddedIndexedFragments.get(e):null}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),em(this.cur)&&tm(this),this.cur==V.Punctuation_ForwardSlash&&this.next==V.Punctuation_ForwardSlash){zA(this,!0);continue}if(this.cur==V.Punctuation_ForwardSlash&&this.next==V.Punctuation_Asterisk){QA(this,!0);continue}if(this.cur==V.Punctuation_Question&&this.next==V.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let e=this.currentIndex,t=[],r=[],i=!1,s=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),J.ctypeSpace(this.cur)&&(i=!0),this.next==V.Punctuation_LessThan){let a=1;this.cur==V.Punctuation_ForwardSlash&&(a=2);let l=this.fetchAt(this.currentChunkOffset+a,5);if(l.toLowerCase()=="<?php"||l.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==V.Punctuation_LessThan||this.next==null&&this.cur!=V.Punctuation_GreaterThan)break;if(!i&&this.cur==V.Punctuation_LessThan&&this.next==V.Punctuation_ForwardSlash&&(s=!0),!i&&this.cur!=V.Punctuation_LessThan&&this.cur!=V.Punctuation_ForwardSlash&&this.cur!=V.Punctuation_GreaterThan&&r.push(this.cur),em(this.cur)){let a=this.currentIndex;tm(this);let l=new Nc;l.startPosition=this.positionFromOffset(a+this.seedOffset,a+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let u=a+this.seedOffset,f=this.currentIndex+this.seedOffset+1;l.content=this.content.substr(u,f-u);let d=[];for(let h=a-2;h>=0;h--){let _=this.chars[h];if(J.ctypeSpace(_))break;d.push(_)}l.name=d.reverse().join(""),t.push(l);continue}if(this.cur==V.Punctuation_ForwardSlash&&this.next==V.Punctuation_GreaterThan){let a=new hl;a.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),a.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),a.parameters=t,a.isSelfClosing=!0,a.name=r.join(""),a.isClosingFragment=s,this.fragments.push(a),s?this.fragmentOpeningIndex.set(a.startPosition.index+1,1):this.fragmentOpeningIndex.set(a.startPosition.index,1);break}if(this.cur==V.Punctuation_GreaterThan){let a=new hl;a.startPosition=this.positionFromOffset(e+this.seedOffset,e+this.seedOffset),a.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),a.parameters=t,a.name=r.join(""),a.isClosingFragment=s,this.fragments.push(a),s?this.fragmentOpeningIndex.set(a.startPosition.index+1,1):this.fragmentOpeningIndex.set(a.startPosition.index,1),a.name.toLowerCase()=="script"&&a.isClosingFragment==!1&&(this.isScript=!0);break}}}};var bf=class{constructor(e,t){this.documentParser=e,this.fragmentsParser=t}doesContainFragments(e){let t=e.endPosition?.index??0,r=e.isClosedBy?.startPosition?.index??0;return this.fragmentsParser.getFragmentsBetween(t,r).length>0}analyze(){let e=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(t=>{let r=t.name.toLowerCase();if(t.isClosingFragment==!1&&t.isSelfClosing==!1&&(r=="script"||r=="style")){let i=this.fragmentsParser.getClosingFragmentAfter(t);if(i==null)return;t.endPosition!=null&&i.startPosition!=null&&this.documentParser.getNodesBetween(t.endPosition,i.startPosition).forEach(a=>{(a instanceof Xt||a instanceof X&&a.isClosedBy!=null)&&(t.containsStructures=!0),r=="style"?a.isInStyleTag=!0:a.isInScriptTag=!0})}}),e.forEach(t=>{if(t instanceof nt||t.startPosition==null)return;t instanceof X&&(dn.isConditionalStructure(t)||!t.isClosingTag)&&t.isClosedBy!=null&&(t.containsAnyFragments=this.doesContainFragments(t));let r=this.fragmentsParser.getFragmentContaining(t.startPosition);if(r==null){t.fragmentPosition=3;return}if(t.fragment=r,t.startPosition.index-(r.startPosition?.index??0)<=3){t.fragmentPosition=0;return}if(r.parameters.length==0){t.fragmentPosition=2;return}let s=!1;for(let a=0;a<r.parameters.length;a++){let l=r.parameters[a];if((l.startPosition?.index??0)<t.startPosition.index&&(l.endPosition?.index??0)>t.startPosition.index){t.fragmentPosition=1,t.fragmentParameter=l,s=!0;break}}s||(t.fragmentPosition=2)}))}};var Nf=class{static analyze(e){e.forEach(t=>{if(t instanceof X){if(t.prev instanceof X&&t.isPaired()&&t.prev.isInlineAntlers==!0){t.isInlineAntlers=!1,t.isClosedBy!=null&&(t.isClosedBy.isInlineAntlers=!1);return}let r=!1,i=!1;if(t.next==null)r=!0;else if(t.next instanceof nt){let s=J.getFirstLine(t.next.content);(t.next.next==null&&s.trim().length==0||J.trimLeft(s," 	").startsWith(`
`)==!1&&s.trim().length>0||t.next.next instanceof qt||t.next.next instanceof X&&(t.next.next.isPaired()==!1||(t.next.next.startPosition?.line??0)!=(t.startPosition?.line??0)))&&(r=!0)}else t.next instanceof X&&t.next.isPaired()&&(r=!0);if(t.prev==null)i=!0;else if(t.prev instanceof nt){let s=J.getLastLine(t.prev.content);J.trimRight(s," 	").endsWith(`
`)==!1&&s.trim().length>0||t.prev.prev instanceof qt?i=!0:t.prev.prev instanceof X&&(t.prev.prev.isInlineAntlers&&t.prev.prev.endPosition?.line==t.startPosition?.line?i=!0:t.prev.prev.isClosingTag&&t.prev.prev.isOpenedBy!=null&&(t.prev.prev.isOpenedBy instanceof qt||t.prev.prev.runtimeName()=="noparse")&&(t.prev.prev.isInlineAntlers=!0,i=!0))}else t.prev instanceof X&&t.prev.isPaired()&&(i=!0);t.isInlineAntlers=r&&i}})}};var xe=class{constructor(){this.interpolationRegions=new Map;this.nodeParser=new mf;this.chars=[];this.charLen=0;this.lastAntlersNode=null;this.content="";this.originalContent="";this.currentIndex=0;this.currentContent=[];this.sourceContent=[];this.startIndex=0;this._recoveryStartIndex=0;this.cur=null;this.next=null;this.prev=null;this.nodes=[];this.renderNodes=[];this.isInterpolatedParser=!1;this.inputLen=0;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.isDoubleBrace=!1;this.interpolationEndOffsets=new Map;this.isScanningInterpolations=!1;this.seedStartLine=1;this.seedStartchar=1;this.frontMatterEndLine=-1;this.lastAntlersEndIndex=-1;this.seedOffset=0;this.antlersStartIndex=[];this.antlersStartPositionIndex=new Map;this.chunkSize=5;this.maxLine=1;this.currentChunkOffset=0;this.isNoParse=!1;this.antlersErrors=[];this.structureErrors=[];this.languageParser=new It;this.documentPath=null;this.pushedErrors=new Map;this.frontMatter="";this.shiftLine=0;this.doesHaveUncloseIfStructures=!1;this.doesHaveUnclosedStructures=!1;this.parseChildDocuments=!1;this.mayBeStartingEscapedContent=!1;this.isParsingEscapedContent=!1;this.escapedContentEndSymbol=null;this.escapedContentSymbolEncountered=0;this.structuralErrorCodes=[P.TYPE_PARSE_UNCLOSED_CONDITIONAL,P.TYPE_PARSE_UNPAIRED_CONDITIONAL,P.TYPE_RECURSIVE_UNPAIRED_NODE,P.TYPE_RUNTIME_FATAL_UNPAIRED_LOOP_END,P.TYPE_UNPAIRED_CLOSING_TAG];this.structure=new Tf(this);this.fragmentsParser=new yf,this.fragmentsAnalyzer=new bf(this,this.fragmentsParser)}withChildDocuments(e){return this.parseChildDocuments=e,this}shouldParseChildDocument(){return this.parseChildDocuments}hasUnclosedIfStructures(){return this.doesHaveUncloseIfStructures}hasUnclosedStructures(){return this.doesHaveUnclosedStructures}getFrontMatter(){return this.frontMatter}setDocumentPath(e){this.documentPath=e}getFrontMatterEndLine(){return this.frontMatterEndLine}pushError(e){(e.errorCode==P.TYPE_PARSE_UNCLOSED_CONDITIONAL||e.errorCode==P.TYPE_PARSE_UNPAIRED_CONDITIONAL)&&(this.doesHaveUncloseIfStructures=!0);let t=e.hash();this.pushedErrors.has(t)||(this.pushedErrors.set(t,e),this.antlersErrors.push(e),this.structuralErrorCodes.includes(e.errorCode)&&this.structureErrors.push(e))}getInterpolationRegions(){return this.interpolationRegions}getDocumentPath(){return this.documentPath}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let e=!0;if(this.currentIndex==this.charLen-1){let t=J.split(J.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(e=!1),t.forEach(r=>{this.chars.push(r),this.charLen+=1})}e&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}charLeftAt(e){return e==null||e.char<=1?null:this.charAt(this.positionFromCursor(e.line,e.char-1))}charLeftAtCursor(e,t){return this.charLeftAt(this.positionFromCursor(e,t))}charRightAt(e){return e==null?null:this.charAt(this.positionFromCursor(e.line,e.char+1))}charRightAtCursor(e,t){return this.charRightAt(this.positionFromCursor(e,t))}punctuationLeftAt(e,t=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:ui.findLeftNeighboringNextPunctuation(e.char,r,t)}punctuationLeftAtCursor(e,t,r=4){return this.punctuationLeftAt(this.positionFromCursor(e,t),r)}punctuationRightAt(e,t=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:ui.findRightBeighboringNextPunctuation(e.char,r,t)}punctuationRightAtCursor(e,t,r=4){return this.punctuationRightAt(this.positionFromCursor(e,t),r)}wordRightAt(e,t=4){if(e==null)return null;let r=this.getLineText(e.line);if(r==null)return null;let i=ui.findRightNeighboringNextAlphaNumeric(e.char,r,t);return i==null?null:ui.scanWordAt(i,r,t)}wordRightAtCursor(e,t,r=4){return this.wordRightAt(this.positionFromCursor(e,t),r)}wordLeftAt(e,t=4){if(e==null)return null;let r=this.getLineText(e.line);if(r==null)return null;let i=ui.findLeftNeighboringNextAlphaNumeric(e.char,r,t);return i==null?null:ui.scanWordAt(i,r,t)}wordLeftAtCursor(e,t,r=4){return this.wordLeftAt(this.positionFromCursor(e,t),r)}wordAt(e,t=4){if(e==null)return null;let r=this.getLineText(e.line);return r==null?null:ui.scanWordAt(e.char,r,t)}getLineText(e){let t=this.getLineIndex(e);return t!=null?J.trimRight(this.getContent().substring(t.start,t.end+1)):null}wordAtCursor(e,t,r=4){return this.wordAt(this.positionFromCursor(e,t),r)}charAt(e){return e==null?null:this.content.substr(e.offset,1)}getLinesAround(e){let t=new Map,r=e-3,i=e+3;r<1&&(r=1),i>this.maxLine&&(i=this.maxLine);for(let s=r;s<=i;s++)t.set(s,this.getLineText(s)??"");return t}charAtCursor(e,t){return this.charAt(this.positionFromCursor(e,t))}getLineIndex(e){if(e==this.maxLine){let r=this.lineIndex.get(e-1);if(r!=null){let i=r.endIndex+1;return{end:this.inputLen-1,start:i}}return null}let t=this.lineIndex.get(e);return t!=null?{start:t.startIndex,end:t.endIndex}:null}positionFromCursor(e,t){if(e==this.maxLine){let i=this.lineIndex.get(e-1);if(i!=null){let s=i.endIndex+1,a=s+(t-1),l=new fn;return l.offset=a,l.line=e,l.char=t,l.index=a,l}return null}let r=this.lineIndex.get(e);if(r!=null){let i=new fn;return i.offset=r.startIndex+(t-1),i.line=r.line,i.char=t,i.index=r.startIndex+(t-1),i}return null}parse(e){if(this.resetState(),!this.processInputText(e))return[];let t=this.antlersStartIndex.length,r=t-1;if(t==0&&!this.isNoParse){let f=new nt;f.withParser(this),f.content=this.prepareLiteralContent(this.content),f.startPosition=this.positionFromOffset(0,0),f.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),f.sourceContent=this.content,this.nodes.push(f)}else for(let f=0;f<t;f+=1){let d=this.antlersStartIndex[f];if(this.seedOffset=d,f==0&&d>0&&!this.isNoParse){let _=new nt;if(_.withParser(this),_.content=this.prepareLiteralContent(this.content.substr(0,d)),_.content.length>0){_.startPosition=this.positionFromOffset(0,0),_.endPosition=this.positionFromOffset(d,d-1);let b=_.startPosition.index??0,g=_.endPosition.index+1;_.sourceContent=this.content.substr(b,g-b),this.nodes.push(_)}}if(d<this.lastAntlersEndIndex)continue;if(this.currentChunkOffset=d,this.resetIntermediateState(),this.parseIntermediateText(),this.lastAntlersNode!=null&&!(this.lastAntlersNode instanceof Rs)&&this.lastAntlersNode.isComment&&!(this.lastAntlersNode instanceof Do)&&f+1<t){let _=this.antlersStartIndex[f+1];if(this.lastAntlersNode.endPosition!=null&&_<this.lastAntlersNode.endPosition.offset){let b=null;for(let g=f+1;g<t;g++)if(this.antlersStartIndex[g]>this.lastAntlersNode.endPosition.offset){b=g;break}if(b==null){let g=this.prepareLiteralContent(this.content.substr(this.lastAntlersNode.endPosition.offset+1));if(g.length>0&&!this.isNoParse){let v=new nt;v.withParser(this),v.content=g;let O=this.lastAntlersNode.endPosition.offset+1;v.startPosition=this.positionFromOffset(O,O),v.endPosition=this.positionFromOffset(this.inputLen,this.inputLen);let E=v.startPosition.index??0,C=v.endPosition.index+1;v.sourceContent=this.content.substr(E,C-E),this.nodes.push(v)}break}else{let g=this.antlersStartIndex[b],v=g-this.lastAntlersNode.endPosition.offset-1;if(v>0){let O=this.lastAntlersNode.endPosition.offset,E=g-1;O+=1,E-=1;let C=this.content.substr(O,v);if(C.length>0&&!this.isNoParse){let q=new nt;q.withParser(this),q.content=C,q.startPosition=this.positionFromOffset(O,O),q.endPosition=this.positionFromOffset(E,E);let Z=q.startPosition.index??0,ue=q.endPosition.index+1;q.sourceContent=this.content.substr(Z,ue-Z+1),this.nodes.push(q)}continue}f=b-1;continue}}}let h=!1;if(this.antlersStartPositionIndex.has(this.currentChunkOffset)?this.lastAntlersEndIndex<this.currentChunkOffset&&(h=!0):h=!0,h){if(f+1<t){let _=this.antlersStartIndex[f+1],b=this.lastAntlersEndIndex+1;if(_<b)if(this.lastAntlersEndIndex>_)f+2<t&&(_=this.antlersStartIndex[f+2]);else continue;if(f+1==r&&_<=this.lastAntlersEndIndex){if(this.isNoParse)break;let g=this.currentChunkOffset,v=this.content.substr(b),O=new nt;if(O.withParser(this),O.content=this.prepareLiteralContent(v),O.content.length>0){O.startPosition=this.positionFromOffset(b,g),O.endPosition=this.positionFromOffset(_,_-1);let E=O.startPosition.index??0,C=O.endPosition.index+1;O.sourceContent=this.content.substr(b,this.inputLen-E+2),this.nodes.push(O)}break}else{let g=_-this.lastAntlersEndIndex-1;if(g==0||this.isNoParse)continue;let O=this.currentChunkOffset;this.lastAntlersNode instanceof Do&&(b=(this.lastAntlersNode.endPosition?.offset??0)+1,g-=(this.lastAntlersNode.endPosition?.offset??0)+1,O=b),this.lastAntlersNode instanceof Rs&&(b-=1,g+=1);let E=this.content.substr(b,g),C=new nt;if(C.withParser(this),C.content=this.prepareLiteralContent(E),C.content.length>0){C.startPosition=this.positionFromOffset(b,b),C.endPosition=this.positionFromOffset(_,_-1);let q=C.startPosition.index??0,Z=C.endPosition.index+1;C.sourceContent=this.content.substr(q,Z-q),this.nodes.push(C)}}continue}if(f!==r&&this.lastAntlersNode!=null&&this.lastAntlersNode.endPosition!=null&&this.positionFromOffset(d,d).isBefore(this.lastAntlersNode.endPosition)){if(f+1<t){if(this.antlersStartIndex[f+1]<this.lastAntlersNode.endPosition.offset)continue}else if(f+1!=r)continue}if(f==r){let _=this.currentIndex+d;if(_<this.inputLen&&!this.isNoParse){let b=new nt;if(b.withParser(this),b.content=this.prepareLiteralContent(this.content.substr(_)),b.content.length>0){b.startPosition=this.positionFromOffset(_,_),b.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1);let g=b.startPosition.index??0,v=b.endPosition.index+1;b.sourceContent=this.content.substr(g,v-g),this.nodes.push(b)}break}}}}let i=0;this.nodes.forEach(f=>{f.index=i,i+=1}),this.nodes.length>500&&(this.parseChildDocuments=!1),this.nodes.forEach(f=>{f instanceof X&&f.isComment||f instanceof X&&f.interpolationRegions.size>0&&(f.interpolationRegions.forEach((d,h)=>{let _=new xe;_.withChildDocuments(this.parseChildDocuments),_.setIsInterpolatedParser(!0);let b=_.parse(d.parseContent);b.length>1&&b[1]instanceof X&&(b=[b[1]]),_.hasUnclosedIfStructures()&&(this.doesHaveUncloseIfStructures=!0),_.hasUnclosedStructures()&&(this.doesHaveUnclosedStructures=!0),f.processedInterpolationRegions.set(h,b),this.mergeErrors(_.getAntlersErrors())}),f.hasProcessedInterpolationRegions=!0)}),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content);let s=new Gl;this.renderNodes=s.associate(this.nodes,this),this.createChildDocuments(this.renderNodes);let a=null,l=null;for(let f=0;f<this.nodes.length;f++){let d=this.nodes[f];f+1<this.nodes.length?l=this.nodes[f+1]:l=null,d.next=l,d.prev=a,a=d}this.fragmentsAnalyzer.analyze(),Nf.analyze(this.nodes),this.nodes.forEach(f=>{if(f instanceof X&&f.isClosedBy!=null){let d=f.getImmediateChildren();for(let h=0;h<d.length;h++){let _=d[h];if(_ instanceof X&&_.isClosedBy!=null){f.containsChildStructures=!0;break}else if(_ instanceof Xt){f.containsChildStructures=!0;break}}}}),this.nodes.forEach(f=>{if(f instanceof X&&f.isClosingTag&&f.isOpenedBy==null){let d="Unpaired closing tag.";f.isInterpolationNode&&(d+=" Tag pairs are not supported within Antlers tags."),f.pushError(Q.makeSyntaxError(P.TYPE_UNPAIRED_CLOSING_TAG,f,d))}}),gf.associateRecursiveParent(this.nodes),this.nodes.forEach(f=>{if(!(f instanceof X&&f.isComment)&&((f instanceof X||f instanceof it)&&(f.isInterpolationNode=this.isInterpolatedParser),(f instanceof X||f instanceof it)&&f.interpolationRegions.size>0&&f.runtimeNodes.forEach(d=>{d instanceof ye&&f.interpolationRegions.has(d.name)&&(d.isInterpolationReference=!0,d.interpolationNodes=f.processedInterpolationRegions.get(d.name))}),(f instanceof X||f instanceof it)&&f.hasParameters&&f.interpolationRegions.size>0&&f.parameters.forEach(d=>{f.interpolationRegions.forEach((h,_)=>{d.value.includes(_)&&d.interpolations.push(_)})}),f instanceof X&&f.runtimeNodes.length>0&&f.isClosingTag==!1&&!f.isComment&&(f.parsedRuntimeNodes=this.languageParser.parse(f.runtimeNodes),f.hasParsedRuntimeNodes=!0,!f.isTagNode&&f.parsedRuntimeNodes.length>0))){let d=f.nodeAtIndex(0);d!=null&&d instanceof ye&&d.name==f.name?.name&&(f.modifierChain=d.modifierChain)}}),this.languageParser.getCreatedModifierChains().forEach(f=>{f.modifierChain.length>0&&f.modifierChain.forEach(d=>{d.nameNode!=null&&ht.instance!=null&&ht.instance.hasModifier(d.nameNode?.name)&&(d.modifier=ht.instance?.getModifier(d.nameNode.name))})});let u=1;return this.nodes.forEach(f=>{if(f instanceof X){if(f.isComment)return;f.isTagNode=_n.instance?.isKnownTag(f.getTagName())??!1,f.scopeName=f.findParameterValue("scope",""),f.antlersNodeIndex=u,u+=1,_f.analyzeModifierNodeParameters(f)}}),this.nodes.forEach(f=>{if(f instanceof X&&f.isClosedBy!=null){let d=(f.endPosition?.offset??0)+1,h=f.isClosedBy.startPosition?.offset??0,_=f.startPosition?.offset??0,b=(f.isClosedBy.endPosition?.offset??0)+1;f.documentText=this.content.substr(d,h-d),f.nodeContent=this.content.substr(_,b-_),this.parseChildDocuments&&(f.childDocument=Dt.childFromText(f.documentText,Ul(f.children)))}}),this.renderNodes}createChildDocuments(e){e.forEach(t=>{if(t instanceof X&&t.isClosedBy!=null){let r=t.isClosedBy,i=(t.startPosition?.index??0)-1,s=(r.endPosition?.index??0)-i;if(t.documentText=this.content.substr(i,s),this.parseChildDocuments){let a=t.endPosition?.index??0,l=(r.startPosition?.index??0)-1-a,u=this.content.substr(a,l);t.childDocument=Dt.childFromText(u,Ul(t.getChildren()))}}})}getNodeIndexRanges(){let e=[];return this.nodes.forEach(t=>{t instanceof nt||e.push({start:t.startPosition?.index??0,end:t.endPosition?.index??0})}),e}positionFromOffset(e,t,r=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let l=this.documentOffsets.get(e);i=l.line,s=l.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let l=null,u=null,f=null,d=null;for(let h of this.documentOffsets.keys()){if(h>=e){d!=null&&e>d?(l=f,u=d):(l=this.documentOffsets.get(h),u=h);break}f=this.documentOffsets.get(h),d=h}if(l==null&&(l=f,u=d),l!=null)if(r){let h=this.content.split(""),_=e-(u??0),b=l.char-(u??0)+e;s=_,i=l.line,e<=(u??0)?(i=l.line,s=e+1):i=l.line+1}else{let h=this.content.split(""),_=e-(u??0),b=l.char-(u??0)+e;s=_,i=l.line,e<=(u??0)?(i=l.line,s=e+1):i=l.line+1}else this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new fn;return a.index=t,a.offset=e,a.line=i+this.shiftLine,a.char=s,a}getLanguageParser(){return this.languageParser}getText(e,t){return this.content.substr(e,t-e)}getOriginalContent(){return this.originalContent}getContent(){return this.content}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}setIsInterpolatedParser(e){return this.isInterpolatedParser=e,this}setStartLineSeed(e){return this.seedStartLine=e,this}setSeedStartChar(e){return this.seedStartchar=e,this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.sourceContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(e){return e==null?this.shiftLine=0:this.shiftLine=e.line,this}resetState(){if(this.languageParser.reset(),this.charLen=0,this.antlersStartIndex=[],this.antlersErrors=[],this.pushedErrors.clear(),this.antlersStartPositionIndex.clear(),this.lastAntlersEndIndex=-1,this.renderNodes=[],this.nodes=[],Oi.globalTagEnterStack.length>0){let e=Oi.globalTagEnterStack[Oi.length-1];e!=null&&e.endPosition!=null&&this.setStartLineSeed(e.endPosition.line)}this.seedOffset=0,this.isScanningInterpolations=!1,this.content="",this.chars=[],this.currentIndex=0,this.startIndex=0,this._recoveryStartIndex=0,this.cur=null,this.next=null,this.prev=null,this.inputLen=0,this.documentOffsets.clear(),this.isDoubleBrace=!1,this.interpolationRegions.clear(),this.interpolationEndOffsets.clear()}fetch(e){let t=this.currentChunkOffset+this.chunkSize-this.chars.length;return J.substring(this.content,t,e)}getParsedContent(){return this.content}peek(e){if(e==this.charLen){let t=J.split(J.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,t.forEach(r=>{this.chars.push(r),this.charLen+=1})}return this.chars[e]}parseIntermediateText(){for(this.currentContent=[],this.sourceContent=[],this.startIndex=0,this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==xe.LeftBrace&&this.next==xe.LeftBrace&&this.prev==xe.AtChar){this.dumpLiteralNode(this.currentIndex);let e=new qt;e.withParser(this),e.name=new yn,e.name.name="noparse",e.content="{{",e.startPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),this.nodes.push(e),this.currentContent=[],this.sourceContent=[],this.currentIndex+=1;continue}if((this.prev==null||this.prev!=null&&this.prev!=xe.AtChar)&&this.next!=null&&this.cur==xe.LeftBrace&&this.next==xe.LeftBrace){this.dumpLiteralNode(this.currentIndex);let e=null;if(this.currentIndex+2<this.inputLen&&(e=this.peek(this.currentIndex+2)),e==xe.Punctuation_Question&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(xe.Punctuation_Question),this.isDoubleBrace=!1;break}if(e==xe.Punctuation_Dollar&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfPhpRegion(xe.Punctuation_Dollar),this.isDoubleBrace=!1;break}if(e==xe.Punctuation_Octothorp&&!this.isNoParse){this.isDoubleBrace=!0,this.currentIndex+=3,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersCommentRegion(),this.isDoubleBrace=!1;break}if(!this.isNoParse)this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1;else if(this.fetch(11).replace(" ","").toLocaleLowerCase().startsWith("{{/noparse")){this.startIndex=this.currentIndex,this._recoveryStartIndex=this.currentIndex,this.isDoubleBrace=!0,this.currentIndex+=2,this._recoveryStartIndex=this.currentIndex,this.scanToEndOfAntlersRegion(),this.isDoubleBrace=!1,this.isNoParse=!1;break}else{this.currentContent.push(this.cur);continue}break}if(this.cur==xe.AtChar&&this.next!=null&&this.next==xe.LeftBrace){if(this.currentIndex+2>=this.inputLen){this.appendContent(this.next),this.dumpLiteralNode(this.currentIndex+1);break}let e=0;for(let t=this.currentIndex+1;t<this.inputLen&&this.chars[t]==xe.LeftBrace;t+=1)e+=1;this.currentContent=this.currentContent.concat(xe.LeftBrace.repeat(e).split("")),this.sourceContent=this.currentContent.concat(xe.LeftBrace.repeat(e).split("")),this.currentIndex+=e}this.appendContent(this.cur),this.next==null&&this.currentContent.length>0&&this.dumpLiteralNode(this.currentIndex)}}getRenderNodes(){return this.renderNodes}processInputText(e){if(this.originalContent=e,this.content=J.normalizeLineEndings(e),this.inputLen=this.content.length,this.content.startsWith("---")){let h=this.content.split(`
`),_=[],b=[];b.push("");for(let g=1;g<h.length;g++){let v=h[g];if(v.startsWith("---")){b.push(""),b=b.concat(h.slice(g+1)),this.content=b.join(`
`),this.frontMatter=_.join(`
`),this.frontMatterEndLine=g+1;break}else _.push(v),b.push("")}}let t=[...this.content.matchAll(/(\n)/gm)],r=t.length,i=this.seedStartLine,s=null,a=0,l=0;for(let h=0;h<r;h++){let _=t[h],b=_.index??0,g=b;s!=null?g=b-s:g=g+1,this.documentOffsets.set(b,{char:g,line:i});let v=0,O=0;h==0?(O=g-1,v=0):(v=l+1,O=b),this.lineIndex.set(i,{char:g,line:i,startIndex:v,endIndex:O}),this.lastDocumentOffsetKey=b,this.maxLine=i,i+=1,s=b,l=O,a=v}this.maxLine+=1;let u=[...this.content.matchAll(/@?{{/gm)],f=0,d=!1;return u.forEach(h=>{let _=h[0];if(_.startsWith(xe.AtChar)){f=this.content.indexOf(_,f)+2,d=!0;return}let b=this.content.indexOf(_,f);if(d&&f==b){f=b;return}this.antlersStartIndex.push(b),this.antlersStartPositionIndex.set(b,1),f=b+2,d=!1}),!0}prepareLiteralContent(e){return e.replace("@{{","{{")}scanToEndOfPhpRegion(e){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==e&&this.next!=null&&this.next==xe.RightBrace&&this.peek(this.currentIndex+2)==xe.RightBrace){let r=this.makeAntlersPhpNode(this.currentIndex,e==xe.Punctuation_Dollar);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.startIndex=this.currentIndex,this._recoveryStartIndex=this.startIndex,this.nodes.push(r),this.lastAntlersNode=r;break}if(this.appendContent(this.cur),this.next==null){let t=this.makeAntlersPhpFailedNode(this.currentIndex);this.nodes.push(t),this.lastAntlersNode=t,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_INCOMPLETE_PHP_EVALUATION_REGION,t,"Unexpected end of input while parsing Antlers PHP region."));break}}}appendContent(e){e!=null&&(this.currentContent.push(e),this.sourceContent.push(e))}scanToEndOfAntlersCommentRegion(){for(this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==xe.Punctuation_Octothorp&&this.next!=null&&this.next==xe.RightBrace&&this.peek(this.currentIndex+2)==xe.RightBrace){let t=this.makeAntlersTagNode(this.currentIndex,!0);this.currentContent=[],this.sourceContent=[],this.currentIndex+=3,this.nodes.push(t),this.lastAntlersNode=t;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersCommentFailedNode(this.currentIndex);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_INCOMPLETE_ANTELRS_COMMENT_REGION,e,"Unexpected end of input while parsing Antlers comment region."));break}}}scanToEndOfInterpolatedRegion(){this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0);let e=[];this.isScanningInterpolations=!0;let t=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),this.cur==xe.LeftBrace){if(this.prev==xe.AtChar){e.push(this.cur);continue}t+=1,e.push(this.cur)}else if(this.cur==xe.RightBrace){if(this.prev==xe.AtChar){e.push(this.cur);continue}if(t-=1,e.push(this.cur),t==0){this.interpolationEndOffsets.set(this.currentIndex,1);break}}else this.cur!=null&&e.push(this.cur);let r=e.join(""),s=("int_"+XA.Md5.hashStr(r)).substr(0,r.length),a=s.length,l=r.length;if(a<l){let u=l-a;s+="x".repeat(u)}return this.isScanningInterpolations=!1,{content:r,varContent:s}}bordersInterpolationRegion(e){if(this.interpolationEndOffsets.size==0)return!1;let t=e.offset-1;return t<=0?!1:this.interpolationEndOffsets.has(t)}getParseableContent(e){let t="";for(let r=0;r<=e;r++)this.content[r]==xe.LeftBrace||this.content[r]==xe.RightBrace?t+="~":t+=this.content[r];return t}resetEscapedContentState(){this.mayBeStartingEscapedContent=!1,this.isParsingEscapedContent=!1,this.escapedContentEndSymbol=null,this.escapedContentSymbolEncountered=0}scanToEndOfAntlersRegion(){for(this.resetEscapedContentState(),this.currentIndex==this.inputLen&&(this.doesHaveUnclosedStructures=!0),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==xe.LeftBrace&&this.prev==xe.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.isInterpolatedParser&&this.cur==xe.RightBrace&&this.prev==xe.AtChar){this.currentContent.pop(),this.appendContent(this.cur);continue}if(this.isParsingEscapedContent&&this.cur==this.escapedContentEndSymbol&&this.prev!=xe.String_EscapeCharacter&&(this.escapedContentSymbolEncountered+=1,this.escapedContentSymbolEncountered>=2&&this.resetEscapedContentState()),this.mayBeStartingEscapedContent&&(this.cur!=null&&J.ctypeSpace(this.cur)||this.next==null?this.resetEscapedContentState():this.cur==xe.Punctuation_Equals&&(this.next==xe.String_Terminator_SingleQuote||this.next==xe.String_Terminator_DoubleQuote)&&(this.mayBeStartingEscapedContent=!1,this.isParsingEscapedContent=!0,this.escapedContentEndSymbol=this.next,this.escapedContentSymbolEncountered=0)),this.cur==xe.String_EscapeCharacter&&this.prev!=null&&J.ctypeSpace(this.prev)&&this.next!=null&&(J.ctypeAlpha(this.next)||this.next==xe.Punctuation_Underscore||this.next==xe.AtChar)&&(this.mayBeStartingEscapedContent=!0),!this.isParsingEscapedContent&&this.cur==xe.LeftBrace){let e=this.scanToEndOfInterpolatedRegion(),t=this.currentIndex+this.seedOffset,r=t-e.content.length,i=this.getParseableContent(r-1);Oi.interpolatedVariables.push(e.varContent),this.currentContent=this.currentContent.concat(e.varContent.split("")),this.sourceContent=this.sourceContent.concat(e.content.split(""));let s=i+"{"+e.content+"}";this.interpolationRegions.set(e.varContent,{content:e.content,parseContent:s,varContent:e.varContent,startOffset:r,endOffset:t});continue}if(!this.isParsingEscapedContent&&this.cur==xe.RightBrace&&this.next!=null&&this.next==xe.RightBrace){let e=this.makeAntlersTagNode(this.currentIndex,!1);e.name!=null&&e.name.name=="noparse"&&(this.isNoParse=!0),this.currentIndex+=2,this.nodes.push(e),this.lastAntlersNode=e;break}if(this.appendContent(this.cur),this.next==null){let e=this.makeAntlersFailedNode(this.currentIndex,!1);this.nodes.push(e),this.lastAntlersNode=e,this.doesHaveUnclosedStructures=!0;let t="Unexpected end of input while parsing Antlers region.";this.isScanningInterpolations&&(t="Unexpected end of input wihle parsing interpolated Antlers region."),this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_INCOMPLETE_ANTLERS_REGION,e,t));break}}}makeAntlersPhpNode(e,t){let r=new Rs;return t?(r.rawStart="{{$",r.rawEnd="$}}"):(r.rawStart="{{?",r.rawEnd="?}}"),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+3>this.inputLen?(r.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,r,"Unexpected end of input while locating end of Antlers region.")),r):(this.lastAntlersEndIndex=e+3+this.seedOffset,r.endPosition=this.positionFromOffset(e+this.seedOffset,e+3+this.seedOffset),r)}makeAntlersPhpFailedNode(e){let t=new xc;t.rawStart="{{$",t.rawEnd="$}}",t._isEndVirtual=!0,t.content=this.currentContent.join(""),t.sourceContent=this.sourceContent.join(""),t.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let r=this.getLineText(t.startPosition.line),i=this.getLineIndex(t.startPosition.line);if(r!=null){let a=r.substr(this._recoveryStartIndex);t.content=a,t.sourceContent=a}let s=e+this.seedOffset;return i!=null&&(this.currentIndex=i.end,s=i.end),t.endPosition=this.positionFromOffset(s,s),t}makeAntlersCommentFailedNode(e){let t=new Do;this.isDoubleBrace?(t.rawStart="{{",t.rawEnd="}}"):(t.rawStart="{",t.rawEnd="}"),t._isEndVirtual=!0;let r=!1,i=this.currentContent.length;i>0&&this.currentContent[i-1]==xe.Punctuation_ForwardSlash&&(this.currentContent.pop(),r=!0),t.isComment=!0,t.isSelfClosing=r,t.withParser(this),t.content=this.currentContent.join(""),t.sourceContent=this.sourceContent.join(""),t.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let s=this.getLineText(t.startPosition.line),a=this.getLineIndex(t.startPosition.line);if(s!=null){let u=s.substr(this._recoveryStartIndex);t.content=u,t.sourceContent=u}let l=e+this.seedOffset;return a!=null&&(this.currentIndex=a.end,l=a.end),t.endPosition=this.positionFromOffset(l,l),t.interpolationRegions=new Map,this.interpolationRegions.forEach((u,f)=>{t.content.includes(f)&&t.interpolationRegions.set(f,u)}),t}makeAntlersFailedNode(e,t){let r=new it;this.isDoubleBrace?(r.rawStart="{{",r.rawEnd="}}"):(r.rawStart="{",r.rawEnd="}"),r._isEndVirtual=!0;let i=!1,s=this.currentContent.length;s>0&&this.currentContent[s-1]==xe.Punctuation_ForwardSlash&&(this.currentContent.pop(),i=!0),r.isComment=t,r.isSelfClosing=i,r.withParser(this),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset);let a=this.getLineText(r.startPosition.line),l=this.getLineIndex(r.startPosition.line);if(a!=null){let d=J.trimLeft(this.content.substring(r.startPosition.offset+r.rawStart.length-1,l?.end),"{");r.content=d,r.sourceContent=d}let u=e+this.seedOffset;l!=null&&(this.currentIndex=l.end,u=l.end),r.endPosition=this.positionFromOffset(u,u),r.interpolationRegions=new Map,this.interpolationRegions.forEach((d,h)=>{r.content.includes(h)&&r.interpolationRegions.set(h,d)});let f=this.nodeParser.parseNode(r);return this.mergeErrors(f.getErrors()),f}makeAntlersTagNode(e,t){let r=new X;this.isDoubleBrace?(r.rawStart="{{",r.rawEnd="}}"):(r.rawStart="{",r.rawEnd="}");let i=!1,s=this.currentContent.length;if(s>0&&this.currentContent[s-1]==xe.Punctuation_ForwardSlash&&(this.currentContent.pop(),i=!0),r.isInterpolationNode=this.isInterpolatedParser,r.isComment=t,r.isSelfClosing=i,r.withParser(this),r.content=this.currentContent.join(""),r.sourceContent=this.sourceContent.join(""),r.startPosition=this.positionFromOffset(this.startIndex+this.seedOffset,this.startIndex+this.seedOffset),e+2>this.inputLen)return r.endPosition=this.positionFromOffset(this.inputLen,this.inputLen-1),this.doesHaveUnclosedStructures=!0,this.antlersErrors.push(Q.makeSyntaxError(P.TYPE_UNEXPECTED_EOI_WHILE_MANIFESTING_ANTLERS_NODE,r,"Unexpected end of input while locating end of Antlers region.")),r;if(t?this.lastAntlersEndIndex=e+2+this.seedOffset:this.lastAntlersEndIndex=e+1+this.seedOffset,r.endPosition=this.positionFromOffset(this.lastAntlersEndIndex,this.lastAntlersEndIndex),r.interpolationRegions=new Map,this.interpolationRegions.forEach((l,u)=>{r.content.includes(u)&&r.interpolationRegions.set(u,l)}),r.isComment)return r;let a=this.nodeParser.parseNode(r);return this.mergeErrors(a.getErrors()),a}mergeErrors(e){e.forEach(t=>{this.antlersErrors.push(t)})}getNodes(){return this.nodes}getNodesBetween(e,t){let r=[];return this.nodes.forEach(i=>{(i.startPosition?.offset??0)>e.offset&&(i.endPosition?.offset??0)<t.offset&&r.push(i)}),r}antlersNodes(){return this.nodes.filter(function(e){return e instanceof X})}dumpLiteralNode(e){this.isNoParse||(this.currentContent.length>0&&this.nodes.push(this.makeLiteralNode(this.currentContent,this.startIndex,e)),this.currentContent=[],this.sourceContent=[])}makeLiteralNode(e,t,r){let i=new nt;return i.content=e.join(""),i.sourceContent=this.sourceContent.join(""),i.startPosition=this.positionFromOffset(t,t),i.endPosition=this.positionFromOffset(r,r),i.sourceContent=this.content.substr(t,r),i.withParser(this),i}addAntlersError(e){this.antlersErrors.push(e)}getAntlersErrors(){return this.antlersErrors}getStructureErrors(){return this.structureErrors}},V=xe;V.K_CHAR="char",V.K_LINE="line",V.NewLine=`
`,V.AtChar="@",V.LeftBrace="{",V.RightBrace="}",V.LeftBracket="[",V.RightBracket="]",V.String_EscapeCharacter="\\",V.String_Terminator_DoubleQuote='"',V.String_Terminator_SingleQuote="'",V.Punctuation_Question="?",V.Punctuation_Equals="=",V.Punctuation_Comma=",",V.Punctuation_Colon=":",V.Punctuation_Semicolon=";",V.Punctuation_Exclamation="!",V.Punctuation_Pipe="|",V.Punctuation_Ampersand="&",V.Punctuation_LessThan="<",V.Punctuation_GreaterThan=">",V.Punctuation_Octothorp="#",V.Punctuation_Tilde="~",V.Punctuation_FullStop=".",V.Punctuation_Dollar="$",V.Punctuation_Asterisk="*",V.Punctuation_Percent="%",V.Punctuation_Plus="+",V.Punctuation_Minus="-",V.Punctuation_Underscore="_",V.Punctuation_ForwardSlash="/",V.Punctuation_Caret="^",V.LeftParen="(",V.RightParent=")";var ut=class{static findAssignmentNodes(e){let t=[];for(let r=0;r<e.length;r++)It.isAssignmentOperatorNode(e[r])&&t.push(e[r]);return t}static findAbstractNodesBefore(e,t){return this.findAbstractNodesBeforePosition(e.startPosition,t)}static findAbstractNodesBeforePosition(e,t){if(e==null)return[];let r=[];for(let i=0;i<t.length;i++){let s=t[i];if(s.startPosition!=null){if(s.startPosition.index>e.index)break;r.push(s)}}return r}static isBefore(e,t){return e.startPosition==null?!1:e.startPosition.index<t.index}static isAfter(e,t){return e.startPosition==null?!1:e.startPosition.index>t.index}static findNodesBeforePosition(e,t){let r=[];if(e==null)return r;for(let i=0;i<t.length;i++){let s=t[i];if(!ut.isLiteralType(s)&&s.startPosition!=null&&s.endPosition!=null){if(s.startPosition.index>e.index)break;r.push(s)}}return r}static findNodesAfterPosition(e,t){let r=[];if(e==null)return r;for(let i=0;i<t.length;i++){let s=t[i];ut.isLiteralType(s)||s.startPosition!=null&&s.startPosition.index>e.index&&r.push(s)}return r}static findNodeBeforePosition(e,t){if(e==null)return null;let r=null;for(let i=0;i<t.length;i++){let s=t[i];if(!ut.isLiteralType(s)&&s.startPosition!=null){if(s.startPosition.index>e.index)break;r=s}}return r}static findNodeAfterPosition(e,t){if(e==null)return null;for(let r=0;r<t.length;r++){let i=t[r];if(!ut.isLiteralType(i)&&i.startPosition!=null&&i.startPosition.index>e.index)return i}return null}static findNodeAtPosition(e,t){if(e==null)return null;for(let r=0;r<t.length;r++){let i=t[r];if(!ut.isLiteralType(i)&&i.startPosition!=null&&i.endPosition!=null&&e.index>=i.startPosition.index&&e.index<=i.endPosition.index)return i}return null}static isLiteralType(e){return e instanceof qt||e instanceof nt}};var Ea=class{static isModifierLeftOf(e,t){return Ea.isModifierLeftOfPosition(e.startPosition,t)}static isModifierLeftOfPosition(e,t){let r=ut.findAbstractNodesBeforePosition(e,t);for(let i=r.length-1;i>=0;i--){let s=r[i];if(s instanceof Rt&&i-1>0&&r[i-1]instanceof Ut)return!0;if(s instanceof Et){if(i==r.length-1)continue;return!1}if(s instanceof Rt)return!1;if(s instanceof Jt)return!0}return!1}};var Ra=class{constructor(){this.isRightOfOperator=!1;this.isLeftOfOperator=!1}static resolveContext(e,t,r){let i=new Ra;return r!=null&&(r.prev!=null&&It.isOperatorType(r.prev)&&(i.isRightOfOperator=!0),r.next!=null&&It.isOperatorType(r.next)&&(i.isLeftOfOperator=!0)),i}};var If=class{constructor(){this.inTagPart=!1;this.inMethodPart=!1}};var ka=class{constructor(){this.modifierChain=null;this.activeModifier=null;this.name="";this.inModifierName=!1;this.inModifierParameter=!1;this.valueCount=0;this.activeValueIndex=-1;this.activeValue=null}static resolveContext(e,t,r,i){let s=t.getParser(),a=new ka,l=s.getLanguageParser().getCreatedModifierChains(),u=null;for(let d=0;d<l.length;d++){let h=l[d];if(e.isWithin(h.startPosition,h.endPosition,2)){for(let _=0;_<h.modifierChain.length;_++){let b=h.modifierChain[_];if(e.isWithin(b.startPosition,b.endPosition,2)){u=b;break}}if(u!=null)break}}u==null&&r instanceof Ut&&i.getDocumentParser().getLanguageParser().hasModifierConstruct(r)&&(u=i.getDocumentParser().getLanguageParser().getModifierConstruct(r));let f=i.wordLeftAt(e);if(u==null&&f!=null&&ht.instance?.hasModifier(f)&&t.modifierChain!=null&&t.modifierChain.modifierChain.length>0)for(let d=0;d<t.modifierChain.modifierChain.length;d++){let h=t.modifierChain.modifierChain[d];if(h.modifier!=null&&h.modifier.name==f){u=h;break}}if(u!=null){if(a.activeModifier=u,u.nameNode!=null&&(a.name=u.nameNode.name),u.nameNode!=null&&e.isWithin(u.nameNode.startPosition,u.nameNode.endPosition,1)&&(a.inModifierName=!0),u.methodStyleArguments!=null){if(a.valueCount=u.methodStyleArguments.args.length,!a.inModifierName){for(let d=0;d<u.methodStyleArguments.args.length;d++){let h=u.methodStyleArguments.args[d];e.isWithin(h.startPosition,h.endPosition,1)&&(a.activeValueIndex=d,a.activeValue=h)}a.activeValueIndex===-1&&e.isWithin(u.methodStyleArguments.startPosition,u.methodStyleArguments.endPosition)&&(a.valueCount+=1,a.activeValueIndex=a.valueCount-1)}}else if(a.valueCount=u.valueNodes.length,!a.inModifierName)for(let d=0;d<u.valueNodes.length;d++){let h=u.valueNodes[d];if(e.isWithin(h.startPosition,h.endPosition,1)){a.activeValueIndex=d,a.activeValue=h;break}}}return a}};var wa=class{constructor(){this.parameter=null;this.isInName=!1;this.isInValue=!1}static resolveContext(e,t){let r=new wa;return r.parameter=t,e.isWithinRange(t.namePosition)?r.isInName=!0:e.isWithinRange(t.valuePosition)&&(r.isInValue=!0),r}};var xf=class{constructor(){this.refId="";this.node=null;this.leftPunctuation=null;this.rightPunctuation=null;this.leftChar=null;this.rightChar=null;this.word=null;this.char=null;this.interpolatedContext=!1;this.leftWord=null;this.rightWord=null;this.isCursorInIdentifier=!1;this.root=null;this.identifierContext=null;this.position=null;this.feature=null;this.isInParameter=!1;this.subContext=null;this.parameterContext=null;this.modifierContext=null;this.generalContext=null;this.variableContext=null;this.cursorContext=nm.Unknown;this.refId=Lo()}},nm=(a=>(a[a.Unknown=0]="Unknown",a[a.Variable=1]="Variable",a[a.Modifier=2]="Modifier",a[a.Parameter=3]="Parameter",a[a.General=4]="General",a[a.LanguageOperator=5]="LanguageOperator",a))(nm||{});var Oa=class{constructor(){this.variableNode=null;this.varPathText=""}static resolveContext(e,t,r,i){if(r==null)return null;let s=r,a=i.getDocumentParser().getLanguageParser(),l=new Oa,u=i.wordAt(e)??"";r instanceof mt&&a.isMergedVariableComponent(r)==!1&&r.prev instanceof ye&&(s=r.prev);let f="";if(a.isMergedVariableComponent(s)){let h=a.getMergedVariable(s);h.startPosition!=null&&(f=i.getText(h.startPosition.index,e.index).trim()),l.variableNode=h}else s instanceof ye&&(l.variableNode=s,f=s.name,s.variableReference!=null&&(f=s.variableReference.normalizedReference));f.length>0&&(f=pn(f,"\\.",":"));let d=f.split(":");return u.trim().length>0&&d.pop(),f=d.join(":"),f.endsWith(":")&&(f=Od(f,":")),l.varPathText=f,l}};var fi=class{static resolveIdentifierContext(e,t){let r=new If;return t.nameMethodPartStartsOn!=null?e.char<t.nameMethodPartStartsOn.char?(r.inTagPart=!0,r.inMethodPart=!1):(r.inTagPart=!1,r.inMethodPart=!0):(r.inMethodPart=!1,r.inTagPart=!0),r}static resolveContext(e,t,r,i=!1,s=null){if(t==null||e==null)return null;if(t instanceof En||t instanceof X){let a=new xf;if(t.nameStartsOn!=null&&e.line==t.nameStartsOn.line){let f=!1;e.char>=t.nameStartsOn.char&&(f=!0),t.nameEndsOn!=null&&e.char>t.nameEndsOn.char&&(f=!1),f&&(a.isCursorInIdentifier=!0,a.identifierContext=fi.resolveIdentifierContext(e,t))}t.addContext(a),s?.addContext(a),a.interpolatedContext=i,a.node=t,a.position=e,a.root=s,a.leftPunctuation=r.punctuationLeftAt(e),a.rightPunctuation=r.punctuationRightAt(e),a.leftChar=r.charLeftAt(e),a.rightChar=r.charRightAt(e),a.isCursorInIdentifier==!0&&a.leftChar==" "&&(a.leftChar=":"),a.word=r.wordAt(e),a.char=r.charAt(e),a.leftWord=r.wordLeftAt(e),a.rightWord=r.wordRightAt(e);let l=!1;if(t.parameters.length>0)for(let f=0;f<t.parameters.length;f++){let d=t.parameters[f];if(d.blockPosition!=null&&d.blockPosition.start!=null&&d.blockPosition.end!=null&&e.char>d.blockPosition.start.char&&e.char<=d.blockPosition.end.char+1&&e.line>=(d.namePosition?.start?.line??d.blockPosition.start.line)&&e.line<=(d.valuePosition?.end?.line??d.blockPosition.end.line)){a.cursorContext=3,a.parameterContext=wa.resolveContext(e,d),a.isInParameter=!0,a.feature=d,l=!0;break}}if(l||t.runtimeNodes.forEach(f=>{f.startPosition!=null&&f.endPosition!=null&&e.isWithin(f.startPosition,f.endPosition,1)&&(a.feature=f)}),l&&t.interpolationRegions.size>0){let f=Array.from(t.interpolationRegions,([d,h])=>h);for(let d=0;d<f.length;d++){let h=f[d];if(e.index>=h.startOffset&&e.index<=h.endOffset){let _=t.getInterpolationNode(h.varContent);return fi.resolveContext(e,_,r,!0,s)}}}return a.feature instanceof ye&&a.feature.isInterpolationReference&&a.feature.parent!=null&&a.feature.parent instanceof X&&a.feature.parent.processedInterpolationRegions.has(a.feature.name)?fi.resolveContext(e,a.feature.parent.getInterpolationNode(a.feature.name),r,!0,s):(Ea.isModifierLeftOfPosition(e,t.runtimeNodes)?(a.cursorContext=2,a.modifierContext=ka.resolveContext(e,t,a.feature,r)):l||(a.cursorContext=4,a.generalContext=Ra.resolveContext(e,t,a.feature)),a.variableContext=Oa.resolveContext(e,t,a.feature,r),a)}return null}};var us=class{static isPairedNode(e){return e instanceof Xt?!0:e instanceof En||e instanceof X?e.isClosedBy!=null:!1}static findAncestorsBeforePosition(e,t){let r=[],i=[],s=-1,a=-1;for(let l=0;l<t.length;l++){let u=t[l];if(u.isClosedBy!=null&&u.isClosedBy.endPosition?.isBefore(e)&&(i.push(u),i.push(u.isClosedBy),s=u.isClosedBy.endPosition.line,a=u.isClosedBy.endPosition.char),!(s>-1&&u.endPosition!=null&&(u.endPosition.line<s||u.endPosition.line==s&&a>-1&&u.endPosition.char<a))){if(u.startPosition!=null){if(e.isBefore(u.startPosition))break;if(u.startPosition.line==e.line&&e.char<=u.startPosition.char){i.push(u);continue}}if(_n.instance?.requiresClose(u)&&u.isClosedBy!=null){let f=u.isClosedBy;if(f.startPosition?.isBefore(e)){i.push(u),i.push(f);continue}else f.startPosition?.line==e.line&&f.startPosition?.char<e.char?i.push(u):r.push(u)}else if(u.parent!=null){let f=u.parent;if(i.includes(f)){i.push(u);continue}else u.endPosition?.isBefore(e)?r.push(u):i.push(u)}else r.push(u)}}return r}};var Af=class{constructor(e){this.doc=e}getAncestorsAt(e,t){let r=this.position(e,t);return r==null?[]:us.findAncestorsBeforePosition(r,this.doc.getAllAntlersNodes())}getNameAt(e,t){let r=this.getNodeAt(e,t);return r instanceof X?r.name:null}getScopeAt(e,t){let r=this.getNodeAt(e,t);return r instanceof X&&r.currentScope!=null?r.currentScope:null}getFeaturesAt(e,t){let r=this.position(e,t),i=this.getNodeAt(e,t);return fi.resolveContext(r,i,this.doc,!1,i)}getNodeAt(e,t){return ut.findNodeAtPosition(this.position(e,t),this.doc.getDocumentParser().getNodes())}getNodeBefore(e,t){return ut.findNodeBeforePosition(this.position(e,t),this.doc.getDocumentParser().getNodes())}getNodeAfter(e,t){return ut.findNodeAfterPosition(this.position(e,t),this.doc.getDocumentParser().getNodes())}getNodesBefore(e,t){return ut.findNodesBeforePosition(this.position(e,t),this.doc.getDocumentParser().getNodes())}getAssignmentsBefore(e,t){let r=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),i=[],s=this.position(e,t);return s!=null&&r.forEach(a=>{ut.isBefore(a.target,s)&&i.push(a)}),i}getAssignmentsAfter(e,t){let r=this.doc.getDocumentParser().getLanguageParser().getRuntimeAssignments(),i=[],s=this.position(e,t);return s!=null&&r.forEach(a=>{ut.isAfter(a.target,s)&&i.push(a)}),i}getNodesAfter(e,t){return ut.findNodesAfterPosition(this.position(e,t),this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e,t){let r=this.getNodeBefore(e,t);return r==null?!1:us.isPairedNode(r)}position(e,t){return this.doc.getDocumentParser().positionFromCursor(e,t)}charLeftAt(e,t){return this.doc.getDocumentParser().charLeftAtCursor(e,t)}charAt(e,t){return this.doc.getDocumentParser().charAtCursor(e,t)}charRightAt(e,t){return this.doc.getDocumentParser().charRightAtCursor(e,t)}wordLeftAt(e,t,r=4){return this.doc.getDocumentParser().wordLeftAtCursor(e,t,r)}wordRightAt(e,t,r=4){return this.doc.getDocumentParser().wordRightAtCursor(e,t,r)}wordAt(e,t,r=4){return this.doc.getDocumentParser().wordAtCursor(e,t,r)}punctuationLeftAt(e,t,r=4){return this.doc.getDocumentParser().punctuationLeftAtCursor(e,t,r)}punctuationRightAt(e,t,r=4){return this.doc.getDocumentParser().punctuationRightAtCursor(e,t,r)}};var Pf=class{constructor(e){this.doc=e}hasStructureErrors(){return this.doc.getDocumentParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getDocumentParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let e=[],t=[];return this.doc.getAllAntlersNodes().forEach(r=>{r.getErrors().forEach(i=>{e.includes(i.hash())==!1&&(e.push(i.hash()),t.push(i))})}),this.doc.getDocumentParser().getAntlersErrors().forEach(r=>{e.includes(r.hash())==!1&&(e.push(r.hash()),t.push(r))}),t}};var qP=Me(xm(),1);var xn=Me(VP(),1),XZ=xn.default.binaryOptions,JZ=xn.default.boolOptions,ZZ=xn.default.intOptions,eee=xn.default.nullOptions,tee=xn.default.strOptions,nee=xn.default.Schema,ree=xn.default.Alias,iee=xn.default.Collection,see=xn.default.Merge,oee=xn.default.Node,BP=xn.default.Pair,ec=xn.default.Scalar,tc=xn.default.YAMLMap,qa=xn.default.YAMLSeq;var Gf=class{constructor(e){this.documentScope=null;this.project=e}getKeyValue(e){return e instanceof ec?e.value:""}getNodeValue(e){return e instanceof ec?e.value:e instanceof tc?this.analyzeDocument(e.items):e instanceof qa?this.analyzeDocument(e.items):""}getScalarRuntimeType(e){return parseFloat(e).toString()==e||parseInt(e).toString()==e?"number":"string"}analyzeDocument(e){let t=new Mn(this.project);return e.forEach(r=>{if(r instanceof BP){let i=this.getKeyValue(r.key),s=this.getNodeValue(r.value);if(r.value instanceof ec)t.addVariable({dataType:this.getScalarRuntimeType(s),introducedBy:null,name:i,sourceField:null,sourceName:"*frontmatter"});else if(r.value instanceof qa&&r.key instanceof ec){let a=new Mn(this.project);r.value.items.forEach(l=>{let u=this.getNodeValue(l);a.addVariable({dataType:this.getScalarRuntimeType(u),introducedBy:null,name:l.value,sourceField:null,sourceName:"*frontmatter"})}),t.addScopeList(r.key.value,a)}else t.addScopeList(i,s)}}),t}parse(e){try{let t=qP.default.parseDocument(e);t.contents instanceof tc&&(this.documentScope=this.analyzeDocument(t.contents.items))}catch{this.documentScope=null}}hasScope(){return this.documentScope!=null}getScope(){return this.documentScope}};var Wf=class{constructor(e){this.doc=e}getAncestors(e){return us.findAncestorsBeforePosition(e,this.doc.getAllAntlersNodes())}getNodeAt(e){return ut.findNodeAtPosition(e,this.doc.getDocumentParser().getNodes())}getNodesBefore(e){return ut.findNodesBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeBefore(e){return ut.findNodeBeforePosition(e,this.doc.getDocumentParser().getNodes())}getNodeAfter(e){return ut.findNodeAfterPosition(e,this.doc.getDocumentParser().getNodes())}getNodesAfter(e){return ut.findNodesAfterPosition(e,this.doc.getDocumentParser().getNodes())}getIsWithinPairedNode(e){let t=this.getNodeBefore(e);return t==null?!1:us.isPairedNode(t)}filter(e){return this.doc.getDocumentParser().getNodes().filter(e)}getComments(){let e=[];return this.doc.getAllNodes().forEach(t=>{t instanceof X&&t.isComment&&e.push(t)}),e}getMultilineNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{t instanceof X&&!t.isComment&&t.startPosition?.line!=t.endPosition?.line&&e.push(t)}),e}getMultiLineComments(){let e=[];return this.getComments().forEach(t=>{t.startPosition?.line!=t.endPosition?.line&&e.push(t)}),e}getAllLiteralNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{(t instanceof nt||t instanceof qt)&&e.push(t)}),e}getStructuralNodes(){let e=[];return this.doc.getDocumentParser().getRenderNodes().forEach(t=>{t instanceof X?e.push(t):t instanceof Xt&&t.logicBranches.length>0&&t.logicBranches.forEach(r=>{if(r.head!=null){let i=r.head;i.originalNode!=null?e.push(i.originalNode):e.push(i)}})}),e}getAllRuntimeNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{(t instanceof En||t instanceof X)&&t.runtimeNodes.length>0&&t.runtimeNodes.forEach(r=>{e.push(r)})}),e}getAllParameterNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{(t instanceof En||t instanceof X)&&t.hasParameters&&t.parameters.forEach(r=>{e.push(r)})}),e}getAssignmentNodes(){return ut.findAssignmentNodes(this.getAllRuntimeNodes())}};var Hf=class{constructor(e){this.doc=e}getAllSelfClosingNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{t instanceof X&&t.isSelfClosing&&e.push(t)}),e}getAllPairedNodes(){let e=[];return this.doc.getAllNodes().forEach(t=>{(t instanceof X||t instanceof it)&&t.isClosedBy!=null&&!t.isSelfClosing&&e.push(t)}),e}};var ao=class{static printCommentLines(e,t,r){let i=e.getContent(),s=i.trim();if(s.includes(`
`)){let a=J.breakByNewLine(i),l=[];a.forEach(d=>{if(d.trim().length==0){l.push(" ".repeat(t+r)+d.trim());return}let h=d.length-d.trim().length,_=d.trim();(_.startsWith("@desc")||_.startsWith("@set")||_.startsWith("@name"))&&(h=t),l.push(" ".repeat(t+r+h-t)+d.trim())}),l.length>0&&l[l.length-1].trim().length==0&&l.pop();let u=l.join(`
`),f=`{{#
`;return f+=u,f+=`
`+" ".repeat(r)+"#}}",f}return"{{# "+s+" #}}"}static async printCommentAsync(e,t,r,i){let s=e.getContent(),a=s;if(a.includes(`
`)&&!(a.includes("@desc")||a.includes("@set")||a.includes("@name")))try{let l=a;i!=null&&(l=await i(l));let u=J.breakByNewLine(l),f=[];return u.forEach(d=>{if(d.trim().length==0){f.push(" ".repeat(t+r)+d.trim());return}let h=d.length-d.trim().length;f.push(" ".repeat(t+r+h)+d.trim())}),f.length>0&&f[f.length-1].trim().length==0&&f.pop(),`{{#
`+f.join(`
`)+`
`+" ".repeat(r)+"#}}"}catch{}return this.printCommentLines(e,t,r)}static printComment(e,t,r,i){let s=e.getContent(),a=s.trim();if(a.includes(`
`)&&!(a.includes("@desc")||a.includes("@set")||a.includes("@name")))try{let l=a;i!=null&&(l=i(l));let u=J.breakByNewLine(l),f=[];return u.forEach(d=>{if(d.trim().length==0){f.push(" ".repeat(t+r)+d.trim());return}let h=d.length-d.trim().length;f.push(" ".repeat(t+r+h)+d.trim())}),f.length>0&&f[f.length-1].trim().length==0&&f.pop(),`{{#
`+f.join(`
`)+`
`+" ".repeat(r)+"#}}"}catch{}return this.printCommentLines(e,t,r)}};var di=class{static indentRelative(e,t){let r=J.breakByNewLine(e),i=[];for(let l=0;l<r.length;l++)if(r[l].trim().length>0){i=r.slice(l);break}for(let l=i.length-1;l>=0&&i[l].trim().length==0;l--)i.pop();let s=-1,a="";for(let l=0;l<i.length;l++){let u=i[l],f=u.trimLeft(),d=u.length-f.length;(l==0||d<s)&&(s=d,a=u)}if(s>=0){let l=" ".repeat(t);for(let u=0;u<i.length;u++){let f=i[u];if(f.trim().length==0){i[u]="";continue}let d=f.substring(s);if(u==0){i[u]=f.trimLeft();continue}else i[u]=l+d.trimLeft()}}return i.join(`
`)}static shiftIndentLTrim(e,t,r=!1,i=4,s=!0,a=!1){t<0&&(t=0);let l=J.breakByNewLine(e.trim()),u=[],f=!1,d=!1;l.length>=2&&(f=l[0].length-l[0].trimStart().length!=0,d=l[l.length-1].length-l[l.length-1].trimStart().length!=0);for(let _=0;_<l.length;_++){if(_==0&&r){u.push(l[_]);continue}if(_==l.length-1&&a){u.push(l[_]);continue}let b=l[_];if(_>0&&!f&&d){u.push(b);continue}u.push(" ".repeat(t)+b)}let h=u.join(`
`);if(s&&u.length>0&&t-i>i&&u[u.length-1].trim()==") }}"){l=J.breakByNewLine(h.trim()),u=[];for(let _=0;_<l.length;_++){if(_==0&&r){u.push(l[_]);continue}if(_==l.length-1&&a){u.push(l[_]);continue}let b=l[_];if(_==l.length-1){u.push(b);break}u.push(" ".repeat(i)+b)}h=u.join(`
`)}return h}static shiftIndent(e,t,r=!1,i=4,s=!0,a=!1){t<0&&(t=0);let l=J.breakByNewLine(e.trim()),u=[];for(let d=0;d<l.length;d++){if(d==0&&r){u.push(l[d]);continue}if(d==l.length-1&&a){u.push(l[d]);continue}let h=l[d];u.push(" ".repeat(t)+h)}let f=u.join(`
`);if(s&&u.length>0&&t-i>i&&u[u.length-1].trim()==") }}"){l=J.breakByNewLine(f.trim()),u=[];for(let d=0;d<l.length;d++){if(d==0&&r){u.push(l[d]);continue}if(d==l.length-1&&a){u.push(l[d]);continue}let h=l[d];if(d==l.length-1){u.push(h);break}u.push(" ".repeat(i)+h)}f=u.join(`
`)}return f}static shiftClean(e,t){let r=J.breakByNewLine(e),i=[],s=" ".repeat(t),a=!1;return r.forEach(l=>{l.trim().length>0&&(a=!0),a&&i.push(s+l)}),i.join(`
`)}static inferIndentLevel(e,t,r){let i=0,s=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.includes(t)){let u=l.trimLeft();i=l.length-u.length,s=a;break}}if(s>0)for(let a=s-1;a>=0;a--){let l=e[a],u=l.trim(),f=l.trimLeft(),d=l.length-u.length;if(f.length!=0&&d!=i&&d<i){let h=i-d;return{targetLevel:i,referenceLevel:d,sourceTabSize:h}}}return{targetLevel:i,referenceLevel:i,sourceTabSize:r}}static indent(e,t,r){let i=di.inferIndentLevel(e,t,r);return" ".repeat(i.targetLevel)}};var Yf=class{constructor(e,t,r){this.buffer="";this.closeString="";this.relativeIndentSize=0;this.indentSeed=0;this.baseIndent=t,e.isInterpolationNode?(this.buffer="{",this.closeString="}"):(this.buffer="{{ ",e.isSelfClosing?this.closeString=" /}}":this.closeString=" }}"),e.pathReference?.isStrictTagReference&&(this.buffer+="%"),r!=null&&r.trim().length>0&&(this.buffer+=r+" ")}setIndentSeed(e){return this.indentSeed=e,this}close(){return this.closeString==" }}"?this.buffer.endsWith(" ")?this.buffer+="}}":this.buffer+=this.closeString:this.buffer+=this.closeString,this}appendT(e){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer+=e,this}appendTS(e,t=!1){return this.buffer.endsWith(" ")&&(this.buffer=this.buffer.trimEnd()),this.buffer.endsWith("{")&&!t&&(e=e.trimStart()),this.buffer+=e,this}append(e){return this.buffer+=e,this}appendOS(e){return this.buffer.endsWith(" ")==!1&&this.buffer.endsWith("(")==!1&&this.buffer.endsWith("{")==!1&&this.buffer.endsWith("[")==!1&&this.buffer.endsWith(":")==!1&&(this.buffer+=" "),this.append(e)}appendS(e){let t="";return this.buffer.endsWith(" ")==!1&&(t+=" "),t+=e+" ",this.buffer+=t,this}indent(){let e=this.baseIndent;return e==0?e=1:e+=2,this.relativeIndentSize>0&&(e+=this.relativeIndentSize),this.buffer+=" ".repeat(e),this}addIndent(e){return e<=0?this:(this.buffer+=" ".repeat(e),this)}paramS(e){let t=" ";return e.isVariableReference&&(t+=":"),t+=e.name+"="+e.nameDelimiter+e.value+e.nameDelimiter,this.append(t),this}replace(e,t){return this.buffer=pn(this.buffer,e,t),this}relativeIndent(e){let t=this.buffer.split(`
`);if(t.length==0)return this;let r=t[t.length-1].trimEnd();return r.endsWith("(")&&(r=r.slice(0,-1)),r.endsWith(e)==!1?this:(this.relativeIndentSize=r.lastIndexOf(e),this)}newlineIndent(){return this.newLine(),this.indent(),this}newlineNDIndent(){return this.buffer=this.buffer.trimEnd(),this.newLine(),this.indent(),this}newLine(){return this.buffer+=`
`,this}getContent(){return this.buffer}endsWith(e){return this.buffer.endsWith(e)}};var lo=class{static prettyPrintNode(e,t,r,i,s,a){let l=e.getTrueRuntimeNodes(),u=0,f=0;if(l.length>0){let d=new Yf(e,r,s);a!=null&&d.setIndentSeed(a);let h=null;for(let b=0;b<l.length;b++){let g=l[b];if(h!=null&&g.endPosition?.isBefore(h.startPosition))continue;let v=!1;if(g instanceof Et?!(g.next instanceof Et)&&g.next!=null&&(!It.isOperatorType(g.next)||!It.isAssignmentOperator(g.next))&&(!(g.next instanceof Wt)&&!(g.next instanceof mt)&&!g.isSwitchGroupMember&&!It.isOperatorType(g.next)&&(v=!0,g.next instanceof ye&&g.next.name=="as"&&(v=!1)),g.next instanceof Jt&&(v=!1)):!g.prev?.isVirtual&&g.prev?.isVirtualGroupOperatorResolve&&g.prev.producesVirtualStatementTerminator&&g.next!=null&&!(g.prev instanceof ye)&&!(g.next instanceof Ln)&&!(g instanceof Ln)&&d.newlineIndent(),g instanceof ye){if(g.convertedToOperator){if(g.name=="arr")d.appendT(" arr");else if(g.name=="switch"||g.name=="list")if(d.appendTS(" "+g.name,!0),b+1<l.length){if(!(l[b+1]instanceof Rt))break;d.append("("),g.name!="list"&&d.relativeIndent(g.name).newLine().indent(),b+=1,h=l[b+1];continue}else break;else if(f+=1,f>1)d.newlineNDIndent().indent().addIndent(6).appendS(g.name);else{if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g)){d.append(g.name);continue}d.appendS(g.name)}h=g;continue}if(g.mergeRefName!=null&&g.mergeRefName.trim().length>0&&g.mergeRefName!=g.name)d.append(g.mergeRefName.trim());else if(g.name=="as")d.appendOS("as");else{if(g.methodTarget!=null){g.variableReference!=null&&g.variableReference.pathParts.forEach(O=>{O instanceof tn&&(d.append(O.name),d.append("."))}),d.append(g.methodTarget.method?.name??"");continue}d.append(g.name.trim())}}else if(g instanceof Qn)if(d.appendTS(" list"),b+1<l.length){if(!(l[b+1]instanceof Rt))break;d.append("("),b+=1,h=l[b+1];continue}else break;else if(g instanceof Jt)d.appendS("|");else if(g instanceof mt){if(h!=null&&g.startPosition?.isBefore(h.endPosition)||g.next instanceof ye&&g.next.mergeRefName.startsWith(":"))continue;if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g)){d.endsWith(":")||d.append(":");continue}if(g.prev!=null&&g.next!=null&&rt.distance(g.prev,g)<=1&&rt.distance(g.next,g)<=1){d.append(":"),h=g;continue}if(t.getDocumentParser().getLanguageParser().isActualModifierSeparator(g)){d.append(":"),h=g;continue}if(h instanceof Ut||h instanceof kt){d.append(":"),h=g;continue}d.appendS(":")}else if(g instanceof Ut)d.append(g.name);else if(g instanceof Ln)d.appendS("?");else if(g instanceof rn){if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g))continue;if(g.isTenaryBranchSeparator){d.appendS(":"),h=g;continue}if(t.getDocumentParser().getLanguageParser().isActualModifierSeparator(g)){d.append(":"),h=g;continue}d.append(":")}else if(g instanceof kt)d.append(g.value.trim());else if(g instanceof Rt)d.append("(");else if(g instanceof Et)d.append(")");else if(g instanceof gt){if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g))continue;g.sourceContent!=""?d.appendOS(g.sourceContent):d.appendOS(g.sourceTerminator+g.value+g.sourceTerminator)}else if(g instanceof Nt)g.isSwitchGroupMember?d.append(",").newlineIndent():d.append(", ");else if(g instanceof Pt){if(h=g,t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g))continue;let O=g.value?.toString()??"";g.rawLexContent!=null&&g.rawLexContent.trim().length>0&&(O=g.rawLexContent.trim()),d.append(O)}else if(g instanceof On)d.appendS("=");else if(g instanceof Zt)d.appendS("=>");else if(g instanceof Rn)d.appendS("+");else if(g instanceof nn){if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g)){d.append("-");continue}if(g.prev!=null&&g.next!=null&&rt.distance(g.prev,g)<=1&&rt.distance(g.next,g)<=1){g.next instanceof Pt&&g.prev instanceof Pt?d.appendS("-"):d.append("-"),h=g;continue}d.appendS("-")}else if(g instanceof wn)d.appendS("*");else if(g instanceof kn){if(h=g,g.startPosition?.isBefore(e.nameEndsOn)){d.append("/");continue}if(t.getDocumentParser().getLanguageParser().isMergedVariableComponent(g))continue;d.appendS("/");continue}else g instanceof Wt?g.isListGroupMember?(d.append(";").newlineIndent().indent().addIndent(7),b+1<l.length&&!(l[b+1]instanceof Et)&&d.indent()):(u+=1,u<i.maxAntlersStatementsPerLine?d.appendT("; "):(d.appendT(";").newlineIndent(),u=0)):g instanceof Ht?g.content=="not"?d.appendS("not"):d.append("!"):g instanceof Wn?b==0&&e.pathReference?.isStrictTagReference||d.appendS(g.rawContent()):g instanceof At?d.append("->"):d.appendS(g.rawContent());v&&d.newlineIndent(),h=g}e.hasParameters&&e.parameters.forEach(b=>{d.paramS(b)}),d.close();let _=d.getContent();return e.processedInterpolationRegions.size>0&&new Map([...e.processedInterpolationRegions.entries()].sort().reverse()).forEach((g,v)=>{let O=lo.prettyPrintNode(g[0],t,r,i,null,null);_=pn(_,v,O)}),_}return e.getTrueRawContent()}};var Ua=class{constructor(e){this.formatIgnoreStart="format-ignore-start";this.formatIgnoreEnd="format-ignore-end";this.htmlFormatter=null;this.asyncHtmlFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.asyncPhpFormatter=null;this.slugs=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.structureLines=[];this.parentTransformer=null;this.tagPairs=new Map;this.conditions=[];this.inlineIfs=new Map;this.createExraStructuralPairs=!1;this.spanNodes=new Map;this.inlineNodes=new Map;this.virtualBlocks=[];this.inlineComments=new Map;this.blockComments=[];this.dynamicElementAntlers=new Map;this.dynamicElementAntlersNodes=new Map;this.dynamicElementPairedAntlers=new Map;this.dynamicElementPairedAntlersNodes=new Map;this.dynamicElementConditionAntlers=new Map;this.dynamicElementConditionAntlersNodes=new Map;this.noParses=new Map;this.forceBreaks=[];this.inlineFormatter=null;this.asyncInlineFormatter=null;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.isInsideIgnoreFormatter=!1;this.forceCleanLines=["{{ if ","{{ /if","{{ /unless","{{ /noparse","{{ else","{{ unless"];this.doc=e,this.options={tabSize:4,newlinesAfterFrontMatter:1,maxAntlersStatementsPerLine:3,endNewline:!0}}withInlineFormatter(e){return this.inlineFormatter=e,this}withAsyncInlineFormatter(e){return this.asyncInlineFormatter=e,this}produceExtraStructuralPairs(e){return this.createExraStructuralPairs=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withAsyncHtmlFormatter(e){return this.asyncHtmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}withAsyncPhpFormatter(e){return this.asyncPhpFormatter=e,this}withOptions(e){return this.options=e,this.options.tabSize<=0&&(this.options.tabSize=4),this.options.newlinesAfterFrontMatter<0&&(this.options.newlinesAfterFrontMatter=1),this}setParentTransformer(e){return this.parentTransformer=e,this}close(e){return"</"+e+">"}open(e){return"<"+e+">"}selfClosing(e){return"<"+e+" />"}selfClosingNs(e){return"<"+e+"/>"}pair(e,t=""){return"<"+e+">"+t+"</"+e+">"}makeSlug(e){let t=J.makeSlug(e);return this.slugs.includes(t)?this.makeSlug(e+1):(this.slugs.push(t),t)}transformInlineConditions(e){let t=e;return this.inlineIfs.forEach((r,i)=>{t=t.replace(i,r.nodeContent)}),t}registerCondition(e){this.parentTransformer!=null?this.parentTransformer.registerCondition(e):this.conditions.push(e)}registerInlineCondition(e,t){this.parentTransformer!=null?this.parentTransformer.registerInlineCondition(e,t):this.inlineIfs.set(e,t)}registerVirtualBlock(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualBlock(e):this.virtualBlocks.push(e)}registerNoParse(e,t){this.parentTransformer!=null?this.parentTransformer.registerNoParse(e,t):this.noParses.set(e,t)}prepareNoParse(e){let t=this.makeSlug(35);return this.registerNoParse(t,e),t}registerForcedBreak(){if(this.parentTransformer!=null)return this.parentTransformer.registerForcedBreak();{let e=this.makeSlug(15),t=this.makeSlug(10);return this.forceBreaks.push(e),this.forceBreaks.push(t),this.removeLines.push(this.open(e)),this.removeLines.push(this.close(e)),this.removeLines.push(this.selfClosing(t)),this.pair(e,this.selfClosing(t))}}transformVirtualStructures(e){let t=e;return this.virtualBlocks.forEach(r=>{this.removeLines.push(r.pairClose);let i=this.indentLevel(r.pairOpen);if(r.virtualElement.length>0&&(this.removeLines.push(this.open(r.virtualElement)),this.removeLines.push(this.close(r.virtualElement))),r.node instanceof qt){let s="{{ noparse }}"+r.node.getInnerDocumentText();t=t.replace(r.pairOpen,s)}if(r.node instanceof X){let s=r.node;t=t.replace(r.pairClose,s.isClosedBy?.getOriginalContent())}else this.removeLines.push(r.pairClose)}),this.noParses.forEach((r,i)=>{t=t.replace(i,`{{ noparse }}${r.getInnerDocumentText()}{{ /noparse }}`)}),t}async printNodeAsync(e,t=null){let r=e.getTrueNode();if((r.rawStart=="{{?"||r.rawStart=="{{$")&&this.asyncPhpFormatter!=null)try{let u=await this.asyncPhpFormatter(r.content);return`${r.rawStart} ${u} ${r.rawEnd}`}catch{}let i=this.doc;e.childDocument!=null&&(i=e.childDocument.document);let s=null;if(dn.isConditionalStructure(e)&&(s=r.runtimeName(),e.isClosingTag&&(s=="if"||s=="unless")))return`{{ /${s} }}`;if(e.isClosingTag)return r.runtimeName()=="endunless"?"{{ /unless }}":`{{ ${r.sourceContent.trim()} }}`;let a=lo.prettyPrintNode(r,i,0,this.options,s,null),l=["switch","list"];return t!=null&&a.includes(`
`)&&(e.isVirtual&&(e.name?.name=="switch"||e.name?.name=="list")?a=di.shiftIndent(a,t+this.options.tabSize,!0):a=di.shiftIndent(a,t-this.options.tabSize*2,!0)),a}printNode(e,t=null){let r=e.getTrueNode();if((r.rawStart=="{{?"||r.rawStart=="{{$")&&this.phpFormatter!=null)try{let u=this.phpFormatter(r.content);return`${r.rawStart} ${u} ${r.rawEnd}`}catch{}let i=this.doc;e.childDocument!=null&&(i=e.childDocument.document);let s=null;if(dn.isConditionalStructure(e)&&(s=r.runtimeName(),e.isClosingTag&&(s=="if"||s=="unless")))return`{{ /${s} }}`;if(e.isClosingTag)return r.runtimeName()=="endunless"?"{{ /unless }}":`{{ ${r.sourceContent.trim()} }}`;let a=lo.prettyPrintNode(r,i,0,this.options,s,null),l=["switch","list"];return t!=null&&a.includes(`
`)&&(e.isVirtual&&(e.name?.name=="switch"||e.name?.name=="list")?a=di.shiftIndent(a,t+this.options.tabSize,!0):a=di.shiftIndent(a,t-this.options.tabSize*2,!0)),a}async transformConditionsAsync(e){let t=e;for(let r=0;r<this.conditions.length;r++){let i=this.conditions[r];for(let s=0;s<i.structures.length;s++){let a=i.structures[s],l=a.branch.head;if(a.virtualBreakOpen.length>0&&this.removeLines.push(a.virtualBreakOpen),a.virtualBreakClose.length>0&&(t=t.replace(a.virtualBreakClose,a.virtualBreakClose+`
`),this.removeLines.push(a.virtualBreakClose)),this.virtualStructureOpens.push(a.virtualOpen),this.removeLines.push(a.virtualOpen),this.removeLines.push(a.virtualClose),a.isLast){let u=this.selfClosing(a.virtualSlug);if(!t.includes(u)){let f="<"+a.virtualSlug+"(\\s)+\\/>",d=new RegExp(f,"gm");t=t.replace(d,u)}t.includes(u)&&(t=t.replace(u,a.doc.trim())),t=t.replace(a.pairOpen,await this.printNodeAsync(l,this.indentLevel(a.pairOpen))),t=t.replace(a.pairClose,await this.printNodeAsync(l.isClosedBy))}else{let u=this.selfClosing(a.virtualSlug);if(!t.includes(u)){let f="<"+a.virtualSlug+"(\\s)+\\/>",d=new RegExp(f,"gm");t=t.replace(d,u)}t.includes(u)&&(t=t.replace(u,a.doc.trim())),this.removeLines.push(a.pairClose),t=t.replace(a.pairOpen,await this.printNodeAsync(l,this.indentLevel(a.pairOpen)))}}}return t}transformConditions(e){let t=e;return this.conditions.forEach(r=>{r.structures.forEach(i=>{let s=i.branch.head;if(i.virtualBreakOpen.length>0&&this.removeLines.push(i.virtualBreakOpen),i.virtualBreakClose.length>0&&(t=t.replace(i.virtualBreakClose,i.virtualBreakClose+`
`),this.removeLines.push(i.virtualBreakClose)),this.virtualStructureOpens.push(i.virtualOpen),this.removeLines.push(i.virtualOpen),this.removeLines.push(i.virtualClose),i.isLast){let a=this.selfClosing(i.virtualSlug);if(!t.includes(a)){let l="<"+i.virtualSlug+"(\\s)+\\/>",u=new RegExp(l,"gm");t=t.replace(u,a)}t.includes(a)&&(t=t.replace(a,i.doc.trim())),t=t.replace(i.pairOpen,this.printNode(s,this.indentLevel(i.pairOpen))),t=t.replace(i.pairClose,this.printNode(s.isClosedBy))}else{let a=this.selfClosing(i.virtualSlug);if(!t.includes(a)){let l="<"+i.virtualSlug+"(\\s)+\\/>",u=new RegExp(l,"gm");t=t.replace(u,a)}t.includes(a)&&(t=t.replace(a,i.doc.trim())),this.removeLines.push(i.pairClose),t=t.replace(i.pairOpen,this.printNode(s,this.indentLevel(i.pairOpen)))}})}),t}getAntlersChildDoc(e){return e.childDocument!=null?e.childDocument.document.transform().setParentTransformer(this).toStructure():this.clone().toStructure(e.getImmediateChildren())}prepareCondition(e){let t=e.logicBranches[0].head;if(t.fragmentPosition==2||t.fragmentPosition==1){let u=this.makeSlug(e.nodeContent.length);return this.registerInlineCondition(u,e),u}if(t.fragmentPosition==0)return this.prepareDynamicCondition(e);let r=[],i="";t.prev instanceof X&&t.prev.isInlineAntlers&&(i+=this.registerForcedBreak()),e.logicBranches.forEach((u,f)=>{let d=u.head,h=this.getAntlersChildDoc(u),_=this.makeSlug(d.sourceContent.length),b=this.makeSlug(10),g={branch:u,slug:_,doc:h,pairOpen:this.open(_),pairClose:this.close(_),virtualOpen:this.open(b),virtualClose:this.close(b),virtualSlug:b,isFirst:f==0,isLast:f==e.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(u.head?.name?.getCompoundTagName()=="else"){i+=`
`+g.pairOpen;let v=this.makeSlug(25);this.createExraStructuralPairs&&u.head.containsChildStructures==!1&&u.head.containsAnyFragments==!1?(g.virtualBreakOpen=this.open(v),g.virtualBreakClose=this.close(v),g.virtualSlug=v,i+=`
`+this.selfClosing(v),i+=g.pairClose+`
`):(g.virtualBreakOpen=this.selfClosing(v),i+=g.virtualBreakOpen+`
`,i+=h,i+=`
`+g.pairClose)}else if(this.createExraStructuralPairs&&u.head?.containsAnyFragments==!1&&u.head?.containsChildStructures==!1){let v=this.makeSlug(25);g.virtualBreakOpen=this.open(v),g.virtualBreakClose=this.close(v),g.virtualSlug=v,i+=`
`+g.pairOpen,i+=`
`+this.selfClosing(v),i+=g.pairClose+`
`}else i+=g.pairOpen,i+=`
`,i+=h,i+=`
`,i+=g.pairClose;r.push(g)});let s=r[0].pairOpen,a=r[r.length-1].pairClose,l={pairOpen:s,pairClose:a,structures:r,condition:e};return this.registerCondition(l),i}registerPairedAntlers(e,t){this.parentTransformer!=null?this.parentTransformer.registerPairedAntlers(e,t):this.tagPairs.set(e,t)}preparePairedAntlers(e){let t=this.makeSlug(e.getOriginalContent().length),r=this.getAntlersChildDoc(e);if(e.fragmentPosition!=0){let i="",s="";if(e.prev instanceof X&&e.prev.isPaired()==!1&&(s+=this.registerForcedBreak()),s+=`${this.open(t)}
`,e.containsChildStructures==!1&&e.containsAnyFragments==!1){let a=!1,l=!0,u=!0,f=0;for(let h=0;h<e.children.length;h++){let _=e.children[h];if(_ instanceof nt&&_.sourceContent.trim().length>0){a=!0,l=!1;break}}e.children.length==2&&e.children[0]instanceof X&&(a=!0);let d=0;for(let h=0;h<e.children.length-1;h++){let _=e.children[h];_ instanceof X&&(f+=1,_.isInlineAntlers?d+=1:u=!1)}d==0&&(a=!0),u==!1&&(a=!1),l==!1&&f==0&&(a=!1),a?(i=this.makeSlug(15),s+=this.pair(i,r)):s+=r}else s+=r;return s+=`
${this.close(t)}
`,this.virtualStructureOpens.push(this.open(i)),this.virtualStructureClose.push(this.close(i)),this.virtualStructureClose.push(this.close(t)),this.registerPairedAntlers(t,{innerDoc:r,slug:t,tag:e,virtualElementSlug:i,isInline:!1}),s}return this.prepareConditionalAntlersPair(e)}registerInlineAntlers(e){if((e.fragmentPosition==2||e.fragmentPosition==1)&&(e.isInlineAntlers=!0),this.parentTransformer!=null)return this.parentTransformer.registerInlineAntlers(e);{let t=this.makeSlug(e.getOriginalContent().length);return e.isInlineAntlers?(this.spanNodes.set(t,e),t):(this.inlineNodes.set(t,e),this.selfClosing(t))}}registerVirtualComment(e){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(e):this.blockComments.push(e)}registerComment(e,t){this.parentTransformer!=null?this.parentTransformer.registerComment(e,t):this.inlineComments.set(e,t)}prepareComment(e){let t=e.getContent();if(t.trim().includes(`
`)){let s=this.makeSlug(10),a=this.makeSlug(10),l={node:e,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(a)};return this.registerVirtualComment(l),l.pairOpen+`
`+l.virtualElement+`
`+l.pairClose}let i=this.makeSlug(t.length);return this.registerComment(i,e),this.selfClosing(i)}registerDynamicAntlersPair(e,t){this.parentTransformer!=null?(this.dynamicElementPairedAntlers.set(t.nodeContent,e),this.parentTransformer.registerDynamicAntlersPair(e,t)):(this.dynamicElementPairedAntlers.set(t.nodeContent,e),this.dynamicElementPairedAntlersNodes.set(e,t))}prepareConditionalAntlersPair(e){if(this.dynamicElementPairedAntlers.has(e.nodeContent))return this.dynamicElementPairedAntlers.get(e.nodeContent);let t=this.makeSlug(e.nodeContent.length);return this.registerDynamicAntlersPair(t,e),t}registerDynamicCondition(e,t){this.parentTransformer!=null?(this.dynamicElementConditionAntlers.set(t.nodeContent,e),this.parentTransformer.registerDynamicCondition(e,t)):(this.dynamicElementConditionAntlers.set(t.nodeContent,e),this.dynamicElementConditionAntlersNodes.set(e,t))}prepareDynamicCondition(e){if(this.dynamicElementConditionAntlers.has(e.nodeContent))return this.dynamicElementConditionAntlers.get(e.nodeContent);let t=this.makeSlug(e.nodeContent.length);return this.registerDynamicCondition(t,e),t}registerDynamicAntlers(e,t){this.parentTransformer!=null?(this.dynamicElementAntlers.set(t.content,e),this.parentTransformer.registerDynamicAntlers(e,t)):(this.dynamicElementAntlers.set(t.content,e),this.dynamicElementAntlersNodes.set(e,t))}prepareConditionalAntlers(e){if(this.dynamicElementAntlers.has(e.content))return this.dynamicElementAntlers.get(e.content);let t=this.makeSlug(e.content.length);return this.registerDynamicAntlers(t,e),t}prepareAntlers(e){return e.isClosedBy!=null?this.preparePairedAntlers(e):e.fragmentPosition==0?this.prepareConditionalAntlers(e):this.registerInlineAntlers(e)}async transformDynamicAntlersAsync(e){let t=e;for(let[r,i]of this.dynamicElementAntlersNodes){let s=await this.printNodeAsync(i);t=pn(t,r,s)}return this.dynamicElementPairedAntlersNodes.forEach((r,i)=>{let s=r.nodeContent;t=pn(t,i,s)}),this.dynamicElementConditionAntlersNodes.forEach((r,i)=>{let s=r.nodeContent;t=pn(t,i,s)}),t}async transformPairedAntlersAsync(e){let t=e;for(let[r,i]of this.tagPairs){let s=i.tag;if(i.virtualElementSlug.length>0){let u=this.open(i.virtualElementSlug),f=this.close(i.virtualElementSlug);this.virtualStructureOpens.push(u),this.removeLines.push(u),this.removeLines.push(f)}let a=this.open(r),l=this.close(r);t=t.replace(a,await this.printNodeAsync(s,this.indentLevel(a))),t=t.replace(l,await this.printNodeAsync(s.isClosedBy))}return t}async transformInlineAntlersAsync(e){let t=e;for(let[r,i]of this.inlineNodes){let s=this.selfClosing(r),a=this.selfClosingNs(r),l=await this.printNodeAsync(i,this.indentLevel(s));t=t.replace(s,l),t=t.replace(a,l)}for(let[r,i]of this.spanNodes){let s=0;i.isVirtual&&(i.name?.name=="switch"||i.name?.name=="list")&&(s=this.indentLevel(r,!0));let a=await this.printNodeAsync(i,s),l=this.selfClosingNs(r);t=t.replace(r,a),t=t.replace(l,a)}return t}transformDynamicAntlers(e){let t=e;return this.dynamicElementAntlersNodes.forEach((r,i)=>{let s=this.printNode(r);t=pn(t,i,s)}),this.dynamicElementPairedAntlersNodes.forEach((r,i)=>{let s=r.nodeContent;t=pn(t,i,s)}),this.dynamicElementConditionAntlersNodes.forEach((r,i)=>{let s=r.nodeContent;t=pn(t,i,s)}),t}transformPairedAntlers(e){let t=e;return this.tagPairs.forEach((r,i)=>{let s=r.tag;if(r.virtualElementSlug.length>0){let u=this.open(r.virtualElementSlug),f=this.close(r.virtualElementSlug);this.virtualStructureOpens.push(u),this.removeLines.push(u),this.removeLines.push(f)}let a=this.open(i),l=this.close(i);t=t.replace(a,this.printNode(s,this.indentLevel(a))),t=t.replace(l,this.printNode(s.isClosedBy))}),t}transformInlineAntlers(e){let t=e;return this.inlineNodes.forEach((r,i)=>{let s=this.selfClosing(i),a=this.selfClosingNs(i),l=this.printNode(r,this.indentLevel(s));t=t.replace(s,l),t=t.replace(a,l)}),this.spanNodes.forEach((r,i)=>{let s=0;r.isVirtual&&(r.name?.name=="switch"||r.name?.name=="list")&&(s=this.indentLevel(i,!0));let a=this.printNode(r,s),l=this.selfClosingNs(i);t=t.replace(i,a),t=t.replace(l,a)}),t}async transformCommentsAsync(e){let t=e;for(let[r,i]of this.inlineComments){let s=this.selfClosing(r),a=await ao.printCommentAsync(i,this.options.tabSize,0,this.asyncInlineFormatter);t=t.replace(s,a)}for(let r=0;r<this.blockComments.length;r++){let i=this.blockComments[r],s=i.node,a=await ao.printCommentAsync(s,this.options.tabSize,this.indentLevel(i.pairOpen),this.asyncInlineFormatter);t=t.replace(i.pairOpen,a),this.removeLines.push(i.pairClose),this.removeLines.push(i.virtualElement)}return t}transformComments(e){let t=e;return this.inlineComments.forEach((r,i)=>{let s=this.selfClosing(i),a=ao.printComment(r,this.options.tabSize,0,this.inlineFormatter);t=t.replace(s,a)}),this.blockComments.forEach(r=>{let i=r.node,s=ao.printComment(i,this.options.tabSize,this.indentLevel(r.pairOpen),this.inlineFormatter);t=t.replace(r.pairOpen,s),this.removeLines.push(r.pairClose),this.removeLines.push(r.virtualElement)}),t}clone(){let e=new Ua(this.doc);return e.withOptions(this.options).setParentTransformer(this),e}toStructure(e=null){let t="";return e==null&&(e=this.doc.getDocumentParser().getRenderNodes()),e.forEach(r=>{if(this.isInsideIgnoreFormatter){if(this.ignoredLiteralBlocks.get(this.activeLiteralSlug)?.push(r),r instanceof X&&r.isComment&&r.content.trim().toLowerCase()==this.formatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}r instanceof nt?r.sourceContent==""?t+=r.content:t+=r.sourceContent:r instanceof Xt?t+=this.prepareCondition(r):r instanceof qt?t+=this.prepareNoParse(r):r instanceof X&&(r.isComment?r.content.trim()==this.formatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.ignoredLiteralBlocks.set(this.activeLiteralSlug,[]),this.ignoredLiteralBlocks.get(this.activeLiteralSlug)?.push(r),t+=this.selfClosing(this.activeLiteralSlug)):t+=this.prepareComment(r):t+=this.prepareAntlers(r))}),t}indentLevel(e,t=!1){for(let r=0;r<this.structureLines.length;r++){let i=this.structureLines[r];if(i.includes(e)){let s=i.trimLeft(),a=i.length-s.length;return t&&(a+=i.indexOf(e)),a}}return 0}shouldCleanAfter(e){for(let t=0;t<this.removeLines.length;t++)if(e.startsWith(this.removeLines[t]))return!0;for(let t=0;t<this.forceCleanLines.length;t++)if(e.startsWith(this.forceCleanLines[t]))return!0;return!1}shouldCleanLine(e){for(let t=0;t<this.forceCleanLines.length;t++){let r=e.trim();if(e.startsWith(this.forceCleanLines[t])||r.startsWith("{{ /")&&r.endsWith("}}"))return!0}return!1}cleanVirtualStructures(e){let t=[],r=J.breakByNewLine(e),i=!1;for(let s=0;s<r.length;s++){let a=r[s].trim();if(i){if(a.length==0)continue;i=!1}else i=this.shouldCleanAfter(a);if(this.shouldCleanLine(a))for(let l=t.length-1;l>0&&t[l].trim().length==0;l--)t.pop();if(!this.removeLines.includes(a)){let l=r[s];this.removeLines.forEach(u=>{l.includes(u)&&(l=l.replace(u,""))}),t.push(l)}}return t.join(`
`)}applyFragmentReplacements(e,t,r){let i=e;return t.forEach((s,a)=>{let l=this.indentLevel(a),u=s.outerContent;if(l>0){let f=u.length-u.trimStart().length;(f==0||f>l)&&(u=di.shiftIndentLTrim(u,l).trimStart())}i=i.replace(a,u)}),i}reflowSlugs(e){let t=e;return this.slugs.forEach(r=>{let i=this.open(r),s=this.close(r),a=this.selfClosing(r),l="/<"+r+"(.*?)>/gms",u="/</"+r+"(.*?)>/gms",f="/<"+r+"(.*?)/>/gms";t=t.replace(l,i),t=t.replace(u,s),t=t.replace(f,a)}),t}cleanLines(e){let t=J.breakByNewLine(e),r=[],i=!1,s=0,a=!1,l=!1;for(let u=0;u<t.length;u++){let f=t[u].trim(),d=t[u];if(f.startsWith("{{")){f.endsWith("}}")?l=!1:l=!0,f.startsWith("{{#")&&(l=!1),i&&(s=0),f.startsWith("{{ /")==!1?a=!0:a=!1,i=!0,r.push(d);continue}if(!i)r.push(d);else{if(l){r.push(d),d.trim().endsWith("}}")&&(l=!1);continue}if(f.length==0){if(a==!1){s=0,i=!1;continue}s+=1;continue}else a&&s>1&&r.push(""),s=0,r.push(d),i=!1}}return r.join(`
`)}async fromStructureAsync(e){let t=this.reflowSlugs(e);this.structureLines=J.breakByNewLine(t);let r=this.transformInlineConditions(t);if(r=await this.transformConditionsAsync(r),r=await this.transformInlineAntlersAsync(r),r=await this.transformCommentsAsync(r),r=this.transformVirtualStructures(r),r=await this.transformDynamicAntlersAsync(r),r=await this.transformPairedAntlersAsync(r),r=this.cleanVirtualStructures(r),r=this.cleanLines(r),this.doc.hasFrontMatter()){let i=this.doc.getFrontMatter(),s=this.doc.getFrontMatterDoc();s!=null&&s.isValid&&this.yamlFormatter!=null&&(i=this.yamlFormatter(i)),r=`---
${i}
---
`+`
`.repeat(this.options.newlinesAfterFrontMatter)+r.trimLeft()}return r=r.trimRight(),this.ignoredLiteralBlocks.forEach((i,s)=>{let a=this.selfClosing(s),l=this.indentLevel(a);r=r.replace(a,this.dumpPreservedNodes(i,l))}),this.options.endNewline&&(r+=`
`),r}fromStructure(e){let t=this.reflowSlugs(e);this.structureLines=J.breakByNewLine(t);let r=this.transformInlineConditions(t);if(r=this.transformConditions(r),r=this.transformInlineAntlers(r),r=this.transformComments(r),r=this.transformVirtualStructures(r),r=this.transformDynamicAntlers(r),r=this.transformPairedAntlers(r),r=this.cleanVirtualStructures(r),r=this.cleanLines(r),this.doc.hasFrontMatter()){let i=this.doc.getFrontMatter(),s=this.doc.getFrontMatterDoc();s!=null&&s.isValid&&this.yamlFormatter!=null&&(i=this.yamlFormatter(i)),r=`---
${i}
---
`+`
`.repeat(this.options.newlinesAfterFrontMatter)+r.trimLeft()}return r=r.trimRight(),this.ignoredLiteralBlocks.forEach((i,s)=>{let a=this.selfClosing(s),l=this.indentLevel(a);r=r.replace(a,this.dumpPreservedNodes(i,l))}),this.options.endNewline&&(r+=`
`),r}dumpPreservedNodes(e,t){let r="";return e.forEach(i=>{if(i instanceof nt)r+=i.sourceContent;else if(i instanceof Xt)r+=i.nodeContent;else if(i instanceof qt)r+=i.documentText;else if(i instanceof X){if(i.isComment){if(i.content.trim().toLowerCase()==this.formatIgnoreEnd){let s=r.split(`
`);s.length>0&&s[s.length-1].trim().length==0&&(s.pop(),s.push(""),r=s.join(`
`)),r+=" ".repeat(t)+"{{#"+i.content+"#}}"}else r+="{{#"+i.content+"#}}";return}i.isPaired()?r+=i.nodeContent:r+="{{"+i.content+"}}"}}),r}};var UP=Me(xm(),1);var $f=class{constructor(){this.content="";this.ranges=[];this.lastDocumentOffsetKey=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.keys=[];this.values=[];this.isValid=!1;this.parseError=null}loadString(e){this.content=J.normalizeLineEndings(e);let t=null;try{t=UP.default.parseDocument(this.content),this.isValid=!0}catch(d){this.isValid=!1,this.parseError=d}if(t==null)return;let r=[...this.content.matchAll(/(\n)/gm)],i=r.length,s=2,a=null,l=0,u=0;for(let d=0;d<i;d++){let h=r[d],_=h.index??0,b=_;a!=null?b=_-a:b=b+1,this.documentOffsets.set(_,{char:b,line:s});let g=0,v=0;d==0?(v=b-1,g=0):(g=u+1,v=_),this.lineIndex.set(s,{char:b,line:s,startIndex:g,endIndex:v}),this.lastDocumentOffsetKey=_,s+=1,a=_,u=v,l=g}let f=t.contents;this.processMap(f)}processMap(e){typeof e.items>"u"||e.items.forEach(t=>{this.processItem(t)})}processItem(e){if(e.type=="PAIR"){if(e.value instanceof tc||e.value instanceof qa){let s=e.key;if(s.range!=null){let a=this.positionFromOffset(s.range[0],s.range[0]),l=this.positionFromOffset(s.range[1],s.range[1]);this.ranges.push({start:a,end:l,length:l.char-a.char+1,content:"property"}),this.keys.push({start:a,end:l,length:l.char-a.char+1,content:s.value}),e.value instanceof qa?this.processMap(e.value.items[0]):this.processMap(e.value);return}}let t=e,r=t.key,i=t.value;if(r.range!=null&&i.range!=null){let s=this.positionFromOffset(r.range[0],r.range[0]),a=this.positionFromOffset(r.range[1],r.range[1]),l=this.positionFromOffset(i.range[0],i.range[0]),u=this.positionFromOffset(i.range[1],i.range[1]),f="string";parseInt(i.value)==i.value&&(f="number"),this.ranges.push({start:s,end:a,length:a.char-s.char+1,content:"property"}),this.keys.push({start:s,end:a,length:a.char-s.char+1,content:r.value}),this.ranges.push({start:l,end:u,length:u.char-l.char+1,content:f}),this.values.push({start:l,end:u,length:u.char-l.char+1,content:i.value})}}}positionFromOffset(e,t,r=!1){let i=0,s=0;if(this.documentOffsets.has(e)){let l=this.documentOffsets.get(e);i=l.line,s=l.char}else if(this.documentOffsets.size==0)i=1,s=e+1;else{let l=null,u=null,f=null,d=null;for(let h of this.documentOffsets.keys()){if(h>=e){d!=null&&e>d?(l=f,u=d):(l=this.documentOffsets.get(h),u=h);break}f=this.documentOffsets.get(h),d=h}if(l==null&&(l=f,u=d),l!=null)if(r){let h=this.content.split(""),_=e-(u??0),b=l.char-(u??0)+e;s=_,i=l.line,e<=(u??0)?(i=l.line,s=e+1):i=l.line+1}else{let h=this.content.split(""),_=e-(u??0),b=l.char-(u??0)+e;s=_,i=l.line,e<=(u??0)?(i=l.line,s=e+1):i=l.line+1}else this.lastDocumentOffsetKey!=null&&(i=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,s=e+this.lastDocumentOffsetKey)}let a=new fn;return a.index=t,a.offset=e,a.line=i,a.char=s,a}getRanges(){return this.ranges}getKeys(){return this.keys}getValues(){return this.values}};var Dt=class{constructor(){this.documentParser=new V;this.transformer=null;this.originalText="";this.ranges=new Hf(this);this.nodes=new Wf(this);this.cursor=new Af(this);this.errors=new Pf(this);this.project=null;this.documentUri=""}static fromText(e,t){let r=new Dt;return typeof t<"u"&&(r.project=t),r.loadString(e)}static childFromText(e,t=null){let r=new Dt;return t!=null&&r.getDocumentParser().setSeedPosition(t),r.getDocumentParser().withChildDocuments(!0),r.loadString(e),{renderNodes:r.getDocumentParser().getRenderNodes(),content:e,document:r}}isValid(){return!(this.hasInvalidControlFlowStructures()||this.hasUnclosedStructures())}getDocumentOptions(){let e=this.getAllNodes();if(e.length==0||!(e[0]instanceof X))return null;let t=e[0];return t.isComment==!1?null:pl(this.documentUri,t)}isFormattingEnabled(){let e=this.getDocumentOptions();return e==null?!0:e.formatterEnabled}hasInvalidControlFlowStructures(){return this.documentParser.hasUnclosedIfStructures()}hasUnclosedStructures(){return this.documentParser.hasUnclosedStructures()}getFrontMatterDoc(){if(this.hasFrontMatter()){let e=new $f;return e.loadString(this.getFrontMatter()),e}return null}hasFrontMatter(){return this.documentParser.getFrontMatter().trim().length>0}getFrontMatter(){return this.documentParser.getFrontMatter()}getFrontMatterScope(){if(this.project==null)return null;let e=new Gf(this.project);return e.parse(this.getFrontMatter()),e.getScope()}updateProject(e){this.project=e,this.updateProjectDetails()}updateProjectDetails(){try{if(this.project!=null){let e=new df(this.project,this.documentUri,this),t=this.documentParser.antlersNodes();t.forEach(r=>{if(this.project!=null&&_n.instance?.canResolveSpecialTypes(r.getTagName())){let i=_n.instance?.resolveSpecialType(r.getTagName(),r,this.project);i.context!=null&&(r.reference=i.context)}}),e.analyzeScope(t);for(let r=0;r<t.length;r++){let i=t[r];if(i.hasParameters)for(let s=0;s<i.parameters.length;s++){let a=i.parameters[s];if(a.hasInterpolations())for(let l=0;l<a.interpolations.length;l++){let u=a.interpolations[l];i.processedInterpolationRegions.has(u)&&i.processedInterpolationRegions.get(u).forEach(d=>{d instanceof X&&(d.currentScope=i.currentScope)})}}}$I(this)}}catch(e){console.log(e)}}loadString(e){return this.originalText=e,this.documentParser.parse(e),this.updateProjectDetails(),this}getDocumentParser(){return this.documentParser}getParsedContent(){return this.documentParser.getParsedContent()}getAllNodes(){return this.documentParser.getNodes()}getAllAntlersNodes(){return this.documentParser.antlersNodes()}extractText(){let e=[];return this.nodes.getAllLiteralNodes().forEach(t=>{e.push(t.content)}),e.join("")}getNameAt(e){let t=this.nodes.getNodeAt(e);return t instanceof X?t.name:null}getLinesAround(e){return this.documentParser.getLinesAround(e)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}reloadDocument(){this.loadString(this.originalText)}getFeaturesAt(e){let t=this.nodes.getNodeAt(e);return fi.resolveContext(e,t,this,!1,t)}getText(e,t){return this.documentParser.getText(e,t)}charLeftAt(e){return this.documentParser.charLeftAt(e)}charAt(e){return this.documentParser.charAt(e)}charRightAt(e){return this.documentParser.charRightAt(e)}getLineIndex(e){return this.documentParser.getLineIndex(e)}getLineText(e){return this.documentParser.getLineText(e)}wordAt(e,t=4){return this.documentParser.wordAt(e,t)}wordLeftAt(e,t=4){return this.documentParser.wordLeftAt(e,t)}wordRightAt(e,t=4){return this.documentParser.wordRightAt(e,t)}punctuationLeftAt(e,t=4){return this.documentParser.punctuationLeftAt(e,t)}punctuationRightAt(e,t=4){return this.documentParser.punctuationRightAt(e,t)}getLineChars(e){let t=this.getLineText(e);return t!=null?t.split(""):null}transform(){return this.transformer==null&&(this.transformer=new Ua(this)),this.transformer}};var D1={checkNode(n){let e=[];if(n.isClosedBy==null||n.parent==null||!(n.parent instanceof X))return e;let t=n.parent;if(t.isClosedBy==null)return e;let r=n.runtimeName();return r=="if"||r=="if:index"||r=="else"||r=="else:index"||r=="elseif"||r=="elseif:index"||r=="elseunless"||r=="elseunless:index"||t.isClosedBy.startPosition?.isBefore(n.isClosedBy.endPosition)&&(e.push(Q.makeSyntaxError(P.LINT_INTERLEAVED_TAG_PAIRS,n,"Closing tag cannot appear after parent closing tag.")),e.push(Q.makeSyntaxError(P.LINT_INTERLEAVED_TAG_PAIRS,n.isClosedBy,"Closing tag cannot appear after parent closing tag."))),e}},Am=D1;var Kf=class{constructor(){this.htmlFormatter=null;this.asyncHtmlFormatter=null;this.asyncPhpFormatter=null;this.yamlFormatter=null;this.phpFormatter=null;this.preFormatter=null;this.transformOptions=null;this.createExtraVirtualStructures=!1}withTransformOptions(e){return this.transformOptions=e,this}withPreFormatter(e){return this.preFormatter=e,this}withHtmlFormatter(e){return this.htmlFormatter=e,this}withAsyncHtmlFormatter(e){return this.asyncHtmlFormatter=e,this}withYamlFormatter(e){return this.yamlFormatter=e,this}withPhpFormatter(e){return this.phpFormatter=e,this}withAsyncPhpFormatter(e){return this.asyncPhpFormatter=e,this}formatText(e,t){let r=new Dt;return r.getDocumentParser().withChildDocuments(!0),r.loadString(e),this.formatDocument(r,t)}async formatTextAsync(e,t){let r=new Dt;return r.getDocumentParser().withChildDocuments(!0),r.loadString(e),await this.formatDocumentAsync(r,t)}async formatDocumentAsync(e,t){if(!e.isFormattingEnabled())return e.getOriginalContent();let r=e,i=e.getDocumentParser().getFragmentsContainingStructures(),s=new Map;if(i.length>0){let d=e.getOriginalContent();i.forEach(h=>{let _=J.makeSlug(64);d=d.replace(h.outerContent,_),s.set(_,h)}),r=Dt.fromText(d)}if(this.preFormatter!=null){let d=this.preFormatter(r);if(d!=null)return d}let a=r.getAllAntlersNodes();for(let d=0;d<a.length;d++)if(Am.checkNode(a[d],t).length>0)return e.getOriginalContent();if(this.asyncHtmlFormatter==null||r.isValid()==!1)return r.getOriginalContent();r.transform().withAsyncInlineFormatter(d=>this.formatTextAsync(d,t)).produceExtraStructuralPairs(this.createExtraVirtualStructures).withAsyncHtmlFormatter(this.asyncHtmlFormatter).withAsyncPhpFormatter(this.asyncPhpFormatter).withYamlFormatter(this.yamlFormatter),this.transformOptions!=null&&r.transform().withOptions(this.transformOptions);let l=r.transform().toStructure(),u=await this.asyncHtmlFormatter(l),f=await r.transform().fromStructureAsync(u);return i.length>0&&(f=r.transform().applyFragmentReplacements(f,s,this.transformOptions?.tabSize??4)),f}formatDocument(e,t){if(!e.isFormattingEnabled())return e.getOriginalContent();let r=e,i=e.getDocumentParser().getFragmentsContainingStructures(),s=new Map;if(i.length>0){let d=e.getOriginalContent();i.forEach(h=>{let _=J.makeSlug(64);d=d.replace(h.outerContent,_),s.set(_,h)}),r=Dt.fromText(d)}if(this.preFormatter!=null){let d=this.preFormatter(r);if(d!=null)return d}let a=r.getAllAntlersNodes();for(let d=0;d<a.length;d++)if(Am.checkNode(a[d],t).length>0)return e.getOriginalContent();if(this.htmlFormatter==null||r.isValid()==!1)return r.getOriginalContent();r.transform().withInlineFormatter(d=>this.formatText(d,t)).produceExtraStructuralPairs(this.createExtraVirtualStructures).withHtmlFormatter(this.htmlFormatter).withPhpFormatter(this.phpFormatter).withYamlFormatter(this.yamlFormatter),this.transformOptions!=null&&r.transform().withOptions(this.transformOptions);let l=r.transform().toStructure(),u=this.htmlFormatter(l),f=r.transform().fromStructure(u);return i.length>0&&(f=r.transform().applyFragmentReplacements(f,s,this.transformOptions?.tabSize??4)),f}};import*as Pm from"prettier";var HP=Me(GP(),1),YP,$P;function WP(n){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(e=>{delete n[e]}),n}function Qf(n){$P=WP(Object.assign({},n,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:n.plugins})),YP=WP(Object.assign({},n,{parser:"php",plugins:[HP.default]}))}async function KP(n){let e=(await Pm.format("<?php "+n,YP)).trim();return e=e.substring(5),n.endsWith(";")==!1&&e.endsWith(";")&&(e=e.substring(0,e.length-1)),e.trim()}function zP(n){return Pm.format(n,$P)}function fv(n){return typeof n>"u"||n===null}function M1(n){return typeof n=="object"&&n!==null}function V1(n){return Array.isArray(n)?n:fv(n)?[]:[n]}function B1(n,e){var t,r,i,s;if(e)for(s=Object.keys(e),t=0,r=s.length;t<r;t+=1)i=s[t],n[i]=e[i];return n}function q1(n,e){var t="",r;for(r=0;r<e;r+=1)t+=n;return t}function U1(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var j1=fv,G1=M1,W1=V1,H1=q1,Y1=U1,$1=B1,jt={isNothing:j1,isObject:G1,toArray:W1,repeat:H1,isNegativeZero:Y1,extend:$1};function dv(n,e){var t="",r=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),r+" "+t):r}function rc(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=dv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}rc.prototype=Object.create(Error.prototype);rc.prototype.constructor=rc;rc.prototype.toString=function(e){return this.name+": "+dv(this,e)};var Bn=rc;function vm(n,e,t,r,i){var s="",a="",l=Math.floor(i/2)-1;return r-e>l&&(s=" ... ",e=r-l+s.length),t-r>l&&(a=" ...",t=r+l-a.length),{str:s+n.slice(e,t).replace(/\t/g,"\u2192")+a,pos:r-e+s.length}}function Cm(n,e){return jt.repeat(" ",e-n.length)+n}function K1(n,e){if(e=Object.create(e||null),!n.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,r=[0],i=[],s,a=-1;s=t.exec(n.buffer);)i.push(s.index),r.push(s.index+s[0].length),n.position<=s.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",u,f,d=Math.min(n.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)f=vm(n.buffer,r[a-u],i[a-u],n.position-(r[a]-r[a-u]),h),l=jt.repeat(" ",e.indent)+Cm((n.line-u+1).toString(),d)+" | "+f.str+`
`+l;for(f=vm(n.buffer,r[a],i[a],n.position,h),l+=jt.repeat(" ",e.indent)+Cm((n.line+1).toString(),d)+" | "+f.str+`
`,l+=jt.repeat("-",e.indent+d+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=i.length);u++)f=vm(n.buffer,r[a+u],i[a+u],n.position-(r[a]-r[a+u]),h),l+=jt.repeat(" ",e.indent)+Cm((n.line+u+1).toString(),d)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var z1=K1,Q1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],X1=["scalar","sequence","mapping"];function J1(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(r){e[String(r)]=t})}),e}function Z1(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Q1.indexOf(t)===-1)throw new Bn('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=J1(e.styleAliases||null),X1.indexOf(this.kind)===-1)throw new Bn('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var ln=Z1;function QP(n,e){var t=[];return n[e].forEach(function(r){var i=t.length;t.forEach(function(s,a){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=a)}),t[i]=r}),t}function eF(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(i){i.multi?(n.multi[i.kind].push(i),n.multi.fallback.push(i)):n[i.kind][i.tag]=n.fallback[i.tag]=i}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}function Em(n){return this.extend(n)}Em.prototype.extend=function(e){var t=[],r=[];if(e instanceof ln)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Bn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof ln))throw new Bn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Bn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Bn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof ln))throw new Bn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Em.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=QP(i,"implicit"),i.compiledExplicit=QP(i,"explicit"),i.compiledTypeMap=eF(i.compiledImplicit,i.compiledExplicit),i};var tF=Em,nF=new ln("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),rF=new ln("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),iF=new ln("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),sF=new tF({explicit:[nF,rF,iF]});function oF(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}function aF(){return null}function lF(n){return n===null}var cF=new ln("tag:yaml.org,2002:null",{kind:"scalar",resolve:oF,construct:aF,predicate:lF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function uF(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}function fF(n){return n==="true"||n==="True"||n==="TRUE"}function dF(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var pF=new ln("tag:yaml.org,2002:bool",{kind:"scalar",resolve:uF,construct:fF,predicate:dF,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function hF(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function mF(n){return 48<=n&&n<=55}function gF(n){return 48<=n&&n<=57}function TF(n){if(n===null)return!1;var e=n.length,t=0,r=!1,i;if(!e)return!1;if(i=n[t],(i==="-"||i==="+")&&(i=n[++t]),i==="0"){if(t+1===e)return!0;if(i=n[++t],i==="b"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(!hF(n.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(t++;t<e;t++)if(i=n[t],i!=="_"){if(!mF(n.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;t<e;t++)if(i=n[t],i!=="_"){if(!gF(n.charCodeAt(t)))return!1;r=!0}return!(!r||i==="_")}function _F(n){var e=n,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function yF(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!jt.isNegativeZero(n)}var bF=new ln("tag:yaml.org,2002:int",{kind:"scalar",resolve:TF,construct:_F,predicate:yF,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),NF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function IF(n){return!(n===null||!NF.test(n)||n[n.length-1]==="_")}function xF(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var AF=/^[-+]?[0-9]+e/;function PF(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(jt.isNegativeZero(n))return"-0.0";return t=n.toString(10),AF.test(t)?t.replace("e",".e"):t}function vF(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||jt.isNegativeZero(n))}var CF=new ln("tag:yaml.org,2002:float",{kind:"scalar",resolve:IF,construct:xF,predicate:vF,represent:PF,defaultStyle:"lowercase"}),SF=sF.extend({implicit:[cF,pF,bF,CF]}),EF=SF,pv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),hv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function RF(n){return n===null?!1:pv.exec(n)!==null||hv.exec(n)!==null}function kF(n){var e,t,r,i,s,a,l,u=0,f=null,d,h,_;if(e=pv.exec(n),e===null&&(e=hv.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(t,r,i));if(s=+e[4],a=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],h=+(e[11]||0),f=(d*60+h)*6e4,e[9]==="-"&&(f=-f)),_=new Date(Date.UTC(t,r,i,s,a,l,u)),f&&_.setTime(_.getTime()-f),_}function wF(n){return n.toISOString()}var OF=new ln("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:RF,construct:kF,instanceOf:Date,represent:wF});function LF(n){return n==="<<"||n===null}var DF=new ln("tag:yaml.org,2002:merge",{kind:"scalar",resolve:LF}),Lm=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function FF(n){if(n===null)return!1;var e,t,r=0,i=n.length,s=Lm;for(t=0;t<i;t++)if(e=s.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function MF(n){var e,t,r=n.replace(/[\r\n=]/g,""),i=r.length,s=Lm,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|s.indexOf(r.charAt(e));return t=i%4*6,t===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):t===18?(l.push(a>>10&255),l.push(a>>2&255)):t===12&&l.push(a>>4&255),new Uint8Array(l)}function VF(n){var e="",t=0,r,i,s=n.length,a=Lm;for(r=0;r<s;r++)r%3===0&&r&&(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]),t=(t<<8)+n[r];return i=s%3,i===0?(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]):i===2?(e+=a[t>>10&63],e+=a[t>>4&63],e+=a[t<<2&63],e+=a[64]):i===1&&(e+=a[t>>2&63],e+=a[t<<4&63],e+=a[64],e+=a[64]),e}function BF(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var qF=new ln("tag:yaml.org,2002:binary",{kind:"scalar",resolve:FF,construct:MF,predicate:BF,represent:VF}),UF=Object.prototype.hasOwnProperty,jF=Object.prototype.toString;function GF(n){if(n===null)return!0;var e=[],t,r,i,s,a,l=n;for(t=0,r=l.length;t<r;t+=1){if(i=l[t],a=!1,jF.call(i)!=="[object Object]")return!1;for(s in i)if(UF.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function WF(n){return n!==null?n:[]}var HF=new ln("tag:yaml.org,2002:omap",{kind:"sequence",resolve:GF,construct:WF}),YF=Object.prototype.toString;function $F(n){if(n===null)return!0;var e,t,r,i,s,a=n;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1){if(r=a[e],YF.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}function KF(n){if(n===null)return[];var e,t,r,i,s,a=n;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1)r=a[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}var zF=new ln("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:$F,construct:KF}),QF=Object.prototype.hasOwnProperty;function XF(n){if(n===null)return!0;var e,t=n;for(e in t)if(QF.call(t,e)&&t[e]!==null)return!1;return!0}function JF(n){return n!==null?n:{}}var ZF=new ln("tag:yaml.org,2002:set",{kind:"mapping",resolve:XF,construct:JF}),mv=EF.extend({implicit:[OF,DF],explicit:[qF,HF,zF,ZF]}),bs=Object.prototype.hasOwnProperty,Xf=1,gv=2,Tv=3,Jf=4,Sm=1,eM=2,XP=3,tM=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,nM=/[\x85\u2028\u2029]/,rM=/[,\[\]\{\}]/,_v=/^(?:!|!!|![a-z\-]+!)$/i,yv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function JP(n){return Object.prototype.toString.call(n)}function pi(n){return n===10||n===13}function uo(n){return n===9||n===32}function qn(n){return n===9||n===32||n===10||n===13}function Ga(n){return n===44||n===91||n===93||n===123||n===125}function iM(n){var e;return 48<=n&&n<=57?n-48:(e=n|32,97<=e&&e<=102?e-97+10:-1)}function sM(n){return n===120?2:n===117?4:n===85?8:0}function oM(n){return 48<=n&&n<=57?n-48:-1}function ZP(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"\x85":n===95?"\xA0":n===76?"\u2028":n===80?"\u2029":""}function aM(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}var bv=new Array(256),Nv=new Array(256);for(co=0;co<256;co++)bv[co]=ZP(co)?1:0,Nv[co]=ZP(co);var co;function lM(n,e){this.input=n,this.filename=e.filename||null,this.schema=e.schema||mv,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Iv(n,e){var t={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return t.snippet=z1(t),new Bn(e,t)}function be(n,e){throw Iv(n,e)}function Zf(n,e){n.onWarning&&n.onWarning.call(null,Iv(n,e))}var ev={YAML:function(e,t,r){var i,s,a;e.version!==null&&be(e,"duplication of %YAML directive"),r.length!==1&&be(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&be(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),a=parseInt(i[2],10),s!==1&&be(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Zf(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var i,s;r.length!==2&&be(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],_v.test(i)||be(e,"ill-formed tag handle (first argument) of the TAG directive"),bs.call(e.tagMap,i)&&be(e,'there is a previously declared suffix for "'+i+'" tag handle'),yv.test(s)||be(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{be(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function ys(n,e,t,r){var i,s,a,l;if(e<t){if(l=n.input.slice(e,t),r)for(i=0,s=l.length;i<s;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||be(n,"expected valid JSON character");else tM.test(l)&&be(n,"the stream contains non-printable characters");n.result+=l}}function tv(n,e,t,r){var i,s,a,l;for(jt.isObject(t)||be(n,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),a=0,l=i.length;a<l;a+=1)s=i[a],bs.call(e,s)||(e[s]=t[s],r[s]=!0)}function Wa(n,e,t,r,i,s,a,l,u){var f,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,d=i.length;f<d;f+=1)Array.isArray(i[f])&&be(n,"nested arrays are not supported inside keys"),typeof i=="object"&&JP(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&JP(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(f=0,d=s.length;f<d;f+=1)tv(n,e,s[f],t);else tv(n,e,s,t);else!n.json&&!bs.call(t,i)&&bs.call(e,i)&&(n.line=a||n.line,n.lineStart=l||n.lineStart,n.position=u||n.position,be(n,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete t[i];return e}function Dm(n){var e;e=n.input.charCodeAt(n.position),e===10?n.position++:e===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):be(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}function Vt(n,e,t){for(var r=0,i=n.input.charCodeAt(n.position);i!==0;){for(;uo(i);)i===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),i=n.input.charCodeAt(++n.position);if(e&&i===35)do i=n.input.charCodeAt(++n.position);while(i!==10&&i!==13&&i!==0);if(pi(i))for(Dm(n),i=n.input.charCodeAt(n.position),r++,n.lineIndent=0;i===32;)n.lineIndent++,i=n.input.charCodeAt(++n.position);else break}return t!==-1&&r!==0&&n.lineIndent<t&&Zf(n,"deficient indentation"),r}function nd(n){var e=n.position,t;return t=n.input.charCodeAt(e),!!((t===45||t===46)&&t===n.input.charCodeAt(e+1)&&t===n.input.charCodeAt(e+2)&&(e+=3,t=n.input.charCodeAt(e),t===0||qn(t)))}function Fm(n,e){e===1?n.result+=" ":e>1&&(n.result+=jt.repeat(`
`,e-1))}function cM(n,e,t){var r,i,s,a,l,u,f,d,h=n.kind,_=n.result,b;if(b=n.input.charCodeAt(n.position),qn(b)||Ga(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(i=n.input.charCodeAt(n.position+1),qn(i)||t&&Ga(i)))return!1;for(n.kind="scalar",n.result="",s=a=n.position,l=!1;b!==0;){if(b===58){if(i=n.input.charCodeAt(n.position+1),qn(i)||t&&Ga(i))break}else if(b===35){if(r=n.input.charCodeAt(n.position-1),qn(r))break}else{if(n.position===n.lineStart&&nd(n)||t&&Ga(b))break;if(pi(b))if(u=n.line,f=n.lineStart,d=n.lineIndent,Vt(n,!1,-1),n.lineIndent>=e){l=!0,b=n.input.charCodeAt(n.position);continue}else{n.position=a,n.line=u,n.lineStart=f,n.lineIndent=d;break}}l&&(ys(n,s,a,!1),Fm(n,n.line-u),s=a=n.position,l=!1),uo(b)||(a=n.position+1),b=n.input.charCodeAt(++n.position)}return ys(n,s,a,!1),n.result?!0:(n.kind=h,n.result=_,!1)}function uM(n,e){var t,r,i;if(t=n.input.charCodeAt(n.position),t!==39)return!1;for(n.kind="scalar",n.result="",n.position++,r=i=n.position;(t=n.input.charCodeAt(n.position))!==0;)if(t===39)if(ys(n,r,n.position,!0),t=n.input.charCodeAt(++n.position),t===39)r=n.position,n.position++,i=n.position;else return!0;else pi(t)?(ys(n,r,i,!0),Fm(n,Vt(n,!1,e)),r=i=n.position):n.position===n.lineStart&&nd(n)?be(n,"unexpected end of the document within a single quoted scalar"):(n.position++,i=n.position);be(n,"unexpected end of the stream within a single quoted scalar")}function fM(n,e){var t,r,i,s,a,l;if(l=n.input.charCodeAt(n.position),l!==34)return!1;for(n.kind="scalar",n.result="",n.position++,t=r=n.position;(l=n.input.charCodeAt(n.position))!==0;){if(l===34)return ys(n,t,n.position,!0),n.position++,!0;if(l===92){if(ys(n,t,n.position,!0),l=n.input.charCodeAt(++n.position),pi(l))Vt(n,!1,e);else if(l<256&&bv[l])n.result+=Nv[l],n.position++;else if((a=sM(l))>0){for(i=a,s=0;i>0;i--)l=n.input.charCodeAt(++n.position),(a=iM(l))>=0?s=(s<<4)+a:be(n,"expected hexadecimal character");n.result+=aM(s),n.position++}else be(n,"unknown escape sequence");t=r=n.position}else pi(l)?(ys(n,t,r,!0),Fm(n,Vt(n,!1,e)),t=r=n.position):n.position===n.lineStart&&nd(n)?be(n,"unexpected end of the document within a double quoted scalar"):(n.position++,r=n.position)}be(n,"unexpected end of the stream within a double quoted scalar")}function dM(n,e){var t=!0,r,i,s,a=n.tag,l,u=n.anchor,f,d,h,_,b,g=Object.create(null),v,O,E,C;if(C=n.input.charCodeAt(n.position),C===91)d=93,b=!1,l=[];else if(C===123)d=125,b=!0,l={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=l),C=n.input.charCodeAt(++n.position);C!==0;){if(Vt(n,!0,e),C=n.input.charCodeAt(n.position),C===d)return n.position++,n.tag=a,n.anchor=u,n.kind=b?"mapping":"sequence",n.result=l,!0;t?C===44&&be(n,"expected the node content, but found ','"):be(n,"missed comma between flow collection entries"),O=v=E=null,h=_=!1,C===63&&(f=n.input.charCodeAt(n.position+1),qn(f)&&(h=_=!0,n.position++,Vt(n,!0,e))),r=n.line,i=n.lineStart,s=n.position,Ha(n,e,Xf,!1,!0),O=n.tag,v=n.result,Vt(n,!0,e),C=n.input.charCodeAt(n.position),(_||n.line===r)&&C===58&&(h=!0,C=n.input.charCodeAt(++n.position),Vt(n,!0,e),Ha(n,e,Xf,!1,!0),E=n.result),b?Wa(n,l,g,O,v,E,r,i,s):h?l.push(Wa(n,null,g,O,v,E,r,i,s)):l.push(v),Vt(n,!0,e),C=n.input.charCodeAt(n.position),C===44?(t=!0,C=n.input.charCodeAt(++n.position)):t=!1}be(n,"unexpected end of the stream within a flow collection")}function pM(n,e){var t,r,i=Sm,s=!1,a=!1,l=e,u=0,f=!1,d,h;if(h=n.input.charCodeAt(n.position),h===124)r=!1;else if(h===62)r=!0;else return!1;for(n.kind="scalar",n.result="";h!==0;)if(h=n.input.charCodeAt(++n.position),h===43||h===45)Sm===i?i=h===43?XP:eM:be(n,"repeat of a chomping mode identifier");else if((d=oM(h))>=0)d===0?be(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?be(n,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(uo(h)){do h=n.input.charCodeAt(++n.position);while(uo(h));if(h===35)do h=n.input.charCodeAt(++n.position);while(!pi(h)&&h!==0)}for(;h!==0;){for(Dm(n),n.lineIndent=0,h=n.input.charCodeAt(n.position);(!a||n.lineIndent<l)&&h===32;)n.lineIndent++,h=n.input.charCodeAt(++n.position);if(!a&&n.lineIndent>l&&(l=n.lineIndent),pi(h)){u++;continue}if(n.lineIndent<l){i===XP?n.result+=jt.repeat(`
`,s?1+u:u):i===Sm&&s&&(n.result+=`
`);break}for(r?uo(h)?(f=!0,n.result+=jt.repeat(`
`,s?1+u:u)):f?(f=!1,n.result+=jt.repeat(`
`,u+1)):u===0?s&&(n.result+=" "):n.result+=jt.repeat(`
`,u):n.result+=jt.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,t=n.position;!pi(h)&&h!==0;)h=n.input.charCodeAt(++n.position);ys(n,t,n.position,!1)}return!0}function nv(n,e){var t,r=n.tag,i=n.anchor,s=[],a,l=!1,u;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=s),u=n.input.charCodeAt(n.position);u!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,be(n,"tab characters must not be used in indentation")),!(u!==45||(a=n.input.charCodeAt(n.position+1),!qn(a))));){if(l=!0,n.position++,Vt(n,!0,-1)&&n.lineIndent<=e){s.push(null),u=n.input.charCodeAt(n.position);continue}if(t=n.line,Ha(n,e,Tv,!1,!0),s.push(n.result),Vt(n,!0,-1),u=n.input.charCodeAt(n.position),(n.line===t||n.lineIndent>e)&&u!==0)be(n,"bad indentation of a sequence entry");else if(n.lineIndent<e)break}return l?(n.tag=r,n.anchor=i,n.kind="sequence",n.result=s,!0):!1}function hM(n,e,t){var r,i,s,a,l,u,f=n.tag,d=n.anchor,h={},_=Object.create(null),b=null,g=null,v=null,O=!1,E=!1,C;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=h),C=n.input.charCodeAt(n.position);C!==0;){if(!O&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,be(n,"tab characters must not be used in indentation")),r=n.input.charCodeAt(n.position+1),s=n.line,(C===63||C===58)&&qn(r))C===63?(O&&(Wa(n,h,_,b,g,null,a,l,u),b=g=v=null),E=!0,O=!0,i=!0):O?(O=!1,i=!0):be(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,C=r;else{if(a=n.line,l=n.lineStart,u=n.position,!Ha(n,t,gv,!1,!0))break;if(n.line===s){for(C=n.input.charCodeAt(n.position);uo(C);)C=n.input.charCodeAt(++n.position);if(C===58)C=n.input.charCodeAt(++n.position),qn(C)||be(n,"a whitespace character is expected after the key-value separator within a block mapping"),O&&(Wa(n,h,_,b,g,null,a,l,u),b=g=v=null),E=!0,O=!1,i=!1,b=n.tag,g=n.result;else if(E)be(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=f,n.anchor=d,!0}else if(E)be(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=f,n.anchor=d,!0}if((n.line===s||n.lineIndent>e)&&(O&&(a=n.line,l=n.lineStart,u=n.position),Ha(n,e,Jf,!0,i)&&(O?g=n.result:v=n.result),O||(Wa(n,h,_,b,g,v,a,l,u),b=g=v=null),Vt(n,!0,-1),C=n.input.charCodeAt(n.position)),(n.line===s||n.lineIndent>e)&&C!==0)be(n,"bad indentation of a mapping entry");else if(n.lineIndent<e)break}return O&&Wa(n,h,_,b,g,null,a,l,u),E&&(n.tag=f,n.anchor=d,n.kind="mapping",n.result=h),E}function mM(n){var e,t=!1,r=!1,i,s,a;if(a=n.input.charCodeAt(n.position),a!==33)return!1;if(n.tag!==null&&be(n,"duplication of a tag property"),a=n.input.charCodeAt(++n.position),a===60?(t=!0,a=n.input.charCodeAt(++n.position)):a===33?(r=!0,i="!!",a=n.input.charCodeAt(++n.position)):i="!",e=n.position,t){do a=n.input.charCodeAt(++n.position);while(a!==0&&a!==62);n.position<n.length?(s=n.input.slice(e,n.position),a=n.input.charCodeAt(++n.position)):be(n,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!qn(a);)a===33&&(r?be(n,"tag suffix cannot contain exclamation marks"):(i=n.input.slice(e-1,n.position+1),_v.test(i)||be(n,"named tag handle cannot contain such characters"),r=!0,e=n.position+1)),a=n.input.charCodeAt(++n.position);s=n.input.slice(e,n.position),rM.test(s)&&be(n,"tag suffix cannot contain flow indicator characters")}s&&!yv.test(s)&&be(n,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{be(n,"tag name is malformed: "+s)}return t?n.tag=s:bs.call(n.tagMap,i)?n.tag=n.tagMap[i]+s:i==="!"?n.tag="!"+s:i==="!!"?n.tag="tag:yaml.org,2002:"+s:be(n,'undeclared tag handle "'+i+'"'),!0}function gM(n){var e,t;if(t=n.input.charCodeAt(n.position),t!==38)return!1;for(n.anchor!==null&&be(n,"duplication of an anchor property"),t=n.input.charCodeAt(++n.position),e=n.position;t!==0&&!qn(t)&&!Ga(t);)t=n.input.charCodeAt(++n.position);return n.position===e&&be(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(e,n.position),!0}function TM(n){var e,t,r;if(r=n.input.charCodeAt(n.position),r!==42)return!1;for(r=n.input.charCodeAt(++n.position),e=n.position;r!==0&&!qn(r)&&!Ga(r);)r=n.input.charCodeAt(++n.position);return n.position===e&&be(n,"name of an alias node must contain at least one character"),t=n.input.slice(e,n.position),bs.call(n.anchorMap,t)||be(n,'unidentified alias "'+t+'"'),n.result=n.anchorMap[t],Vt(n,!0,-1),!0}function Ha(n,e,t,r,i){var s,a,l,u=1,f=!1,d=!1,h,_,b,g,v,O;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,s=a=l=Jf===t||Tv===t,r&&Vt(n,!0,-1)&&(f=!0,n.lineIndent>e?u=1:n.lineIndent===e?u=0:n.lineIndent<e&&(u=-1)),u===1)for(;mM(n)||gM(n);)Vt(n,!0,-1)?(f=!0,l=s,n.lineIndent>e?u=1:n.lineIndent===e?u=0:n.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=f||i),(u===1||Jf===t)&&(Xf===t||gv===t?v=e:v=e+1,O=n.position-n.lineStart,u===1?l&&(nv(n,O)||hM(n,O,v))||dM(n,v)?d=!0:(a&&pM(n,v)||uM(n,v)||fM(n,v)?d=!0:TM(n)?(d=!0,(n.tag!==null||n.anchor!==null)&&be(n,"alias node should not have any properties")):cM(n,v,Xf===t)&&(d=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):u===0&&(d=l&&nv(n,O))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&be(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),h=0,_=n.implicitTypes.length;h<_;h+=1)if(g=n.implicitTypes[h],g.resolve(n.result)){n.result=g.construct(n.result),n.tag=g.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(bs.call(n.typeMap[n.kind||"fallback"],n.tag))g=n.typeMap[n.kind||"fallback"][n.tag];else for(g=null,b=n.typeMap.multi[n.kind||"fallback"],h=0,_=b.length;h<_;h+=1)if(n.tag.slice(0,b[h].tag.length)===b[h].tag){g=b[h];break}g||be(n,"unknown tag !<"+n.tag+">"),n.result!==null&&g.kind!==n.kind&&be(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+g.kind+'", not "'+n.kind+'"'),g.resolve(n.result,n.tag)?(n.result=g.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):be(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||d}function _M(n){var e=n.position,t,r,i,s=!1,a;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(a=n.input.charCodeAt(n.position))!==0&&(Vt(n,!0,-1),a=n.input.charCodeAt(n.position),!(n.lineIndent>0||a!==37));){for(s=!0,a=n.input.charCodeAt(++n.position),t=n.position;a!==0&&!qn(a);)a=n.input.charCodeAt(++n.position);for(r=n.input.slice(t,n.position),i=[],r.length<1&&be(n,"directive name must not be less than one character in length");a!==0;){for(;uo(a);)a=n.input.charCodeAt(++n.position);if(a===35){do a=n.input.charCodeAt(++n.position);while(a!==0&&!pi(a));break}if(pi(a))break;for(t=n.position;a!==0&&!qn(a);)a=n.input.charCodeAt(++n.position);i.push(n.input.slice(t,n.position))}a!==0&&Dm(n),bs.call(ev,r)?ev[r](n,r,i):Zf(n,'unknown document directive "'+r+'"')}if(Vt(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,Vt(n,!0,-1)):s&&be(n,"directives end mark is expected"),Ha(n,n.lineIndent-1,Jf,!1,!0),Vt(n,!0,-1),n.checkLineBreaks&&nM.test(n.input.slice(e,n.position))&&Zf(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&nd(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,Vt(n,!0,-1));return}if(n.position<n.length-1)be(n,"end of the stream or a document separator is expected");else return}function xv(n,e){n=String(n),e=e||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var t=new lM(n,e),r=n.indexOf("\0");for(r!==-1&&(t.position=r,be(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)_M(t);return t.documents}function yM(n,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var r=xv(n,t);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}function bM(n,e){var t=xv(n,e);if(t.length!==0){if(t.length===1)return t[0];throw new Bn("expected a single document in the stream, but found more")}}var NM=yM,IM=bM,Av={loadAll:NM,load:IM},Pv=Object.prototype.toString,vv=Object.prototype.hasOwnProperty,Mm=65279,xM=9,ic=10,AM=13,PM=32,vM=33,CM=34,Rm=35,SM=37,EM=38,RM=39,kM=42,Cv=44,wM=45,ed=58,OM=61,LM=62,DM=63,FM=64,Sv=91,Ev=93,MM=96,Rv=123,VM=124,kv=125,cn={};cn[0]="\\0";cn[7]="\\a";cn[8]="\\b";cn[9]="\\t";cn[10]="\\n";cn[11]="\\v";cn[12]="\\f";cn[13]="\\r";cn[27]="\\e";cn[34]='\\"';cn[92]="\\\\";cn[133]="\\N";cn[160]="\\_";cn[8232]="\\L";cn[8233]="\\P";var BM=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],qM=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function UM(n,e){var t,r,i,s,a,l,u;if(e===null)return{};for(t={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)a=r[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=n.compiledTypeMap.fallback[a],u&&vv.call(u.styleAliases,l)&&(l=u.styleAliases[l]),t[a]=l;return t}function jM(n){var e,t,r;if(e=n.toString(16).toUpperCase(),n<=255)t="x",r=2;else if(n<=65535)t="u",r=4;else if(n<=4294967295)t="U",r=8;else throw new Bn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+jt.repeat("0",r-e.length)+e}var GM=1,sc=2;function WM(n){this.schema=n.schema||mv,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=jt.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=UM(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?sc:GM,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function rv(n,e){for(var t=jt.repeat(" ",e),r=0,i=-1,s="",a,l=n.length;r<l;)i=n.indexOf(`
`,r),i===-1?(a=n.slice(r),r=l):(a=n.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(s+=t),s+=a;return s}function km(n,e){return`
`+jt.repeat(" ",n.indent*e)}function HM(n,e){var t,r,i;for(t=0,r=n.implicitTypes.length;t<r;t+=1)if(i=n.implicitTypes[t],i.resolve(e))return!0;return!1}function td(n){return n===PM||n===xM}function oc(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==Mm||65536<=n&&n<=1114111}function iv(n){return oc(n)&&n!==Mm&&n!==AM&&n!==ic}function sv(n,e,t){var r=iv(n),i=r&&!td(n);return(t?r:r&&n!==Cv&&n!==Sv&&n!==Ev&&n!==Rv&&n!==kv)&&n!==Rm&&!(e===ed&&!i)||iv(e)&&!td(e)&&n===Rm||e===ed&&i}function YM(n){return oc(n)&&n!==Mm&&!td(n)&&n!==wM&&n!==DM&&n!==ed&&n!==Cv&&n!==Sv&&n!==Ev&&n!==Rv&&n!==kv&&n!==Rm&&n!==EM&&n!==kM&&n!==vM&&n!==VM&&n!==OM&&n!==LM&&n!==RM&&n!==CM&&n!==SM&&n!==FM&&n!==MM}function $M(n){return!td(n)&&n!==ed}function nc(n,e){var t=n.charCodeAt(e),r;return t>=55296&&t<=56319&&e+1<n.length&&(r=n.charCodeAt(e+1),r>=56320&&r<=57343)?(t-55296)*1024+r-56320+65536:t}function wv(n){var e=/^\n* /;return e.test(n)}var Ov=1,wm=2,Lv=3,Dv=4,ja=5;function KM(n,e,t,r,i,s,a,l){var u,f=0,d=null,h=!1,_=!1,b=r!==-1,g=-1,v=YM(nc(n,0))&&$M(nc(n,n.length-1));if(e||a)for(u=0;u<n.length;f>=65536?u+=2:u++){if(f=nc(n,u),!oc(f))return ja;v=v&&sv(f,d,l),d=f}else{for(u=0;u<n.length;f>=65536?u+=2:u++){if(f=nc(n,u),f===ic)h=!0,b&&(_=_||u-g-1>r&&n[g+1]!==" ",g=u);else if(!oc(f))return ja;v=v&&sv(f,d,l),d=f}_=_||b&&u-g-1>r&&n[g+1]!==" "}return!h&&!_?v&&!a&&!i(n)?Ov:s===sc?ja:wm:t>9&&wv(n)?ja:a?s===sc?ja:wm:_?Dv:Lv}function zM(n,e,t,r,i){n.dump=function(){if(e.length===0)return n.quotingType===sc?'""':"''";if(!n.noCompatMode&&(BM.indexOf(e)!==-1||qM.test(e)))return n.quotingType===sc?'"'+e+'"':"'"+e+"'";var s=n.indent*Math.max(1,t),a=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-s),l=r||n.flowLevel>-1&&t>=n.flowLevel;function u(f){return HM(n,f)}switch(KM(e,l,n.indent,a,u,n.quotingType,n.forceQuotes&&!r,i)){case Ov:return e;case wm:return"'"+e.replace(/'/g,"''")+"'";case Lv:return"|"+ov(e,n.indent)+av(rv(e,s));case Dv:return">"+ov(e,n.indent)+av(rv(QM(e,a),s));case ja:return'"'+XM(e)+'"';default:throw new Bn("impossible error: invalid scalar style")}}()}function ov(n,e){var t=wv(n)?String(e):"",r=n[n.length-1]===`
`,i=r&&(n[n.length-2]===`
`||n===`
`),s=i?"+":r?"":"-";return t+s+`
`}function av(n){return n[n.length-1]===`
`?n.slice(0,-1):n}function QM(n,e){for(var t=/(\n+)([^\n]*)/g,r=function(){var f=n.indexOf(`
`);return f=f!==-1?f:n.length,t.lastIndex=f,lv(n.slice(0,f),e)}(),i=n[0]===`
`||n[0]===" ",s,a;a=t.exec(n);){var l=a[1],u=a[2];s=u[0]===" ",r+=l+(!i&&!s&&u!==""?`
`:"")+lv(u,e),i=s}return r}function lv(n,e){if(n===""||n[0]===" ")return n;for(var t=/ [^ ]/g,r,i=0,s,a=0,l=0,u="";r=t.exec(n);)l=r.index,l-i>e&&(s=a>i?a:l,u+=`
`+n.slice(i,s),i=s+1),a=l;return u+=`
`,n.length-i>e&&a>i?u+=n.slice(i,a)+`
`+n.slice(a+1):u+=n.slice(i),u.slice(1)}function XM(n){for(var e="",t=0,r,i=0;i<n.length;t>=65536?i+=2:i++)t=nc(n,i),r=cn[t],!r&&oc(t)?(e+=n[i],t>=65536&&(e+=n[i+1])):e+=r||jM(t);return e}function JM(n,e,t){var r="",i=n.tag,s,a,l;for(s=0,a=t.length;s<a;s+=1)l=t[s],n.replacer&&(l=n.replacer.call(t,String(s),l)),(Fi(n,e,l,!1,!1)||typeof l>"u"&&Fi(n,e,null,!1,!1))&&(r!==""&&(r+=","+(n.condenseFlow?"":" ")),r+=n.dump);n.tag=i,n.dump="["+r+"]"}function cv(n,e,t,r){var i="",s=n.tag,a,l,u;for(a=0,l=t.length;a<l;a+=1)u=t[a],n.replacer&&(u=n.replacer.call(t,String(a),u)),(Fi(n,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Fi(n,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=km(n,e)),n.dump&&ic===n.dump.charCodeAt(0)?i+="-":i+="- ",i+=n.dump);n.tag=s,n.dump=i||"[]"}function ZM(n,e,t){var r="",i=n.tag,s=Object.keys(t),a,l,u,f,d;for(a=0,l=s.length;a<l;a+=1)d="",r!==""&&(d+=", "),n.condenseFlow&&(d+='"'),u=s[a],f=t[u],n.replacer&&(f=n.replacer.call(t,u,f)),Fi(n,e,u,!1,!1)&&(n.dump.length>1024&&(d+="? "),d+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),Fi(n,e,f,!1,!1)&&(d+=n.dump,r+=d));n.tag=i,n.dump="{"+r+"}"}function eV(n,e,t,r){var i="",s=n.tag,a=Object.keys(t),l,u,f,d,h,_;if(n.sortKeys===!0)a.sort();else if(typeof n.sortKeys=="function")a.sort(n.sortKeys);else if(n.sortKeys)throw new Bn("sortKeys must be a boolean or a function");for(l=0,u=a.length;l<u;l+=1)_="",(!r||i!=="")&&(_+=km(n,e)),f=a[l],d=t[f],n.replacer&&(d=n.replacer.call(t,f,d)),Fi(n,e+1,f,!0,!0,!0)&&(h=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,h&&(n.dump&&ic===n.dump.charCodeAt(0)?_+="?":_+="? "),_+=n.dump,h&&(_+=km(n,e)),Fi(n,e+1,d,!0,h)&&(n.dump&&ic===n.dump.charCodeAt(0)?_+=":":_+=": ",_+=n.dump,i+=_));n.tag=s,n.dump=i||"{}"}function uv(n,e,t){var r,i,s,a,l,u;for(i=t?n.explicitTypes:n.implicitTypes,s=0,a=i.length;s<a;s+=1)if(l=i[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(t?l.multi&&l.representName?n.tag=l.representName(e):n.tag=l.tag:n.tag="?",l.represent){if(u=n.styleMap[l.tag]||l.defaultStyle,Pv.call(l.represent)==="[object Function]")r=l.represent(e,u);else if(vv.call(l.represent,u))r=l.represent[u](e,u);else throw new Bn("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');n.dump=r}return!0}return!1}function Fi(n,e,t,r,i,s,a){n.tag=null,n.dump=t,uv(n,t,!1)||uv(n,t,!0);var l=Pv.call(n.dump),u=r,f;r&&(r=n.flowLevel<0||n.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,_;if(d&&(h=n.duplicates.indexOf(t),_=h!==-1),(n.tag!==null&&n.tag!=="?"||_||n.indent!==2&&e>0)&&(i=!1),_&&n.usedDuplicates[h])n.dump="*ref_"+h;else{if(d&&_&&!n.usedDuplicates[h]&&(n.usedDuplicates[h]=!0),l==="[object Object]")r&&Object.keys(n.dump).length!==0?(eV(n,e,n.dump,i),_&&(n.dump="&ref_"+h+n.dump)):(ZM(n,e,n.dump),_&&(n.dump="&ref_"+h+" "+n.dump));else if(l==="[object Array]")r&&n.dump.length!==0?(n.noArrayIndent&&!a&&e>0?cv(n,e-1,n.dump,i):cv(n,e,n.dump,i),_&&(n.dump="&ref_"+h+n.dump)):(JM(n,e,n.dump),_&&(n.dump="&ref_"+h+" "+n.dump));else if(l==="[object String]")n.tag!=="?"&&zM(n,n.dump,e,s,u);else{if(l==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new Bn("unacceptable kind of an object to dump "+l)}n.tag!==null&&n.tag!=="?"&&(f=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",n.dump=f+" "+n.dump)}return!0}function tV(n,e){var t=[],r=[],i,s;for(Om(n,t,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(t[r[i]]);e.usedDuplicates=new Array(s)}function Om(n,e,t){var r,i,s;if(n!==null&&typeof n=="object")if(i=e.indexOf(n),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(e.push(n),Array.isArray(n))for(i=0,s=n.length;i<s;i+=1)Om(n[i],e,t);else for(r=Object.keys(n),i=0,s=r.length;i<s;i+=1)Om(n[r[i]],e,t)}function nV(n,e){e=e||{};var t=new WM(e);t.noRefs||tV(n,t);var r=n;return t.replacer&&(r=t.replacer.call({"":r},"",r)),Fi(t,0,r,!0,!0)?t.dump+`
`:""}var rV=nV,iV={dump:rV};function Vm(n,e){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Fv=Av.load,Pte=Av.loadAll,Mv=iV.dump;var vte=Vm("safeLoad","load"),Cte=Vm("safeLoadAll","loadAll"),Ste=Vm("safeDump","dump");var rd=class{static formatFrontMatter(e){try{let t=Fv(e,{}),r=Mv(t,{indent:2,noArrayIndent:!1,condenseFlow:!1,forceQuotes:!0,noRefs:!0,skipInvalid:!0});return r.endsWith(`
`)&&(r=r.trimEnd()),r}catch{return e}}};var id=class{static printError(e,t){let r=`[${e.errorCode}] ${e.message}

`,i=e.node?.startPosition?.line,s=i;t.forEach((l,u)=>{s=u});let a=s.toString().length;return t.forEach((l,u)=>{let f=u.toString(),d="",h=0;h=a-f.length,i==u?d=" >"+"0".repeat(h)+f+"| ":d="  "+"0".repeat(h)+f+"| ",r+=d+l+`
`}),r}};var sd=class extends Kf{constructor(e){super(),this.createExtraVirtualStructures=!0,Qf(e),this.withAsyncHtmlFormatter(zP).withYamlFormatter(rd.formatFrontMatter).withTransformOptions({endNewline:!0,maxAntlersStatementsPerLine:3,newlinesAfterFrontMatter:1,tabSize:e.tabWidth}).withAsyncPhpFormatter(KP).withPreFormatter(t=>{if(t.errors.hasStructureErrors()){let r=t.errors.getFirstStructureError(),i=t.getLinesAround(r.node?.startPosition?.line??1);throw new SyntaxError(id.printError(r,i))}return null})}};var Vv,oV={formatFrontMatter:!1,showGeneralSnippetCompletions:!0,diagnostics:{warnOnDynamicCssClassNames:!0,validateTagParameters:!0,reportDiagnostics:!0},trace:{server:"off"},formatterIgnoreExtensions:["xml"],languageVersion:"runtime"},aV={languages:[{name:"Antlers",parsers:["antlers"],extensions:[".antlers.html",".antlers.php"],vscodeLanguageIds:["html","antlers"]}],parsers:{antlers:{parse:async function(n,e){Vv=e,Qf(e);let t=new Dt;t.loadString(n);let r=await new sd(Vv).formatDocumentAsync(t,oV),i=/^(\s*)<!doctype html>/im;return r=r.replace(i,"$1<!DOCTYPE html>"),{doc:t,result:r}},locStart:()=>0,locEnd:()=>0,astFormat:"antlers"}},printers:{antlers:{print(n){return n.stack[0].result}}},defaultOptions:{tabWidth:4}},F1=aV;export{F1 as default};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
